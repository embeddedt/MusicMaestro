!function o(s,a,u){function l(e,t){if(!a[e]){if(!s[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(c)return c(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var r=a[e]={exports:{}};s[e][0].call(r.exports,function(t){return l(s[e][1][t]||t)},r,r.exports,o,s,a,u)}return a[e].exports}for(var c="function"==typeof require&&require,t=0;t<u.length;t++)l(u[t]);return l}({1:[function(require,module,exports){"use strict";function getNote(t){return t?t.data("logicalNote"):null}function note_clicked(){isPlaying||void 0!==$(this).find(".vf-stavenote")[0]&&($(this).is($selectedNote)?setSelectedNote(null):setSelectedNote($(this)))}var notes_group=void 0,context,stave,notes=[],staveXPadding=10,numBeats=4,beatValue=4,svg_width=400,svg_height=.3*svg_width,currentPlayIndex,noteTimeout,staveWidth,isPlaying=!1,renderer,restMode=!1,nextDuration="4",currentGeneralMode=0;function endPlay(){setSelectedNote(null),isPlaying=!1,console.log("Remove prop"),$("#note-play").prop("disabled",!1),$("#note-stop").prop("disabled","disabled")}function playSequence(){isPlaying||($("#note-play").prop("disabled","disabled"),$("#note-stop").prop("disabled",!1),console.log("Selected note: "+$selectedNote),currentPlayIndex=-2,console.log("Start index: "+currentPlayIndex),-2===currentPlayIndex&&(currentPlayIndex=-1),isPlaying=!0,function t(){isPlaying&&++currentPlayIndex!=notes.length?setSelectedNote($(notes[currentPlayIndex].my_svg_group),t):endPlay()}())}function replaceNote(t,e){var n=!1;$selectedNote&&getNote($selectedNote)==t&&(n=!0);var i=notes.indexOf(t);if(-1==i)throw"Old note not attached";notes[i]=e,renderNotes(),n&&setSelectedNote($(e.my_svg_group))}function addNote(t){console.log("restMode is "+restMode),void 0===t||restMode?notes.push(generateNote("C","4",nextDuration)):notes.push(decodeNote(t,nextDuration)),renderNotes(),setSelectedNote($(notes[notes.length-1].my_svg_group))}function playNote(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],o=t+12;e=parseInt(e),MIDI.setVolume(0,127);var s=.75/(e/4);console.log("MIDI note "+o),i||(MIDI.noteOn(0,o,127,0),r&&MIDI.noteOff(0,o,s)),r&&n&&(noteTimeout=setTimeout(n,1e3*s))}var VF=require("vexflow").Flow,opensheetmusicdisplay=require("opensheetmusicdisplay"),intervalId,intervalTimeout;function removeNote(){if($selectedNote){var t,e=getNote($selectedNote),n=notes.indexOf(e);if(-1<n)t=n<notes.length-1?notes[n+1]:n===notes.length-1?notes[n-1]:null,notes.splice(n,1),renderNotes(),t?setSelectedNote($(t.my_svg_group),!1):setSelectedNote(null)}}function encodeNote(t){if(null!=t){var e=VF.keyProperties.note_values[t.our_keyname].int_val;return console.log("Index "+e),12*t.our_octave+e}}function decodeNote(t,e){var n=t%12,i=(t-n)/12;return generateNote(VF.integerToNote.table[n],i,e)}function addToNote(t){if($selectedNote){var e=getNote($selectedNote);if(!e.is_a_rest){var n=encodeNote(e);n+=t,console.log("Index "+n),replaceNote(e,decodeNote(n,e.getDuration()))}}}MIDI.loadPlugin({soundfontUrl:"http://gleitz.github.io/midi-js-soundfonts/FluidR3_GM/",instrument:"acoustic_grand_piano",onsuccess:startProgram});var autoRepeatDelay=100,autoRepeatWait=750;function generateNote(t,e,n){if(void 0===t)throw"Undefined keyname";if(t=t.toUpperCase(),null==n)throw"Undefined duration";var i,r=VF.keyProperties.note_values[t];i=restMode?"r/4":t+"/"+e;var o=new VF.StaveNote({clef:"treble",keys:[i],duration:n+(restMode?"r":"")});return null!=r&&null!==r.accidental&&(o=o.addAccidental(0,new VF.Accidental(r.accidental))),o.is_a_rest=restMode,o.our_keyname=t,o.our_octave=e,o}$("#note-pitch-up").tapstart(function(){addToNote(1),intervalTimeout=setTimeout(function(){intervalId=setInterval(function(){addToNote(1)},autoRepeatDelay)},autoRepeatWait)}).tapend(function(){clearInterval(intervalId),clearTimeout(intervalTimeout)}),$("#note-pitch-down").tapstart(function(){addToNote(-1),intervalTimeout=setTimeout(function(){intervalId=setInterval(function(){addToNote(-1)},autoRepeatDelay)},autoRepeatWait)}).tapend(function(){clearInterval(intervalId),clearTimeout(intervalTimeout)}),$("#note-pitch-down").add("#note-pitch-up").mouseleave(function(){$(this).tapend()}),$("#note-add").tap(function(){addNote(encodeNote(getNote($selectedNote)))}),$("#note-play").tap(function(){playSequence()}),$("#note-stop").tap(function(){isPlaying=!1,clearTimeout(noteTimeout),MIDI.stopAllNotes(),endPlay()}),$("#note-remove").tap(function(){removeNote()}),$("#note-types > label").tap(function(t){var e=$(t.target).find("input");restMode="note-type-note"!=e.attr("id")}),$("#note-durations > label").tap(function(t){var e=$(t.target).find("input");if(nextDuration=e.attr("data-duration"),console.log("Next duration: "+nextDuration),$selectedNote){var n=getNote($selectedNote);replaceNote(n,restMode?generateNote("c","4",nextDuration):decodeNote(encodeNote(n),nextDuration))}});var $selectedNote=null;function setSelectedNote(t,e){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if($selectedNote&&$selectedNote.removeClass("selected-note"),$selectedNote=t){$selectedNote.addClass("selected-note");var i=getNote($selectedNote),r=$("#note-pitch-up").add("#note-pitch-down");i.is_a_rest?(console.log("DISABLED!"),r.prop("disabled",!0)):r.prop("disabled",!1),n&&playNote(encodeNote(i),i.getDuration(),e,i.is_a_rest)}}function processMeasures(){for(var newNotes=notes.slice(),sumTicks=0,totalTicksPerMeasure=1024*numBeats*beatValue,i=0;i<newNotes.length;i++)"b"!=newNotes[i].duration?sumTicks!=totalTicksPerMeasure?(sumTicks+=eval(newNotes[i].ticks.toString()),console.log("ticks: "+sumTicks)):(newNotes.splice(i,0,new VF.BarNote),sumTicks=0):sumTicks=0;return newNotes}function renderNotes(){notes.forEach(function(t){$(t.my_svg_group).data("logicalNote",null)}),$(notes_group).remove(),notes_group=context.openGroup();var t=processMeasures(),e=VF.Beam.generateBeams(t);staveWidth=Math.max(100,85*(notes.length+1)),stave=new VF.Stave(staveXPadding,0,staveWidth),renderer.resize(staveWidth+2*staveXPadding,svg_height),$("svg").attr({preserveAspectRatio:"xMinYMid meet",viewBox:"0 0 "+(staveWidth+2*staveXPadding)+" "+svg_height}),stave.addClef("treble"),stave.setContext(context).draw();var n=new VF.Voice({num_beats:numBeats,beat_value:beatValue});n.setStrict(!1),n.addTickables(t);(new VF.Formatter).joinVoices([n]).format([n],staveWidth-20);t.forEach(function(t){t.my_svg_group=context.openGroup(),t.setStave(stave).setContext(context).draw(),context.closeGroup(),$(t.my_svg_group).data("logicalNote",t),$(t.my_svg_group).tap(note_clicked),$(t.my_svg_group).tapend(function(){console.log("mouseup")}),$(t.my_svg_group).addClass("svg-pointer-event-helper");var e=t.my_svg_group.getBBox(),n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("width",e.width),n.setAttribute("height",e.height),n.setAttribute("x",e.x),n.setAttribute("y",e.y),$(n).css({fill:"transparent"}),$(t.my_svg_group).append(n)}),e.forEach(function(t){t.setContext(context).draw()}),context.closeGroup()}var piano_strings="c;d-ef/g{a}bc",pressedKeys=[],noteCurrentlyPressed=!1;function piano_key_down(t,e){var n,i,r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],o=t.type.startsWith("tap")||t.type.startsWith("mouse");(e=e.toLowerCase(),pressedKeys[e]!=r)?-1!==piano_strings.indexOf(e)&&(-1!=(n=o?parseInt($(t.target).attr("data-index")):piano_strings.indexOf(e))?"black"==$(this).css("background-color")||(r?playNote(48+n,0,void 0,!1,!1):MIDI.noteOff(0,60+n,0),console.log("Set pressedKeys['"+e+"'] from "+pressedKeys[e]+" to "+r),pressedKeys[e]=r,noteCurrentlyPressed=r,i=o?$(t.target):$($('#piano-controls span:contains("'+e.toUpperCase()+'")')[0]).parent(),r?i.addClass("key-pressed"):i.removeClass("key-pressed")):console.log("cannot find "+e)):console.log("key "+e+" remains in state: "+r)}function piano_key_mousedown(t){console.log("mousedown"),piano_key_down(t,$(this).find("span").text(),!0)}function piano_key_mouseup(t){console.log("mouseup"),piano_key_down(t,$(this).find("span").text(),!1)}function setNoteColor(t,e){var n=getVoiceEntry(t);n.notes[0].sourceNote.noteheadColor=e,n.parentVoiceEntry.stemColor=e}function getNumNotes(){for(var t=0,e=0;e<osmd.graphic.measureList.length;e++)t+=osmd.graphic.measureList[e][0].staffEntries.length;return t}function getVoiceEntry(t){for(var e=t,n=0;n<osmd.graphic.measureList.length;n++)if((t-=osmd.graphic.measureList[n][0].staffEntries.length)<0){t+=osmd.graphic.measureList[n][0].staffEntries.length;break}return console.log(e+" found in measureList "+n),osmd.graphic.measureList[n][0].staffEntries[t].graphicalVoiceEntries[0]}function getNotePitch(t){return getVoiceEntry(t).notes[0].sourceNote.pitch.fundamentalNote}function getKeyByValue(e,n){return Object.keys(e).find(function(t){return e[t]===n})}function hslToRgb(t,e,n){var i,r,o;if(0==e)i=r=o=n;else{var s=function(t,e,n){return n<0&&(n+=1),1<n&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},a=n<.5?n*(1+e):n+e-n*e,u=2*n-a;i=s(u,a,t+1/3),r=s(u,a,t),o=s(u,a,t-1/3)}return[Math.round(255*i),Math.round(255*r),Math.round(255*o)]}function componentToHex(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function rgbToHex(t,e,n){return"#"+componentToHex(t)+componentToHex(e)+componentToHex(n)}function startComposer(){$("#all-composer-controls").show();new VF.EasyScore;(renderer=new VF.Renderer($(".music-staff-container")[0],VF.Renderer.Backends.SVG)).resize(svg_width,svg_height),$("svg").attr({preserveAspectRatio:"none",viewBox:"0 0 "+svg_width+" "+svg_height}),context=renderer.getContext();for(var t=0;t<4;t++)notes[t]=generateNote("c#","4",Math.pow(2,t).toString());renderNotes(),currentGeneralMode=1}var songids=["twinkle.musicxml","londonbridge.xml","canoesong.xml"],cmc=[];function loadSong(t){var e=document.getElementById("sheetmusic-container");$(e).empty(),console.log("Load song "+t),window.osmd=new opensheetmusicdisplay.OpenSheetMusicDisplay(e,{drawPartNames:!1,drawingParameters:"compact",coloringMode:2,coloringSetCustom:cmc,colorStemsLikeNoteheads:!0,autoResize:!1});var n=window.osmd;n.load(songids[t]).then(function(){n.EngravingRules.systemDistance=0,n.render()})}function startPerformer(){$("#which-song label").tap(function(t){console.log("Loading"),loadSong(parseInt($(t.target).find("input").attr("data-songid")))}),$("#all-performer-controls").show();for(var t=0;t<7;t++){var e=hslToRgb(t/7,1,.5);cmc.push(rgbToHex(e[0],e[1],e[2]))}cmc.push("#000000"),console.log(cmc);var n=0,i=0;for(t=0;t<14;t++){var r=$("<button></button>");$("#piano-controls").append(r),"none"==r.css("display")?r.append("<span></span>"):(r.attr("data-index",n),r.append("<span>"+piano_strings[n++].toUpperCase()+"<span>")),"rgb(0, 0, 0)"!==r.css("background-color")&&(r.css("background-color",cmc[i]),i=(i+1)%7)}currentGeneralMode=2,loadSong(0),$(document).keydown(function(t){piano_key_down(t,String.fromCharCode(t.which),!0)}),$(document).keyup(function(t){piano_key_down(t,String.fromCharCode(t.which),!1)}),$("#piano-controls button").tapstart(piano_key_mousedown),$("#piano-controls button").tapend(piano_key_mouseup),$("#piano-controls button").mouseleave(piano_key_mouseup)}function startProgram(){if($(".backButton").tap(function(){console.log("Clear hash"),window.location.hash=""}),window.location.hash){if(console.log(window.location.hash),"#compose"==window.location.hash)return void startComposer();if("#perform"==window.location.hash)return void startPerformer()}currentGeneralMode=0,$("#info").show()}window.onhashchange=function(){window.location.reload(!0)},$(window).resize(function(){2==currentGeneralMode&&window.osmd&&window.osmd.render()})},{opensheetmusicdisplay:2,vexflow:3}],2:[function(t,e,n){var i,r;i=window,r=function(){return i={},r.m=n=[function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(r.max=function(t,e){return t.RealValue>e.RealValue?t:e},r.Equal=function(t,e){return t.wholeValue===e.wholeValue&&t.Denominator===e.Denominator&&t.Numerator===e.Numerator},r.createFromFraction=function(t){return new r(t.numerator,t.denominator,t.wholeValue,!1)},r.plus=function(t,e){var n=t.clone();return n.Add(e),n},r.minus=function(t,e){var n=t.clone();return n.Sub(e),n},r.multiply=function(t,e){return new r((t.wholeValue*t.denominator+t.numerator)*(e.wholeValue*e.denominator+e.numerator),t.denominator*e.denominator)},r.greatestCommonDenominator=function(t,e){if(0===t)return e;if(1===e)return 1;for(;0!==e;)e<t?t-=e:e-=t;return t},r.prototype.toString=function(){var t=this.numerator+"/"+this.denominator;return 0!==this.wholeValue&&(t=this.wholeValue+" "+t),t},r.prototype.clone=function(){return new r(this.numerator,this.denominator,this.wholeValue,!1)},Object.defineProperty(r.prototype,"Numerator",{get:function(){return this.numerator},set:function(t){this.numerator!==t&&(this.numerator=t,this.simplify(),this.setRealValue())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Denominator",{get:function(){return this.denominator},set:function(t){this.denominator!==t&&(this.denominator=t,0!==this.numerator&&this.simplify(),this.setRealValue())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"WholeValue",{get:function(){return this.wholeValue},set:function(t){this.wholeValue!==t&&(this.wholeValue=t,this.setRealValue())},enumerable:!0,configurable:!0}),r.prototype.GetExpandedNumerator=function(){return this.wholeValue*this.denominator+this.numerator},r.prototype.IsNegative=function(){return this.realValue<0},Object.defineProperty(r.prototype,"RealValue",{get:function(){return this.realValue},enumerable:!0,configurable:!0}),r.prototype.expand=function(t){this.numerator*=t,this.denominator*=t,0!==this.wholeValue&&(this.numerator+=this.wholeValue*this.denominator,this.wholeValue=0)},r.prototype.Add=function(t){this.numerator=(this.wholeValue*this.denominator+this.numerator)*t.denominator+(t.wholeValue*t.denominator+t.numerator)*this.denominator,this.denominator=this.denominator*t.denominator,this.wholeValue=0,this.simplify(),this.setRealValue()},r.prototype.Sub=function(t){this.numerator=(this.wholeValue*this.denominator+this.numerator)*t.denominator-(t.wholeValue*t.denominator+t.numerator)*this.denominator,this.denominator=this.denominator*t.denominator,this.wholeValue=0,this.simplify(),this.setRealValue()},r.prototype.Quantize=function(t){if(this.denominator<=t)return this;for(var e=new r(this.numerator+1,this.denominator,this.wholeValue);e.Denominator>t;)e.Numerator++;if(this.numerator>this.denominator){for(var n=new r(this.numerator-1,this.denominator,this.wholeValue);n.Denominator>t;)n.Numerator--;if(n.Denominator<e.Denominator)return n}return e},r.prototype.Equals=function(t){return this.realValue===t.realValue},r.prototype.CompareTo=function(t){var e=this.realValue-t.realValue;return e?e<0?-1:1:0},r.prototype.lt=function(t){return this.realValue<t.realValue},r.prototype.lte=function(t){return this.realValue<=t.realValue},r.prototype.setRealValue=function(){this.realValue=this.wholeValue+this.numerator/this.denominator},r.prototype.simplify=function(){if(0!==this.numerator){var t=r.greatestCommonDenominator(Math.abs(this.numerator),Math.abs(this.denominator));this.numerator/=t,this.denominator/=t;var e=Math.floor(this.numerator/this.denominator);if(0!==e&&(this.wholeValue+=e,this.numerator-=e*this.denominator,0===this.numerator&&(this.denominator=1)),this.denominator>r.maximumAllowedNumber){var n=this.denominator/r.maximumAllowedNumber;this.numerator=Math.round(this.numerator/n),this.denominator=Math.round(this.denominator/n)}this.numerator>r.maximumAllowedNumber&&(n=this.numerator/r.maximumAllowedNumber,this.numerator=Math.round(this.numerator/n),this.denominator=Math.round(this.denominator/n))}else this.denominator=1},r.maximumAllowedNumber=46340,r);function r(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=1),void 0===n&&(n=0),void 0===i&&(i=!0),this.numerator=0,this.denominator=1,this.wholeValue=0,this.numerator=t,this.denominator=e,this.wholeValue=n,i&&this.simplify(),this.setRealValue()}e.Fraction=i},function(t,e,n){var i,r;!function(){"use strict";void 0===(r="function"==typeof(i=function(){var r=function(){},u="undefined",l=["trace","debug","info","warn","error"];function o(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function c(t,e){for(var n=0;n<l.length;n++){var i=l[n];this[i]=n<t?r:this.methodFactory(i,t,e)}this.log=this.debug}function h(t,e,n){return"debug"===(i=t)&&(i="log"),typeof console!==u&&(void 0!==console[i]?o(console,i):void 0!==console.log?o(console,"log"):r)||function(t,e,n){return function(){typeof console!==u&&(c.call(this,e,n),this[t].apply(this,arguments))}}.apply(this,arguments);var i}function n(n,t,e){var i,r=this,o="loglevel";function s(){var t;if(typeof window!==u){try{t=window.localStorage[o]}catch(t){}if(typeof t===u)try{var e=window.document.cookie,n=e.indexOf(encodeURIComponent(o)+"=");-1!==n&&(t=/^([^;]+)/.exec(e.slice(n))[1])}catch(t){}return void 0===r.levels[t]&&(t=void 0),t}}n&&(o+=":"+n),r.name=n,r.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},r.methodFactory=e||h,r.getLevel=function(){return i},r.setLevel=function(e,t){if("string"==typeof e&&void 0!==r.levels[e.toUpperCase()]&&(e=r.levels[e.toUpperCase()]),!("number"==typeof e&&0<=e&&e<=r.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;if(i=e,!1!==t&&function(){var t=(l[e]||"silent").toUpperCase();if(typeof window!==u){try{return window.localStorage[o]=t}catch(t){}try{window.document.cookie=encodeURIComponent(o)+"="+t+";"}catch(t){}}}(),c.call(r,e,n),typeof console===u&&e<r.levels.SILENT)return"No console available for logging"},r.setDefaultLevel=function(t){s()||r.setLevel(t,!1)},r.enableAll=function(t){r.setLevel(r.levels.TRACE,t)},r.disableAll=function(t){r.setLevel(r.levels.SILENT,t)};var a=s();null==a&&(a=null==t?"WARN":t),r.setLevel(a,!1)}var i=new n,s={};i.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=s[t];return e=e||(s[t]=new n(t,i.getLevel(),i.methodFactory))};var t=typeof window!==u?window.log:void 0;return i.noConflict=function(){return typeof window!==u&&window.log===i&&(window.log=t),i},i.getLoggers=function(){return s},i})?i.call(e,n,e,t):i)||(t.exports=r)}()},function(t,e,n){"use strict";var r,s,i,o;Object.defineProperty(e,"__esModule",{value:!0}),(o=r=e.NoteEnum||(e.NoteEnum={}))[o.C=0]="C",o[o.D=2]="D",o[o.E=4]="E",o[o.F=5]="F",o[o.G=7]="G",o[o.A=9]="A",o[o.B=11]="B",(i=s=e.AccidentalEnum||(e.AccidentalEnum={}))[i.SHARP=0]="SHARP",i[i.FLAT=1]="FLAT",i[i.NONE=2]="NONE",i[i.NATURAL=3]="NATURAL",i[i.DOUBLESHARP=4]="DOUBLESHARP",i[i.DOUBLEFLAT=5]="DOUBLEFLAT",i[i.TRIPLESHARP=6]="TRIPLESHARP",i[i.TRIPLEFLAT=7]="TRIPLEFLAT",i[i.QUARTERTONESHARP=8]="QUARTERTONESHARP",i[i.QUARTERTONEFLAT=9]="QUARTERTONEFLAT";var a=(u.getNoteEnumString=function(t){switch(t){case r.C:return"C";case r.D:return"D";case r.E:return"E";case r.F:return"F";case r.G:return"G";case r.A:return"A";case r.B:return"B";default:return""}},u.CalculateTransposedHalfTone=function(t,e){var n=t.fundamentalNote+t.AccidentalHalfTones+e;return u.WrapAroundCheck(n,12)},u.WrapAroundCheck=function(t,e){for(var n=0;t<0;)t+=e,n--;for(;e<=t;)t-=e,n++;return{overflow:n,value:t}},u.calcFrequency=function(t){var e,n=0;if(t instanceof u){var i=t;n=i.octave-1,e=i.fundamentalNote-r.A+i.AccidentalHalfTones}else"number"==typeof t&&(e=t-57);return 440*Math.pow(2,n)*Math.pow(2,e/12)},u.calcFractionalKey=function(t){return Math.log(t/440)/Math.LN10*u.halftoneFactor+57},u.fromFrequency=function(t){var e=u.calcFractionalKey(t)+.5,n=Math.floor(e/12)-u.octXmlDiff,i=Math.floor(e)%12,r=i,o=s.NONE;return-1===this.pitchEnumValues.indexOf(r)&&(r=i-1,o=s.SHARP),new u(r,n,o)},u.fromHalftone=function(t){var e=Math.floor(t/12)-u.octXmlDiff,n=t%12,i=n,r=s.NONE;return-1===this.pitchEnumValues.indexOf(i)&&(i=n-1,r=s.SHARP),new u(i,e,r)},u.ceiling=function(t){var e=t%=12;return-1===this.pitchEnumValues.indexOf(e)&&(e=t+1),e},u.floor=function(t){var e=t%=12;return-1===this.pitchEnumValues.indexOf(e)&&(e=t-1),e},u.HalfTonesFromAccidental=function(t){switch(t){case s.NONE:return 0;case s.SHARP:return 1;case s.FLAT:return-1;case s.NATURAL:return 0;case s.DOUBLESHARP:return 2;case s.DOUBLEFLAT:return-2;case s.QUARTERTONESHARP:return.5;case s.QUARTERTONEFLAT:return-.5;case s.TRIPLESHARP:return 3;case s.TRIPLEFLAT:return-3;default:throw new Error("Unhandled AccidentalEnum value")}},u.AccidentalFromHalfTones=function(t){switch(t){case 0:return s.NONE;case 1:return s.SHARP;case-1:return s.FLAT;case 2:return s.DOUBLESHARP;case-2:return s.DOUBLEFLAT;case.5:return s.QUARTERTONESHARP;case-.5:return s.QUARTERTONEFLAT;case 3:return s.TRIPLESHARP;case-3:return s.TRIPLEFLAT;default:return 0<t&&t<1?s.QUARTERTONESHARP:t<0&&-1<t?s.QUARTERTONEFLAT:s.QUARTERTONESHARP}},u.accidentalVexflow=function(t){var e;switch(t){case s.NATURAL:e="n";break;case s.FLAT:e="b";break;case s.SHARP:e="#";break;case s.DOUBLESHARP:e="##";break;case s.TRIPLESHARP:e="++";break;case s.DOUBLEFLAT:e="bb";break;case s.TRIPLEFLAT:e="bbs";break;case s.QUARTERTONESHARP:e="+";break;case s.QUARTERTONEFLAT:e="d"}return e},Object.defineProperty(u.prototype,"AccidentalHalfTones",{get:function(){return u.HalfTonesFromAccidental(this.accidental)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"Octave",{get:function(){return this.octave},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"FundamentalNote",{get:function(){return this.fundamentalNote},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"Accidental",{get:function(){return this.accidental},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"Frequency",{get:function(){return this.frequency},enumerable:!0,configurable:!0}),Object.defineProperty(u,"OctaveXmlDifference",{get:function(){return u.octXmlDiff},enumerable:!0,configurable:!0}),u.prototype.getHalfTone=function(){return this.halfTone},u.prototype.getTransposedPitch=function(t){if(12<t)throw new Error("rewrite this method to handle bigger octave changes or don't use is with bigger octave changes!");return 0<t?this.getHigherPitchByTransposeFactor(t):t<0?this.getLowerPitchByTransposeFactor(-t):this},u.prototype.DoEnharmonicChange=function(){switch(this.accidental){case s.FLAT:case s.DOUBLEFLAT:this.fundamentalNote=this.getPreviousFundamentalNote(this.fundamentalNote),this.accidental=u.AccidentalFromHalfTones(this.halfTone-(this.fundamentalNote+12*(this.octave+u.octXmlDiff)));break;case s.SHARP:case s.DOUBLESHARP:this.fundamentalNote=this.getNextFundamentalNote(this.fundamentalNote),this.accidental=u.AccidentalFromHalfTones(this.halfTone-(this.fundamentalNote+12*(this.octave+u.octXmlDiff)));break;default:return}},u.prototype.ToString=function(){var t=u.accidentalVexflow(this.accidental);return t=t||"","Key: "+u.getNoteEnumString(this.fundamentalNote)+t+", Note: "+this.fundamentalNote+", octave: "+this.octave.toString()},u.prototype.OperatorEquals=function(t){return void 0!==this&&void 0!==t&&this.FundamentalNote===t.FundamentalNote&&this.Octave===t.Octave&&this.Accidental===t.Accidental},u.prototype.OperatorNotEqual=function(t){return!(this===t)},u.prototype.getHigherPitchByTransposeFactor=function(t){var e,n=u.pitchEnumValues.indexOf(this.fundamentalNote),i=this.octave;return n+t>u.pitchEnumValues.length-1?(e=u.pitchEnumValues[n+t-u.pitchEnumValues.length],i++):e=u.pitchEnumValues[n+t],new u(e,i,s.NONE)},u.prototype.getLowerPitchByTransposeFactor=function(t){var e,n=u.pitchEnumValues.indexOf(this.fundamentalNote),i=this.octave;return n-t<0?(e=u.pitchEnumValues[u.pitchEnumValues.length+n-t],i--):e=u.pitchEnumValues[n-t],new u(e,i,s.NONE)},u.prototype.getNextFundamentalNote=function(t){var e=u.pitchEnumValues.indexOf(t);return e=(e+1)%u.pitchEnumValues.length,u.pitchEnumValues[e]},u.prototype.getPreviousFundamentalNote=function(t){var e=u.pitchEnumValues.indexOf(t);return 0<e?u.pitchEnumValues[e-1]:u.pitchEnumValues[u.pitchEnumValues.length-1]},u.pitchEnumValues=[r.C,r.D,r.E,r.F,r.G,r.A,r.B],u.halftoneFactor=12/(Math.LN2/Math.LN10),u.octXmlDiff=3,u);function u(t,e,n){this.accidental=s.NONE,this.fundamentalNote=t,this.octave=e,this.accidental=n,this.halfTone=t+12*(e+u.octXmlDiff)+u.HalfTonesFromAccidental(n),this.frequency=u.calcFrequency(this)}e.Pitch=a},function(t,a,e){"use strict";var u=e(26),l=e(157),n=e(56),i=e(223),c=e(47);function r(t){return t}function h(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}a.newBlob=function(e,n){a.checkSupport("blob");try{return new Blob([e],{type:n})}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(e),i.getBlob(n)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var o={stringifyByChunk:function(t,e,n){var i=[],r=0,o=t.length;if(o<=n)return String.fromCharCode.apply(null,t);for(;r<o;)"array"===e||"nodebuffer"===e?i.push(String.fromCharCode.apply(null,t.slice(r,Math.min(r+n,o)))):i.push(String.fromCharCode.apply(null,t.subarray(r,Math.min(r+n,o)))),r+=n;return i.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return u.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return u.nodebuffer&&1===String.fromCharCode.apply(null,n.allocBuffer(1)).length}catch(t){return!1}}()}};function s(t){var e=65536,n=a.getTypeOf(t),i=!0;if("uint8array"===n?i=o.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=o.applyCanBeUsed.nodebuffer),i)for(;1<e;)try{return o.stringifyByChunk(t,n,e)}catch(t){e=Math.floor(e/2)}return o.stringifyByChar(t)}function f(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}a.applyFromCharCode=s;var p={};p.string={string:r,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return p.string.uint8array(t).buffer},uint8array:function(t){return h(t,new Uint8Array(t.length))},nodebuffer:function(t){return h(t,n.allocBuffer(t.length))}},p.array={string:s,array:r,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return n.newBufferFrom(t)}},p.arraybuffer={string:function(t){return s(new Uint8Array(t))},array:function(t){return f(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:r,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return n.newBufferFrom(new Uint8Array(t))}},p.uint8array={string:s,array:function(t){return f(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:r,nodebuffer:function(t){return n.newBufferFrom(t)}},p.nodebuffer={string:s,array:function(t){return f(t,new Array(t.length))},arraybuffer:function(t){return p.nodebuffer.uint8array(t).buffer},uint8array:function(t){return f(t,new Uint8Array(t.length))},nodebuffer:r},a.transformTo=function(t,e){if(e=e||"",!t)return e;a.checkSupport(t);var n=a.getTypeOf(e);return p[n][t](e)},a.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":u.nodebuffer&&n.isBuffer(t)?"nodebuffer":u.uint8array&&t instanceof Uint8Array?"uint8array":u.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(t){if(!u[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(t){var e,n,i="";for(n=0;n<(t||"").length;n++)i+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return i},a.delay=function(t,e,n){i(function(){t.apply(n||null,e||[])})},a.inherits=function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n},a.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},a.prepareContent=function(i,t,r,o,s){return c.Promise.resolve(t).then(function(i){return u.blob&&(i instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(i)))&&"undefined"!=typeof FileReader?new c.Promise(function(e,n){var t=new FileReader;t.onload=function(t){e(t.target.result)},t.onerror=function(t){n(t.target.error)},t.readAsArrayBuffer(i)}):i}).then(function(t){var e,n=a.getTypeOf(t);return n?("arraybuffer"===n?t=a.transformTo("uint8array",t):"string"===n&&(s?t=l.decode(t):r&&!0!==o&&(t=h(e=t,u.uint8array?new Uint8Array(e.length):new Array(e.length)))),t):c.Promise.reject(new Error("Can't read the data of '"+i+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(58),r=n(1),o=n(9),s=n(8),a=n(32),u=(Object.defineProperty(l,"Rules",{get:function(){return void 0!==l.rules?l.rules:l.rules=new l},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SamplingUnit",{get:function(){return this.samplingUnit},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SheetTitleHeight",{get:function(){return this.sheetTitleHeight},set:function(t){this.sheetTitleHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SheetSubtitleHeight",{get:function(){return this.sheetSubtitleHeight},set:function(t){this.sheetSubtitleHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SheetMinimumDistanceBetweenTitleAndSubtitle",{get:function(){return this.sheetMinimumDistanceBetweenTitleAndSubtitle},set:function(t){this.sheetMinimumDistanceBetweenTitleAndSubtitle=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SheetComposerHeight",{get:function(){return this.sheetComposerHeight},set:function(t){this.sheetComposerHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SheetAuthorHeight",{get:function(){return this.sheetAuthorHeight},set:function(t){this.sheetAuthorHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"PagePlacement",{get:function(){return this.pagePlacementEnum},set:function(t){this.pagePlacementEnum=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"CompactMode",{get:function(){return this.compactMode},set:function(t){this.compactMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"PageHeight",{get:function(){return this.pageHeight},set:function(t){this.pageHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"PageTopMargin",{get:function(){return this.pageTopMargin},set:function(t){this.pageTopMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"PageTopMarginNarrow",{get:function(){return this.pageTopMarginNarrow},set:function(t){this.pageTopMarginNarrow=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"PageBottomMargin",{get:function(){return this.pageBottomMargin},set:function(t){this.pageBottomMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"PageLeftMargin",{get:function(){return this.pageLeftMargin},set:function(t){this.pageLeftMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"PageRightMargin",{get:function(){return this.pageRightMargin},set:function(t){this.pageRightMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TitleTopDistance",{get:function(){return this.titleTopDistance},set:function(t){this.titleTopDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TitleBottomDistance",{get:function(){return this.titleBottomDistance},set:function(t){this.titleBottomDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SystemComposerDistance",{get:function(){return this.systemComposerDistance},set:function(t){this.systemComposerDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"InstrumentLabelTextHeight",{get:function(){return this.instrumentLabelTextHeight},set:function(t){this.instrumentLabelTextHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SystemDistance",{get:function(){return this.systemDistance},set:function(t){this.systemDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SystemLeftMargin",{get:function(){return this.systemLeftMargin},set:function(t){this.systemLeftMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SystemRightMargin",{get:function(){return this.systemRightMargin},set:function(t){this.systemRightMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"FirstSystemMargin",{get:function(){return this.firstSystemMargin},set:function(t){this.firstSystemMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SystemLabelsRightMargin",{get:function(){return this.systemLabelsRightMargin},set:function(t){this.systemLabelsRightMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"MinimumAllowedDistanceBetweenSystems",{get:function(){return this.minimumAllowedDistanceBetweenSystems},set:function(t){this.minimumAllowedDistanceBetweenSystems=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"LastSystemMaxScalingFactor",{get:function(){return this.lastSystemMaxScalingFactor},set:function(t){this.lastSystemMaxScalingFactor=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"StaffDistance",{get:function(){return this.staffDistance},set:function(t){this.staffDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"BetweenStaffDistance",{get:function(){return this.betweenStaffDistance},set:function(t){this.betweenStaffDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"StaffHeight",{get:function(){return this.staffHeight},set:function(t){this.staffHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"BetweenStaffLinesDistance",{get:function(){return this.betweenStaffLinesDistance},set:function(t){this.betweenStaffLinesDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"AutoBeamNotes",{get:function(){return this.autoBeamNotes},set:function(t){this.autoBeamNotes=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"AutoBeamOptions",{get:function(){return this.autoBeamOptions},set:function(t){this.autoBeamOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"BeamWidth",{get:function(){return this.beamWidth},set:function(t){this.beamWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"BeamSpaceWidth",{get:function(){return this.beamSpaceWidth},set:function(t){this.beamSpaceWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"BeamForwardLength",{get:function(){return this.beamForwardLength},set:function(t){this.beamForwardLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"BetweenKeySymbolsDistance",{get:function(){return this.betweenKeySymbolsDistance},set:function(t){this.betweenKeySymbolsDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ClefLeftMargin",{get:function(){return this.clefLeftMargin},set:function(t){this.clefLeftMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ClefRightMargin",{get:function(){return this.clefRightMargin},set:function(t){this.clefRightMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"KeyRightMargin",{get:function(){return this.keyRightMargin},set:function(t){this.keyRightMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"RhythmRightMargin",{get:function(){return this.rhythmRightMargin},set:function(t){this.rhythmRightMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"InStaffClefScalingFactor",{get:function(){return this.inStaffClefScalingFactor},set:function(t){this.inStaffClefScalingFactor=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DistanceBetweenNaturalAndSymbolWhenCancelling",{get:function(){return this.distanceBetweenNaturalAndSymbolWhenCancelling},set:function(t){this.distanceBetweenNaturalAndSymbolWhenCancelling=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"NoteHelperLinesOffset",{get:function(){return this.noteHelperLinesOffset},set:function(t){this.noteHelperLinesOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"MeasureLeftMargin",{get:function(){return this.measureLeftMargin},set:function(t){this.measureLeftMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"MeasureRightMargin",{get:function(){return this.measureRightMargin},set:function(t){this.measureRightMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DistanceBetweenLastInstructionAndRepetitionBarline",{get:function(){return this.distanceBetweenLastInstructionAndRepetitionBarline},set:function(t){this.distanceBetweenLastInstructionAndRepetitionBarline=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ArpeggioDistance",{get:function(){return this.arpeggioDistance},set:function(t){this.arpeggioDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"StaccatoShorteningFactor",{get:function(){return this.staccatoShorteningFactor},set:function(t){this.staccatoShorteningFactor=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"IdealStemLength",{get:function(){return this.idealStemLength},set:function(t){this.idealStemLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"StemNoteHeadBorderYOffset",{get:function(){return this.stemNoteHeadBorderYOffset},set:function(t){this.stemNoteHeadBorderYOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"StemWidth",{get:function(){return this.stemWidth},set:function(t){this.stemWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"StemMargin",{get:function(){return this.stemMargin},set:function(t){this.stemMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"StemMinLength",{get:function(){return this.stemMinLength},set:function(t){this.stemMinLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"StemMaxLength",{get:function(){return this.stemMaxLength},set:function(t){this.stemMaxLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"BeamSlopeMaxAngle",{get:function(){return this.beamSlopeMaxAngle},set:function(t){this.beamSlopeMaxAngle=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"StemMinAllowedDistanceBetweenNoteHeadAndBeamLine",{get:function(){return this.stemMinAllowedDistanceBetweenNoteHeadAndBeamLine},set:function(t){this.stemMinAllowedDistanceBetweenNoteHeadAndBeamLine=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SetWantedStemDirectionByXml",{get:function(){return this.setWantedStemDirectionByXml},set:function(t){this.setWantedStemDirectionByXml=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"GraceNoteScalingFactor",{get:function(){return this.graceNoteScalingFactor},set:function(t){this.graceNoteScalingFactor=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"GraceNoteXOffset",{get:function(){return this.graceNoteXOffset},set:function(t){this.graceNoteXOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"WedgeOpeningLength",{get:function(){return this.wedgeOpeningLength},set:function(t){this.wedgeOpeningLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"WedgeMeasureEndOpeningLength",{get:function(){return this.wedgeMeasureEndOpeningLength},set:function(t){this.wedgeMeasureEndOpeningLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"WedgeMeasureBeginOpeningLength",{get:function(){return this.wedgeMeasureBeginOpeningLength},set:function(t){this.wedgeMeasureBeginOpeningLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"WedgePlacementAboveY",{get:function(){return this.wedgePlacementAboveY},set:function(t){this.wedgePlacementAboveY=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"WedgePlacementBelowY",{get:function(){return this.wedgePlacementBelowY},set:function(t){this.wedgePlacementBelowY=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"WedgeHorizontalMargin",{get:function(){return this.wedgeHorizontalMargin},set:function(t){this.wedgeHorizontalMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"WedgeVerticalMargin",{get:function(){return this.wedgeVerticalMargin},set:function(t){this.wedgeVerticalMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DistanceOffsetBetweenTwoHorizontallyCrossedWedges",{get:function(){return this.distanceOffsetBetweenTwoHorizontallyCrossedWedges},set:function(t){this.distanceOffsetBetweenTwoHorizontallyCrossedWedges=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"WedgeMinLength",{get:function(){return this.wedgeMinLength},set:function(t){this.wedgeMinLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DistanceBetweenAdjacentDynamics",{get:function(){return this.distanceBetweenAdjacentDynamics},set:function(t){this.distanceBetweenAdjacentDynamics=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TempoChangeMeasureValidity",{get:function(){return this.tempoChangeMeasureValidity},set:function(t){this.tempoChangeMeasureValidity=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TempoContinousFactor",{get:function(){return this.tempoContinousFactor},set:function(t){this.tempoContinousFactor=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"StaccatoScalingFactor",{get:function(){return this.staccatoScalingFactor},set:function(t){this.staccatoScalingFactor=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"BetweenDotsDistance",{get:function(){return this.betweenDotsDistance},set:function(t){this.betweenDotsDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"OrnamentAccidentalScalingFactor",{get:function(){return this.ornamentAccidentalScalingFactor},set:function(t){this.ornamentAccidentalScalingFactor=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ChordSymbolTextHeight",{get:function(){return this.chordSymbolTextHeight},set:function(t){this.chordSymbolTextHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ChordSymbolYOffset",{get:function(){return this.chordSymbolYOffset},set:function(t){this.chordSymbolYOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"FingeringLabelFontHeight",{get:function(){return this.fingeringLabelFontHeight},set:function(t){this.fingeringLabelFontHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"MeasureNumberLabelHeight",{get:function(){return this.measureNumberLabelHeight},set:function(t){this.measureNumberLabelHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"MeasureNumberLabelOffset",{get:function(){return this.measureNumberLabelOffset},set:function(t){this.measureNumberLabelOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TupletsRatioed",{get:function(){return this.tupletsRatioed},set:function(t){this.tupletsRatioed=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TupletsBracketed",{get:function(){return this.tupletsBracketed},set:function(t){this.tupletsBracketed=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TripletsBracketed",{get:function(){return this.tripletsBracketed},set:function(t){this.tripletsBracketed=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TupletNumberLabelHeight",{get:function(){return this.tupletNumberLabelHeight},set:function(t){this.tupletNumberLabelHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TupletNumberYOffset",{get:function(){return this.tupletNumberYOffset},set:function(t){this.tupletNumberYOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"LabelMarginBorderFactor",{get:function(){return this.labelMarginBorderFactor},set:function(t){this.labelMarginBorderFactor=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TupletVerticalLineLength",{get:function(){return this.tupletVerticalLineLength},set:function(t){this.tupletVerticalLineLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"RepetitionEndingLabelHeight",{get:function(){return this.repetitionEndingLabelHeight},set:function(t){this.repetitionEndingLabelHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"RepetitionEndingLabelXOffset",{get:function(){return this.repetitionEndingLabelXOffset},set:function(t){this.repetitionEndingLabelXOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"RepetitionEndingLabelYOffset",{get:function(){return this.repetitionEndingLabelYOffset},set:function(t){this.repetitionEndingLabelYOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"RepetitionEndingLineYLowerOffset",{get:function(){return this.repetitionEndingLineYLowerOffset},set:function(t){this.repetitionEndingLineYLowerOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"RepetitionEndingLineYUpperOffset",{get:function(){return this.repetitionEndingLineYUpperOffset},set:function(t){this.repetitionEndingLineYUpperOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"LyricsAlignmentStandard",{get:function(){return this.lyricsAlignmentStandard},set:function(t){this.lyricsAlignmentStandard=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"LyricsHeight",{get:function(){return this.lyricsHeight},set:function(t){this.lyricsHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"LyricsYOffsetToStaffHeight",{get:function(){return this.lyricsYOffsetToStaffHeight},set:function(t){this.lyricsYOffsetToStaffHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"VerticalBetweenLyricsDistance",{get:function(){return this.verticalBetweenLyricsDistance},set:function(t){this.verticalBetweenLyricsDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"HorizontalBetweenLyricsDistance",{get:function(){return this.horizontalBetweenLyricsDistance},set:function(t){this.horizontalBetweenLyricsDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"BetweenSyllableMaximumDistance",{get:function(){return this.betweenSyllableMaximumDistance},set:function(t){this.betweenSyllableMaximumDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"BetweenSyllableMinimumDistance",{get:function(){return this.betweenSyllableMinimumDistance},set:function(t){this.betweenSyllableMinimumDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"LyricOverlapAllowedIntoNextMeasure",{get:function(){return this.lyricOverlapAllowedIntoNextMeasure},set:function(t){this.lyricOverlapAllowedIntoNextMeasure=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"MinimumDistanceBetweenDashes",{get:function(){return this.minimumDistanceBetweenDashes},set:function(t){this.minimumDistanceBetweenDashes=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"BezierCurveStepSize",{get:function(){return this.bezierCurveStepSize},set:function(t){this.bezierCurveStepSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TPow3",{get:function(){return this.tPower3},set:function(t){this.tPower3=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"OneMinusTPow3",{get:function(){return this.oneMinusTPower3},set:function(t){this.oneMinusTPower3=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"BezierFactorOne",{get:function(){return this.factorOne},set:function(t){this.factorOne=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"BezierFactorTwo",{get:function(){return this.factorTwo},set:function(t){this.factorTwo=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TieGhostObjectWidth",{get:function(){return this.tieGhostObjectWidth},set:function(t){this.tieGhostObjectWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TieYPositionOffsetFactor",{get:function(){return this.tieYPositionOffsetFactor},set:function(t){this.tieYPositionOffsetFactor=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"MinimumNeededXspaceForTieGhostObject",{get:function(){return this.minimumNeededXspaceForTieGhostObject},set:function(t){this.minimumNeededXspaceForTieGhostObject=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TieHeightMinimum",{get:function(){return this.tieHeightMinimum},set:function(t){this.tieHeightMinimum=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TieHeightMaximum",{get:function(){return this.tieHeightMaximum},set:function(t){this.tieHeightMaximum=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TieHeightInterpolationK",{get:function(){return this.tieHeightInterpolationK},set:function(t){this.tieHeightInterpolationK=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TieHeightInterpolationD",{get:function(){return this.tieHeightInterpolationD},set:function(t){this.tieHeightInterpolationD=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SlurNoteHeadYOffset",{get:function(){return this.slurNoteHeadYOffset},set:function(t){this.slurNoteHeadYOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SlurStemXOffset",{get:function(){return this.slurStemXOffset},set:function(t){this.slurStemXOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SlurSlopeMaxAngle",{get:function(){return this.slurSlopeMaxAngle},set:function(t){this.slurSlopeMaxAngle=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SlurTangentMinAngle",{get:function(){return this.slurTangentMinAngle},set:function(t){this.slurTangentMinAngle=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SlurTangentMaxAngle",{get:function(){return this.slurTangentMaxAngle},set:function(t){this.slurTangentMaxAngle=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SlursStartingAtSameStaffEntryYOffset",{get:function(){return this.slursStartingAtSameStaffEntryYOffset},set:function(t){this.slursStartingAtSameStaffEntryYOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"InstantaneousTempoTextHeight",{get:function(){return this.instantaneousTempoTextHeight},set:function(t){this.instantaneousTempoTextHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ContinuousDynamicTextHeight",{get:function(){return this.continuousDynamicTextHeight},set:function(t){this.continuousDynamicTextHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"MoodTextHeight",{get:function(){return this.moodTextHeight},set:function(t){this.moodTextHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ContinuousTempoTextHeight",{get:function(){return this.continuousTempoTextHeight},set:function(t){this.continuousTempoTextHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DynamicExpressionMaxDistance",{get:function(){return this.dynamicExpressionMaxDistance},set:function(t){this.dynamicExpressionMaxDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DynamicExpressionSpacer",{get:function(){return this.dynamicExpressionSpacer},set:function(t){this.dynamicExpressionSpacer=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"UnknownTextHeight",{get:function(){return this.unknownTextHeight},set:function(t){this.unknownTextHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"StaffLineWidth",{get:function(){return this.staffLineWidth},set:function(t){this.staffLineWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"LedgerLineWidth",{get:function(){return this.ledgerLineWidth},set:function(t){this.ledgerLineWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"WedgeLineWidth",{get:function(){return this.wedgeLineWidth},set:function(t){this.wedgeLineWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TupletLineWidth",{get:function(){return this.tupletLineWidth},set:function(t){this.tupletLineWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"LyricUnderscoreLineWidth",{get:function(){return this.lyricUnderscoreLineWidth},set:function(t){this.lyricUnderscoreLineWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SystemThinLineWidth",{get:function(){return this.systemThinLineWidth},set:function(t){this.systemThinLineWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SystemBoldLineWidth",{get:function(){return this.systemBoldLineWidth},set:function(t){this.systemBoldLineWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SystemRepetitionEndingLineWidth",{get:function(){return this.systemRepetitionEndingLineWidth},set:function(t){this.systemRepetitionEndingLineWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SystemDotWidth",{get:function(){return this.systemDotWidth},set:function(t){this.systemDotWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DistanceBetweenVerticalSystemLines",{get:function(){return this.distanceBetweenVerticalSystemLines},set:function(t){this.distanceBetweenVerticalSystemLines=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DistanceBetweenDotAndLine",{get:function(){return this.distanceBetweenDotAndLine},set:function(t){this.distanceBetweenDotAndLine=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"OctaveShiftLineWidth",{get:function(){return this.octaveShiftLineWidth},set:function(t){this.octaveShiftLineWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"OctaveShiftVerticalLineLength",{get:function(){return this.octaveShiftVerticalLineLength},set:function(t){this.octaveShiftVerticalLineLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"GraceLineWidth",{get:function(){return this.graceLineWidth},set:function(t){this.graceLineWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"MinimumStaffLineDistance",{get:function(){return this.minimumStaffLineDistance},set:function(t){this.minimumStaffLineDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"MinimumCrossedBeamDifferenceMargin",{get:function(){return this.minimumCrossedBeamDifferenceMargin},set:function(t){this.minimumCrossedBeamDifferenceMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DisplacedNoteMargin",{get:function(){return this.displacedNoteMargin},set:function(t){this.displacedNoteMargin=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"MinNoteDistance",{get:function(){return this.minNoteDistance},set:function(t){this.minNoteDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SubMeasureXSpacingThreshold",{get:function(){return this.subMeasureXSpacingThreshold},set:function(t){this.subMeasureXSpacingThreshold=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"MeasureDynamicsMaxScalingFactor",{get:function(){return this.measureDynamicsMaxScalingFactor},set:function(t){this.measureDynamicsMaxScalingFactor=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"WholeRestXShiftVexflow",{get:function(){return this.wholeRestXShiftVexflow},set:function(t){this.wholeRestXShiftVexflow=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"MetronomeMarkXShift",{get:function(){return this.metronomeMarkXShift},set:function(t){this.metronomeMarkXShift=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"MetronomeMarkYShift",{get:function(){return this.metronomeMarkYShift},set:function(t){this.metronomeMarkYShift=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"MaxInstructionsConstValue",{get:function(){return this.maxInstructionsConstValue},set:function(t){this.maxInstructionsConstValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"NoteDistances",{get:function(){return this.noteDistances},set:function(t){this.noteDistances=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"NoteDistancesScalingFactors",{get:function(){return this.noteDistancesScalingFactors},set:function(t){this.noteDistancesScalingFactors=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DurationDistanceDict",{get:function(){return this.durationDistanceDict},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DurationScalingDistanceDict",{get:function(){return this.durationScalingDistanceDict},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ColoringMode",{get:function(){return this.coloringMode},set:function(t){this.coloringMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ColoringEnabled",{get:function(){return this.coloringEnabled},set:function(t){this.coloringEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ColorStemsLikeNoteheads",{get:function(){return this.colorStemsLikeNoteheads},set:function(t){this.colorStemsLikeNoteheads=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ColorFlags",{get:function(){return this.colorFlags},set:function(t){this.colorFlags=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ColorBeams",{get:function(){return this.colorBeams},set:function(t){this.colorBeams=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ColoringSetCurrent",{get:function(){return this.coloringSetCustom},set:function(t){this.coloringSetCustom=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DefaultColorNotehead",{get:function(){return this.defaultColorNotehead},set:function(t){this.defaultColorNotehead=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DefaultColorRest",{get:function(){return this.defaultColorRest},set:function(t){this.defaultColorRest=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DefaultColorStem",{get:function(){return this.defaultColorStem},set:function(t){this.defaultColorStem=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DefaultColorLabel",{get:function(){return this.defaultColorLabel},set:function(t){this.defaultColorLabel=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DefaultColorTitle",{get:function(){return this.defaultColorTitle},set:function(t){this.defaultColorTitle=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"MaxMeasureToDrawIndex",{get:function(){return this.maxMeasureToDrawIndex},set:function(t){this.maxMeasureToDrawIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"MinMeasureToDrawIndex",{get:function(){return this.minMeasureToDrawIndex},set:function(t){this.minMeasureToDrawIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"RenderComposer",{get:function(){return this.renderComposer},set:function(t){this.renderComposer=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"RenderTitle",{get:function(){return this.renderTitle},set:function(t){this.renderTitle=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"RenderSubtitle",{get:function(){return this.renderSubtitle},set:function(t){this.renderSubtitle=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"RenderLyricist",{get:function(){return this.renderLyricist},set:function(t){this.renderLyricist=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"RenderPartNames",{get:function(){return this.renderPartNames},set:function(t){this.renderPartNames=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"RenderPartAbbreviations",{get:function(){return this.renderPartAbbreviations},set:function(t){this.renderPartAbbreviations=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"RenderFingerings",{get:function(){return this.renderFingerings},set:function(t){this.renderFingerings=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"FingeringPosition",{get:function(){return this.fingeringPosition},set:function(t){this.fingeringPosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"FingeringInsideStafflines",{get:function(){return this.fingeringInsideStafflines},set:function(t){this.fingeringInsideStafflines=t},enumerable:!0,configurable:!0}),l.prototype.populateDictionaries=function(){for(var t=0;t<this.noteDistances.length;t++)switch(t){case 0:this.durationDistanceDict[.015625]=this.noteDistances[t],this.durationScalingDistanceDict[.015625]=this.noteDistancesScalingFactors[t];break;case 1:this.durationDistanceDict[.03125]=this.noteDistances[t],this.durationScalingDistanceDict[.03125]=this.noteDistancesScalingFactors[t];break;case 2:this.durationDistanceDict[.0625]=this.noteDistances[t],this.durationScalingDistanceDict[.0625]=this.noteDistancesScalingFactors[t];break;case 3:this.durationDistanceDict[.125]=this.noteDistances[t],this.durationScalingDistanceDict[.125]=this.noteDistancesScalingFactors[t];break;case 4:this.durationDistanceDict[.25]=this.noteDistances[t],this.durationScalingDistanceDict[.25]=this.noteDistancesScalingFactors[t];break;case 5:this.durationDistanceDict[.5]=this.noteDistances[t],this.durationScalingDistanceDict[.5]=this.noteDistancesScalingFactors[t];break;case 6:this.durationDistanceDict[1]=this.noteDistances[t],this.durationScalingDistanceDict[1]=this.noteDistancesScalingFactors[t];break;case 7:this.durationDistanceDict[2]=this.noteDistances[t],this.durationScalingDistanceDict[2]=this.noteDistancesScalingFactors[t]}},l.prototype.calculateCurveParametersArrays=function(){this.tPower3=new Array(this.bezierCurveStepSize),this.oneMinusTPower3=new Array(this.bezierCurveStepSize),this.factorOne=new Array(this.bezierCurveStepSize),this.factorTwo=new Array(this.bezierCurveStepSize);for(var t=0;t<this.bezierCurveStepSize;t++){var e=t/this.bezierCurveStepSize;this.tPower3[t]=Math.pow(e,3),this.oneMinusTPower3[t]=Math.pow(1-e,3),this.factorOne[t]=3*Math.pow(1-e,2)*e,this.factorTwo[t]=3*(1-e)*Math.pow(e,2)}},l.unit=1,l);function l(){this.noteDistances=[1,1,1.3,1.6,2,2.5,3,4],this.noteDistancesScalingFactors=[1,2,4,8,16,32,64,128],this.durationDistanceDict={},this.durationScalingDistanceDict={},this.samplingUnit=3*l.unit,this.sheetTitleHeight=4,this.sheetSubtitleHeight=2,this.sheetMinimumDistanceBetweenTitleAndSubtitle=1,this.sheetComposerHeight=2,this.sheetAuthorHeight=2,this.compactMode=!1,this.pagePlacementEnum=i.PagePlacementEnum.Down,this.pageHeight=100001,this.pageTopMargin=5,this.pageTopMarginNarrow=0,this.pageBottomMargin=5,this.pageLeftMargin=5,this.pageRightMargin=5,this.titleTopDistance=9,this.titleBottomDistance=1,this.staffDistance=7,this.betweenStaffDistance=5,this.staffHeight=4,this.betweenStaffLinesDistance=l.unit,this.systemDistance=10,this.systemLeftMargin=0,this.systemRightMargin=0,this.firstSystemMargin=15,this.systemLabelsRightMargin=2,this.systemComposerDistance=2,this.instrumentLabelTextHeight=2,this.minimumAllowedDistanceBetweenSystems=3,this.lastSystemMaxScalingFactor=1.4,this.autoBeamNotes=!1,this.autoBeamOptions={beam_middle_rests_only:!1,beam_rests:!1,maintain_stem_directions:!1},this.beamWidth=l.unit/2,this.beamSpaceWidth=l.unit/3,this.beamForwardLength=1.25*l.unit,this.clefLeftMargin=.5,this.clefRightMargin=.75,this.betweenKeySymbolsDistance=.2,this.keyRightMargin=.75,this.rhythmRightMargin=1.25,this.inStaffClefScalingFactor=.8,this.distanceBetweenNaturalAndSymbolWhenCancelling=.4,this.noteHelperLinesOffset=.25,this.measureLeftMargin=.7,this.measureRightMargin=0,this.distanceBetweenLastInstructionAndRepetitionBarline=1,this.arpeggioDistance=.6,this.staccatoShorteningFactor=2,this.idealStemLength=3,this.stemNoteHeadBorderYOffset=.2,this.stemWidth=.13,this.stemMargin=.2,this.stemMinLength=2.5,this.stemMaxLength=4.5,this.beamSlopeMaxAngle=10,this.stemMinAllowedDistanceBetweenNoteHeadAndBeamLine=1,this.setWantedStemDirectionByXml=!0,this.graceNoteScalingFactor=.6,this.graceNoteXOffset=.2,this.wedgeOpeningLength=1.2,this.wedgeMeasureEndOpeningLength=.75,this.wedgeMeasureBeginOpeningLength=.75,this.wedgePlacementAboveY=-1.5,this.wedgePlacementBelowY=1.5,this.wedgeHorizontalMargin=.6,this.wedgeVerticalMargin=.5,this.distanceOffsetBetweenTwoHorizontallyCrossedWedges=.3,this.wedgeMinLength=2,this.distanceBetweenAdjacentDynamics=.75,this.tempoChangeMeasureValidity=4,this.tempoContinousFactor=.7,this.staccatoScalingFactor=.8,this.betweenDotsDistance=.8,this.ornamentAccidentalScalingFactor=.65,this.chordSymbolTextHeight=2,this.chordSymbolYOffset=2,this.fingeringLabelFontHeight=1.7,this.measureNumberLabelHeight=1.5*l.unit,this.measureNumberLabelOffset=2,this.tupletsRatioed=!1,this.tupletsBracketed=!1,this.tripletsBracketed=!1,this.tupletNumberLabelHeight=1.5*l.unit,this.tupletNumberYOffset=.5,this.labelMarginBorderFactor=.1,this.tupletVerticalLineLength=.5,this.bezierCurveStepSize=1e3,this.calculateCurveParametersArrays(),this.tieGhostObjectWidth=.75,this.tieYPositionOffsetFactor=.3,this.minimumNeededXspaceForTieGhostObject=1,this.tieHeightMinimum=.28,this.tieHeightMaximum=1.2,this.tieHeightInterpolationK=.0288,this.tieHeightInterpolationD=.136,this.slurNoteHeadYOffset=.5,this.slurStemXOffset=.3,this.slurSlopeMaxAngle=15,this.slurTangentMinAngle=30,this.slurTangentMaxAngle=80,this.slursStartingAtSameStaffEntryYOffset=.8,this.repetitionEndingLabelHeight=2,this.repetitionEndingLabelXOffset=.5,this.repetitionEndingLabelYOffset=.3,this.repetitionEndingLineYLowerOffset=.5,this.repetitionEndingLineYUpperOffset=.3,this.lyricsAlignmentStandard=o.TextAlignmentEnum.LeftBottom,this.lyricsHeight=2,this.lyricsYOffsetToStaffHeight=3,this.verticalBetweenLyricsDistance=.5,this.horizontalBetweenLyricsDistance=.2,this.betweenSyllableMaximumDistance=10,this.betweenSyllableMinimumDistance=.5,this.lyricOverlapAllowedIntoNextMeasure=3.4,this.minimumDistanceBetweenDashes=10,this.instantaneousTempoTextHeight=2.3,this.continuousDynamicTextHeight=2.3,this.moodTextHeight=2.3,this.unknownTextHeight=2,this.continuousTempoTextHeight=2.3,this.dynamicExpressionMaxDistance=2,this.dynamicExpressionSpacer=.5,this.staffLineWidth=.12,this.ledgerLineWidth=.12,this.wedgeLineWidth=.12,this.tupletLineWidth=.12,this.lyricUnderscoreLineWidth=.12,this.systemThinLineWidth=.12,this.systemBoldLineWidth=l.unit/2,this.systemRepetitionEndingLineWidth=.12,this.systemDotWidth=l.unit/5,this.distanceBetweenVerticalSystemLines=.35,this.distanceBetweenDotAndLine=.7,this.octaveShiftLineWidth=.12,this.octaveShiftVerticalLineLength=l.unit,this.graceLineWidth=this.staffLineWidth*this.GraceNoteScalingFactor,this.minimumStaffLineDistance=1,this.minimumCrossedBeamDifferenceMargin=1e-4,this.displacedNoteMargin=.1,this.minNoteDistance=2,this.subMeasureXSpacingThreshold=35,this.measureDynamicsMaxScalingFactor=2.5,this.wholeRestXShiftVexflow=-2.5,this.metronomeMarkXShift=-6,this.metronomeMarkYShift=-.5,this.coloringMode=a.ColoringModes.XML,this.coloringEnabled=!0,this.colorStemsLikeNoteheads=!1,this.colorBeams=!0,this.colorFlags=!0,this.defaultColorNotehead="#000000",this.defaultColorRest=this.defaultColorNotehead,this.defaultColorStem=this.defaultColorNotehead,this.defaultColorLabel=this.defaultColorNotehead,this.defaultColorTitle=this.defaultColorNotehead,this.maxMeasureToDrawIndex=Number.MAX_VALUE,this.minMeasureToDrawIndex=0,this.renderComposer=!0,this.renderTitle=!0,this.renderSubtitle=!0,this.renderLyricist=!0,this.renderPartNames=!0,this.renderPartAbbreviations=!0,this.renderFingerings=!0,this.fingeringPosition=s.PlacementEnum.Left,this.fingeringInsideStafflines=!1,this.populateDictionaries();try{this.maxInstructionsConstValue=this.ClefLeftMargin+this.ClefRightMargin+this.KeyRightMargin+this.RhythmRightMargin+11}catch(t){r.info("EngravingRules()",t)}}e.EngravingRules=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i,r=n(1),s=n(13),a=n(6),u=n(86),l=n(59),c=(Object.defineProperty(h.prototype,"RelativePositionHasBeenSet",{get:function(){return this.relativePositionHasBeenSet},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"XBordersHaveBeenSet",{get:function(){return this.xBordersHaveBeenSet},set:function(t){this.xBordersHaveBeenSet=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"YBordersHaveBeenSet",{get:function(){return this.yBordersHaveBeenSet},set:function(t){this.yBordersHaveBeenSet=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"AbsolutePosition",{get:function(){return this.absolutePosition},set:function(t){this.absolutePosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"RelativePosition",{get:function(){return this.relativePosition},set:function(t){this.relativePosition=t,this.relativePositionHasBeenSet=!0},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"Size",{get:function(){return this.size},set:function(t){this.size=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"MarginSize",{get:function(){return this.marginSize},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"UpperLeftCorner",{get:function(){return this.upperLeftCorner},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"UpperLeftMarginCorner",{get:function(){return this.upperLeftMarginCorner},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"BorderLeft",{get:function(){return this.borderLeft},set:function(t){this.borderLeft=t,this.calculateRectangle()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"BorderRight",{get:function(){return this.borderRight},set:function(t){this.borderRight=t,this.calculateRectangle()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"BorderTop",{get:function(){return this.borderTop},set:function(t){this.borderTop=t,this.calculateRectangle()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"BorderBottom",{get:function(){return this.borderBottom},set:function(t){this.borderBottom=t,this.calculateRectangle()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"BorderMarginLeft",{get:function(){return this.borderMarginLeft>this.borderLeft?this.borderLeft:this.borderMarginLeft},set:function(t){this.borderMarginLeft=t,this.calculateMarginRectangle()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"BorderMarginRight",{get:function(){return this.borderMarginRight<this.borderRight?this.borderRight:this.borderMarginRight},set:function(t){this.borderMarginRight=t,this.calculateMarginRectangle()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"BorderMarginTop",{get:function(){return this.borderMarginTop>this.borderTop?this.borderTop:this.borderMarginTop},set:function(t){this.borderMarginTop=t,this.calculateMarginRectangle()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"BorderMarginBottom",{get:function(){return this.borderMarginBottom<this.borderBottom?this.borderBottom:this.borderMarginBottom},set:function(t){this.borderMarginBottom=t,this.calculateMarginRectangle()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"BoundingRectangle",{get:function(){return this.boundingRectangle},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"BoundingMarginRectangle",{get:function(){return this.boundingMarginRectangle},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"ChildElements",{get:function(){return this.childElements},set:function(t){this.childElements=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"Parent",{get:function(){return this.parent},set:function(t){this.parent=t,-1<this.parent.ChildElements.indexOf(this)?r.error("BoundingBox of "+this.dataObject.constructor.name+" already in children list of "+this.parent.dataObject.constructor.name+"'s BoundingBox"):this.parent.ChildElements.push(this)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"DataObject",{get:function(){return this.dataObject},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"Center",{get:function(){return new a.PointF2D(this.RelativePosition.x+(this.BorderMarginRight+this.BorderMarginLeft),this.RelativePosition.y+(this.BorderMarginBottom+this.BorderMarginTop))},enumerable:!0,configurable:!0}),h.prototype.setAbsolutePositionFromParent=function(){void 0!==this.parent?(this.absolutePosition.x=this.parent.AbsolutePosition.x+this.relativePosition.x,this.absolutePosition.y=this.parent.AbsolutePosition.y+this.relativePosition.y):this.absolutePosition=this.relativePosition},h.prototype.calculateAbsolutePosition=function(){this.absolutePosition.x=this.relativePosition.x,this.absolutePosition.y=this.relativePosition.y;for(var t=this.parent;void 0!==t;)this.absolutePosition.x+=t.relativePosition.x,this.absolutePosition.y+=t.relativePosition.y,t=t.parent},h.prototype.calculateAbsolutePositionsRecursiveWithoutTopelement=function(){this.absolutePosition.x=0;for(var t=this.absolutePosition.y=0,e=this.ChildElements.length;t<e;++t)this.ChildElements[t].calculateAbsolutePositionsRecursive(this.absolutePosition.x,this.absolutePosition.y)},h.prototype.calculateAbsolutePositionsRecursive=function(t,e){this.absolutePosition.x=this.relativePosition.x+t,this.absolutePosition.y=this.relativePosition.y+e;for(var n=0,i=this.ChildElements.length;n<i;++n)this.ChildElements[n].calculateAbsolutePositionsRecursive(this.absolutePosition.x,this.absolutePosition.y)},h.prototype.calculateAbsolutePositionsOfChildren=function(){for(var t=0,e=this.ChildElements.length;t<e;++t)this.ChildElements[t].calculateAbsolutePositionsRecursive(this.absolutePosition.x,this.absolutePosition.y)},h.prototype.calculateBoundingBox=function(){if(0!==this.childElements.length){for(var t=0,e=this.ChildElements.length;t<e;++t)(c=this.ChildElements[t]).calculateBoundingBox();var n=Number.MAX_VALUE,i=Number.MIN_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,s=Number.MAX_VALUE,a=Number.MIN_VALUE,u=Number.MAX_VALUE,l=Number.MIN_VALUE;for(this.isSymbol&&(n=this.borderLeft,i=this.borderRight,r=this.borderTop,o=this.borderBottom,s=this.borderMarginLeft,a=this.borderMarginRight,u=this.borderMarginTop,l=this.borderMarginBottom),t=0,e=this.ChildElements.length;t<e;++t){var c=this.ChildElements[t];n=Math.min(n,c.relativePosition.x+c.borderLeft),i=Math.max(i,c.relativePosition.x+c.borderRight),r=Math.min(r,c.relativePosition.y+c.borderTop),o=Math.max(o,c.relativePosition.y+c.borderBottom),s=Math.min(s,c.relativePosition.x+c.borderMarginLeft),a=Math.max(a,c.relativePosition.x+c.borderMarginRight),u=Math.min(u,c.relativePosition.y+c.borderMarginTop),l=Math.max(l,c.relativePosition.y+c.borderMarginBottom)}this.borderLeft=n,this.borderRight=i,this.borderTop=r,this.borderBottom=o,this.borderMarginLeft=s,this.borderMarginRight=a,this.borderMarginTop=u,this.borderMarginBottom=l,this.calculateRectangle(),this.calculateMarginRectangle(),this.xBordersHaveBeenSet=!0,this.yBordersHaveBeenSet=!0}},h.prototype.calculateTopBottomBorders=function(){if(0!==this.childElements.length){for(var t=0,e=this.ChildElements.length;t<e;++t)(s=this.ChildElements[t]).calculateTopBottomBorders();var n=Number.MAX_VALUE,i=Number.MIN_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE;for(this.yBordersHaveBeenSet&&(n=this.borderTop,i=this.borderBottom,r=this.borderMarginTop,o=this.borderMarginBottom),t=0,e=this.ChildElements.length;t<e;++t){var s=this.ChildElements[t];n=Math.min(n,s.relativePosition.y+s.borderTop),i=Math.max(i,s.relativePosition.y+s.borderBottom),r=Math.min(r,s.relativePosition.y+s.borderMarginTop),o=Math.max(o,s.relativePosition.y+s.borderMarginBottom)}this.borderTop=n,this.borderBottom=i,this.borderMarginTop=r,this.borderMarginBottom=o,this.calculateRectangle(),this.calculateMarginRectangle()}},h.prototype.computeNonOverlappingPositionWithMargin=function(t,e,n){this.RelativePosition=new a.PointF2D(n.x,n.y),this.setAbsolutePositionFromParent();var i=0,r=!1;do{switch(e){case o.Left:case o.Right:i=this.relativePosition.x,t.calculateMarginPositionAlongDirection(this,e),r=.001<Math.abs(i-this.relativePosition.x);break;case o.Up:case o.Down:i=this.relativePosition.y,t.calculateMarginPositionAlongDirection(this,e),r=.001<Math.abs(i-this.relativePosition.y);break;default:throw new s.ArgumentOutOfRangeException("direction")}}while(r)},h.prototype.collisionDetection=function(t){var e=Math.min(this.AbsolutePosition.x+this.borderRight,t.absolutePosition.x+t.borderRight)-Math.max(this.AbsolutePosition.x+this.borderLeft,t.absolutePosition.x+t.borderLeft),n=Math.min(this.AbsolutePosition.y+this.borderBottom,t.absolutePosition.y+t.borderBottom)-Math.max(this.AbsolutePosition.y+this.borderTop,t.absolutePosition.y+t.borderTop);return 0<e&&0<n},h.prototype.liesInsideBorders=function(t){var e=this.AbsolutePosition.x+this.borderLeft<=t.absolutePosition.x+t.borderLeft&&t.absolutePosition.x+t.borderLeft<=this.AbsolutePosition.x+this.borderRight,n=this.AbsolutePosition.x+this.borderLeft<=t.absolutePosition.x+t.borderRight&&t.absolutePosition.x+t.borderRight<=this.AbsolutePosition.x+this.borderRight;if(e&&n){var i=this.AbsolutePosition.y+this.borderTop<=t.absolutePosition.y+t.borderTop&&t.absolutePosition.y+t.borderTop<=this.AbsolutePosition.y+this.borderBottom,r=this.AbsolutePosition.y+this.borderTop<=t.absolutePosition.y+t.borderBottom&&t.absolutePosition.y+t.borderBottom<=this.AbsolutePosition.y+this.borderBottom;if(i&&r)return!0}return!1},h.prototype.pointLiesInsideBorders=function(t){return this.AbsolutePosition.x+this.borderLeft<=t.x&&t.x<=this.AbsolutePosition.x+this.borderRight&&this.AbsolutePosition.y+this.borderTop<=t.y&&t.y<=this.AbsolutePosition.y+this.borderBottom},h.prototype.marginCollisionDetection=function(t){var e=Math.min(this.AbsolutePosition.x+this.borderMarginRight,t.absolutePosition.x+t.borderMarginRight)-Math.max(this.AbsolutePosition.x+this.borderMarginLeft,t.absolutePosition.x+t.borderMarginLeft),n=Math.min(this.AbsolutePosition.y+this.borderMarginBottom,t.absolutePosition.y+t.borderMarginBottom)-Math.max(this.AbsolutePosition.y+this.borderMarginTop,t.absolutePosition.y+t.borderMarginTop);return 0<e&&0<n},h.prototype.liesInsideMargins=function(t){var e=this.AbsolutePosition.x+this.borderMarginLeft<=t.absolutePosition.x+t.borderMarginLeft&&t.absolutePosition.x+t.borderMarginLeft<=this.AbsolutePosition.x+this.borderMarginRight,n=this.AbsolutePosition.x+this.borderMarginLeft<=t.absolutePosition.x+t.borderMarginRight&&t.absolutePosition.x+t.borderMarginRight<=this.AbsolutePosition.x+this.borderMarginRight;if(e&&n){var i=this.AbsolutePosition.y+this.borderMarginTop<=t.absolutePosition.y+t.borderMarginTop&&t.absolutePosition.y+t.borderMarginTop<=this.AbsolutePosition.y+this.borderMarginBottom,r=this.AbsolutePosition.y+this.borderMarginTop<=t.absolutePosition.y+t.borderMarginBottom&&t.absolutePosition.y+t.borderMarginBottom<=this.AbsolutePosition.y+this.borderMarginBottom;if(i&&r)return!0}return!1},h.prototype.pointLiesInsideMargins=function(t){return this.AbsolutePosition.x+this.borderMarginLeft<=t.x&&t.x<=this.AbsolutePosition.x+this.borderMarginRight&&this.AbsolutePosition.y+this.borderMarginTop<=t.y&&t.y<=this.AbsolutePosition.y+this.borderMarginBottom},h.prototype.computeNonOverlappingPosition=function(t,e,n){this.RelativePosition=new a.PointF2D(n.x,n.y),this.setAbsolutePositionFromParent();var i=0,r=!1;do{switch(e){case o.Left:case o.Right:i=this.relativePosition.x,t.calculatePositionAlongDirection(this,e),r=1e-4<Math.abs(i-this.relativePosition.x);break;case o.Up:case o.Down:i=this.relativePosition.y,t.calculatePositionAlongDirection(this,e),r=1e-4<Math.abs(i-this.relativePosition.y);break;default:throw new s.ArgumentOutOfRangeException("direction")}}while(r)},h.prototype.getClickedObjectOfType=function(t){var e=this.dataObject;if(this.pointLiesInsideBorders(t)&&void 0!==e)return e;for(var n=0,i=this.childElements.length;n<i;++n){var r=this.childElements[n].getClickedObjectOfType(t);if(void 0!==r)return r}},h.prototype.getObjectsInRegion=function(t,e){if(void 0===e&&(e=!0),void 0!==this.dataObject)if(e){if(t.liesInsideBorders(this))return[this.dataObject]}else if(t.collisionDetection(this))return[this.dataObject];for(var n=[],i=0,r=this.childElements;i<r.length;i++){var o=r[i];n.concat(o.getObjectsInRegion(t,e))}return n},h.prototype.calculateRectangle=function(){this.upperLeftCorner=new a.PointF2D(this.BorderLeft,this.BorderTop),this.size=new u.SizeF2D(this.BorderRight-this.BorderLeft,this.BorderBottom-this.BorderTop),this.boundingRectangle=l.RectangleF2D.createFromLocationAndSize(this.upperLeftCorner,this.size)},h.prototype.calculateMarginRectangle=function(){this.upperLeftMarginCorner=new a.PointF2D(this.BorderMarginLeft,this.BorderMarginTop),this.marginSize=new u.SizeF2D(this.BorderMarginRight-this.BorderMarginLeft,this.BorderMarginBottom-this.BorderMarginTop),this.boundingMarginRectangle=l.RectangleF2D.createFromLocationAndSize(this.upperLeftMarginCorner,this.marginSize)},h.prototype.calculateMarginPositionAlongDirection=function(t,e){if(this!==t){if(this.isSymbol&&this.marginCollisionDetection(t)){var n=0;switch(e){case o.Left:return n=this.absolutePosition.x+this.borderMarginLeft-(t.absolutePosition.x+t.borderMarginRight),t.relativePosition.x+=n,void(t.absolutePosition.x+=n);case o.Right:return n=this.absolutePosition.x+this.borderMarginRight-(t.absolutePosition.x+t.borderMarginLeft),t.relativePosition.x+=n,void(t.absolutePosition.x+=n);case o.Up:return n=this.absolutePosition.y+this.borderMarginTop-(t.absolutePosition.y+t.borderMarginBottom),t.relativePosition.y+=n,void(t.absolutePosition.y+=n);case o.Down:return n=this.absolutePosition.y+this.borderMarginBottom-(t.absolutePosition.y+t.borderMarginTop),t.relativePosition.y+=n,void(t.absolutePosition.y+=n);default:throw new s.ArgumentOutOfRangeException("direction")}}for(var i=0,r=this.ChildElements.length;i<r;++i)this.ChildElements[i].calculateMarginPositionAlongDirection(t,e)}},h.prototype.calculatePositionAlongDirection=function(t,e){if(this!==t){if(this.isSymbol&&this.collisionDetection(t)){var n=void 0;switch(e){case o.Left:return n=this.absolutePosition.x+this.borderLeft-(t.absolutePosition.x+t.borderRight),t.relativePosition.x+=n,void(t.absolutePosition.x+=n);case o.Right:return n=this.absolutePosition.x+this.borderRight-(t.absolutePosition.x+t.borderLeft),t.relativePosition.x+=n,void(t.absolutePosition.x+=n);case o.Up:return n=this.absolutePosition.y+this.borderTop-(t.absolutePosition.y+t.borderBottom),t.relativePosition.y+=n,void(t.absolutePosition.y+=n);case o.Down:return n=this.absolutePosition.y+this.borderBottom-(t.absolutePosition.y+t.borderTop),t.relativePosition.y+=n,void(t.absolutePosition.y+=n);default:throw new s.ArgumentOutOfRangeException("direction")}}for(var i=0,r=this.ChildElements.length;i<r;++i)this.ChildElements[i].calculatePositionAlongDirection(t,e)}},h);function h(t,e,n){void 0===t&&(t=void 0),void 0===e&&(e=void 0),void 0===n&&(n=!1),this.isSymbol=!1,this.relativePositionHasBeenSet=!1,this.xBordersHaveBeenSet=!1,this.yBordersHaveBeenSet=!1,this.absolutePosition=new a.PointF2D,this.relativePosition=new a.PointF2D,this.size=new u.SizeF2D,this.marginSize=new u.SizeF2D,this.upperLeftCorner=new a.PointF2D,this.upperLeftMarginCorner=new a.PointF2D,this.borderLeft=0,this.borderRight=0,this.borderTop=0,this.borderBottom=0,this.borderMarginLeft=0,this.borderMarginRight=0,this.borderMarginTop=0,this.borderMarginBottom=0,this.childElements=[],this.parent=e,this.dataObject=t,this.isSymbol=n,this.xBordersHaveBeenSet=!1,this.yBordersHaveBeenSet=!1,void 0!==e&&(this.Parent=e)}e.BoundingBox=c,(i=o=e.ColDirEnum||(e.ColDirEnum={}))[i.Left=0]="Left",i[i.Right=1]="Right",i[i.Up=2]="Up",i[i.Down=3]="Down"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(r,"Empty",{get:function(){return new r},enumerable:!0,configurable:!0}),r.pointsAreEqual=function(t,e){return t.x===e.x&&t.y===e.y},r.prototype.ToString=function(){return"["+this.x+", "+this.y+"]"},r);function r(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}e.PointF2D=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(r.prototype,"PositionAndShape",{get:function(){return this.boundingBox},set:function(t){this.boundingBox=t},enumerable:!0,configurable:!0}),r);function r(){}e.GraphicalObject=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r,o=(s.isStringInStringList=function(t,e){for(var n=0,i=t.length;n<i;++n){var r=t[n];if(e.toLowerCase()===r.toLowerCase().trim())return!0}return!1},Object.defineProperty(s.prototype,"Placement",{get:function(){return this.placement},enumerable:!0,configurable:!0}),s.PlacementEnumFromString=function(t){switch(t.toLowerCase()){case"above":return i.Above;case"below":return i.Below;case"left":return i.Left;case"right":return i.Right;case"auto":default:return i.NotYetDefined}},s);function s(t){this.placement=t}e.AbstractExpression=o,(r=i=e.PlacementEnum||(e.PlacementEnum={}))[r.Above=0]="Above",r[r.Below=1]="Below",r[r.Left=2]="Left",r[r.Right=3]="Right",r[r.NotYetDefined=4]="NotYetDefined"},function(t,e,n){"use strict";var i,r;Object.defineProperty(e,"__esModule",{value:!0}),(r=i=e.TextAlignmentEnum||(e.TextAlignmentEnum={}))[r.LeftTop=0]="LeftTop",r[r.LeftCenter=1]="LeftCenter",r[r.LeftBottom=2]="LeftBottom",r[r.CenterTop=3]="CenterTop",r[r.CenterCenter=4]="CenterCenter",r[r.CenterBottom=5]="CenterBottom",r[r.RightTop=6]="RightTop",r[r.RightCenter=7]="RightCenter",r[r.RightBottom=8]="RightBottom";var o=(s.IsLeft=function(t){return t===i.LeftTop||t===i.LeftCenter||t===i.LeftBottom},s.IsCenterAligned=function(t){return t===i.CenterTop||t===i.CenterCenter||t===i.CenterBottom},s.IsRight=function(t){return t===i.RightTop||t===i.RightCenter||t===i.RightBottom},s);function s(){}e.TextAlignment=o},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=Object.prototype.hasOwnProperty;function i(t){return"function"==typeof t}function s(t){return void 0===t}function a(t){return"[object String]"===Object.prototype.toString.call(t)}o.has=function(t,e){return n.call(t,e)},o.defaultCompare=function(t,e){return t<e?-1:t===e?0:1},o.defaultEquals=function(t,e){return t===e},o.defaultToString=function(t){return null===t?"COLLECTION_NULL":s(t)?"COLLECTION_UNDEFINED":a(t)?"$s"+t:"$o"+t.toString()},o.makeString=function(t,e){if(void 0===e&&(e=","),null===t)return"COLLECTION_NULL";if(s(t))return"COLLECTION_UNDEFINED";if(a(t))return t.toString();var n="{",i=!0;for(var r in t)o.has(t,r)&&(i?i=!1:n+=e,n=n+r+":"+t[r]);return n+"}"},o.isFunction=i,o.isUndefined=s,o.isString=a,o.reverseCompareFunction=function(n){return s(n)||!i(n)?function(t,e){return t<e?1:t===e?0:-1}:function(t,e){return-1*n(t,e)}},o.compareToEquals=function(n){return function(t,e){return 0===n(t,e)}}},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s,a,u,l,c=n(2),h=n(63),f=n(2),p=n(2),d=n(13),b=(a=h.AbstractNotationInstruction,r(y,a),y.getDefaultClefFromMidiInstrument=function(t){switch(t){case s.Acoustic_Grand_Piano:case s.Electric_Bass_finger:case s.Electric_Bass_pick:case s.Fretless_Bass:case s.Slap_Bass_1:case s.Slap_Bass_2:case s.Synth_Bass_1:case s.Synth_Bass_2:case s.Contrabass:return new y(o.F,0,4);default:return new y(o.G,0,2)}},y.getAllPossibleClefs=function(){for(var t=[],e=0;e<=2;e++){var n=new y(o.G,e,2);t.push(n)}for(var i=-2;i<=0;i++){var r=new y(o.F,i,4);t.push(r)}return t},y.isSupportedClef=function(t){switch(t){case o.G:case o.F:case o.C:case o.percussion:return!0;default:return!1}},Object.defineProperty(y.prototype,"ClefType",{get:function(){return this.clefType},set:function(t){this.clefType=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"Line",{get:function(){return this.line},set:function(t){this.line=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"OctaveOffset",{get:function(){return this.octaveOffset},set:function(t){this.octaveOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"ClefPitch",{get:function(){return this.clefPitch},set:function(t){this.clefPitch=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"ReferenceCyPosition",{get:function(){return this.referenceCyPosition},set:function(t){this.referenceCyPosition=t},enumerable:!0,configurable:!0}),y.prototype.Equals=function(t){return this===t||void 0!==this&&void 0!==t&&this.ClefPitch===t.ClefPitch&&this.Line===t.Line},y.prototype.NotEqual=function(t){return!this.Equals(t)},y.prototype.ToString=function(){return"ClefType: "+this.clefType},y.prototype.calcParameters=function(){switch(this.clefType){case o.G:this.clefPitch=new c.Pitch(f.NoteEnum.G,1+this.octaveOffset,p.AccidentalEnum.NONE),this.referenceCyPosition=5-this.line+2;break;case o.F:this.clefPitch=new c.Pitch(f.NoteEnum.F,0+this.octaveOffset,p.AccidentalEnum.NONE),this.referenceCyPosition=5-this.line+1.5;break;case o.C:this.clefPitch=new c.Pitch(f.NoteEnum.C,1+this.octaveOffset,p.AccidentalEnum.NONE),this.referenceCyPosition=5-this.line;break;case o.percussion:this.clefPitch=new c.Pitch(f.NoteEnum.C,2,p.AccidentalEnum.NONE),this.referenceCyPosition=2;break;default:throw new d.ArgumentOutOfRangeException("clefType")}},y);function y(t,e,n){void 0===t&&(t=o.G),void 0===e&&(e=0),void 0===n&&(n=2);var i=a.call(this,void 0)||this;return i.clefType=o.G,i.line=2,i.octaveOffset=0,i.line=n,i.clefType=t,i.octaveOffset=e,i.calcParameters(),i}e.ClefInstruction=b,(l=o=e.ClefEnum||(e.ClefEnum={}))[l.G=0]="G",l[l.F=1]="F",l[l.C=2]="C",l[l.percussion=3]="percussion",l[l.TAB=4]="TAB",(u=s=e.MidiInstrument||(e.MidiInstrument={}))[u.None=-1]="None",u[u.Acoustic_Grand_Piano=0]="Acoustic_Grand_Piano",u[u.Bright_Acoustic_Piano=1]="Bright_Acoustic_Piano",u[u.Electric_Grand_Piano=2]="Electric_Grand_Piano",u[u.Honky_tonk_Piano=3]="Honky_tonk_Piano",u[u.Electric_Piano_1=4]="Electric_Piano_1",u[u.Electric_Piano_2=5]="Electric_Piano_2",u[u.Harpsichord=6]="Harpsichord",u[u.Clavinet=7]="Clavinet",u[u.Celesta=8]="Celesta",u[u.Glockenspiel=9]="Glockenspiel",u[u.Music_Box=10]="Music_Box",u[u.Vibraphone=11]="Vibraphone",u[u.Marimba=12]="Marimba",u[u.Xylophone=13]="Xylophone",u[u.Tubular_Bells=14]="Tubular_Bells",u[u.Dulcimer=15]="Dulcimer",u[u.Drawbar_Organ=16]="Drawbar_Organ",u[u.Percussive_Organ=17]="Percussive_Organ",u[u.Rock_Organ=18]="Rock_Organ",u[u.Church_Organ=19]="Church_Organ",u[u.Reed_Organ=20]="Reed_Organ",u[u.Accordion=21]="Accordion",u[u.Harmonica=22]="Harmonica",u[u.Tango_Accordion=23]="Tango_Accordion",u[u.Acoustic_Guitar_nylon=24]="Acoustic_Guitar_nylon",u[u.Acoustic_Guitar_steel=25]="Acoustic_Guitar_steel",u[u.Electric_Guitar_jazz=26]="Electric_Guitar_jazz",u[u.Electric_Guitar_clean=27]="Electric_Guitar_clean",u[u.Electric_Guitar_muted=28]="Electric_Guitar_muted",u[u.Overdriven_Guitar=29]="Overdriven_Guitar",u[u.Distortion_Guitar=30]="Distortion_Guitar",u[u.Guitar_harmonics=31]="Guitar_harmonics",u[u.Acoustic_Bass=32]="Acoustic_Bass",u[u.Electric_Bass_finger=33]="Electric_Bass_finger",u[u.Electric_Bass_pick=34]="Electric_Bass_pick",u[u.Fretless_Bass=35]="Fretless_Bass",u[u.Slap_Bass_1=36]="Slap_Bass_1",u[u.Slap_Bass_2=37]="Slap_Bass_2",u[u.Synth_Bass_1=38]="Synth_Bass_1",u[u.Synth_Bass_2=39]="Synth_Bass_2",u[u.Violin=40]="Violin",u[u.Viola=41]="Viola",u[u.Cello=42]="Cello",u[u.Contrabass=43]="Contrabass",u[u.Tremolo_Strings=44]="Tremolo_Strings",u[u.Pizzicato_Strings=45]="Pizzicato_Strings",u[u.Orchestral_Harp=46]="Orchestral_Harp",u[u.Timpani=47]="Timpani",u[u.String_Ensemble_1=48]="String_Ensemble_1",u[u.String_Ensemble_2=49]="String_Ensemble_2",u[u.Synth_Strings_1=50]="Synth_Strings_1",u[u.Synth_Strings_2=51]="Synth_Strings_2",u[u.Choir_Aahs=52]="Choir_Aahs",u[u.Voice_Oohs=53]="Voice_Oohs",u[u.Synth_Voice=54]="Synth_Voice",u[u.Orchestra_Hit=55]="Orchestra_Hit",u[u.Trumpet=56]="Trumpet",u[u.Trombone=57]="Trombone",u[u.Tuba=58]="Tuba",u[u.Muted_Trumpet=59]="Muted_Trumpet",u[u.French_Horn=60]="French_Horn",u[u.Brass_Section=61]="Brass_Section",u[u.Synth_Brass_1=62]="Synth_Brass_1",u[u.Synth_Brass_2=63]="Synth_Brass_2",u[u.Soprano_Sax=64]="Soprano_Sax",u[u.Alto_Sax=65]="Alto_Sax",u[u.Tenor_Sax=66]="Tenor_Sax",u[u.Baritone_Sax=67]="Baritone_Sax",u[u.Oboe=68]="Oboe",u[u.English_Horn=69]="English_Horn",u[u.Bassoon=70]="Bassoon",u[u.Clarinet=71]="Clarinet",u[u.Piccolo=72]="Piccolo",u[u.Flute=73]="Flute",u[u.Recorder=74]="Recorder",u[u.Pan_Flute=75]="Pan_Flute",u[u.Blown_Bottle=76]="Blown_Bottle",u[u.Shakuhachi=77]="Shakuhachi",u[u.Whistle=78]="Whistle",u[u.Ocarina=79]="Ocarina",u[u.Lead_1_square=80]="Lead_1_square",u[u.Lead_2_sawtooth=81]="Lead_2_sawtooth",u[u.Lead_3_calliope=82]="Lead_3_calliope",u[u.Lead_4_chiff=83]="Lead_4_chiff",u[u.Lead_5_charang=84]="Lead_5_charang",u[u.Lead_6_voice=85]="Lead_6_voice",u[u.Lead_7_fifths=86]="Lead_7_fifths",u[u.Lead_8_bass_lead=87]="Lead_8_bass_lead",u[u.Pad_1_new_age=88]="Pad_1_new_age",u[u.Pad_2_warm=89]="Pad_2_warm",u[u.Pad_3_polysynth=90]="Pad_3_polysynth",u[u.Pad_4_choir=91]="Pad_4_choir",u[u.Pad_5_bowed=92]="Pad_5_bowed",u[u.Pad_6_metallic=93]="Pad_6_metallic",u[u.Pad_7_halo=94]="Pad_7_halo",u[u.Pad_8_sweep=95]="Pad_8_sweep",u[u.FX_1_rain=96]="FX_1_rain",u[u.FX_2_soundtrack=97]="FX_2_soundtrack",u[u.FX_3_crystal=98]="FX_3_crystal",u[u.FX_4_atmosphere=99]="FX_4_atmosphere",u[u.FX_5_brightness=100]="FX_5_brightness",u[u.FX_6_goblins=101]="FX_6_goblins",u[u.FX_7_echoes=102]="FX_7_echoes",u[u.FX_8_scifi=103]="FX_8_scifi",u[u.Sitar=104]="Sitar",u[u.Banjo=105]="Banjo",u[u.Shamisen=106]="Shamisen",u[u.Koto=107]="Koto",u[u.Kalimba=108]="Kalimba",u[u.Bag_pipe=109]="Bag_pipe",u[u.Fiddle=110]="Fiddle",u[u.Shanai=111]="Shanai",u[u.Tinkle_Bell=112]="Tinkle_Bell",u[u.Agogo=113]="Agogo",u[u.Steel_Drums=114]="Steel_Drums",u[u.Woodblock=115]="Woodblock",u[u.Taiko_Drum=116]="Taiko_Drum",u[u.Melodic_Tom=117]="Melodic_Tom",u[u.Synth_Drum=118]="Synth_Drum",u[u.Reverse_Cymbal=119]="Reverse_Cymbal",u[u.Guitar_Fret_Noise=120]="Guitar_Fret_Noise",u[u.Breath_Noise=121]="Breath_Noise",u[u.Seashore=122]="Seashore",u[u.Bird_Tweet=123]="Bird_Tweet",u[u.Telephone_Ring=124]="Telephone_Ring",u[u.Helicopter=125]="Helicopter",u[u.Applause=126]="Applause",u[u.Gunshot=127]="Gunshot",u[u.Percussion=128]="Percussion"},function(t,e,n){"use strict";function i(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",function(t){e.processChunk(t)}),t.on("end",function(){e.end()}),t.on("error",function(t){e.error(t)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},t.exports=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.MusicSheetReadingException=function(t,e){this.message=t,void 0!==e&&(this.message+=" "+e.toString())};e.ArgumentOutOfRangeException=function(t){this.message=t};e.InvalidEnumArgumentException=function(t){this.message=t}},function(t,e,n){function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var i,o;window,t.exports=(o={},r.m=i=[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){var i="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(t))return i.get(t);i.set(t,n)}function n(){return function(t,e,n){return(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&u(r,n.prototype),r}).apply(null,arguments)}(t,arguments,l(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e);var C=function(){};C.L=function(t,e){if(e){var n=Array.prototype.slice.call(e).join(" ");window.console.log(t+": "+n)}},C.MakeException=function(i){return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(r,a(Error)),r;function r(t,e){var n;return s(this,r),(n=function(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,l(r).call(this,t))).name=i,n.message=t,n.data=e,n}};var i=(function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(r.prototype,[{key:"toString",value:function(){return"[RuntimeError] "+this.code+":"+this.message}}]),r);function r(t,e){s(this,r),this.code=t,this.message=e}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function h(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}C.RuntimeError=i,C.RERR=C.RuntimeError,C.Merge=function(t,e){for(var n in e)t[n]=e[n];return t},C.Min=Math.min,C.Max=Math.max,C.forEach=function(t,e){for(var n=0;n<t.length;n++)e(t[n],n)},C.RoundN=function(t,e){return e/2<=t%e?parseInt(t/e,10)*e+e:parseInt(t/e,10)*e},C.MidLine=function(t,e){var n=e+(t-e)/2;return 0<n%2&&(n=C.RoundN(10*n,5)/10),n},C.SortAndUnique=function(t,e,n){if(1<t.length){var i,r=[];t.sort(e);for(var o=0;o<t.length;++o)0!==o&&n(t[o],i)||r.push(t[o]),i=t[o];return r}return t},C.Contains=function(t,e){for(var n=t.length;n--;)if(t[n]===e)return!0;return!1},C.getCanvasContext=function(t){if(!t)throw new C.RERR("BadArgument","Invalid canvas selector: "+t);var e=document.getElementById(t);if(!e||!e.getContext)throw new C.RERR("UnsupportedBrowserError","This browser does not support HTML5 Canvas");return e.getContext("2d")},C.drawDot=function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"#55";t.save(),t.setFillStyle(i),t.beginPath(),t.arc(e,n,3,0,2*Math.PI,!0),t.closePath(),t.fill(),t.restore()},C.BM=function(t,e){var n=(new Date).getTime();e();var i=(new Date).getTime()-n;C.L(t+i+"ms")},C.StackTrace=function(){return(new Error).stack},C.W=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.join(" ");window.console.log("Warning: ",i,C.StackTrace())},C.Prefix=function(t){return C.Prefix.prefix+t},C.Prefix.prefix="vf-";var p=(h(f,null,[{key:"GCD",value:function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new C.RERR("BadArgument","Invalid numbers: ".concat(t,", ").concat(e));for(var n;0!==e;)e=t%(n=e),t=n;return t}},{key:"LCM",value:function(t,e){return t*e/f.GCD(t,e)}},{key:"LCMM",value:function(t){if(0===t.length)return 0;if(1===t.length)return t[0];if(2===t.length)return f.LCM(t[0],t[1]);var e=t[0];return t.shift(),f.LCM(e,f.LCMM(t))}}]),h(f,[{key:"set",value:function(t,e){return this.numerator=void 0===t?1:t,this.denominator=void 0===e?1:e,this}},{key:"value",value:function(){return this.numerator/this.denominator}},{key:"simplify",value:function(){var t=this.numerator,e=this.denominator,n=f.GCD(t,e);return t/=n,(e/=n)<0&&(e=-e,t=-t),this.set(t,e)}},{key:"add",value:function(t,e){var n,i;i=t instanceof f?(n=t.numerator,t.denominator):(n=void 0!==t?t:0,void 0!==e?e:1);var r=f.LCM(this.denominator,i),o=r/this.denominator,s=r/i,a=this.numerator*o+n*s;return this.set(a,r)}},{key:"subtract",value:function(t,e){var n,i;i=t instanceof f?(n=t.numerator,t.denominator):(n=void 0!==t?t:0,void 0!==e?e:1);var r=f.LCM(this.denominator,i),o=r/this.denominator,s=r/i,a=this.numerator*o-n*s;return this.set(a,r)}},{key:"multiply",value:function(t,e){var n,i;return i=t instanceof f?(n=t.numerator,t.denominator):(n=void 0!==t?t:1,void 0!==e?e:1),this.set(this.numerator*n,this.denominator*i)}},{key:"divide",value:function(t,e){var n,i;return i=t instanceof f?(n=t.numerator,t.denominator):(n=void 0!==t?t:1,void 0!==e?e:1),this.set(this.numerator*i,this.denominator*n)}},{key:"equals",value:function(t){var e=f.__compareA.copy(t).simplify(),n=f.__compareB.copy(this).simplify();return e.numerator===n.numerator&&e.denominator===n.denominator}},{key:"greaterThan",value:function(t){var e=f.__compareB.copy(this);return e.subtract(t),0<e.numerator}},{key:"greaterThanEquals",value:function(t){var e=f.__compareB.copy(this);return e.subtract(t),0<=e.numerator}},{key:"lessThan",value:function(t){return!this.greaterThanEquals(t)}},{key:"lessThanEquals",value:function(t){return!this.greaterThan(t)}},{key:"clone",value:function(){return new f(this.numerator,this.denominator)}},{key:"copy",value:function(t){return"number"==typeof t?this.set(t||0,1):this.set(t.numerator,t.denominator)}},{key:"quotient",value:function(){return Math.floor(this.numerator/this.denominator)}},{key:"fraction",value:function(){return this.numerator%this.denominator}},{key:"abs",value:function(){return this.denominator=Math.abs(this.denominator),this.numerator=Math.abs(this.numerator),this}},{key:"toString",value:function(){return this.numerator+"/"+this.denominator}},{key:"toSimplifiedString",value:function(){return f.__tmp.copy(this).simplify().toString()}},{key:"toMixedString",value:function(){var t="",e=this.quotient(),n=f.__tmp.copy(this);return e<0?n.abs().fraction():n.fraction(),0!==e?(t+=e,0!==n.numerator&&(t+=" "+n.toSimplifiedString())):t=0===n.numerator?"0":n.toSimplifiedString(),t}},{key:"parse",value:function(t){var e=t.split("/"),n=parseInt(e[0],10),i=e[1]?parseInt(e[1],10):1;return this.set(n,i)}}]),f);function f(t,e){!function(t){if(!(t instanceof f))throw new TypeError("Cannot call a class as a function")}(this),this.set(t,e)}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function b(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}p.__compareA=new p,p.__compareB=new p,p.__tmp=new p;var y=C.MakeException("RegistryError");function m(t,e,n,i,r){t[e][n]||(t[e][n]={}),t[e][n][i]=r}var g=(b(v,null,[{key:"INDEXES",get:function(){return["type"]}}]),b(v,[{key:"clear",value:function(){return this.index={id:{},type:{},class:{}},this}},{key:"updateIndex",value:function(t){var e=t.id,n=t.name,i=t.value,r=t.oldValue,o=this.getElementById(e);null!==r&&this.index[n][r]&&delete this.index[n][r][e],null!==i&&m(this.index,n,i,o.getAttribute("id"),o)}},{key:"register",value:function(e,n){var i=this;if(!(n=n||e.getAttribute("id")))throw new y("Can't add element without `id` attribute to registry",e);return e.setAttribute("id",n),m(this.index,"id",n,n,e),v.INDEXES.forEach(function(t){i.updateIndex({id:n,name:t,value:e.getAttribute(t),oldValue:null})}),e.onRegister(this),this}},{key:"getElementById",value:function(t){return this.index.id[t]?this.index.id[t][t]:null}},{key:"getElementsByAttribute",value:function(t,e){var n=this.index[t];return n&&n[e]?Object.keys(n[e]).map(function(t){return n[e][t]}):[]}},{key:"getElementsByType",value:function(t){return this.getElementsByAttribute("type",t)}},{key:"getElementsByClass",value:function(t){return this.getElementsByAttribute("class",t)}},{key:"onUpdate",value:function(t){var e,n,i=t.id,r=t.name,o=t.value,s=t.oldValue;return e=v.INDEXES.concat(["id","class"]),n=r,0<e.filter(function(t){return t===n}).length&&this.updateIndex({id:i,name:r,value:o,oldValue:s}),this}}],[{key:"enableDefaultRegistry",value:function(t){v.defaultRegistry=t}},{key:"getDefaultRegistry",value:function(){return v.defaultRegistry}},{key:"disableDefaultRegistry",value:function(){v.defaultRegistry=null}}]),v);function v(){!function(t){if(!(t instanceof v))throw new TypeError("Cannot call a class as a function")}(this),this.clear()}function _(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function S(t,e,n){return e&&_(t.prototype,e),n&&_(t,n),t}var x=(S(w,g.defaultRegistry=null,[{key:"newID",value:function(){return"auto"+w.ID++}}]),S(w,[{key:"setStyle",value:function(t){return this.style=t,this}},{key:"getStyle",value:function(){return this.style}},{key:"applyStyle",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.context,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getStyle();return e&&(t.save(),e.shadowColor&&t.setShadowColor(e.shadowColor),e.shadowBlur&&t.setShadowBlur(e.shadowBlur),e.fillStyle&&t.setFillStyle(e.fillStyle),e.strokeStyle&&t.setStrokeStyle(e.strokeStyle),e.lineWidth&&t.setLineWidth(e.lineWidth)),this}},{key:"restoreStyle",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.context;return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getStyle())&&t.restore(),this}},{key:"hasClass",value:function(t){return!0===this.attrs.classes[t]}},{key:"addClass",value:function(t){return this.attrs.classes[t]=!0,this.registry&&this.registry.onUpdate({id:this.getAttribute("id"),name:"class",value:t,oldValue:null}),this}},{key:"removeClass",value:function(t){return delete this.attrs.classes[t],this.registry&&this.registry.onUpdate({id:this.getAttribute("id"),name:"class",value:null,oldValue:t}),this}},{key:"onRegister",value:function(t){return this.registry=t,this}},{key:"isRendered",value:function(){return this.rendered}},{key:"setRendered",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return this.rendered=t,this}},{key:"getAttributes",value:function(){return this.attrs}},{key:"getAttribute",value:function(t){return this.attrs[t]}},{key:"setAttribute",value:function(t,e){var n=this.attrs.id,i=this.attrs[t];return this.attrs[t]=e,this.registry&&this.registry.onUpdate({id:n,name:t,value:e,oldValue:i}),this}},{key:"getContext",value:function(){return this.context}},{key:"setContext",value:function(t){return this.context=t,this}},{key:"getBoundingBox",value:function(){return this.boundingBox}},{key:"checkContext",value:function(){if(!this.context)throw new C.RERR("NoContext","No rendering context attached to instance");return this.context}}]),w);function w(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).type;!function(t){if(!(t instanceof w))throw new TypeError("Cannot call a class as a function")}(this),this.attrs={id:w.newID(),el:null,type:t||"Base",classes:{}},this.boundingBox=null,this.context=null,this.rendered=!1,g.getDefaultRegistry()&&g.getDefaultRegistry().register(this)}x.ID=1e3;var E=(function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(P.prototype,[{key:"width",value:function(){return this.x2-this.x1}},{key:"height",value:function(){return this.y2-this.y1}},{key:"addPoint",value:function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}},{key:"addX",value:function(t){this.addPoint(t,null)}},{key:"addY",value:function(t){this.addPoint(null,t)}},{key:"addQuadraticCurve",value:function(t,e,n,i,r,o){var s=t+2/3*(n-t),a=e+2/3*(i-e),u=s+1/3*(r-t),l=a+1/3*(o-e);this.addBezierCurve(t,e,s,a,u,l,r,o)}},{key:"addBezierCurve",value:function(t,e,n,i,r,o,s,a){var u,l=[t,e],c=[n,i],h=[r,o],f=[s,a];function p(t,e){return Math.pow(1-t,3)*l[e]+3*Math.pow(1-t,2)*t*c[e]+3*(1-t)*Math.pow(t,2)*h[e]+Math.pow(t,3)*f[e]}for(this.addPoint(l[0],l[1]),this.addPoint(f[0],f[1]),u=0;u<=1;u++){var d=6*l[u]-12*c[u]+6*h[u],b=-3*l[u]+9*c[u]-9*h[u]+3*f[u],y=3*c[u]-3*l[u];if(0!=b){var m=Math.pow(d,2)-4*y*b;if(!(m<0)){var g=(-d+Math.sqrt(m))/(2*b);0<g&&g<1&&(0===u&&this.addX(p(g,u)),1===u&&this.addY(p(g,u)));var v=(-d-Math.sqrt(m))/(2*b);0<v&&v<1&&(0===u&&this.addX(p(v,u)),1===u&&this.addY(p(v,u)))}}else{if(0==d)continue;var _=-y/d;0<_&&_<1&&(0===u&&this.addX(p(_,u)),1===u&&this.addY(p(_,u)))}}}}]),P);function P(t,e,n,i){!function(t){if(!(t instanceof P))throw new TypeError("Cannot call a class as a function")}(this),this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.addPoint(t,e),this.addPoint(n,i)}function T(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function k(t,e,n){return e&&T(t.prototype,e),n&&T(t,n),t}var O=(k(R,null,[{key:"copy",value:function(t){return new R(t.x,t.y,t.w,t.h)}}]),k(R,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getW",value:function(){return this.w}},{key:"getH",value:function(){return this.h}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setW",value:function(t){return this.w=t,this}},{key:"setH",value:function(t){return this.h=t,this}},{key:"move",value:function(t,e){this.x+=t,this.y+=e}},{key:"clone",value:function(){return R.copy(this)}},{key:"mergeWith",value:function(t,e){var n=t,i=this.x<n.x?this.x:n.x,r=this.y<n.y?this.y:n.y,o=Math.max(this.x+this.w,n.x+n.w)-i,s=Math.max(this.y+this.h,n.y+n.h)-r;return this.x=i,this.y=r,this.w=o,this.h=s,e&&this.draw(e),this}},{key:"draw",value:function(t,e,n){e=e||0,n=n||0,t.rect(this.x+e,this.y+n,this.w,this.h),t.stroke()}}]),R),M={glyphs:{v0:{x_min:0,x_max:514.5,ha:525,o:"m 236 648 b 246 648 238 648 242 648 b 288 646 261 648 283 648 b 472 513 364 634 428 587 b 514 347 502 464 514 413 b 462 163 514 272 499 217 b 257 44 409 83 333 44 b 50 163 181 44 103 83 b 0 347 14 217 0 272 b 40 513 0 413 12 464 b 236 648 87 591 155 638 m 277 614 b 253 616 273 616 261 616 b 242 616 247 616 243 616 b 170 499 193 609 181 589 b 159 348 163 446 159 398 b 166 222 159 308 161 266 b 201 91 174 138 183 106 b 257 76 215 81 235 76 b 311 91 277 76 299 81 b 347 222 330 106 338 138 b 353 348 352 266 353 308 b 344 499 353 398 351 446 b 277 614 333 587 322 606 m 257 -1 l 258 -1 l 255 -1 l 257 -1 m 257 673 l 258 673 l 255 673 l 257 673 "},v1:{x_min:-1.359375,x_max:344.359375,ha:351,o:"m 126 637 l 129 638 l 198 638 l 266 638 l 269 635 b 274 631 272 634 273 632 l 277 627 l 277 395 b 279 156 277 230 277 161 b 329 88 281 123 295 106 b 344 69 341 81 344 79 b 337 55 344 62 343 59 l 333 54 l 197 54 l 61 54 l 58 55 b 50 69 53 59 50 62 b 65 88 50 79 53 81 b 80 97 72 91 74 93 b 117 156 103 113 112 129 b 117 345 117 161 117 222 l 117 528 l 100 503 l 38 406 b 14 383 24 384 23 383 b -1 398 5 383 -1 390 b 4 415 -1 403 1 409 b 16 437 5 416 10 426 l 72 539 l 100 596 b 121 632 119 631 119 631 b 126 637 122 634 125 635 m 171 -1 l 172 -1 l 170 -1 l 171 -1 m 171 673 l 172 673 l 170 673 l 171 673 "},v2:{x_min:-1.359375,x_max:458.6875,ha:468,o:"m 197 648 b 216 648 201 648 208 648 b 258 646 232 648 253 648 b 419 546 333 637 393 599 b 432 489 428 528 432 509 b 356 342 432 440 405 384 b 235 278 322 313 288 295 b 69 170 166 256 107 217 b 69 169 69 170 69 169 b 69 169 69 169 69 169 b 74 173 69 169 72 170 b 209 222 112 204 163 222 b 310 195 247 222 274 215 b 371 179 332 184 352 179 b 396 181 379 179 387 179 b 428 202 409 184 423 194 b 442 212 431 209 436 212 b 458 197 450 212 458 206 b 441 148 458 190 449 165 b 299 44 409 84 353 44 b 288 45 295 44 292 44 b 250 61 274 45 268 49 b 122 99 212 86 164 99 b 73 91 104 99 88 97 b 28 63 53 84 34 72 b 14 54 25 56 20 54 b 1 62 9 54 4 56 l -1 65 l -1 79 b 0 99 -1 91 0 95 b 2 113 1 102 2 108 b 164 309 20 197 81 272 b 285 470 232 341 277 398 b 287 487 287 476 287 481 b 171 595 287 551 239 595 b 155 595 166 595 160 595 b 142 592 145 594 142 594 b 145 589 142 592 142 591 b 179 527 168 576 179 551 b 132 455 179 496 163 467 b 104 451 122 452 112 451 b 27 530 62 451 27 487 b 29 555 27 538 27 546 b 197 648 44 601 115 639 m 228 -1 l 230 -1 l 227 -1 l 228 -1 m 228 673 l 230 673 l 227 673 l 228 673 "},v3:{x_min:-1.359375,x_max:409.6875,ha:418,o:"m 174 648 b 191 648 176 648 183 648 b 225 648 204 648 220 648 b 402 523 317 638 389 588 b 404 503 404 517 404 510 b 402 484 404 495 404 488 b 264 373 389 437 334 394 b 257 370 259 371 257 371 b 257 370 257 370 257 370 b 264 369 258 370 261 369 b 409 202 359 334 409 267 b 318 72 409 152 381 104 b 200 43 281 52 240 43 b 23 113 134 43 69 68 b 0 169 6 129 0 149 b 77 249 0 210 29 249 l 77 249 b 152 174 125 249 152 212 b 103 102 152 145 137 116 b 103 102 103 102 103 102 b 147 94 103 101 132 95 b 153 94 149 94 151 94 b 265 206 219 94 265 141 b 264 226 265 213 265 219 b 147 355 253 299 204 353 b 126 371 133 356 126 362 b 147 388 126 383 132 388 b 254 474 196 391 238 424 b 259 502 258 484 259 494 b 182 592 259 544 228 582 b 156 595 175 595 166 595 b 115 592 142 595 129 594 l 111 591 l 115 588 b 152 524 141 574 152 549 b 92 449 152 491 130 458 b 76 448 87 448 81 448 b -1 530 32 448 -1 488 b 20 581 -1 548 5 566 b 174 648 55 619 108 641 m 204 -1 l 205 -1 l 202 -1 l 204 -1 m 204 673 l 205 673 l 202 673 l 204 673 "},v4:{x_min:0,x_max:468.21875,ha:478,o:"m 174 637 b 232 638 175 638 189 638 b 277 638 245 638 259 638 l 378 638 l 381 635 b 389 623 386 632 389 627 b 382 609 389 617 386 613 b 366 589 381 606 372 598 l 313 528 l 245 451 l 209 410 l 155 348 l 84 267 b 59 240 72 252 59 240 b 59 240 59 240 59 240 b 151 238 59 238 68 238 l 242 238 l 242 303 b 243 371 242 369 242 370 b 289 426 245 374 254 385 l 303 441 l 317 456 l 338 483 l 360 506 l 371 520 b 386 527 375 526 381 527 b 400 519 392 527 397 524 b 401 440 401 516 401 514 b 401 377 401 423 401 402 l 401 238 l 426 238 b 453 237 449 238 450 238 b 465 217 461 234 465 226 b 460 202 465 212 464 206 b 426 197 454 197 453 197 l 401 197 l 401 180 b 451 88 402 129 412 109 b 468 69 465 81 468 79 b 461 55 468 62 466 59 l 458 54 l 321 54 l 185 54 l 182 55 b 175 69 176 59 175 62 b 191 88 175 79 176 81 b 240 180 230 109 240 129 l 240 197 l 125 197 b 73 195 104 195 87 195 b 8 197 10 195 9 197 b 0 212 2 199 0 205 b 0 212 0 212 0 212 b 20 242 0 219 0 219 b 163 610 104 344 163 492 b 174 637 163 628 166 634 m 234 -1 l 235 -1 l 232 -1 l 234 -1 m 234 673 l 235 673 l 232 673 l 234 673 "},v5:{x_min:0,x_max:409.6875,ha:418,o:"m 47 637 b 53 638 49 638 50 638 b 69 634 55 638 61 637 b 210 610 114 619 161 610 b 363 634 259 610 311 619 b 382 638 372 637 378 638 b 392 634 386 638 389 637 b 397 623 396 630 397 627 b 393 610 397 620 396 616 b 298 505 368 552 338 520 b 212 494 277 498 246 494 b 65 517 163 494 106 502 b 61 517 62 517 61 517 b 61 517 61 517 61 517 b 51 408 61 517 51 412 b 51 408 51 408 51 408 b 51 408 51 408 51 408 b 61 412 53 408 55 409 b 125 434 80 421 103 430 b 185 441 145 440 166 441 b 409 244 310 441 409 353 b 401 191 409 227 406 209 b 197 43 375 105 287 43 b 159 47 183 43 171 44 b 23 123 112 56 61 86 b 0 180 6 140 0 159 b 76 260 0 220 31 260 b 92 259 81 260 87 259 b 152 183 132 251 152 216 b 100 112 152 152 134 122 b 95 111 98 112 95 111 b 95 111 95 111 95 111 b 129 98 95 109 119 101 b 148 97 136 97 141 97 b 264 235 206 97 261 158 b 265 248 265 240 265 244 b 210 398 265 312 243 373 b 179 408 201 406 194 408 b 174 408 178 408 176 408 b 53 369 130 408 88 394 b 34 359 39 359 38 359 b 17 374 24 359 17 365 b 39 628 17 384 38 625 b 47 637 40 631 43 635 m 204 -1 l 205 -1 l 202 -1 l 204 -1 m 204 673 l 205 673 l 202 673 l 204 673 "},v6:{x_min:0,x_max:475.03125,ha:485,o:"m 255 648 b 274 648 259 648 266 648 b 314 646 288 648 307 648 b 450 555 374 637 438 594 b 454 530 453 546 454 538 b 375 451 454 485 416 451 b 328 467 359 451 343 455 b 300 526 310 483 300 503 b 352 598 300 557 319 589 b 356 599 355 598 356 599 b 352 602 356 599 355 601 b 288 616 330 612 308 616 b 210 584 257 616 230 605 b 164 433 189 559 174 508 b 160 374 163 415 160 381 b 160 374 160 374 160 374 b 160 374 160 374 160 374 b 168 377 160 374 164 376 b 258 395 200 390 228 395 b 366 367 294 395 328 387 b 475 223 436 333 475 283 b 472 197 475 215 473 206 b 349 65 462 141 419 95 b 259 43 317 51 288 43 b 167 69 230 43 200 52 b 4 290 80 113 20 195 b 0 349 1 309 0 328 b 20 467 0 391 6 433 b 255 648 58 563 155 637 m 269 363 b 257 363 265 363 261 363 b 210 345 236 363 220 356 b 186 226 196 324 186 272 b 187 198 186 216 186 206 b 213 95 191 151 202 112 b 257 76 221 83 238 76 b 270 77 261 76 266 76 b 321 156 299 81 310 99 b 329 229 326 183 329 206 b 321 301 329 252 326 274 b 269 363 311 342 298 359 m 236 -1 l 238 -1 l 235 -1 l 236 -1 m 236 673 l 238 673 l 235 673 l 236 673 "},v7:{x_min:0,x_max:442.359375,ha:451,o:"m 147 648 b 166 649 153 649 160 649 b 313 598 217 649 273 630 b 340 587 323 588 328 587 l 341 587 b 412 628 367 587 390 601 b 427 638 416 635 421 638 b 439 632 431 638 435 637 b 442 623 441 630 442 628 b 430 569 442 616 439 603 b 352 369 408 492 377 410 b 300 259 325 324 313 298 b 273 84 283 205 273 140 b 265 55 273 65 272 59 l 261 54 l 181 54 l 99 54 l 96 55 b 91 61 95 56 92 59 l 89 63 l 89 77 b 147 263 89 133 111 202 b 261 401 176 313 212 355 b 378 541 315 449 349 489 l 382 548 l 375 544 b 240 495 333 512 285 495 b 129 535 198 495 160 509 b 84 560 108 552 95 560 b 76 559 81 560 78 560 b 31 487 59 555 43 530 b 14 470 27 473 24 470 b 1 477 8 470 4 471 l 0 480 l 0 553 l 0 627 l 1 630 b 16 638 4 635 9 638 b 23 635 17 638 20 637 b 49 626 36 626 39 626 b 96 638 59 626 80 630 b 104 639 99 638 102 639 b 117 644 107 641 112 642 b 147 648 125 645 137 648 m 220 -1 l 221 -1 l 219 -1 l 220 -1 m 220 673 l 221 673 l 219 673 l 220 673 "},v8:{x_min:0,x_max:488.640625,ha:499,o:"m 217 648 b 245 649 225 648 235 649 b 453 516 343 649 430 595 b 458 478 455 503 458 491 b 412 370 458 440 441 398 b 411 369 412 369 411 369 b 415 365 411 367 412 367 b 488 231 462 331 488 281 b 472 165 488 208 483 186 b 243 43 434 86 338 43 b 63 104 178 43 112 62 b 0 233 20 140 0 186 b 73 365 0 283 24 331 l 77 369 l 72 374 b 29 476 42 406 29 441 b 217 648 29 557 103 635 m 258 605 b 242 606 253 605 247 606 b 157 552 198 606 157 580 b 160 541 157 548 159 544 b 319 413 176 503 242 452 l 337 403 l 338 406 b 359 476 352 428 359 452 b 258 605 359 537 318 595 m 138 326 b 130 330 134 328 130 330 b 130 330 130 330 130 330 b 107 305 127 330 112 313 b 84 231 91 281 84 256 b 243 86 84 156 151 86 b 249 87 245 86 246 87 b 347 156 303 88 347 120 b 344 172 347 162 345 167 b 156 319 325 227 257 281 b 138 326 151 322 144 324 m 243 -1 l 245 -1 l 242 -1 l 243 -1 m 243 673 l 245 673 l 242 673 l 243 673 "},v9:{x_min:0,x_max:475.03125,ha:485,o:"m 191 646 b 212 649 198 648 205 649 b 255 644 227 649 243 646 b 458 448 348 616 428 539 b 475 342 469 415 475 378 b 460 244 475 308 469 274 b 193 44 421 124 303 44 b 91 69 157 44 122 51 b 19 161 43 97 19 126 b 21 181 19 167 20 174 b 98 241 32 220 65 241 b 170 186 129 241 160 223 b 172 166 171 179 172 173 b 121 94 172 134 152 102 b 117 93 118 94 117 93 b 121 90 117 93 118 91 b 185 76 142 80 164 76 b 270 119 220 76 251 91 b 308 259 287 145 300 194 b 313 317 310 277 313 310 b 313 317 313 317 313 317 b 313 317 313 317 313 317 b 304 315 313 317 308 316 b 216 295 273 302 245 295 b 145 308 193 295 170 299 b 19 398 88 327 42 360 b 0 469 5 420 0 444 b 24 551 0 496 8 526 b 191 646 54 596 125 637 m 227 614 b 215 616 224 616 220 616 b 202 614 210 616 206 616 b 152 535 174 610 163 592 b 144 463 147 509 144 485 b 152 391 144 440 147 417 b 216 328 163 344 179 328 b 280 391 253 328 269 344 b 288 463 285 417 288 440 b 280 535 288 485 285 509 b 227 614 269 594 258 610 m 236 -1 l 238 -1 l 235 -1 l 236 -1 m 236 673 l 238 673 l 235 673 l 236 673 "},va:{x_min:-149.71875,x_max:148.359375,ha:151,o:"m -8 -1 b -1 0 -5 -1 -4 0 b 16 -11 5 0 13 -4 b 83 -186 17 -12 47 -90 l 148 -358 l 148 -363 b 127 -385 148 -376 138 -385 b 112 -378 122 -385 118 -383 b 54 -226 110 -374 114 -385 b 0 -81 24 -147 0 -81 b -55 -226 -1 -81 -25 -147 b -114 -378 -115 -385 -111 -374 b -129 -385 -119 -383 -123 -385 b -149 -363 -140 -385 -149 -376 l -149 -358 l -84 -186 b -19 -11 -49 -90 -19 -12 b -8 -1 -17 -8 -12 -4 "},vb:{x_min:0,x_max:428.75,ha:438,o:"m 262 186 b 273 186 266 186 272 186 b 274 186 273 186 274 186 b 285 186 274 186 280 186 b 428 48 375 181 428 122 b 386 -68 428 12 416 -29 b 155 -187 329 -145 236 -187 b 12 -111 92 -187 38 -162 b 0 -51 4 -91 0 -72 b 262 186 0 58 122 179 "},vc:{x_min:0,x_max:447.8125,ha:457,o:"m 0 86 l 0 173 l 223 173 l 447 173 l 447 86 l 447 0 l 223 0 l 0 0 l 0 86 "},vf:{x_min:0,x_max:370.21875,ha:378,o:"m 0 0 l 0 277 l 61 277 l 122 277 l 122 0 l 122 -278 l 61 -278 l 0 -278 l 0 0 m 246 -1 l 246 277 l 308 277 l 370 277 l 370 -1 l 370 -278 l 308 -278 l 246 -278 l 246 -1 "},v10:{x_min:0,x_max:559.421875,ha:571,o:"m 5 127 b 14 127 6 127 9 127 b 51 126 25 127 43 127 b 175 98 93 122 138 112 l 186 94 b 279 51 210 86 255 65 b 285 47 280 51 283 48 b 319 27 291 44 311 31 l 326 22 b 359 0 332 19 352 4 l 367 -6 b 371 -9 368 -6 370 -8 l 379 -15 b 387 -22 383 -18 386 -20 l 398 -30 l 411 -40 l 417 -47 l 427 -55 l 434 -61 b 441 -66 436 -62 439 -65 l 446 -72 l 453 -77 l 462 -87 b 558 -188 490 -113 549 -176 b 559 -195 559 -191 559 -194 b 548 -205 559 -201 555 -205 b 541 -204 547 -205 544 -205 b 534 -198 539 -201 536 -199 l 525 -191 b 481 -162 518 -187 490 -167 b 472 -155 477 -159 472 -156 b 468 -152 470 -155 469 -154 b 461 -149 466 -152 464 -151 b 428 -130 454 -145 441 -137 b 371 -99 413 -122 372 -99 b 363 -95 371 -99 367 -98 b 353 -91 357 -94 353 -91 b 348 -90 353 -91 352 -91 b 332 -81 343 -87 341 -86 b 27 -12 230 -37 127 -13 b 0 -5 4 -11 2 -11 b 0 58 0 -2 0 27 b 0 122 0 88 0 120 b 5 127 1 124 4 126 "},v11:{x_min:-155.171875,x_max:153.8125,ha:157,o:"m -137 353 b -130 353 -136 353 -133 353 b -112 349 -125 353 -119 352 b -100 342 -110 347 -104 344 b 0 317 -69 326 -35 317 b 111 349 38 317 76 328 b 129 353 117 352 123 353 b 153 327 142 353 153 344 b 144 302 153 320 153 317 b 27 6 93 226 50 113 b 21 -13 24 -11 24 -11 b 0 -26 17 -22 8 -26 b -24 -12 -9 -26 -19 -22 b -28 5 -24 -9 -27 -2 b -145 302 -53 117 -95 224 b -155 327 -155 317 -155 320 b -137 353 -155 340 -148 349 "},v18:{x_min:0,x_max:323.9375,ha:331,o:"m 217 535 b 225 537 220 537 221 537 b 245 524 235 537 242 533 l 246 521 l 247 390 l 247 258 l 273 265 b 306 270 288 269 299 270 b 322 259 315 270 319 267 b 323 208 323 256 323 233 b 322 158 323 184 323 159 b 288 140 318 148 315 147 b 247 130 254 131 247 130 b 247 65 247 130 247 104 b 247 20 247 51 247 36 l 247 -88 l 273 -81 b 306 -76 289 -77 299 -76 b 318 -81 311 -76 315 -77 b 323 -123 323 -87 323 -86 l 323 -138 l 323 -154 b 318 -195 323 -191 323 -190 b 269 -210 314 -199 315 -199 b 249 -216 259 -213 250 -216 l 247 -216 l 247 -349 l 246 -483 l 245 -487 b 225 -499 242 -495 234 -499 b 206 -487 219 -499 210 -495 l 205 -483 l 205 -355 l 205 -227 l 204 -227 l 181 -233 l 138 -244 b 117 -249 127 -247 117 -249 b 115 -385 115 -249 115 -256 l 115 -523 l 114 -526 b 95 -538 110 -534 102 -538 b 74 -526 87 -538 78 -534 l 73 -523 l 73 -391 b 72 -260 73 -269 73 -260 b 72 -260 72 -260 72 -260 b 19 -273 61 -263 23 -273 b 0 -260 10 -273 4 -267 b 0 -209 0 -256 0 -256 l 0 -162 l 1 -158 b 61 -134 5 -148 5 -148 l 73 -131 l 73 -22 b 72 86 73 79 73 86 b 72 86 72 86 72 86 b 19 74 61 83 23 74 b 0 86 10 74 4 79 b 0 137 0 90 0 90 l 0 184 l 1 188 b 61 212 5 198 5 198 l 73 215 l 73 348 l 73 481 l 74 485 b 95 498 78 492 87 498 b 103 495 98 498 100 496 b 114 485 107 494 111 489 l 115 481 l 115 353 l 115 226 l 121 226 b 159 235 123 227 141 231 l 198 247 l 205 248 l 205 384 l 205 521 l 206 524 b 217 535 209 528 212 533 m 205 9 b 205 119 205 70 205 119 l 205 119 b 182 113 204 119 194 116 l 138 102 b 117 97 127 99 117 97 b 115 -12 115 97 115 91 l 115 -122 l 121 -120 b 159 -111 123 -119 141 -115 l 198 -101 l 205 -98 l 205 9 "},v1b:{x_min:0,x_max:559.421875,ha:571,o:"m 544 204 b 548 204 545 204 547 204 b 559 194 555 204 559 199 b 559 190 559 192 559 191 b 530 156 559 188 556 184 b 462 86 510 134 481 104 b 453 76 458 81 454 77 l 446 70 l 441 65 b 434 59 439 63 436 61 l 427 54 b 409 37 426 51 416 44 b 392 23 398 29 394 26 b 387 19 389 22 387 20 b 379 13 386 19 383 16 l 371 8 l 367 5 l 359 -1 l 337 -16 b 285 -48 319 -29 298 -41 l 279 -52 b 186 -95 255 -66 210 -87 l 175 -99 b 23 -129 127 -117 68 -129 b 17 -129 20 -129 19 -129 b 1 -123 2 -129 2 -129 b 0 -49 0 -122 0 -83 b 0 4 0 -22 0 1 b 27 11 2 9 4 9 b 185 31 78 12 145 20 b 198 34 186 31 193 33 b 314 73 234 44 277 58 b 349 88 328 79 340 84 b 353 90 352 90 353 90 b 363 94 353 90 357 93 b 371 98 367 97 371 98 b 428 129 372 98 413 120 b 461 148 441 136 454 144 b 468 151 464 149 466 151 b 472 154 469 152 470 154 b 481 161 473 155 477 158 b 525 190 490 166 518 186 l 534 197 b 540 201 536 198 539 199 b 544 204 541 202 544 204 "},v1d:{x_min:0,x_max:619.3125,ha:632,o:"m 274 184 b 307 186 285 186 296 186 b 616 22 465 186 597 116 b 619 -1 617 13 619 5 b 308 -187 619 -104 483 -187 b 0 -1 133 -187 0 -102 b 5 36 0 11 1 23 b 274 184 29 115 141 176 m 289 161 b 272 162 284 162 277 162 b 171 41 209 162 171 108 b 205 -73 171 5 182 -34 b 345 -163 243 -133 298 -163 b 436 -98 385 -163 420 -142 b 446 -43 443 -80 446 -62 b 289 161 446 47 377 147 "},v1e:{x_min:-402.890625,x_max:401.53125,ha:410,o:"m -219 173 b -213 174 -217 174 -215 174 b -202 173 -209 174 -205 173 b -114 86 -200 172 -179 151 b -28 0 -66 37 -28 0 b 40 84 -28 0 2 37 b 117 174 111 173 110 172 b 122 174 118 174 119 174 b 132 173 125 174 129 173 b 295 11 134 172 171 134 l 307 -1 l 336 34 b 374 76 366 72 368 74 b 381 77 375 77 378 77 b 401 56 392 77 401 68 b 400 48 401 54 401 51 b 223 -172 397 41 230 -166 b 210 -176 220 -174 215 -176 b 201 -174 206 -176 204 -176 b 112 -87 198 -173 178 -152 b 27 0 65 -38 27 0 b -42 -86 27 0 -4 -38 b -118 -174 -112 -174 -111 -173 b -123 -176 -119 -176 -121 -176 b -133 -174 -126 -176 -130 -174 b -296 -12 -136 -173 -172 -137 l -308 0 l -337 -34 b -375 -77 -367 -73 -370 -76 b -382 -79 -377 -79 -379 -79 b -402 -58 -393 -79 -402 -69 b -401 -49 -402 -55 -402 -52 b -224 172 -398 -43 -228 167 b -219 173 -223 172 -220 173 "},v1f:{x_min:-340.28125,x_max:338.921875,ha:346,o:"m -32 520 b -29 521 -31 520 -31 521 b -23 519 -27 521 -24 520 b -20 513 -21 517 -20 516 b -21 506 -20 512 -20 509 b -31 474 -23 502 -27 488 l -53 402 l -66 352 l -68 349 l -57 349 b -32 351 -51 349 -40 351 b 123 370 19 352 74 359 b 137 371 127 370 133 371 b 170 356 152 371 164 366 b 171 355 170 355 170 355 b 216 366 174 355 183 358 b 280 378 268 377 266 377 b 287 378 283 378 284 378 b 332 349 307 378 322 369 b 338 319 336 341 338 330 b 332 301 338 310 336 302 b 242 280 329 299 246 280 b 242 280 242 280 242 280 b 235 288 236 280 235 283 b 235 292 235 290 235 291 b 236 302 236 297 236 299 b 220 337 236 316 230 330 l 216 340 l 210 335 b 159 276 189 322 172 301 b 118 149 152 265 156 274 b 81 34 84 36 85 36 b -8 13 78 33 -4 13 b -8 13 -8 13 -8 13 b -14 20 -12 15 -14 15 b -8 44 -14 24 -12 31 b -2 66 -5 55 -2 65 b -2 66 -2 66 -2 66 l -2 66 b -43 41 -2 66 -21 55 b -114 4 -98 8 -98 8 b -144 0 -123 0 -134 0 b -242 99 -197 0 -242 43 b -242 109 -242 102 -242 105 b -212 219 -240 122 -242 116 b -185 312 -197 270 -185 312 l -185 312 b -189 312 -185 312 -186 312 b -259 312 -200 312 -227 312 b -321 310 -291 312 -310 310 b -334 312 -330 310 -334 312 b -340 319 -338 313 -340 316 b -336 326 -340 322 -338 324 b -291 337 -334 326 -314 331 l -247 347 l -210 348 b -172 348 -190 348 -172 348 b -168 363 -172 348 -171 355 b -145 442 -151 424 -145 441 b -133 452 -144 444 -140 446 l -77 489 b -32 520 -53 506 -32 520 m 57 334 b 53 335 55 335 54 335 b 44 334 50 335 49 335 b -70 316 8 326 -28 320 b -78 309 -78 316 -78 316 b -108 202 -80 305 -88 274 b -141 81 -136 112 -141 93 b -140 74 -141 79 -141 77 b -117 49 -137 59 -127 49 b -107 52 -114 49 -110 51 b 16 127 -106 54 14 126 b 42 217 16 127 42 215 b 49 241 42 222 44 229 b 73 320 53 251 73 317 b 57 334 73 327 65 333 "},v20:{x_min:-571.671875,x_max:570.3125,ha:582,o:"m -559 351 b -551 352 -556 352 -553 352 b -530 338 -543 352 -533 348 b -529 169 -530 337 -529 291 l -529 1 l -507 27 l -441 112 b -382 174 -394 169 -390 174 b -378 174 -381 174 -379 174 b -281 86 -370 174 -375 179 b -196 0 -234 37 -196 0 b -126 84 -196 0 -164 37 b -50 174 -55 173 -57 172 b -44 174 -49 174 -47 174 b -35 173 -42 174 -38 173 b 53 86 -32 172 -12 151 b 138 0 100 37 138 0 b 208 84 140 0 170 37 b 284 174 279 173 279 172 b 289 174 285 174 288 174 b 300 173 294 174 298 173 b 462 11 303 172 340 134 l 475 -1 l 503 34 b 541 76 534 72 536 74 b 548 77 544 77 545 77 b 570 56 560 77 570 68 b 567 48 570 54 568 51 b 392 -172 564 41 397 -166 b 378 -176 387 -174 382 -176 b 368 -174 375 -176 371 -176 b 280 -87 367 -173 347 -152 b 194 0 234 -38 194 0 b 126 -86 194 0 163 -38 b 49 -174 54 -174 55 -173 b 44 -176 47 -176 46 -176 b 34 -174 40 -176 36 -174 b -54 -87 31 -173 10 -152 b -140 0 -102 -38 -140 0 b -209 -86 -140 0 -171 -38 b -285 -174 -280 -174 -279 -173 b -291 -176 -287 -176 -288 -176 b -300 -174 -294 -176 -298 -174 b -464 -11 -303 -173 -374 -102 l -476 0 l -506 -37 b -539 -76 -528 -65 -537 -74 b -551 -80 -543 -79 -547 -80 b -570 -68 -558 -80 -566 -76 l -571 -65 l -571 136 b -570 340 -571 331 -571 337 b -559 351 -568 344 -564 348 "},v22:{x_min:0,x_max:432.828125,ha:442,o:"m 209 186 b 213 187 210 187 212 187 b 216 187 215 187 216 187 b 224 174 216 186 220 180 b 420 -1 269 105 338 43 b 432 -12 431 -8 432 -9 b 421 -23 432 -15 432 -16 b 228 -180 345 -70 264 -137 b 219 -188 221 -188 221 -188 l 219 -188 b 208 -177 215 -188 215 -188 b 10 1 163 -106 93 -44 b 0 11 0 6 0 8 b 10 22 0 13 0 15 b 202 179 87 69 167 136 b 209 186 206 183 209 186 "},v23:{x_min:0,x_max:133.390625,ha:136,o:"m 54 66 b 65 68 58 68 61 68 b 122 37 88 68 110 56 b 133 -1 130 26 133 12 b 104 -58 133 -23 123 -44 b 66 -69 92 -65 78 -69 b 10 -38 44 -69 23 -58 b 0 -1 2 -27 0 -13 b 54 66 0 30 20 61 "},v25:{x_min:0,x_max:318.5,ha:325,o:"m 20 376 b 167 377 23 377 96 377 b 296 376 231 377 294 377 b 318 347 311 371 318 359 b 296 316 318 333 311 320 b 159 315 294 315 227 315 b 21 316 91 315 24 315 b 0 345 6 320 0 333 b 20 376 0 359 6 371 "},v26:{x_min:-21.78125,x_max:483.1875,ha:493,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 383 20 616 20 616 l 20 148 l 21 151 b 140 199 59 183 102 199 b 206 179 164 199 187 192 l 210 176 l 210 396 l 210 617 l 212 621 b 231 632 216 628 223 632 b 250 620 239 632 247 628 b 251 383 251 616 251 616 l 251 148 l 254 151 b 370 199 291 183 332 199 b 415 191 385 199 400 197 b 483 84 458 176 483 134 b 461 0 483 58 476 29 b 332 -142 439 -40 411 -72 l 255 -215 b 231 -229 240 -229 239 -229 b 216 -223 224 -229 220 -227 b 210 -158 210 -217 210 -223 b 210 -120 210 -148 210 -136 l 210 -29 l 205 -34 b 100 -142 182 -65 159 -88 l 23 -215 b -1 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 l -21 -212 l -21 201 l -21 616 l -20 620 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 m 341 131 b 328 133 337 133 332 133 b 322 133 326 133 323 133 b 257 87 296 129 273 113 l 251 80 l 251 -37 l 251 -156 l 255 -152 b 375 81 328 -72 375 20 l 375 83 b 341 131 375 113 367 126 "},v27:{x_min:0,x_max:432.828125,ha:442,o:"m 208 184 b 213 187 209 186 212 187 b 224 176 217 187 221 183 b 245 147 225 172 235 159 b 419 -1 288 90 347 38 b 431 -8 424 -4 431 -8 b 432 -12 432 -9 432 -11 b 430 -18 432 -13 432 -16 b 364 -61 424 -20 383 -47 b 225 -183 307 -102 250 -152 b 223 -187 224 -184 223 -187 b 220 -188 221 -188 220 -188 b 208 -176 216 -188 210 -184 b 187 -148 205 -173 197 -159 b 12 0 144 -90 84 -38 b 0 11 4 5 0 8 b 16 24 0 13 4 18 b 183 158 83 69 141 115 b 208 184 194 169 198 173 m 183 105 b 176 113 181 109 176 113 b 172 109 176 113 175 112 b 92 45 149 90 117 62 l 88 41 l 102 31 b 247 -105 160 -6 210 -55 l 254 -115 l 257 -112 l 269 -102 b 340 -45 287 -87 319 -61 l 344 -43 l 330 -33 b 183 105 272 6 221 54 "},v28:{x_min:-73.5,x_max:72.140625,ha:74,o:"m -72 252 l -73 254 l 0 254 l 72 254 l 70 252 b 0 -1 70 248 0 -1 b -72 252 -1 -1 -72 248 "},v29:{x_min:-590.71875,x_max:589.359375,ha:601,o:"m 175 273 b 182 274 178 273 181 274 b 202 262 190 274 198 269 b 204 158 204 259 204 259 l 204 56 l 250 112 b 303 174 296 172 298 172 b 308 174 304 174 307 174 b 318 173 313 174 317 173 b 481 11 322 172 357 134 l 494 -1 l 522 34 b 560 76 553 72 555 74 b 567 77 563 77 564 77 b 589 56 579 77 589 68 b 586 48 589 54 588 51 b 411 -172 583 41 416 -166 b 397 -176 406 -174 401 -176 b 387 -174 393 -176 390 -176 b 299 -87 386 -173 366 -152 b 213 0 253 -38 213 0 b 208 -6 213 0 210 -2 l 204 -12 l 204 -147 b 204 -210 204 -173 204 -194 b 198 -292 204 -297 204 -287 b 183 -299 194 -297 189 -299 b 164 -287 175 -299 167 -295 b 163 -174 163 -284 163 -284 l 161 -63 l 119 -117 b 65 -176 76 -170 73 -176 b 61 -176 63 -176 62 -176 b -35 -87 51 -174 57 -180 b -121 0 -83 -38 -121 0 b -190 -86 -122 0 -152 -38 b -266 -174 -261 -174 -259 -173 b -272 -176 -268 -176 -270 -176 b -281 -174 -276 -176 -280 -174 b -371 -86 -284 -173 -304 -152 b -457 0 -417 -38 -457 0 l -457 0 b -477 -26 -457 0 -470 -16 b -548 -227 -524 -88 -548 -161 b -536 -303 -548 -254 -544 -280 b -533 -317 -534 -309 -533 -313 b -553 -338 -533 -330 -541 -338 b -577 -315 -566 -338 -571 -333 b -590 -227 -586 -287 -590 -258 b -518 -9 -590 -154 -564 -77 b -465 56 -509 2 -504 8 l -402 134 b -363 174 -374 170 -371 174 b -359 174 -362 174 -360 174 b -262 86 -351 174 -356 179 b -176 0 -216 37 -176 0 b -107 84 -176 0 -145 37 b -31 174 -36 173 -38 172 b -25 174 -29 174 -28 174 b -16 173 -23 174 -19 173 b 147 11 -13 172 35 123 l 157 -1 l 160 1 l 163 4 l 163 130 b 164 260 163 256 163 258 b 175 273 166 266 170 270 "},v2a:{x_min:-21.78125,x_max:366.140625,ha:374,o:"m 276 1378 b 284 1379 279 1379 281 1379 b 306 1360 292 1379 298 1374 b 352 1247 326 1326 343 1286 b 366 1139 362 1213 366 1175 b 347 1009 366 1093 359 1049 l 344 1002 l 347 992 b 352 971 348 986 351 977 b 366 863 362 936 366 899 b 347 732 366 818 359 773 l 344 725 l 347 716 b 352 695 348 710 351 700 b 366 588 362 659 366 623 b 223 262 366 464 314 345 b 189 233 212 252 212 252 b 35 76 126 183 73 129 b -1 16 20 56 2 27 b -19 4 -4 9 -12 4 l -21 4 l -21 137 l -21 270 l -17 270 b 186 344 59 281 134 308 b 319 606 270 399 319 499 b 317 650 319 620 319 635 l 315 659 l 314 655 b 223 537 288 607 258 570 b 189 509 212 528 212 528 b 35 352 126 459 73 405 b -1 292 20 333 2 303 b -19 280 -4 285 -12 280 l -21 280 l -21 413 l -21 546 l -17 546 b 186 620 59 557 134 584 b 319 882 270 675 319 775 b 317 925 319 896 319 911 l 315 935 l 314 931 b 223 813 288 884 258 846 b 189 785 212 805 212 805 b 35 628 126 735 73 681 b -1 569 20 609 2 580 b -19 556 -4 562 -12 556 l -21 556 l -21 689 l -21 823 l -17 823 b 202 907 68 835 152 867 b 319 1157 280 968 319 1061 b 270 1338 319 1218 303 1281 b 262 1358 264 1349 262 1353 b 262 1364 262 1360 262 1363 b 276 1378 265 1371 269 1376 "},v2c:{x_min:-597.53125,x_max:596.171875,ha:608,o:"m -413 173 b -408 174 -412 174 -409 174 b -397 173 -404 174 -400 173 b -308 86 -394 172 -374 151 b -223 0 -261 37 -223 0 b -153 84 -223 0 -191 37 b -77 174 -83 173 -84 172 b -72 174 -76 174 -74 174 b -62 173 -68 174 -63 173 b 25 86 -59 172 -39 151 b 112 0 73 37 111 0 b 181 84 112 0 144 37 b 257 174 251 173 251 172 b 262 174 258 174 261 174 b 273 173 266 174 270 173 b 436 9 276 172 347 101 l 447 -1 l 477 36 b 522 79 511 79 513 79 l 522 79 b 552 51 533 79 539 73 b 596 -112 582 6 596 -51 b 567 -262 596 -161 586 -213 b 539 -322 558 -287 544 -316 b 524 -327 534 -326 529 -327 b 504 -315 515 -327 507 -323 b 503 -308 503 -312 503 -309 b 511 -285 503 -302 504 -297 b 555 -113 540 -227 555 -169 b 544 -34 555 -86 551 -59 b 522 19 540 -16 530 8 l 521 22 l 481 -26 l 405 -122 b 353 -176 366 -172 362 -176 b 349 -176 352 -176 351 -176 b 253 -87 341 -176 347 -180 b 167 0 206 -38 167 0 b 99 -86 167 0 136 -38 b 21 -174 27 -174 28 -173 b 17 -176 20 -176 19 -176 b 6 -174 13 -176 9 -174 b -81 -87 4 -173 -14 -152 b -167 0 -129 -38 -167 0 b -236 -86 -167 0 -198 -38 b -313 -174 -307 -174 -306 -173 b -318 -176 -314 -176 -315 -176 b -328 -174 -321 -176 -325 -174 b -491 -12 -330 -173 -367 -137 l -503 0 l -530 -34 b -570 -77 -562 -73 -564 -76 b -577 -79 -571 -79 -574 -79 b -597 -58 -588 -79 -597 -69 b -596 -49 -597 -55 -597 -52 b -417 172 -593 -43 -423 167 b -413 173 -417 172 -415 173 "},v2d:{x_min:0,x_max:438.28125,ha:447,o:"m 212 190 b 219 191 213 191 216 191 b 236 176 225 191 228 190 b 419 18 277 105 341 49 b 436 5 431 13 434 11 b 438 -1 438 4 438 1 b 424 -16 438 -8 432 -13 b 356 -49 409 -20 379 -36 b 234 -180 306 -83 258 -133 b 219 -192 230 -188 224 -192 b 200 -176 213 -192 206 -187 b 9 -15 157 -102 89 -45 b 0 0 2 -12 0 -6 b 16 18 0 9 2 12 b 200 176 93 48 159 104 b 212 190 205 186 208 188 m 239 113 b 236 117 238 116 238 117 b 230 108 235 117 234 115 b 92 -15 196 58 140 8 b 88 -18 91 -16 88 -18 b 92 -20 88 -18 91 -19 b 198 -116 130 -43 166 -74 b 200 -117 200 -117 200 -117 b 201 -117 200 -117 201 -117 b 264 -43 212 -98 242 -62 b 345 15 288 -19 321 4 b 348 18 347 16 348 16 b 344 20 348 18 347 19 b 239 113 307 41 266 79 "},v2f:{x_min:-1.359375,x_max:680.5625,ha:694,o:"m 597 1042 b 604 1042 600 1042 602 1042 b 642 1002 627 1042 642 1022 b 619 966 642 988 635 974 b 439 927 574 942 503 927 l 426 927 l 426 921 b 430 838 428 893 430 866 b 345 480 430 696 398 560 b 179 391 307 423 249 391 b 156 392 171 391 164 392 b 138 394 149 394 142 394 b 103 434 115 396 103 416 b 129 471 103 451 111 466 b 141 474 133 473 137 474 b 172 459 153 474 164 469 b 181 455 175 456 176 455 b 187 456 182 455 185 455 b 253 520 212 460 234 483 b 315 836 294 605 315 714 b 311 928 315 867 314 898 b 302 945 310 943 311 942 b 245 953 283 950 262 953 b 130 891 193 953 149 931 b 84 860 119 870 102 860 b 36 905 61 860 39 877 b 36 910 36 907 36 909 b 80 970 36 931 50 949 b 249 1017 125 1000 187 1017 b 322 1009 273 1017 299 1014 l 341 1003 b 436 991 372 995 406 991 b 577 1031 495 991 545 1004 b 597 1042 583 1038 590 1041 m 416 360 b 424 360 419 360 421 360 b 481 309 454 360 479 338 b 503 145 484 280 495 199 b 585 -185 525 16 555 -106 b 630 -245 596 -213 613 -237 l 634 -247 l 638 -245 b 647 -244 641 -245 645 -244 b 680 -278 666 -244 680 -262 b 664 -308 680 -290 675 -301 b 638 -312 658 -310 650 -312 b 613 -309 631 -312 623 -310 b 477 -201 555 -303 502 -260 b 417 -2 460 -159 434 -72 b 416 5 417 1 416 5 b 416 5 416 5 416 5 b 411 -5 415 5 413 0 b 359 -97 397 -33 377 -70 b 353 -106 355 -102 353 -105 b 359 -112 353 -108 355 -109 b 409 -130 375 -123 390 -129 b 426 -134 420 -130 421 -131 b 431 -147 428 -137 431 -141 b 420 -162 431 -152 427 -159 b 382 -169 409 -166 396 -169 b 323 -155 363 -169 341 -165 l 317 -152 l 314 -155 b 62 -303 240 -240 148 -295 b 36 -305 55 -305 44 -305 b 23 -303 29 -305 24 -305 b -1 -273 6 -299 -1 -287 b 31 -240 -1 -256 10 -240 b 36 -240 32 -240 34 -240 b 42 -241 38 -241 39 -241 b 134 -204 63 -241 99 -226 b 367 288 265 -115 357 81 b 375 330 368 313 370 320 b 416 360 383 347 400 358 m 360 -359 b 379 -359 363 -359 371 -359 b 424 -360 396 -359 416 -359 b 646 -502 536 -373 624 -430 b 649 -527 649 -510 649 -519 b 530 -673 649 -578 604 -635 l 521 -677 l 529 -681 b 653 -811 592 -714 637 -762 b 660 -853 658 -827 660 -839 b 645 -911 660 -873 656 -892 b 426 -1021 608 -981 519 -1021 b 283 -989 377 -1021 328 -1011 b 235 -949 249 -972 239 -964 b 234 -936 234 -946 234 -941 b 234 -928 234 -934 234 -931 l 235 -925 l 234 -927 l 225 -934 b 87 -982 186 -966 138 -982 b 80 -982 85 -982 83 -982 b 55 -981 70 -981 58 -981 b 17 -943 32 -981 17 -964 b 54 -904 17 -921 35 -904 b 78 -914 62 -904 72 -909 l 83 -918 l 88 -918 b 190 -831 122 -918 166 -881 b 269 -506 242 -727 269 -612 b 268 -462 269 -492 269 -477 b 266 -449 266 -458 266 -452 b 265 -444 266 -445 266 -444 b 257 -446 264 -444 261 -445 b 132 -545 196 -470 152 -505 b 88 -573 122 -563 104 -573 b 39 -523 63 -573 39 -553 b 63 -476 39 -505 44 -494 b 360 -359 136 -408 235 -369 m 419 -424 b 393 -423 411 -423 406 -423 l 375 -423 l 377 -426 b 379 -439 377 -427 378 -434 b 383 -510 382 -463 383 -487 b 314 -811 383 -609 360 -710 b 266 -893 296 -850 285 -870 b 264 -898 265 -896 264 -898 l 264 -898 b 264 -898 264 -898 264 -898 b 268 -898 264 -898 266 -898 b 273 -898 270 -898 272 -898 b 300 -909 283 -898 291 -900 b 426 -957 340 -941 385 -957 b 476 -949 443 -957 460 -954 b 547 -853 522 -931 547 -893 b 485 -745 547 -816 526 -775 b 397 -707 460 -727 432 -714 b 366 -675 375 -703 366 -692 b 396 -642 366 -657 377 -645 b 530 -557 455 -637 511 -601 b 536 -527 534 -548 536 -537 b 419 -424 536 -480 490 -437 "},v30:{x_min:-21.78125,x_max:367.5,ha:375,o:"m 276 1900 b 284 1901 279 1900 281 1901 b 306 1883 291 1901 298 1896 b 367 1686 347 1825 367 1757 b 343 1558 367 1643 359 1600 l 338 1549 l 343 1537 b 367 1411 359 1497 367 1454 b 343 1282 367 1367 359 1324 l 338 1272 l 343 1261 b 367 1135 359 1221 367 1178 b 343 1007 367 1090 359 1047 l 338 996 l 343 985 b 367 859 359 945 367 902 b 343 731 367 814 359 771 l 338 720 l 343 709 b 367 582 359 667 367 626 b 289 362 367 503 340 426 b 239 312 276 345 259 330 b 29 77 152 237 76 152 b -1 18 14 54 2 30 b -19 4 -4 11 -12 4 l -21 4 l -21 133 l -20 260 l -13 262 b 98 299 17 269 62 284 b 111 305 103 302 110 305 b 167 334 123 310 156 327 b 319 595 264 391 319 491 b 313 659 319 616 318 638 b 310 667 311 664 311 667 b 307 663 310 667 308 666 b 240 588 289 637 269 614 b 16 331 141 505 62 413 b -1 294 8 316 1 302 b -19 280 -4 287 -12 280 l -21 280 l -21 408 l -20 537 l -13 538 b 98 576 17 545 62 560 b 111 581 103 578 110 581 b 167 610 123 587 156 603 b 319 871 264 667 319 767 b 313 935 319 892 318 913 b 310 942 311 941 311 942 b 307 939 310 942 308 941 b 240 864 289 913 269 889 b 16 607 141 781 62 689 b -1 570 8 592 1 578 b -19 556 -4 563 -12 556 l -21 556 l -21 684 l -20 813 l -13 814 b 98 852 17 821 62 836 b 111 857 103 855 110 857 b 167 886 123 863 156 880 b 319 1147 264 943 319 1043 b 313 1211 319 1168 318 1189 b 310 1218 311 1217 311 1218 b 307 1215 310 1218 308 1217 b 240 1140 289 1188 269 1165 b 16 884 141 1057 62 966 b -1 846 8 868 1 855 b -19 832 -4 839 -12 832 l -21 832 l -21 960 l -20 1089 l -13 1090 b 98 1128 17 1097 62 1111 b 111 1134 103 1131 110 1134 b 167 1163 123 1139 156 1156 b 319 1424 264 1220 319 1320 b 313 1486 319 1444 318 1465 b 310 1494 311 1493 311 1494 b 307 1492 310 1494 308 1493 b 240 1417 289 1464 269 1442 b 16 1160 141 1333 62 1242 b -1 1121 8 1145 1 1131 b -19 1109 -4 1115 -12 1109 l -21 1109 l -21 1236 l -20 1365 l -13 1367 b 98 1404 17 1374 62 1388 b 111 1410 103 1407 110 1410 b 250 1508 172 1437 215 1467 b 319 1701 296 1564 319 1633 b 270 1859 319 1757 303 1814 b 262 1882 265 1868 262 1875 b 276 1900 262 1890 266 1896 "},v31:{x_min:0,x_max:386.5625,ha:394,o:"m 0 173 l 0 347 l 193 347 l 386 347 l 386 173 l 386 0 l 193 0 l 0 0 l 0 173 "},v33:{x_min:-423.3125,x_max:421.9375,ha:431,o:"m -10 276 b -2 277 -8 277 -5 277 b 17 265 5 277 13 273 b 19 163 19 260 19 260 l 19 68 l 39 45 b 277 -95 122 -34 200 -81 b 289 -97 281 -97 285 -97 b 378 0 332 -97 371 -54 b 378 11 378 4 378 6 b 302 83 378 55 345 83 b 242 66 283 83 262 77 b 208 56 231 59 219 56 b 148 120 175 56 148 81 b 200 186 148 151 164 172 b 261 198 220 194 240 198 b 420 45 341 198 411 137 b 421 22 421 37 421 29 b 257 -198 421 -86 347 -188 b 242 -198 251 -198 247 -198 b 20 -105 181 -198 95 -163 l 19 -104 l 19 -183 b 19 -216 19 -195 19 -206 b 12 -273 19 -272 17 -267 b -2 -278 8 -277 2 -278 b -21 -266 -10 -278 -19 -274 b -23 -165 -23 -263 -23 -262 l -23 -69 l -44 -47 b -250 86 -117 23 -183 66 b -295 94 -270 93 -284 94 b -315 91 -302 94 -308 94 b -381 5 -356 81 -381 43 b -355 -56 -381 -16 -372 -40 b -299 -81 -338 -73 -319 -81 b -246 -68 -283 -81 -265 -77 b -212 -58 -234 -61 -223 -58 b -168 -77 -196 -58 -179 -65 b -151 -122 -156 -90 -151 -105 b -179 -174 -151 -141 -160 -162 b -239 -195 -194 -184 -217 -192 b -257 -197 -245 -195 -250 -197 b -423 -5 -349 -197 -423 -113 b -423 0 -423 -4 -423 -1 b -277 194 -420 97 -362 173 b -247 197 -268 197 -258 197 b -24 104 -185 197 -100 162 l -23 102 l -23 181 b -21 265 -23 260 -23 260 b -10 276 -20 269 -14 274 "},v34:{x_min:0,x_max:622.03125,ha:635,o:"m 398 417 b 406 419 401 419 404 419 b 427 398 417 419 427 409 b 427 391 427 395 427 392 b 34 -274 424 385 38 -272 b 20 -280 29 -278 25 -280 b 0 -259 9 -280 0 -270 b 0 -252 0 -256 0 -254 b 393 413 2 -247 389 410 b 398 417 394 415 397 416 m 592 417 b 600 419 594 419 597 419 b 622 398 611 419 622 409 b 620 391 622 395 620 392 b 227 -274 617 385 231 -272 b 213 -280 223 -278 219 -280 b 193 -259 202 -280 193 -270 b 194 -252 193 -256 193 -254 b 586 413 196 -247 582 410 b 592 417 588 415 590 416 "},v36:{x_min:-1.359375,x_max:1064.390625,ha:1086,o:"m 296 692 b 314 694 302 694 307 694 b 386 685 337 694 366 689 b 548 498 480 660 548 580 b 548 481 548 492 548 487 b 455 395 541 426 499 395 b 370 462 420 395 383 417 b 362 496 364 477 362 488 b 377 514 362 509 367 514 b 393 501 386 514 390 510 b 432 474 397 484 413 474 b 470 487 445 474 458 478 b 491 530 484 496 491 510 b 490 544 491 534 491 539 b 333 660 479 606 411 657 l 323 662 l 315 646 b 269 524 285 591 269 556 b 321 431 269 492 287 466 b 349 395 338 413 343 408 b 363 342 359 378 363 362 b 359 312 363 333 362 322 b 285 158 348 266 318 206 b 281 152 283 155 281 152 b 281 152 281 152 281 152 b 287 154 283 152 284 152 b 318 155 298 154 308 155 b 461 98 371 155 419 136 l 464 97 l 483 112 b 503 129 494 120 503 127 b 504 130 503 129 504 129 b 503 138 504 131 503 134 b 500 180 500 152 500 166 b 553 326 500 238 518 288 b 604 366 560 331 592 358 b 649 381 617 376 632 381 b 696 362 665 381 681 374 b 724 302 714 347 724 324 b 695 238 724 278 714 255 b 660 210 691 234 662 212 b 579 148 658 209 582 151 b 579 148 579 148 579 148 b 596 106 579 144 589 119 b 622 77 604 88 609 83 b 657 69 632 72 645 69 b 748 112 688 69 721 84 b 755 123 754 117 755 120 b 755 127 755 124 755 126 b 751 165 752 137 751 151 b 758 219 751 183 754 202 b 894 387 774 290 820 347 b 896 390 896 388 896 388 b 891 398 896 391 895 392 b 622 560 827 477 730 535 b 600 580 605 564 600 569 b 617 596 600 591 607 596 b 628 595 622 596 624 596 b 1057 248 846 552 1020 412 b 1064 191 1061 229 1064 209 b 922 0 1064 94 1005 9 b 902 -1 916 -1 909 -1 b 774 76 847 -1 800 26 b 769 83 770 81 770 83 b 769 81 769 83 769 83 b 627 -1 733 29 677 -1 b 548 27 597 -1 570 8 b 515 88 537 37 525 61 l 513 95 l 510 93 l 453 45 b 390 0 396 0 396 0 b 390 0 390 0 390 0 b 374 15 381 0 377 4 b 268 105 359 69 314 105 b 250 104 262 105 257 105 l 243 102 l 234 90 b 155 1 201 49 159 2 b 147 -1 152 0 149 -1 b 130 15 138 -1 130 6 b 132 20 130 18 132 19 b 136 31 133 22 134 27 b 220 131 149 74 178 109 b 231 137 225 134 230 136 b 302 278 280 202 302 244 b 265 335 302 299 295 309 b 209 442 234 363 213 402 b 209 455 209 446 209 451 b 279 648 209 502 232 564 l 285 659 l 283 659 b 176 627 238 653 210 645 b 57 477 111 594 66 538 b 55 459 55 471 55 464 b 72 409 55 437 61 415 b 93 403 78 405 87 403 b 152 467 123 403 151 431 b 168 488 153 483 157 488 b 185 462 181 488 185 483 l 185 460 b 137 344 183 409 168 369 b 78 322 119 328 98 322 b 13 360 50 322 25 335 b -1 426 4 380 -1 402 b 89 610 -1 488 32 559 b 296 692 147 659 210 685 m 926 348 b 921 353 924 351 922 353 b 914 348 920 353 918 351 b 823 167 857 306 823 237 b 828 124 823 154 826 138 b 890 31 837 79 862 40 b 896 31 892 31 894 31 b 956 104 916 31 940 59 b 970 191 965 129 970 159 b 966 241 970 208 969 224 b 926 348 959 277 945 313 m 627 326 b 619 326 624 326 622 326 b 598 316 611 326 604 323 b 568 215 579 288 568 255 b 568 208 568 213 568 210 b 571 183 570 195 570 184 l 571 183 b 594 201 571 183 582 191 l 634 231 b 660 259 653 247 656 248 b 664 278 662 266 664 272 b 627 326 664 299 649 320 "},v38:{x_min:-1.359375,x_max:651.96875,ha:665,o:"m 389 644 b 405 645 394 645 400 645 b 504 566 450 645 492 613 b 507 541 506 557 507 549 b 480 471 507 514 498 489 l 477 467 l 483 470 b 609 591 539 485 586 531 b 613 601 611 595 613 599 b 631 609 619 607 624 609 b 651 588 641 609 651 602 b 200 -946 651 584 204 -941 b 182 -957 197 -953 190 -957 b 163 -945 174 -957 166 -953 b 161 -939 161 -942 161 -942 b 217 -743 161 -931 170 -904 b 272 -555 247 -639 272 -555 b 272 -555 272 -555 272 -555 b 264 -560 272 -555 268 -557 b 140 -603 227 -589 182 -603 b 36 -567 102 -603 65 -592 b -1 -487 12 -548 -1 -517 b 17 -427 -1 -466 5 -445 b 103 -380 38 -395 70 -380 b 191 -433 137 -380 172 -398 b 205 -484 201 -448 205 -466 b 178 -553 205 -509 196 -535 l 175 -557 l 182 -555 b 307 -435 236 -539 284 -494 b 372 -213 308 -430 372 -215 b 372 -213 372 -213 372 -213 b 364 -219 372 -213 368 -216 b 240 -262 328 -247 283 -262 b 137 -226 202 -262 166 -249 b 99 -145 112 -206 99 -176 b 118 -84 99 -124 106 -104 b 204 -38 138 -54 171 -38 b 292 -91 238 -38 273 -56 b 306 -141 302 -106 306 -124 b 279 -212 306 -167 296 -194 l 276 -215 l 281 -213 b 408 -93 336 -198 385 -151 b 473 129 409 -88 473 127 b 473 129 473 129 473 129 b 465 122 473 129 469 126 b 341 80 428 94 383 80 b 236 115 303 80 266 91 b 200 195 213 136 200 165 b 217 256 200 217 206 238 b 304 303 239 287 272 303 b 393 249 338 303 374 285 b 406 199 402 234 406 217 b 379 129 406 173 397 148 l 377 126 l 382 127 b 509 248 436 142 485 190 b 574 470 510 254 574 469 b 574 470 574 470 574 470 b 566 464 574 470 570 467 b 442 421 529 435 484 421 b 337 458 404 421 367 433 b 300 537 313 478 300 508 b 389 644 300 585 334 635 "},v39:{x_min:-171.5,x_max:251.8125,ha:257,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 553 20 616 20 614 b 20 491 20 503 20 491 l 20 491 b 153 535 47 501 149 535 b 174 514 167 535 174 524 b 164 496 174 508 171 501 b 92 470 164 495 132 484 l 20 445 l 20 390 b 20 363 20 378 20 370 b 20 333 20 340 20 333 l 20 333 b 153 377 47 344 149 377 b 174 356 167 377 174 367 b 164 338 174 349 171 342 b 92 312 164 338 132 326 l 20 288 l 20 219 l 20 148 l 21 151 b 137 199 59 183 99 199 b 182 191 152 199 167 197 b 251 84 227 176 251 134 b 228 0 251 58 243 29 b 100 -142 206 -40 178 -72 l 23 -215 b -1 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 b -21 30 -21 -212 -21 -212 b -21 273 -21 163 -21 273 b -84 252 -21 273 -50 263 b -152 230 -133 234 -145 230 b -157 231 -155 230 -156 231 b -171 252 -166 234 -171 244 b -160 270 -171 259 -167 266 b -27 316 -159 270 -93 294 l -21 319 l -21 374 b -21 431 -21 406 -21 431 b -84 409 -21 431 -50 421 b -152 388 -133 392 -145 388 b -157 390 -155 388 -156 388 b -171 409 -166 392 -171 401 b -160 428 -171 417 -167 424 b -27 474 -159 428 -93 451 l -21 476 l -21 546 b -20 620 -21 614 -21 616 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 "},v3b:{x_min:0,x_max:484.5625,ha:494,o:"m 228 245 b 239 247 234 247 239 247 b 243 247 240 247 242 247 b 303 238 257 247 287 242 b 484 -2 417 208 484 104 b 412 -177 484 -65 461 -127 b 243 -248 363 -226 303 -248 b 6 -63 138 -248 36 -180 b 0 -1 1 -41 0 -20 b 228 245 0 127 98 240 m 255 181 b 240 183 247 183 245 183 b 232 181 238 183 235 183 b 142 152 200 180 168 170 l 138 149 l 190 97 l 242 44 l 294 97 l 345 149 l 340 152 b 255 181 315 169 284 180 m 147 -54 l 197 -1 l 147 51 l 95 104 l 91 99 b 62 -1 72 70 62 34 b 66 -43 62 -15 63 -29 b 91 -101 72 -63 80 -84 l 95 -106 l 147 -54 m 393 99 b 389 104 390 102 389 104 b 337 51 389 104 366 80 l 285 -1 l 337 -54 l 389 -106 l 393 -101 b 421 -1 412 -72 421 -36 b 393 99 421 34 412 69 m 294 -98 b 242 -45 265 -69 242 -45 b 190 -98 242 -45 219 -69 l 138 -151 l 142 -154 b 242 -184 172 -174 206 -184 b 340 -154 276 -184 311 -174 l 345 -151 l 294 -98 "},v3c:{x_min:0,x_max:450.53125,ha:460,o:"m 189 302 b 204 303 193 302 198 303 b 303 224 250 303 292 270 b 306 199 304 216 306 208 b 279 129 306 173 296 147 l 276 126 l 281 127 b 408 249 337 142 385 190 b 412 259 409 254 412 258 b 430 267 417 265 423 267 b 450 247 441 267 450 259 b 200 -605 450 242 204 -599 b 182 -616 197 -612 190 -616 b 163 -602 174 -616 166 -610 b 161 -598 161 -601 161 -601 b 217 -402 161 -589 170 -562 b 272 -213 247 -298 272 -213 b 272 -213 272 -213 272 -213 b 264 -219 272 -213 268 -216 b 140 -262 227 -247 182 -262 b 36 -226 102 -262 65 -249 b 0 -145 12 -206 0 -176 b 17 -84 0 -124 5 -104 b 103 -38 38 -54 70 -38 b 191 -91 137 -38 172 -56 b 205 -141 201 -106 205 -124 b 178 -212 205 -167 196 -194 l 175 -215 l 182 -213 b 307 -93 236 -198 284 -151 b 372 129 308 -88 372 127 b 372 129 372 129 372 129 b 364 122 372 129 368 126 b 240 80 328 94 283 80 b 137 115 202 80 166 91 b 99 194 111 136 99 165 b 189 302 99 244 133 292 "},v3e:{x_min:0,x_max:406.96875,ha:415,o:"m 21 183 b 28 183 24 183 25 183 b 42 181 34 183 39 183 b 127 108 47 179 47 179 b 202 41 168 72 202 41 b 279 108 204 41 238 72 b 357 177 321 145 356 176 b 375 183 363 181 370 183 b 406 151 392 183 406 169 b 404 137 406 147 405 141 b 322 62 401 131 398 129 b 251 0 284 27 251 0 b 322 -63 251 -1 284 -29 b 404 -138 398 -130 401 -133 b 406 -152 405 -142 406 -148 b 375 -184 406 -170 392 -184 b 357 -179 370 -184 363 -183 b 279 -109 356 -177 321 -147 b 202 -43 238 -73 204 -43 b 127 -109 202 -43 168 -73 b 49 -179 85 -147 50 -177 b 31 -184 43 -183 36 -184 b 0 -152 13 -184 0 -170 b 2 -138 0 -148 0 -142 b 83 -63 5 -133 8 -130 b 155 0 122 -29 155 -1 b 83 62 155 0 122 27 b 8 129 43 97 10 127 b 0 151 2 136 0 144 b 21 183 0 165 8 177 "},v3f:{x_min:-24.5,x_max:317.140625,ha:324,o:"m -24 -147 l -24 -5 l -20 -5 b -1 -19 -12 -5 -4 -11 b 58 -123 6 -43 31 -86 b 196 -278 93 -173 134 -219 b 317 -570 274 -356 317 -460 b 294 -713 317 -617 308 -666 l 289 -724 l 294 -735 b 317 -873 308 -780 317 -827 b 235 -1132 317 -963 288 -1054 b 209 -1165 228 -1140 224 -1146 b 189 -1177 204 -1172 196 -1177 b 171 -1164 182 -1177 175 -1172 b 168 -1154 170 -1161 168 -1159 b 181 -1132 168 -1149 172 -1142 b 269 -891 238 -1064 269 -975 b 269 -881 269 -886 269 -884 b 262 -814 269 -857 265 -827 b 258 -800 261 -811 259 -806 b 142 -628 240 -731 198 -667 b -8 -589 112 -606 47 -589 b -20 -589 -13 -589 -19 -589 l -24 -589 l -24 -449 l -24 -308 l -20 -308 b -1 -322 -12 -308 -4 -313 b 58 -424 6 -345 31 -388 b 194 -580 93 -476 136 -523 b 259 -660 221 -606 245 -635 b 261 -663 259 -662 261 -663 b 264 -656 262 -663 262 -660 b 269 -587 268 -632 269 -610 b 264 -521 269 -566 268 -544 b 262 -512 264 -517 262 -513 b 258 -498 261 -509 259 -503 b 142 -326 240 -428 198 -365 b -8 -287 112 -303 47 -288 b -20 -287 -13 -287 -19 -287 l -24 -287 l -24 -147 "},v40:{x_min:-1.359375,x_max:436.921875,ha:446,o:"m 213 205 b 217 205 215 205 216 205 b 234 194 224 205 234 199 b 236 187 234 194 235 190 l 245 167 l 261 129 l 270 106 b 355 -61 294 54 329 -13 b 420 -163 381 -105 402 -138 b 436 -188 435 -184 436 -184 b 436 -191 436 -190 436 -190 b 421 -206 436 -201 431 -206 l 421 -206 l 416 -206 l 405 -201 b 217 -158 347 -172 283 -158 b 31 -201 153 -158 88 -172 l 20 -206 l 14 -206 l 14 -206 b 0 -191 5 -206 0 -201 b -1 -188 0 -190 -1 -190 b 14 -163 -1 -186 0 -184 b 95 -34 36 -136 72 -77 b 166 106 119 8 148 68 l 175 129 l 183 148 l 200 188 b 213 205 205 199 208 202 "},v41:{x_min:-1.359375,x_max:556.6875,ha:568,o:"m 294 322 b 318 323 299 322 308 323 b 360 320 334 323 352 322 b 526 217 430 310 490 273 b 543 166 537 202 543 184 b 447 70 543 117 503 70 b 445 70 447 70 446 70 b 359 159 394 72 359 113 b 368 201 359 173 362 187 b 442 245 382 229 412 245 b 455 244 446 245 451 245 b 460 244 458 244 460 244 b 460 244 460 244 460 244 b 454 248 460 244 458 245 b 325 291 417 276 372 291 b 285 287 313 291 299 290 b 144 -2 183 269 144 190 b 281 -290 144 -208 179 -280 b 304 -291 289 -291 298 -291 b 524 -105 412 -291 506 -212 b 541 -84 526 -88 530 -84 b 556 -101 551 -84 556 -90 b 549 -138 556 -111 553 -122 b 334 -322 521 -237 435 -310 b 302 -324 323 -323 313 -324 b 13 -101 172 -324 54 -234 b -1 -1 4 -68 -1 -34 b 294 322 -1 161 121 303 "},v42:{x_min:-348.4375,x_max:24.5,ha:25,o:"m -330 155 b -322 156 -329 156 -326 156 b -315 156 -319 156 -317 156 b -298 147 -311 155 -308 154 b -19 30 -224 98 -122 55 l 2 26 b 24 -1 17 22 24 13 b 2 -27 24 -15 17 -23 l -19 -31 b -298 -148 -122 -56 -224 -99 b -322 -158 -313 -158 -315 -158 b -348 -131 -338 -158 -348 -145 b -344 -117 -348 -127 -347 -122 b -328 -104 -341 -112 -338 -111 b -127 -8 -269 -65 -202 -33 b -106 0 -115 -4 -106 -1 b -127 6 -106 0 -115 2 b -328 102 -202 31 -269 63 b -344 116 -338 109 -341 111 b -348 130 -347 120 -348 124 b -330 155 -348 141 -341 152 "},v43:{x_min:-442.359375,x_max:441,ha:450,o:"m -31 487 b -1 488 -21 488 -10 488 b 434 104 216 488 397 330 b 441 27 438 79 441 47 b 439 12 441 20 439 15 b 419 0 435 4 427 0 b 404 5 413 0 408 1 b 398 30 400 11 398 13 b 0 351 390 213 213 351 b -59 348 -20 351 -39 349 b -400 30 -251 324 -393 191 b -405 5 -400 13 -401 11 b -420 0 -409 1 -415 0 b -441 12 -428 0 -436 4 b -442 27 -441 15 -442 20 b -435 104 -442 47 -439 79 b -31 487 -401 316 -235 474 m -13 131 b -1 133 -9 133 -5 133 b 51 105 19 133 39 123 b 61 70 58 95 61 83 b 51 34 61 58 58 45 b -1 6 39 16 19 6 b -46 27 -17 6 -34 13 b -62 69 -57 38 -62 54 b -13 131 -62 98 -44 124 "},v44:{x_min:-21.78125,x_max:251.8125,ha:257,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 383 20 616 20 616 l 20 148 l 21 151 b 137 199 59 183 99 199 b 182 191 152 199 167 197 b 251 84 227 176 251 134 b 228 0 251 58 243 29 b 100 -142 206 -40 178 -72 l 23 -215 b 0 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 l -21 -212 l -21 201 l -21 616 l -20 620 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 "},v45:{x_min:-402.890625,x_max:401.53125,ha:410,o:"m -10 273 b -4 274 -9 273 -6 274 b 16 262 4 274 12 269 b 17 158 17 259 17 259 l 17 56 l 62 112 b 117 174 110 172 110 172 b 122 174 118 174 119 174 b 132 173 125 174 129 173 b 295 11 134 172 171 134 l 307 -1 l 336 34 b 374 76 366 72 368 74 b 381 77 375 77 378 77 b 401 56 392 77 401 68 b 400 48 401 54 401 51 b 223 -172 397 41 230 -166 b 210 -176 220 -174 215 -176 b 201 -174 206 -176 204 -176 b 112 -87 198 -173 178 -152 b 27 0 65 -38 27 0 b 21 -6 27 0 24 -2 l 17 -12 l 17 -147 b 17 -210 17 -173 17 -194 b 10 -292 17 -297 16 -287 b -2 -299 6 -297 2 -299 b -21 -287 -10 -299 -19 -295 b -24 -174 -23 -284 -23 -284 l -24 -63 l -66 -117 b -121 -176 -110 -170 -114 -176 b -125 -176 -122 -176 -123 -176 b -296 -12 -134 -174 -125 -184 l -308 0 l -337 -34 b -375 -77 -367 -73 -370 -76 b -382 -79 -377 -79 -379 -79 b -402 -58 -393 -79 -402 -69 b -401 -49 -402 -55 -402 -52 b -224 170 -398 -43 -231 165 b -212 174 -221 173 -216 174 b -202 173 -208 174 -205 174 b -39 11 -200 172 -151 122 l -28 -1 l -25 1 l -24 4 l -24 130 b -23 260 -24 256 -24 258 b -10 273 -20 266 -16 270 "},v46:{x_min:0,x_max:627.46875,ha:640,o:"m 306 190 b 314 191 308 191 311 191 b 326 184 318 191 322 190 l 336 173 b 510 52 377 127 442 80 b 515 49 513 51 515 49 b 611 16 537 40 579 24 b 627 0 624 13 627 9 b 607 -18 627 -11 624 -13 b 330 -181 490 -49 389 -109 b 314 -192 323 -190 319 -192 b 306 -191 311 -192 308 -192 b 294 -177 302 -188 302 -188 b 257 -140 287 -170 265 -148 b 19 -18 193 -84 114 -44 b 0 0 2 -13 0 -11 b 16 16 0 9 2 13 b 110 49 47 24 89 40 b 117 52 111 49 114 51 b 145 65 126 56 130 58 b 281 163 200 93 245 124 b 300 186 288 170 291 174 b 306 190 300 187 303 188 m 317 137 b 313 142 315 141 314 142 b 308 137 313 142 311 141 b 161 4 276 84 220 33 b 155 0 159 1 155 0 b 163 -4 155 0 159 -2 b 308 -138 220 -34 276 -84 b 313 -142 311 -141 313 -142 b 317 -138 314 -142 315 -141 b 464 -4 351 -84 406 -34 b 470 0 468 -2 470 0 b 464 4 470 0 468 1 b 317 137 406 33 351 84 "},v47:{x_min:-24.5,x_max:315.78125,ha:322,o:"m -24 -145 l -24 -5 l -20 -5 b 1 -26 -10 -5 -6 -9 b 175 -241 31 -86 96 -166 b 314 -548 259 -323 304 -420 b 315 -589 315 -555 315 -571 b 314 -630 315 -606 315 -623 b 298 -730 311 -664 306 -699 l 295 -742 l 296 -748 b 314 -850 304 -778 311 -813 b 315 -892 315 -857 315 -874 b 314 -932 315 -909 315 -925 b 298 -1032 311 -967 306 -1002 l 295 -1045 l 296 -1050 b 314 -1153 304 -1081 311 -1115 b 315 -1193 315 -1160 315 -1177 b 314 -1235 315 -1211 315 -1228 b 217 -1526 306 -1338 270 -1444 b 201 -1533 213 -1532 208 -1533 b 182 -1522 193 -1533 185 -1529 b 179 -1514 181 -1518 179 -1517 b 189 -1489 179 -1508 182 -1501 b 266 -1217 240 -1403 266 -1308 b 262 -1156 266 -1196 265 -1177 b 110 -907 247 -1043 190 -950 b 0 -889 87 -895 50 -889 l -1 -889 l -24 -889 l -24 -749 l -24 -610 l -20 -610 b 1 -631 -10 -610 -6 -614 b 175 -846 31 -691 96 -771 b 259 -956 213 -884 236 -914 b 265 -966 262 -961 264 -966 b 265 -966 265 -966 265 -966 b 265 -953 265 -964 265 -959 b 266 -920 266 -943 266 -932 b 262 -853 266 -898 265 -873 b 110 -605 247 -741 190 -648 b 0 -587 87 -592 50 -587 l -1 -587 l -24 -587 l -24 -448 l -24 -308 l -20 -308 b 1 -328 -10 -308 -6 -312 b 175 -544 31 -388 96 -469 b 259 -655 213 -581 236 -612 b 265 -663 262 -659 264 -663 b 265 -663 265 -663 265 -663 b 265 -650 265 -663 265 -657 b 266 -617 266 -641 266 -630 b 262 -551 266 -595 265 -570 b 110 -303 247 -438 190 -345 b 0 -284 87 -290 50 -284 l -1 -284 l -24 -284 l -24 -145 "},v49:{x_min:0,x_max:630.203125,ha:643,o:"m 308 204 b 314 205 310 205 313 205 b 326 201 319 205 323 204 b 355 154 328 199 338 180 b 401 83 362 142 392 95 l 409 72 b 431 41 412 66 424 49 b 619 -174 498 -51 570 -134 b 630 -192 626 -180 630 -186 b 626 -202 630 -195 628 -199 b 616 -206 623 -205 620 -206 b 552 -188 608 -206 592 -202 b 310 -155 488 -169 392 -155 b 268 -156 295 -155 281 -155 b 77 -188 197 -161 126 -173 b 13 -206 35 -202 20 -206 b 9 -206 12 -206 10 -206 b 0 -191 2 -202 0 -197 b 8 -176 0 -186 2 -180 b 204 49 58 -136 138 -43 l 220 72 l 227 83 b 295 188 245 108 281 166 b 308 204 299 197 304 202 m 315 147 b 314 147 315 147 314 147 b 314 147 314 147 314 147 b 306 129 314 145 310 138 l 296 105 b 281 72 292 97 284 77 l 274 56 b 181 -123 247 -4 212 -72 l 174 -134 l 176 -133 b 314 -123 215 -127 272 -123 b 451 -133 356 -123 413 -127 l 454 -134 l 449 -123 b 353 56 417 -72 381 -4 l 347 72 b 332 105 344 77 336 97 l 322 129 b 315 147 318 138 315 145 "},v4a:{x_min:70.78125,x_max:378.390625,ha:315,o:"m 246 373 b 254 373 249 373 251 373 b 372 324 303 373 360 351 b 378 302 377 317 378 309 b 338 251 378 278 362 255 b 328 249 334 249 332 249 b 283 294 303 249 283 270 b 288 315 283 301 284 308 b 289 319 289 317 289 319 b 289 319 289 319 289 319 b 283 320 289 320 287 320 b 270 322 279 322 274 322 b 206 288 242 322 215 308 b 206 283 206 287 206 285 b 257 223 206 267 230 238 b 284 206 272 213 277 210 b 351 90 328 173 351 130 b 340 47 351 74 348 59 b 205 -30 314 -2 264 -30 b 182 -29 198 -30 190 -30 b 84 15 147 -24 103 -5 b 70 48 74 24 70 36 b 108 99 70 70 85 94 b 121 102 112 101 117 102 b 167 56 147 102 167 80 b 159 31 167 48 164 40 l 156 26 l 157 26 b 190 20 167 22 178 20 b 220 26 201 20 212 22 b 258 65 243 34 258 51 b 257 70 258 66 258 69 b 204 126 249 94 234 109 b 114 258 148 158 114 209 b 125 302 114 273 118 288 b 246 373 147 342 193 370 "},v4b:{x_min:0,x_max:503.609375,ha:514,o:"m 274 430 b 277 430 276 430 277 430 b 310 394 296 430 310 415 b 308 383 310 391 308 387 b 306 367 307 381 307 374 b 236 120 298 305 272 210 b 40 -273 189 -5 125 -134 b 20 -287 35 -283 27 -287 b 5 -281 14 -287 9 -285 b 0 -267 1 -277 0 -273 b 9 -242 0 -262 2 -255 b 246 395 137 -12 232 242 b 274 430 249 416 257 427 m 468 430 b 472 430 469 430 470 430 b 503 394 490 430 503 415 b 502 383 503 391 503 387 b 499 367 502 381 500 374 b 431 120 491 305 465 210 b 234 -273 382 -5 318 -134 b 213 -287 228 -283 220 -287 b 198 -281 208 -287 202 -285 b 193 -267 194 -277 193 -273 b 202 -242 193 -262 196 -255 b 439 395 330 -12 426 242 b 468 430 442 416 451 427 "},v4d:{x_min:-311.6875,x_max:310.328125,ha:317,o:"m -9 388 b -2 390 -8 390 -5 390 b 5 388 1 390 4 390 b 19 378 10 387 16 383 b 23 333 23 371 23 371 b 24 298 23 299 24 298 b 81 276 34 298 65 285 b 213 91 145 240 190 177 b 224 24 217 76 224 36 b 257 24 224 24 235 24 b 299 19 292 24 292 24 b 310 -1 306 15 310 6 b 299 -23 310 -11 306 -19 b 257 -27 292 -27 292 -27 b 224 -29 235 -27 224 -29 b 213 -95 224 -40 217 -80 b 81 -280 190 -181 145 -244 b 24 -301 65 -290 34 -301 b 23 -335 24 -301 23 -303 l 23 -340 b 17 -381 23 -374 23 -374 b -1 -391 13 -388 5 -391 b -21 -381 -9 -391 -17 -388 b -27 -340 -27 -374 -27 -374 l -27 -335 b -28 -301 -27 -303 -27 -301 b -85 -280 -38 -301 -69 -290 b -217 -95 -149 -244 -194 -181 b -228 -29 -221 -80 -228 -40 b -259 -27 -228 -29 -238 -27 b -300 -23 -294 -27 -294 -27 b -311 -2 -307 -19 -311 -11 b -294 23 -311 8 -304 19 b -259 24 -291 23 -284 24 b -228 24 -239 24 -228 24 b -217 91 -228 36 -221 76 b -85 276 -194 177 -149 240 b -28 298 -69 285 -38 298 b -27 333 -27 298 -27 299 b -27 371 -27 362 -27 369 b -9 388 -24 378 -17 385 m -27 136 b -28 247 -27 197 -28 247 b -61 216 -31 247 -53 226 b -123 33 -95 172 -121 98 l -125 24 l -76 24 l -27 24 l -27 136 m 29 242 b 24 247 27 245 24 247 b 23 136 24 247 23 197 l 23 24 l 72 24 l 121 24 l 119 33 b 29 242 115 116 77 206 m -27 -140 l -27 -27 l -76 -27 l -125 -27 l -123 -36 b -61 -220 -121 -102 -95 -176 b -28 -251 -53 -230 -31 -251 b -27 -140 -28 -251 -27 -201 m 119 -36 l 121 -27 l 72 -27 l 23 -27 l 23 -140 b 24 -251 23 -201 24 -251 b 57 -220 27 -251 49 -230 b 119 -36 91 -176 117 -102 "},v4e:{x_min:0,x_max:239.5625,ha:244,o:"m 10 460 b 20 462 13 462 14 462 b 39 449 28 462 35 458 l 40 446 l 40 326 b 40 205 40 259 40 205 b 127 227 40 205 80 215 b 220 249 196 244 213 249 b 227 247 224 249 225 248 b 238 237 231 245 235 241 l 239 233 l 239 -106 l 239 -448 l 238 -451 b 219 -463 234 -459 225 -463 b 198 -451 210 -463 202 -459 l 197 -448 l 197 -324 b 197 -201 197 -248 197 -201 b 110 -223 196 -201 157 -210 b 17 -245 42 -240 24 -245 b 10 -242 13 -245 13 -244 b 0 -233 6 -241 2 -237 l 0 -230 l 0 108 l 0 446 l 0 449 b 10 460 2 453 6 458 m 197 22 b 197 70 197 41 197 58 b 196 116 197 113 197 116 l 196 116 b 118 97 196 116 160 106 l 40 77 l 40 -18 b 40 -112 40 -69 40 -112 l 119 -93 l 197 -73 l 197 22 "},v51:{x_min:-1.359375,x_max:455.96875,ha:465,o:"m 352 541 b 357 542 353 542 355 542 b 377 530 364 542 372 537 l 378 526 l 378 394 l 379 262 l 404 266 b 436 270 420 269 430 270 b 450 265 443 270 446 269 b 455 220 455 259 455 260 l 455 208 l 455 161 l 454 156 b 411 140 449 147 447 147 b 378 133 393 137 379 134 b 378 68 378 133 378 106 b 378 22 378 54 378 38 l 379 -87 l 404 -83 b 436 -79 420 -80 430 -79 b 450 -84 443 -79 446 -80 b 455 -129 455 -90 455 -88 l 455 -141 l 455 -188 l 454 -192 b 413 -209 449 -202 447 -202 b 382 -215 398 -212 383 -215 l 378 -215 l 378 -345 l 378 -380 b 375 -485 378 -484 378 -480 b 357 -494 371 -491 364 -494 b 340 -485 351 -494 344 -491 b 336 -383 337 -480 336 -484 l 336 -349 l 336 -223 l 334 -223 b 291 -231 334 -223 314 -227 l 247 -240 l 247 -371 l 246 -503 l 245 -506 b 225 -519 242 -514 234 -519 b 206 -506 219 -519 210 -514 l 205 -503 l 205 -376 l 205 -248 l 160 -256 l 115 -265 l 115 -396 l 115 -527 l 114 -531 b 95 -544 110 -539 102 -544 b 76 -531 87 -544 78 -539 l 73 -527 l 73 -399 b 73 -273 73 -330 73 -273 b 49 -277 73 -273 61 -274 b 17 -281 32 -280 24 -281 b 4 -276 10 -281 8 -280 b -1 -234 0 -269 -1 -272 b 0 -219 -1 -229 0 -224 l 0 -170 l 1 -167 b 10 -158 2 -163 6 -159 b 49 -149 13 -156 16 -155 l 73 -145 l 73 -34 b 73 76 73 26 73 76 b 49 72 73 76 61 74 b 17 68 32 69 24 68 b 4 73 10 68 8 69 b -1 115 0 80 -1 77 b 0 130 -1 120 0 124 l 0 179 l 1 181 b 10 191 2 186 6 190 b 49 199 13 192 16 194 l 73 204 l 73 338 b 73 374 73 352 73 365 b 77 483 73 484 73 477 b 95 492 81 489 88 492 b 111 483 100 492 107 489 b 115 378 115 477 115 483 l 115 342 b 117 212 115 223 115 212 b 204 229 117 212 200 227 l 205 229 l 205 365 l 205 502 l 206 505 b 225 517 210 513 219 517 b 245 505 234 517 242 513 l 246 502 l 247 369 l 247 237 l 249 237 b 336 254 253 238 336 254 b 337 390 336 254 337 302 l 337 526 l 338 530 b 352 541 341 535 347 539 m 336 15 b 336 126 336 102 336 126 l 336 126 b 291 117 336 126 315 122 l 247 109 l 247 -1 l 247 -112 l 249 -112 b 336 -95 253 -111 336 -95 b 336 15 336 -95 336 -56 m 205 -120 b 205 -55 205 -120 205 -93 b 205 -9 205 -41 205 -24 l 205 101 l 160 93 l 115 84 l 115 -26 b 115 -83 115 -49 115 -69 b 117 -137 115 -133 115 -137 b 205 -120 118 -137 204 -120 "},v52:{x_min:-10.890625,x_max:298.078125,ha:294,o:"m 138 473 b 142 474 140 473 141 474 b 164 459 148 474 153 470 b 191 402 183 442 191 423 b 181 353 191 388 187 371 b 178 349 179 352 178 349 b 179 348 178 348 179 348 b 185 349 181 348 182 348 b 255 376 210 355 234 363 b 272 381 264 381 266 381 b 298 355 287 381 298 370 b 288 330 298 348 298 345 b 171 34 238 254 194 141 b 166 13 168 16 168 16 b 144 1 161 5 152 1 b 121 15 134 1 125 5 b 115 33 119 18 117 24 b 0 330 91 145 49 252 b -10 355 -9 345 -10 348 b 13 381 -10 371 0 381 b 31 376 19 381 25 380 b 132 345 61 358 103 345 l 136 345 l 137 355 b 145 378 138 359 142 370 b 152 415 149 394 152 405 b 137 452 152 427 148 438 b 133 464 134 458 133 460 b 138 473 133 467 134 470 "},v53:{x_min:0,x_max:902.421875,ha:921,o:"m 17 240 b 24 241 19 241 21 241 b 32 240 28 241 31 241 b 46 229 38 238 43 234 b 50 88 50 223 50 237 b 50 -1 50 63 50 34 b 50 -90 50 -36 50 -65 b 46 -231 50 -238 50 -224 b 25 -242 42 -238 34 -242 b 0 -224 14 -242 4 -235 b 0 2 0 -222 0 -108 b 0 223 0 112 0 220 b 17 240 2 230 9 237 m 110 240 b 118 241 111 241 114 241 b 126 240 121 241 123 241 b 142 223 133 237 140 230 b 144 123 144 220 144 205 b 144 29 144 45 144 29 b 144 29 144 29 144 29 b 393 183 166 106 264 167 b 450 186 412 184 431 186 b 756 29 600 186 732 120 b 756 29 756 29 756 29 b 758 123 758 29 758 45 b 760 227 758 226 758 223 b 784 241 766 237 774 241 b 804 229 792 241 800 237 b 809 88 808 223 809 237 l 809 -1 l 809 -90 b 804 -231 809 -238 808 -224 b 784 -242 800 -238 792 -242 b 762 -231 775 -242 766 -238 b 758 -124 756 -224 758 -231 b 756 -30 758 -47 758 -30 b 756 -30 756 -30 756 -30 b 509 -184 736 -108 637 -169 b 450 -187 488 -187 469 -187 b 144 -30 300 -187 168 -122 b 144 -30 144 -30 144 -30 b 144 -124 144 -30 144 -47 b 140 -231 144 -231 144 -224 b 118 -242 134 -238 126 -242 b 92 -224 107 -242 96 -235 b 92 2 92 -222 92 -108 b 92 223 92 112 92 220 b 110 240 95 230 102 237 m 432 161 b 413 162 426 162 420 162 b 313 41 351 162 313 109 b 347 -73 313 5 323 -34 b 487 -163 385 -133 439 -163 b 578 -97 526 -163 562 -142 b 588 -43 585 -80 588 -62 b 432 161 588 47 518 147 m 868 240 b 876 241 869 241 872 241 b 884 240 879 241 882 241 b 898 229 890 238 894 234 b 902 88 902 223 902 237 l 902 -1 l 902 -90 b 898 -231 902 -238 902 -224 b 876 -242 892 -238 884 -242 b 852 -224 865 -242 854 -235 b 850 2 850 -222 850 -108 b 852 223 850 112 850 220 b 868 240 853 230 860 237 "},v54:{x_min:-24.5,x_max:317.140625,ha:324,o:"m -24 -161 l -24 -5 l -20 -5 b 0 -24 -9 -5 -2 -12 b 171 -315 21 -124 84 -233 b 317 -660 268 -406 317 -531 b 187 -1014 317 -782 274 -909 b 161 -1034 172 -1034 171 -1034 b 141 -1013 149 -1034 141 -1025 b 152 -991 141 -1004 142 -1002 b 266 -682 228 -899 266 -788 b 174 -430 266 -588 236 -498 b -23 -317 136 -388 66 -348 b -24 -161 -23 -316 -24 -285 "},v55:{x_min:0,x_max:551.25,ha:563,o:"m 289 644 b 304 645 294 645 299 645 b 404 566 349 645 392 613 b 406 541 405 557 406 549 b 379 471 406 514 397 489 l 377 467 l 382 470 b 509 591 438 485 485 531 b 513 601 510 595 513 599 b 530 609 518 607 524 609 b 551 588 540 609 551 602 b 200 -605 551 584 204 -599 b 182 -616 197 -612 190 -616 b 163 -602 174 -616 166 -610 b 161 -598 161 -601 161 -601 b 217 -402 161 -589 170 -562 b 272 -213 247 -298 272 -213 b 272 -213 272 -213 272 -213 b 264 -219 272 -213 268 -216 b 140 -262 227 -247 182 -262 b 36 -226 102 -262 65 -249 b 0 -145 12 -206 0 -176 b 17 -84 0 -124 5 -104 b 103 -38 38 -54 70 -38 b 191 -91 137 -38 172 -56 b 205 -141 201 -106 205 -124 b 178 -212 205 -167 196 -194 l 175 -215 l 182 -213 b 307 -93 236 -198 284 -151 b 372 129 308 -88 372 127 b 372 129 372 129 372 129 b 364 122 372 129 368 126 b 240 80 328 94 283 80 b 137 115 202 80 166 91 b 99 195 112 136 99 165 b 118 256 99 217 106 238 b 204 303 138 287 171 303 b 292 249 238 303 273 285 b 306 199 302 234 306 217 b 279 129 306 173 296 148 l 276 126 l 281 127 b 408 248 336 142 385 190 b 473 470 409 254 473 469 b 473 470 473 470 473 470 b 465 464 473 470 469 467 b 341 421 428 435 383 421 b 236 458 303 421 266 433 b 200 537 212 478 200 508 b 289 644 200 585 234 635 "},v58:{x_min:-21.78125,x_max:367.5,ha:375,o:"m 259 1553 b 265 1553 261 1553 264 1553 b 288 1540 272 1553 277 1550 b 367 1351 340 1493 367 1424 b 336 1221 367 1308 357 1263 l 332 1211 l 333 1208 b 367 1077 356 1170 367 1124 b 336 945 367 1032 357 986 l 332 935 l 333 932 b 367 800 356 893 367 848 b 336 669 367 756 357 710 l 332 659 l 333 656 b 367 523 356 617 367 571 b 345 412 367 485 360 446 b 231 273 322 356 284 310 b -1 19 121 195 27 93 b -17 4 -4 11 -10 5 l -21 4 l -21 134 l -21 265 l -17 265 b 133 291 20 265 96 278 b 318 537 245 328 318 433 b 307 603 318 559 315 582 b 303 614 304 612 304 614 b 298 609 302 614 300 613 b 231 549 281 589 258 567 b -1 295 121 471 27 369 b -17 280 -4 287 -10 281 l -21 280 l -21 410 l -21 541 l -17 541 b 133 567 20 541 96 555 b 318 813 245 605 318 709 b 307 880 318 835 315 859 b 303 891 304 888 304 891 b 298 885 302 891 300 888 b 231 825 281 866 258 843 b -1 571 121 748 27 645 b -17 556 -4 563 -10 557 l -21 556 l -21 687 l -21 817 l -17 817 b 133 843 20 817 96 830 b 318 1089 245 881 318 985 b 307 1156 318 1111 315 1134 b 303 1167 304 1164 304 1167 b 298 1161 302 1167 300 1164 b 231 1102 281 1140 258 1120 b -1 848 121 1024 27 921 b -17 832 -4 839 -10 834 l -21 832 l -21 963 l -21 1093 l -17 1093 b 114 1113 12 1093 78 1103 b 313 1314 215 1142 289 1218 b 318 1364 317 1331 318 1347 b 255 1511 318 1422 295 1478 b 243 1532 247 1519 243 1525 b 259 1553 243 1540 250 1550 "},v59:{x_min:0,x_max:464.140625,ha:474,o:"m 0 0 l 0 347 l 76 347 l 153 347 l 153 0 l 153 -348 l 76 -348 l 0 -348 l 0 0 m 308 -1 l 308 347 l 386 347 l 464 347 l 464 -1 l 464 -348 l 386 -348 l 308 -348 l 308 -1 "},v5a:{x_min:-171.5,x_max:170.140625,ha:174,o:"m -6 566 b 0 567 -5 567 -2 567 b 14 556 6 567 12 563 b 92 285 14 555 50 433 b 170 13 166 33 170 19 b 168 13 170 13 170 13 b 161 1 168 8 167 4 l 159 0 l 122 0 l 84 0 l 81 1 b 21 195 76 5 78 -5 b -32 381 -8 297 -32 381 b -87 197 -32 381 -57 298 b -141 8 -115 94 -140 9 b -155 0 -142 2 -149 0 b -171 15 -163 0 -171 5 b -14 556 -171 18 -24 528 b -6 566 -14 560 -10 564 "},v5b:{x_min:-441,x_max:439.640625,ha:449,o:"m -428 -2 b -421 0 -427 -1 -424 0 b -406 -6 -416 0 -409 -2 b -400 -31 -401 -12 -400 -15 b -1 -352 -392 -215 -215 -352 b 58 -349 19 -352 38 -351 b 398 -31 250 -326 392 -192 b 404 -6 398 -15 400 -12 b 419 -1 408 -2 413 -1 b 439 -13 427 -1 435 -5 b 439 -29 439 -16 439 -22 b 434 -105 439 -48 438 -80 b 0 -489 397 -333 213 -489 b -68 -484 -23 -489 -44 -488 b -441 -36 -280 -452 -436 -263 b -441 -30 -441 -34 -441 -31 b -428 -2 -441 -11 -439 -5 m -13 -9 b -1 -8 -9 -8 -5 -8 b 50 -36 19 -8 39 -19 b 61 -72 57 -47 61 -59 b 50 -106 61 -84 57 -97 b -1 -134 39 -124 19 -134 b -46 -115 -17 -134 -34 -129 b -62 -72 -57 -102 -62 -87 b -13 -9 -62 -44 -44 -16 "},v5c:{x_min:0,x_max:447.8125,ha:457,o:"m 0 -87 l 0 0 l 223 0 l 447 0 l 447 -87 l 447 -174 l 223 -174 l 0 -174 l 0 -87 "},v5d:{x_min:-1.359375,x_max:592.078125,ha:604,o:"m 280 692 b 295 694 283 692 289 694 b 310 692 300 694 307 692 b 357 630 340 684 357 657 b 336 580 357 612 351 594 b 311 538 321 566 311 549 b 352 492 311 512 330 492 b 366 495 357 492 362 492 b 397 553 390 503 397 517 b 415 603 397 576 402 591 b 460 623 427 617 443 623 b 509 599 479 623 498 614 b 522 559 518 587 522 573 b 494 506 522 538 513 519 b 451 495 481 498 473 496 b 415 488 432 495 426 494 b 394 449 404 483 394 464 b 394 448 394 448 394 448 l 394 440 l 397 433 b 428 409 404 420 413 413 b 438 408 431 408 435 408 b 479 431 450 408 462 415 b 528 455 495 448 510 455 b 548 452 534 455 541 453 b 592 391 577 442 592 416 b 549 331 592 365 577 340 b 528 327 541 328 534 327 b 479 351 510 327 495 335 b 438 374 464 367 450 374 b 417 369 431 374 424 373 b 394 333 402 360 394 348 b 400 312 394 326 396 319 b 451 287 408 294 420 288 b 513 258 484 285 499 278 b 522 223 519 247 522 234 b 461 159 522 190 496 159 b 449 161 457 159 453 159 b 397 229 416 167 397 191 b 366 288 397 265 390 278 b 352 290 362 290 357 290 b 315 262 336 290 321 280 b 311 245 313 256 311 251 b 334 204 311 233 318 220 b 355 170 348 190 351 184 b 357 152 356 166 357 159 b 355 136 357 147 356 140 b 295 88 345 104 321 88 b 232 152 264 88 232 112 b 255 204 232 174 238 186 b 279 244 273 222 279 231 l 279 245 b 238 290 279 270 259 290 b 224 288 234 290 228 290 b 193 229 200 278 193 265 b 141 161 193 191 174 167 b 129 159 137 159 133 159 b 68 223 93 159 68 190 b 77 258 68 234 70 247 b 138 287 91 278 106 285 b 185 302 166 287 175 291 b 196 333 193 312 196 323 b 174 369 196 347 187 360 b 152 374 166 373 159 374 b 111 351 140 374 126 367 b 62 327 95 335 80 327 b 51 328 58 327 54 327 b -1 391 16 334 -1 363 b 53 455 -1 420 17 449 b 62 455 57 455 59 455 b 111 431 80 455 95 448 b 152 408 127 415 140 408 b 161 409 155 408 159 408 b 193 433 176 413 186 420 l 196 440 l 196 448 b 196 451 196 449 196 449 b 190 471 196 459 194 463 b 137 495 182 489 167 495 l 134 495 l 134 495 b 68 560 95 495 68 521 b 129 623 68 596 95 623 b 144 621 134 623 138 623 b 193 553 175 614 193 589 b 224 495 193 517 200 503 b 238 492 228 492 234 492 b 279 538 259 492 279 512 b 254 580 279 549 269 566 b 232 630 239 594 232 612 b 280 692 232 657 250 684 m 307 456 b 295 458 303 458 299 458 b 230 391 258 458 230 426 b 236 360 230 381 231 371 b 295 324 249 337 272 324 b 353 360 318 324 341 337 b 360 391 357 370 360 381 b 307 456 360 421 340 451 "},v60:{x_min:-590.71875,x_max:589.359375,ha:601,o:"m -367 173 b -362 174 -366 174 -364 174 b -351 173 -357 174 -353 173 b -262 86 -348 172 -328 151 b -176 0 -216 37 -176 0 b -107 84 -176 0 -145 37 b -31 174 -36 173 -38 172 b -25 174 -29 174 -28 174 b -16 173 -23 174 -19 173 b 72 86 -13 172 6 151 b 157 0 119 37 157 0 b 227 84 159 0 189 37 b 303 174 298 173 296 172 b 308 174 304 174 307 174 b 318 173 313 174 317 173 b 481 11 322 172 357 134 l 494 -1 l 522 34 b 560 76 553 72 555 74 b 567 77 563 77 564 77 b 589 56 579 77 589 68 b 586 48 589 54 588 51 b 411 -172 583 41 416 -166 b 397 -176 406 -174 401 -176 b 387 -174 393 -176 390 -176 b 299 -87 386 -173 366 -152 b 213 0 253 -38 213 0 b 144 -86 213 0 182 -38 b 68 -174 73 -174 74 -173 b 62 -176 66 -176 65 -176 b 53 -174 59 -176 55 -174 b -35 -87 50 -173 29 -152 b -121 0 -83 -38 -121 0 b -190 -86 -122 0 -152 -38 b -266 -174 -261 -174 -259 -173 b -272 -176 -268 -176 -270 -176 b -281 -174 -276 -176 -280 -174 b -371 -86 -284 -173 -304 -152 b -457 0 -417 -38 -457 0 l -457 0 b -477 -26 -457 0 -470 -16 b -548 -227 -524 -88 -548 -161 b -536 -303 -548 -254 -544 -280 b -533 -317 -534 -309 -533 -313 b -553 -338 -533 -330 -541 -338 b -577 -315 -566 -338 -571 -333 b -590 -227 -586 -287 -590 -258 b -518 -9 -590 -154 -564 -77 b -465 56 -509 2 -504 8 l -402 134 b -367 173 -375 169 -372 172 "},v62:{x_min:46.28125,x_max:669.671875,ha:563,o:"m 183 376 b 189 376 185 376 187 376 b 212 374 197 376 208 376 b 265 337 234 369 253 355 b 274 317 268 331 273 320 b 274 316 274 317 274 316 b 280 323 276 316 276 319 b 311 358 288 337 299 348 b 319 366 315 360 318 365 b 356 376 326 373 340 376 b 382 371 364 376 374 374 b 428 337 400 366 417 352 b 436 317 431 331 436 320 b 438 316 436 317 436 316 b 442 323 438 316 439 319 b 475 358 451 337 462 348 b 483 366 477 360 481 365 b 518 376 488 373 503 376 b 544 373 528 376 536 376 b 604 285 579 360 604 326 b 597 249 604 273 601 258 b 543 63 596 247 544 70 b 541 54 543 61 541 55 b 540 44 540 51 540 47 b 552 23 540 33 545 23 b 552 23 552 23 552 23 b 647 126 586 29 627 72 b 658 138 651 136 653 138 b 660 138 660 138 660 138 b 669 129 666 137 669 136 b 654 88 669 122 665 109 b 562 -12 631 43 602 9 l 549 -19 b 521 -27 540 -24 530 -27 b 447 30 490 -27 458 -4 b 443 58 445 38 443 48 b 450 93 443 72 446 84 b 504 278 453 97 504 272 b 507 288 506 283 506 287 b 509 298 507 292 509 295 b 491 326 509 310 502 320 b 487 327 490 327 488 327 b 479 324 484 327 483 326 b 441 270 462 316 443 288 b 435 249 441 265 436 254 b 398 127 434 248 419 195 b 362 4 379 61 362 5 b 328 -1 359 -1 362 -1 b 314 -1 323 -1 319 -1 b 302 -1 310 -1 306 -1 b 266 4 266 -1 269 -1 b 265 6 265 5 265 5 b 303 144 265 13 272 34 b 343 278 325 216 343 276 b 344 288 343 281 344 285 b 345 298 345 291 345 295 b 330 326 345 310 340 320 b 323 327 328 327 325 327 b 317 324 322 327 321 326 b 279 270 300 316 281 288 b 273 249 279 265 274 254 b 236 127 272 248 255 195 b 200 4 216 61 200 5 b 164 -1 197 -1 198 -1 b 151 -1 161 -1 156 -1 b 140 -1 147 -1 142 -1 b 103 4 104 -1 106 -1 b 103 6 103 5 103 5 b 141 144 103 13 108 34 b 181 278 161 216 179 276 b 182 288 181 281 181 285 b 183 298 182 291 183 295 b 168 324 183 310 178 320 b 160 327 166 326 163 327 b 141 320 156 327 151 324 b 69 230 112 305 85 272 b 57 215 65 217 62 215 b 55 215 57 215 55 215 b 46 224 49 215 46 217 b 59 260 46 231 50 242 b 151 363 81 306 112 341 b 161 369 155 365 160 367 b 183 376 166 371 174 374 "},v68:{x_min:-597.53125,x_max:596.171875,ha:608,o:"m -533 324 b -525 327 -530 326 -528 327 b -504 305 -514 327 -504 317 b -504 305 -504 305 -504 305 b -513 284 -504 299 -504 299 b -556 112 -541 226 -556 167 b -545 33 -556 84 -552 58 b -524 -20 -541 15 -532 -9 l -522 -23 l -491 15 l -413 111 b -355 174 -367 169 -363 174 b -351 174 -353 174 -352 174 b -254 86 -343 174 -348 179 b -168 -1 -208 37 -168 -1 b -100 84 -168 -1 -137 37 b -23 173 -28 173 -29 172 b -19 174 -21 174 -20 174 b -8 173 -14 174 -10 173 b 155 11 -5 172 43 123 l 166 -1 l 168 1 l 170 4 l 170 130 b 171 260 170 256 170 258 b 191 274 175 269 183 274 b 205 267 196 274 201 272 b 212 158 212 262 210 273 l 212 56 l 257 112 b 311 173 304 172 304 172 b 317 174 313 174 314 174 b 326 173 319 174 323 173 b 490 11 329 172 366 134 l 502 -1 l 530 34 b 568 76 560 72 563 74 b 575 77 570 77 573 77 b 596 56 586 77 596 68 b 594 48 596 54 596 51 b 417 -172 592 41 424 -166 b 405 -176 415 -174 409 -176 b 396 -174 401 -176 398 -176 b 307 -87 393 -173 372 -152 b 221 -1 259 -38 221 -1 b 216 -6 221 -1 219 -2 l 212 -12 l 212 -147 b 212 -210 212 -173 212 -194 b 205 -292 212 -297 210 -287 b 191 -299 201 -297 196 -299 b 172 -287 183 -299 175 -295 b 170 -174 171 -284 171 -284 l 170 -63 l 127 -117 b 73 -176 84 -170 80 -176 b 68 -176 72 -176 70 -176 b -27 -87 59 -174 65 -180 b -114 0 -74 -38 -112 0 b -182 -86 -114 0 -145 -38 b -258 -174 -253 -174 -253 -173 b -264 -176 -259 -176 -262 -176 b -274 -174 -268 -176 -272 -174 b -438 -11 -277 -173 -348 -102 l -449 0 l -479 -37 b -524 -80 -513 -80 -514 -80 l -524 -80 b -553 -52 -534 -80 -540 -74 b -597 109 -583 -8 -597 48 b -560 280 -597 165 -585 224 b -533 324 -548 310 -540 322 "},v6c:{x_min:-1.359375,x_max:193.28125,ha:197,o:"m 78 233 b 87 233 81 233 84 233 b 187 140 132 233 174 195 b 193 102 190 127 193 115 b 43 -113 193 22 136 -62 b 27 -119 36 -116 31 -119 b 19 -108 21 -119 19 -115 b 29 -97 19 -102 20 -101 b 102 13 73 -72 102 -27 b 92 51 102 26 98 40 l 91 54 l 84 54 b 8 104 53 54 21 74 b -1 142 1 116 -1 130 b 78 233 -1 187 31 227 "},v6d:{x_min:-590.71875,x_max:589.359375,ha:601,o:"m 544 335 b 553 337 548 337 551 337 b 575 313 563 337 570 330 b 589 226 583 285 589 256 b 517 8 589 152 563 76 b 464 -58 507 -4 503 -9 l 401 -136 b 362 -176 372 -172 370 -176 b 357 -176 360 -176 359 -176 b 261 -87 349 -174 355 -180 b 175 0 215 -38 175 0 b 106 -86 175 0 144 -38 b 29 -174 35 -174 36 -173 b 24 -176 28 -176 27 -176 b 14 -174 21 -176 17 -174 b -73 -87 12 -173 -8 -152 b -159 0 -121 -38 -159 0 b -228 -86 -160 0 -190 -38 b -304 -174 -299 -174 -298 -173 b -310 -176 -306 -176 -308 -176 b -319 -174 -314 -176 -318 -174 b -483 -12 -323 -173 -359 -137 l -495 0 l -524 -34 b -562 -77 -553 -73 -556 -76 b -568 -79 -564 -79 -566 -79 b -590 -58 -581 -79 -590 -69 b -588 -49 -590 -55 -589 -52 b -412 170 -585 -43 -417 165 b -398 174 -408 173 -402 174 b -389 173 -394 174 -392 174 b -300 86 -387 172 -366 151 b -215 -1 -254 37 -215 -1 b -145 84 -215 -1 -183 37 b -69 173 -74 173 -76 172 b -63 174 -68 174 -66 174 b -54 173 -61 174 -57 173 b 34 86 -51 172 -31 151 b 119 -1 81 37 119 -1 b 189 84 121 -1 151 37 b 265 173 259 173 258 172 b 270 174 266 174 269 174 b 280 173 274 174 279 173 b 370 84 283 172 303 151 b 455 -1 416 37 455 -1 l 455 -1 b 476 24 455 -1 469 15 b 547 226 522 87 547 159 b 534 302 547 252 543 278 b 532 317 533 308 532 313 b 544 335 532 326 536 333 "},v6f:{x_min:-80.3125,x_max:78.9375,ha:81,o:"m 63 191 b 69 192 65 192 66 192 b 77 188 72 192 76 191 b 78 183 78 187 78 186 b 74 158 78 179 77 172 l 66 115 b 9 -161 49 30 10 -158 b -10 -187 6 -172 -1 -181 b -34 -194 -17 -191 -25 -194 b -80 -147 -58 -194 -80 -174 b -80 -141 -80 -144 -80 -142 b 9 70 -80 -134 -73 -117 l 49 163 b 63 191 59 188 61 190 "},v70:{x_min:0,x_max:436.921875,ha:446,o:"m 213 190 b 217 191 215 191 216 191 b 231 184 223 191 228 188 b 249 154 240 167 246 159 b 419 18 292 91 348 45 b 436 -1 435 11 436 8 b 424 -16 436 -9 434 -13 b 308 -87 394 -26 340 -59 b 231 -186 276 -117 257 -142 b 219 -192 228 -191 225 -192 b 198 -174 209 -192 208 -191 b 47 -33 161 -113 110 -63 b 10 -16 34 -26 17 -19 b 0 -1 2 -13 0 -9 b 17 18 0 8 1 11 b 198 173 95 48 156 101 b 213 190 206 187 208 188 "},v72:{x_min:-423.3125,x_max:421.9375,ha:431,o:"m -262 197 b -247 197 -257 197 -253 197 b -118 162 -210 197 -163 184 b 40 45 -61 134 -13 98 b 277 -95 119 -33 200 -81 b 289 -97 281 -97 285 -97 b 378 0 332 -97 371 -55 b 378 11 378 4 378 6 b 302 83 378 55 345 83 b 242 66 283 83 262 77 b 208 56 231 59 219 56 b 148 120 175 56 148 81 b 201 186 148 151 164 172 b 261 198 220 194 240 198 b 420 45 341 198 411 136 b 421 22 421 37 421 29 b 245 -199 421 -93 338 -199 b 238 -198 243 -199 240 -199 b -44 -47 148 -194 50 -141 b -250 86 -114 22 -183 66 b -295 94 -270 91 -283 94 b -315 91 -302 94 -307 94 b -381 4 -356 81 -381 43 b -355 -56 -381 -18 -372 -40 b -298 -81 -338 -73 -319 -81 b -246 -68 -283 -81 -265 -77 b -212 -58 -234 -61 -223 -58 b -178 -69 -200 -58 -189 -62 b -151 -122 -160 -81 -151 -101 b -171 -167 -151 -138 -157 -155 b -239 -195 -185 -181 -213 -192 b -257 -197 -245 -197 -250 -197 b -423 -5 -352 -197 -423 -109 b -412 65 -423 16 -419 40 b -262 197 -389 137 -329 188 "},v74:{x_min:-206.890625,x_max:428.75,ha:438,o:"m 389 -351 b 394 -351 390 -351 393 -351 b 428 -385 413 -351 428 -367 b 428 -394 428 -388 428 -391 b 394 -428 426 -406 421 -410 l 332 -473 l 269 -516 l 205 -560 l 141 -603 l 77 -648 l 13 -692 l -50 -737 l -114 -780 l -145 -802 b -171 -813 -157 -810 -163 -813 b -175 -813 -172 -813 -174 -813 b -206 -777 -194 -811 -206 -795 b -202 -760 -206 -771 -205 -766 b -87 -675 -197 -752 -206 -757 l -34 -639 l 83 -557 l 145 -514 l 209 -470 l 272 -427 b 389 -351 375 -356 381 -352 "},v75:{x_min:-149.71875,x_max:148.359375,ha:151,o:"m -137 381 b -130 383 -134 383 -133 383 b -111 371 -122 383 -114 378 b -55 224 -110 370 -85 305 b 0 80 -25 145 -1 80 b 54 224 0 80 24 145 b 112 377 114 384 110 373 b 127 384 118 381 122 384 b 148 362 138 384 148 374 l 148 356 l 83 183 b 16 9 47 88 17 11 b -1 0 12 2 5 0 b -14 5 -5 0 -10 1 b -84 183 -19 9 -13 -6 l -149 356 l -149 362 b -137 381 -149 371 -145 378 "},v78:{x_min:0,x_max:193.28125,ha:197,o:"m 85 514 b 95 517 88 517 89 517 b 114 505 103 517 110 513 l 115 502 l 115 376 b 115 249 115 306 115 249 b 141 258 117 249 127 252 l 167 266 l 172 266 b 190 254 181 265 187 262 l 193 251 l 193 202 l 193 188 b 187 147 193 149 191 152 b 147 130 183 142 182 141 l 115 119 l 115 9 b 115 -99 115 -51 115 -99 b 141 -91 115 -99 127 -95 b 171 -81 166 -81 167 -81 l 171 -81 b 191 -94 181 -81 189 -87 b 193 -142 191 -97 193 -120 b 191 -195 193 -167 191 -194 b 125 -227 187 -205 187 -204 l 115 -230 l 115 -366 l 115 -503 l 114 -506 b 95 -519 110 -514 102 -519 b 74 -506 87 -519 78 -514 l 73 -503 l 73 -374 b 73 -245 73 -260 73 -245 b 73 -245 73 -245 73 -245 b 55 -252 72 -245 63 -249 l 32 -260 b 19 -263 27 -262 23 -263 b 4 -256 13 -263 8 -260 b 0 -215 0 -251 0 -254 b 0 -199 0 -210 0 -206 l 0 -152 l 1 -149 b 8 -140 2 -145 5 -141 b 42 -127 9 -140 24 -133 l 73 -116 l 73 -5 b 73 23 73 4 73 15 b 73 105 73 70 73 105 b 49 97 73 105 61 101 b 17 88 32 91 23 88 b 4 95 10 88 8 91 b 0 137 0 101 0 98 b 0 151 0 141 0 145 l 0 199 l 1 202 b 43 224 5 212 5 212 l 73 234 l 73 367 l 73 502 l 74 505 b 85 514 77 509 81 513 "},v79:{x_min:-1.359375,x_max:899.703125,ha:918,o:"m 307 349 b 332 351 315 351 323 351 b 443 340 367 351 408 347 b 741 47 607 306 720 195 b 744 0 743 31 744 16 b 660 -303 744 -90 713 -206 b 28 -755 534 -531 304 -695 b 14 -756 23 -755 19 -756 b -1 -741 4 -756 -1 -750 b 21 -720 -1 -731 1 -728 b 567 -56 337 -601 548 -344 b 568 -11 568 -41 568 -24 b 442 285 568 129 525 233 b 325 319 406 308 367 319 b 93 177 232 319 137 266 b 84 154 91 170 84 155 b 84 154 84 154 84 154 b 88 156 84 154 85 155 b 159 177 110 170 134 177 b 257 134 194 177 231 162 b 294 41 281 108 294 73 b 171 -97 294 -24 246 -90 b 156 -98 166 -97 161 -98 b 6 74 73 -98 6 -22 b 6 80 6 76 6 79 b 307 349 10 223 141 340 m 839 215 b 845 216 841 216 842 216 b 862 213 852 216 860 215 b 899 163 887 206 899 184 b 872 117 899 145 890 127 b 847 111 865 112 856 111 b 808 130 833 111 818 117 b 796 162 800 140 796 151 b 839 215 796 187 812 212 m 839 -112 b 845 -112 841 -112 842 -112 b 862 -115 852 -112 860 -113 b 899 -165 887 -122 899 -144 b 872 -210 899 -183 890 -201 b 847 -217 865 -215 856 -217 b 808 -198 833 -217 818 -210 b 796 -165 800 -188 796 -177 b 839 -112 796 -140 812 -116 "},v7a:{x_min:-1.359375,x_max:386.5625,ha:394,o:"m 249 535 b 257 537 251 537 253 537 b 276 524 266 537 273 533 l 277 521 l 279 419 l 279 316 l 304 323 b 337 328 319 326 330 328 b 353 316 347 328 349 324 b 355 266 355 315 355 290 b 353 215 355 241 355 217 b 319 198 349 206 347 205 b 279 187 284 190 279 188 b 279 156 279 187 279 174 b 279 136 279 151 279 144 l 279 84 l 289 87 l 330 98 b 367 105 352 102 362 105 b 378 101 372 105 375 104 b 386 61 385 95 386 94 b 386 40 386 55 386 48 l 386 -5 l 385 -8 b 374 -19 383 -12 378 -18 b 291 -40 372 -19 347 -26 b 279 -43 284 -41 279 -43 b 279 -83 279 -43 279 -59 b 279 -95 279 -87 279 -91 l 279 -145 l 304 -140 b 337 -133 321 -136 330 -133 b 349 -140 343 -133 347 -136 b 355 -181 355 -145 355 -142 l 355 -197 l 355 -210 b 349 -252 355 -249 355 -247 b 300 -269 345 -258 347 -258 b 280 -274 291 -272 281 -273 l 279 -274 l 277 -378 l 277 -483 l 276 -487 b 257 -499 273 -495 265 -499 b 238 -487 249 -499 242 -495 l 236 -483 l 236 -384 l 236 -285 l 235 -285 l 212 -291 l 170 -301 b 148 -308 159 -305 148 -306 b 147 -415 147 -308 147 -313 l 147 -523 l 145 -526 b 126 -538 141 -534 133 -538 b 106 -526 118 -538 110 -534 l 104 -523 l 104 -420 b 103 -317 104 -326 104 -317 b 103 -317 103 -317 103 -317 b 50 -330 92 -322 54 -330 b 31 -317 42 -330 35 -326 b 29 -267 29 -315 29 -315 l 29 -219 l 32 -216 b 92 -192 36 -206 36 -206 l 104 -190 l 104 -138 b 103 -87 104 -91 104 -87 b 103 -87 103 -87 103 -87 b 88 -91 103 -87 96 -88 l 49 -101 b 17 -106 32 -105 23 -106 b 6 -102 13 -106 10 -105 b -1 -62 0 -97 -1 -95 b 0 -41 -1 -56 0 -49 l 0 4 l 1 6 b 10 16 2 11 6 15 b 91 37 12 18 38 24 l 104 41 l 104 93 b 103 144 104 140 104 144 b 103 144 103 144 103 144 b 50 131 92 141 54 131 b 31 144 42 131 35 137 b 29 195 29 147 29 148 l 29 242 l 32 245 b 92 269 36 255 36 255 l 104 273 l 104 377 l 104 481 l 106 485 b 126 498 110 492 118 498 b 134 495 129 498 132 496 b 145 485 138 494 142 489 l 147 481 l 147 383 l 147 283 l 152 284 b 190 294 155 285 171 290 l 230 303 l 236 305 l 236 413 l 236 521 l 238 524 b 249 535 240 528 243 533 m 236 126 b 235 177 236 154 236 177 l 235 177 b 213 172 235 177 225 174 l 170 161 b 147 155 157 158 147 155 b 147 124 147 155 147 142 b 147 102 147 117 147 111 l 147 52 l 153 54 l 228 72 l 236 74 l 236 126 m 236 -105 b 235 -54 236 -65 236 -54 l 235 -54 b 231 -55 235 -54 234 -54 b 172 -69 227 -55 204 -62 l 149 -76 l 147 -76 l 147 -127 l 147 -179 l 152 -177 b 190 -167 155 -177 171 -173 l 230 -158 l 236 -156 l 236 -105 "},v7c:{x_min:0,x_max:300.8125,ha:307,o:"m 49 505 b 53 506 50 505 51 506 b 70 496 58 506 62 503 b 81 485 73 492 78 488 l 96 473 l 111 459 l 122 449 l 134 438 l 182 396 l 255 330 b 292 291 292 298 292 298 l 292 290 l 292 284 l 283 270 b 209 36 234 197 209 113 b 288 -170 209 -44 235 -119 b 299 -184 295 -179 299 -181 b 300 -191 300 -187 300 -188 b 285 -206 300 -199 294 -206 b 280 -206 283 -206 281 -206 b 247 -201 270 -202 259 -201 b 176 -222 223 -201 197 -208 b 114 -340 136 -249 114 -292 b 172 -471 114 -384 134 -433 b 185 -492 182 -481 185 -487 b 181 -502 185 -496 183 -499 b 171 -508 176 -505 174 -508 b 152 -498 166 -508 160 -503 b 0 -284 65 -428 12 -352 b 0 -260 0 -278 0 -270 b 1 -238 0 -252 0 -242 b 148 -140 16 -177 73 -140 b 209 -148 167 -140 189 -142 b 215 -149 212 -148 215 -149 b 215 -149 215 -149 215 -149 l 215 -149 b 201 -136 215 -148 209 -142 l 157 -97 l 96 -41 b 17 34 21 24 17 29 b 17 37 17 36 17 36 b 17 38 17 37 17 38 b 25 56 17 44 17 44 b 110 298 81 131 110 219 b 46 474 110 367 88 431 b 38 491 40 480 38 487 b 49 505 38 498 42 502 "},v7d:{x_min:-1.359375,x_max:436.921875,ha:446,o:"m 213 205 b 217 205 215 205 216 205 b 234 194 224 205 234 199 b 236 187 234 194 235 190 l 245 167 l 261 129 l 270 106 b 355 -61 294 54 329 -13 b 420 -163 381 -105 402 -138 b 436 -188 435 -184 436 -184 b 436 -191 436 -190 436 -190 b 421 -206 436 -201 431 -206 l 421 -206 l 416 -206 l 405 -201 b 217 -158 347 -172 283 -158 b 31 -201 153 -158 88 -172 l 20 -206 l 14 -206 l 14 -206 b 0 -191 5 -206 0 -201 b -1 -188 0 -190 -1 -190 b 14 -163 -1 -186 0 -184 b 95 -34 36 -136 72 -77 b 166 106 119 8 148 68 l 175 129 l 183 148 l 200 188 b 213 205 205 199 208 202 "},v7f:{x_min:0,x_max:367.5,ha:375,o:"m 0 124 l 0 187 l 61 187 l 122 187 l 122 138 l 122 91 l 153 61 l 183 30 l 213 61 l 243 91 l 243 138 l 243 187 l 306 187 l 367 187 l 367 124 l 367 61 l 321 61 l 274 61 l 243 30 l 213 0 l 243 -31 l 274 -62 l 321 -62 l 367 -62 l 367 -124 l 367 -188 l 306 -188 l 243 -188 l 243 -140 l 243 -93 l 213 -62 l 183 -31 l 153 -62 l 122 -93 l 122 -140 l 122 -188 l 61 -188 l 0 -188 l 0 -124 l 0 -62 l 46 -62 l 92 -62 l 123 -31 l 153 0 l 123 30 l 92 61 l 46 61 l 0 61 l 0 124 "},v80:{x_min:29.9375,x_max:420.578125,ha:371,o:"m 115 345 b 221 347 117 345 166 347 b 411 345 306 347 409 345 b 420 330 416 342 420 335 b 415 319 420 326 419 321 b 178 118 397 303 179 118 b 178 117 178 118 178 117 b 181 117 178 117 178 117 b 189 117 182 117 185 117 b 193 117 190 117 191 117 b 247 98 215 117 232 111 b 296 75 266 83 280 76 b 302 75 299 75 300 75 b 322 91 311 75 315 79 b 322 91 322 91 322 91 b 322 91 322 91 322 91 b 319 91 322 91 321 91 b 313 90 318 90 315 90 b 283 107 300 90 288 97 b 277 126 279 114 277 121 b 319 167 277 149 295 167 b 319 167 319 167 319 167 b 362 118 347 167 362 147 b 355 82 362 108 359 96 b 311 33 349 65 340 55 b 224 1 284 12 253 1 b 194 5 213 1 204 2 b 168 18 183 8 178 11 b 110 36 151 30 130 36 b 57 15 88 36 68 29 b 47 11 54 12 51 11 b 31 20 40 11 34 13 b 29 26 31 22 29 25 b 68 66 29 36 39 45 b 285 250 73 71 281 248 b 285 250 285 250 285 250 b 231 252 285 252 261 252 b 137 250 190 252 141 250 b 93 227 122 248 110 241 b 78 220 88 222 83 220 b 66 227 74 220 70 222 b 63 234 65 229 63 231 b 85 291 63 241 69 252 b 115 345 108 342 108 344 "},v81:{x_min:0,x_max:428.75,ha:438,o:"m 262 186 b 273 186 266 186 272 186 b 274 186 273 186 274 186 b 285 186 274 186 280 186 b 428 48 375 181 428 122 b 386 -68 428 12 416 -29 b 155 -187 329 -145 236 -187 b 12 -111 92 -187 38 -162 b 0 -51 4 -91 0 -72 b 262 186 0 58 122 179 m 366 131 b 352 134 362 133 357 134 b 219 81 321 134 269 115 b 47 -111 126 23 50 -62 b 47 -112 47 -111 47 -112 b 77 -136 47 -129 58 -136 b 264 -45 118 -136 194 -101 b 382 109 336 12 382 76 b 366 131 382 120 377 129 "},v83:{x_min:-1.359375,x_max:847.96875,ha:865,o:"m 488 1499 b 495 1500 490 1500 492 1500 b 541 1465 507 1500 521 1490 b 679 1078 622 1372 679 1210 b 677 1050 679 1068 677 1060 b 477 642 668 893 604 764 l 443 609 l 431 596 l 431 592 l 438 562 l 449 508 l 460 458 b 481 355 475 390 481 355 b 481 355 481 355 481 355 b 490 356 481 355 485 355 b 528 358 495 356 511 358 b 558 356 540 358 552 356 b 839 95 699 338 808 237 b 847 22 845 72 847 47 b 631 -303 847 -113 766 -242 b 620 -309 623 -308 620 -309 l 620 -310 b 631 -359 620 -310 626 -333 l 646 -435 l 660 -496 b 672 -588 668 -535 672 -563 b 664 -653 672 -610 669 -630 b 383 -875 630 -792 509 -875 b 201 -810 321 -875 257 -855 b 129 -680 151 -768 129 -730 b 274 -530 129 -592 200 -530 b 351 -553 300 -530 326 -538 b 412 -669 393 -582 412 -626 b 287 -805 412 -735 366 -800 l 279 -805 l 285 -809 b 383 -830 318 -823 351 -830 b 586 -718 464 -830 540 -789 b 626 -584 612 -678 626 -631 b 619 -528 626 -566 623 -548 b 612 -495 619 -526 616 -510 b 577 -324 590 -387 577 -324 b 577 -324 577 -324 577 -324 b 568 -326 575 -324 571 -324 b 528 -334 558 -328 537 -333 b 465 -338 506 -337 485 -338 b 24 -11 269 -338 87 -206 b -1 145 8 41 -1 93 b 96 442 -1 249 32 351 b 322 714 166 541 236 626 l 352 745 l 345 782 l 332 843 l 315 921 b 303 984 310 950 304 978 b 295 1082 298 1017 295 1049 b 413 1426 295 1208 336 1329 b 488 1499 436 1456 477 1496 m 549 1301 b 541 1301 547 1301 544 1301 b 411 1207 500 1301 447 1263 b 355 1004 374 1152 355 1079 b 359 942 355 984 356 963 b 371 881 362 927 363 917 l 385 818 b 392 782 389 799 392 784 l 392 782 b 434 828 393 782 424 816 b 607 1165 534 941 594 1060 b 608 1193 608 1175 608 1183 b 597 1270 608 1224 604 1254 b 549 1301 589 1286 571 1299 m 398 528 b 393 555 396 542 393 553 b 392 555 393 555 393 555 b 317 470 390 555 347 505 b 190 298 266 408 212 334 b 127 70 148 227 127 148 b 155 -77 127 19 137 -30 b 468 -303 209 -216 333 -303 b 519 -299 484 -303 502 -302 b 568 -284 541 -295 568 -287 l 568 -284 b 563 -263 568 -284 566 -274 l 534 -120 l 511 -13 l 496 61 l 480 133 b 469 187 472 176 469 187 b 468 188 469 187 469 188 b 416 162 462 188 430 172 b 337 13 364 126 337 69 b 413 -124 337 -40 363 -93 b 428 -144 424 -131 428 -137 b 428 -149 428 -145 428 -148 b 409 -166 426 -161 419 -166 b 394 -162 405 -166 400 -165 b 240 77 302 -122 240 -27 l 240 77 b 430 342 240 197 315 301 l 436 344 l 426 394 l 398 528 m 548 194 b 526 195 540 195 532 195 b 519 195 524 195 521 195 l 514 195 l 518 177 l 539 79 l 552 15 l 566 -48 l 594 -187 l 605 -240 b 612 -266 609 -254 611 -266 b 612 -266 612 -266 612 -266 b 641 -248 613 -266 630 -256 b 744 -98 692 -212 730 -156 b 751 -40 749 -79 751 -59 b 548 194 751 76 665 181 "},v84:{x_min:25.859375,x_max:164.6875,ha:168,o:"m 34 369 b 40 370 35 370 38 370 b 59 353 49 370 50 367 b 164 40 122 254 155 158 b 164 0 164 33 164 16 b 164 -40 164 -16 164 -34 b 59 -353 155 -158 122 -254 b 40 -371 53 -366 47 -371 b 34 -370 38 -371 36 -370 b 25 -358 28 -367 25 -363 b 31 -337 25 -352 27 -347 b 92 0 72 -234 92 -117 b 31 335 92 116 72 233 b 25 356 27 345 25 352 b 34 369 25 363 28 366 "},v86:{x_min:-571.671875,x_max:570.3125,ha:582,o:"m -386 173 b -381 174 -385 174 -383 174 b -370 173 -377 174 -372 173 b -281 86 -367 172 -347 151 b -196 0 -235 37 -196 0 b -126 84 -196 0 -164 37 b -50 174 -55 173 -57 172 b -44 174 -49 174 -47 174 b -35 173 -42 174 -38 173 b 53 86 -32 172 -12 151 b 138 0 100 37 138 0 b 208 84 140 0 170 37 b 284 174 279 173 277 172 b 289 174 285 174 288 174 b 299 173 294 174 298 173 b 462 11 303 172 338 134 l 475 -1 l 503 34 b 541 76 534 72 536 74 b 548 77 544 77 545 77 b 570 56 560 77 570 68 b 567 48 570 54 568 51 b 392 -172 564 41 397 -166 b 378 -176 387 -174 382 -176 b 368 -174 374 -176 371 -176 b 280 -87 367 -173 345 -152 b 194 0 234 -38 194 0 b 125 -86 194 0 163 -38 b 49 -174 54 -174 55 -173 b 43 -176 47 -176 46 -176 b 34 -174 40 -176 36 -174 b -54 -87 31 -173 10 -152 b -140 0 -102 -38 -140 0 b -209 -86 -141 0 -171 -38 b -285 -174 -280 -174 -279 -173 b -291 -176 -287 -176 -289 -176 b -300 -174 -295 -176 -299 -174 b -464 -12 -304 -173 -340 -137 l -476 0 l -504 -34 b -543 -77 -534 -73 -537 -76 b -549 -79 -545 -79 -547 -79 b -571 -58 -562 -79 -571 -69 b -568 -49 -571 -55 -570 -52 b -392 172 -566 -43 -396 167 b -386 173 -390 172 -387 173 "},v8a:{x_min:-170.140625,x_max:168.78125,ha:172,o:"m -160 567 b -122 567 -159 567 -149 567 l -87 567 l -84 566 b -74 553 -78 563 -77 560 b -20 366 -73 551 -49 466 b 31 186 8 267 31 186 b 85 371 31 186 55 269 b 140 559 114 473 138 557 b 153 567 141 564 148 567 b 168 559 159 567 166 564 b 168 555 168 557 168 557 b 92 281 168 548 159 513 b 14 13 50 134 14 13 b 0 0 14 6 6 0 b -17 15 -8 0 -17 8 b -93 283 -17 15 -51 136 b -170 552 -166 533 -170 548 b -170 553 -170 552 -170 552 b -160 567 -170 560 -167 564 "},v8b:{x_min:0,x_max:319.859375,ha:326,o:"m 149 508 b 159 509 152 509 155 509 b 186 494 170 509 181 503 b 190 440 190 487 190 488 l 190 430 l 190 377 l 242 377 l 251 377 b 303 373 298 377 296 377 b 319 345 314 367 319 356 b 304 319 319 335 314 324 b 250 315 296 315 299 315 l 242 315 l 190 315 l 190 262 l 190 252 b 186 198 190 204 190 205 b 159 183 179 188 170 183 b 132 198 148 183 138 188 b 127 252 127 205 127 204 l 127 262 l 127 315 l 76 315 l 68 315 b 14 319 20 315 21 315 b 0 347 4 324 0 335 b 14 373 0 356 4 367 b 68 377 21 377 20 377 l 76 377 l 127 377 l 127 430 l 127 440 b 132 494 127 488 127 487 b 149 508 136 501 142 505 "},v8c:{x_min:-330.75,x_max:329.390625,ha:336,o:"m -133 483 b -117 484 -127 484 -122 484 b 31 373 -51 484 9 440 b 35 348 34 365 35 356 b -25 285 35 313 10 285 b -87 331 -55 285 -76 302 b -167 402 -100 376 -133 402 b -191 398 -175 402 -183 401 b -227 341 -215 388 -227 369 b -225 320 -227 334 -227 327 b -13 74 -209 230 -125 133 b 6 65 -4 70 5 66 l 9 63 l 10 65 b 117 231 12 68 40 112 l 189 341 l 242 424 b 268 460 262 456 264 458 b 283 464 273 463 277 464 b 308 438 296 464 308 453 l 308 437 b 287 396 308 430 308 428 l 95 98 l 59 43 l 58 41 l 65 37 b 253 -156 151 -8 217 -77 b 281 -285 272 -199 281 -244 b 148 -481 281 -381 231 -463 b 115 -485 137 -484 126 -485 b -32 -376 51 -485 -9 -442 b -36 -349 -35 -366 -36 -358 b 25 -287 -36 -315 -12 -287 b 85 -333 54 -287 74 -302 b 166 -403 99 -377 133 -403 b 190 -399 174 -403 182 -402 b 225 -342 215 -390 225 -370 b 224 -322 225 -335 225 -328 b 12 -76 208 -231 125 -134 b -8 -66 2 -72 -6 -68 l -10 -65 l -12 -66 b -118 -231 -13 -68 -42 -113 l -190 -342 l -243 -426 b -269 -462 -264 -458 -265 -458 b -284 -466 -274 -464 -279 -466 b -310 -440 -298 -466 -310 -455 l -310 -438 b -288 -398 -310 -430 -308 -430 l -96 -99 l -59 -44 l -59 -43 l -66 -38 b -281 284 -198 33 -281 158 l -281 284 b -133 483 -281 392 -220 474 m 254 177 b 266 179 258 177 262 179 b 319 149 287 179 307 167 b 329 115 326 140 329 127 b 319 79 329 102 326 90 b 268 51 307 61 287 51 b 221 72 250 51 234 58 b 205 115 210 84 205 99 b 254 177 205 142 223 170 m -281 -54 b -269 -52 -277 -52 -273 -52 b -223 -73 -253 -52 -235 -59 b -206 -116 -212 -84 -206 -101 b -216 -151 -206 -129 -209 -141 b -269 -179 -228 -170 -249 -179 b -314 -159 -285 -179 -302 -173 b -330 -116 -325 -147 -330 -131 b -281 -54 -330 -88 -313 -61 "},v8d:{x_min:-1.359375,x_max:255.890625,ha:261,o:"m 118 514 b 127 517 121 517 122 517 b 147 505 136 517 142 513 l 148 502 l 148 403 b 148 306 148 351 148 306 b 174 315 149 306 160 310 l 200 324 l 205 323 b 223 312 213 323 220 319 l 225 308 l 225 260 b 225 245 225 255 225 249 b 220 204 225 208 224 209 b 179 188 216 199 215 199 l 148 177 l 148 124 l 148 70 l 189 84 b 236 98 219 94 230 98 b 247 94 240 98 243 97 b 255 52 254 88 255 87 b 255 33 255 47 255 40 l 254 -12 l 253 -15 b 249 -22 253 -18 250 -20 l 245 -24 l 196 -41 l 148 -58 l 148 -108 b 148 -158 148 -136 148 -158 b 174 -148 148 -158 160 -154 b 204 -140 198 -140 200 -140 l 204 -140 b 224 -152 213 -140 221 -145 b 225 -201 224 -155 225 -177 b 224 -254 225 -226 224 -251 b 157 -284 220 -262 220 -262 l 148 -288 l 148 -395 l 148 -503 l 147 -506 b 127 -519 142 -514 134 -519 b 107 -506 119 -519 111 -514 l 106 -503 l 106 -403 b 106 -303 106 -316 106 -303 b 104 -303 104 -303 104 -303 b 88 -310 104 -303 96 -306 l 63 -319 b 51 -322 59 -320 55 -322 b 36 -315 46 -322 40 -319 b 31 -273 32 -309 31 -312 b 31 -258 31 -269 31 -263 l 31 -210 l 34 -206 b 40 -198 35 -204 38 -199 b 74 -186 42 -197 57 -191 l 106 -173 l 106 -123 b 106 -97 106 -112 106 -104 b 106 -72 106 -76 106 -72 b 104 -72 106 -72 106 -72 b 20 -99 89 -79 23 -99 b 0 -84 10 -99 2 -93 b -1 -37 0 -81 -1 -59 b 0 11 -1 -15 0 9 b 58 40 4 22 2 22 l 106 56 l 106 109 b 106 123 106 115 106 119 b 106 162 106 147 106 162 b 81 155 106 162 93 159 b 50 147 65 149 55 147 b 36 152 43 147 40 148 b 31 194 32 158 31 156 b 31 209 31 198 31 204 l 31 256 l 34 260 b 76 281 38 269 38 269 l 106 292 l 106 396 l 106 502 l 107 505 b 118 514 110 509 114 513 "},v8f:{x_min:-21.78125,x_max:362.0625,ha:369,o:"m 302 1031 b 308 1032 304 1032 307 1032 b 330 1016 318 1032 325 1027 b 362 867 351 970 362 920 b 340 738 362 824 353 780 l 336 727 l 340 717 b 362 591 355 677 362 634 b 257 323 362 496 325 401 b 204 272 243 306 227 290 b 20 56 129 206 66 133 b -1 18 12 44 0 22 b -19 4 -4 9 -12 4 l -21 4 l -21 140 l -21 276 l -12 277 b 167 333 61 288 127 309 b 319 598 262 388 319 491 b 311 664 319 620 317 642 l 310 673 l 304 664 b 204 548 279 620 250 587 b 20 333 129 483 66 409 b -1 292 12 320 0 298 b -19 280 -4 285 -12 280 l -21 280 l -21 416 l -21 552 l -12 553 b 167 609 61 564 127 585 b 319 874 264 666 319 770 b 294 992 319 914 311 954 b 288 1011 288 1004 288 1007 b 302 1031 288 1021 294 1028 "},v90:{x_min:-171.5,x_max:483.1875,ha:493,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 495 20 616 20 616 b 20 373 20 427 20 373 b 115 410 20 373 63 390 l 210 448 l 210 531 b 212 620 210 614 210 616 b 231 632 215 628 223 632 b 246 627 236 632 242 631 b 251 541 251 620 251 628 l 251 463 l 315 489 b 387 514 368 509 381 514 b 393 513 390 514 392 514 b 406 494 402 510 406 502 b 397 476 406 487 404 480 b 323 446 396 474 363 462 l 251 417 l 251 283 l 251 148 l 254 151 b 370 199 291 183 332 199 b 415 191 385 199 400 197 b 483 84 458 176 483 134 b 461 0 483 58 476 29 b 332 -142 439 -40 411 -72 l 255 -215 b 231 -229 240 -229 239 -229 b 216 -223 224 -229 220 -227 b 210 -158 210 -217 210 -223 b 210 -120 210 -148 210 -136 l 210 -29 l 205 -34 b 100 -142 182 -65 159 -88 l 23 -215 b -1 -229 9 -229 6 -229 b -19 -217 -9 -229 -16 -224 l -20 -215 l -21 48 l -21 310 l -83 287 b -152 262 -133 266 -145 262 b -157 263 -153 262 -155 262 b -171 283 -166 266 -171 274 b -161 301 -171 290 -167 297 b -91 328 -160 302 -129 315 l -21 356 l -21 487 l -20 617 l -19 621 b -8 631 -17 626 -12 630 m 210 288 b 210 401 210 351 210 401 b 114 365 209 401 167 384 l 20 327 l 20 238 l 20 148 l 21 151 b 140 199 59 183 102 199 b 206 180 164 199 187 192 l 209 177 b 209 177 209 177 209 177 b 210 288 210 177 210 199 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 m 341 131 b 328 133 337 133 332 133 b 322 133 326 133 323 133 b 257 87 296 129 273 113 l 251 80 l 251 -37 l 251 -156 l 255 -152 b 375 81 328 -72 375 20 l 375 83 b 341 131 375 113 367 126 "},v92:{x_min:0,x_max:598.890625,ha:611,o:"m 62 181 b 77 183 66 183 72 183 b 91 181 83 183 88 183 b 202 131 100 180 106 177 l 299 87 l 394 131 b 517 183 499 181 502 183 b 519 183 517 183 518 183 b 598 104 567 183 598 144 b 577 49 598 84 592 65 b 518 15 567 38 563 37 b 484 0 499 6 484 0 b 518 -16 484 -1 499 -8 b 577 -51 563 -38 567 -40 b 598 -105 592 -66 598 -86 b 519 -184 598 -145 567 -184 b 517 -184 518 -184 517 -184 b 394 -133 502 -184 499 -183 l 299 -88 l 202 -133 b 81 -184 99 -183 95 -184 b 77 -184 80 -184 78 -184 b 0 -105 29 -184 0 -145 b 20 -51 0 -86 5 -66 b 80 -16 29 -40 34 -38 b 114 -1 98 -8 114 -1 b 80 15 114 0 98 6 b 20 49 34 37 29 38 b 0 104 6 65 0 84 b 62 181 0 140 23 174 m 88 134 b 74 136 85 134 80 136 b 68 134 72 136 69 136 b 46 104 54 130 46 117 b 55 81 46 95 49 88 b 149 34 59 76 53 80 b 224 -1 190 15 224 0 b 144 -38 224 -1 187 -18 b 54 -84 59 -79 58 -79 b 46 -105 49 -90 46 -98 b 76 -137 46 -122 58 -137 b 78 -137 77 -137 77 -137 b 194 -86 87 -137 76 -141 b 298 -36 250 -58 298 -36 b 298 -36 298 -36 298 -36 b 402 -84 299 -36 345 -58 b 518 -137 522 -141 510 -137 b 521 -137 519 -137 519 -137 b 551 -105 539 -137 551 -122 b 541 -83 551 -98 548 -90 b 447 -36 537 -77 544 -81 b 374 -1 406 -16 374 -1 b 447 34 374 0 406 15 b 541 81 544 80 537 76 b 551 104 548 88 551 97 b 521 136 551 120 539 136 b 518 136 519 136 519 136 b 517 136 518 136 517 136 l 517 136 b 402 83 511 136 511 136 b 298 34 345 56 299 34 b 298 34 298 34 298 34 b 194 84 298 34 250 56 b 88 134 137 111 89 133 "},v93:{x_min:0,x_max:438.28125,ha:447,o:"m 212 205 b 219 205 213 205 216 205 b 239 183 228 205 231 204 b 421 -163 298 40 363 -83 b 438 -191 434 -180 438 -186 b 436 -197 438 -192 438 -195 b 424 -206 434 -204 431 -206 b 406 -201 420 -206 415 -205 b 216 -156 347 -172 281 -156 b 23 -205 148 -156 80 -173 b 14 -206 20 -206 17 -206 b 0 -191 6 -206 0 -201 b 6 -176 0 -187 1 -183 b 202 192 63 -104 142 45 b 212 205 205 199 208 202 m 264 48 l 249 81 l 243 94 l 242 91 b 89 -126 208 36 137 -66 b 81 -138 85 -133 81 -138 b 81 -138 81 -138 81 -138 b 81 -138 81 -138 81 -138 b 95 -133 81 -138 87 -136 b 280 -94 156 -108 221 -94 b 334 -98 299 -94 317 -95 b 343 -99 338 -99 343 -99 b 343 -99 343 -99 343 -99 b 338 -94 343 -99 341 -97 b 264 48 318 -58 287 1 "},v94:{x_min:-149.71875,x_max:148.359375,ha:151,o:"m -9 215 b 0 217 -6 217 -4 217 b 19 205 8 217 14 213 b 20 142 20 202 20 201 l 20 84 l 23 84 b 144 -27 81 74 129 30 b 148 -66 147 -40 148 -54 b 36 -213 148 -134 103 -197 b 0 -219 24 -217 12 -219 b -145 -104 -68 -219 -129 -173 b -149 -68 -148 -91 -149 -79 b -24 84 -149 6 -98 74 l -21 84 l -21 142 b -19 205 -20 201 -20 202 b -9 215 -17 209 -13 213 m -21 -15 b -23 41 -21 37 -21 41 b -23 41 -23 41 -23 41 b -76 11 -35 40 -62 26 b -108 -65 -98 -11 -108 -38 b -1 -176 -108 -122 -65 -176 b 107 -65 63 -176 107 -122 b 74 11 107 -38 96 -11 b 20 41 61 26 32 41 b 20 -15 20 41 20 15 b 19 -74 20 -72 20 -72 b 0 -87 14 -83 6 -87 b -19 -74 -8 -87 -16 -83 b -21 -15 -20 -72 -20 -72 "},v95:{x_min:0,x_max:406.96875,ha:415,o:"m 55 181 b 70 183 61 183 66 183 b 111 170 85 183 99 179 b 160 130 115 167 137 149 l 202 95 l 245 130 b 319 181 299 176 302 179 b 334 183 325 183 330 183 b 406 109 375 183 406 148 b 401 81 406 99 405 91 b 348 24 394 65 390 59 b 318 -1 332 11 318 0 b 348 -26 318 -1 332 -12 b 401 -83 390 -61 394 -66 b 406 -111 405 -93 406 -101 b 334 -184 406 -149 375 -184 b 319 -183 330 -184 325 -184 b 245 -131 302 -180 299 -177 l 202 -97 l 160 -131 b 85 -183 107 -177 103 -180 b 70 -184 80 -184 76 -184 b 0 -111 31 -184 0 -149 b 4 -83 0 -101 1 -93 b 58 -26 10 -66 16 -61 b 88 -1 74 -12 88 -1 b 58 24 88 0 74 11 b 10 69 23 54 17 59 b 0 109 2 81 0 95 b 55 181 0 142 21 173 m 83 133 b 72 136 78 136 76 136 b 57 131 66 136 61 134 b 46 109 49 126 46 117 b 50 93 46 104 47 98 b 107 45 51 91 77 70 b 160 0 137 20 160 0 b 107 -47 160 -1 137 -22 b 50 -94 77 -72 51 -93 b 46 -111 47 -99 46 -105 b 59 -134 46 -120 50 -130 b 72 -137 62 -136 68 -137 b 83 -136 76 -137 80 -136 b 144 -84 84 -134 107 -116 b 202 -36 176 -58 202 -36 b 261 -84 202 -36 230 -58 b 323 -136 299 -116 321 -134 b 334 -137 326 -136 330 -137 b 345 -134 338 -137 343 -136 b 360 -111 355 -130 360 -120 b 355 -94 360 -105 359 -99 b 299 -47 353 -93 329 -72 b 245 0 269 -22 245 -1 b 299 45 245 0 269 20 b 355 93 329 70 353 91 b 360 109 359 98 360 104 b 345 133 360 119 355 129 b 334 136 343 134 338 136 b 323 134 330 136 326 134 b 261 83 321 133 299 115 b 202 34 230 56 202 34 b 144 83 202 34 176 56 b 83 133 106 115 84 133 "},v97:{x_min:-228.671875,x_max:227.3125,ha:232,o:"m -217 487 l -213 488 l 0 488 l 212 488 l 216 487 b 225 476 220 484 224 480 l 227 473 l 227 244 l 227 15 l 225 12 b 206 0 223 4 215 0 b 197 1 204 0 200 0 b 187 12 193 4 189 6 l 186 15 l 186 138 l 186 262 l -1 262 l -187 262 l -187 138 l -187 15 l -189 12 b -208 0 -193 4 -200 0 b -227 12 -216 0 -223 4 l -228 15 l -228 244 l -228 473 l -227 476 b -217 487 -225 480 -221 484 "},v9a:{x_min:-21.78125,x_max:367.5,ha:375,o:"m 230 1031 b 238 1032 232 1032 235 1032 b 259 1014 245 1032 251 1027 b 367 662 330 906 367 782 b 364 602 367 641 367 621 b 232 317 352 488 304 384 b 57 120 155 245 103 187 b -1 18 31 84 6 40 b -19 4 -4 11 -12 4 l -21 4 l -21 159 l -21 315 l -16 315 b 96 335 10 315 62 324 b 315 695 227 380 315 527 b 313 738 315 709 314 724 b 224 991 304 825 273 916 b 216 1013 219 999 216 1007 b 230 1031 216 1021 220 1028 "},v9b:{x_min:-24.5,x_max:313.0625,ha:319,o:"m -24 -133 l -24 -5 l -20 -5 b -1 -19 -12 -5 -4 -11 b 142 -213 13 -61 74 -144 b 258 -376 196 -269 230 -315 b 313 -605 295 -449 313 -528 b 292 -742 313 -652 306 -699 b 288 -752 289 -748 288 -752 b 288 -752 288 -752 288 -752 b 292 -764 289 -753 291 -757 b 313 -907 306 -811 313 -860 b 292 -1045 313 -954 306 -1002 b 288 -1054 289 -1050 288 -1054 b 288 -1054 288 -1054 288 -1054 b 292 -1067 289 -1054 291 -1060 b 313 -1210 306 -1113 313 -1161 b 292 -1346 313 -1257 306 -1304 b 288 -1357 289 -1353 288 -1357 b 288 -1357 288 -1357 288 -1357 b 292 -1368 289 -1357 291 -1363 b 313 -1512 306 -1415 313 -1464 b 292 -1648 313 -1560 306 -1605 b 288 -1660 289 -1654 288 -1660 b 288 -1660 288 -1660 288 -1660 b 292 -1671 289 -1660 291 -1665 b 313 -1814 306 -1719 313 -1766 b 250 -2040 313 -1897 291 -1977 b 232 -2062 238 -2057 236 -2059 b 221 -2065 230 -2063 225 -2065 b 200 -2045 210 -2065 201 -2057 b 200 -2043 200 -2044 200 -2044 b 208 -2026 200 -2037 202 -2034 b 269 -1826 249 -1966 269 -1897 b 153 -1544 269 -1726 230 -1625 b -9 -1472 115 -1506 58 -1481 b -21 -1471 -14 -1471 -19 -1471 l -24 -1471 l -24 -1343 l -24 -1215 l -20 -1215 b -1 -1229 -12 -1215 -4 -1221 b 142 -1424 13 -1270 74 -1353 b 257 -1582 196 -1478 228 -1524 b 264 -1594 261 -1589 264 -1594 l 264 -1594 b 265 -1582 264 -1594 264 -1589 b 270 -1525 268 -1562 270 -1544 b 153 -1243 270 -1424 228 -1321 b -9 -1170 115 -1203 58 -1178 b -21 -1168 -14 -1170 -19 -1168 l -24 -1168 l -24 -1041 l -24 -913 l -20 -913 b -1 -927 -12 -913 -4 -918 b 142 -1121 13 -967 74 -1050 b 257 -1281 196 -1175 228 -1221 b 264 -1292 261 -1286 264 -1292 l 264 -1292 b 265 -1279 264 -1292 264 -1286 b 270 -1222 268 -1261 270 -1242 b 153 -941 270 -1121 228 -1018 b -9 -867 115 -900 58 -875 b -21 -866 -14 -867 -19 -866 l -24 -866 l -24 -738 l -24 -610 l -20 -610 b -1 -624 -12 -610 -4 -616 b 142 -818 13 -664 74 -749 b 257 -978 196 -873 228 -918 b 264 -989 261 -984 264 -989 l 264 -989 b 265 -977 264 -989 264 -984 b 270 -920 268 -959 270 -939 b 153 -638 270 -818 228 -716 b -9 -564 115 -598 58 -573 b -21 -563 -14 -564 -19 -563 l -24 -563 l -24 -435 l -24 -308 l -20 -308 b -1 -322 -12 -308 -4 -313 b 142 -516 13 -363 74 -446 b 257 -675 196 -571 228 -616 b 264 -687 261 -681 264 -687 l 264 -687 b 265 -674 264 -687 264 -681 b 270 -617 268 -656 270 -637 b 153 -335 270 -516 228 -413 b -9 -262 115 -295 58 -270 b -21 -260 -14 -262 -19 -260 l -24 -260 l -24 -133 "},v9c:{x_min:-166.0625,x_max:-25.859375,ha:0,o:"m -49 369 b -42 370 -46 369 -44 370 b -27 360 -36 370 -29 366 b -25 355 -27 359 -25 358 b -32 335 -25 351 -28 347 b -92 52 -66 248 -87 159 b -93 -1 -93 43 -93 20 b -92 -54 -93 -23 -93 -45 b -32 -337 -85 -162 -66 -251 b -25 -355 -27 -349 -25 -352 b -42 -371 -25 -365 -32 -371 b -61 -353 -50 -371 -51 -369 b -163 -63 -119 -262 -153 -165 b -166 -1 -166 -37 -166 -31 b -163 62 -166 30 -166 36 b -61 352 -153 163 -119 260 b -49 369 -54 365 -51 366 "},v9e:{x_min:0,x_max:607.0625,ha:619,o:"m 243 631 b 250 632 246 632 249 632 b 270 620 259 632 268 628 l 272 616 l 272 201 l 272 -212 l 270 -216 b 251 -229 268 -224 259 -229 b 227 -215 243 -229 240 -229 l 151 -142 b 32 -16 81 -80 53 -49 b 0 84 9 18 0 52 b 111 199 0 149 42 199 b 137 197 119 199 127 198 b 228 151 168 191 197 177 l 231 148 l 231 383 b 232 620 231 616 231 616 b 243 631 234 624 238 630 m 168 131 b 152 133 163 133 157 133 b 107 102 130 133 111 120 b 106 86 107 97 106 91 b 111 41 106 73 108 56 b 227 -152 125 -13 171 -90 l 231 -156 l 231 -37 l 231 80 l 225 87 b 168 131 210 111 190 126 m 347 631 b 353 632 348 632 351 632 b 374 620 363 632 371 628 b 375 383 375 616 375 616 l 375 148 l 377 151 b 492 199 415 183 454 199 b 537 191 507 199 522 197 b 607 84 582 176 607 134 b 583 0 607 58 598 29 b 455 -142 562 -40 533 -72 l 378 -215 b 355 -229 364 -229 362 -229 b 334 -216 345 -229 337 -224 l 333 -212 l 333 201 l 333 616 l 334 620 b 347 631 337 624 341 630 m 465 131 b 451 133 461 133 455 133 b 445 133 449 133 446 133 b 379 87 419 129 396 113 l 375 80 l 375 -37 l 375 -156 l 378 -152 b 499 81 451 -72 499 20 l 499 83 b 465 131 499 113 490 126 "},va3:{x_min:58.53125,x_max:228.671875,ha:294,o:"m 138 371 b 142 373 140 371 141 373 b 178 342 149 373 156 366 b 228 251 217 297 228 278 b 228 244 228 248 228 247 b 176 147 227 212 212 184 b 123 73 152 122 132 93 b 121 62 122 70 121 66 b 145 13 121 48 129 31 b 153 -2 151 6 153 1 b 149 -9 153 -5 152 -6 b 144 -11 148 -11 145 -11 b 129 -1 140 -11 136 -8 b 61 87 89 37 68 68 b 58 113 59 95 58 105 b 110 215 58 144 74 177 b 163 287 134 240 155 269 b 166 299 166 291 166 295 b 141 348 166 313 157 330 b 133 360 134 356 133 358 b 133 363 133 362 133 362 b 138 371 133 367 136 370 "},va5:{x_min:0,x_max:349.8125,ha:357,o:"m 88 302 b 103 303 93 302 98 303 b 202 224 149 303 191 270 b 205 199 204 216 205 208 b 178 129 205 173 196 147 l 175 126 l 182 127 b 307 249 236 142 284 190 b 313 259 308 254 311 258 b 329 267 317 265 323 267 b 349 247 340 267 349 259 b 201 -263 349 242 204 -258 b 182 -273 197 -270 190 -273 b 163 -260 174 -273 166 -269 b 161 -256 161 -259 161 -258 b 217 -59 161 -248 170 -220 b 272 129 247 43 272 127 b 272 129 272 129 272 129 b 264 122 272 129 268 126 b 140 80 227 94 183 80 b 36 115 102 80 65 91 b 0 194 10 136 0 165 b 88 302 0 244 32 292 "},va9:{x_min:-24.5,x_max:314.421875,ha:321,o:"m -24 -145 l -24 -5 l -20 -5 b 0 -23 -9 -5 -2 -12 b 27 -87 4 -38 14 -66 b 138 -220 53 -136 88 -177 b 235 -328 179 -255 208 -288 b 314 -592 287 -409 314 -501 b 292 -732 314 -639 307 -687 l 289 -742 l 294 -756 b 314 -896 307 -802 314 -849 b 292 -1035 314 -943 307 -991 l 289 -1045 l 294 -1057 b 314 -1197 307 -1104 314 -1152 b 292 -1338 314 -1246 307 -1292 l 289 -1347 l 294 -1360 b 314 -1500 307 -1407 314 -1454 b 273 -1689 314 -1565 300 -1628 b 250 -1712 265 -1710 261 -1712 b 228 -1691 236 -1712 228 -1704 l 228 -1685 l 234 -1675 b 270 -1507 258 -1621 270 -1564 b 98 -1193 270 -1381 209 -1261 b 40 -1174 76 -1179 58 -1174 b -10 -1189 24 -1174 8 -1178 b -20 -1192 -14 -1192 -16 -1192 l -24 -1192 l -24 -1052 l -24 -913 l -20 -913 b 0 -931 -9 -913 -2 -920 b 27 -995 4 -946 14 -974 b 138 -1128 53 -1043 88 -1085 b 257 -1275 190 -1172 228 -1220 b 262 -1283 259 -1279 262 -1283 l 262 -1283 b 269 -1249 264 -1282 268 -1260 b 270 -1206 270 -1233 270 -1220 b 98 -891 270 -1075 206 -957 b 40 -871 76 -877 58 -871 b -10 -886 24 -871 8 -875 b -20 -889 -14 -889 -16 -889 l -24 -889 l -24 -749 l -24 -610 l -20 -610 b 0 -628 -9 -610 -2 -617 b 27 -692 4 -644 14 -671 b 138 -825 53 -741 88 -782 b 257 -973 190 -870 228 -917 b 262 -981 259 -977 262 -981 l 262 -981 b 269 -946 264 -979 268 -957 b 270 -903 270 -931 270 -917 b 98 -588 270 -774 206 -655 b 40 -569 76 -574 58 -569 b -10 -584 24 -569 8 -574 b -20 -587 -14 -587 -16 -587 l -24 -587 l -24 -448 l -24 -308 l -20 -308 b 0 -326 -9 -308 -2 -315 b 27 -390 4 -341 14 -369 b 138 -523 53 -438 88 -480 b 257 -670 190 -567 228 -614 b 262 -678 259 -674 262 -678 b 262 -678 262 -678 262 -678 b 269 -644 264 -677 268 -656 b 270 -601 270 -628 270 -614 b 98 -285 270 -471 206 -352 b 40 -266 76 -273 58 -266 b -10 -281 24 -266 8 -272 b -20 -284 -14 -284 -16 -284 l -24 -284 l -24 -145 "},vaa:{x_min:-1.359375,x_max:752.703125,ha:768,o:"m 490 985 b 504 986 495 986 500 986 b 604 907 551 986 593 954 b 607 884 607 900 607 892 b 581 813 607 857 597 831 l 578 810 l 583 811 b 710 932 638 827 687 873 b 714 943 711 936 713 942 b 730 952 720 949 725 952 b 752 931 741 952 752 943 b 200 -946 752 927 204 -941 b 182 -957 197 -953 190 -957 b 163 -945 174 -957 166 -953 b 161 -939 161 -942 161 -942 b 217 -743 161 -931 170 -904 b 272 -555 247 -639 272 -555 b 272 -555 272 -555 272 -555 b 264 -560 272 -555 268 -557 b 140 -603 227 -589 182 -603 b 36 -567 102 -603 65 -592 b -1 -487 12 -548 -1 -517 b 17 -427 -1 -466 5 -445 b 103 -380 38 -395 70 -380 b 191 -433 137 -380 172 -398 b 205 -484 201 -448 205 -466 b 178 -553 205 -509 196 -535 l 175 -557 l 182 -555 b 307 -435 236 -539 284 -494 b 372 -213 308 -430 372 -215 b 372 -213 372 -213 372 -213 b 364 -219 372 -213 368 -216 b 240 -262 328 -247 283 -262 b 137 -226 202 -262 166 -249 b 99 -145 112 -206 99 -176 b 118 -84 99 -124 106 -104 b 204 -38 138 -54 171 -38 b 292 -91 238 -38 273 -56 b 306 -141 302 -106 306 -124 b 279 -212 306 -167 296 -194 l 276 -215 l 281 -213 b 408 -93 336 -198 385 -151 b 473 129 409 -88 473 127 b 473 129 473 129 473 129 b 465 122 473 129 469 126 b 341 80 428 94 383 80 b 236 115 303 80 266 91 b 200 195 213 136 200 165 b 217 256 200 217 206 238 b 304 303 239 287 272 303 b 393 249 338 303 374 285 b 406 199 402 234 406 217 b 379 129 406 173 397 148 l 377 126 l 382 127 b 509 248 436 142 485 190 b 574 470 510 254 574 469 b 574 470 574 470 574 470 b 566 464 574 470 570 467 b 442 421 529 435 484 421 b 337 458 404 421 367 433 b 300 538 314 477 300 508 b 318 598 300 559 306 580 b 404 645 340 630 372 645 b 494 592 439 645 475 627 b 507 541 502 577 507 559 b 480 471 507 516 498 489 l 477 467 l 483 470 b 608 589 537 485 586 531 b 675 811 611 595 675 810 b 675 811 675 811 675 811 b 666 806 675 811 671 809 b 543 763 628 777 585 763 b 438 799 504 763 468 775 b 401 878 412 820 401 849 b 490 985 401 928 434 977 "},vab:{x_min:0,x_max:272.21875,ha:278,o:"m 243 631 b 250 632 246 632 249 632 b 270 620 259 632 268 628 l 272 616 l 272 201 l 272 -212 l 270 -216 b 251 -229 268 -224 259 -229 b 227 -215 243 -229 240 -229 l 151 -142 b 32 -16 81 -80 53 -49 b 0 84 9 18 0 52 b 111 199 0 149 42 199 b 137 197 119 199 127 198 b 228 151 168 191 197 177 l 231 148 l 231 383 b 232 620 231 616 231 616 b 243 631 234 624 238 630 m 168 131 b 152 133 163 133 157 133 b 107 102 130 133 111 120 b 106 86 107 97 106 91 b 111 41 106 73 108 56 b 227 -152 125 -13 171 -90 l 231 -156 l 231 -37 l 231 80 l 225 87 b 168 131 210 111 190 126 "},vad:{x_min:0,x_max:873.828125,ha:892,o:"m 0 0 l 0 703 l 81 703 l 164 703 l 164 0 l 164 -705 l 81 -705 l 0 -705 l 0 0 m 225 0 l 225 703 l 246 703 l 268 703 l 268 366 l 268 30 l 274 36 b 314 79 284 44 302 63 b 413 302 357 137 392 213 b 432 327 419 324 421 327 b 449 306 443 327 447 322 b 611 115 457 195 529 115 b 651 122 624 115 638 117 b 728 316 705 140 724 188 b 729 388 728 342 729 366 b 671 635 729 533 711 602 b 581 662 649 652 616 662 b 477 637 545 662 510 653 l 475 635 l 477 634 b 503 627 488 632 495 631 b 545 556 532 612 545 584 b 491 480 545 524 526 491 b 465 474 481 476 473 474 b 379 563 417 474 379 516 b 389 602 379 576 382 588 b 541 691 409 641 479 681 b 582 694 555 692 568 694 b 865 462 714 694 834 598 b 873 392 871 440 873 416 b 865 317 873 367 871 341 b 639 84 839 194 748 101 b 612 83 630 83 620 83 b 511 116 577 83 543 94 b 504 120 509 119 506 120 b 504 120 504 120 504 120 b 469 59 504 120 488 93 l 432 -1 l 469 -61 b 504 -122 488 -94 504 -122 b 504 -122 504 -122 504 -122 b 511 -117 506 -122 509 -120 b 612 -84 543 -95 577 -84 b 665 -91 630 -84 647 -87 b 869 -338 771 -122 850 -216 b 873 -392 872 -356 873 -374 b 798 -595 873 -469 847 -539 b 581 -695 741 -662 660 -695 b 406 -626 517 -695 454 -671 b 381 -563 389 -607 381 -585 b 465 -477 381 -519 413 -477 b 545 -559 514 -477 545 -519 b 503 -628 545 -587 532 -613 b 477 -635 495 -632 488 -634 l 475 -637 l 477 -638 b 581 -663 510 -655 545 -663 b 671 -637 616 -663 649 -653 b 729 -391 711 -603 729 -534 b 728 -317 729 -367 728 -344 b 623 -117 722 -173 698 -124 b 611 -116 619 -116 615 -116 b 449 -308 528 -116 457 -198 b 432 -328 447 -323 443 -328 b 413 -303 421 -328 419 -326 b 314 -80 392 -215 357 -138 b 274 -37 302 -65 284 -45 l 268 -31 l 268 -367 l 268 -705 l 246 -705 l 225 -705 l 225 0 "},vb1:{x_min:78.9375,x_max:485.921875,ha:417,o:"m 362 378 b 378 380 367 380 372 380 b 472 348 415 380 453 367 b 485 315 481 338 485 327 b 462 273 485 298 477 281 b 439 267 454 269 446 267 b 398 290 424 267 409 274 b 344 319 385 309 364 319 b 281 269 315 319 289 301 b 279 262 280 266 279 262 b 276 256 279 260 277 258 b 274 249 276 254 274 251 b 238 127 273 248 257 192 b 201 4 217 61 201 5 b 166 -1 198 -1 200 -1 b 153 -1 163 -1 157 -1 b 141 -1 148 -1 144 -1 b 104 4 106 -1 107 -1 b 104 6 104 5 104 5 b 142 144 104 13 110 34 b 182 278 164 219 181 276 b 183 288 182 281 182 285 b 185 302 185 292 185 298 b 164 330 185 317 176 328 b 159 330 163 330 161 330 b 102 302 140 330 119 320 b 91 294 95 295 93 294 b 88 294 91 294 89 294 b 78 303 83 294 78 298 b 81 312 78 306 78 309 b 200 373 106 347 160 373 b 215 371 205 373 209 371 b 266 335 235 367 254 353 b 269 331 268 333 269 331 b 269 331 269 331 269 331 b 273 335 269 331 270 334 b 362 378 298 359 330 376 "},vb3:{x_min:0,x_max:227.3125,ha:232,o:"m 91 213 b 100 215 93 215 96 215 b 227 58 167 215 224 144 b 227 52 227 56 227 54 b 61 -201 227 -43 164 -138 b 29 -216 44 -212 36 -216 b 23 -210 27 -216 24 -213 b 21 -205 21 -208 21 -206 b 34 -192 21 -201 25 -197 b 122 -55 89 -161 122 -106 b 104 6 122 -33 117 -12 l 103 9 l 96 9 b 4 79 57 9 17 38 b 0 112 1 90 0 101 b 91 213 0 163 36 209 "},vb4:{x_min:-597.53125,x_max:596.171875,ha:608,o:"m -533 324 b -525 327 -530 326 -528 327 b -504 305 -514 327 -504 317 b -504 305 -504 305 -504 305 b -513 284 -504 299 -504 299 b -556 112 -541 226 -556 167 b -545 33 -556 84 -552 58 b -524 -20 -541 15 -532 -9 l -522 -23 l -491 15 l -413 111 b -355 174 -367 169 -363 174 b -351 174 -353 174 -352 174 b -254 86 -343 174 -348 179 b -168 -1 -208 37 -168 -1 b -100 84 -168 -1 -137 37 b -23 173 -28 173 -29 172 b -19 174 -21 174 -20 174 b -8 173 -14 174 -10 173 b 80 86 -5 172 13 151 b 166 -1 127 37 166 -1 b 235 84 166 -1 197 37 b 311 173 306 173 304 172 b 317 174 313 174 314 174 b 326 173 319 174 323 173 b 490 11 329 172 366 134 l 502 -1 l 530 34 b 568 76 560 72 563 74 b 575 77 570 77 573 77 b 596 56 586 77 596 68 b 594 48 596 54 596 51 b 417 -172 592 41 424 -166 b 405 -176 415 -174 409 -176 b 396 -174 401 -176 398 -176 b 307 -87 393 -173 372 -152 b 221 -1 259 -38 221 -1 b 152 -86 221 -1 190 -38 b 76 -176 81 -174 83 -173 b 70 -176 74 -176 73 -176 b 61 -174 66 -176 62 -174 b -27 -87 58 -173 38 -152 b -114 -1 -74 -38 -112 -1 b -182 -86 -114 -1 -145 -38 b -258 -176 -253 -174 -253 -173 b -264 -176 -259 -176 -262 -176 b -274 -174 -268 -176 -272 -174 b -438 -11 -277 -173 -348 -102 l -449 0 l -479 -37 b -524 -80 -513 -80 -514 -80 l -524 -80 b -553 -52 -534 -80 -540 -74 b -597 109 -583 -8 -597 48 b -560 280 -597 165 -585 224 b -533 324 -548 310 -540 322 "},vb6:{x_min:0,x_max:556.6875,ha:568,o:"m 289 545 b 298 546 292 545 295 546 b 318 533 306 546 315 541 b 319 428 319 530 319 528 l 319 327 l 334 327 b 526 223 412 326 485 285 b 543 172 537 206 543 190 b 447 76 543 122 503 76 b 445 76 446 76 446 76 b 359 165 394 77 359 119 b 368 205 359 179 362 192 b 441 251 382 233 412 251 b 455 249 446 251 451 251 b 460 248 458 249 460 248 b 460 248 460 248 460 248 b 454 254 460 249 458 251 b 334 295 419 280 378 294 l 319 295 l 319 4 l 319 -287 l 321 -285 b 328 -285 322 -285 325 -285 b 524 -99 424 -277 507 -198 b 541 -79 526 -84 530 -79 b 556 -97 551 -79 556 -84 b 548 -133 556 -105 553 -117 b 334 -317 521 -233 434 -306 b 322 -319 329 -317 323 -317 l 319 -319 l 319 -424 b 319 -471 319 -444 319 -459 b 313 -541 319 -544 318 -535 b 298 -548 308 -545 303 -548 b 279 -534 289 -548 281 -542 b 277 -424 277 -531 277 -530 l 277 -317 l 273 -317 b 13 -95 153 -305 51 -217 b 0 2 4 -62 0 -29 b 182 295 0 126 66 238 b 274 324 210 309 249 320 l 277 324 l 277 427 b 279 533 277 528 277 530 b 289 545 281 538 285 542 m 277 2 b 277 291 277 161 277 291 b 268 288 277 291 273 290 b 144 1 179 265 144 184 b 276 -284 144 -199 175 -267 l 277 -285 l 277 2 "},vb7:{x_min:-176.9375,x_max:251.8125,ha:257,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 503 20 616 20 614 b 20 391 20 442 20 391 b 84 424 20 391 49 406 l 147 456 l 152 456 b 153 456 153 456 153 456 b 175 435 166 456 175 446 b 172 427 175 433 174 430 b 92 380 170 420 172 421 l 20 342 l 20 245 l 20 148 l 21 151 b 137 199 59 183 99 199 b 182 191 152 199 167 197 b 251 84 227 176 251 134 b 228 0 251 58 243 29 b 100 -142 206 -40 178 -72 l 23 -215 b 0 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 b -21 54 -21 -212 -21 -212 b -21 322 -21 201 -21 322 b -85 290 -21 322 -50 308 l -148 256 l -153 256 b -155 256 -155 256 -155 256 b -176 277 -167 256 -176 266 b -174 285 -176 280 -175 283 b -93 333 -171 294 -174 292 l -21 370 l -21 494 b -20 620 -21 616 -21 616 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 "},vb9:{x_min:-122.5,x_max:121.140625,ha:124,o:"m -16 145 b 0 147 -10 147 -5 147 b 121 -1 66 147 121 77 b 114 -49 121 -16 118 -33 b -1 -148 95 -112 47 -148 b -85 -106 -31 -148 -61 -134 b -122 -1 -110 -76 -122 -38 b -16 145 -122 68 -81 134 m 12 111 b 0 113 8 113 4 113 b -68 22 -29 113 -61 73 b -70 0 -69 15 -70 6 b -13 -113 -70 -49 -47 -98 b -1 -115 -9 -115 -5 -115 b 63 -40 24 -115 53 -83 b 68 -1 66 -27 68 -15 b 12 111 68 48 46 97 "},vba:{x_min:-118.421875,x_max:597.53125,ha:381,o:"m 460 574 b 464 574 461 574 462 574 b 488 574 470 574 481 574 b 500 573 491 574 498 574 b 594 503 543 570 588 538 b 597 488 596 498 597 494 b 528 417 597 449 564 417 b 502 423 519 417 510 419 b 465 481 477 434 465 458 b 488 528 465 499 472 516 b 490 530 490 530 490 530 b 490 530 490 530 490 530 b 468 517 488 530 475 523 b 349 340 419 485 377 420 b 347 330 348 334 347 330 b 383 328 347 328 363 328 b 428 326 423 328 424 328 b 442 302 438 320 442 312 b 430 281 442 294 438 285 b 385 276 424 277 426 276 l 377 276 l 332 276 l 330 269 b 178 -117 303 126 250 -9 b 1 -249 129 -194 69 -237 b -20 -251 -6 -251 -13 -251 b -114 -187 -65 -251 -100 -227 b -118 -156 -117 -177 -118 -166 b -51 -84 -118 -116 -91 -84 b -31 -87 -46 -84 -39 -86 b 16 -152 0 -95 16 -124 b -12 -205 16 -173 8 -194 b -16 -208 -14 -206 -16 -208 b -14 -208 -16 -208 -14 -208 b -9 -206 -14 -208 -12 -208 b 74 -124 23 -197 54 -166 b 172 224 98 -79 125 22 b 185 276 178 252 183 274 b 185 276 185 276 185 276 b 141 276 185 276 181 276 b 91 280 96 276 96 276 b 77 302 83 285 77 294 b 91 326 77 312 83 320 b 148 328 95 328 96 328 l 198 330 l 202 341 b 460 574 249 473 351 566 "},vbf:{x_min:-53.078125,x_max:513.140625,ha:485,o:"m 185 383 b 196 384 187 383 191 384 b 277 334 230 384 259 365 b 288 301 281 324 288 306 b 288 297 288 298 288 297 b 294 302 289 297 291 299 b 394 370 323 338 367 367 b 404 371 398 370 401 371 b 510 272 453 371 498 328 b 513 237 513 262 513 251 b 507 172 513 217 511 192 b 326 -34 487 59 412 -26 b 314 -36 322 -36 318 -36 b 274 -24 298 -36 283 -31 l 265 -16 b 224 44 246 -1 232 20 b 223 49 224 47 223 49 b 223 49 223 49 223 49 b 149 -197 221 48 149 -194 b 149 -198 149 -197 149 -198 b 170 -210 149 -202 155 -205 b 187 -215 174 -210 175 -212 b 204 -231 201 -219 204 -222 b 197 -245 204 -240 202 -242 l 194 -248 l 76 -248 l -42 -248 l -46 -245 b -53 -231 -51 -242 -53 -240 b -35 -215 -53 -222 -49 -217 b -13 -210 -21 -212 -20 -212 b -6 -208 -10 -209 -8 -208 b 0 -206 -6 -208 -2 -206 b 25 -188 13 -201 21 -195 b 163 280 28 -183 163 276 b 166 291 163 283 164 287 b 167 302 167 295 167 299 b 155 324 167 315 161 324 b 155 324 155 324 155 324 b 65 230 125 322 85 280 b 53 215 61 217 58 215 b 51 215 53 215 51 215 b 42 224 46 215 42 217 b 57 263 42 231 47 244 b 140 360 77 305 104 337 b 152 370 144 365 149 369 b 185 383 157 376 172 381 m 374 306 b 366 308 371 308 368 308 b 300 273 348 308 321 294 b 284 254 288 262 287 259 b 280 242 283 249 281 245 b 257 169 279 240 270 213 l 236 98 l 236 93 b 251 48 238 77 243 61 b 279 27 258 37 272 27 b 281 27 279 27 280 27 b 291 31 281 27 287 30 b 396 170 334 52 378 109 b 406 247 402 197 406 224 b 401 277 406 259 405 270 b 374 306 397 290 383 303 "},vc3:{x_min:-10.890625,x_max:299.4375,ha:294,o:"m 136 460 b 142 462 137 462 140 462 b 166 449 152 462 161 456 b 171 428 168 446 168 445 b 288 131 194 322 238 209 b 298 115 295 120 296 117 b 299 106 298 112 299 109 b 273 81 299 91 287 81 b 255 86 268 81 261 83 b 155 116 225 104 183 116 l 152 116 l 149 108 b 141 83 148 102 144 91 b 134 48 137 69 134 58 b 149 9 134 34 140 24 b 153 -1 152 5 153 1 b 149 -9 153 -5 152 -6 b 144 -11 148 -11 147 -11 b 122 2 138 -11 133 -6 b 95 61 104 20 95 38 b 107 108 95 74 99 90 b 108 113 107 111 108 112 b 107 113 108 113 108 113 b 102 113 106 113 104 113 b 31 86 76 108 53 98 b 14 80 24 81 20 80 b -10 106 0 80 -10 91 b 0 131 -10 115 -9 116 b 115 430 49 209 91 317 b 136 460 119 451 123 456 "},vd0:{x_min:-10.890625,x_max:299.4375,ha:294,o:"m 44 174 b 51 174 47 174 49 174 b 68 173 55 174 61 174 l 287 112 l 551 40 b 615 20 617 22 609 23 b 626 0 622 16 626 8 b 615 -22 626 -9 622 -18 b 613 -23 613 -23 613 -23 b 613 -23 613 -23 613 -23 b 287 -113 613 -24 597 -29 l 68 -174 b 53 -176 61 -176 57 -176 b 39 -172 47 -176 43 -174 b 27 -151 31 -167 27 -159 b 39 -129 27 -141 31 -133 b 230 -74 43 -124 20 -131 l 370 -36 l 468 -9 b 498 0 484 -4 498 -1 b 468 8 498 0 484 2 l 370 34 l 230 73 b 40 126 28 129 43 124 b 27 149 31 131 27 140 b 44 174 27 161 34 170 m 205 110 l 205 300 b 205 330 245 330 245 300 l 245 300 l 245 -300 b 245 -330 205 -330 205 -300 l 205 -300 l 205 110 l 345 90 m 345 90 l 345 330 b 345 360 385 360 385 330 l 385 330 l 385 -270 b 385 -300 345 -300 345 -270 l 345 -270 l 345 90 "},vd1:{x_min:-20,x_max:320,ha:257,o:"m -8 200 b -8 210 8 200 16 200 l 20 148 -199 l 23 -615 b 0 -629 9 -629 6 -629 l -21 -612 l -21 -201 l -21 216 l -20 200 m 16 200 l 310 0 l 240 0 l 16 140 l 16 -120 l 240 0 l 310 0 l 16 -200 "},vd2:{x_min:0,x_max:430.75,ha:386,o:"m 0 200 l 0 -200 l 430 -200 l 430 200 l 0 200 "},vd3:{x_min:0,x_max:430.75,ha:386,o:"m 0 200 l 0 -200 l 430 -200 l 430 200 l 0 200 l 50 150 l 380 150 l 380 -150 l 50 -150 l 50 150 "},vd4:{x_min:0,x_max:430.75,ha:360,o:"m 0 150 l 0 -150 l 430 -150 l 430 150 l 0 150 "},vd5:{x_min:0,x_max:430.75,ha:360,o:"m 0 150 l 0 -150 l 430 -150 l 430 150 l 0 150 l 50 100 l 380 100 l 380 -100 l 50 -100 l 50 100"}},cssFontWeight:"normal",ascender:1903,underlinePosition:-125,cssFontStyle:"normal",boundingBox:{yMin:-2065.375,xMin:-695.53125,yMax:1901.578125,xMax:1159.671875},resolution:1e3,descender:-2066,familyName:"VexFlow-18",lineHeight:4093,underlineThickness:50};function R(t,e,n,i){!function(t){if(!(t instanceof R))throw new TypeError("Cannot call a class as a function")}(this),this.x=t,this.y=e,this.w=n,this.h=i}function L(t){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function N(t,e,n){return e&&I(t.prototype,e),n&&I(t,n),t}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(t,e,n,i,r,o){var s,a,u,l=0;function c(){return e+t[l++]*i}function h(){return n+t[l++]*r}for(;l<t.length;)switch(s=t[l++]){case"m":case"l":o[s](c(),h());break;case"q":a=c(),u=h(),o.q(c(),h(),a,u);break;case"b":a=c(),u=h(),o.b(c(),h(),c(),h(),a,u)}}var D=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F(t,e)}(j,x),N(j,null,[{key:"loadMetrics",value:function(t,e,n){var i=t.glyphs[e];if(!i)throw new C.RERR("BadGlyph","Glyph ".concat(e," does not exist in font."));var r,o=i.x_min,s=i.x_max,a=i.ha;if(i.o)return n?i.cached_outline?r=i.cached_outline:(r=i.o.split(" "),i.cached_outline=r):(i.cached_outline&&delete i.cached_outline,r=i.o.split(" ")),{x_min:o,x_max:s,ha:a,outline:r};throw new C.RERR("BadGlyph","Glyph ".concat(e," has no outline defined."))}},{key:"renderGlyph",value:function(t,e,n,i,r,o){var s=72*i/(100*M.resolution),a=j.loadMetrics(M,r,!o);j.renderOutline(t,a.outline,s,e,n)}},{key:"renderOutline",value:function(t,e,n,i,r){t.beginPath(),t.moveTo(i,r),B(e,i,r,n,-n,{m:t.moveTo.bind(t),l:t.lineTo.bind(t),q:t.quadraticCurveTo.bind(t),b:t.bezierCurveTo.bind(t)}),t.fill()}},{key:"getOutlineBoundingBox",value:function(t,e,n,i){var r=new E;return B(t,n,i,e,-e,{m:r.addPoint.bind(r),l:r.addPoint.bind(r),q:r.addQuadraticCurve.bind(r),b:r.addBezierCurve.bind(r)}),new O(r.x1,r.y1,r.width(),r.height())}}]),N(j,[{key:"setOptions",value:function(t){C.Merge(this.options,t),this.reset()}},{key:"setPoint",value:function(t){return this.point=t,this}},{key:"setStave",value:function(t){return this.stave=t,this}},{key:"setXShift",value:function(t){return this.x_shift=t,this}},{key:"setYShift",value:function(t){return this.y_shift=t,this}},{key:"reset",value:function(){this.scale=72*this.point/(100*this.options.font.resolution),this.metrics=j.loadMetrics(this.options.font,this.code,this.options.cache),this.bbox=j.getOutlineBoundingBox(this.metrics.outline,this.scale,0,0)}},{key:"getMetrics",value:function(){if(!this.metrics)throw new C.RuntimeError("BadGlyph","Glyph ".concat(this.code," is not initialized."));return{x_min:this.metrics.x_min*this.scale,x_max:this.metrics.x_max*this.scale,width:this.bbox.getW(),height:this.bbox.getH()}}},{key:"setOriginX",value:function(t){var e=this.bbox,n=(t-Math.abs(e.getX()/e.getW()))*e.getW();this.originShift.x=-n}},{key:"setOriginY",value:function(t){var e=this.bbox,n=(t-Math.abs(e.getY()/e.getH()))*e.getH();this.originShift.y=-n}},{key:"setOrigin",value:function(t,e){this.setOriginX(t),this.setOriginY(e)}},{key:"render",value:function(t,e,n){if(!this.metrics)throw new C.RuntimeError("BadGlyph","Glyph ".concat(this.code," is not initialized."));var i=this.metrics.outline,r=this.scale;this.setRendered(),this.applyStyle(t),j.renderOutline(t,i,r,e+this.originShift.x,n+this.originShift.y),this.restoreStyle(t)}},{key:"renderToStave",value:function(t){if(this.checkContext(),!this.metrics)throw new C.RuntimeError("BadGlyph","Glyph ".concat(this.code," is not initialized."));if(!this.stave)throw new C.RuntimeError("GlyphError","No valid stave");var e=this.metrics.outline,n=this.scale;this.setRendered(),this.applyStyle(),j.renderOutline(this.context,e,n,t+this.x_shift,this.stave.getYForGlyphs()+this.y_shift),this.restoreStyle()}}]),j);function j(t,e,n){var i,r,o;return function(t){if(!(t instanceof j))throw new TypeError("Cannot call a class as a function")}(this),(r=this,i=!(o=A(j).call(this))||"object"!==L(o)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r):o).setAttribute("type","Glyph"),i.code=t,i.point=e,i.options={cache:!0,font:M},i.metrics=null,i.x_shift=0,i.y_shift=0,i.originShift={x:0,y:0},n?i.setOptions(n):i.reset(),i}function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var G={STEM_WIDTH:1.5,STEM_HEIGHT:35,STAVE_LINE_THICKNESS:1,RESOLUTION:16384,DEFAULT_NOTATION_FONT_SCALE:39,DEFAULT_TABLATURE_FONT_SCALE:39,SLASH_NOTEHEAD_WIDTH:15,TEXT_HEIGHT_OFFSET_HACK:1,IsKerned:!0};function W(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function U(t,e,n){return e&&W(t.prototype,e),n&&W(t,n),t}G.clefProperties=function(t){if(!t)throw new C.RERR("BadArgument","Invalid clef: "+t);var e=G.clefProperties.values[t];if(!e)throw new C.RERR("BadArgument","Invalid clef: "+t);return e},G.clefProperties.values={treble:{line_shift:0},bass:{line_shift:6},tenor:{line_shift:4},alto:{line_shift:3},soprano:{line_shift:1},percussion:{line_shift:0},"mezzo-soprano":{line_shift:2},"baritone-c":{line_shift:5},"baritone-f":{line_shift:5},subbass:{line_shift:7},french:{line_shift:-1}},G.keyProperties=function(t,e,n){void 0===e&&(e="treble");var i={octave_shift:0};"object"===V(n)&&C.Merge(i,n);var r=t.split("/");if(r.length<2)throw new C.RERR("BadArguments","Key must have note + octave and an optional glyph: ".concat(t));var o=r[0].toUpperCase(),s=G.keyProperties.note_values[o];if(!s)throw new C.RERR("BadArguments","Invalid key name: "+o);s.octave&&(r[1]=s.octave);var a=parseInt(r[1],10),u=(7*(a+=-1*i.octave_shift)-28+s.index)/2,l=0;(u+=G.clefProperties(e).line_shift)<=0&&2*u%2==0&&(l=1),6<=u&&2*u%2==0&&(l=-1);var c=void 0!==s.int_val?12*a+s.int_val:null,h=s.code,f=s.shift_right;if(2<r.length&&r[2]){var p=r[2].toUpperCase(),d=G.keyProperties.note_glyph[p];d&&(h=d.code,f=d.shift_right)}return{key:o,octave:a,line:u,int_value:c,accidental:s.accidental,code:h,stroke:l,shift_right:f,displaced:!1}},G.keyProperties.note_values={C:{index:0,int_val:0,accidental:null},CN:{index:0,int_val:0,accidental:"n"},"C#":{index:0,int_val:1,accidental:"#"},"C##":{index:0,int_val:2,accidental:"##"},CB:{index:0,int_val:-1,accidental:"b"},CBB:{index:0,int_val:-2,accidental:"bb"},D:{index:1,int_val:2,accidental:null},DN:{index:1,int_val:2,accidental:"n"},"D#":{index:1,int_val:3,accidental:"#"},"D##":{index:1,int_val:4,accidental:"##"},DB:{index:1,int_val:1,accidental:"b"},DBB:{index:1,int_val:0,accidental:"bb"},E:{index:2,int_val:4,accidental:null},EN:{index:2,int_val:4,accidental:"n"},"E#":{index:2,int_val:5,accidental:"#"},"E##":{index:2,int_val:6,accidental:"##"},EB:{index:2,int_val:3,accidental:"b"},EBB:{index:2,int_val:2,accidental:"bb"},F:{index:3,int_val:5,accidental:null},FN:{index:3,int_val:5,accidental:"n"},"F#":{index:3,int_val:6,accidental:"#"},"F##":{index:3,int_val:7,accidental:"##"},FB:{index:3,int_val:4,accidental:"b"},FBB:{index:3,int_val:3,accidental:"bb"},G:{index:4,int_val:7,accidental:null},GN:{index:4,int_val:7,accidental:"n"},"G#":{index:4,int_val:8,accidental:"#"},"G##":{index:4,int_val:9,accidental:"##"},GB:{index:4,int_val:6,accidental:"b"},GBB:{index:4,int_val:5,accidental:"bb"},A:{index:5,int_val:9,accidental:null},AN:{index:5,int_val:9,accidental:"n"},"A#":{index:5,int_val:10,accidental:"#"},"A##":{index:5,int_val:11,accidental:"##"},AB:{index:5,int_val:8,accidental:"b"},ABB:{index:5,int_val:7,accidental:"bb"},B:{index:6,int_val:11,accidental:null},BN:{index:6,int_val:11,accidental:"n"},"B#":{index:6,int_val:12,accidental:"#"},"B##":{index:6,int_val:13,accidental:"##"},BB:{index:6,int_val:10,accidental:"b"},BBB:{index:6,int_val:9,accidental:"bb"},R:{index:6,int_val:9,rest:!0},X:{index:6,accidental:"",octave:4,code:"v3e",shift_right:5.5}},G.keyProperties.note_glyph={D0:{code:"v27",shift_right:-.5},D1:{code:"v2d",shift_right:-.5},D2:{code:"v22",shift_right:-.5},D3:{code:"v70",shift_right:-.5},T0:{code:"v49",shift_right:-2,stem_up_y_offset:-4,stem_down_y_offset:4},T1:{code:"v93",shift_right:.5,stem_up_y_offset:-4,stem_down_y_offset:4},T2:{code:"v40",shift_right:.5,stem_up_y_offset:-4,stem_down_y_offset:4},T3:{code:"v7d",shift_right:.5,stem_up_y_offset:-4,stem_down_y_offset:4},X0:{code:"v92",shift_right:-2,stem_up_y_offset:4,stem_down_y_offset:4},X1:{code:"v95",shift_right:-.5,stem_up_y_offset:4,stem_down_y_offset:4},X2:{code:"v3e",shift_right:.5,stem_up_y_offset:4,stem_down_y_offset:4},X3:{code:"v3b",shift_right:-2,stem_up_y_offset:2,stem_down_y_offset:2},S1:{code:"vd3",shift_right:0},S2:{code:"vd2",shift_right:0},R1:{code:"vd5",shift_right:0},R2:{code:"vd4",shift_right:0}},G.integerToNote=function(t){if(void 0===t)throw new C.RERR("BadArguments","Undefined integer for integerToNote");if(t<-2)throw new C.RERR("BadArguments","integerToNote requires integer > -2: ".concat(t));var e=G.integerToNote.table[t];if(!e)throw new C.RERR("BadArguments","Unknown note value for integer: ".concat(t));return e},G.integerToNote.table={0:"C",1:"C#",2:"D",3:"D#",4:"E",5:"F",6:"F#",7:"G",8:"G#",9:"A",10:"A#",11:"B"},G.tabToGlyph=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=null,i=0,r=0;if("X"===t.toString().toUpperCase()){var o=new D("v7f",G.DEFAULT_TABLATURE_FONT_SCALE).getMetrics();n="v7f",i=o.width,r=-o.height/2}else i=G.textWidth(t.toString());return{text:t,code:n,getWidth:function(){return i*e},shift_y:r}},G.textWidth=function(t){return 7*t.toString().length},G.articulationCodes=function(t){return G.articulationCodes.articulations[t]},G.articulationCodes.articulations={"a.":{code:"v23",between_lines:!0},av:{code:"v28",between_lines:!0},"a>":{code:"v42",between_lines:!0},"a-":{code:"v25",between_lines:!0},"a^":{code:"va",between_lines:!1},"a+":{code:"v8b",between_lines:!1},ao:{code:"v94",between_lines:!1},ah:{code:"vb9",between_lines:!1},"a@a":{code:"v43",between_lines:!1},"a@u":{code:"v5b",between_lines:!1},"a|":{code:"v75",between_lines:!1},am:{code:"v97",between_lines:!1},"a,":{code:"vb3",between_lines:!1}},G.accidentalCodes=function(t){return G.accidentalCodes.accidentals[t]},G.accidentalCodes.accidentals={"#":{code:"v18",parenRightPaddingAdjustment:-1},"##":{code:"v7f",parenRightPaddingAdjustment:-1},b:{code:"v44",parenRightPaddingAdjustment:-2},bb:{code:"v26",parenRightPaddingAdjustment:-2},n:{code:"v4e",parenRightPaddingAdjustment:-1},"{":{code:"v9c",parenRightPaddingAdjustment:-1},"}":{code:"v84",parenRightPaddingAdjustment:-1},db:{code:"v9e",parenRightPaddingAdjustment:-1},d:{code:"vab",parenRightPaddingAdjustment:0},bbs:{code:"v90",parenRightPaddingAdjustment:-1},"++":{code:"v51",parenRightPaddingAdjustment:-1},"+":{code:"v78",parenRightPaddingAdjustment:-1},"+-":{code:"v8d",parenRightPaddingAdjustment:-1},"++-":{code:"v7a",parenRightPaddingAdjustment:-1},bs:{code:"vb7",parenRightPaddingAdjustment:-1},bss:{code:"v39",parenRightPaddingAdjustment:-1},o:{code:"vd0",parenRightPaddingAdjustment:-1},k:{code:"vd1",parenRightPaddingAdjustment:-1}},G.accidentalColumnsTable={1:{a:[1],b:[1]},2:{a:[1,2]},3:{a:[1,3,2],b:[1,2,1],second_on_bottom:[1,2,3]},4:{a:[1,3,4,2],b:[1,2,3,1],spaced_out_tetrachord:[1,2,1,2]},5:{a:[1,3,5,4,2],b:[1,2,4,3,1],spaced_out_pentachord:[1,2,3,2,1],very_spaced_out_pentachord:[1,2,1,2,1]},6:{a:[1,3,5,6,4,2],b:[1,2,4,5,3,1],spaced_out_hexachord:[1,3,2,1,3,2],very_spaced_out_hexachord:[1,2,1,2,1,2]}},G.ornamentCodes=function(t){return G.ornamentCodes.ornaments[t]},G.ornamentCodes.ornaments={mordent:{code:"v1e"},mordent_inverted:{code:"v45"},turn:{code:"v72"},turn_inverted:{code:"v33"},tr:{code:"v1f"},upprall:{code:"v60"},downprall:{code:"vb4"},prallup:{code:"v6d"},pralldown:{code:"v2c"},upmordent:{code:"v29"},downmordent:{code:"v68"},lineprall:{code:"v20"},prallprall:{code:"v86"}},G.keySignature=function(t){var e=G.keySignature.keySpecs[t];if(!e)throw new C.RERR("BadKeySignature","Bad key signature spec: '".concat(t,"'"));if(!e.acc)return[];for(var n=G.keySignature.accidentalList(e.acc),i=[],r=0;r<e.num;++r){var o=n[r];i.push({type:e.acc,line:o})}return i},G.keySignature.keySpecs={C:{acc:null,num:0},Am:{acc:null,num:0},F:{acc:"b",num:1},Dm:{acc:"b",num:1},Bb:{acc:"b",num:2},Gm:{acc:"b",num:2},Eb:{acc:"b",num:3},Cm:{acc:"b",num:3},Ab:{acc:"b",num:4},Fm:{acc:"b",num:4},Db:{acc:"b",num:5},Bbm:{acc:"b",num:5},Gb:{acc:"b",num:6},Ebm:{acc:"b",num:6},Cb:{acc:"b",num:7},Abm:{acc:"b",num:7},G:{acc:"#",num:1},Em:{acc:"#",num:1},D:{acc:"#",num:2},Bm:{acc:"#",num:2},A:{acc:"#",num:3},"F#m":{acc:"#",num:3},E:{acc:"#",num:4},"C#m":{acc:"#",num:4},B:{acc:"#",num:5},"G#m":{acc:"#",num:5},"F#":{acc:"#",num:6},"D#m":{acc:"#",num:6},"C#":{acc:"#",num:7},"A#m":{acc:"#",num:7}},G.unicode={sharp:String.fromCharCode(parseInt("266F",16)),flat:String.fromCharCode(parseInt("266D",16)),natural:String.fromCharCode(parseInt("266E",16)),triangle:String.fromCharCode(parseInt("25B3",16)),"o-with-slash":String.fromCharCode(parseInt("00F8",16)),degrees:String.fromCharCode(parseInt("00B0",16)),circle:String.fromCharCode(parseInt("25CB",16))},G.keySignature.accidentalList=function(t){return{b:[2,.5,2.5,1,3,1.5,3.5],"#":[0,1.5,-.5,1,2.5,.5,2]}[t]},G.parseNoteDurationString=function(t){if("string"!=typeof t)return null;var e=/(\d*\/?\d+|[a-z])(d*)([nrhms]|$)/.exec(t);if(!e)return null;var n=e[1],i=e[2].length,r=e[3];return 0===r.length&&(r="n"),{duration:n,dots:i,type:r}},G.parseNoteData=function(t){var e=t.duration,n=G.parseNoteDurationString(e);if(!n)return null;var i=G.durationToTicks(n.duration);if(null==i)return null;var r=t.type;if(r){if("n"!==r&&"r"!==r&&"h"!==r&&"m"!==r&&"s"!==r)return null}else{if(r=n.type,void 0!==t.keys){var o=t.keys[0].split("/");o&&3===o.length&&(r=o[2])}r=r||"n"}var s=t.dots?t.dots:n.dots;if("number"!=typeof s)return null;for(var a=i,u=0;u<s;u++){if(a<=1)return null;i+=a/=2}return{duration:n.duration,type:r,dots:s,ticks:i}},G.sanitizeDuration=function(t){var e=G.durationAliases[t];if(void 0!==e&&(t=e),void 0===G.durationToTicks.durations[t])throw new C.RERR("BadArguments","The provided duration is not valid: ".concat(t));return t},G.durationToFraction=function(t){return(new p).parse(G.sanitizeDuration(t))},G.durationToNumber=function(t){return G.durationToFraction(t).value()},G.durationToTicks=function(t){t=G.sanitizeDuration(t);var e=G.durationToTicks.durations[t];return void 0===e?null:e},G.durationToTicks.durations={"1/2":2*G.RESOLUTION,1:G.RESOLUTION/1,2:G.RESOLUTION/2,4:G.RESOLUTION/4,8:G.RESOLUTION/8,16:G.RESOLUTION/16,32:G.RESOLUTION/32,64:G.RESOLUTION/64,128:G.RESOLUTION/128,256:G.RESOLUTION/256},G.durationAliases={w:"1",h:"2",q:"4",b:"256"},G.durationToGlyph=function(t,e){t=G.sanitizeDuration(t);var n=G.durationToGlyph.duration_codes[t];if(void 0===n)return null;e=e||"n";var i=n.type[e];if(void 0===i){var r=G.keyProperties.note_glyph[e.toUpperCase()];if(void 0===r)return null;i={code_head:r.code,stem_up_y_offset:r.stem_up_y_offset,stem_down_y_offset:r.stem_down_y_offset}}return C.Merge(C.Merge({},n.common),i)},G.durationToGlyph.duration_codes={"1/2":{common:{getWidth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:G.DEFAULT_NOTATION_FONT_SCALE;return new D(this.code_head||"v53",t).getMetrics().width},stem:!1,stem_offset:0,flag:!1,stem_up_extension:-G.STEM_HEIGHT,stem_down_extension:-G.STEM_HEIGHT,tabnote_stem_up_extension:-G.STEM_HEIGHT,tabnote_stem_down_extension:-G.STEM_HEIGHT,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"v53"},h:{code_head:"v59"},m:{code_head:"vf",stem_offset:0},r:{code_head:"v31",rest:!0,position:"B/5",dot_shiftY:.5},s:{getWidth:function(){return G.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},1:{common:{getWidth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:G.DEFAULT_NOTATION_FONT_SCALE;return new D(this.code_head||"v1d",t).getMetrics().width},stem:!1,stem_offset:0,flag:!1,stem_up_extension:-G.STEM_HEIGHT,stem_down_extension:-G.STEM_HEIGHT,tabnote_stem_up_extension:-G.STEM_HEIGHT,tabnote_stem_down_extension:-G.STEM_HEIGHT,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"v1d"},h:{code_head:"v46"},m:{code_head:"v92",stem_offset:-3},r:{code_head:"v5c",rest:!0,position:"D/5",dot_shiftY:.5},s:{getWidth:function(){return G.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},2:{common:{getWidth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:G.DEFAULT_NOTATION_FONT_SCALE;return new D(this.code_head||"v81",t).getMetrics().width},stem:!0,stem_offset:0,flag:!1,stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"v81"},h:{code_head:"v2d"},m:{code_head:"v95",stem_offset:-3},r:{code_head:"vc",stem:!1,rest:!0,position:"B/4",dot_shiftY:-.5},s:{getWidth:function(){return G.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},4:{common:{getWidth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:G.DEFAULT_NOTATION_FONT_SCALE;return new D(this.code_head||"vb",t).getMetrics().width},stem:!0,stem_offset:0,flag:!1,stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e",stem_offset:-3},r:{code_head:"v7c",stem:!1,rest:!0,position:"B/4",dot_shiftY:-.5,line_above:1.5,line_below:1.5},s:{getWidth:function(){return G.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},8:{common:{getWidth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:G.DEFAULT_NOTATION_FONT_SCALE;return new D(this.code_head||"vb",t).getMetrics().width},stem:!0,stem_offset:0,flag:!0,beam_count:1,code_flag_upstem:"v54",code_flag_downstem:"v9a",stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"va5",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-.5,line_above:1,line_below:1},s:{getWidth:function(){return G.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},16:{common:{beam_count:2,getWidth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:G.DEFAULT_NOTATION_FONT_SCALE;return new D(this.code_head||"vb",t).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"v3f",code_flag_downstem:"v8f",stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"v3c",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-.5,line_above:1,line_below:2},s:{getWidth:function(){return G.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},32:{common:{beam_count:3,getWidth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:G.DEFAULT_NOTATION_FONT_SCALE;return new D(this.code_head||"vb",t).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"v47",code_flag_downstem:"v2a",stem_up_extension:9,stem_down_extension:9,tabnote_stem_up_extension:8,tabnote_stem_down_extension:5,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"v55",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-1.5,line_above:2,line_below:2},s:{getWidth:function(){return G.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},64:{common:{beam_count:4,getWidth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:G.DEFAULT_NOTATION_FONT_SCALE;return new D(this.code_head||"vb",t).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"va9",code_flag_downstem:"v58",stem_up_extension:13,stem_down_extension:13,tabnote_stem_up_extension:12,tabnote_stem_down_extension:9,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"v38",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-1.5,line_above:2,line_below:3},s:{getWidth:function(){return G.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},128:{common:{beam_count:5,getWidth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:G.DEFAULT_NOTATION_FONT_SCALE;return new D(this.code_head||"vb",t).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"v9b",code_flag_downstem:"v30",stem_up_extension:22,stem_down_extension:22,tabnote_stem_up_extension:21,tabnote_stem_down_extension:18,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"vaa",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:1.5,line_above:3,line_below:3},s:{getWidth:function(){return G.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}}},G.smufl={},G.smufl.to_code_points={bracketTop:"v1b",bracketBottom:"v10",barlineTick:"v6f",segno:"v8c",coda:"v4d",gClef:"v83",cClef:"vad",fClef:"v79",unpitchedPercussionClef1:"v59","6stringTabClef":"v2f",timeSig0:"v0",timeSig1:"v1",timeSig2:"v2",timeSig3:"v3",timeSig4:"v4",timeSig5:"v5",timeSig6:"v6",timeSig7:"v7",timeSig8:"v8",timeSig9:"v9",timeSigCommon:"v41",timeSigCutCommon:"vb6",noteheadDoubleWhole:"v53",noteheadWhole:"v1d",noteheadHalf:"v81",noteheadBlack:"vb",noteheadXWhole:"v92",noteheadXHalf:"v95",noteheadXBlack:"v3e",noteheadCircleX:"v3b",noteheadTriangleUpWhole:"v49",noteheadTriangleUpHalf:"v93",noteheadTriangleUpBlack:"v40",noteheadDiamondWhole:"v46",noteheadDiamondHalf:"v2d",noteheadDiamondBlack:"v22",augmentationDot:"v23",tremolo1:"v74",flag8thUp:"v54",flag8thDown:"v9a",flag16thUp:"v3f",flag16thDown:"v8f",flag32ndUp:"v47",flag32ndDown:"v2a",flag64thUp:"va9",flag64thDown:"v58",flag128thUp:"v9b",flag128thDown:"v30",accidentalFlat:"v44",accidentalNatural:"v4e",accidentalSharp:"v18",accidentalDoubleSharp:"v7f",accidentalDoubleFlat:"v26",accidentalParensLeft:"v9c",accidentalParensRight:"v84",accidentalQuarterToneFlatStein:"vab",accidentalThreeQuarterTonesFlatZimmermann:"v9e",accidentalQuarterToneSharpStein:"v78",accidentalThreeQuarterTonesSharpStein:"v51",accidentalBuyukMucennebFlat:"v39",accidentalBakiyeFlat:"vb7",accidentalKomaSharp:"v51",accidentalKucukMucennebSharp:"v8d",accidentalKoron:"vd1",accidentalSori:"vd0",articAccentAbove:"v42",articAccentBelow:"v42",articTenutoAbove:"v25",articTenutoBelow:"v25",articStaccatoAbove:"v23",articStaccatoBelow:"v23",articStaccatissimoAbove:"v28",articMarcatoAbove:"va",fermataAbove:"v43",fermataBelow:"v5b",breathMarkComma:"v6c",breathMarkUpbow:"v8a",caesura:"v34",caesuraCurved:"v4b",restMaxima:"v59",restDoubleWhole:"v31",restWhole:"v5c",restHalf:"vc",restQuarter:"v7c",rest8th:"va5",rest16th:"v3c",rest32nd:"v55",rest64th:"v38",rest128th:"vaa",dynamicPiano:"vbf",dynamicMezzo:"v62",dynamicForte:"vba",dynamicRinforzando:"vba",dynamicSforzando:"v4a",dynamicZ:"v80",ornamentTrill:"v1f",ornamentTurn:"v72",ornamentTurnSlash:"v33",ornamentMordent:"v45",ornamentMordentInverted:"v1e",ornamentTremblement:"v86",ornamentPrecompAppoggTrill:"v20",ornamentPrecompSlideTrillDAnglebert:"v60",ornamentPrecompSlideTrillBach:"v29",ornamentPrecompTrillSuffixDandrieu:"v6d",ornamentPrecompDoubleCadenceUpperPrefix:"vb4",ornamentPrecompDoubleCadenceUpperPrefixTurn:"v68",ornamentPrecompTrillLowerSuffix:"v2c",stringsDownBow:"v94",stringsUpBow:"v75",stringsHarmonic:"vb9",pluckedSnapPizzicatoAbove:"v94",pluckedLeftHandPizzicato:"v8b",keyboardPedalPed:"v36",keyboardPedalUp:"v5d",pictChokeCymbal:"vb3",wiggleArpeggiatoUp:"va3",arrowheadBlackUp:"vc3",arrowheadBlackDown:"v52"},G.TIME4_4={num_beats:4,beat_value:4,resolution:G.RESOLUTION};var H=(U(Y,null,[{key:"WIDTH",get:function(){return 600}},{key:"HEIGHT",get:function(){return 400}}]),U(Y,[{key:"clear",value:function(){this.vexFlowCanvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"openGroup",value:function(){}},{key:"closeGroup",value:function(){}},{key:"add",value:function(){}},{key:"setFont",value:function(t,e,n){return this.vexFlowCanvasContext.font=(n||"")+" "+e+"pt "+t,this}},{key:"setRawFont",value:function(t){return this.vexFlowCanvasContext.font=t,this}},{key:"setFillStyle",value:function(t){return this.vexFlowCanvasContext.fillStyle=t,this}},{key:"setBackgroundFillStyle",value:function(t){return this.background_fillStyle=t,this}},{key:"setStrokeStyle",value:function(t){return this.vexFlowCanvasContext.strokeStyle=t,this}},{key:"setShadowColor",value:function(t){return this.vexFlowCanvasContext.shadowColor=t,this}},{key:"setShadowBlur",value:function(t){return this.vexFlowCanvasContext.shadowBlur=t,this}},{key:"setLineWidth",value:function(t){return this.vexFlowCanvasContext.lineWidth=t,this}},{key:"setLineCap",value:function(t){return this.vexFlowCanvasContext.lineCap=t,this}},{key:"setLineDash",value:function(t){return this.vexFlowCanvasContext.lineDash=t,this}},{key:"scale",value:function(t,e){return this.vexFlowCanvasContext.scale(parseFloat(t),parseFloat(e))}},{key:"resize",value:function(t,e){return this.vexFlowCanvasContext.resize(parseInt(t,10),parseInt(e,10))}},{key:"rect",value:function(t,e,n,i){return this.vexFlowCanvasContext.rect(t,e,n,i)}},{key:"fillRect",value:function(t,e,n,i){return this.vexFlowCanvasContext.fillRect(t,e,n,i)}},{key:"clearRect",value:function(t,e,n,i){return this.vexFlowCanvasContext.clearRect(t,e,n,i)}},{key:"beginPath",value:function(){return this.vexFlowCanvasContext.beginPath()}},{key:"moveTo",value:function(t,e){return this.vexFlowCanvasContext.moveTo(t,e)}},{key:"lineTo",value:function(t,e){return this.vexFlowCanvasContext.lineTo(t,e)}},{key:"bezierCurveTo",value:function(t,e,n,i,r,o){return this.vexFlowCanvasContext.bezierCurveTo(t,e,n,i,r,o)}},{key:"quadraticCurveTo",value:function(t,e,n,i){return this.vexFlowCanvasContext.quadraticCurveTo(t,e,n,i)}},{key:"arc",value:function(t,e,n,i,r,o){return this.vexFlowCanvasContext.arc(t,e,n,i,r,o)}},{key:"glow",value:function(){return this.vexFlowCanvasContext.glow()}},{key:"fill",value:function(){return this.vexFlowCanvasContext.fill()}},{key:"stroke",value:function(){return this.vexFlowCanvasContext.stroke()}},{key:"closePath",value:function(){return this.vexFlowCanvasContext.closePath()}},{key:"measureText",value:function(t){return this.vexFlowCanvasContext.measureText(t)}},{key:"fillText",value:function(t,e,n){return this.vexFlowCanvasContext.fillText(t,e,n)}},{key:"save",value:function(){return this.vexFlowCanvasContext.save()}},{key:"restore",value:function(){return this.vexFlowCanvasContext.restore()}}]),Y);function Y(t){!function(t){if(!(t instanceof Y))throw new TypeError("Cannot call a class as a function")}(this),(this.vexFlowCanvasContext=t).canvas?this.canvas=t.canvas:this.canvas={width:Y.WIDTH,height:Y.HEIGHT}}var z=(function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(X.prototype,[{key:"openGroup",value:function(){}},{key:"closeGroup",value:function(){}},{key:"add",value:function(){}},{key:"setFont",value:function(t,e,n){return this.state.font_family=t,this.state.font_size=e,this.state.font_weight=n,this.attributes.font=(this.state.font_weight||"")+" "+this.state.font_size*this.state.scale.x+"pt "+this.state.font_family,this}},{key:"setRawFont",value:function(t){return this.attributes.font=t,this}},{key:"setFillStyle",value:function(t){return this.attributes.fill=t,this}},{key:"setBackgroundFillStyle",value:function(t){return this.background_attributes.fill=t,this.background_attributes.stroke=t,this}},{key:"setStrokeStyle",value:function(t){return this.attributes.stroke=t,this}},{key:"setShadowColor",value:function(t){return this.shadow_attributes.color=t,this}},{key:"setShadowBlur",value:function(t){return this.shadow_attributes.width=t,this}},{key:"setLineWidth",value:function(t){this.attributes["stroke-width"]=t,this.lineWidth=t}},{key:"setLineDash",value:function(){return this}},{key:"setLineCap",value:function(){return this}},{key:"scale",value:function(t,e){return this.state.scale={x:t,y:e},this.attributes.transform="S"+t+","+e+",0,0",this.attributes.scale=t+","+e+",0,0",this.attributes.font=this.state.font_size*this.state.scale.x+"pt "+this.state.font_family,this.background_attributes.transform="S"+t+","+e+",0,0",this.background_attributes.font=this.state.font_size*this.state.scale.x+"pt "+this.state.font_family,this}},{key:"clear",value:function(){this.paper.clear()}},{key:"resize",value:function(t,e){return this.element.style.width=t,this.paper.setSize(t,e),this}},{key:"setViewBox",value:function(t){this.paper.canvas.setAttribute("viewBox",t)}},{key:"rect",value:function(t,e,n,i){return i<0&&(e+=i,i=-i),this.paper.rect(t,e,n-.5,i-.5).attr(this.attributes).attr("fill","none").attr("stroke-width",this.lineWidth),this}},{key:"fillRect",value:function(t,e,n,i){return i<0&&(e+=i,i=-i),this.paper.rect(t,e,n-.5,i-.5).attr(this.attributes),this}},{key:"clearRect",value:function(t,e,n,i){return i<0&&(e+=i,i=-i),this.paper.rect(t,e,n-.5,i-.5).attr(this.background_attributes),this}},{key:"beginPath",value:function(){return this.path="",this.pen.x=0,this.pen.y=0,this}},{key:"moveTo",value:function(t,e){return this.path+="M"+t+","+e,this.pen.x=t,this.pen.y=e,this}},{key:"lineTo",value:function(t,e){return this.path+="L"+t+","+e,this.pen.x=t,this.pen.y=e,this}},{key:"bezierCurveTo",value:function(t,e,n,i,r,o){return this.path+="C"+t+","+e+","+n+","+i+","+r+","+o,this.pen.x=r,this.pen.y=o,this}},{key:"quadraticCurveTo",value:function(t,e,n,i){return this.path+="Q"+t+","+e+","+n+","+i,this.pen.x=n,this.pen.y=i,this}},{key:"arc",value:function(t,e,n,i,r,o){function s(t){for(;t<0;)t+=2*Math.PI;for(;t>2*Math.PI;)t-=2*Math.PI;return t}if((i=s(i))>(r=s(r))){var a=i;i=r,r=a,o=!o}var u=r-i;return u>Math.PI?(this.arcHelper(t,e,n,i,i+u/2,o),this.arcHelper(t,e,n,i+u/2,r,o)):this.arcHelper(t,e,n,i,r,o),this}},{key:"arcHelper",value:function(t,e,n,i,r,o){var s=t+n*Math.cos(i),a=e+n*Math.sin(i),u=t+n*Math.cos(r),l=e+n*Math.sin(r),c=0,h=0;o?(h=1,r-i<Math.PI&&(c=1)):r-i>Math.PI&&(c=1),this.path+="M"+s+","+a+",A"+n+","+n+",0,"+c+","+h+","+u+","+l+"M"+this.pen.x+","+this.pen.y}},{key:"glow",value:function(){var t=this.paper.set();if(0<this.shadow_attributes.width)for(var e=this.shadow_attributes,n=e.width/2,i=1;i<=n;i++)t.push(this.paper.path(this.path).attr({stroke:e.color,"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/n*i).toFixed(3),opacity:+((e.opacity||.3)/n).toFixed(3),transform:this.attributes.transform,scale:this.attributes.scale}));return t}},{key:"fill",value:function(){var t=this.paper.path(this.path).attr(this.attributes).attr("stroke-width",0);return this.glow(t),this}},{key:"stroke",value:function(){var t=this.lineWidth*(this.state.scale.x+this.state.scale.y)/2,e=this.paper.path(this.path).attr(this.attributes).attr("fill","none").attr("stroke-width",t);return this.glow(e),this}},{key:"closePath",value:function(){return this.path+="Z",this}},{key:"measureText",value:function(t){var e=this.paper.text(0,0,t).attr(this.attributes).attr("fill","none").attr("stroke","none"),n=e.getBBox();return e.remove(),{width:n.width,height:n.height}}},{key:"fillText",value:function(t,e,n){return this.paper.text(e+this.measureText(t).width/2,n-this.state.font_size/(2.25*this.state.scale.y),t).attr(this.attributes),this}},{key:"save",value:function(){return this.state_stack.push({state:{font_family:this.state.font_family},attributes:{font:this.attributes.font,fill:this.attributes.fill,stroke:this.attributes.stroke,"stroke-width":this.attributes["stroke-width"]},shadow_attributes:{width:this.shadow_attributes.width,color:this.shadow_attributes.color}}),this}},{key:"restore",value:function(){var t=this.state_stack.pop();return this.state.font_family=t.state.font_family,this.attributes.font=t.attributes.font,this.attributes.fill=t.attributes.fill,this.attributes.stroke=t.attributes.stroke,this.attributes["stroke-width"]=t.attributes["stroke-width"],this.shadow_attributes.width=t.shadow_attributes.width,this.shadow_attributes.color=t.shadow_attributes.color,this}}]),X);function X(t){!function(t){if(!(t instanceof X))throw new TypeError("Cannot call a class as a function")}(this),this.element=t,this.paper=Raphael(t),this.path="",this.pen={x:0,y:0},this.lineWidth=1,this.state={scale:{x:1,y:1},font_family:"Arial",font_size:8,font_weight:800},this.attributes={"stroke-width":.3,fill:"black",stroke:"black",font:"10pt Arial"},this.background_attributes={"stroke-width":0,fill:"white",stroke:"white",font:"10pt Arial"},this.shadow_attributes={width:0,color:"black"},this.state_stack=[]}var K={path:{x:!0,y:!0,width:!0,height:!0},rect:{},text:{width:!0,height:!0}},q={"font-family":!0,"font-weight":!0,"font-style":!0,"font-size":!0};C.Merge(K.rect,q),C.Merge(K.path,q);var J=(function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(Q.prototype,[{key:"create",value:function(t){return document.createElementNS(this.svgNS,t)}},{key:"openGroup",value:function(t,e,n){var i=this.create("g");return this.groups.push(i),this.parent.appendChild(i),this.parent=i,t&&i.setAttribute("class",C.Prefix(t)),e&&i.setAttribute("id",C.Prefix(e)),n&&n.pointerBBox&&i.setAttribute("pointer-events","bounding-box"),i}},{key:"closeGroup",value:function(){this.groups.pop(),this.parent=this.groups[this.groups.length-1]}},{key:"add",value:function(t){this.parent.appendChild(t)}},{key:"iePolyfill",value:function(){"undefined"!=typeof navigator&&(this.ie=/MSIE 9/i.test(navigator.userAgent)||/MSIE 10/i.test(navigator.userAgent)||/rv:11\.0/i.test(navigator.userAgent)||/Trident/i.test(navigator.userAgent))}},{key:"setFont",value:function(t,e,n){var i=!1,r=!1,o="normal";"string"==typeof n&&(-1!==n.indexOf("italic")&&(n=n.replace(/italic/g,""),r=!0),-1!==n.indexOf("bold")&&(n=n.replace(/bold/g,""),i=!0),n=n.replace(/ /g,""));var s={"font-family":t,"font-size":e+"pt","font-weight":n=void 0===(n=i?"bold":n)||""===n?"normal":n,"font-style":o=r?"italic":o};return this.fontSize=Number(e),C.Merge(this.attributes,s),C.Merge(this.state,s),this}},{key:"setRawFont",value:function(t){var e=(t=t.trim()).split(" ");return this.attributes["font-family"]=e[1],this.state["font-family"]=e[1],this.attributes["font-size"]=e[0],this.state["font-size"]=e[0],this.fontSize=Number(e[0].match(/\d+/)),this}},{key:"setFillStyle",value:function(t){return this.attributes.fill=t,this}},{key:"setBackgroundFillStyle",value:function(t){return this.background_attributes.fill=t,this.background_attributes.stroke=t,this}},{key:"setStrokeStyle",value:function(t){return this.attributes.stroke=t,this}},{key:"setShadowColor",value:function(t){return this.shadow_attributes.color=t,this}},{key:"setShadowBlur",value:function(t){return this.shadow_attributes.width=t,this}},{key:"setLineWidth",value:function(t){this.attributes["stroke-width"]=t,this.lineWidth=t}},{key:"setLineDash",value:function(t){if("[object Array]"===Object.prototype.toString.call(t))return t=t.join(", "),this.attributes["stroke-dasharray"]=t,this;throw new C.RERR("ArgumentError","lineDash must be an array of integers.")}},{key:"setLineCap",value:function(t){return this.attributes["stroke-linecap"]=t,this}},{key:"resize",value:function(t,e){this.width=t,this.height=e;var n={width:this.element.style.width=t,height:e};return this.applyAttributes(this.svg,n),this}},{key:"scale",value:function(t,e){this.state.scale={x:t,y:e};var n=this.width/t,i=this.height/e;return this.setViewBox(0,0,n,i),this}},{key:"setViewBox",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(1===e.length){var i=e[0];this.svg.setAttribute("viewBox",i)}else{var r=e[0]+" "+e[1]+" "+e[2]+" "+e[3];this.svg.setAttribute("viewBox",r)}}},{key:"applyAttributes",value:function(e,n){var i=K[e.nodeName];return Object.keys(n).forEach(function(t){i&&i[t]||e.setAttributeNS(null,t,n[t])}),e}},{key:"clear",value:function(){for(;this.svg.lastChild;)this.svg.removeChild(this.svg.lastChild);this.scale(this.state.scale.x,this.state.scale.y)}},{key:"rect",value:function(t,e,n,i,r){i<0&&(e+=i,i*=-1);var o=this.create("rect");return void 0===r&&(r={fill:"none","stroke-width":this.lineWidth,stroke:"black"}),C.Merge(r,{x:t,y:e,width:n,height:i}),this.applyAttributes(o,r),this.add(o),this}},{key:"fillRect",value:function(t,e,n,i){return i<0&&(e+=i,i*=-1),this.rect(t,e,n,i,this.attributes),this}},{key:"clearRect",value:function(t,e,n,i){return this.rect(t,e,n,i,this.background_attributes),this}},{key:"beginPath",value:function(){return this.path="",this.pen.x=NaN,this.pen.y=NaN,this}},{key:"moveTo",value:function(t,e){return this.path+="M"+t+" "+e,this.pen.x=t,this.pen.y=e,this}},{key:"lineTo",value:function(t,e){return this.path+="L"+t+" "+e,this.pen.x=t,this.pen.y=e,this}},{key:"bezierCurveTo",value:function(t,e,n,i,r,o){return this.path+="C"+t+" "+e+","+n+" "+i+","+r+" "+o,this.pen.x=r,this.pen.y=o,this}},{key:"quadraticCurveTo",value:function(t,e,n,i){return this.path+="Q"+t+" "+e+","+n+" "+i,this.pen.x=n,this.pen.y=i,this}},{key:"arc",value:function(t,e,n,i,r,o){function s(t){for(;t<0;)t+=2*Math.PI;for(;t>2*Math.PI;)t-=2*Math.PI;return t}if((i=s(i))>(r=s(r))){var a=i;i=r,r=a,o=!o}var u=r-i;return u>Math.PI?(this.arcHelper(t,e,n,i,i+u/2,o),this.arcHelper(t,e,n,i+u/2,r,o)):this.arcHelper(t,e,n,i,r,o),this}},{key:"arcHelper",value:function(t,e,n,i,r,o){var s=t+n*Math.cos(i),a=e+n*Math.sin(i),u=t+n*Math.cos(r),l=e+n*Math.sin(r),c=0,h=0;o?(h=1,r-i<Math.PI&&(c=1)):r-i>Math.PI&&(c=1),this.path+="M"+s+" "+a+" A"+n+" "+n+" 0 "+c+" "+h+" "+u+" "+l,isNaN(this.pen.x)||isNaN(this.pen.y)||(this.peth+="M"+this.pen.x+" "+this.pen.y)}},{key:"closePath",value:function(){return this.path+="Z",this}},{key:"glow",value:function(){if(0<this.shadow_attributes.width)for(var t=this.shadow_attributes,e=t.width/2,n=1;n<=e;n++){var i={stroke:t.color,"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(.4*t.width/e*n).toFixed(3),opacity:+((t.opacity||.3)/e).toFixed(3)},r=this.create("path");i.d=this.path,this.applyAttributes(r,i),this.add(r)}return this}},{key:"fill",value:function(t){this.glow();var e=this.create("path");return void 0===t&&(t={},C.Merge(t,this.attributes),t.stroke="none"),t.d=this.path,this.applyAttributes(e,t),this.add(e),this}},{key:"stroke",value:function(){this.glow();var t=this.create("path"),e={};return C.Merge(e,this.attributes),e.fill="none",e["stroke-width"]=this.lineWidth,e.d=this.path,this.applyAttributes(t,e),this.add(t),this}},{key:"measureText",value:function(t){var e=this.create("text");if("function"!=typeof e.getBBox)return{x:0,y:0,width:0,height:0};e.textContent=t,this.applyAttributes(e,this.attributes),this.svg.appendChild(e);var n=e.getBBox();return this.ie&&""!==t&&"italic"===this.attributes["font-style"]&&(n=this.ieMeasureTextFix(n,t)),this.svg.removeChild(e),n}},{key:"ieMeasureTextFix",value:function(t){var e=1.196*Number(this.fontSize)+1.9598,n=t.width-e,i=t.height-1.5;return{x:t.x,y:t.y,width:n,height:i}}},{key:"fillText",value:function(t,e,n){if(t&&!(t.length<=0)){var i={};C.Merge(i,this.attributes),i.stroke="none",i.x=e,i.y=n;var r=this.create("text");r.textContent=t,this.applyAttributes(r,i),this.add(r)}}},{key:"save",value:function(){return this.state_stack.push({state:{"font-family":this.state["font-family"],"font-weight":this.state["font-weight"],"font-style":this.state["font-style"],"font-size":this.state["font-size"]},attributes:{"font-family":this.attributes["font-family"],"font-weight":this.attributes["font-weight"],"font-style":this.attributes["font-style"],"font-size":this.attributes["font-size"],fill:this.attributes.fill,stroke:this.attributes.stroke,"stroke-width":this.attributes["stroke-width"],"stroke-dasharray":this.attributes["stroke-dasharray"]},shadow_attributes:{width:this.shadow_attributes.width,color:this.shadow_attributes.color},lineWidth:this.lineWidth}),this}},{key:"restore",value:function(){var t=this.state_stack.pop();return this.state["font-family"]=t.state["font-family"],this.state["font-weight"]=t.state["font-weight"],this.state["font-style"]=t.state["font-style"],this.state["font-size"]=t.state["font-size"],this.attributes["font-family"]=t.attributes["font-family"],this.attributes["font-weight"]=t.attributes["font-weight"],this.attributes["font-style"]=t.attributes["font-style"],this.attributes["font-size"]=t.attributes["font-size"],this.attributes.fill=t.attributes.fill,this.attributes.stroke=t.attributes.stroke,this.attributes["stroke-width"]=t.attributes["stroke-width"],this.attributes["stroke-dasharray"]=t.attributes["stroke-dasharray"],this.shadow_attributes.width=t.shadow_attributes.width,this.shadow_attributes.color=t.shadow_attributes.color,this.lineWidth=t.lineWidth,this}}]),Q);function Q(t){!function(t){if(!(t instanceof Q))throw new TypeError("Cannot call a class as a function")}(this),this.element=t,this.svgNS="http://www.w3.org/2000/svg";var e=this.create("svg");this.element.appendChild(e),this.svg=e,this.groups=[this.svg],this.parent=this.svg,this.path="",this.pen={x:NaN,y:NaN},this.lineWidth=1,this.state={scale:{x:1,y:1},"font-family":"Arial","font-size":"8pt","font-weight":"normal"},this.attributes={"stroke-width":.3,fill:"black",stroke:"black","stroke-dasharray":"none","font-family":"Arial","font-size":"10pt","font-weight":"normal","font-style":"normal"},this.background_attributes={"stroke-width":0,fill:"white",stroke:"white","stroke-dasharray":"none","font-family":"Arial","font-size":"10pt","font-weight":"normal","font-style":"normal"},this.shadow_attributes={width:0,color:"black"},this.state_stack=[],this.iePolyfill()}function Z(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function $(t,e,n){return e&&Z(t.prototype,e),n&&Z(t,n),t}var tt=null,et=($(nt,null,[{key:"buildContext",value:function(t,e,n,i,r){var o=new nt(t,e);n&&i&&o.resize(n,i),r=r||"#FFF";var s=o.getContext();return s.setBackgroundFillStyle(r),nt.lastContext=s}},{key:"getCanvasContext",value:function(t,e,n,i){return nt.buildContext(t,nt.Backends.CANVAS,e,n,i)}},{key:"getRaphaelContext",value:function(t,e,n,i){return nt.buildContext(t,nt.Backends.RAPHAEL,e,n,i)}},{key:"getSVGContext",value:function(t,e,n,i){return nt.buildContext(t,nt.Backends.SVG,e,n,i)}},{key:"bolsterCanvasContext",value:function(e){return nt.USE_CANVAS_PROXY?new H(e):(e.vexFlowCanvasContext=e,["clear","setFont","setRawFont","setFillStyle","setBackgroundFillStyle","setStrokeStyle","setShadowColor","setShadowBlur","setLineWidth","setLineCap","setLineDash","openGroup","closeGroup","getGroup"].forEach(function(t){e[t]=e[t]||H.prototype[t]}),e)}},{key:"drawDashedLine",value:function(t,e,n,i,r,o){t.beginPath();var s=i-e,a=r-n,u=Math.atan2(a,s),l=e,c=n;t.moveTo(e,n);for(var h=0,f=!0;!(s<0?l<=i:i<=l)||!(a<0?c<=r:r<=c);){var p=o[h++%o.length],d=l+Math.cos(u)*p;l=s<0?Math.max(i,d):Math.min(i,d);var b=c+Math.sin(u)*p;c=a<0?Math.max(r,b):Math.min(r,b),f?t.lineTo(l,c):t.moveTo(l,c),f=!f}t.closePath(),t.stroke()}},{key:"Backends",get:function(){return{CANVAS:1,RAPHAEL:2,SVG:3,VML:4}}},{key:"LineEndType",get:function(){return{NONE:1,UP:2,DOWN:3}}},{key:"USE_CANVAS_PROXY",get:function(){return!1}},{key:"lastContext",get:function(){return tt},set:function(t){tt=t}}]),$(nt,[{key:"resize",value:function(t,e){if(this.backend===nt.Backends.CANVAS){if(!this.element.getContext)throw new C.RERR("BadElement","Can't get canvas context from element: ".concat(this.elementId));var n=window.devicePixelRatio||1;this.element.width=t*n,this.element.height=e*n,this.element.style.width=t+"px",this.element.style.height=e+"px",this.ctx=nt.bolsterCanvasContext(this.element.getContext("2d")),this.ctx.scale(n,n)}else this.ctx.resize(t,e);return this}},{key:"getContext",value:function(){return this.ctx}}]),nt);function nt(t,e){if(function(t){if(!(t instanceof nt))throw new TypeError("Cannot call a class as a function")}(this),this.elementId=t,!this.elementId)throw new C.RERR("BadArgument","Invalid id for renderer.");if(this.element=document.getElementById(t),this.element||(this.element=t),this.ctx=null,this.paper=null,this.backend=e,this.backend===nt.Backends.CANVAS){if(!this.element.getContext)throw new C.RERR("BadElement","Can't get canvas context from element: ".concat(t));this.ctx=nt.bolsterCanvasContext(this.element.getContext("2d"))}else if(this.backend===nt.Backends.RAPHAEL)this.ctx=new z(this.element);else{if(this.backend!==nt.Backends.SVG)throw new C.RERR("InvalidBackend","No support for backend: ".concat(this.backend));this.ctx=new J(this.element)}}function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ot(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function st(t,e,n){return e&&ot(t.prototype,e),n&&ot(t,n),t}function at(t,e){return(at=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ut=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&at(t,e)}(lt,x),st(lt,null,[{key:"CATEGORY",get:function(){return"stem"}},{key:"UP",get:function(){return 1}},{key:"DOWN",get:function(){return-1}},{key:"WIDTH",get:function(){return G.STEM_WIDTH}},{key:"HEIGHT",get:function(){return G.STEM_HEIGHT}}]),st(lt,[{key:"setNoteHeadXBounds",value:function(t,e){return this.x_begin=t,this.x_end=e,this}},{key:"setDirection",value:function(t){this.stem_direction=t}},{key:"setExtension",value:function(t){this.stem_extension=t}},{key:"getExtension",value:function(){return this.stem_extension}},{key:"setYBounds",value:function(t,e){this.y_top=t,this.y_bottom=e}},{key:"getCategory",value:function(){return lt.CATEGORY}},{key:"getHeight",value:function(){var t=this.stem_direction===lt.UP?this.stem_up_y_offset:this.stem_down_y_offset;return(this.y_bottom-this.y_top)*this.stem_direction+(lt.HEIGHT-t+this.stem_extension)*this.stem_direction}},{key:"getBoundingBox",value:function(){throw new C.RERR("NotImplemented","getBoundingBox() not implemented.")}},{key:"getExtents",value:function(){var t=this.stem_direction===lt.UP,e=[this.y_top,this.y_bottom],n=lt.HEIGHT+this.stem_extension,i=(t?Math.min:Math.max).apply(void 0,e),r=(t?Math.max:Math.min).apply(void 0,e);return{topY:i+n*-this.stem_direction,baseY:r}}},{key:"setVisibility",value:function(t){return this.hide=!t,this}},{key:"setStemlet",value:function(t,e){return this.isStemlet=t,this.stemletHeight=e,this}},{key:"draw",value:function(){if(this.setRendered(),!this.hide){var t,e,n=this.checkContext(),i=this.stem_direction;e=i===lt.DOWN?(t=this.x_begin,this.y_top+this.stem_down_y_offset):(t=this.x_end,this.y_bottom-this.stem_up_y_offset);var r=this.getHeight();!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];ut.DEBUG&&C.L("Vex.Flow.Stem",e)}("Rendering stem - ","Top Y: ",this.y_top,"Bottom Y: ",this.y_bottom);var o=this.isStemlet?r-this.stemletHeight*this.stem_direction:0;n.save(),this.applyStyle(n),n.beginPath(),n.setLineWidth(lt.WIDTH),n.moveTo(t,e-o),n.lineTo(t,e-r-this.renderHeightAdjustment*i),n.stroke(),this.restoreStyle(n),n.restore()}}}]),lt);function lt(){var t,e,n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof lt))throw new TypeError("Cannot call a class as a function")}(this),(e=this,t=!(n=rt(lt).call(this))||"object"!==it(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):n).setAttribute("type","Stem"),t.x_begin=i.x_begin||0,t.x_end=i.x_end||0,t.y_top=i.y_top||0,t.y_bottom=i.y_bottom||0,t.stem_extension=i.stem_extension||0,t.stem_direction=i.stem_direction||0,t.hide=i.hide||!1,t.isStemlet=i.isStemlet||!1,t.stemletHeight=i.stemletHeight||0,t.stem_up_y_offset=i.stem_up_y_offset||0,t.stem_down_y_offset=i.stem_down_y_offset||0,t.renderHeightAdjustment=0,t}function ct(t){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ht(t){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ft(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function pt(t,e,n){return e&&ft(t.prototype,e),n&&ft(t,n),t}function dt(t,e){return(dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dt(t,e)}(yt,x),pt(yt,null,[{key:"LOCATION_TOP",get:function(){return 1}},{key:"LOCATION_BOTTOM",get:function(){return-1}},{key:"NESTING_OFFSET",get:function(){return 15}}]),pt(yt,[{key:"attach",value:function(){for(var t=0;t<this.notes.length;t++)this.notes[t].setTuplet(this)}},{key:"detach",value:function(){for(var t=0;t<this.notes.length;t++)this.notes[t].resetTuplet(this)}},{key:"setBracketed",value:function(t){return this.bracketed=!!t,this}},{key:"setRatioed",value:function(t){return this.ratioed=!!t,this}},{key:"setTupletLocation",value:function(t){if(t){if(t!==yt.LOCATION_TOP&&t!==yt.LOCATION_BOTTOM)throw new C.RERR("BadArgument","Invalid tuplet location: "+t)}else t=yt.LOCATION_TOP;return this.location=t,this}},{key:"getNotes",value:function(){return this.notes}},{key:"getNoteCount",value:function(){return this.num_notes}},{key:"beatsOccupiedDeprecationWarning",value:function(){var t=["beats_occupied has been deprecated as an ","option for tuplets. Please use notes_occupied ","instead. Calls to getBeatsOccupied and ","setBeatsOccupied should now be routed to ","getNotesOccupied and setNotesOccupied instead"].join("");console&&console.warn?console.warn(t):console&&console.log(t)}},{key:"getBeatsOccupied",value:function(){return this.beatsOccupiedDeprecationWarning(),this.getNotesOccupied()}},{key:"setBeatsOccupied",value:function(t){return this.beatsOccupiedDeprecationWarning(),this.setNotesOccupied(t)}},{key:"getNotesOccupied",value:function(){return this.notes_occupied}},{key:"setNotesOccupied",value:function(t){this.detach(),this.notes_occupied=t,this.resolveGlyphs(),this.attach()}},{key:"resolveGlyphs",value:function(){this.num_glyphs=[];for(var t=this.num_notes;1<=t;)this.num_glyphs.push(new D("v"+t%10,this.point)),t=parseInt(t/10,10);for(this.denom_glyphs=[],t=this.notes_occupied;1<=t;)this.denom_glyphs.push(new D("v"+t%10,this.point)),t=parseInt(t/10,10)}},{key:"getNestedTupletCount",value:function(){var n=this.location,t=this.notes[0],i=o(t,n),r=o(t,n);function o(t,e){return t.tupletStack.filter(function(t){return t.location===e}).length}return this.notes.forEach(function(t){var e=o(t,n);i=i<e?e:i,r=e<r?e:r}),i-r}},{key:"getYPosition",value:function(){var t,e=this.getNestedTupletCount()*yt.NESTING_OFFSET*-this.location,n=this.options.y_offset||0,i=this.notes[0];if(this.location===yt.LOCATION_TOP){t=i.getStave().getYForLine(0)-15;for(var r=0;r<this.notes.length;++r){var o=this.notes[r].getStemDirection()===ut.UP?this.notes[r].getStemExtents().topY-10:this.notes[r].getStemExtents().baseY-20;o<t&&(t=o)}}else{t=i.getStave().getYForLine(4)+20;for(var s=0;s<this.notes.length;++s){var a=this.notes[s].getStemDirection()===ut.UP?this.notes[s].getStemExtents().baseY+20:this.notes[s].getStemExtents().topY+10;t<a&&(t=a)}}return t+e+n}},{key:"draw",value:function(){var e=this;this.checkContext(),this.setRendered();var t=this.notes[0],n=this.notes[this.notes.length-1];function i(t,e){return t+e.getMetrics().width}this.bracketed?(this.x_pos=t.getTieLeftX()-5,this.width=n.getTieRightX()-this.x_pos+5):(this.x_pos=t.getStemX(),this.width=n.getStemX()-this.x_pos),this.y_pos=this.getYPosition();var r=this.num_glyphs.reduce(i,0);this.ratioed&&(r=this.denom_glyphs.reduce(i,r),r+=.32*this.point);var o=this.x_pos+this.width/2-r/2;if(this.bracketed){var s=this.width/2-r/2-5;0<s&&(this.context.fillRect(this.x_pos,this.y_pos,s,1),this.context.fillRect(this.x_pos+this.width/2+r/2+5,this.y_pos,s,1),this.context.fillRect(this.x_pos,this.y_pos+(this.location===yt.LOCATION_BOTTOM),1,10*this.location),this.context.fillRect(this.x_pos+this.width,this.y_pos+(this.location===yt.LOCATION_BOTTOM),1,10*this.location))}var a=0;if(this.num_glyphs.forEach(function(t){t.render(e.context,o+a,e.y_pos+e.point/3-2),a+=t.getMetrics().width}),this.ratioed){var u=o+a+.16*this.point,l=.06*this.point;this.context.beginPath(),this.context.arc(u,this.y_pos-.08*this.point,l,0,2*Math.PI,!0),this.context.closePath(),this.context.fill(),this.context.beginPath(),this.context.arc(u,this.y_pos+.12*this.point,l,0,2*Math.PI,!0),this.context.closePath(),this.context.fill(),a+=.32*this.point,this.denom_glyphs.forEach(function(t){t.render(e.context,o+a,e.y_pos+e.point/3-2),a+=t.getMetrics().width})}}}]),yt);function yt(t,e){var n,i,r;if(function(t){if(!(t instanceof yt))throw new TypeError("Cannot call a class as a function")}(this),(i=this,n=!(r=ht(yt).call(this))||"object"!==ct(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i):r).setAttribute("type","Tuplet"),!t||!t.length)throw new C.RuntimeError("BadArguments","No notes provided for tuplet.");return n.options=C.Merge({},e),n.notes=t,n.num_notes="num_notes"in n.options?n.options.num_notes:t.length,n.options.beats_occupied&&n.beatsOccupiedDeprecationWarning(),n.notes_occupied=n.options.notes_occupied||n.options.beats_occupied||2,"bracketed"in n.options?n.bracketed=n.options.bracketed:n.bracketed=t.some(function(t){return null===t.beam}),n.ratioed="ratioed"in n.options?n.options.ratioed:1<Math.abs(n.notes_occupied-n.num_notes),n.point=28,n.y_pos=16,n.x_pos=100,n.width=200,n.location=n.options.location||yt.LOCATION_TOP,tr.AlignRestsToNotes(t,!0,!0),n.resolveGlyphs(),n.attach(),n}function mt(t){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function vt(t){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _t(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function St(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function xt(t,e,n){return e&&St(t.prototype,e),n&&St(t,n),t}function wt(t,e){return(wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Et(t){var e=0;return t.forEach(function(t){t.keyProps&&t.keyProps.forEach(function(t){e+=t.line-3})}),0<=e?ut.DOWN:ut.UP}var Pt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wt(t,e)}(Tt,x),xt(Tt,null,[{key:"getDefaultBeamGroups",value:function(t){t&&"c"!==t||(t="4/4");var e={"1/2":["1/2"],"2/2":["1/2"],"3/2":["1/2"],"4/2":["1/2"],"1/4":["1/4"],"2/4":["1/4"],"3/4":["1/4"],"4/4":["1/4"],"1/8":["1/8"],"2/8":["2/8"],"3/8":["3/8"],"4/8":["2/8"],"1/16":["1/16"],"2/16":["2/16"],"3/16":["3/16"],"4/16":["2/16"]}[t];if(void 0!==e)return e.map(function(t){return(new p).parse(t)});var n=parseInt(t.split("/")[0],10),i=parseInt(t.split("/")[1],10);return n%3==0?[new p(3,i)]:4<i?[new p(2,i)]:i<=4?[new p(1,i)]:[new p(1,4)]}},{key:"applyAndGetBeams",value:function(t,e,n){return Tt.generateBeams(t.getTickables(),{groups:n,stem_direction:e})}},{key:"generateBeams",value:function(t,h){(h=h||{}).groups&&h.groups.length||(h.groups=[new p(2,8)]);var r,f,o=h.groups.map(function(t){if(!t.multiply)throw new C.RuntimeError("InvalidBeamGroups","The beam groups must be an array of Vex.Flow.Fractions");return t.clone().multiply(G.RESOLUTION,1)}),s=0,a=[],u=[];function l(){o.length-1>s?s+=1:s=0}r=[],t.forEach(function(t){if(r=[],t.shouldIgnoreTicks())return a.push(u),void(u=r);u.push(t);var e=o[s].clone(),n=u.reduce(function(t,e){return e.getTicks().clone().add(t)},new p(0,1)),i=G.durationToNumber(t.duration)<8;i&&t.tuplet&&(e.numerator*=2),n.greaterThan(e)?(i||r.push(u.pop()),a.push(u),u=r,l()):n.equals(e)&&(a.push(u),u=r,l())}),0<u.length&&a.push(u),f=[],a.forEach(function(t){var c=[];t.forEach(function(t,e,n){var i=0===e||e===n.length-1,r=n[e-1],o=!h.beam_rests&&t.isRest(),s=h.beam_rests&&h.beam_middle_only&&t.isRest()&&i,a=!1;if(h.maintain_stem_directions&&r&&!t.isRest()&&!r.isRest()){var u=r.getStemDirection();a=t.getStemDirection()!==u}var l=parseInt(t.duration,10)<8;o||s||a||l?(0<c.length&&f.push(c),c=a?[t]:[]):c.push(t)}),0<c.length&&f.push(c)}),(a=f).forEach(function(t){var e,n;if(h.maintain_stem_directions){var i=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(!n.isRest())return n}return!1}(t);e=i?i.getStemDirection():ut.UP}else e=h.stem_direction?h.stem_direction:Et(t);n=e,t.forEach(function(t){t.setStemDirection(n)})});var n,e=a.filter(function(t){if(1<t.length){var e=!0;return t.forEach(function(t){t.getIntrinsicTicks()>=G.durationToTicks("4")&&(e=!1)}),e}return!1}),i=(n=[],a.forEach(function(t){var e=null;t.forEach(function(t){t.tuplet&&e!==t.tuplet&&(e=t.tuplet,n.push(e))})}),n),c=[];return e.forEach(function(t){var e=new Tt(t);h.show_stemlets&&(e.render_options.show_stemlets=!0),h.secondary_breaks&&(e.render_options.secondary_break_ticks=G.durationToTicks(h.secondary_breaks)),!0===h.flat_beams&&(e.render_options.flat_beams=!0,e.render_options.flat_beam_offset=h.flat_beam_offset),c.push(e)}),i.forEach(function(t){var e=t.notes[0].stem_direction===ut.DOWN?bt.LOCATION_BOTTOM:bt.LOCATION_TOP;t.setTupletLocation(e);for(var n=!1,i=0;i<t.notes.length;i++)if(null===t.notes[i].beam){n=!0;break}t.setBracketed(n)}),c}}]),xt(Tt,[{key:"getNotes",value:function(){return this.notes}},{key:"getBeamCount",value:function(){return this.notes.map(function(t){return t.getGlyph().beam_count}).reduce(function(t,e){return t<e?e:t})}},{key:"breakSecondaryAt",value:function(t){return this.break_on_indices=t,this}},{key:"getSlopeY",value:function(t,e,n,i){return n+(t-e)*i}},{key:"calculateSlope",value:function(){for(var t=this.notes,e=this.stem_direction,n=this.render_options,i=n.max_slope,r=n.min_slope,o=n.slope_iterations,s=n.slope_cost,a=t[0],u=(w=a,E=t[t.length-1],P=w.getStemExtents().topY,T=w.getStemX(),(E.getStemExtents().topY-P)/(E.getStemX()-T)),l=(i-r)/o,c=Number.MAX_VALUE,h=0,f=0,p=r;p<=i;p+=l){for(var d=0,b=0,y=1;y<t.length;++y){var m=t[y],g=this.getSlopeY(m.getStemX(),a.getStemX(),a.getStemExtents().topY,p)+b,v=m.getStemExtents().topY;if(v*e<g*e){var _=Math.abs(v-g);b+=_*-e,d+=_*y}else d+=(v-g)*e}var S=u/2,x=s*Math.abs(S-p)+Math.abs(d);x<c&&(c=x,h=p,f=b)}var w,E,P,T;this.slope=h,this.y_shift=f}},{key:"calculateFlatSlope",value:function(){for(var t=this.notes,e=this.stem_direction,n=this.render_options,i=n.beam_width,r=n.min_flat_beam_offset,o=n.flat_beam_offset,s=0,a=0,u=0,l=0,c=0;c<t.length;c++){var h=t[c],f=h.getStemExtents().topY;s+=f,e===ut.DOWN&&l<f?(l=f,a=Math.max.apply(Math,gt(h.getYs())),u=h.getBeamCount()):e===ut.UP&&(0===l||f<l)&&(l=f,a=Math.min.apply(Math,gt(h.getYs())),u=h.getBeamCount())}var p=s/t.length,d=r+u*(1.5*i),b=a+d*-e;e===ut.DOWN&&p<b?p=a+d:e===ut.UP&&b<p&&(p=a-d),o?e===ut.DOWN&&o<p?this.render_options.flat_beam_offset=p:e===ut.UP&&p<o&&(this.render_options.flat_beam_offset=p):this.render_options.flat_beam_offset=p,this.slope=0,this.y_shift=0}},{key:"getBeamYToDraw",value:function(){var t=this.notes[0].getStemExtents().topY;return this.render_options.flat_beams&&this.render_options.flat_beam_offset&&(t=this.render_options.flat_beam_offset),t}},{key:"applyStemExtensions",value:function(){for(var t=this.notes,e=this.slope,n=this.y_shift,i=this.stem_direction,r=this.beam_count,o=this.render_options,s=o.show_stemlets,a=o.stemlet_extension,u=o.beam_width,l=t[0],c=this.getBeamYToDraw(),h=l.getStemX(),f=0;f<t.length;++f){var p=t[f],d=p.getStemX(),b=p.getStemExtents().topY,y=this.getSlopeY(d,h,c,e)+n,m=p.getStem().getExtension(),g=i===ut.UP?b-y:y-b;if(p.stem.setExtension(m+g),p.stem.renderHeightAdjustment=-ut.WIDTH/2,p.isRest()&&s){var v=(r-1)*u*1.5+u;p.stem.setVisibility(!0).setStemlet(!0,v+a)}}}},{key:"getBeamLines",value:function(t){for(var e=[],n=!1,i=null,r=this.render_options.partial_beam_length,o=!1,s=0,a=0;a<this.notes.length;++a){var u=this.notes[a];s+=u.ticks.value();var l=!1;8<=parseInt(t,10)&&(l=-1!==this.break_on_indices.indexOf(a),this.render_options.secondary_break_ticks&&s>=this.render_options.secondary_break_ticks&&(l=!(s=0)));var c=u.getIntrinsicTicks()<G.durationToTicks(t),h=u.getStemX()-ut.WIDTH/2,f=this.notes[a+1],p=f&&f.getIntrinsicTicks()<G.durationToTicks(t);c?n?((i=e[e.length-1]).end=h,l&&(n=!1,f&&!p&&null===i.end&&(i.end=i.start-r))):(i={start:h,end:null},n=!0,p?l&&(i.end=i.start-r,n=!1):i.end=(o||0===a)&&f?i.start+r:i.start-r,e.push(i)):n=!1,o=l}var d=e[e.length-1];return d&&null===d.end&&(d.end=d.start-r),e}},{key:"drawStems",value:function(){var e=this;this.notes.forEach(function(t){t.getStem()&&t.getStem().setContext(e.context).draw()},this)}},{key:"drawBeamLines",value:function(){this.checkContext();for(var t=["4","8","16","32","64"],e=this.notes[0],n=this.getBeamYToDraw(),i=e.getStemX(),r=this.render_options.beam_width*this.stem_direction,o=0;o<t.length;++o){for(var s=t[o],a=this.getBeamLines(s),u=0;u<a.length;++u){var l=a[u],c=l.start,h=this.getSlopeY(c,i,n,this.slope),f=l.end,p=this.getSlopeY(f,i,n,this.slope);this.context.beginPath(),this.context.moveTo(c,h),this.context.lineTo(c,h+r),this.context.lineTo(f+1,p+r),this.context.lineTo(f+1,p),this.context.closePath(),this.context.fill()}n+=1.5*r}}},{key:"preFormat",value:function(){return this}},{key:"postFormat",value:function(){this.postFormatted||("tabnotes"===this.notes[0].getCategory()||this.render_options.flat_beams?this.calculateFlatSlope():this.calculateSlope(),this.applyStemExtensions(),this.postFormatted=!0)}},{key:"draw",value:function(){this.checkContext(),this.setRendered(),this.unbeamable||(this.postFormatted||this.postFormat(),this.drawStems(),this.applyStyle(),this.drawBeamLines(),this.restoreStyle())}}]),Tt);function Tt(t,e){var n,i,r,o;if(function(t){if(!(t instanceof Tt))throw new TypeError("Cannot call a class as a function")}(this),(n=!(i=vt(Tt).call(this))||"object"!==mt(i)&&"function"!=typeof i?_t(this):i).setAttribute("type","Beam"),!t||t===[])throw new C.RuntimeError("BadArguments","No notes provided for beam.");if(1===t.length)throw new C.RuntimeError("BadArguments","Too few notes for beam.");if(n.ticks=t[0].getIntrinsicTicks(),n.ticks>=G.durationToTicks("4"))throw new C.RuntimeError("BadArguments","Beams can only be applied to notes shorter than a quarter note.");for(n.stem_direction=ut.UP,r=0;r<t.length;++r)if((o=t[r]).hasStem()){n.stem_direction=o.getStemDirection();break}var s=n.stem_direction;for(e&&"stavenotes"===t[0].getCategory()?s=Et(t):e&&"tabnotes"===t[0].getCategory()&&(s=-1<t.reduce(function(t,e){return t+e.stem_direction},0)?ut.UP:ut.DOWN),r=0;r<t.length;++r)o=t[r],e&&(o.setStemDirection(s),n.stem_direction=s),o.setBeam(_t(n));return n.postFormatted=!1,n.notes=t,n.beam_count=n.getBeamCount(),n.break_on_indices=[],n.render_options={beam_width:5,max_slope:.25,min_slope:-.25,slope_iterations:20,slope_cost:100,show_stemlets:!1,stemlet_extension:7,partial_beam_length:10,flat_beams:!1,min_flat_beam_offset:15},n}function kt(t){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Rt(t,e,n){return e&&Mt(t.prototype,e),n&&Mt(t,n),t}function Lt(t,e){return(Lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var At=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lt(t,e)}(Ct,x),Rt(Ct,null,[{key:"Mode",get:function(){return{STRICT:1,SOFT:2,FULL:3}}}]),Rt(Ct,[{key:"getTotalTicks",value:function(){return this.totalTicks}},{key:"getTicksUsed",value:function(){return this.ticksUsed}},{key:"getLargestTickWidth",value:function(){return this.largestTickWidth}},{key:"getSmallestTickCount",value:function(){return this.smallestTickCount}},{key:"getTickables",value:function(){return this.tickables}},{key:"getMode",value:function(){return this.mode}},{key:"setMode",value:function(t){return this.mode=t,this}},{key:"getResolutionMultiplier",value:function(){return this.resolutionMultiplier}},{key:"getActualResolution",value:function(){return this.resolutionMultiplier*this.time.resolution}},{key:"setStave",value:function(t){return this.stave=t,this.boundingBox=null,this}},{key:"getBoundingBox",value:function(){var t,e,n,i;if(!this.boundingBox){if(!this.stave)throw new C.RERR("NoStave","Can't get bounding box without stave.");for(t=this.stave,e=null,i=0;i<this.tickables.length;++i)this.tickables[i].setStave(t),(n=this.tickables[i].getBoundingBox())&&(e=e?e.mergeWith(n):n);this.boundingBox=e}return this.boundingBox}},{key:"getVoiceGroup",value:function(){if(!this.voiceGroup)throw new C.RERR("NoVoiceGroup","No voice group for voice.");return this.voiceGroup}},{key:"setVoiceGroup",value:function(t){return this.voiceGroup=t,this}},{key:"setStrict",value:function(t){return this.mode=t?Ct.Mode.STRICT:Ct.Mode.SOFT,this}},{key:"isComplete",value:function(){return this.mode!==Ct.Mode.STRICT&&this.mode!==Ct.Mode.FULL||this.ticksUsed.equals(this.totalTicks)}},{key:"addTickable",value:function(t){if(!t.shouldIgnoreTicks()){var e=t.getTicks();if(this.ticksUsed.add(e),(this.mode===Ct.Mode.STRICT||this.mode===Ct.Mode.FULL)&&this.ticksUsed.greaterThan(this.totalTicks))throw this.ticksUsed.subtract(e),new C.RERR("BadArgument","Too many ticks.");e.lessThan(this.smallestTickCount)&&(this.smallestTickCount=e.clone()),this.resolutionMultiplier=this.ticksUsed.denominator,this.totalTicks.add(0,this.ticksUsed.denominator)}return this.tickables.push(t),t.setVoice(this),this}},{key:"addTickables",value:function(t){for(var e=0;e<t.length;++e)this.addTickable(t[e]);return this}},{key:"preFormat",value:function(){var e=this;return this.preFormatted||(this.tickables.forEach(function(t){t.getStave()||t.setStave(e.stave)}),this.preFormatted=!0),this}},{key:"draw",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.context,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.stave;this.setRendered();for(var n=null,i=0;i<this.tickables.length;++i){var r=this.tickables[i];if(e&&r.setStave(e),!r.getStave())throw new C.RuntimeError("MissingStave","The voice cannot draw tickables without staves.");if(0===i&&(n=r.getBoundingBox()),0<i&&n){var o=r.getBoundingBox();o&&n.mergeWith(o)}r.setContext(t),r.draw()}this.boundingBox=n}}]),Ct);function Ct(t){var e,n,i;if(function(t){if(!(t instanceof Ct))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=Ot(Ct).call(this))||"object"!==kt(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","Voice"),"string"==typeof t){var r=t.match(/(\d+)\/(\d+)/);r&&(t={num_beats:r[1],beat_value:r[2],resolution:G.RESOLUTION})}return e.time=C.Merge({num_beats:4,beat_value:4,resolution:G.RESOLUTION},t),e.totalTicks=new p(e.time.num_beats*(e.time.resolution/e.time.beat_value),1),e.resolutionMultiplier=1,e.tickables=[],e.ticksUsed=new p(0,1),e.smallestTickCount=e.totalTicks.clone(),e.largestTickWidth=0,e.stave=null,e.mode=Ct.Mode.STRICT,e.voiceGroup=null,e}function It(t){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nt(t){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ft(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Bt(t,e,n){return e&&Ft(t.prototype,e),n&&Ft(t,n),t}function Dt(t,e){return(Dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jt(t,e,n,i,r){if(e!==Vt.type.BOLD_DOUBLE_LEFT&&e!==Vt.type.BOLD_DOUBLE_RIGHT)throw new C.RERR("InvalidConnector","A REPEAT_BEGIN or REPEAT_END type must be provided.");var o=3,s=3.5;e===Vt.type.BOLD_DOUBLE_RIGHT&&(o=-5,s=3),t.fillRect(n+o,i,1,r-i),t.fillRect(n-2,i,s,r-i)}var Vt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dt(t,e)}(Gt,x),Bt(Gt,null,[{key:"type",get:function(){return{SINGLE_RIGHT:0,SINGLE_LEFT:1,SINGLE:1,DOUBLE:2,BRACE:3,BRACKET:4,BOLD_DOUBLE_LEFT:5,BOLD_DOUBLE_RIGHT:6,THIN_DOUBLE:7,NONE:8}}},{key:"typeString",get:function(){return{singleRight:Gt.type.SINGLE_RIGHT,singleLeft:Gt.type.SINGLE_LEFT,single:Gt.type.SINGLE,double:Gt.type.DOUBLE,brace:Gt.type.BRACE,bracket:Gt.type.BRACKET,boldDoubleLeft:Gt.type.BOLD_DOUBLE_LEFT,boldDoubleRight:Gt.type.BOLD_DOUBLE_RIGHT,thinDouble:Gt.type.THIN_DOUBLE,none:Gt.type.NONE}}}]),Bt(Gt,[{key:"setType",value:function(t){return(t="string"==typeof t?Gt.typeString[t]:t)>=Gt.type.SINGLE_RIGHT&&t<=Gt.type.NONE&&(this.type=t),this}},{key:"setText",value:function(t,e){return this.texts.push({content:t,options:C.Merge({shift_x:0,shift_y:0},e)}),this}},{key:"setFont",value:function(t){C.Merge(this.font,t)}},{key:"setXShift",value:function(t){if("number"!=typeof t)throw C.RERR("InvalidType","x_shift must be a Number");return this.x_shift=t,this}},{key:"draw",value:function(){var t=this.checkContext();this.setRendered();var e=this.top_stave.getYForLine(0),n=this.bottom_stave.getYForLine(this.bottom_stave.getNumLines()-1)+this.thickness,i=this.width,r=this.top_stave.getX();this.type!==Gt.type.SINGLE_RIGHT&&this.type!==Gt.type.BOLD_DOUBLE_RIGHT&&this.type!==Gt.type.THIN_DOUBLE||(r=this.top_stave.getX()+this.top_stave.width);var o=n-e;switch(this.type){case Gt.type.SINGLE:case Gt.type.SINGLE_LEFT:case Gt.type.SINGLE_RIGHT:i=1;break;case Gt.type.DOUBLE:r-=this.width+2;break;case Gt.type.BRACE:i=12;var s=this.top_stave.getX()-2+this.x_shift,a=e,u=s,l=n,c=s-i,h=a+o/2,f=c-.9*i,p=a+.2*o,d=s+1.1*i,b=h-.135*o,y=d,m=h+.135*o,g=f,v=l-.2*o,_=c-i,S=v,x=s+.4*i,w=h+.135*o,E=x,P=h-.135*o,T=_,k=p;t.beginPath(),t.moveTo(s,a),t.bezierCurveTo(f,p,d,b,c,h),t.bezierCurveTo(y,m,g,v,u,l),t.bezierCurveTo(_,S,x,w,c,h),t.bezierCurveTo(E,P,T,k,s,a),t.fill(),t.stroke();break;case Gt.type.BRACKET:o=(n+=4)-(e-=4),D.renderGlyph(t,r-5,e-3,40,"v1b",!0),D.renderGlyph(t,r-5,n+3,40,"v10",!0),r-=this.width+2;break;case Gt.type.BOLD_DOUBLE_LEFT:jt(t,this.type,r+this.x_shift,e,n);break;case Gt.type.BOLD_DOUBLE_RIGHT:jt(t,this.type,r,e,n);break;case Gt.type.THIN_DOUBLE:i=1;break;case Gt.type.NONE:break;default:throw new C.RERR("InvalidType","The provided StaveConnector.type (".concat(this.type,") is invalid"))}this.type!==Gt.type.BRACE&&this.type!==Gt.type.BOLD_DOUBLE_LEFT&&this.type!==Gt.type.BOLD_DOUBLE_RIGHT&&this.type!==Gt.type.NONE&&t.fillRect(r,e,i,o),this.type===Gt.type.THIN_DOUBLE&&t.fillRect(r-3,e,i,o),t.save(),t.lineWidth=2,t.setFont(this.font.family,this.font.size,this.font.weight);for(var O=0;O<this.texts.length;O++){var M=this.texts[O],R=t.measureText(""+M.content).width,L=this.top_stave.getX()-R-24+M.options.shift_x,A=(this.top_stave.getYForLine(0)+this.bottom_stave.getBottomLineY())/2+M.options.shift_y;t.fillText(""+M.content,L,A+4)}t.restore()}}]),Gt);function Gt(t,e){var n,i,r;return function(t){if(!(t instanceof Gt))throw new TypeError("Cannot call a class as a function")}(this),(i=this,n=!(r=Nt(Gt).call(this))||"object"!==It(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i):r).setAttribute("type","StaveConnector"),n.thickness=G.STAVE_LINE_THICKNESS,n.width=3,n.top_stave=t,n.bottom_stave=e,n.type=Gt.type.DOUBLE,n.font={family:"times",size:16,weight:"normal"},n.x_shift=0,n.texts=[],n}function Wt(t){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ht(t,e){return(Ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ht(t,e)}(zt,x),function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(zt.prototype,[{key:"reset",value:function(){return this}},{key:"getTicks",value:function(){return this.ticks}},{key:"shouldIgnoreTicks",value:function(){return this.ignore_ticks}},{key:"getWidth",value:function(){return this.width}},{key:"getFormatterMetrics",value:function(){return this.formatterMetrics}},{key:"setXShift",value:function(t){this.x_shift=t}},{key:"getCenterXShift",value:function(){return this.isCenterAligned()?this.center_x_shift:0}},{key:"isCenterAligned",value:function(){return this.align_center}},{key:"setCenterAlignment",value:function(t){return this.align_center=t,this}},{key:"getVoice",value:function(){if(!this.voice)throw new C.RERR("NoVoice","Tickable has no voice.");return this.voice}},{key:"setVoice",value:function(t){this.voice=t}},{key:"getTuplet",value:function(){return this.tuplet}},{key:"resetTuplet",value:function(t){var e,n;if(t){var i=this.tupletStack.indexOf(t);return-1!==i&&(this.tupletStack.splice(i,1),e=t.getNoteCount(),n=t.getNotesOccupied(),this.applyTickMultiplier(e,n)),this}for(;this.tupletStack.length;)e=(t=this.tupletStack.pop()).getNoteCount(),n=t.getNotesOccupied(),this.applyTickMultiplier(e,n);return this}},{key:"setTuplet",value:function(t){if(t){this.tupletStack.push(t);var e=t.getNoteCount(),n=t.getNotesOccupied();this.applyTickMultiplier(n,e)}return this.tuplet=t,this}},{key:"addToModifierContext",value:function(t){this.modifierContext=t,this.preFormatted=!1}},{key:"addModifier",value:function(t){return this.modifiers.push(t),this.preFormatted=!1,this}},{key:"getModifiers",value:function(){return this.modifiers}},{key:"setTickContext",value:function(t){this.tickContext=t,this.preFormatted=!1}},{key:"preFormat",value:function(){this.preFormatted||(this.width=0,this.modifierContext&&(this.modifierContext.preFormat(),this.width+=this.modifierContext.getWidth()))}},{key:"postFormat",value:function(){return this.postFormatted||(this.postFormatted=!0),this}},{key:"getIntrinsicTicks",value:function(){return this.intrinsicTicks}},{key:"setIntrinsicTicks",value:function(t){this.intrinsicTicks=t,this.ticks=this.tickMultiplier.clone().multiply(this.intrinsicTicks)}},{key:"getTickMultiplier",value:function(){return this.tickMultiplier}},{key:"applyTickMultiplier",value:function(t,e){this.tickMultiplier.multiply(t,e),this.ticks=this.tickMultiplier.clone().multiply(this.intrinsicTicks)}},{key:"setDuration",value:function(t){var e=t.numerator*(G.RESOLUTION/t.denominator);this.ticks=this.tickMultiplier.clone().multiply(e),this.intrinsicTicks=this.ticks.value()}}]),zt);function zt(){var t,e,n;return function(t){if(!(t instanceof zt))throw new TypeError("Cannot call a class as a function")}(this),(e=this,t=!(n=Ut(zt).call(this))||"object"!==Wt(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):n).setAttribute("type","Tickable"),t.ticks=new p(0,1),t.intrinsicTicks=0,t.tickMultiplier=new p(1,1),t.width=0,t.x_shift=0,t.voice=null,t.tickContext=null,t.modifierContext=null,t.modifiers=[],t.preFormatted=!1,t.postFormatted=!1,t.tuplet=null,t.tupletStack=[],t.align_center=!1,t.center_x_shift=0,t.ignore_ticks=!1,t.formatterMetrics={freedom:{left:0,right:0},duration:"",iterations:0,space:{used:0,mean:0,deviation:0}},t}function Xt(t){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kt(t){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Jt(t,e,n){return e&&qt(t.prototype,e),n&&qt(t,n),t}function Qt(t,e){return(Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Qt(t,e)}($t,Yt),Jt($t,null,[{key:"plotMetrics",value:function(o,s,t){var e=s.getMetrics(),n=s.getAbsoluteX()-e.modLeftPx-e.extraLeftPx,i=s.getAbsoluteX()-e.extraLeftPx,r=s.getAbsoluteX(),a=s.getAbsoluteX()+e.noteWidth,u=s.getAbsoluteX()+e.noteWidth+e.extraRightPx,l=s.getAbsoluteX()+e.noteWidth+e.extraRightPx+e.modRightPx,c=l+s.getFormatterMetrics().freedom.right,h=l-n;o.save(),o.setFont("Arial",8,""),o.fillText(Math.round(h)+"px",n+s.getXShift(),t);var f=t+7;function p(t,e,n,i){var r=3<arguments.length&&void 0!==i?i:f;o.beginPath(),o.setStrokeStyle(n),o.setFillStyle(n),o.setLineWidth(3),o.moveTo(t+s.getXShift(),r),o.lineTo(e+s.getXShift(),r),o.stroke()}p(n,i,"red"),p(i,r,"#999"),p(r,a,"green"),p(a,u,"#999"),p(u,l,"red"),p(l,c,"#DD0"),p(n-s.getXShift(),n,"#BBB"),C.drawDot(o,r+s.getXShift(),f,"blue");var d=s.getFormatterMetrics();if(0<d.iterations){var b=d.space.deviation,y=0<=b?"+":"";o.setFillStyle("red"),o.fillText(y+Math.round(b),r+s.getXShift(),t-10)}o.restore()}},{key:"CATEGORY",get:function(){return"note"}},{key:"STAVEPADDING",get:function(){return 12}}]),Jt($t,[{key:"getPlayNote",value:function(){return this.playNote}},{key:"setPlayNote",value:function(t){return this.playNote=t,this}},{key:"isRest",value:function(){return!1}},{key:"addStroke",value:function(t,e){return e.setNote(this),e.setIndex(t),this.modifiers.push(e),this.setPreFormatted(!1),this}},{key:"getStave",value:function(){return this.stave}},{key:"setStave",value:function(t){return this.stave=t,this.setYs([t.getYForLine(0)]),this.context=this.stave.context,this}},{key:"getCategory",value:function(){return $t.CATEGORY}},{key:"setContext",value:function(t){return this.context=t,this}},{key:"getExtraLeftPx",value:function(){return this.extraLeftPx}},{key:"getExtraRightPx",value:function(){return this.extraRightPx}},{key:"setExtraLeftPx",value:function(t){return this.extraLeftPx=t,this}},{key:"setExtraRightPx",value:function(t){return this.extraRightPx=t,this}},{key:"shouldIgnoreTicks",value:function(){return this.ignore_ticks}},{key:"getLineNumber",value:function(){return 0}},{key:"getLineForRest",value:function(){return 0}},{key:"getGlyph",value:function(){return this.glyph}},{key:"getGlyphWidth",value:function(){return this.glyph.getWidth(this.render_options.glyph_font_scale)}},{key:"setYs",value:function(t){return this.ys=t,this}},{key:"getYs",value:function(){if(0===this.ys.length)throw new C.RERR("NoYValues","No Y-values calculated for this note.");return this.ys}},{key:"getYForTopText",value:function(t){if(!this.stave)throw new C.RERR("NoStave","No stave attached to this note.");return this.stave.getYForTopText(t)}},{key:"getBoundingBox",value:function(){return null}},{key:"getVoice",value:function(){if(!this.voice)throw new C.RERR("NoVoice","Note has no voice.");return this.voice}},{key:"setVoice",value:function(t){return this.voice=t,this.preFormatted=!1,this}},{key:"getTickContext",value:function(){return this.tickContext}},{key:"setTickContext",value:function(t){return this.tickContext=t,this.preFormatted=!1,this}},{key:"getDuration",value:function(){return this.duration}},{key:"isDotted",value:function(){return 0<this.dots}},{key:"hasStem",value:function(){return!1}},{key:"getDots",value:function(){return this.dots}},{key:"getNoteType",value:function(){return this.noteType}},{key:"setBeam",value:function(){return this}},{key:"setModifierContext",value:function(t){return this.modifierContext=t,this}},{key:"addModifier",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t.setNote(this),t.setIndex(e),this.modifiers.push(t),this.setPreFormatted(!1),this}},{key:"getModifierStartXY",value:function(){if(!this.preFormatted)throw new C.RERR("UnformattedNote","Can't call GetModifierStartXY on an unformatted note");return{x:this.getAbsoluteX(),y:this.ys[0]}}},{key:"getMetrics",value:function(){if(!this.preFormatted)throw new C.RERR("UnformattedNote","Can't call getMetrics on an unformatted note.");var t=0,e=0;null!=this.modifierContext&&(t=this.modifierContext.state.left_shift,e=this.modifierContext.state.right_shift);var n=this.getWidth();return{width:n,noteWidth:n-t-e-this.extraLeftPx-this.extraRightPx,left_shift:this.x_shift,modLeftPx:t,modRightPx:e,extraLeftPx:this.extraLeftPx,extraRightPx:this.extraRightPx}}},{key:"setWidth",value:function(t){this.width=t}},{key:"getWidth",value:function(){if(!this.preFormatted)throw new C.RERR("UnformattedNote","Can't call GetWidth on an unformatted note.");return this.width+(this.modifierContext?this.modifierContext.getWidth():0)}},{key:"setXShift",value:function(t){return this.x_shift=t,this}},{key:"getXShift",value:function(){return this.x_shift}},{key:"getX",value:function(){if(!this.tickContext)throw new C.RERR("NoTickContext","Note needs a TickContext assigned for an X-Value");return this.tickContext.getX()+this.x_shift}},{key:"getAbsoluteX",value:function(){if(!this.tickContext)throw new C.RERR("NoTickContext","Note needs a TickContext assigned for an X-Value");var t=this.tickContext.getX();return this.stave&&(t+=this.stave.getNoteStartX()+this.render_options.stave_padding),this.isCenterAligned()&&(t+=this.getCenterXShift()),t}},{key:"setPreFormatted",value:function(t){if(this.preFormatted=t,this.preFormatted){var e=this.tickContext.getExtraPx();this.left_modPx=Math.max(this.left_modPx,e.left),this.right_modPx=Math.max(this.right_modPx,e.right)}}}]),$t);function $t(t){var e,n,i;if(function(t){if(!(t instanceof $t))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=Kt($t).call(this))||"object"!==Xt(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","Note"),!t)throw new C.RuntimeError("BadArguments","Note must have valid initialization data to identify duration and type.");var r=G.parseNoteData(t);if(!r)throw new C.RuntimeError("BadArguments","Invalid note initialization object: ".concat(JSON.stringify(t)));if(e.duration=r.duration,e.dots=r.dots,e.noteType=r.type,t.duration_override?e.setDuration(t.duration_override):e.setIntrinsicTicks(r.ticks),e.modifiers=[],e.glyph=G.durationToGlyph(e.duration,e.noteType),e.positions&&("object"!==Xt(e.positions)||!e.positions.length))throw new C.RuntimeError("BadArguments","Note keys must be array type.");return e.playNote=null,e.tickContext=null,e.modifierContext=null,e.ignore_ticks=!1,e.width=0,e.extraLeftPx=0,e.extraRightPx=0,e.x_shift=0,e.left_modPx=0,e.right_modPx=0,e.voice=null,e.preFormatted=!1,e.ys=[],t.align_center&&e.setCenterAlignment(t.align_center),e.stave=null,e.render_options={annotation_spacing:5,stave_padding:$t.STAVEPADDING},e}function te(t){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ee(t,e,n){return(ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ne(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ne(t){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ie(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function re(t,e,n){return e&&ie(t.prototype,e),n&&ie(t,n),t}function oe(t,e){return(oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var se=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oe(t,e)}(ae,Zt),re(ae,null,[{key:"CATEGORY",get:function(){return"notehead"}}]),re(ae,[{key:"getCategory",value:function(){return ae.CATEGORY}},{key:"getWidth",value:function(){return this.width}},{key:"isDisplaced",value:function(){return!0===this.displaced}},{key:"getGlyph",value:function(){return this.glyph}},{key:"setX",value:function(t){return this.x=t,this}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(t){return this.y=t,this}},{key:"getLine",value:function(){return this.line}},{key:"setLine",value:function(t){return this.line=t,this}},{key:"getAbsoluteX",value:function(){var t=this.preFormatted?ee(ne(ae.prototype),"getAbsoluteX",this).call(this):this.x,e=ut.WIDTH/2;return t+(this.displaced?(this.width-e)*this.stem_direction:0)}},{key:"getBoundingBox",value:function(){if(!this.preFormatted)throw new C.RERR("UnformattedNote","Can't call getBoundingBox on an unformatted note.");var t=this.stave.getSpacingBetweenLines(),e=t/2,n=this.y-e;return new G.BoundingBox(this.getAbsoluteX(),n,this.width,t)}},{key:"setStave",value:function(t){var e=this.getLine();return this.stave=t,this.setY(t.getYForNote(e)),this.context=this.stave.context,this}},{key:"preFormat",value:function(){if(this.preFormatted)return this;var t=this.getWidth()+this.extraLeftPx+this.extraRightPx;return this.setWidth(t),this.setPreFormatted(!0),this}},{key:"draw",value:function(){this.checkContext(),this.setRendered();var t=this.context,e=this.getAbsoluteX(),n=this.y;!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];se.DEBUG&&C.L("Vex.Flow.NoteHead",e)}("Drawing note head '",this.note_type,this.duration,"' at",e,n);var i=this.stem_direction,r=this.render_options.glyph_font_scale;if(this.style&&this.applyStyle(t),"s"===this.note_type){var o=this.stave.getSpacingBetweenLines();!function(t,e,n,i,r,o){var s=G.SLASH_NOTEHEAD_WIDTH;t.save(),t.setLineWidth(G.STEM_WIDTH);var a=!1;if(2<G.durationToNumber(e)&&(a=!0),a||(n-=G.STEM_WIDTH/2*r),t.beginPath(),t.moveTo(n,i+o),t.lineTo(n,i+1),t.lineTo(n+s,i-o),t.lineTo(n+s,i),t.lineTo(n,i+o),t.closePath(),a?t.fill():t.stroke(),G.durationToFraction(e).equals(.5))for(var u=[-3,-1,s+1,s+3],l=0;l<u.length;l++)t.beginPath(),t.moveTo(n+u[l],i-10),t.lineTo(n+u[l],i+11),t.stroke();t.restore()}(t,this.duration,e,n,i,o)}else D.renderGlyph(t,e,n,r,this.glyph_code);this.style&&this.restoreStyle(t)}}]),ae);function ae(t){var e,n,i;if(function(t){if(!(t instanceof ae))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=ne(ae).call(this,t))||"object"!==te(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","NoteHead"),e.index=t.index,e.x=t.x||0,e.y=t.y||0,e.note_type=t.note_type,e.duration=t.duration,e.displaced=t.displaced||!1,e.stem_direction=t.stem_direction||Ne.STEM_UP,e.line=t.line,e.glyph=G.durationToGlyph(e.duration,e.note_type),!e.glyph)throw new C.RuntimeError("BadArguments","No glyph found for duration '".concat(e.duration,"' and type '").concat(e.note_type,"'"));return e.glyph_code=e.glyph.code_head,e.x_shift=t.x_shift,t.custom_glyph_code&&(e.custom_glyph=!0,e.glyph_code=t.custom_glyph_code),e.style=t.style,e.slashed=t.slashed,C.Merge(e.render_options,{glyph_font_scale:t.glyph_font_scale||G.DEFAULT_NOTATION_FONT_SCALE,stroke_px:3}),e.setWidth(e.glyph.getWidth(e.render_options.glyph_font_scale)),e}function ue(t){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ce(t,e){return(ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var he=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ce(t,e)}(fe,Zt),function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(fe.prototype,[{key:"getStem",value:function(){return this.stem}},{key:"setStem",value:function(t){return this.stem=t,this}},{key:"buildStem",value:function(){var t=new ut;return this.setStem(t),this}},{key:"buildFlag",value:function(){var t=this.glyph,e=null===this.beam;if(t&&t.flag&&e){var n=this.getStemDirection()===ut.DOWN?t.code_flag_downstem:t.code_flag_upstem;this.flag=new D(n,this.render_options.glyph_font_scale)}}},{key:"getStemLength",value:function(){return ut.HEIGHT+this.getStemExtension()}},{key:"getBeamCount",value:function(){var t=this.getGlyph();return t?t.beam_count:0}},{key:"getStemMinumumLength",value:function(){var t=G.durationToFraction(this.duration).value()<=1?0:20;switch(this.duration){case"8":null==this.beam&&(t=35);break;case"16":t=null==this.beam?35:25;break;case"32":t=null==this.beam?45:35;break;case"64":t=null==this.beam?50:40;break;case"128":t=null==this.beam?55:45}return t}},{key:"getStemDirection",value:function(){return this.stem_direction}},{key:"setStemDirection",value:function(t){if((t=t||ut.UP)!==ut.UP&&t!==ut.DOWN)throw new C.RERR("BadArgument","Invalid stem direction: ".concat(t));return this.stem_direction=t,this.stem&&(this.stem.setDirection(t),this.stem.setExtension(this.getStemExtension())),this.reset(),this.flag&&this.buildFlag(),this.beam=null,this.preFormatted&&this.preFormat(),this}},{key:"getStemX",value:function(){var t=this.getAbsoluteX()+this.x_shift,e=this.getAbsoluteX()+this.x_shift+this.getGlyphWidth();return this.stem_direction===ut.DOWN?t:e}},{key:"getCenterGlyphX",value:function(){return this.getAbsoluteX()+this.x_shift+this.getGlyphWidth()/2}},{key:"getStemExtension",value:function(){var t=this.getGlyph();return null!=this.stemExtensionOverride?this.stemExtensionOverride:t?1===this.getStemDirection()?t.stem_up_extension:t.stem_down_extension:0}},{key:"setStemLength",value:function(t){return this.stemExtensionOverride=t-ut.HEIGHT,this}},{key:"getStemExtents",value:function(){return this.stem.getExtents()}},{key:"setBeam",value:function(t){return this.beam=t,this}},{key:"getYForTopText",value:function(t){var e=this.getStemExtents();return this.hasStem()?Math.min(this.stave.getYForTopText(t),e.topY-this.render_options.annotation_spacing*(t+1)):this.stave.getYForTopText(t)}},{key:"getYForBottomText",value:function(t){var e=this.getStemExtents();return this.hasStem()?Math.max(this.stave.getYForTopText(t),e.baseY+this.render_options.annotation_spacing*t):this.stave.getYForBottomText(t)}},{key:"hasFlag",value:function(){return G.durationToGlyph(this.duration).flag&&!this.beam}},{key:"postFormat",value:function(){return this.beam&&this.beam.postFormat(),this.postFormatted=!0,this}},{key:"drawStem",value:function(t){this.checkContext(),this.setRendered(),this.setStem(new ut(t)),this.stem.setContext(this.context).draw()}}]),fe);function fe(t){var e,n,i;return function(t){if(!(t instanceof fe))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=le(fe).call(this,t))||"object"!==ue(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","StemmableNote"),e.stem=null,e.stemExtensionOverride=null,e.beam=null,e}function pe(t){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function de(t){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function be(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ye(t,e,n){return e&&be(t.prototype,e),n&&be(t,n),t}function me(t,e){return(me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ge=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&me(t,e)}(ve,x),ye(ve,null,[{key:"CATEGORY",get:function(){return"none"}},{key:"Position",get:function(){return{LEFT:1,RIGHT:2,ABOVE:3,BELOW:4}}},{key:"PositionString",get:function(){return{above:ve.Position.ABOVE,below:ve.Position.BELOW,left:ve.Position.LEFT,right:ve.Position.RIGHT}}}]),ye(ve,[{key:"getCategory",value:function(){return ve.CATEGORY}},{key:"getWidth",value:function(){return this.width}},{key:"setWidth",value:function(t){return this.width=t,this}},{key:"getNote",value:function(){return this.note}},{key:"setNote",value:function(t){return this.note=t,this}},{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(t){return this.index=t,this}},{key:"getModifierContext",value:function(){return this.modifier_context}},{key:"setModifierContext",value:function(t){return this.modifier_context=t,this}},{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(t){return this.position="string"==typeof t?ve.PositionString[t]:t,this}},{key:"setTextLine",value:function(t){return this.text_line=t,this}},{key:"setYShift",value:function(t){return this.y_shift=t,this}},{key:"setSpacingFromNextModifier",value:function(t){this.spacingFromNextModifier=t}},{key:"getSpacingFromNextModifier",value:function(){return this.spacingFromNextModifier}},{key:"setXShift",value:function(t){this.x_shift=0,this.position===ve.Position.LEFT?this.x_shift-=t:this.x_shift+=t}},{key:"getXShift",value:function(){return this.x_shift}},{key:"draw",value:function(){throw this.checkContext(),new C.RERR("MethodNotImplemented","draw() not implemented for this modifier.")}},{key:"alignSubNotesWithNote",value:function(t,n){var e=n.getTickContext(),i=e.getExtraPx(),r=e.getX()-i.left-i.extraLeft+this.getSpacingFromNextModifier();t.forEach(function(t){var e=t.getTickContext();t.setStave(n.stave),e.setXOffset(r)})}}]),ve);function ve(){var t,e,n;return function(t){if(!(t instanceof ve))throw new TypeError("Cannot call a class as a function")}(this),(e=this,t=!(n=de(ve).call(this))||"object"!==pe(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):n).setAttribute("type","Modifier"),t.width=0,t.note=null,t.index=null,t.text_line=0,t.position=ve.Position.LEFT,t.modifier_context=null,t.x_shift=0,t.y_shift=0,t.spacingFromNextModifier=0,t}function _e(t){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Se(t){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function we(t,e,n){return e&&xe(t.prototype,e),n&&xe(t,n),t}function Ee(t,e){return(Ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pe=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Ee(t,e)}(Te,ge),we(Te,null,[{key:"format",value:function(t,e){var n=e.right_shift;if(!t||0===t.length)return!1;for(var i=[],r={},o=0;o<t.length;++o){var s=t[o],a=s.getNote(),u=void 0,l=void 0;l="function"==typeof a.getKeyProps?(u=a.getKeyProps()[s.getIndex()]).displaced?a.getExtraRightPx():0:(u={line:.5},0);var c=a.getAttribute("id");i.push({line:u.line,note:a,note_id:c,dot:s}),r[c]=Math.max(r[c]||l,l)}i.sort(function(t,e){return e.line-t.line});for(var h=n,f=0,p=null,d=null,b=null,y=0,m=0;m<i.length;++m){var g=i[m],v=g.dot,_=g.note,S=g.note_id,x=g.line;x===p&&_===d||(h=r[S]),_.isRest()||x===p||(.5===Math.abs(x%1)?y=0:(y=.5,null==d||d.isRest()||p-x!=.5?x+y===b&&(y=-.5):y=-.5)),_.isRest()?v.dot_shiftY+=-y:v.dot_shiftY=-y,b=x+y,v.setXShift(h),f=(h+=v.getWidth()+1)>f?h:f,p=x,d=_}return e.right_shift+=f,!0}},{key:"CATEGORY",get:function(){return"dots"}}]),we(Te,[{key:"getCategory",value:function(){return Te.CATEGORY}},{key:"setNote",value:function(t){this.note=t,"gracenotes"===this.note.getCategory()&&(this.radius*=.5,this.setWidth(3))}},{key:"setDotShiftY",value:function(t){return this.dot_shiftY=t,this}},{key:"draw",value:function(){if(this.checkContext(),this.setRendered(),!this.note||null===this.index)throw new C.RERR("NoAttachedNote","Can't draw dot without a note and index.");var t=this.note.stave.options.spacing_between_lines_px,e=this.note.getModifierStartXY(this.position,this.index,{forceFlagRight:!0});"tabnotes"===this.note.getCategory()&&(e.y=this.note.getStemExtents().baseY);var n=e.x+this.x_shift+this.width-this.radius,i=e.y+this.y_shift+this.dot_shiftY*t,r=this.context;r.beginPath(),r.arc(n,i,this.radius,0,2*Math.PI,!1),r.fill()}}]),Te);function Te(){var t,e,n;return function(t){if(!(t instanceof Te))throw new TypeError("Cannot call a class as a function")}(this),(e=this,t=!(n=Se(Te).call(this))||"object"!==_e(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):n).setAttribute("type","Dot"),t.note=null,t.index=null,t.position=ge.Position.RIGHT,t.radius=2,t.setWidth(5),t.dot_shiftY=0,t}function ke(t){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oe(){return(Oe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function Me(t,e,n){return(Me="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Re(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Re(t){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Le(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ae(t,e,n){return e&&Le(t.prototype,e),n&&Le(t,n),t}function Ce(t,e){return(Ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ie(t,e,n){var i=(e.isrest?0:1)*n;t.line+=i,t.maxLine+=i,t.minLine+=i,t.note.setKeyLine(0,t.note.getKeyLine(0)+i)}var Ne=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Ce(t,e)}(Fe,he),Ae(Fe,null,[{key:"format",value:function(t,e){if(!t||t.length<2)return!1;if(t[0].getStave())return Fe.formatByY(t,e);for(var n=[],i=0;i<t.length;i++){var r=t[i].getKeyProps(),o=r[0].line,s=r[r.length-1].line,a=t[i].getStemDirection(),u=t[i].getStemLength()/10,l=t[i].getStemMinumumLength()/10,c=void 0;s=t[i].isRest()?(c=o+t[i].glyph.line_above,o-t[i].glyph.line_below):(c=1===a?r[r.length-1].line+u:r[r.length-1].line,1===a?r[0].line:r[0].line-u),n.push({line:r[0].line,maxLine:c,minLine:s,isrest:t[i].isRest(),stemDirection:a,stemMax:u,stemMin:l,voice_shift:t[i].getVoiceShiftWidth(),is_displaced:t[i].isDisplaced(),note:t[i]})}var h=n.length,f=n[0],p=2<h?n[1]:null,d=2<h?n[2]:n[1];2===h&&-1===f.stemDirection&&1===d.stemDirection&&(f=n[1],d=n[0]);var b,y,m,g,v,_=Math.max(f.voice_shift,d.voice_shift),S=0;if(2!==h)return null!==p&&p.minLine<d.maxLine+.5&&(p.isrest||(b=Math.abs(p.line-(d.maxLine+.5)),b=Math.max(b,p.stemMin),p.minLine=p.line-b,p.note.setStemLength(10*b))),p.isrest&&!f.isrest&&!d.isrest&&(f.minLine<=p.maxLine||p.minLine<=d.maxLine)?p.maxLine-p.minLine<f.minLine-d.maxLine?(m=f,g=d,v=(y=p).line-C.MidLine(m.minLine,g.maxLine),y.note.setKeyLine(0,y.note.getKeyLine(0)-v),y.line-=v,y.maxLine-=v,y.minLine-=v):(S=_+3,p.note.setXShift(S)):f.isrest&&p.isrest&&d.isrest?(Ie(f,p,1),Ie(d,p,-1)):(p.isrest&&f.isrest&&p.minLine<=d.maxLine&&Ie(p,d,1),p.isrest&&d.isrest&&f.minLine<=p.maxLine&&Ie(p,f,-1),f.isrest&&f.minLine<=p.maxLine&&Ie(f,p,1),d.isrest&&p.minLine<=d.maxLine&&Ie(d,p,-1),(!f.isrest&&!p.isrest&&f.minLine<=p.maxLine+.5||!p.isrest&&!d.isrest&&p.minLine<=d.maxLine)&&(S=_+3,p.note.setXShift(S))),!0;var x=f.stemDirection===d.stemDirection?0:.5;return f.stemDirection===d.stemDirection&&f.minLine<=d.maxLine&&(f.isrest||(b=Math.abs(f.line-(d.maxLine+.5)),b=Math.max(b,f.stemMin),f.minLine=f.line-b,f.note.setStemLength(10*b))),f.minLine<=d.maxLine+x&&(f.isrest?Ie(f,d,1):d.isrest?Ie(d,f,-1):(S=_,f.stemDirection===d.stemDirection?f.note.setXShift(S+3):d.note.setXShift(S))),!0}},{key:"formatByY",value:function(t,e){for(var n=!0,i=0;i<t.length;i++)n=n&&null!=t[i].getStave();if(!n)throw new C.RERR("Stave Missing","All notes must have a stave - Vex.Flow.ModifierContext.formatMultiVoice!");for(var r=0,o=0;o<t.length-1;o++){var s=t[o],a=t[o+1];s.getStemDirection()===ut.DOWN&&(s=t[o+1],a=t[o]);var u=s.getKeyProps(),l=a.getKeyProps(),c=s.getStave().getYForLine(5-u[0].line+.5);a.getStave().getYForLine(5-l[l.length-1].line-.5)-c<0&&(r=s.getVoiceShiftWidth()+2,a.setXShift(r))}e.right_shift+=r}},{key:"postFormat",value:function(t){return!!t&&(t.forEach(function(t){return t.postFormat()}),!0)}},{key:"CATEGORY",get:function(){return"stavenotes"}},{key:"STEM_UP",get:function(){return ut.UP}},{key:"STEM_DOWN",get:function(){return ut.DOWN}},{key:"DEFAULT_LEDGER_LINE_OFFSET",get:function(){return 3}}]),Ae(Fe,[{key:"reset",value:function(){var e=this;Me(Re(Fe.prototype),"reset",this).call(this);var n=this.note_heads.map(function(t){return t.getStyle()});this.buildNoteHeads(),this.note_heads.forEach(function(t,e){return t.setStyle(n[e])}),this.stave&&this.note_heads.forEach(function(t){return t.setStave(e.stave)}),this.calcExtraPx()}},{key:"getCategory",value:function(){return Fe.CATEGORY}},{key:"buildStem",value:function(){var t=this.getGlyph();this.setStem(new ut({stem_up_y_offset:t.stem_up_y_offset,stem_down_y_offset:t.stem_down_y_offset,hide:!!this.isRest()}))}},{key:"buildNoteHeads",value:function(){this.note_heads=[];var t,e,n,i=this.getStemDirection(),r=this.getKeys(),o=null,s=null,a=!1;i===ut.UP?(t=0,e=r.length,n=1):i===ut.DOWN&&(t=r.length-1,n=e=-1);for(var u=t;u!==e;u+=n){var l=this.keyProps[u],c=l.line;null===o?o=c:0===(s=Math.abs(o-c))||.5===s?a=!a:(a=!1,this.use_default_head_x=!0),o=c;var h=new se({duration:this.duration,note_type:this.noteType,displaced:a,stem_direction:i,custom_glyph_code:l.code,glyph_font_scale:this.render_options.glyph_font_scale,x_shift:l.shift_right,line:l.line});this.note_heads[u]=h}}},{key:"autoStem",value:function(){this.minLine=this.keyProps[0].line,this.maxLine=this.keyProps[this.keyProps.length-1].line;var t=(this.minLine+this.maxLine)/2<3?ut.UP:ut.DOWN;this.setStemDirection(t)}},{key:"calculateKeyProps",value:function(){for(var e=null,t=0;t<this.keys.length;++t){var n=this.keys[t];this.glyph.rest&&(this.glyph.position=n);var i={octave_shift:this.octave_shift||0},r=G.keyProperties(n,this.clef,i);if(!r)throw new C.RuntimeError("BadArguments","Invalid key for note properties: ".concat(n));"R"===r.key&&("1"===this.duration||"w"===this.duration?r.line=4:r.line=3);var o=r.line;null===e?e=o:.5===Math.abs(e-o)&&(this.displaced=!0,r.displaced=!0,0<this.keyProps.length&&(this.keyProps[t-1].displaced=!0)),e=o,this.keyProps.push(r)}e=-1/0,this.keyProps.forEach(function(t){t.line<e&&C.W("Unsorted keys in note will be sorted. See https://github.com/0xfe/vexflow/issues/104 for details."),e=t.line}),this.keyProps.sort(function(t,e){return t.line-e.line})}},{key:"getBoundingBox",value:function(){if(!this.preFormatted)throw new C.RERR("UnformattedNote","Can't call getBoundingBox on an unformatted note.");var t=this.getMetrics(),e=t.width,n=t.modLeftPx,i=t.extraLeftPx,r=this.getAbsoluteX()-n-i,o=0,s=0,a=this.getStave().getSpacingBetweenLines()/2,u=2*a;if(this.isRest()){var l=this.ys[0],c=G.durationToFraction(this.duration);s=c.equals(1)||c.equals(2)?(o=l-a,l+a):(o=l-this.glyph.line_above*u,l+this.glyph.line_below*u)}else if(this.glyph.stem){var h=this.getStemExtents();h.baseY+=a*this.stem_direction,o=Math.min(h.topY,h.baseY),s=Math.max(h.topY,h.baseY)}else{s=o=null;for(var f=0;f<this.ys.length;++f){var p=this.ys[f];s=0===f?o=p:(o=Math.min(p,o),Math.max(p,s))}o-=a,s+=a}return new O(r,o,e,s-o)}},{key:"getLineNumber",value:function(t){if(!this.keyProps.length)throw new C.RERR("NoKeyProps","Can't get bottom note line, because note is not initialized properly.");for(var e=this.keyProps[0].line,n=0;n<this.keyProps.length;n++){var i=this.keyProps[n].line;t?e<i&&(e=i):i<e&&(e=i)}return e}},{key:"isRest",value:function(){return this.glyph.rest}},{key:"isChord",value:function(){return!this.isRest()&&1<this.keys.length}},{key:"hasStem",value:function(){return this.glyph.stem}},{key:"hasFlag",value:function(){return Me(Re(Fe.prototype),"hasFlag",this).call(this)&&!this.isRest()}},{key:"getStemX",value:function(){return"r"===this.noteType?this.getCenterGlyphX():Me(Re(Fe.prototype),"getStemX",this).call(this)+ut.WIDTH/(2*-this.getStemDirection())}},{key:"getYForTopText",value:function(t){var e=this.getStemExtents();return Math.min(this.stave.getYForTopText(t),e.topY-this.render_options.annotation_spacing*(t+1))}},{key:"getYForBottomText",value:function(t){var e=this.getStemExtents();return Math.max(this.stave.getYForTopText(t),e.baseY+this.render_options.annotation_spacing*t)}},{key:"setStave",value:function(e){Me(Re(Fe.prototype),"setStave",this).call(this,e);var t=this.note_heads.map(function(t){return t.setStave(e),t.getY()});if(this.setYs(t),this.stem){var n=this.getNoteHeadBounds(),i=n.y_top,r=n.y_bottom;this.stem.setYBounds(i,r)}return this}},{key:"getKeys",value:function(){return this.keys}},{key:"getKeyProps",value:function(){return this.keyProps}},{key:"isDisplaced",value:function(){return this.displaced}},{key:"setNoteDisplaced",value:function(t){return this.displaced=t,this}},{key:"getTieRightX",value:function(){var t=this.getAbsoluteX();return t+=this.getGlyphWidth()+this.x_shift+this.extraRightPx,this.modifierContext&&(t+=this.modifierContext.getExtraRightPx()),t}},{key:"getTieLeftX",value:function(){return this.getAbsoluteX()+(this.x_shift-this.extraLeftPx)}},{key:"getLineForRest",value:function(){var t=this.keyProps[0].line;if(1<this.keyProps.length){var e=this.keyProps[this.keyProps.length-1].line,n=Math.max(t,e),i=Math.min(t,e);t=C.MidLine(n,i)}return t}},{key:"getModifierStartXY",value:function(t,e,n){if(n=n||{},!this.preFormatted)throw new C.RERR("UnformattedNote","Can't call GetModifierStartXY on an unformatted note");if(0===this.ys.length)throw new C.RERR("NoYValues","No Y-Values calculated for this note.");var i,r=ge.Position,o=r.ABOVE,s=r.BELOW,a=r.LEFT,u=r.RIGHT,l=0;return t===a?l=-2:t===u?(l=this.getGlyphWidth()+this.x_shift+2,this.stem_direction===ut.UP&&this.hasFlag()&&(n.forceFlagRight||e===((i=this).getStemDirection()===ut.UP?i.keyProps.length-1:0))&&(l+=this.flag.getMetrics().width)):t!==s&&t!==o||(l=this.getGlyphWidth()/2),{x:this.getAbsoluteX()+l,y:this.ys[e]}}},{key:"setStyle",value:function(e){Me(Re(Fe.prototype),"setStyle",this).call(this,e),this.note_heads.forEach(function(t){return t.setStyle(e)}),this.stem.setStyle(e)}},{key:"setStemStyle",value:function(t){this.getStem().setStyle(t)}},{key:"getStemStyle",value:function(){return this.stem.getStyle()}},{key:"setLedgerLineStyle",value:function(t){this.ledgerLineStyle=t}},{key:"getLedgerLineStyle",value:function(){return this.ledgerLineStyle}},{key:"setFlagStyle",value:function(t){this.flagStyle=t}},{key:"getFlagStyle",value:function(){return this.flagStyle}},{key:"setKeyStyle",value:function(t,e){return this.note_heads[t].setStyle(e),this}},{key:"setKeyLine",value:function(t,e){return this.keyProps[t].line=e,this.reset(),this}},{key:"getKeyLine",value:function(t){return this.keyProps[t].line}},{key:"addToModifierContext",value:function(t){this.setModifierContext(t);for(var e=0;e<this.modifiers.length;++e)this.modifierContext.addModifier(this.modifiers[e]);return this.modifierContext.addModifier(this),this.setPreFormatted(!1),this}},{key:"addModifier",value:function(t,e){return e.setNote(this),e.setIndex(t),this.modifiers.push(e),this.setPreFormatted(!1),this}},{key:"addAccidental",value:function(t,e){return this.addModifier(t,e)}},{key:"addArticulation",value:function(t,e){return this.addModifier(t,e)}},{key:"addAnnotation",value:function(t,e){return this.addModifier(t,e)}},{key:"addDot",value:function(t){var e=new Pe;return e.setDotShiftY(this.glyph.dot_shiftY),this.dots++,this.addModifier(t,e)}},{key:"addDotToAll",value:function(){for(var t=0;t<this.keys.length;++t)this.addDot(t);return this}},{key:"getAccidentals",value:function(){return this.modifierContext.getModifiers("accidentals")}},{key:"getDots",value:function(){return this.modifierContext.getModifiers("dots")}},{key:"getVoiceShiftWidth",value:function(){return this.getGlyphWidth()*(this.displaced?2:1)}},{key:"calcExtraPx",value:function(){this.setExtraLeftPx(this.displaced&&this.stem_direction===ut.DOWN?this.getGlyphWidth():0),this.setExtraRightPx(!this.hasFlag()&&this.displaced&&this.stem_direction===ut.UP?this.getGlyphWidth():0)}},{key:"preFormat",value:function(){if(!this.preFormatted){this.modifierContext&&this.modifierContext.preFormat();var t=this.getGlyphWidth()+this.extraLeftPx+this.extraRightPx;this.glyph.flag&&null===this.beam&&this.stem_direction===ut.UP&&(t+=this.getGlyphWidth()),this.setWidth(t),this.setPreFormatted(!0)}}},{key:"getNoteHeadBounds",value:function(){var i=null,r=null,o=null,s=null,a=this.stave.getNumLines(),u=1,l=!1,c=!1,h=a,f=u;return this.note_heads.forEach(function(t){var e=t.getLine(),n=t.getY();(null===i||n<i)&&(i=n),(null===r||r<n)&&(r=n),null===s&&t.isDisplaced()&&(s=t.getAbsoluteX()),null!==o||t.isDisplaced()||(o=t.getAbsoluteX()),a=a<e?e:a,u=e<u?e:u,t.isDisplaced()?(l=!1===l?e:Math.max(e,l),c=!1===c?e:Math.min(e,c)):(h=Math.max(e,h),f=Math.min(e,f))},this),{y_top:i,y_bottom:r,displaced_x:s,non_displaced_x:o,highest_line:a,lowest_line:u,highest_displaced_line:l,lowest_displaced_line:c,highest_non_displaced_line:h,lowest_non_displaced_line:f}}},{key:"getNoteHeadBeginX",value:function(){return this.getAbsoluteX()+this.x_shift}},{key:"getNoteHeadEndX",value:function(){return this.getNoteHeadBeginX()+this.getGlyphWidth()}},{key:"drawLedgerLines",value:function(){var t=this.stave,e=this.glyph,o=this.render_options.stroke_px,s=this.context,a=e.getWidth()+2*o,u=2*(e.getWidth()+o)-ut.WIDTH/2;if(!this.isRest()){if(!s)throw new C.RERR("NoCanvasContext","Can't draw without a canvas context.");var n=this.getNoteHeadBounds(),i=n.highest_line,r=n.lowest_line,l=n.highest_displaced_line,c=n.highest_non_displaced_line,h=n.lowest_displaced_line,f=n.lowest_non_displaced_line,p=n.displaced_x,d=n.non_displaced_x,b=Math.min(p,d),y=function(t,e,n){var i;i=n&&e?b-o:e?d-o:p-o;var r=e&&n?u:a;s.beginPath(),s.moveTo(i,t),s.lineTo(i+r,t),s.stroke()},m=Oe({},t.getStyle()||{},this.getLedgerLineStyle()||{});this.applyStyle(s,m);for(var g=6;g<=i;++g){var v=null!==d&&g<=c,_=null!==p&&g<=l;y(t.getYForNote(g),v,_)}for(var S=0;r<=S;--S){var x=null!==d&&f<=S,w=null!==p&&h<=S;y(t.getYForNote(S),x,w)}this.restoreStyle(s,m)}}},{key:"drawModifiers",value:function(){if(!this.context)throw new C.RERR("NoCanvasContext","Can't draw without a canvas context.");var t=this.context;t.openGroup("modifiers");for(var e=0;e<this.modifiers.length;e++){var n=this.modifiers[e],i=this.note_heads[n.getIndex()],r=i.getStyle();i.applyStyle(t,r),n.setContext(t),n.draw(),i.restoreStyle(t,r)}t.closeGroup()}},{key:"drawFlag",value:function(){var t=this.stem,e=this.beam,n=this.context;if(!n)throw new C.RERR("NoCanvasContext","Can't draw without a canvas context.");var i=null===e;if(this.getGlyph().flag&&i){var r=this.getNoteHeadBounds(),o=r.y_top,s=r.y_bottom,a=t.getHeight(),u=this.getStemX(),l=this.getStemDirection()===ut.DOWN?o-a+2:s-a-2;n.openGroup("flag",null,{pointerBBox:!0}),this.applyStyle(n,this.getFlagStyle()||!1),this.flag.render(n,u,l),this.restoreStyle(n,this.getFlagStyle()||!1),n.closeGroup()}}},{key:"drawNoteHeads",value:function(){var e=this;this.note_heads.forEach(function(t){e.context.openGroup("notehead",null,{pointerBBox:!0}),t.setContext(e.context).draw(),e.context.closeGroup()})}},{key:"drawStem",value:function(t){if(!this.context)throw new C.RERR("NoCanvasContext","Can't draw without a canvas context.");t&&this.setStem(new ut(t)),this.context.openGroup("stem",null,{pointerBBox:!0}),this.stem.setContext(this.context).draw(),this.context.closeGroup()}},{key:"draw",value:function(){if(!this.context)throw new C.RERR("NoCanvasContext","Can't draw without a canvas context.");if(!this.stave)throw new C.RERR("NoStave","Can't draw without a stave.");if(0===this.ys.length)throw new C.RERR("NoYValues","Can't draw note without Y values.");var e=this.getNoteHeadBeginX(),t=this.hasStem()&&!this.beam;this.note_heads.forEach(function(t){return t.setX(e)});var n=this.getStemX();this.stem.setNoteHeadXBounds(n,n),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Ne.DEBUG&&C.L("Vex.Flow.StaveNote",e)}("Rendering ",this.isChord()?"chord :":"note :",this.keys),this.drawLedgerLines(),this.applyStyle(),this.setAttribute("el",this.context.openGroup("stavenote",this.getAttribute("id"))),this.context.openGroup("note",null,{pointerBBox:!0}),t&&this.drawStem(),this.drawNoteHeads(),this.drawFlag(),this.context.closeGroup(),this.drawModifiers(),this.context.closeGroup(),this.restoreStyle(),this.setRendered()}}]),Fe);function Fe(t){var e,n,i;if(function(t){if(!(t instanceof Fe))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=Re(Fe).call(this,t))||"object"!==ke(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","StaveNote"),e.keys=t.keys,e.clef=t.clef,e.octave_shift=t.octave_shift,e.beam=null,e.glyph=G.durationToGlyph(e.duration,e.noteType),!e.glyph)throw new C.RuntimeError("BadArguments","Invalid note initialization data (No glyph found): ".concat(JSON.stringify(t)));return e.displaced=!1,e.dot_shiftY=0,e.keyProps=[],e.use_default_head_x=!1,e.note_heads=[],e.modifiers=[],C.Merge(e.render_options,{glyph_font_scale:t.glyph_font_scale||G.DEFAULT_NOTATION_FONT_SCALE,stroke_px:t.stroke_px||Fe.DEFAULT_LEDGER_LINE_OFFSET}),e.calculateKeyProps(),e.buildStem(),t.auto_stem?e.autoStem():e.setStemDirection(t.stem_direction),e.reset(),e.buildFlag(),e}function Be(t){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function De(t){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function je(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ve(t,e,n){return e&&je(t.prototype,e),n&&je(t,n),t}function Ge(t,e){return(Ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var We=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Ge(t,e)}(Ue,ge),Ve(Ue,null,[{key:"format",value:function(t,e){var n=e.left_shift,i=e.right_shift;if(!t||0===t.length)return!1;for(var r=[],o=null,s=0,a=0,u=0;u<t.length;++u){var l=t[u],c=l.getNote(),h=l.getPosition(),f=c.getKeyProps()[l.getIndex()];if(c!==o){for(var p=0;p<c.keys.length;++p){var d=c.getKeyProps()[p];0===n&&(s=d.displaced?c.getExtraLeftPx():s),0===i&&(a=d.displaced?c.getExtraRightPx():a)}o=c}r.push({note:c,num:l,pos:h,line:f.line,shiftL:s,shiftR:a})}r.sort(function(t,e){return e.line-t.line});for(var b=0,y=0,m=0,g=0,v=null,_=null,S=0;S<r.length;++S){var x=0,w=r[S],E=w.note,P=w.pos,T=w.num,k=w.line,O=w.shiftL,M=w.shiftR;k===v&&E===_||(b=n+O,y=i+M);var R=T.getWidth()+1;P===ge.Position.LEFT?(T.setXShift(n+b),m=(x=n+R)>m?x:m):P===ge.Position.RIGHT&&(T.setXShift(y),g=(x=a+R)>g?x:g),v=k,_=E}return e.left_shift+=m,e.right_shift+=g,!0}},{key:"CATEGORY",get:function(){return"frethandfinger"}}]),Ve(Ue,[{key:"getCategory",value:function(){return Ue.CATEGORY}},{key:"setFretHandFinger",value:function(t){return this.finger=t,this}},{key:"setOffsetX",value:function(t){return this.x_offset=t,this}},{key:"setOffsetY",value:function(t){return this.y_offset=t,this}},{key:"draw",value:function(){if(this.checkContext(),!this.note||null==this.index)throw new C.RERR("NoAttachedNote","Can't draw string number without a note and index.");this.setRendered();var t=this.context,e=this.note.getModifierStartXY(this.position,this.index),n=e.x+this.x_shift+this.x_offset,i=e.y+this.y_shift+this.y_offset+5;switch(this.position){case ge.Position.ABOVE:n-=4,i-=12;break;case ge.Position.BELOW:n-=2,i+=10;break;case ge.Position.LEFT:n-=this.width;break;case ge.Position.RIGHT:n+=1;break;default:throw new C.RERR("InvalidPostion","The position ".concat(this.position," does not exist"))}t.save(),t.setFont(this.font.family,this.font.size,this.font.weight),t.fillText(""+this.finger,n,i),t.restore()}}]),Ue);function Ue(t){var e,n,i;return function(t){if(!(t instanceof Ue))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=De(Ue).call(this))||"object"!==Be(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","FretHandFinger"),e.note=null,e.index=null,e.finger=t,e.width=7,e.position=ge.Position.LEFT,e.x_shift=0,e.y_shift=0,e.x_offset=0,e.y_offset=0,e.font={family:"sans-serif",size:9,weight:"bold"},e}function He(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ye,ze,Xe=(ze=[{key:"NUM_TONES",get:function(){return 12}},{key:"roots",get:function(){return["c","d","e","f","g","a","b"]}},{key:"root_values",get:function(){return[0,2,4,5,7,9,11]}},{key:"root_indices",get:function(){return{c:0,d:1,e:2,f:3,g:4,a:5,b:6}}},{key:"canonical_notes",get:function(){return["c","c#","d","d#","e","f","f#","g","g#","a","a#","b"]}},{key:"diatonic_intervals",get:function(){return["unison","m2","M2","m3","M3","p4","dim5","p5","m6","M6","b7","M7","octave"]}},{key:"diatonic_accidentals",get:function(){return{unison:{note:0,accidental:0},m2:{note:1,accidental:-1},M2:{note:1,accidental:0},m3:{note:2,accidental:-1},M3:{note:2,accidental:0},p4:{note:3,accidental:0},dim5:{note:4,accidental:-1},p5:{note:4,accidental:0},m6:{note:5,accidental:-1},M6:{note:5,accidental:0},b7:{note:6,accidental:-1},M7:{note:6,accidental:0},octave:{note:7,accidental:0}}}},{key:"intervals",get:function(){return{u:0,unison:0,m2:1,b2:1,min2:1,S:1,H:1,2:2,M2:2,maj2:2,T:2,W:2,m3:3,b3:3,min3:3,M3:4,3:4,maj3:4,4:5,p4:5,"#4":6,b5:6,aug4:6,dim5:6,5:7,p5:7,"#5":8,b6:8,aug5:8,6:9,M6:9,maj6:9,b7:10,m7:10,min7:10,dom7:10,M7:11,maj7:11,8:12,octave:12}}},{key:"scales",get:function(){return{major:[2,2,1,2,2,2,1],dorian:[2,1,2,2,2,1,2],mixolydian:[2,2,1,2,2,1,2],minor:[2,1,2,2,1,2,2]}}},{key:"scaleTypes",get:function(){return{M:Ke.scales.major,m:Ke.scales.minor}}},{key:"accidentals",get:function(){return["bb","b","n","#","##"]}},{key:"noteValues",get:function(){return{c:{root_index:0,int_val:0},cn:{root_index:0,int_val:0},"c#":{root_index:0,int_val:1},"c##":{root_index:0,int_val:2},cb:{root_index:0,int_val:11},cbb:{root_index:0,int_val:10},d:{root_index:1,int_val:2},dn:{root_index:1,int_val:2},"d#":{root_index:1,int_val:3},"d##":{root_index:1,int_val:4},db:{root_index:1,int_val:1},dbb:{root_index:1,int_val:0},e:{root_index:2,int_val:4},en:{root_index:2,int_val:4},"e#":{root_index:2,int_val:5},"e##":{root_index:2,int_val:6},eb:{root_index:2,int_val:3},ebb:{root_index:2,int_val:2},f:{root_index:3,int_val:5},fn:{root_index:3,int_val:5},"f#":{root_index:3,int_val:6},"f##":{root_index:3,int_val:7},fb:{root_index:3,int_val:4},fbb:{root_index:3,int_val:3},g:{root_index:4,int_val:7},gn:{root_index:4,int_val:7},"g#":{root_index:4,int_val:8},"g##":{root_index:4,int_val:9},gb:{root_index:4,int_val:6},gbb:{root_index:4,int_val:5},a:{root_index:5,int_val:9},an:{root_index:5,int_val:9},"a#":{root_index:5,int_val:10},"a##":{root_index:5,int_val:11},ab:{root_index:5,int_val:8},abb:{root_index:5,int_val:7},b:{root_index:6,int_val:11},bn:{root_index:6,int_val:11},"b#":{root_index:6,int_val:0},"b##":{root_index:6,int_val:1},bb:{root_index:6,int_val:10},bbb:{root_index:6,int_val:9}}}}],He((Ye=Ke).prototype,[{key:"isValidNoteValue",value:function(t){return!(null==t||t<0||Ke.NUM_TONES<=t)}},{key:"isValidIntervalValue",value:function(t){return this.isValidNoteValue(t)}},{key:"getNoteParts",value:function(t){if(!t||t.length<1)throw new C.RERR("BadArguments","Invalid note name: "+t);if(3<t.length)throw new C.RERR("BadArguments","Invalid note name: "+t);var e=t.toLowerCase(),n=/^([cdefgab])(b|bb|n|#|##)?$/.exec(e);if(null!=n)return{root:n[1],accidental:n[2]};throw new C.RERR("BadArguments","Invalid note name: "+t)}},{key:"getKeyParts",value:function(t){if(!t||t.length<1)throw new C.RERR("BadArguments","Invalid key: "+t);var e=t.toLowerCase(),n=/^([cdefgab])(b|#)?(mel|harm|m|M)?$/.exec(e);if(null==n)throw new C.RERR("BadArguments","Invalid key: ".concat(t));var i=n[1],r=n[2],o=n[3];return{root:i,accidental:r,type:o=o||"M"}}},{key:"getNoteValue",value:function(t){var e=Ke.noteValues[t];if(null==e)throw new C.RERR("BadArguments","Invalid note name: ".concat(t));return e.int_val}},{key:"getIntervalValue",value:function(t){var e=Ke.intervals[t];if(null==e)throw new C.RERR("BadArguments","Invalid interval name: ".concat(t));return e}},{key:"getCanonicalNoteName",value:function(t){if(!this.isValidNoteValue(t))throw new C.RERR("BadArguments","Invalid note value: ".concat(t));return Ke.canonical_notes[t]}},{key:"getCanonicalIntervalName",value:function(t){if(!this.isValidIntervalValue(t))throw new C.RERR("BadArguments","Invalid interval value: ".concat(t));return Ke.diatonic_intervals[t]}},{key:"getRelativeNoteValue",value:function(t,e,n){if(null==n&&(n=1),1!==n&&-1!==n)throw new C.RERR("BadArguments","Invalid direction: ".concat(n));var i=(t+n*e)%Ke.NUM_TONES;return i<0&&(i+=Ke.NUM_TONES),i}},{key:"getRelativeNoteName",value:function(t,e){var n=this.getNoteParts(t),i=this.getNoteValue(n.root),r=e-i;if(Math.abs(r)>Ke.NUM_TONES-3){var o=1;0<r&&(o=-1);var s=(e+1+(i+1))%Ke.NUM_TONES*o;if(2<Math.abs(s))throw new C.RERR("BadArguments","Notes not related: ".concat(t,", ").concat(e,")"));r=s}if(2<Math.abs(r))throw new C.RERR("BadArguments","Notes not related: ".concat(t,", ").concat(e,")"));var a=n.root;if(0<r)for(var u=1;u<=r;++u)a+="#";else if(r<0)for(var l=-1;r<=l;--l)a+="b";return a}},{key:"getScaleTones",value:function(t,e){for(var n=[t],i=t,r=0;r<e.length;r+=1)(i=this.getRelativeNoteValue(i,e[r]))!==t&&n.push(i);return n}},{key:"getIntervalBetween",value:function(t,e,n){if(null==n&&(n=1),1!==n&&-1!==n)throw new C.RERR("BadArguments","Invalid direction: ".concat(n));if(!this.isValidNoteValue(t)||!this.isValidNoteValue(e))throw new C.RERR("BadArguments","Invalid notes: ".concat(t,", ").concat(e));var i=1===n?e-t:t-e;return i<0&&(i+=Ke.NUM_TONES),i}},{key:"createScaleMap",value:function(t){var e=this.getKeyParts(t),n=Ke.scaleTypes[e.type],i=e.root;if(e.accidental&&(i+=e.accidental),!n)throw new C.RERR("BadArguments","Unsupported key type: "+t);for(var r=this.getScaleTones(this.getNoteValue(i),n),o=Ke.root_indices[e.root],s={},a=0;a<Ke.roots.length;++a){var u=(o+a)%Ke.roots.length,l=Ke.roots[u],c=this.getRelativeNoteName(l,r[a]);1===c.length&&(c+="n"),s[l]=c}return s}}]),He(Ye,ze),Ke);function Ke(){!function(t){if(!(t instanceof Ke))throw new TypeError("Cannot call a class as a function")}(this)}function qe(t){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(t){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ze(t,e,n){return e&&Qe(t.prototype,e),n&&Qe(t,n),t}function $e(t,e){return($e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];nn.DEBUG&&C.L("Vex.Flow.Accidental",e)}function en(t){return t.getMetrics().width}var nn=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),$e(t,e)}(rn,ge),Ze(rn,null,[{key:"format",value:function(t,e){var b=this,n=e.left_shift+1;if(t&&0!==t.length){for(var r=[],i=null,o=0,s=0;s<t.length;++s){var a=t[s],u=a.getNote(),l=u.getStave(),c=u.getKeyProps()[a.getIndex()];if(u!==i){for(var h=0;h<u.keys.length;++h)o=u.getKeyProps()[h].displaced?u.getExtraLeftPx():o;i=u}if(null!==l){var f=l.options.spacing_between_lines_px,p=l.getYForLine(c.line),d=Math.round(p/f*2)/2;r.push({y:p,line:d,shift:o,acc:a,lineSpace:f})}else r.push({line:c.line,shift:o,acc:a})}r.sort(function(t,e){return e.line-t.line});for(var y=[],m=0,g=null,v=0;v<r.length;v++){var _=r[v];null!==g&&g===_.line||y.push({line:_.line,flatLine:!0,dblSharpLine:!0,numAcc:0,width:0}),"b"!==_.acc.type&&"bb"!==_.acc.type&&(y[y.length-1].flatLine=!1),"##"!==_.acc.type&&(y[y.length-1].dblSharpLine=!1),y[y.length-1].numAcc++,y[y.length-1].width+=_.acc.getWidth()+3,m=_.shift>m?_.shift:m,g=_.line}for(var S=0,x=function(s){for(var t=!1,e=s,n=s;n+1<y.length&&!t;)b.checkCollision(y[n],y[n+1])?n++:t=!0;function i(t){return y[e+t]}function a(t){return t.map(i)}function r(t,e){var n,i=function(t){if(Array.isArray(t))return t}(n=a([t,e]).map(function(t){return t.line}))||function(t){var e=[],n=!0,i=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(e.push(o.value),2!==e.length);n=!0);}catch(t){i=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return e}(n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}(),r=i[0],o=i[1];return w=s,r-o}function o(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.map(a).every(function(t){return!b.checkCollision.apply(b,function(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t))})}var u=n-e+1,l=b.checkCollision(y[e],y[n])?"a":"b";switch(u){case 3:"a"===l&&.5===r(1,2)&&.5!==r(0,1)&&(l="second_on_bottom");break;case 4:o([0,2],[1,3])&&(l="spaced_out_tetrachord");break;case 5:"b"===l&&o([1,3])&&(l="spaced_out_pentachord",o([0,2],[2,4])&&(l="very_spaced_out_pentachord"));break;case 6:o([0,3],[1,4],[2,5])&&(l="spaced_out_hexachord"),o([0,2],[2,4],[1,3],[3,5])&&(l="very_spaced_out_hexachord")}var c=void 0,h=void 0;if(7<=u){for(var f=2,p=!0;!0===p;){p=!1;for(var d=0;d+f<y.length;d++)if(b.checkCollision(y[d],y[d+f])){p=!0,f++;break}}for(c=s;c<=n;c++)h=(c-s)%f+1,y[c].column=h,S=h<S?S:h}else for(c=s;c<=n;c++)h=G.accidentalColumnsTable[u][l][c-s],y[c].column=h,S=h<S?S:h;w=s=n},w=0;w<y.length;w++)x(w);for(var E=[],P=[],T=0;T<=S;T++)E[T]=0,P[T]=0;E[0]=m+n,P[0]=m+n,y.forEach(function(t){t.width>E[t.column]&&(E[t.column]=t.width)});for(var k=1;k<E.length;k++)P[k]=E[k]+P[k-1];var O=P[P.length-1],M=0;y.forEach(function(t){for(var e=0,n=M+t.numAcc;M<n;M++){var i=P[t.column-1]+e;r[M].acc.setXShift(i),e+=r[M].acc.getWidth()+3,tn("Line, accCount, shift: ",t.line,M,i)}}),e.left_shift+=O}}},{key:"checkCollision",value:function(t,e){var n=e.line-t.line,i=3;0<n?(i=e.flatLine||e.dblSharpLine?2.5:3,t.dblSharpLine&&(n-=.5)):(i=t.flatLine||t.dblSharpLine?2.5:3,e.dblSharpLine&&(n-=.5));var r=Math.abs(n)<i;return tn("Line_1, Line_2, Collision: ",t.line,e.line,r),r}},{key:"applyAccidentals",value:function(t,e){var i=[],r={};t.forEach(function(t){var n=new p(0,1);t.getTickables().forEach(function(t){if(!t.shouldIgnoreTicks()){var e=r[n.value()];e?e.push(t):(i.push(n.value()),r[n.value()]=[t]),n.add(t.getTicks())}})});var c=new Xe;e=e||"C";var h=c.createScaleMap(e);i.forEach(function(t){var e=r[t],l=[];e.forEach(function e(u){u.isRest()||u.shouldIgnoreTicks()||(u.keys.forEach(function(t,e){var n=c.getNoteParts(t.split("/")[0]),i=n.accidental||"n",r=n.root+i,o=h[n.root]===r,s=-1<l.indexOf(r);if(!o||o&&s){h[n.root]=r;var a=new rn(i);u.addAccidental(e,a),l.push(r)}}),u.getModifiers().forEach(function(t){"gracenotegroups"===t.getCategory()&&t.getGraceNotes().forEach(e)}))})})}},{key:"CATEGORY",get:function(){return"accidentals"}}]),Ze(rn,[{key:"reset",value:function(){var t=this.render_options.font_scale;this.glyph=new D(this.accidental.code,t),this.glyph.setOriginX(1),this.cautionary&&(this.parenLeft=new D(G.accidentalCodes("{").code,t),this.parenRight=new D(G.accidentalCodes("}").code,t),this.parenLeft.setOriginX(1),this.parenRight.setOriginX(1))}},{key:"getCategory",value:function(){return rn.CATEGORY}},{key:"getWidth",value:function(){var t=this.cautionary?en(this.parenLeft)+en(this.parenRight)+this.render_options.parenLeftPadding+this.render_options.parenRightPadding:0;return en(this.glyph)+t}},{key:"setNote",value:function(t){if(!t)throw new C.RERR("ArgumentError","Bad note value: ".concat(t));this.note=t,"gracenotes"===this.note.getCategory()&&(this.render_options.font_scale=25,this.reset())}},{key:"setAsCautionary",value:function(){return this.cautionary=!0,this.render_options.font_scale=28,this.reset(),this}},{key:"draw",value:function(){var t=this.context,e=this.type,n=this.position,i=this.note,r=this.index,o=this.cautionary,s=this.x_shift,a=this.y_shift,u=this.glyph,l=this.parenLeft,c=this.parenRight,h=this.render_options,f=h.parenLeftPadding,p=h.parenRightPadding;if(this.checkContext(),!i||null==r)throw new C.RERR("NoAttachedNote","Can't draw accidental without a note and index.");var d=i.getModifierStartXY(n,r),b=d.x+s,y=d.y+a;tn("Rendering: ",e,b,y),o?(c.render(t,b,y),b-=en(c),b-=p,b-=this.accidental.parenRightPaddingAdjustment,u.render(t,b,y),b-=en(u),b-=f,l.render(t,b,y)):u.render(t,b,y),this.setRendered()}}]),rn);function rn(){var t,e,n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if(function(t){if(!(t instanceof rn))throw new TypeError("Cannot call a class as a function")}(this),(e=this,t=!(n=Je(rn).call(this))||"object"!==qe(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):n).setAttribute("type","Accidental"),tn("New accidental: ",i),t.note=null,t.index=null,t.type=i,t.position=ge.Position.LEFT,t.render_options={font_scale:38,stroke_px:3,parenLeftPadding:2,parenRightPadding:2},t.accidental=G.accidentalCodes(t.type),!t.accidental)throw new C.RERR("ArgumentError","Unknown accidental type: ".concat(i));return t.cautionary=!1,t.parenLeft=null,t.parenRight=null,t.reset(),t}function on(t){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sn(t,e){return!e||"object"!==on(e)&&"function"!=typeof e?un(t):e}function an(t){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function un(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ln(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function cn(t,e,n){return e&&ln(t.prototype,e),n&&ln(t,n),t}function hn(t,e){return(hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fn=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),hn(t,e)}(pn,ge),cn(pn,null,[{key:"format",value:function(t,e){if(!t||0===t.length)return!1;for(var n=0,i=0;i<t.length;++i){var r=t[i];r.preFormat(),n+=r.getWidth()}return e.left_shift+=n,!0}},{key:"CATEGORY",get:function(){return"notesubgroup"}}]),cn(pn,[{key:"getCategory",value:function(){return pn.CATEGORY}},{key:"preFormat",value:function(){this.preFormatted||(this.formatter.joinVoices([this.voice]).format([this.voice],0),this.setWidth(this.formatter.getMinTotalWidth()),this.preFormatted=!0)}},{key:"setNote",value:function(t){this.note=t}},{key:"setWidth",value:function(t){this.width=t}},{key:"getWidth",value:function(){return this.width}},{key:"draw",value:function(){var e=this;this.checkContext();var t=this.getNote();if(!t||null===this.index)throw new C.RuntimeError("NoAttachedNote","Can't draw notes without a parent note and parent note index.");this.setRendered(),this.alignSubNotesWithNote(this.subNotes,t),this.subNotes.forEach(function(t){return t.setContext(e.context).draw()})}}]),pn);function pn(t){var e;return function(t){if(!(t instanceof pn))throw new TypeError("Cannot call a class as a function")}(this),(e=sn(this,an(pn).call(this))).setAttribute("type","NoteSubGroup"),e.note=null,e.index=null,e.position=ge.Position.LEFT,e.subNotes=t,e.subNotes.forEach(function(t){t.ignore_ticks=!1}),e.width=0,e.preFormatted=!1,e.formatter=new tr,e.voice=new At({num_beats:4,beat_value:4,resolution:G.RESOLUTION}).setStrict(!1),e.voice.addTickables(e.subNotes),sn(e,un(e))}function dn(t){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bn(t){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yn(t,e){return(yn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mn=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yn(t,e)}(gn,x),function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(gn.prototype,[{key:"setFont",value:function(t){return this.font=t,this}},{key:"setDirection",value:function(t){return this.direction=t,this}},{key:"setNotes",value:function(t){if(!t.first_note&&!t.last_note)throw new C.RuntimeError("BadArguments","Tie needs to have either first_note or last_note set.");if(t.first_indices||(t.first_indices=[0]),t.last_indices||(t.last_indices=[0]),t.first_indices.length!==t.last_indices.length)throw new C.RuntimeError("BadArguments","Tied notes must have similar index sizes");return this.first_note=t.first_note,this.first_indices=t.first_indices,this.last_note=t.last_note,this.last_indices=t.last_indices,this}},{key:"isPartial",value:function(){return!this.first_note||!this.last_note}},{key:"renderTie",value:function(t){if(0===t.first_ys.length||0===t.last_ys.length)throw new C.RERR("BadArguments","No Y-values to render");var e=this.context,n=this.render_options.cp1,i=this.render_options.cp2;Math.abs(t.last_x_px-t.first_x_px)<10&&(n=2,i=8);for(var r=this.render_options.first_x_shift,o=this.render_options.last_x_shift,s=this.render_options.y_shift*t.direction,a=0;a<this.first_indices.length;++a){var u=(t.last_x_px+o+(t.first_x_px+r))/2,l=t.first_ys[this.first_indices[a]]+s,c=t.last_ys[this.last_indices[a]]+s;if(isNaN(l)||isNaN(c))throw new C.RERR("BadArguments","Bad indices for tie rendering.");var h=(l+c)/2+n*t.direction,f=(l+c)/2+i*t.direction;e.beginPath(),e.moveTo(t.first_x_px+r,l),e.quadraticCurveTo(u,h,t.last_x_px+o,c),e.quadraticCurveTo(u,f,t.first_x_px+r,l),e.closePath(),e.fill()}}},{key:"renderText",value:function(t,e){if(this.text){var n=(t+e)/2;n-=this.context.measureText(this.text).width/2,this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.style),this.context.fillText(this.text,n+this.render_options.text_shift_x,(this.first_note||this.last_note).getStave().getYForTopText()-1),this.context.restore()}}},{key:"draw",value:function(){this.checkContext(),this.setRendered();var t,e,n,i,r,o=this.first_note,s=this.last_note;return o?(t=o.getTieRightX()+this.render_options.tie_spacing,r=o.getStemDirection(),n=o.getYs()):(t=s.getStave().getTieStartX(),n=s.getYs(),this.first_indices=this.last_indices),s?(e=s.getTieLeftX()+this.render_options.tie_spacing,r=s.getStemDirection(),i=s.getYs()):(e=o.getStave().getTieEndX(),i=o.getYs(),this.last_indices=this.first_indices),this.direction&&(r=this.direction),this.renderTie({first_x_px:t,last_x_px:e,first_ys:n,last_ys:i,direction:r}),this.renderText(t,e),!0}}]),gn);function gn(t,e){var n,i,r;return function(t){if(!(t instanceof gn))throw new TypeError("Cannot call a class as a function")}(this),(i=this,n=!(r=bn(gn).call(this))||"object"!==dn(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i):r).setAttribute("type","StaveTie"),n.notes=t,n.context=null,n.text=e,n.direction=null,n.render_options={cp1:8,cp2:12,text_shift_x:0,first_x_shift:0,last_x_shift:0,y_shift:7,tie_spacing:0,font:{family:"Arial",size:10,style:""}},n.font=n.render_options.font,n.setNotes(t),n}function vn(t){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _n(t){return(_n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function xn(t,e,n){return e&&Sn(t.prototype,e),n&&Sn(t,n),t}function wn(t,e){return(wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var En=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wn(t,e)}(Pn,mn),xn(Pn,null,[{key:"createHammeron",value:function(t){return new Pn(t,"H")}},{key:"createPulloff",value:function(t){return new Pn(t,"P")}}]),xn(Pn,[{key:"draw",value:function(){this.checkContext(),this.setRendered();var t,e,n,i,r=this.first_note,o=this.last_note;return r?(t=r.getTieRightX()+this.render_options.tie_spacing,n=r.getYs()):(t=o.getStave().getTieStartX(),n=o.getYs(),this.first_indices=this.last_indices),o?(e=o.getTieLeftX()+this.render_options.tie_spacing,i=o.getYs()):(e=r.getStave().getTieEndX(),i=r.getYs(),this.last_indices=this.first_indices),this.renderTie({first_x_px:t,last_x_px:e,first_ys:n,last_ys:i,direction:-1}),this.renderText(t,e),!0}}]),Pn);function Pn(t,e){var n,i,r;return function(t){if(!(t instanceof Pn))throw new TypeError("Cannot call a class as a function")}(this),(i=this,n=!(r=_n(Pn).call(this,t,e))||"object"!==vn(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i):r).setAttribute("type","TabTie"),n.render_options.cp1=9,n.render_options.cp2=11,n.render_options.y_shift=3,n.setNotes(t),n}function Tn(t){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kn(t,e){return!e||"object"!==Tn(e)&&"function"!=typeof e?Mn(t):e}function On(t){return(On=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ln(t,e,n){return e&&Rn(t.prototype,e),n&&Rn(t,n),t}function An(t,e){return(An=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Cn=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),An(t,e)}(In,ge),Ln(In,null,[{key:"format",value:function(t,e){if(!t||0===t.length)return!1;for(var n=[],i=null,r=0,o=0;o<t.length;++o){var s=t[o],a=s.getNote(),u=a.getCategory()===Ne.CATEGORY,l=u?4:0;if(u&&a!==i){for(var c=0;c<a.keys.length;++c)r=a.getKeyProps()[c].displaced?a.getExtraLeftPx():r;i=a}n.push({shift:r,gracenote_group:s,spacing:l})}for(var h,f=n[0].shift,p=0;p<n.length;++p){var d=n[p].gracenote_group;d.preFormat(),h=d.getWidth()+n[p].spacing,f=Math.max(h,f)}for(var b=0;b<n.length;++b){var y=n[b].gracenote_group;h=y.getWidth()+n[b].spacing,y.setSpacingFromNextModifier(f-Math.min(h,f))}return e.left_shift+=f,!0}},{key:"CATEGORY",get:function(){return"gracenotegroups"}}]),Ln(In,[{key:"getCategory",value:function(){return In.CATEGORY}},{key:"preFormat",value:function(){this.preFormatted||(this.formatter.joinVoices([this.voice]).format([this.voice],0),this.setWidth(this.formatter.getMinTotalWidth()),this.preFormatted=!0)}},{key:"beamNotes",value:function(t){if(1<(t=t||this.grace_notes).length){var e=new Pt(t);e.render_options.beam_width=3,e.render_options.partial_beam_length=4,this.beams.push(e)}return this}},{key:"setNote",value:function(t){this.note=t}},{key:"setWidth",value:function(t){this.width=t}},{key:"getWidth",value:function(){return this.width}},{key:"getGraceNotes",value:function(){return this.grace_notes}},{key:"draw",value:function(){var e=this;this.checkContext();var t=this.getNote();if(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Cn.DEBUG&&C.L("Vex.Flow.GraceNoteGroup",e)}("Drawing grace note group for:",t),!t||null===this.index)throw new C.RuntimeError("NoAttachedNote","Can't draw grace note without a parent note and parent note index.");if(this.setRendered(),this.alignSubNotesWithNote(this.getGraceNotes(),t),this.grace_notes.forEach(function(t){t.setContext(e.context).draw()}),this.beams.forEach(function(t){t.setContext(e.context).draw()}),this.show_slur){var n=this.getNote().getCategory()===Ne.CATEGORY,i=n?mn:En;this.slur=new i({last_note:this.grace_notes[0],first_note:t,first_indices:[0],last_indices:[0]}),this.slur.render_options.cp2=12,this.slur.render_options.y_shift=(n?7:5)+this.render_options.slur_y_shift,this.slur.setContext(this.context).draw()}}}]),In);function In(t,e){var n;return function(t){if(!(t instanceof In))throw new TypeError("Cannot call a class as a function")}(this),(n=kn(this,On(In).call(this))).setAttribute("type","GraceNoteGroup"),n.note=null,n.index=null,n.position=ge.Position.LEFT,n.grace_notes=t,n.width=0,n.preFormatted=!1,n.show_slur=e,n.slur=null,n.formatter=new tr,n.voice=new At({num_beats:4,beat_value:4,resolution:G.RESOLUTION}).setStrict(!1),n.render_options={slur_y_shift:0},n.beams=[],n.voice.addTickables(n.grace_notes),kn(n,Mn(n))}function Nn(t){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fn(t){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Dn(t,e,n){return e&&Bn(t.prototype,e),n&&Bn(t,n),t}function jn(t,e){return(jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vn=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),jn(t,e)}(Gn,ge),Dn(Gn,null,[{key:"format",value:function(t,e){var n=e.left_shift;if(!t||0===t.length)return this;var i=t.map(function(t){var e=t.getNote();if(e instanceof Ne){var n=e.getKeyProps()[t.getIndex()];return{line:n.line,shift:n.displaced?e.getExtraLeftPx():0,stroke:t}}return{line:e.getPositions()[t.getIndex()].str,shift:0,stroke:t}}),r=n,o=i.reduce(function(t,e){var n=e.stroke,i=e.shift;return n.setXShift(r+i),Math.max(n.getWidth()+0,t)},0);return e.left_shift+=o,!0}},{key:"CATEGORY",get:function(){return"strokes"}},{key:"Type",get:function(){return{BRUSH_DOWN:1,BRUSH_UP:2,ROLL_DOWN:3,ROLL_UP:4,RASQUEDO_DOWN:5,RASQUEDO_UP:6,ARPEGGIO_DIRECTIONLESS:7}}}]),Dn(Gn,[{key:"getCategory",value:function(){return Gn.CATEGORY}},{key:"getPosition",value:function(){return this.position}},{key:"addEndNote",value:function(t){return this.note_end=t,this}},{key:"draw",value:function(){if(this.checkContext(),this.setRendered(),!this.note||null==this.index)throw new C.RERR("NoAttachedNote","Can't draw stroke without a note and index.");for(var t,e,n,i,r,o=this.note.getModifierStartXY(this.position,this.index),s=this.note.getYs(),a=o.y,u=o.y,l=o.x-5,c=this.note.stave.options.spacing_between_lines_px,h=this.getModifierContext().getModifiers(this.note.getCategory()),f=0;f<h.length;f++){s=h[f].getYs();for(var p=0;p<s.length;p++)this.note!==h[f]&&!this.all_voices||(a=C.Min(a,s[p]),u=C.Max(u,s[p]))}switch(this.type){case Gn.Type.BRUSH_DOWN:t="vc3",e=-3,n=a-c/2+10,u+=c/2;break;case Gn.Type.BRUSH_UP:t="v11",e=.5,n=u+c/2,a-=c/2;break;case Gn.Type.ROLL_DOWN:case Gn.Type.RASQUEDO_DOWN:t="vc3",e=-3,i=this.x_shift+e-2,r=this.note instanceof Ne?(n=(a+=1.5*c)-c,(u+=(u-a)%2!=0?.5*c:c)+c+2):(n=(a+=1.5*c)-.75*c,(u+=c)+.25*c);break;case Gn.Type.ROLL_UP:case Gn.Type.RASQUEDO_UP:t="v52",e=-4,i=this.x_shift+e-1,r=this.note instanceof Ne?(n=c/2,(u-(a+=.5*c))%2==0&&(u+=c/2),n=u+.5*c,a-1.25*c):(n=(u+=.5*c)+.25*c,(a+=.25*c)-c);break;case Gn.Type.ARPEGGIO_DIRECTIONLESS:a+=.5*c,u+=c;break;default:throw new C.RERR("InvalidType","The stroke type ".concat(this.type," does not exist"))}if(this.type===Gn.Type.BRUSH_DOWN||this.type===Gn.Type.BRUSH_UP)this.context.fillRect(l+this.x_shift,a,1,u-a);else if(this.note instanceof Ne)for(var d=a;d<=u;d+=c)D.renderGlyph(this.context,l+this.x_shift-4,d,this.render_options.font_scale,"va3");else{var b;for(b=a;b<=u;b+=10)D.renderGlyph(this.context,l+this.x_shift-4,b,this.render_options.font_scale,"va3");this.type===Gn.Type.RASQUEDO_DOWN&&(r=b+.25*c)}this.type!==Gn.Type.ARPEGGIO_DIRECTIONLESS&&(D.renderGlyph(this.context,l+this.x_shift+e,n,this.render_options.font_scale,t),this.type!==Gn.Type.RASQUEDO_DOWN&&this.type!==Gn.Type.RASQUEDO_UP||(this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.weight),this.context.fillText("R",l+i,r),this.context.restore()))}}]),Gn);function Gn(t,e){var n,i,r;return function(t){if(!(t instanceof Gn))throw new TypeError("Cannot call a class as a function")}(this),(i=this,n=!(r=Fn(Gn).call(this))||"object"!==Nn(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i):r).setAttribute("type","Stroke"),n.note=null,n.options=C.Merge({},e),n.all_voices=!("all_voices"in n.options)||n.options.all_voices,n.note_end=null,n.index=null,n.type=t,n.position=ge.Position.LEFT,n.render_options={font_scale:38,stroke_px:3,stroke_spacing:10},n.font={family:"serif",size:10,weight:"bold italic"},n.setXShift(0),n.setWidth(10),n}function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Un(t){return(Un=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Yn(t,e,n){return e&&Hn(t.prototype,e),n&&Hn(t,n),t}function zn(t,e){return(zn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xn=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),zn(t,e)}(Kn,ge),Yn(Kn,null,[{key:"format",value:function(t,e){var n=e.left_shift,i=e.right_shift;if(!t||0===t.length)return this;var r,o,s,a,u,l=[],c=null,h=0,f=0;for(r=0;r<t.length;++r)for(s=(o=t[r]).getNote(),r=0;r<t.length;++r){s=(o=t[r]).getNote(),a=o.getPosition();var p=s.getKeyProps()[o.getIndex()];if(s!==c){for(var d=0;d<s.keys.length;++d)u=s.getKeyProps()[d],0===n&&(h=u.displaced?s.getExtraLeftPx():h),0===i&&(f=u.displaced?s.getExtraRightPx():f);c=s}l.push({pos:a,note:s,num:o,line:p.line,shiftL:h,shiftR:f})}l.sort(function(t,e){return e.line-t.line});var b=0,y=0,m=0,g=null,v=null;for(r=0;r<l.length;++r){var _=0;s=l[r].note,a=l[r].pos,o=l[r].num;var S=l[r].line,x=(l[r].shiftL,l[r].shiftR);S===g&&s===v||(b=i+x);var w=o.getWidth()+1;a===ge.Position.LEFT?(o.setXShift(n),y=(_=h+w)>y?_:y):a===ge.Position.RIGHT&&(o.setXShift(b),m=(_+=w)>m?_:m),g=S,v=s}return e.left_shift+=y,e.right_shift+=m,!0}},{key:"CATEGORY",get:function(){return"stringnumber"}}]),Yn(Kn,[{key:"getCategory",value:function(){return Kn.CATEGORY}},{key:"getNote",value:function(){return this.note}},{key:"setNote",value:function(t){return this.note=t,this}},{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(t){return this.index=t,this}},{key:"setLineEndType",value:function(t){return t>=et.LineEndType.NONE&&t<=et.LineEndType.DOWN&&(this.leg=t),this}},{key:"setStringNumber",value:function(t){return this.string_number=t,this}},{key:"setOffsetX",value:function(t){return this.x_offset=t,this}},{key:"setOffsetY",value:function(t){return this.y_offset=t,this}},{key:"setLastNote",value:function(t){return this.last_note=t,this}},{key:"setDashed",value:function(t){return this.dashed=t,this}},{key:"draw",value:function(){var t=this.checkContext();if(!this.note||null==this.index)throw new C.RERR("NoAttachedNote","Can't draw string number without a note and index.");this.setRendered();var e=this.note.stave.options.spacing_between_lines_px,n=this.note.getModifierStartXY(this.position,this.index),i=n.x+this.x_shift+this.x_offset,r=n.y+this.y_shift+this.y_offset;switch(this.position){case ge.Position.ABOVE:case ge.Position.BELOW:var o=this.note.getStemExtents(),s=o.topY,a=o.baseY+2;this.note.stem_direction===Ne.STEM_DOWN&&(s=o.baseY,a=o.topY-2),r=this.position===ge.Position.ABOVE?this.note.hasStem()?s-1.75*e:n.y-1.75*e:this.note.hasStem()?a+1.5*e:n.y+1.75*e,r+=this.y_shift+this.y_offset;break;case ge.Position.LEFT:i-=this.radius/2+5;break;case ge.Position.RIGHT:i+=this.radius/2+6;break;default:throw new C.RERR("InvalidPosition","The position ".concat(this.position," is invalid"))}t.save(),t.beginPath(),t.arc(i,r,this.radius,0,2*Math.PI,!1),t.lineWidth=1.5,t.stroke(),t.setFont(this.font.family,this.font.size,this.font.weight);var u=i-t.measureText(this.string_number).width/2;if(t.fillText(""+this.string_number,u,r+4.5),null!=this.last_note){var l,c,h=this.last_note.getStemX()-this.note.getX()+5;switch(t.strokeStyle="#000000",t.lineCap="round",t.lineWidth=.6,this.dashed?et.drawDashedLine(t,i+10,r,i+h,r,[3,3]):et.drawDashedLine(t,i+10,r,i+h,r,[3,0]),this.leg){case et.LineEndType.UP:l=-10,c=this.dashed?[3,3]:[3,0],et.drawDashedLine(t,i+h,r,i+h,r+l,c);break;case et.LineEndType.DOWN:l=10,c=this.dashed?[3,3]:[3,0],et.drawDashedLine(t,i+h,r,i+h,r+l,c)}}t.restore()}}]),Kn);function Kn(t){var e,n,i;return function(t){if(!(t instanceof Kn))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=Un(Kn).call(this))||"object"!==Wn(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","StringNumber"),e.note=null,e.last_note=null,e.index=null,e.string_number=t,e.setWidth(20),e.position=ge.Position.ABOVE,e.x_shift=0,e.y_shift=0,e.x_offset=0,e.y_offset=0,e.dashed=!0,e.leg=et.LineEndType.NONE,e.radius=8,e.font={family:"sans-serif",size:10,weight:"bold"},e}function qn(t){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qn(t){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function $n(t,e,n){return e&&Zn(t.prototype,e),n&&Zn(t,n),t}function ti(t,e){return(ti=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ei(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ni(t,e){return.5*t(e/.5)}function ii(t,e){return e===ai?t<=5:1<=t}function ri(t,e){return ii(t,e)?e===ai?Math.ceil:Math.floor:Math.round}function oi(t){var e=t.getCategory();return"stavenotes"===e||"gracenotes"===e}var si=ge.Position,ai=si.ABOVE,ui=si.BELOW,li=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),ti(t,e)}(ci,ge),$n(ci,null,[{key:"format",value:function(t,e){if(!t||0===t.length)return!1;function n(t,e,n){return ni(ri(e,n),t.glyph.getMetrics().height/10+.5)}t.filter(function(t){return t.getPosition()===ai}).forEach(function(t){t.setTextLine(e.top_text_line),e.top_text_line+=n(t,e.top_text_line,ai)}),t.filter(function(t){return t.getPosition()===ui}).forEach(function(t){t.setTextLine(e.text_line),e.text_line+=n(t,e.text_line,ui)});var i=t.map(function(t){return t.getWidth()}).reduce(function(t,e){return Math.max(e,t)});return e.left_shift+=i/2,e.right_shift+=i/2,!0}},{key:"easyScoreHook",value:function(t,e,s){var n=t.articulations;if(n){var a={staccato:"a.",tenuto:"a-"};n.split(",").map(function(t){return t.trim().split(".")}).map(function(t){var e,n=function(t){if(Array.isArray(t))return t}(e=t)||function(t){var e=[],n=!0,i=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(e.push(o.value),2!==e.length);n=!0);}catch(t){i=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return e}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}(),i=n[0],r=n[1],o={type:a[i]};return r&&(o.position=ge.PositionString[r]),s.getFactory().Articulation(o)}).map(function(t){return e.addModifier(0,t)})}}},{key:"CATEGORY",get:function(){return"articulations"}},{key:"INITIAL_OFFSET",get:function(){return-.5}}]),$n(ci,[{key:"getCategory",value:function(){return ci.CATEGORY}},{key:"draw",value:function(){var t,e=this.note,n=this.index,i=this.position,r=this.glyph,o=this.articulation.between_lines,s=this.text_line,a=this.context;if(this.checkContext(),!e||null==n)throw new C.RERR("NoAttachedNote","Can't draw Articulation without a note and index.");this.setRendered();var u,l,c,h,f,p,d,b,y=e.getStave(),m=y.getSpacingBetweenLines(),g="tabnotes"===e.getCategory(),v=e.getModifierStartXY(i,n).x,_=!o||g,S=(u=e,c=(l=i)===ai&&u.getStemDirection()===ut.UP||l===ui&&u.getStemDirection()===ut.DOWN,oi(u)?u.hasStem()&&c?.5:1:u.hasStem()&&c?1:0),x=(Jn(t={},ai,function(){r.setOrigin(.5,1);var t=function(t,e){var n=t.getStave(),i=t.getStemDirection(),r=t.getStemExtents(),o=r.topY,s=r.baseY;if(oi(t))return t.hasStem()?i===ut.UP?o:s:Math.min.apply(Math,ei(t.getYs()));if("tabnotes"===t.getCategory())return t.hasStem()&&i===ut.UP?o:n.getYForTopText(e);throw new C.RERR("UnknownCategory","Only can get the top and bottom ys of stavenotes and tabnotes")}(e,s)-(s+S)*m;return _?Math.min(y.getYForTopText(ci.INITIAL_OFFSET),t):t}),Jn(t,ui,function(){r.setOrigin(.5,0);var t=function(t,e){var n=t.getStave(),i=t.getStemDirection(),r=t.getStemExtents(),o=r.topY,s=r.baseY;if(oi(t))return t.hasStem()?i===ut.UP?s:o:Math.max.apply(Math,ei(t.getYs()));if("tabnotes"===t.getCategory())return t.hasStem()?i===ut.UP?n.getYForBottomText(e):o:n.getYForBottomText(e);throw new C.RERR("UnknownCategory","Only can get the top and bottom ys of stavenotes and tabnotes")}(e,s)+(s+S)*m;return _?Math.max(y.getYForBottomText(ci.INITIAL_OFFSET),t):t}),t)[i]();if(!g){var w=i===ai?-1:1,E=g?e.positions[n].str:e.getKeyProps()[n].line,P=(e.getYs()[n]-x)/m+E,T=(h=o,d=w,b=ni(ri(f=P,p=i),f),h&&ii(b,p)&&b%1==0?b+.5*-d:b);ii(T,i)&&r.setOrigin(.5,.5),x+=Math.abs(T-P)*m*w}!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];li.DEBUG&&C.L("Vex.Flow.Articulation",e)}("Rendering articulation at (x: ".concat(v,", y: ").concat(x,")")),r.render(a,v,x)}}]),ci);function ci(t){var e,n,i;if(function(t){if(!(t instanceof ci))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=Qn(ci).call(this))||"object"!==qn(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","Articulation"),e.note=null,e.index=null,e.type=t,e.position=ui,e.render_options={font_scale:38},e.articulation=G.articulationCodes(e.type),!e.articulation)throw new C.RERR("ArgumentError","Articulation not found: ".concat(e.type));return e.glyph=new D(e.articulation.code,e.render_options.font_scale),e.setWidth(e.glyph.getMetrics().width),e}function hi(t){return(hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fi(t){return(fi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function di(t,e,n){return e&&pi(t.prototype,e),n&&pi(t,n),t}function bi(t,e){return(bi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yi=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),bi(t,e)}(mi,Yt),di(mi,null,[{key:"getNextContext",value:function(t){var e=t.tContexts,n=e.indexOf(t);return e[n+1]}}]),di(mi,[{key:"getX",value:function(){return this.x}},{key:"setX",value:function(t){return this.x=t,this.xBase=t,this.xOffset=0,this}},{key:"getXBase",value:function(){return this.xBase}},{key:"setXBase",value:function(t){this.xBase=t,this.x=t+this.xOffset}},{key:"getXOffset",value:function(){return this.xOffset}},{key:"setXOffset",value:function(t){this.xOffset=t,this.x=this.xBase+t}},{key:"getWidth",value:function(){return this.width+2*this.padding}},{key:"setPadding",value:function(t){return this.padding=t,this}},{key:"getMaxTicks",value:function(){return this.maxTicks}},{key:"getMinTicks",value:function(){return this.minTicks}},{key:"getTickables",value:function(){return this.tickables}},{key:"getCenterAlignedTickables",value:function(){return this.tickables.filter(function(t){return t.isCenterAligned()})}},{key:"getMetrics",value:function(){return{width:this.width,notePx:this.notePx,extraLeftPx:this.extraLeftPx,extraRightPx:this.extraRightPx}}},{key:"getCurrentTick",value:function(){return this.currentTick}},{key:"setCurrentTick",value:function(t){this.currentTick=t,this.preFormatted=!1}},{key:"getExtraPx",value:function(){for(var t=0,e=0,n=0,i=0,r=0;r<this.tickables.length;r++){n=Math.max(this.tickables[r].extraLeftPx||0,n),i=Math.max(this.tickables[r].extraRightPx||0,i);var o=this.tickables[r].modifierContext;o&&null!=o&&(t=Math.max(t,o.state.left_shift),e=Math.max(e,o.state.right_shift))}return{left:t,right:e,extraLeft:n,extraRight:i}}},{key:"addTickable",value:function(t){if(!t)throw new C.RERR("BadArgument","Invalid tickable added.");if(!t.shouldIgnoreTicks()){this.ignore_ticks=!1;var e=t.getTicks();e.greaterThan(this.maxTicks)&&(this.maxTicks=e.clone()),null==this.minTicks?this.minTicks=e.clone():e.lessThan(this.minTicks)&&(this.minTicks=e.clone())}return t.setTickContext(this),this.tickables.push(t),this.preFormatted=!1,this}},{key:"preFormat",value:function(){if(this.preFormatted)return this;for(var t=0;t<this.tickables.length;++t){var e=this.tickables[t];e.preFormat();var n=e.getMetrics();this.extraLeftPx=Math.max(this.extraLeftPx,n.extraLeftPx+n.modLeftPx),this.extraRightPx=Math.max(this.extraRightPx,n.extraRightPx+n.modRightPx),this.notePx=Math.max(this.notePx,n.noteWidth),this.width=this.notePx+this.extraLeftPx+this.extraRightPx}return this}},{key:"postFormat",value:function(){return this.postFormatted||(this.postFormatted=!0),this}}]),mi);function mi(){var t,e,n;return function(t){if(!(t instanceof mi))throw new TypeError("Cannot call a class as a function")}(this),(e=this,t=!(n=fi(mi).call(this))||"object"!==hi(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):n).setAttribute("type","TickContext"),t.currentTick=new p(0,1),t.maxTicks=new p(0,1),t.minTicks=null,t.padding=3,t.x=0,t.xBase=0,t.xOffset=0,t.tickables=[],t.notePx=0,t.extraLeftPx=0,t.extraRightPx=0,t.tContexts=[],t}function gi(t){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vi(t){return(vi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Si(t,e,n){return e&&_i(t.prototype,e),n&&_i(t,n),t}function xi(t,e){return(xi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wi=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),xi(t,e)}(Ei,ge),Si(Ei,null,[{key:"format",value:function(t,e){if(!t||0===t.length)return!1;for(var n=0,i=0;i<t.length;++i){var r=t[i];n=Math.max(r.getWidth(),n),r.getPosition()===ge.Position.ABOVE?(r.setTextLine(e.top_text_line),e.top_text_line+=2):(r.setTextLine(e.text_line),e.text_line+=2)}return e.left_shift+=n/2,e.right_shift+=n/2,!0}},{key:"CATEGORY",get:function(){return"ornaments"}}]),Si(Ei,[{key:"getCategory",value:function(){return Ei.CATEGORY}},{key:"setDelayed",value:function(t){return this.delayed=t,this}},{key:"setUpperAccidental",value:function(t){var e=this.render_options.font_scale/1.3;return this.accidentalUpper=new D(G.accidentalCodes(t).code,e),this.accidentalUpper.setOrigin(.5,1),this}},{key:"setLowerAccidental",value:function(t){var e=this.render_options.font_scale/1.3;return this.accidentalLower=new D(G.accidentalCodes(t).code,e),this.accidentalLower.setOrigin(.5,1),this}},{key:"draw",value:function(){if(this.checkContext(),!this.note||null==this.index)throw new C.RERR("NoAttachedNote","Can't draw Ornament without a note and index.");this.setRendered();var t=this.context,e=this.note.getStemDirection(),n=this.note.getStave(),i=this.note.getStem().getExtents(),r=e===Ne.STEM_DOWN?i.baseY:i.topY;"tabnotes"===this.note.getCategory()&&(this.note.hasStem()?e===Ne.STEM_DOWN&&(r=n.getYForTopText(this.text_line)):r=n.getYForTopText(this.text_line));var o=e===Ne.STEM_DOWN,s=n.getSpacingBetweenLines(),a=1;!o&&this.note.beam&&(a+=.5);var u=r-s*(this.text_line+a),l=this.note.getModifierStartXY(this.position,this.index).x,c=Math.min(n.getYForTopText(this.text_line),u);if(c+=this.y_shift,this.delayed){var h=0;if(void 0!==this.delayXShift)h=this.delayXShift;else{h+=this.glyph.getMetrics().width/2;var f=yi.getNextContext(this.note.getTickContext());h+=f?.5*(f.getX()-l):.5*(n.x+n.width-l),this.delayXShift=h}l+=h}!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];wi.DEBUG&&C.L("Vex.Flow.Ornament",e)}("Rendering ornament: ",this.ornament,l,c),this.accidentalLower&&(this.accidentalLower.render(t,l,c),c-=this.accidentalLower.getMetrics().height,c-=this.render_options.accidentalLowerPadding),this.glyph.render(t,l,c),c-=this.glyph.getMetrics().height,this.accidentalUpper&&(c-=this.render_options.accidentalUpperPadding,this.accidentalUpper.render(t,l,c))}}]),Ei);function Ei(t){var e,n,i;if(function(t){if(!(t instanceof Ei))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=vi(Ei).call(this))||"object"!==gi(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","Ornament"),e.note=null,e.index=null,e.type=t,e.position=ge.Position.ABOVE,e.delayed=!1,e.accidentalUpper=null,e.accidentalLower=null,e.render_options={font_scale:38,accidentalLowerPadding:3,accidentalUpperPadding:3},e.ornament=G.ornamentCodes(e.type),!e.ornament)throw new C.RERR("ArgumentError","Ornament not found: '".concat(e.type,"'"));return e.glyph=new D(e.ornament.code,e.render_options.font_scale),e.glyph.setOrigin(.5,1),e}function Pi(t){return(Pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ti(t){return(Ti=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ki(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Oi(t,e,n){return e&&ki(t.prototype,e),n&&ki(t,n),t}function Mi(t,e){return(Mi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ri=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Mi(t,e)}(Li,ge),Oi(Li,null,[{key:"format",value:function(t,e){if(!t||0===t.length)return!1;for(var n=0,i=0;i<t.length;++i){var r=t[i];n=Math.max(r.getWidth(),n),r.getPosition()===ge.Position.ABOVE?(r.setTextLine(e.top_text_line),e.top_text_line++):(r.setTextLine(e.text_line),e.text_line++)}return e.left_shift+=n/2,e.right_shift+=n/2,!0}},{key:"CATEGORY",get:function(){return"annotations"}},{key:"Justify",get:function(){return{LEFT:1,CENTER:2,RIGHT:3,CENTER_STEM:4}}},{key:"JustifyString",get:function(){return{left:Li.Justify.LEFT,right:Li.Justify.RIGHT,center:Li.Justify.CENTER,centerStem:Li.Justify.CENTER_STEM}}},{key:"VerticalJustify",get:function(){return{TOP:1,CENTER:2,BOTTOM:3,CENTER_STEM:4}}},{key:"VerticalJustifyString",get:function(){return{above:Li.VerticalJustify.TOP,top:Li.VerticalJustify.TOP,below:Li.VerticalJustify.BOTTOM,bottom:Li.VerticalJustify.BOTTOM,center:Li.VerticalJustify.CENTER,centerStem:Li.VerticalJustify.CENTER_STEM}}}]),Oi(Li,[{key:"getCategory",value:function(){return Li.CATEGORY}},{key:"setFont",value:function(t,e,n){return this.font={family:t,size:e,weight:n},this}},{key:"setVerticalJustification",value:function(t){return this.vert_justification="string"==typeof t?Li.VerticalJustifyString[t]:t,this}},{key:"getJustification",value:function(){return this.justification}},{key:"setJustification",value:function(t){return this.justification="string"==typeof t?Li.JustifyString[t]:t,this}},{key:"draw",value:function(){if(this.checkContext(),!this.note)throw new C.RERR("NoNoteForAnnotation","Can't draw text annotation without an attached note.");this.setRendered();var t=this.note.getModifierStartXY(ge.Position.ABOVE,this.index);this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.weight);var e,n,i,r,o=this.context.measureText(this.text).width,s=this.context.measureText("m").width;e=this.justification===Li.Justify.LEFT?t.x:this.justification===Li.Justify.RIGHT?t.x-o:this.justification===Li.Justify.CENTER?t.x-o/2:this.note.getStemX()-o/2;var a=this.note.hasStem(),u=this.note.getStave();if(a&&(i=this.note.getStem().getExtents(),r=u.getSpacingBetweenLines()),this.vert_justification===Li.VerticalJustify.BOTTOM){if(n=u.getYForBottomText(this.text_line+G.TEXT_HEIGHT_OFFSET_HACK),a){var l=1===this.note.getStemDirection()?i.baseY:i.topY;n=Math.max(n,l+r*(this.text_line+2))}}else if(this.vert_justification===Li.VerticalJustify.CENTER){var c=this.note.getYForTopText(this.text_line)-1;n=c+(u.getYForBottomText(this.text_line)-c)/2+s/2}else if(this.vert_justification===Li.VerticalJustify.TOP)n=Math.min(u.getYForTopText(this.text_line),this.note.getYs()[0]-10),a&&(n=Math.min(n,i.topY-5-r*this.text_line));else{var h=this.note.getStemExtents();n=h.topY+(h.baseY-h.topY)/2+s/2}!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Ri.DEBUG&&C.L("Vex.Flow.Annotation",e)}("Rendering annotation: ",this.text,e,n),this.context.fillText(this.text,e,n),this.context.restore()}}]),Li);function Li(t){var e,n,i;return function(t){if(!(t instanceof Li))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=Ti(Li).call(this))||"object"!==Pi(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","Annotation"),e.note=null,e.index=null,e.text=t,e.justification=Li.Justify.CENTER,e.vert_justification=Li.VerticalJustify.TOP,e.font={family:"Arial",size:10,weight:""},e.setWidth(G.textWidth(t)),e}function Ai(t){return(Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ci(t){return(Ci=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ii(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ni(t,e,n){return e&&Ii(t.prototype,e),n&&Ii(t,n),t}function Fi(t,e){return(Fi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bi=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Fi(t,e)}(Di,ge),Ni(Di,null,[{key:"format",value:function(t,e){if(!t||0===t.length)return!1;for(var n=0,i=e.top_text_line,r=0;r<t.length;++r){var o=t[r];o.setXShift(n),n=o.getWidth(),o.setTextLine(i)}return e.right_shift+=n,e.top_text_line+=1,!0}},{key:"CATEGORY",get:function(){return"bends"}},{key:"UP",get:function(){return 0}},{key:"DOWN",get:function(){return 1}}]),Ni(Di,[{key:"getCategory",value:function(){return Di.CATEGORY}},{key:"setXShift",value:function(t){this.x_shift=t,this.updateWidth()}},{key:"setFont",value:function(t){return this.font=t,this}},{key:"getText",value:function(){return this.text}},{key:"updateWidth",value:function(){for(var t,e=0,n=0;n<this.phrase.length;++n){var i=this.phrase[n];if("width"in i)e+=i.width;else{var r=i.type===Di.UP?this.render_options.bend_width:this.render_options.release_width;i.width=C.Max(r,(t=i.text,this.context?this.context.measureText(t).width:G.textWidth(t)))+3,i.draw_width=i.width/2,e+=i.width}}return this.setWidth(e+this.x_shift),this}},{key:"draw",value:function(){if(this.checkContext(),!this.note||null==this.index)throw new C.RERR("NoNoteForBend","Can't draw bend without a note or index.");this.setRendered();var t=this.note.getModifierStartXY(ge.Position.RIGHT,this.index);t.x+=3,t.y+=.5;var e=this.x_shift,r=this.context,n=this.note.getStave().getYForTopText(this.text_line)+3,i=this.note.getStave().getYForTopText(this.text_line)-1,o=this;function s(t,e,n,i){r.save(),r.beginPath(),r.setLineWidth(o.render_options.line_width),r.setStrokeStyle(o.render_options.line_style),r.setFillStyle(o.render_options.line_style),r.moveTo(t,i),r.quadraticCurveTo(t+n,i,t+n,e),r.stroke(),r.restore()}function a(t,e,n){var i=n||1;r.beginPath(),r.moveTo(t,e),r.lineTo(t-4,e+4*i),r.lineTo(t+4,e+4*i),r.closePath(),r.fill()}function u(t,e){r.save(),r.setRawFont(o.font);var n=t-r.measureText(e).width/2;r.fillText(e,n,i),r.restore()}for(var l,c,h,f,p,d,b=null,y=0,m=0;m<this.phrase.length;++m){var g=this.phrase[m];0===m&&(g.draw_width+=e),y=g.draw_width+(b?b.draw_width:0)-(1===m?e:0),g.type===Di.UP&&(b&&b.type===Di.UP&&a(t.x,n),f=n,p=(l=t.x)+(h=y),d=c=t.y,r.save(),r.beginPath(),r.setLineWidth(o.render_options.line_width),r.setStrokeStyle(o.render_options.line_style),r.setFillStyle(o.render_options.line_style),r.moveTo(l,c),r.quadraticCurveTo(p,d,l+h,f),r.stroke(),r.restore()),g.type===Di.DOWN&&(b&&b.type===Di.UP&&s(t.x,t.y,y,n),b&&b.type===Di.DOWN&&(a(t.x,t.y,-1),s(t.x,t.y,y,n)),null===b&&(y=g.draw_width,s(t.x,t.y,y,n))),u(t.x+y,g.text),(b=g).x=t.x,t.x+=y}b.type===Di.UP?a(b.x+y,n):b.type===Di.DOWN&&a(b.x+y,t.y,-1)}}]),Di);function Di(t,e,n){var i,r,o;return function(t){if(!(t instanceof Di))throw new TypeError("Cannot call a class as a function")}(this),(r=this,i=!(o=Ci(Di).call(this))||"object"!==Ai(o)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r):o).setAttribute("type","Bend"),i.text=t,i.x_shift=0,i.release=e||!1,i.font="10pt Arial",i.render_options={line_width:1.5,line_style:"#777777",bend_width:8,release_width:8},n?i.phrase=n:(i.phrase=[{type:Di.UP,text:i.text}],i.release&&i.phrase.push({type:Di.DOWN,text:""})),i.updateWidth(),i}function ji(t){return(ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vi(t){return(Vi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Wi(t,e,n){return e&&Gi(t.prototype,e),n&&Gi(t,n),t}function Ui(t,e){return(Ui=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hi=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Ui(t,e)}(Yi,ge),Wi(Yi,null,[{key:"format",value:function(t,e,n){if(!t||0===t.length)return!1;var i=e.top_text_line,r=0,o=e.right_shift-7,s=n.getModifiers(Bi.CATEGORY);s&&0<s.length&&i--;for(var a=0;a<t.length;++a){var u=t[a];u.setXShift(o),u.setTextLine(i),o+=r+=u.getWidth()}return e.right_shift+=r,e.top_text_line+=1,!0}},{key:"CATEGORY",get:function(){return"vibratos"}}]),Wi(Yi,[{key:"getCategory",value:function(){return Yi.CATEGORY}},{key:"setHarsh",value:function(t){return this.render_options.harsh=t,this}},{key:"setVibratoWidth",value:function(t){return this.render_options.vibrato_width=t,this.setWidth(t),this}},{key:"draw",value:function(){var t=this.checkContext();if(!this.note)throw new C.RERR("NoNoteForVibrato","Can't draw vibrato without an attached note.");this.setRendered();var e=this.note.getModifierStartXY(ge.Position.RIGHT,this.index).x+this.x_shift,n=this.note.getYForTopText(this.text_line)+2;Yi.renderVibrato(t,e,n,this.render_options)}}],[{key:"renderVibrato",value:function(t,e,n,i){var r,o=i.harsh,s=i.vibrato_width,a=i.wave_width,u=i.wave_girth,l=i.wave_height,c=s/a;if(t.beginPath(),o){for(t.moveTo(e,n+u+1),r=0;r<c/2;++r)t.lineTo(e+a,n-l/2),e+=a,t.lineTo(e+a,n+l/2),e+=a;for(r=0;r<c/2;++r)t.lineTo(e-a,n-l/2+u+1),e-=a,t.lineTo(e-a,n+l/2+u+1),e-=a;t.fill()}else{for(t.moveTo(e,n+u),r=0;r<c/2;++r)t.quadraticCurveTo(e+a/2,n-l/2,e+a,n),e+=a,t.quadraticCurveTo(e+a/2,n+l/2,e+a,n),e+=a;for(r=0;r<c/2;++r)t.quadraticCurveTo(e-a/2,n+l/2+u,e-a,n+u),e-=a,t.quadraticCurveTo(e-a/2,n-l/2+u,e-a,n+u),e-=a;t.fill()}}}]),Yi);function Yi(){var t,e,n;return function(t){if(!(t instanceof Yi))throw new TypeError("Cannot call a class as a function")}(this),(e=this,t=!(n=Vi(Yi).call(this))||"object"!==ji(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):n).setAttribute("type","Vibrato"),t.position=ge.Position.RIGHT,t.render_options={harsh:!1,vibrato_width:20,wave_height:6,wave_width:4,wave_girth:2},t.setVibratoWidth(t.render_options.vibrato_width),t}function zi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Xi.DEBUG&&C.L("Vex.Flow.ModifierContext",e)}var Xi=(function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(Ki.prototype,[{key:"addModifier",value:function(t){var e=t.getCategory();return this.modifiers[e]||(this.modifiers[e]=[]),this.modifiers[e].push(t),t.setModifierContext(this),this.preFormatted=!1,this}},{key:"getModifiers",value:function(t){return this.modifiers[t]}},{key:"getWidth",value:function(){return this.width}},{key:"getExtraLeftPx",value:function(){return this.state.left_shift}},{key:"getExtraRightPx",value:function(){return this.state.right_shift}},{key:"getState",value:function(){return this.state}},{key:"getMetrics",value:function(){if(!this.formatted)throw new C.RERR("UnformattedModifier","Unformatted modifier has no metrics.");return{width:this.state.left_shift+this.state.right_shift+this.spacing,spacing:this.spacing,extra_left_px:this.state.left_shift,extra_right_px:this.state.right_shift}}},{key:"preFormat",value:function(){var e=this;this.preFormatted||(this.PREFORMAT.forEach(function(t){zi("Preformatting ModifierContext: ",t.CATEGORY),t.format(e.getModifiers(t.CATEGORY),e.state,e)}),this.width=this.state.left_shift+this.state.right_shift,this.preFormatted=!0)}},{key:"postFormat",value:function(){var e=this;this.postFormatted||this.POSTFORMAT.forEach(function(t){zi("Postformatting ModifierContext: ",t.CATEGORY),t.postFormat(e.getModifiers(t.CATEGORY),e)})}}]),Ki);function Ki(){!function(t){if(!(t instanceof Ki))throw new TypeError("Cannot call a class as a function")}(this),this.modifiers={},this.preFormatted=!1,this.postFormatted=!1,this.width=0,this.spacing=0,this.state={left_shift:0,right_shift:0,text_line:0,top_text_line:0},this.PREFORMAT=[Ne,Pe,We,nn,Vn,Cn,fn,Xn,li,wi,Ri,Bi,Hi],this.POSTFORMAT=[Ne]}function qi(t){return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ji(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Qi(t,e,n){return e&&Ji(t.prototype,e),n&&Ji(t,n),t}function Zi(t,e,n,i){var r=e;for(n+=1;n<t.length;n+=1){var o=t[n];if(!o.isRest()&&!o.shouldIgnoreTicks()){r=o.getLineForRest();break}}if(i&&e!==r){var s=Math.max(e,r),a=Math.min(e,r);r=C.MidLine(s,a)}return r}function $i(t,r,o){if(!t||!t.length)throw new C.RERR("BadArgument","No voices to format");var n=t[0].getTotalTicks(),e=t.reduce(function(t,e){if(!e.getTotalTicks().equals(n))throw new C.RERR("TickMismatch","Voices should have same total note duration in ticks.");if(e.getMode()===At.Mode.STRICT&&!e.isComplete())throw new C.RERR("IncompleteVoice","Voice does not have enough notes.");return Math.max(t,p.LCM(t,e.getResolutionMultiplier()))},1),s={},a=[],u=[];return t.forEach(function(t){var i=new p(0,e);t.getTickables().forEach(function(t){var e=i.numerator;if(!s[e]){var n=new r;u.push(n),s[e]=n}o(t,s[e]),a.push(e),i.add(t.getTicks())})}),{map:s,array:u,list:C.SortAndUnique(a,function(t,e){return t-e},function(t,e){return t===e}),resolutionMultiplier:e}}var tr=(Qi(er,null,[{key:"SimpleFormat",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).paddingBetween,r=void 0===n?10:n;t.reduce(function(t,e){e.addToModifierContext(new Xi);var n=(new yi).addTickable(e).preFormat(),i=n.getExtraPx();return n.setX(t+i.left),t+n.getWidth()+i.right+r},e)}},{key:"plotDebugging",value:function(i,t,e,r,o){var s=e+Zt.STAVEPADDING,n=t.contextGaps;i.save(),i.setFont("Arial",8,""),n.gaps.forEach(function(t){var e,n;e=s+t.x1,n=s+t.x2,i.beginPath(),i.setStrokeStyle("#aaa"),i.setFillStyle("#aaa"),i.setLineWidth(1),i.fillRect(e,r,n-e,o-r),i.fillText(Math.round(t.x2-t.x1),s+t.x1,o+12)}),i.fillText(Math.round(n.total)+"px",s-20,o+12),i.setFillStyle("red"),i.fillText("Loss: "+t.lossHistory.map(function(t){return Math.round(t)}),s-20,o+22),i.restore()}},{key:"FormatAndDraw",value:function(e,t,n,i){var r={auto_beam:!1,align_rests:!1};"object"===qi(i)?C.Merge(r,i):"boolean"==typeof i&&(r.auto_beam=i);var o=new At(G.TIME4_4).setMode(At.Mode.SOFT).addTickables(n),s=r.auto_beam?Pt.applyAndGetBeams(o):[];return(new er).joinVoices([o],{align_rests:r.align_rests}).formatToStave([o],t,{align_rests:r.align_rests,stave:t}),o.setStave(t).draw(e,t),s.forEach(function(t){return t.setContext(e).draw()}),o.getBoundingBox()}},{key:"FormatAndDrawTab",value:function(e,t,n,i,r,o,s){var a={auto_beam:o,align_rests:!1};"object"===qi(s)?C.Merge(a,s):"boolean"==typeof s&&(a.auto_beam=s);var u=new At(G.TIME4_4).setMode(At.Mode.SOFT).addTickables(r),l=new At(G.TIME4_4).setMode(At.Mode.SOFT).addTickables(i),c=a.auto_beam?Pt.applyAndGetBeams(u):[];(new er).joinVoices([u],{align_rests:a.align_rests}).joinVoices([l]).formatToStave([u,l],n,{align_rests:a.align_rests}),u.draw(e,n),l.draw(e,t),c.forEach(function(t){return t.setContext(e).draw()}),new Vt(n,t).setContext(e).draw()}},{key:"AlignRestsToNotes",value:function(o,s,a){return o.forEach(function(t,e){if(t instanceof Ne&&t.isRest()){if(t.tuplet&&!a)return;var n=t.getGlyph().position.toUpperCase();if("R/4"!==n&&"B/4"!==n)return;if(s||null!=t.beam){var i=t.getKeyProps()[0];if(0===e)i.line=Zi(o,i.line,e,!1),t.setKeyLine(0,i.line);else if(0<e&&e<o.length){var r;o[e-1].isRest()?(r=o[e-1].getKeyProps()[0].line,i.line=r):(r=o[e-1].getLineForRest(),i.line=Zi(o,r,e,!0)),t.setKeyLine(0,i.line)}}}}),this}}]),Qi(er,[{key:"alignRests",value:function(t,e){if(!t||!t.length)throw new C.RERR("BadArgument","No voices to format rests");t.forEach(function(t){return er.AlignRestsToNotes(t.getTickables(),e)})}},{key:"preCalculateMinTotalWidth",value:function(t){if(this.hasMinTotalWidth)return this.minTotalWidth;if(!this.tickContexts){if(!t)throw new C.RERR("BadArgument","'voices' required to run preCalculateMinTotalWidth");this.createTickContexts(t)}var e=this.tickContexts,n=e.list,i=e.map;return this.minTotalWidth=n.map(function(t){var e=i[t];return e.preFormat(),e.getWidth()}).reduce(function(t,e){return t+e},0),this.hasMinTotalWidth=!0,this.minTotalWidth}},{key:"getMinTotalWidth",value:function(){if(!this.hasMinTotalWidth)throw new C.RERR("NoMinTotalWidth","Call 'preCalculateMinTotalWidth' or 'preFormat' before calling 'getMinTotalWidth'");return this.minTotalWidth}},{key:"createModifierContexts",value:function(t){var e=$i(t,Xi,function(t,e){return t.addToModifierContext(e)});return this.modiferContexts=e}},{key:"createTickContexts",value:function(t){var e=$i(t,yi,function(t,e){return e.addTickable(t)});return e.array.forEach(function(t){t.tContexts=e.array}),this.totalTicks=t[0].getTicksUsed().clone(),this.tickContexts=e}},{key:"preFormat",value:function(){var r=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,o=1<arguments.length?arguments[1]:void 0,e=2<arguments.length?arguments[2]:void 0,n=3<arguments.length?arguments[3]:void 0,i=this.tickContexts,s=i.list,a=i.map,u=i.resolutionMultiplier;e&&n&&e.forEach(function(t){return t.setStave(n).preFormat()});var l=0,c=0,h=t/2;if(this.minTotalWidth=0,s.forEach(function(t){var e=a[t];o&&e.setContext(o),e.preFormat();var n=e.getWidth();r.minTotalWidth+=n;var i=e.getMetrics();l=l+c+i.extraLeftPx,e.setX(l),c=n-i.extraLeftPx}),this.minTotalWidth=l+c,this.hasMinTotalWidth=!0,!(t<=0)){var f=(t-this.minTotalWidth)/(this.totalTicks.value()*u),p=0;s.forEach(function(t,e){var n=s[e-1]||0,i=a[t];p+=(t-n)*f,i.setX(i.getX()+p),i.getCenterAlignedTickables().forEach(function(t){t.center_x_shift=h-i.getX()})}),1!==s.length&&(this.justifyWidth=t,this.lossHistory=[],this.evaluate())}}},{key:"evaluate",value:function(){var l=this,p=this.justifyWidth;this.contextGaps={total:0,gaps:[]},this.tickContexts.list.forEach(function(t,e){if(0!==e){var n=l.tickContexts.list[e-1],i=l.tickContexts.map[n],r=l.tickContexts.map[t],o=i.getMetrics(),s=i.getX()+o.width,a=r.getX(),u=a-s;l.contextGaps.total+=u,l.contextGaps.gaps.push({x1:s,x2:a}),r.getFormatterMetrics().freedom.left=u,i.getFormatterMetrics().freedom.right=u}});var d=this.durationStats={};this.voices.forEach(function(t){t.getTickables().forEach(function(t,e,n){var i,r,o,s=t.getTicks().clone().simplify().toString(),a=t.getMetrics(),u=t.getFormatterMetrics(),l=t.getX()+a.noteWidth+a.modRightPx+a.extraRightPx,c=0;if(e<n.length-1){var h=n[e+1],f=h.getMetrics();c=h.getX()-f.modLeftPx-f.extraLeftPx-l,u.space.used=h.getX()-t.getX(),h.getFormatterMetrics().freedom.left=c}else c=p-l,u.space.used=p-t.getX();u.freedom.right=c,i=s,r=u.space.used,void 0===(o=d[i])?d[i]={mean:r,count:1}:(o.count+=1,o.mean=(o.mean+r)/2)})});var i=0;return this.voices.forEach(function(t){t.getTickables().forEach(function(t){var e=t.getTicks().clone().simplify().toString(),n=t.getFormatterMetrics();n.iterations+=1,n.space.deviation=n.space.used-d[e].mean,n.duration=e,n.space.mean=d[e].mean,i+=Math.pow(d[e].mean,2)})}),this.totalCost=Math.sqrt(i),this.lossHistory.push(this.totalCost),this}},{key:"tune",value:function(){var f=this,p=0;return this.tickContexts.list.forEach(function(t,e,n){var i,r,o,s,a=f.tickContexts.map[t],u=0<e?f.tickContexts.map[n[e-1]]:null,l=e<n.length-1?f.tickContexts.map[n[e+1]]:null;r=u,o=l,s=p,(i=a).setX(i.getX()+s),i.getFormatterMetrics().freedom.left+=s,i.getFormatterMetrics().freedom.right-=s,r&&(r.getFormatterMetrics().freedom.right+=s),o&&(o.getFormatterMetrics().freedom.left-=s);var c=-a.getTickables().map(function(t){return t.getFormatterMetrics().space.deviation}).reduce(function(t,e){return t+e});0<c?p=-Math.min(a.getFormatterMetrics().freedom.right,Math.abs(c)):c<0&&(p=l?Math.min(l.getFormatterMetrics().freedom.right,Math.abs(c)):0);var h=Math.min(5,Math.abs(p));p=0<p?h:-h}),this.evaluate()}},{key:"postFormat",value:function(){function t(e){return e.list.forEach(function(t){return e.map[t].postFormat()})}return t(this.modiferContexts),t(this.tickContexts),this}},{key:"joinVoices",value:function(t){return this.createModifierContexts(t),this.hasMinTotalWidth=!1,this}},{key:"format",value:function(t,e,n){var i={align_rests:!1,context:null,stave:null};return C.Merge(i,n),this.voices=t,this.alignRests(t,i.align_rests),this.createTickContexts(t),this.preFormat(e,i.context,t,i.stave),i.stave&&this.postFormat(),this}},{key:"formatToStave",value:function(t,e,n){var i=e.getNoteEndX()-e.getNoteStartX()-10;!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];tr.DEBUG&&C.L("Vex.Flow.Formatter",e)}("Formatting voices to width: ",i);var r={context:e.getContext()};return C.Merge(r,n),this.format(t,i,r)}}]),er);function er(){!function(t){if(!(t instanceof er))throw new TypeError("Cannot call a class as a function")}(this),this.minTotalWidth=0,this.hasMinTotalWidth=!1,this.totalTicks=new p(0,1),this.tickContexts=null,this.modiferContexts=null,this.contextGaps={total:0,gaps:[]},this.voices=[]}function nr(t){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ir(t){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function or(t,e,n){return e&&rr(t.prototype,e),n&&rr(t,n),t}function sr(t,e){return(sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ar=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sr(t,e)}(ur,x),or(ur,null,[{key:"Position",get:function(){return{LEFT:1,RIGHT:2,ABOVE:3,BELOW:4,BEGIN:5,END:6}}}]),or(ur,[{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(t){return this.position=t,this}},{key:"getStave",value:function(){return this.stave}},{key:"setStave",value:function(t){return this.stave=t,this}},{key:"getWidth",value:function(){return this.width}},{key:"setWidth",value:function(t){return this.width=t,this}},{key:"getX",value:function(){return this.x}},{key:"setX",value:function(t){return this.x=t,this}},{key:"getCategory",value:function(){return""}},{key:"makeSpacer",value:function(t){return{getContext:function(){return!0},setStave:function(){},renderToStave:function(){},getMetrics:function(){return{width:t}}}}},{key:"placeGlyphOnLine",value:function(t,e,n){t.setYShift(e.getYForLine(n)-e.getYForGlyphs())}},{key:"getPadding",value:function(t){return void 0!==t&&t<2?0:this.padding}},{key:"setPadding",value:function(t){return this.padding=t,this}},{key:"setLayoutMetrics",value:function(t){return this.layoutMetrics=t,this}},{key:"getLayoutMetrics",value:function(){return this.layoutMetrics}}]),ur);function ur(){var t,e,n;return function(t){if(!(t instanceof ur))throw new TypeError("Cannot call a class as a function")}(this),(e=this,t=!(n=ir(ur).call(this))||"object"!==nr(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):n).setAttribute("type","StaveModifier"),t.padding=10,t.position=ur.Position.ABOVE,t.layoutMetrics=null,t}function lr(t){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cr(t){return(cr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function fr(t,e,n){return e&&hr(t.prototype,e),n&&hr(t,n),t}function pr(t,e){return(pr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var dr=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),pr(t,e)}(br,ar),fr(br,null,[{key:"CATEGORY",get:function(){return"barlines"}},{key:"type",get:function(){return{SINGLE:1,DOUBLE:2,END:3,REPEAT_BEGIN:4,REPEAT_END:5,REPEAT_BOTH:6,NONE:7}}},{key:"typeString",get:function(){return{single:br.type.SINGLE,double:br.type.DOUBLE,end:br.type.END,repeatBegin:br.type.REPEAT_BEGIN,repeatEnd:br.type.REPEAT_END,repeatBoth:br.type.REPEAT_BOTH,none:br.type.NONE}}}]),fr(br,[{key:"getCategory",value:function(){return br.CATEGORY}},{key:"getType",value:function(){return this.type}},{key:"setType",value:function(t){return this.type="string"==typeof t?br.typeString[t]:t,this.setWidth(this.widths[this.type]),this.setPadding(this.paddings[this.type]),this.setLayoutMetrics(this.layoutMetricsMap[this.type]),this}},{key:"draw",value:function(t){switch(t.checkContext(),this.setRendered(),this.type){case br.type.SINGLE:this.drawVerticalBar(t,this.x,!1);break;case br.type.DOUBLE:this.drawVerticalBar(t,this.x,!0);break;case br.type.END:this.drawVerticalEndBar(t,this.x);break;case br.type.REPEAT_BEGIN:this.drawRepeatBar(t,this.x,!0),t.getX()!==this.x&&this.drawVerticalBar(t,t.getX());break;case br.type.REPEAT_END:this.drawRepeatBar(t,this.x,!1);break;case br.type.REPEAT_BOTH:this.drawRepeatBar(t,this.x,!1),this.drawRepeatBar(t,this.x,!0)}}},{key:"drawVerticalBar",value:function(t,e,n){t.checkContext();var i=t.getTopLineTopY(),r=t.getBottomLineBottomY();n&&t.context.fillRect(e-3,i,1,r-i),t.context.fillRect(e,i,1,r-i)}},{key:"drawVerticalEndBar",value:function(t,e){t.checkContext();var n=t.getTopLineTopY(),i=t.getBottomLineBottomY();t.context.fillRect(e-5,n,1,i-n),t.context.fillRect(e-2,n,3,i-n)}},{key:"drawRepeatBar",value:function(t,e,n){t.checkContext();var i=t.getTopLineTopY(),r=t.getBottomLineBottomY(),o=3;n||(o=-5),t.context.fillRect(e+o,i,1,r-i),t.context.fillRect(e-2,i,3,r-i),n?o+=4:o-=4;var s=e+o+1,a=(t.getNumLines()-1)*t.getSpacingBetweenLines(),u=i+(a=a/2-t.getSpacingBetweenLines()/2)+1;t.context.beginPath(),t.context.arc(s,u,2,0,2*Math.PI,!1),t.context.fill(),u+=t.getSpacingBetweenLines(),t.context.beginPath(),t.context.arc(s,u,2,0,2*Math.PI,!1),t.context.fill()}}]),br);function br(t){var e,n,i;!function(t){if(!(t instanceof br))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=cr(br).call(this))||"object"!==lr(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","Barline"),e.thickness=G.STAVE_LINE_THICKNESS;var r=br.type;return e.widths={},e.widths[r.SINGLE]=5,e.widths[r.DOUBLE]=5,e.widths[r.END]=5,e.widths[r.REPEAT_BEGIN]=5,e.widths[r.REPEAT_END]=5,e.widths[r.REPEAT_BOTH]=5,e.widths[r.NONE]=5,e.paddings={},e.paddings[r.SINGLE]=0,e.paddings[r.DOUBLE]=0,e.paddings[r.END]=0,e.paddings[r.REPEAT_BEGIN]=15,e.paddings[r.REPEAT_END]=15,e.paddings[r.REPEAT_BOTH]=15,e.paddings[r.NONE]=0,e.layoutMetricsMap={},e.layoutMetricsMap[r.SINGLE]={xMin:0,xMax:1,paddingLeft:5,paddingRight:5},e.layoutMetricsMap[r.DOUBLE]={xMin:-3,xMax:1,paddingLeft:5,paddingRight:5},e.layoutMetricsMap[r.END]={xMin:-5,xMax:1,paddingLeft:5,paddingRight:5},e.layoutMetricsMap[r.REPEAT_END]={xMin:-10,xMax:1,paddingLeft:5,paddingRight:5},e.layoutMetricsMap[r.REPEAT_BEGIN]={xMin:-2,xMax:10,paddingLeft:5,paddingRight:5},e.layoutMetricsMap[r.REPEAT_BOTH]={xMin:-10,xMax:10,paddingLeft:5,paddingRight:5},e.layoutMetricsMap[r.NONE]={xMin:0,xMax:0,paddingLeft:5,paddingRight:5},e.setPosition(ar.Position.BEGIN),e.setType(t),e}function yr(t){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mr(t){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function vr(t,e,n){return e&&gr(t.prototype,e),n&&gr(t,n),t}function _r(t,e){return(_r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Sr=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),_r(t,e)}(xr,ar),vr(xr,null,[{key:"CATEGORY",get:function(){return"repetitions"}},{key:"type",get:function(){return{NONE:1,CODA_LEFT:2,CODA_RIGHT:3,SEGNO_LEFT:4,SEGNO_RIGHT:5,DC:6,DC_AL_CODA:7,DC_AL_FINE:8,DS:9,DS_AL_CODA:10,DS_AL_FINE:11,FINE:12}}}]),vr(xr,[{key:"getCategory",value:function(){return xr.CATEGORY}},{key:"setShiftX",value:function(t){return this.x_shift=t,this}},{key:"setShiftY",value:function(t){return this.y_shift=t,this}},{key:"draw",value:function(t,e){switch(this.setRendered(),this.symbol_type){case xr.type.CODA_RIGHT:this.drawCodaFixed(t,e+t.width);break;case xr.type.CODA_LEFT:this.drawSymbolText(t,e,"Coda",!0);break;case xr.type.SEGNO_LEFT:this.drawSignoFixed(t,e);break;case xr.type.SEGNO_RIGHT:this.drawSignoFixed(t,e+t.width);break;case xr.type.DC:this.drawSymbolText(t,e,"D.C.",!1);break;case xr.type.DC_AL_CODA:this.drawSymbolText(t,e,"D.C. al",!0);break;case xr.type.DC_AL_FINE:this.drawSymbolText(t,e,"D.C. al Fine",!1);break;case xr.type.DS:this.drawSymbolText(t,e,"D.S.",!1);break;case xr.type.DS_AL_CODA:this.drawSymbolText(t,e,"D.S. al",!0);break;case xr.type.DS_AL_FINE:this.drawSymbolText(t,e,"D.S. al Fine",!1);break;case xr.type.FINE:this.drawSymbolText(t,e,"Fine",!1)}return this}},{key:"drawCodaFixed",value:function(t,e){var n=t.getYForTopText(t.options.num_lines)+this.y_shift;return D.renderGlyph(t.context,this.x+e+this.x_shift,n+25,40,"v4d",!0),this}},{key:"drawSignoFixed",value:function(t,e){var n=t.getYForTopText(t.options.num_lines)+this.y_shift;return D.renderGlyph(t.context,this.x+e+this.x_shift,n+25,30,"v8c",!0),this}},{key:"drawSymbolText",value:function(t,e,n,i){var r=t.checkContext();r.save(),r.setFont(this.font.family,this.font.size,this.font.weight);var o=0+this.x_shift,s=e+this.x_shift;this.symbol_type===xr.type.CODA_LEFT?s=(o=this.x+t.options.vertical_bar_width)+r.measureText(n).width+12:o=(s=this.x+e+t.width-5+this.x_shift)-+r.measureText(n).width-12;var a=t.getYForTopText(t.options.num_lines)+this.y_shift;return i&&D.renderGlyph(r,s,a,40,"v4d",!0),r.fillText(n,o,a+5),r.restore(),this}}]),xr);function xr(t,e,n){var i,r,o;return function(t){if(!(t instanceof xr))throw new TypeError("Cannot call a class as a function")}(this),(r=this,i=!(o=mr(xr).call(this))||"object"!==yr(o)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r):o).setAttribute("type","Repetition"),i.symbol_type=t,i.x=e,i.x_shift=0,i.y_shift=n,i.font={family:"times",size:12,weight:"bold italic"},i}function wr(t){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Er(t){return(Er=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Tr(t,e,n){return e&&Pr(t.prototype,e),n&&Pr(t,n),t}function kr(t,e){return(kr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Or=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),kr(t,e)}(Mr,ar),Tr(Mr,null,[{key:"CATEGORY",get:function(){return"stavesection"}}]),Tr(Mr,[{key:"getCategory",value:function(){return Mr.CATEGORY}},{key:"setStaveSection",value:function(t){return this.section=t,this}},{key:"setShiftX",value:function(t){return this.shift_x=t,this}},{key:"setShiftY",value:function(t){return this.shift_y=t,this}},{key:"draw",value:function(t,e){var n=t.checkContext();this.setRendered(),n.save(),n.lineWidth=2,n.setFont(this.font.family,this.font.size,this.font.weight);var i=n.measureText(""+this.section).width,r=i+6;r<18&&(r=18);var o=t.getYForTopText(3)+this.shift_y,s=this.x+e;return n.beginPath(),n.lineWidth=2,n.rect(s,o,r,20),n.stroke(),s+=(r-i)/2,n.fillText(""+this.section,s,o+16),n.restore(),this}}]),Mr);function Mr(t,e,n){var i,r,o;return function(t){if(!(t instanceof Mr))throw new TypeError("Cannot call a class as a function")}(this),(r=this,i=!(o=Er(Mr).call(this))||"object"!==wr(o)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r):o).setAttribute("type","StaveSection"),i.setWidth(16),i.section=t,i.x=e,i.shift_x=0,i.shift_y=n,i.font={family:"sans-serif",size:12,weight:"bold"},i}function Rr(t){return(Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lr(t){return(Lr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ar(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Cr(t,e,n){return e&&Ar(t.prototype,e),n&&Ar(t,n),t}function Ir(t,e){return(Ir=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Nr=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Ir(t,e)}(Fr,ar),Cr(Fr,null,[{key:"CATEGORY",get:function(){return"stavetempo"}}]),Cr(Fr,[{key:"getCategory",value:function(){return Fr.CATEGORY}},{key:"setTempo",value:function(t){return this.tempo=t,this}},{key:"setShiftX",value:function(t){return this.shift_x=t,this}},{key:"setShiftY",value:function(t){return this.shift_y=t,this}},{key:"draw",value:function(t,e){var n=t.checkContext();this.setRendered();var i=this.render_options,r=i.glyph_font_scale/38,o=this.tempo.name,s=this.tempo.duration,a=this.tempo.dots,u=this.tempo.bpm,l=this.font,c=this.x+this.shift_x+e,h=t.getYForTopText(1)+this.shift_y;if(n.save(),o&&(n.setFont(l.family,l.size,l.weight),n.fillText(o,c,h),c+=n.measureText(o).width),s&&u){n.setFont(l.family,l.size,"normal"),o&&(c+=n.measureText(" ").width,n.fillText("(",c,h),c+=n.measureText("(").width);var f=G.durationToGlyph(s);if(c+=3*r,D.renderGlyph(n,c,h,i.glyph_font_scale,f.code_head),c+=f.getWidth()*r,f.stem){var p=30;f.beam_count&&(p+=3*(f.beam_count-1));var d=h-(p*=r);n.fillRect(c-r,d,r,p),f.flag&&(D.renderGlyph(n,c,d,i.glyph_font_scale,f.code_flag_upstem),a||(c+=6*r))}for(var b=0;b<a;b++)c+=6*r,n.beginPath(),n.arc(c,h+2*r,2*r,0,2*Math.PI,!1),n.fill();n.fillText(" = "+u+(o?")":""),c+3*r,h)}return n.restore(),this}}]),Fr);function Fr(t,e,n){var i,r,o;return function(t){if(!(t instanceof Fr))throw new TypeError("Cannot call a class as a function")}(this),(r=this,i=!(o=Lr(Fr).call(this))||"object"!==Rr(o)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r):o).setAttribute("type","StaveTempo"),i.tempo=t,i.position=ge.Position.ABOVE,i.x=e,i.shift_x=10,i.shift_y=n,i.font={family:"times",size:14,weight:"bold"},i.render_options={glyph_font_scale:30},i}function Br(t){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dr(t){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Vr(t,e,n){return e&&jr(t.prototype,e),n&&jr(t,n),t}function Gr(t,e){return(Gr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wr=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gr(t,e)}(Ur,Zt),Vr(Ur,null,[{key:"Justification",get:function(){return{LEFT:1,CENTER:2,RIGHT:3}}},{key:"GLYPHS",get:function(){return{segno:{code:"v8c",point:40,x_shift:0,y_shift:-10},tr:{code:"v1f",point:40,x_shift:0,y_shift:0},mordent_upper:{code:"v1e",point:40,x_shift:0,y_shift:0},mordent_lower:{code:"v45",point:40,x_shift:0,y_shift:0},f:{code:"vba",point:40,x_shift:0,y_shift:0},p:{code:"vbf",point:40,x_shift:0,y_shift:0},m:{code:"v62",point:40,x_shift:0,y_shift:0},s:{code:"v4a",point:40,x_shift:0,y_shift:0},z:{code:"v80",point:40,x_shift:0,y_shift:0},coda:{code:"v4d",point:40,x_shift:0,y_shift:-8},pedal_open:{code:"v36",point:40,x_shift:0,y_shift:0},pedal_close:{code:"v5d",point:40,x_shift:0,y_shift:3},caesura_straight:{code:"v34",point:40,x_shift:0,y_shift:2},caesura_curved:{code:"v4b",point:40,x_shift:0,y_shift:2},breath:{code:"v6c",point:40,x_shift:0,y_shift:0},tick:{code:"v6f",point:50,x_shift:0,y_shift:0},turn:{code:"v72",point:40,x_shift:0,y_shift:0},turn_inverted:{code:"v33",point:40,x_shift:0,y_shift:0},mordent:{code:"v1e",point:40,x_shift:0,y_shift:0}}}}]),Vr(Ur,[{key:"setJustification",value:function(t){return this.justification=t,this}},{key:"setLine",value:function(t){return this.line=t,this}},{key:"preFormat",value:function(){this.checkContext(),this.preFormatted||(this.smooth?this.setWidth(0):this.glyph||this.setWidth(this.context.measureText(this.text).width),this.justification===Ur.Justification.CENTER?this.extraLeftPx=this.width/2:this.justification===Ur.Justification.RIGHT&&(this.extraLeftPx=this.width),this.setPreFormatted(!0))}},{key:"draw",value:function(){if(this.checkContext(),!this.stave)throw new C.RERR("NoStave","Can't draw without a stave.");this.setRendered();var t,e=this.context,n=this.getAbsoluteX();if(this.justification===Ur.Justification.CENTER?n-=this.getWidth()/2:this.justification===Ur.Justification.RIGHT&&(n-=this.getWidth()),this.glyph)t=this.stave.getYForLine(this.line+-3),this.glyph.render(this.context,n+this.glyph_struct.x_shift,t+this.glyph_struct.y_shift);else{t=this.stave.getYForLine(this.line+-3),this.applyStyle(e),e.setFont(this.font.family,this.font.size,this.font.weight),e.fillText(this.text,n,t);var i=e.measureText("M").width,r=e.measureText(this.text).width;this.superscript&&(e.setFont(this.font.family,this.font.size/1.3,this.font.weight),e.fillText(this.superscript,n+r+2,t-i/2.2)),this.subscript&&(e.setFont(this.font.family,this.font.size/1.3,this.font.weight),e.fillText(this.subscript,n+r+2,t+i/2.2-1)),this.restoreStyle(e)}}}]),Ur);function Ur(t){var e,n,i;if(function(t){if(!(t instanceof Ur))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=Dr(Ur).call(this,t))||"object"!==Br(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","TextNote"),e.text=t.text,e.superscript=t.superscript,e.subscript=t.subscript,e.glyph_type=t.glyph,e.glyph=null,e.font={family:"Arial",size:12,weight:""},t.font&&(e.font=t.font),e.glyph_type){var r=Ur.GLYPHS[e.glyph_type];if(!r)throw new C.RERR("Invalid glyph type: "+e.glyph_type);e.glyph=new D(r.code,r.point,{cache:!1}),r.width?e.setWidth(r.width):e.setWidth(e.glyph.getMetrics().width),e.glyph_struct=r}else e.setWidth(G.textWidth(e.text));return e.line=t.line||0,e.smooth=t.smooth||!1,e.ignore_ticks=t.ignore_ticks||!1,e.justification=Ur.Justification.LEFT,e}function Hr(t){return(Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yr(t){return(Yr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Xr(t,e,n){return e&&zr(t.prototype,e),n&&zr(t,n),t}function Kr(t,e){return(Kr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qr=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Kr(t,e)}(Jr,ar),Xr(Jr,null,[{key:"CATEGORY",get:function(){return"stavetext"}}]),Xr(Jr,[{key:"getCategory",value:function(){return Jr.CATEGORY}},{key:"setStaveText",value:function(t){return this.text=t,this}},{key:"setShiftX",value:function(t){return this.shift_x=t,this}},{key:"setShiftY",value:function(t){return this.shift_y=t,this}},{key:"setFont",value:function(t){C.Merge(this.font,t)}},{key:"setText",value:function(t){this.text=t}},{key:"draw",value:function(t){var e=t.checkContext();this.setRendered(),e.save(),e.lineWidth=2,e.setFont(this.font.family,this.font.size,this.font.weight);var n,i,r=e.measureText(""+this.text).width,o=ar.Position,s=Wr.Justification;switch(this.position){case o.LEFT:case o.RIGHT:i=(t.getYForLine(0)+t.getBottomLineY())/2+this.options.shift_y,n=this.position===o.LEFT?t.getX()-r-24+this.options.shift_x:t.getX()+t.getWidth()+24+this.options.shift_x;break;case o.ABOVE:case o.BELOW:n=t.getX()+this.options.shift_x,this.options.justification===s.CENTER?n+=t.getWidth()/2-r/2:this.options.justification===s.RIGHT&&(n+=t.getWidth()-r),i=this.position===o.ABOVE?t.getYForTopText(2)+this.options.shift_y:t.getYForBottomText(2)+this.options.shift_y;break;default:throw new C.RERR("InvalidPosition","Value Must be in Modifier.Position.")}return e.fillText(""+this.text,n,i+4),e.restore(),this}}]),Jr);function Jr(t,e,n){var i,r,o;return function(t){if(!(t instanceof Jr))throw new TypeError("Cannot call a class as a function")}(this),(r=this,i=!(o=Yr(Jr).call(this))||"object"!==Hr(o)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r):o).setAttribute("type","StaveText"),i.setWidth(16),i.text=t,i.position=e,i.options={shift_x:0,shift_y:0,justification:Wr.Justification.CENTER},C.Merge(i.options,n),i.font={family:"times",size:16,weight:"normal"},i}function Qr(t){return(Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zr(t){return(Zr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function to(t,e,n){return e&&$r(t.prototype,e),n&&$r(t,n),t}function eo(t,e){return(eo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var no=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),eo(t,e)}(io,ar),to(io,null,[{key:"CATEGORY",get:function(){return"clefs"}},{key:"types",get:function(){return{treble:{code:"v83",line:3},bass:{code:"v79",line:1},alto:{code:"vad",line:2},tenor:{code:"vad",line:1},percussion:{code:"v59",line:2},soprano:{code:"vad",line:4},"mezzo-soprano":{code:"vad",line:3},"baritone-c":{code:"vad",line:0},"baritone-f":{code:"v79",line:2},subbass:{code:"v79",line:0},french:{code:"v83",line:4},tab:{code:"v2f"}}}},{key:"sizes",get:function(){return{default:40,small:32}}},{key:"annotations",get:function(){return{"8va":{code:"v8",sizes:{default:{point:20,attachments:{treble:{line:-1.2,x_shift:11}}},small:{point:18,attachments:{treble:{line:-.4,x_shift:8}}}}},"8vb":{code:"v8",sizes:{default:{point:20,attachments:{treble:{line:6.3,x_shift:10},bass:{line:4,x_shift:1}}},small:{point:18,attachments:{treble:{line:5.8,x_shift:6},bass:{line:3.5,x_shift:.5}}}}}}}}]),to(io,[{key:"getCategory",value:function(){return io.CATEGORY}},{key:"setType",value:function(t,e,n){if(this.type=t,this.clef=io.types[t],this.size=void 0===e?"default":e,this.clef.point=io.sizes[this.size],this.glyph=new D(this.clef.code,this.clef.point),void 0!==n){var i=io.annotations[n];this.annotation={code:i.code,point:i.sizes[this.size].point,line:i.sizes[this.size].attachments[this.type].line,x_shift:i.sizes[this.size].attachments[this.type].x_shift},this.attachment=new D(this.annotation.code,this.annotation.point),this.attachment.metrics.x_max=0,this.attachment.setXShift(this.annotation.x_shift)}else this.annotation=void 0;return this}},{key:"getWidth",value:function(){if("tab"===this.type&&!this.stave)throw new C.RERR("ClefError","Can't get width without stave.");return this.width}},{key:"setStave",value:function(t){if(this.stave=t,"tab"!==this.type)return this;var e,n,i=this.stave.getOptions().num_lines;switch(i){case 8:e=55,n=14;break;case 7:e=47,n=8;break;case 6:e=40,n=1;break;case 5:e=30,n=-6;break;case 4:e=23,n=-12;break;default:throw new C.RERR("ClefError","Invalid number of lines: ".concat(i))}return this.glyph.setPoint(e),this.glyph.setYShift(n),this}},{key:"draw",value:function(){if(!this.x)throw new C.RERR("ClefError","Can't draw clef without x.");if(!this.stave)throw new C.RERR("ClefError","Can't draw clef without stave.");this.setRendered(),this.glyph.setStave(this.stave),this.glyph.setContext(this.stave.context),void 0!==this.clef.line&&this.placeGlyphOnLine(this.glyph,this.stave,this.clef.line),this.glyph.renderToStave(this.x),void 0!==this.annotation&&(this.placeGlyphOnLine(this.attachment,this.stave,this.annotation.line),this.attachment.setStave(this.stave),this.attachment.setContext(this.stave.context),this.attachment.renderToStave(this.x))}}]),io);function io(t,e,n){var i,r,o;return function(t){if(!(t instanceof io))throw new TypeError("Cannot call a class as a function")}(this),(r=this,i=!(o=Zr(io).call(this))||"object"!==Qr(o)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r):o).setAttribute("type","Clef"),i.setPosition(ar.Position.BEGIN),i.setType(t,e,n),i.setWidth(i.glyph.getMetrics().width),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];no.DEBUG&&C.L("Vex.Flow.Clef",e)}("Creating clef:",t),i}function ro(t){return(ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oo(t){return(oo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function so(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ao(t,e,n){return e&&so(t.prototype,e),n&&so(t,n),t}function uo(t,e){return(uo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lo=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),uo(t,e)}(co,ar),ao(co,null,[{key:"CATEGORY",get:function(){return"keysignatures"}},{key:"accidentalSpacing",get:function(){return{"#":{above:6,below:4},b:{above:4,below:7},n:{above:4,below:1},"##":{above:6,below:4},bb:{above:4,below:7},db:{above:4,below:7},d:{above:4,below:7},bbs:{above:4,below:7},"++":{above:6,below:4},"+":{above:6,below:4},"+-":{above:6,below:4},"++-":{above:6,below:4},bs:{above:4,below:10},bss:{above:4,below:10}}}}]),ao(co,[{key:"getCategory",value:function(){return co.CATEGORY}},{key:"convertToGlyph",value:function(t,e){var n=G.accidentalCodes(t.type),i=new D(n.code,this.glyphFontScale),r=1;if("n"===t.type&&e){var o=co.accidentalSpacing[e.type];o&&(r=e.line>=t.line?o.above:o.below)}this.placeGlyphOnLine(i,this.stave,t.line),this.glyphs.push(i);var s=this.xPositions[this.xPositions.length-1],a=i.getMetrics().width+r;this.xPositions.push(s+a),this.width+=a}},{key:"cancelKey",value:function(t){return this.formatted=!1,this.cancelKeySpec=t,this}},{key:"convertToCancelAccList",value:function(t){var e=G.keySignature(t),n=0<this.accList.length&&0<e.length&&e[0].type!==this.accList[0].type,i=n?e.length:e.length-this.accList.length;if(!(i<1)){for(var r=[],o=0;o<i;o++){var s=o;n||(s=e.length-i+o);var a=e[s];r.push({type:"n",line:a.line})}this.accList=r.concat(this.accList)}}},{key:"addToStave",value:function(t){return this.paddingForced=!0,t.addModifier(this),this}},{key:"convertAccLines",value:function(t,e){var n,i,r=0;switch(t){case"soprano":"#"===e?n=[2.5,.5,2,0,1.5,-.5,1]:r=-1;break;case"mezzo-soprano":"b"===e?n=[0,2,.5,2.5,1,3,1.5]:r=1.5;break;case"alto":r=.5;break;case"tenor":"#"===e?n=[3,1,2.5,.5,2,0,1.5]:r=-.5;break;case"baritone-f":case"baritone-c":"b"===e?n=[.5,2.5,1,3,1.5,3.5,2]:r=2;break;case"bass":case"french":r=1}if(void 0!==n)for(i=0;i<this.accList.length;++i)this.accList[i].line=n[i];else if(0!==r)for(i=0;i<this.accList.length;++i)this.accList[i].line+=r}},{key:"getPadding",value:function(t){return this.formatted||this.format(),0===this.glyphs.length||!this.paddingForced&&t<2?0:this.padding}},{key:"getWidth",value:function(){return this.formatted||this.format(),this.width}},{key:"setKeySig",value:function(t,e,n){return this.formatted=!1,this.keySpec=t,this.cancelKeySpec=e,this.alterKeySpec=n,this}},{key:"alterKey",value:function(t){return this.formatted=!1,this.alterKeySpec=t,this}},{key:"convertToAlterAccList",value:function(t){for(var e=Math.min(t.length,this.accList.length),n=0;n<e;++n)t[n]&&(this.accList[n].type=t[n])}},{key:"format",value:function(){if(!this.stave)throw new C.RERR("KeySignatureError","Can't draw key signature without stave.");this.width=0,this.glyphs=[],this.xPositions=[0],this.accList=G.keySignature(this.keySpec),this.cancelKeySpec&&this.convertToCancelAccList(this.cancelKeySpec);var t=0<this.accList.length?this.accList[0].type:null;if(this.alterKeySpec&&this.convertToAlterAccList(this.alterKeySpec),0<this.accList.length){this.convertAccLines(this.stave.clef,t);for(var e=0;e<this.accList.length;++e)this.convertToGlyph(this.accList[e],this.accList[e+1])}this.formatted=!0}},{key:"draw",value:function(){if(!this.x)throw new C.RERR("KeySignatureError","Can't draw key signature without x.");if(!this.stave)throw new C.RERR("KeySignatureError","Can't draw key signature without stave.");this.formatted||this.format(),this.setRendered();for(var t=0;t<this.glyphs.length;t++){var e=this.glyphs[t],n=this.x+this.xPositions[t];e.setStave(this.stave),e.setContext(this.stave.context),e.renderToStave(n)}}}]),co);function co(t,e,n){var i,r,o;return function(t){if(!(t instanceof co))throw new TypeError("Cannot call a class as a function")}(this),(r=this,i=!(o=oo(co).call(this))||"object"!==ro(o)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r):o).setAttribute("type","KeySignature"),i.setKeySig(t,e,n),i.setPosition(ar.Position.BEGIN),i.glyphFontScale=38,i.glyphs=[],i.xPositions=[],i.paddingForced=!1,i}function ho(t){return(ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fo(t,e){return!e||"object"!==ho(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function po(t){return(po=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function yo(t,e,n){return e&&bo(t.prototype,e),n&&bo(t,n),t}function mo(t,e){return(mo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var go=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),mo(t,e)}(vo,ar),yo(vo,null,[{key:"CATEGORY",get:function(){return"timesignatures"}},{key:"glyphs",get:function(){return{C:{code:"v41",point:40,line:2},"C|":{code:"vb6",point:40,line:2}}}}]),yo(vo,[{key:"getCategory",value:function(){return vo.CATEGORY}},{key:"parseTimeSpec",value:function(t){if("C"===t||"C|"===t){var e=vo.glyphs[t],n=e.line,i=e.code,r=e.point;return{line:n,num:!1,glyph:new D(i,r)}}this.validate_args&&function(e){var t=e.split("/").filter(function(t){return""!==t});if(2!==t.length)throw new C.RERR("BadTimeSignature","Invalid time spec: ".concat(e,'. Must be in the form "<numerator>/<denominator>"'));t.forEach(function(t){if(isNaN(Number(t)))throw new C.RERR("BadTimeSignature","Invalid time spec: ".concat(e,". Must contain two valid numbers."))})}(t);var o,s=function(t){if(Array.isArray(t))return t}(o=t.split("/").map(function(t){return t.split("")}))||function(t){var e=[],n=!0,i=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(e.push(o.value),2!==e.length);n=!0);}catch(t){i=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return e}(o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}(),a=s[0],u=s[1];return{num:!0,glyph:this.makeTimeSignatureGlyph(a,u)}}},{key:"makeTimeSignatureGlyph",value:function(t,e){var n=new D("v0",this.point);n.topGlyphs=[],n.botGlyphs=[];for(var i=0,r=0;r<t.length;++r){var o=t[r],s=new D("v"+o,this.point);n.topGlyphs.push(s),i+=s.getMetrics().width}for(var a=0,u=0;u<e.length;++u){var l=e[u],c=new D("v"+l,this.point);n.botGlyphs.push(c),a+=c.getMetrics().width}var h=a<i?i:a,f=n.getMetrics().x_min;n.getMetrics=function(){return{x_min:f,x_max:f+h,width:h}};var p=(h-i)/2,d=(h-a)/2,b=this;return n.renderToStave=function(t){for(var e=t+p,n=0;n<this.topGlyphs.length;++n){var i=this.topGlyphs[n];D.renderOutline(this.context,i.metrics.outline,i.scale,e+i.x_shift,this.stave.getYForLine(b.topLine)+1),e+=i.getMetrics().width}e=t+d;for(var r=0;r<this.botGlyphs.length;++r){var o=this.botGlyphs[r];b.placeGlyphOnLine(o,this.stave,o.line),D.renderOutline(this.context,o.metrics.outline,o.scale,e+o.x_shift,this.stave.getYForLine(b.bottomLine)+1),e+=o.getMetrics().width}},n}},{key:"getTimeSig",value:function(){return this.timeSig}},{key:"setTimeSig",value:function(t){return this.timeSig=this.parseTimeSpec(t),this}},{key:"draw",value:function(){if(!this.x)throw new C.RERR("TimeSignatureError","Can't draw time signature without x.");if(!this.stave)throw new C.RERR("TimeSignatureError","Can't draw time signature without stave.");this.setRendered(),this.timeSig.glyph.setStave(this.stave),this.timeSig.glyph.setContext(this.stave.context),this.placeGlyphOnLine(this.timeSig.glyph,this.stave,this.timeSig.line),this.timeSig.glyph.renderToStave(this.x)}}]),vo);function vo(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:15,i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(function(t){if(!(t instanceof vo))throw new TypeError("Cannot call a class as a function")}(this),(t=fo(this,po(vo).call(this))).setAttribute("type","TimeSignature"),t.validate_args=i,null===e)return fo(t);var r=n;return t.point=40,t.topLine=2,t.bottomLine=4,t.setPosition(ar.Position.BEGIN),t.setTimeSig(e),t.setWidth(t.timeSig.glyph.getMetrics().width),t.setPadding(r),t}function _o(t){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function So(t){return(So=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function wo(t,e,n){return e&&xo(t.prototype,e),n&&xo(t,n),t}function Eo(t,e){return(Eo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Po=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Eo(t,e)}(To,ar),wo(To,null,[{key:"CATEGORY",get:function(){return"voltas"}},{key:"type",get:function(){return{NONE:1,BEGIN:2,MID:3,END:4,BEGIN_END:5}}}]),wo(To,[{key:"getCategory",value:function(){return To.CATEGORY}},{key:"setShiftY",value:function(t){return this.y_shift=t,this}},{key:"draw",value:function(t,e){var n=t.checkContext();this.setRendered();var i=t.width,r=t.getYForTopText(t.options.num_lines)+this.y_shift,o=1.5*t.options.spacing_between_lines_px;switch(this.volta){case To.type.BEGIN:n.fillRect(this.x+e,r,1,o);break;case To.type.END:i-=5,n.fillRect(this.x+e+i,r,1,o);break;case To.type.BEGIN_END:i-=3,n.fillRect(this.x+e,r,1,o),n.fillRect(this.x+e+i,r,1,o)}return this.volta!==To.type.BEGIN&&this.volta!==To.type.BEGIN_END||(n.save(),n.setFont(this.font.family,this.font.size,this.font.weight),n.fillText(this.number,this.x+e+5,r+15),n.restore()),n.fillRect(this.x+e,r,i,1),this}}]),To);function To(t,e,n,i){var r,o,s;return function(t){if(!(t instanceof To))throw new TypeError("Cannot call a class as a function")}(this),(o=this,r=!(s=So(To).call(this))||"object"!==_o(s)&&"function"!=typeof s?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(o):s).setAttribute("type","Volta"),r.volta=t,r.x=n,r.y_shift=i,r.number=e,r.font={family:"sans-serif",size:9,weight:"bold"},r}function ko(t){return(ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oo(){return(Oo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function Mo(t){return(Mo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ro(t,e){return(Ro=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Lo=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ro(t,e)}(Ao,x),function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(Ao.prototype,[{key:"space",value:function(t){return this.options.spacing_between_lines_px*t}},{key:"resetLines",value:function(){this.options.line_config=[];for(var t=0;t<this.options.num_lines;t++)this.options.line_config.push({visible:!0});this.height=(this.options.num_lines+this.options.space_above_staff_ln)*this.options.spacing_between_lines_px,this.options.bottom_text_position=this.options.num_lines}},{key:"getOptions",value:function(){return this.options}},{key:"setNoteStartX",value:function(t){return this.formatted||this.format(),this.start_x=t,this}},{key:"getNoteStartX",value:function(){return this.formatted||this.format(),this.start_x}},{key:"getNoteEndX",value:function(){return this.formatted||this.format(),this.end_x}},{key:"getTieStartX",value:function(){return this.start_x}},{key:"getTieEndX",value:function(){return this.x+this.width}},{key:"getX",value:function(){return this.x}},{key:"getNumLines",value:function(){return this.options.num_lines}},{key:"setNumLines",value:function(t){return this.options.num_lines=parseInt(t,10),this.resetLines(),this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"getTopLineTopY",value:function(){return this.getYForLine(0)-G.STAVE_LINE_THICKNESS/2}},{key:"getBottomLineBottomY",value:function(){return this.getYForLine(this.getNumLines()-1)+G.STAVE_LINE_THICKNESS/2}},{key:"setX",value:function(t){var e=t-this.x;this.formatted=!1,this.x=t,this.start_x+=e,this.end_x+=e;for(var n=0;n<this.modifiers.length;n++){var i=this.modifiers[n];void 0!==i.x&&(i.x+=e)}return this}},{key:"setWidth",value:function(t){return this.formatted=!1,this.width=t,this.end_x=this.x+t,this}},{key:"getWidth",value:function(){return this.width}},{key:"getStyle",value:function(){return Oo({fillStyle:this.options.fill_style,strokeStyle:this.options.fill_style,lineWidth:G.STAVE_LINE_THICKNESS},this.style||{})}},{key:"setMeasure",value:function(t){return this.measure=t,this}},{key:"getModifierXShift",value:function(){if("number"!=typeof(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0))throw new C.RERR("InvalidIndex","Must be of number type");if(this.formatted||this.format(),1===this.getModifiers(ar.Position.BEGIN).length)return 0;var t=this.start_x-this.x,e=this.modifiers[0];return e.getType()===dr.type.REPEAT_BEGIN&&t>e.getWidth()&&(t-=e.getWidth()),t}},{key:"setRepetitionTypeLeft",value:function(t,e){return this.modifiers.push(new Sr(t,this.x,e)),this}},{key:"setRepetitionTypeRight",value:function(t,e){return this.modifiers.push(new Sr(t,this.x,e)),this}},{key:"setVoltaType",value:function(t,e,n){return this.modifiers.push(new Po(t,e,this.x,n)),this}},{key:"setSection",value:function(t,e){return this.modifiers.push(new Or(t,this.x,e)),this}},{key:"setTempo",value:function(t,e){return this.modifiers.push(new Nr(t,this.x,e)),this}},{key:"setText",value:function(t,e,n){return this.modifiers.push(new qr(t,e,n)),this}},{key:"getHeight",value:function(){return this.height}},{key:"getSpacingBetweenLines",value:function(){return this.options.spacing_between_lines_px}},{key:"getBoundingBox",value:function(){return new O(this.x,this.y,this.width,this.getBottomY()-this.y)}},{key:"getBottomY",value:function(){var t=this.options,e=t.spacing_between_lines_px;return this.getYForLine(t.num_lines)+t.space_below_staff_ln*e}},{key:"getBottomLineY",value:function(){return this.getYForLine(this.options.num_lines)}},{key:"getYForLine",value:function(t){var e=this.options,n=e.spacing_between_lines_px,i=e.space_above_staff_ln;return this.y+t*n+i*n}},{key:"getLineForY",value:function(t){var e=this.options,n=e.spacing_between_lines_px,i=e.space_above_staff_ln;return(t-this.y)/n-i}},{key:"getYForTopText",value:function(t){var e=t||0;return this.getYForLine(-e-this.options.top_text_position)}},{key:"getYForBottomText",value:function(t){var e=t||0;return this.getYForLine(this.options.bottom_text_position+e)}},{key:"getYForNote",value:function(t){var e=this.options,n=e.spacing_between_lines_px,i=e.space_above_staff_ln;return this.y+i*n+5*n-t*n}},{key:"getYForGlyphs",value:function(){return this.getYForLine(3)}},{key:"addModifier",value:function(t,e){return void 0!==e&&t.setPosition(e),t.setStave(this),this.formatted=!1,this.modifiers.push(t),this}},{key:"addEndModifier",value:function(t){return this.addModifier(t,ar.Position.END),this}},{key:"setBegBarType",value:function(t){var e=dr.type,n=e.SINGLE,i=e.REPEAT_BEGIN,r=e.NONE;return t!==n&&t!==i&&t!==r||(this.modifiers[0].setType(t),this.formatted=!1),this}},{key:"setEndBarType",value:function(t){return t!==dr.type.REPEAT_BEGIN&&(this.modifiers[1].setType(t),this.formatted=!1),this}},{key:"setClef",value:function(t,e,n,i){void 0===i&&(i=ar.Position.BEGIN),this.clef=t;var r=this.getModifiers(i,no.CATEGORY);return 0===r.length?this.addClef(t,e,n,i):r[0].setType(t,e,n),this}},{key:"setEndClef",value:function(t,e,n){return this.setClef(t,e,n,ar.Position.END),this}},{key:"setKeySignature",value:function(t,e,n){void 0===n&&(n=ar.Position.BEGIN);var i=this.getModifiers(n,lo.CATEGORY);return 0===i.length?this.addKeySignature(t,e,n):i[0].setKeySig(t,e),this}},{key:"setEndKeySignature",value:function(t,e){return this.setKeySignature(t,e,ar.Position.END),this}},{key:"setTimeSignature",value:function(t,e,n){void 0===n&&(n=ar.Position.BEGIN);var i=this.getModifiers(n,go.CATEGORY);return 0===i.length?this.addTimeSignature(t,e,n):i[0].setTimeSig(t),this}},{key:"setEndTimeSignature",value:function(t,e){return this.setTimeSignature(t,e,ar.Position.END),this}},{key:"addKeySignature",value:function(t,e,n){return this.addModifier(new lo(t,e),n),this}},{key:"addClef",value:function(t,e,n,i){return void 0!==i&&i!==ar.Position.BEGIN||(this.clef=t),this.addModifier(new no(t,e,n),i),this}},{key:"addEndClef",value:function(t,e,n){return this.addClef(t,e,n,ar.Position.END),this}},{key:"addTimeSignature",value:function(t,e,n){return this.addModifier(new go(t,e),n),this}},{key:"addEndTimeSignature",value:function(t,e){return this.addTimeSignature(t,e,ar.Position.END),this}},{key:"addTrebleGlyph",value:function(){return this.addClef("treble"),this}},{key:"getModifiers",value:function(e,n){return void 0===e?this.modifiers:this.modifiers.filter(function(t){return e===t.getPosition()&&(void 0===n||n===t.getCategory())})}},{key:"sortByCategory",value:function(t,e){for(var n=t.length-1;0<=n;n--)for(var i=0;i<n;i++)if(e[t[i].getCategory()]>e[t[i+1].getCategory()]){var r=t[i];t[i]=t[i+1],t[i+1]=r}}},{key:"format",value:function(){var t,e,n,i=this.modifiers[0],r=this.modifiers[1],o=this.getModifiers(ar.Position.BEGIN),s=this.getModifiers(ar.Position.END);this.sortByCategory(o,{barlines:0,clefs:1,keysignatures:2,timesignatures:3}),this.sortByCategory(s,{timesignatures:0,keysignatures:1,barlines:2,clefs:3}),1<o.length&&i.getType()===dr.type.REPEAT_BEGIN&&(o.push(o.splice(0,1)[0]),o.splice(0,0,new dr(dr.type.SINGLE))),0<s.indexOf(r)&&s.splice(0,0,new dr(dr.type.NONE));for(var a=0,u=this.x,l=0;l<o.length;l++)e=(n=o[l]).getPadding(l+a),t=n.getWidth(),u+=e,n.setX(u),u+=t,e+t===0&&a--;this.start_x=u,u=this.x+this.width;for(var c={left:0,right:0,paddingRight:0,paddingLeft:0},h=0,f=0;f<s.length;f++){h="barlines"===(n=s[f]).getCategory()?f:h,c.right=0,c.left=0,c.paddingRight=0,c.paddingLeft=0;var p=n.getLayoutMetrics();p?(0!==f&&(c.right=p.xMax||0,c.paddingRight=p.paddingRight||0),c.left=-p.xMin||0,c.paddingLeft=p.paddingLeft||0,f===s.length-1&&(c.paddingLeft=0)):(c.paddingRight=n.getPadding(f-h),0!==f&&(c.right=n.getWidth()),0===f&&(c.left=n.getWidth())),u-=c.paddingRight,u-=c.right,n.setX(u),u-=c.left,u-=c.paddingLeft}this.end_x=1===s.length?this.x+this.width:u,this.formatted=!0}},{key:"draw",value:function(){this.checkContext(),this.setRendered(),this.formatted||this.format();for(var t,e=this.options.num_lines,n=this.width,i=this.x,r=0;r<e;r++)t=this.getYForLine(r),this.applyStyle(),this.options.line_config[r].visible&&(this.context.beginPath(),this.context.moveTo(i,t),this.context.lineTo(i+n,t),this.context.stroke()),this.restoreStyle();for(var o=0;o<this.modifiers.length;o++)"function"==typeof this.modifiers[o].draw&&this.modifiers[o].draw(this,this.getModifierXShift(o));if(0<this.measure){this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.weight);var s=this.context.measureText(""+this.measure).width;t=this.getYForTopText(0)+3,this.context.fillText(""+this.measure,this.x-s/2,t),this.context.restore()}return this}},{key:"drawVertical",value:function(t,e){this.drawVerticalFixed(this.x+t,e)}},{key:"drawVerticalFixed",value:function(t,e){this.checkContext();var n=this.getYForLine(0),i=this.getYForLine(this.options.num_lines-1);e&&this.context.fillRect(t-3,n,1,i-n+1),this.context.fillRect(t,n,1,i-n+1)}},{key:"drawVerticalBar",value:function(t){this.drawVerticalBarFixed(this.x+t,!1)}},{key:"drawVerticalBarFixed",value:function(t){this.checkContext();var e=this.getYForLine(0),n=this.getYForLine(this.options.num_lines-1);this.context.fillRect(t,e,1,n-e+1)}},{key:"getConfigForLines",value:function(){return this.options.line_config}},{key:"setConfigForLine",value:function(t,e){if(t>=this.options.num_lines||t<0)throw new C.RERR("StaveConfigError","The line number must be within the range of the number of lines in the Stave.");if(void 0===e.visible)throw new C.RERR("StaveConfigError","The line configuration object is missing the 'visible' property.");if("boolean"!=typeof e.visible)throw new C.RERR("StaveConfigError","The line configuration objects 'visible' property must be true or false.");return this.options.line_config[t]=e,this}},{key:"setConfigForLines",value:function(t){if(t.length!==this.options.num_lines)throw new C.RERR("StaveConfigError","The length of the lines configuration array must match the number of lines in the Stave");for(var e in t)t[e]||(t[e]=this.options.line_config[e]),C.Merge(this.options.line_config[e],t[e]);return this.options.line_config=t,this}}]),Ao);function Ao(t,e,n,i){var r,o,s;!function(t){if(!(t instanceof Ao))throw new TypeError("Cannot call a class as a function")}(this),(o=this,r=!(s=Mo(Ao).call(this))||"object"!==ko(s)&&"function"!=typeof s?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(o):s).setAttribute("type","Stave"),r.x=t,r.y=e,r.width=n,r.formatted=!1,r.start_x=t+5,r.end_x=t+n,r.modifiers=[],r.measure=0,r.clef="treble",r.font={family:"sans-serif",size:8,weight:""},r.options={vertical_bar_width:10,glyph_spacing_px:10,num_lines:5,fill_style:"#999999",left_bar:!0,right_bar:!0,spacing_between_lines_px:10,space_above_staff_ln:4,space_below_staff_ln:4,top_text_position:1},r.bounds={x:r.x,y:r.y,w:r.width,h:0},C.Merge(r.options,i),r.resetLines();var a=dr.type;return r.addModifier(new dr(r.options.left_bar?a.SINGLE:a.NONE)),r.addEndModifier(new dr(r.options.right_bar?a.SINGLE:a.NONE)),r}function Co(t){return(Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Io(t){return(Io=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function No(t,e){return(No=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fo=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&No(t,e)}(Bo,Lo),function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(Bo.prototype,[{key:"getYForGlyphs",value:function(){return this.getYForLine(2.5)}},{key:"addTabGlyph",value:function(){return this.addClef("tab"),this}}]),Bo);function Bo(t,e,n,i){var r;!function(t){if(!(t instanceof Bo))throw new TypeError("Cannot call a class as a function")}(this);var o,s,a={spacing_between_lines_px:13,num_lines:6,top_text_position:1};return C.Merge(a,i),(o=this,r=!(s=Io(Bo).call(this,t,e,n,a))||"object"!==Co(s)&&"function"!=typeof s?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(o):s).setAttribute("type","TabStave"),r}function Do(t){return(Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jo(t,e,n){return(jo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vo(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Vo(t){return(Vo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Go(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Wo(t,e,n){return e&&Go(t.prototype,e),n&&Go(t,n),t}function Uo(t,e){return(Uo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ho=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Uo(t,e)}(Yo,he),Wo(Yo,null,[{key:"CATEGORY",get:function(){return"tabnotes"}}]),Wo(Yo,[{key:"reset",value:function(){this.stave&&this.setStave(this.stave)}},{key:"getCategory",value:function(){return Yo.CATEGORY}},{key:"setGhost",value:function(t){return this.ghost=t,this.updateWidth(),this}},{key:"hasStem",value:function(){return this.render_options.draw_stem}},{key:"getStemExtension",value:function(){var t=this.getGlyph();return null!=this.stem_extension_override?this.stem_extension_override:t?1===this.getStemDirection()?t.tabnote_stem_up_extension:t.tabnote_stem_down_extension:0}},{key:"addDot",value:function(){var t=new Pe;return this.dots+=1,this.addModifier(t,0)}},{key:"updateWidth",value:function(){var t=this;this.glyphs=[];for(var e=this.width=0;e<this.positions.length;++e){var n=this.positions[e].fret;this.ghost&&(n="("+n+")");var i=G.tabToGlyph(n,this.render_options.scale);this.glyphs.push(i),this.width=Math.max(i.getWidth(),this.width)}this.glyph.getWidth=function(){return t.width}}},{key:"setStave",value:function(n){var i,r=this;if(jo(Vo(Yo.prototype),"setStave",this).call(this,n),this.context=n.context,this.context){var o=this.context;this.width=0;var t=function(){var t=r.glyphs[i],e=""+t.text;"X"!==e.toUpperCase()&&(o.save(),o.setRawFont(r.render_options.font),t.width=o.measureText(e).width,o.restore(),t.getWidth=function(){return t.width}),r.width=Math.max(t.getWidth(),r.width)};for(i=0;i<this.glyphs.length;++i)t();this.glyph.getWidth=function(){return r.width}}var e=this.positions.map(function(t){var e=t.str;return n.getYForLine(e-1)});return this.setYs(e),this.stem&&this.stem.setYBounds(this.getStemY(),this.getStemY()),this}},{key:"getPositions",value:function(){return this.positions}},{key:"addToModifierContext",value:function(t){this.setModifierContext(t);for(var e=0;e<this.modifiers.length;++e)this.modifierContext.addModifier(this.modifiers[e]);return this.modifierContext.addModifier(this),this.preFormatted=!1,this}},{key:"getTieRightX",value:function(){var t=this.getAbsoluteX();return(t+=this.glyph.getWidth()/2)+(-this.width/2+this.width+2)}},{key:"getTieLeftX",value:function(){var t=this.getAbsoluteX();return(t+=this.glyph.getWidth()/2)-(this.width/2+2)}},{key:"getModifierStartXY",value:function(t,e){if(!this.preFormatted)throw new C.RERR("UnformattedNote","Can't call GetModifierStartXY on an unformatted note");if(0===this.ys.length)throw new C.RERR("NoYValues","No Y-Values calculated for this note.");var n=0;return t===ge.Position.LEFT?n=-2:t===ge.Position.RIGHT?n=this.width+2:t!==ge.Position.BELOW&&t!==ge.Position.ABOVE||(n=this.glyph.getWidth()/2),{x:this.getAbsoluteX()+n,y:this.ys[e]}}},{key:"getLineForRest",value:function(){return this.positions[0].str}},{key:"preFormat",value:function(){this.preFormatted||(this.modifierContext&&this.modifierContext.preFormat(),this.setPreFormatted(!0))}},{key:"getStemX",value:function(){return this.getCenterGlyphX()}},{key:"getStemY",value:function(){var t=this.stave.getNumLines()-.5,e=ut.UP===this.stem_direction?-.5:t;return this.stave.getYForLine(e)}},{key:"getStemExtents",value:function(){return this.stem.getExtents()}},{key:"drawFlag",value:function(){var t=this.beam,e=this.glyph,n=this.context,i=this.stem,r=this.stem_direction,o=this.render_options,s=o.draw_stem,a=o.glyph_font_scale,u=null==t&&s;if(e.flag&&u){var l=this.getStemX()+1,c=this.getStemY()-i.getHeight(),h=r===ut.DOWN?e.code_flag_downstem:e.code_flag_upstem;D.renderGlyph(n,l,c,a,h)}}},{key:"drawModifiers",value:function(){var e=this;this.modifiers.forEach(function(t){"dots"===t.getCategory()&&!e.render_options.draw_dots||(t.setContext(e.context),t.draw())})}},{key:"drawStemThrough",value:function(){var a,t,u,l,i,r,c,h,o,e=this.getStemX(),n=this.getStemY(),s=this.context,f=this.render_options.draw_stem_through_stave;if(this.render_options.draw_stem&&f){var p=(a=n,t=function(t,e){for(var n=[],i=[],r=1;r<=t;r++)-1<e.indexOf(r)?(n.push(i),i=[]):i.push(r);return 0<i.length&&n.push(i),n}(this.stave.getNumLines(),this.positions.map(function(t){return t.str})),u=this.getStave(),l=this.getStemDirection(),i=1!==l,r=-1!==l,c=u.getSpacingBetweenLines(),h=u.getNumLines(),o=[],t.forEach(function(t){var e=-1<t.indexOf(h),n=-1<t.indexOf(1);if(!(i&&n||r&&e)){1===t.length&&t.push(t[0]);var s=[];t.forEach(function(t,e,n){var i=1===t,r=t===h,o=u.getYForLine(t-1);0!==e||i?e!==n.length-1||r||(o+=c/2-1):o-=c/2-1,s.push(o),1===l&&i?s.push(a-2):-1===l&&r&&s.push(a+2)}),o.push(s.sort(function(t,e){return t-e}))}}),o);s.save(),s.setLineWidth(ut.WIDTH),p.forEach(function(t){0!==t.length&&(s.beginPath(),s.moveTo(e,t[0]),s.lineTo(e,t[t.length-1]),s.stroke(),s.closePath())}),s.restore()}}},{key:"drawPositions",value:function(){for(var t=this.context,e=this.getAbsoluteX(),n=this.ys,i=0;i<this.positions.length;++i){var r=n[i]+this.render_options.y_shift,o=this.glyphs[i],s=e+this.glyph.getWidth()/2-o.getWidth()/2;if(t.clearRect(s-2,r-3,o.getWidth()+4,6),o.code)D.renderGlyph(t,s,r,this.render_options.glyph_font_scale*this.render_options.scale,o.code);else{t.save(),t.setRawFont(this.render_options.font);var a=o.text.toString();t.fillText(a,s,r+5*this.render_options.scale),t.restore()}}}},{key:"draw",value:function(){if(this.checkContext(),!this.stave)throw new C.RERR("NoStave","Can't draw without a stave.");if(0===this.ys.length)throw new C.RERR("NoYValues","Can't draw note without Y values.");this.setRendered();var t=null==this.beam&&this.render_options.draw_stem;this.drawPositions(),this.drawStemThrough();var e=this.getStemX();this.stem.setNoteHeadXBounds(e,e),t&&(this.context.openGroup("stem",null,{pointerBBox:!0}),this.stem.setContext(this.context).draw(),this.context.closeGroup()),this.drawFlag(),this.drawModifiers()}}]),Yo);function Yo(t,e){var n,i,r;if(function(t){if(!(t instanceof Yo))throw new TypeError("Cannot call a class as a function")}(this),(i=this,n=!(r=Vo(Yo).call(this,t))||"object"!==Do(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i):r).setAttribute("type","TabNote"),n.ghost=!1,n.positions=t.positions,C.Merge(n.render_options,{glyph_font_scale:G.DEFAULT_TABLATURE_FONT_SCALE,draw_stem:e,draw_dots:e,draw_stem_through_stave:!1,y_shift:0,scale:1,font:"10pt Arial"}),n.glyph=G.durationToGlyph(n.duration,n.noteType),!n.glyph)throw new C.RuntimeError("BadArguments","Invalid note initialization data (No glyph found): ".concat(JSON.stringify(t)));return n.buildStem(),t.stem_direction?n.setStemDirection(t.stem_direction):n.setStemDirection(ut.UP),n.ghost=!1,n.updateWidth(),n}function zo(t){return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xo(t){return(Xo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ko(t,e){return(Ko=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qo,Jo=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ko(t,e)}(Qo,x),function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(Qo.prototype,[{key:"setLine",value:function(t){return this.line=t,this}},{key:"setHarsh",value:function(t){return this.render_options.harsh=t,this}},{key:"draw",value:function(){var t=this.context;this.setRendered();var e=this.start?this.start.getStave().getYForTopText(this.line):this.stop.getStave().getYForTopText(this.line),n=this.start?this.start.getAbsoluteX():this.stop.getStave().getTieStartX(),i=this.stop?this.stop.getAbsoluteX()-this.stop.getWidth()-5:this.start.getStave().getTieEndX()-10;this.render_options.vibrato_width=i-n,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Jo.DEBUG&&C.L("Vex.Flow.VibratoBracket",e)}("Rendering VibratoBracket: start_x:",n,"stop_x:",i,"y:",e),Hi.renderVibrato(t,n,e,this.render_options)}}]),Qo);function Qo(t){var e,n,i;return function(t){if(!(t instanceof Qo))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=Xo(Qo).call(this))||"object"!==zo(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","VibratoBracket"),e.start=t.start,e.stop=t.stop,e.line=1,e.render_options={harsh:!1,wave_height:6,wave_width:4,wave_girth:2},e}function Zo(t){return(Zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $o(t){return($o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ts(t,e){return(ts=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var es=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ts(t,e)}(ns,x),function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(ns.prototype,[{key:"getXs",value:function(){return this.xs}},{key:"setStave",value:function(t){return this.stave=t,this}},{key:"getStave",value:function(){return this.stave}},{key:"drawLine",value:function(t,e,n,i){var r=this.stave.getYForLine(this.render_options.line),o=.1*(n-e);e+=o,n-=o;var s=this.render_options.serif_thickness,a=.25*i;isNaN(this.render_options.line_thickness)||(a=.5*this.render_options.line_thickness),t.save(),t.beginPath(),t.moveTo(e,r-i),t.lineTo(e+s,r-i),t.lineTo(e+s,r-a),t.lineTo(n-s,r-a),t.lineTo(n-s,r-i),t.lineTo(n,r-i),t.lineTo(n,r+i),t.lineTo(n-s,r+i),t.lineTo(n-s,r+a),t.lineTo(e+s,r+a),t.lineTo(e+s,r+i),t.lineTo(e,r+i),t.closePath(),t.fill()}},{key:"drawSymbols",value:function(t,e,n,i){var r=Math.floor(this.number_of_measures/4),o=this.number_of_measures%4,s=Math.floor(o/2),a=o%2,u=function(){if(!qo){var t=new se({duration:"w",note_type:"r"});qo={glyph_font_scale:t.render_options.glyph_font_scale,glyph_code:t.glyph_code,width:t.getWidth()}}return qo}(),l=u.width*(this.render_options.semibrave_rest_glyph_scale/u.glyph_font_scale),c={2:{width:.5*l,height:i},1:{width:l}},h=1.35*l;isNaN(this.render_options.symbol_spacing)||(h=this.render_options.symbol_spacing);var f=e+.5*(n-e)-.5*(r*c[2].width+s*c[2].width+a*c[1].width+(r+s+a-1)*h),p=this.stave.getYForLine(this.render_options.line-1),d=this.stave.getYForLine(this.render_options.line),b=this.stave.getYForLine(this.render_options.line+1);t.save(),t.setStrokeStyle("none"),t.setLineWidth(0);for(var y=0;y<r;++y)t.fillRect(f,d-c[2].height,c[2].width,c[2].height),t.fillRect(f,b-c[2].height,c[2].width,c[2].height),f+=c[2].width+h;for(var m=0;m<s;++m)t.fillRect(f,d-c[2].height,c[2].width,c[2].height),f+=c[2].width+h;for(var g=0;g<a;++g)D.renderGlyph(t,f,p,this.render_options.semibrave_rest_glyph_scale,u.glyph_code),f+=c[1].width+h;t.restore()}},{key:"draw",value:function(){this.checkContext(),this.setRendered();var t=this.context,e=this.stave,n=this.render_options.spacing_between_lines_px,i=e.getNoteStartX(),r=e.getNoteEndX(),o=e.getModifiers(ar.Position.BEGIN);if(1===o.length&&"barlines"===o[0].getCategory()&&(i-=o[0].getWidth()),isNaN(this.render_options.padding_left)||(i=e.getX()+this.render_options.padding_left),isNaN(this.render_options.padding_right)||(r=e.getX()+e.getWidth()-this.render_options.padding_right),this.xs.left=i,this.xs.right=r,this.render_options.use_symbols?this.drawSymbols(t,i,r,n):this.drawLine(t,i,r,n),this.render_options.show_number){var s="/"+this.number_of_measures,a=new go(null,void 0,!1);a.point=this.render_options.number_glyph_point,a.setTimeSig(s),a.setStave(e),a.x=i+.5*(r-i)-.5*a.timeSig.glyph.getMetrics().width,a.bottomLine=this.render_options.number_line,a.setContext(t).draw()}}}]),ns);function ns(t,e){var n,i,r;return function(t){if(!(t instanceof ns))throw new TypeError("Cannot call a class as a function")}(this),(i=this,n=!(r=$o(ns).call(this))||"object"!==Zo(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i):r).setAttribute("type","MultiMeasureRest"),n.render_options={show_number:!0,number_line:-.5,number_glyph_point:40,padding_left:void 0,padding_right:void 0,line:2,spacing_between_lines_px:10,line_thickness:void 0,serif_thickness:2,use_symbols:!1,symbol_spacing:void 0,semibrave_rest_glyph_scale:G.DEFAULT_NOTATION_FONT_SCALE},C.Merge(n.render_options,e),n.number_of_measures=t,n.xs={left:NaN,right:NaN},n}function is(t){return(is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rs(t,e,n){return(rs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=os(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function os(t){return(os=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ss(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function as(t,e,n){return e&&ss(t.prototype,e),n&&ss(t,n),t}function us(t,e){return(us=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ls=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&us(t,e)}(cs,Zt),as(cs,null,[{key:"CATEGORY",get:function(){return"clefnote"}}]),as(cs,[{key:"setType",value:function(t,e,n){return this.type=t,this.clef_obj=new no(t,e,n),this.clef=this.clef_obj.clef,this.glyph=new D(this.clef.code,this.clef.point),this.setWidth(this.glyph.getMetrics().width),this}},{key:"getClef",value:function(){return this.clef}},{key:"setContext",value:function(t){return this.context=t,this.glyph.setContext(this.context),this}},{key:"getBoundingBox",value:function(){return rs(os(cs.prototype),"getBoundingBox",this).call(this)}},{key:"addToModifierContext",value:function(){return this}},{key:"getCategory",value:function(){return cs.CATEGORY}},{key:"preFormat",value:function(){return this.setPreFormatted(!0),this}},{key:"draw",value:function(){if(!this.stave)throw new C.RERR("NoStave","Can't draw without a stave.");this.glyph.getContext()||this.glyph.setContext(this.context),this.setRendered();var t=this.getAbsoluteX();if(this.glyph.setStave(this.stave),this.glyph.setYShift(this.stave.getYForLine(this.clef.line)-this.stave.getYForGlyphs()),this.glyph.renderToStave(t),void 0!==this.clef_obj.annotation){var e=new D(this.clef_obj.annotation.code,this.clef_obj.annotation.point);e.getContext()||e.setContext(this.context),e.setStave(this.stave),e.setYShift(this.stave.getYForLine(this.clef_obj.annotation.line)-this.stave.getYForGlyphs()),e.setXShift(this.clef_obj.annotation.x_shift),e.renderToStave(t)}}}]),cs);function cs(t,e,n){var i,r,o;return function(t){if(!(t instanceof cs))throw new TypeError("Cannot call a class as a function")}(this),(r=this,i=!(o=os(cs).call(this,{duration:"b"}))||"object"!==is(o)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r):o).setAttribute("type","ClefNote"),i.setType(t,e,n),i.ignore_ticks=!0,i}function hs(t){return(hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fs(t,e,n){return(fs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ps(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ps(t){return(ps=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ds(t,e){return(ds=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bs=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ds(t,e)}(ys,Zt),function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(ys.prototype,[{key:"getBoundingBox",value:function(){return fs(ps(ys.prototype),"getBoundingBox",this).call(this)}},{key:"addToModifierContext",value:function(){return this}},{key:"preFormat",value:function(){return this.setPreFormatted(!0),this.keySignature.setStave(this.stave),this.keySignature.format(),this.setWidth(this.keySignature.width),this}},{key:"draw",value:function(){this.stave.checkContext(),this.setRendered(),this.keySignature.x=this.getAbsoluteX(),this.keySignature.setContext(this.context),this.keySignature.draw()}}]),ys);function ys(t,e,n){var i,r,o;return function(t){if(!(t instanceof ys))throw new TypeError("Cannot call a class as a function")}(this),(r=this,i=!(o=ps(ys).call(this,{duration:"b"}))||"object"!==hs(o)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r):o).setAttribute("type","KeySigNote"),i.keySignature=new lo(t,e,n),i.ignore_ticks=!0,i}function ms(t){return(ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gs(t,e,n){return(gs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vs(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function vs(t){return(vs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _s(t,e){return(_s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ss=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_s(t,e)}(xs,Zt),function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(xs.prototype,[{key:"getBoundingBox",value:function(){return gs(vs(xs.prototype),"getBoundingBox",this).call(this)}},{key:"addToModifierContext",value:function(){return this}},{key:"preFormat",value:function(){return this.setPreFormatted(!0),this}},{key:"draw",value:function(){this.stave.checkContext(),this.setRendered(),this.timeSig.glyph.getContext()||this.timeSig.glyph.setContext(this.context),this.timeSig.glyph.setStave(this.stave),this.timeSig.glyph.setYShift(this.stave.getYForLine(this.timeSig.line)-this.stave.getYForGlyphs()),this.timeSig.glyph.renderToStave(this.getAbsoluteX())}}]),xs);function xs(t,e){var n,i,r;!function(t){if(!(t instanceof xs))throw new TypeError("Cannot call a class as a function")}(this),(i=this,n=!(r=vs(xs).call(this,{duration:"b"}))||"object"!==ms(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i):r).setAttribute("type","TimeSigNote");var o=new go(t,e);return n.timeSig=o.getTimeSig(),n.setWidth(n.timeSig.glyph.getMetrics().width),n.ignore_ticks=!0,n}function ws(t){return(ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Es(t){return(Es=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ps(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ts(t,e,n){return e&&Ps(t.prototype,e),n&&Ps(t,n),t}function ks(t,e){return(ks=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Os=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),ks(t,e)}(Ms,En),Ts(Ms,null,[{key:"createSlideUp",value:function(t){return new Ms(t,Ms.SLIDE_UP)}},{key:"createSlideDown",value:function(t){return new Ms(t,Ms.SLIDE_DOWN)}},{key:"SLIDE_UP",get:function(){return 1}},{key:"SLIDE_DOWN",get:function(){return-1}}]),Ts(Ms,[{key:"renderTie",value:function(t){if(0===t.first_ys.length||0===t.last_ys.length)throw new C.RERR("BadArguments","No Y-values to render");var e=this.context,n=t.first_x_px,i=t.first_ys,r=t.last_x_px,o=this.slide_direction;if(o!==Ms.SLIDE_UP&&o!==Ms.SLIDE_DOWN)throw new C.RERR("BadSlide","Invalid slide direction");for(var s=0;s<this.first_indices.length;++s){var a=i[this.first_indices[s]]+this.render_options.y_shift;if(isNaN(a))throw new C.RERR("BadArguments","Bad indices for slide rendering.");e.beginPath(),e.moveTo(n,a+3*o),e.lineTo(r,a-3*o),e.closePath(),e.stroke()}this.setRendered()}}]),Ms);function Ms(t,e){var n,i,r;if(function(t){if(!(t instanceof Ms))throw new TypeError("Cannot call a class as a function")}(this),(i=this,n=!(r=Es(Ms).call(this,t,"sl."))||"object"!==ws(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i):r).setAttribute("type","TabSlide"),!e){var o=t.first_note.getPositions()[0].fret,s=t.last_note.getPositions()[0].fret;e=parseInt(o,10)>parseInt(s,10)?Ms.SLIDE_DOWN:Ms.SLIDE_UP}return n.slide_direction=e,n.render_options.cp1=11,n.render_options.cp2=14,n.render_options.y_shift=.5,n.setFont({font:"Times",size:10,style:"bold italic"}),n.setNotes(t),n}function Rs(t){return(Rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ls(){return(Ls=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function As(t,e,n){return(As="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cs(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Cs(t){return(Cs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Is(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ns(t,e,n){return e&&Is(t.prototype,e),n&&Is(t,n),t}function Fs(t,e){return(Fs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bs=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fs(t,e)}(Ds,Ne),Ns(Ds,null,[{key:"CATEGORY",get:function(){return"gracenotes"}},{key:"LEDGER_LINE_OFFSET",get:function(){return 2}},{key:"SCALE",get:function(){return.66}}]),Ns(Ds,[{key:"getStemExtension",value:function(){if(null!=this.stem_extension_override)return this.stem_extension_override;var t=this.getGlyph();if(t){var e=As(Cs(Ds.prototype),"getStemExtension",this).call(this);if(t.stem){var n=this.getStaveNoteScale();e=(ut.HEIGHT+e)*n-ut.HEIGHT}return e}return 0}},{key:"getCategory",value:function(){return Ds.CATEGORY}},{key:"getStaveNoteScale",value:function(){return this.render_options.glyph_font_scale/G.DEFAULT_NOTATION_FONT_SCALE}},{key:"draw",value:function(){As(Cs(Ds.prototype),"draw",this).call(this),this.setRendered();var t=this.stem;if(this.slash&&t){var e=this.getStaveNoteScale(),n=e/.66,i=void 0,r=this.beam;if(r)r.postFormatted||r.postFormat(),i=this.calcBeamedNotesSlashBBox(8*n,8*n,{stem:6*n,beam:5*n});else{var o=this.getStemDirection(),s=this.getNoteHeadBounds(),a=t.getHeight(),u=this.getAbsoluteX(),l=o===G.Stem.DOWN?s.y_top-a:s.y_bottom-a,c=o===G.Stem.DOWN?this.glyph.stem_down_extension:this.glyph.stem_up_extension,h=G.STEM_HEIGHT;h-=h/2.8,l+=(h+=c)*e*o;var f=o===G.Stem.UP?{x1:1,y1:0,x2:13,y2:-9}:{x1:-4,y1:1,x2:13,y2:9};i={x1:u+=f.x1*n,y1:l+=f.y1*n,x2:u+f.x2*n,y2:l+f.y2*n}}var p=this.context;p.save(),p.setLineWidth(1*n),p.beginPath(),p.moveTo(i.x1,i.y1),p.lineTo(i.x2,i.y2),p.closePath(),p.stroke(),p.restore()}}},{key:"calcBeamedNotesSlashBBox",value:function(t,e,n){var i=this.beam,r=i.slope,o=i.notes[i.notes.length-1]===this?-1:1,s=Math.atan(r*o),a=Math.cos(s)*e,u=Math.sin(s)*e;t*=this.getStemDirection();var l=Math.atan((u-t)/a),c=Math.cos(l)*n.stem*o,h=Math.sin(l)*n.stem,f=Math.cos(l)*n.beam*o,p=Math.sin(l)*n.beam,d=this.getStemX(),b=i.notes[0].getStemX(),y=this.beam.getBeamYToDraw()+(d-b)*r;return{x1:d-c,y1:y+t-h,x2:d+a*o+f,y2:y+u+p}}}]),Ds);function Ds(t){var e,n,i;return function(t){if(!(t instanceof Ds))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=Cs(Ds).call(this,Ls(t,{glyph_font_scale:G.DEFAULT_NOTATION_FONT_SCALE*Ds.SCALE,stroke_px:Ds.LEDGER_LINE_OFFSET})))||"object"!==Rs(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","GraceNote"),e.slash=t.slash,e.slur=!0,e.buildNoteHeads(),e.width=3,e}function js(t){return(js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vs(t,e,n){return(Vs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gs(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Gs(t){return(Gs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ws(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Us(t,e,n){return e&&Ws(t.prototype,e),n&&Ws(t,n),t}function Hs(t,e){return(Hs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ys=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hs(t,e)}(zs,Ho),Us(zs,null,[{key:"CATEGORY",get:function(){return"gracetabnotes"}}]),Us(zs,[{key:"getCategory",value:function(){return zs.CATEGORY}},{key:"draw",value:function(){Vs(Gs(zs.prototype),"draw",this).call(this),this.setRendered()}}]),zs);function zs(t){var e,n,i;return function(t){if(!(t instanceof zs))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=Gs(zs).call(this,t,!1))||"object"!==js(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","GraceTabNote"),C.Merge(e.render_options,{y_shift:.3,scale:.6,font:"7.5pt Arial"}),e.updateWidth(),e}function Xs(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ks(t,e,n){return e&&Xs(t.prototype,e),n&&Xs(t,n),t}var qs=(Ks(Js,null,[{key:"names",get:function(){return{standard:"E/5,B/4,G/4,D/4,A/3,E/3",dagdad:"D/5,A/4,G/4,D/4,A/3,D/3",dropd:"E/5,B/4,G/4,D/4,A/3,D/3",eb:"Eb/5,Bb/4,Gb/4,Db/4,Ab/3,Db/3",standardBanjo:"D/5,B/4,G/4,D/4,G/5"}}}]),Ks(Js,[{key:"noteToInteger",value:function(t){return G.keyProperties(t).int_value}},{key:"setTuning",value:function(t){Js.names[t]&&(t=Js.names[t]),this.tuningString=t,this.tuningValues=[],this.numStrings=0;var e=t.split(/\s*,\s*/);if(0===e.length)throw new C.RERR("BadArguments","Invalid tuning string: "+t);this.numStrings=e.length;for(var n=0;n<this.numStrings;++n)this.tuningValues[n]=this.noteToInteger(e[n])}},{key:"getValueForString",value:function(t){var e=parseInt(t,10);if(e<1||e>this.numStrings)throw new C.RERR("BadArguments","String number must be between 1 and ".concat(this.numStrings,":").concat(t));return this.tuningValues[e-1]}},{key:"getValueForFret",value:function(t,e){var n=this.getValueForString(e),i=parseInt(t,10);if(i<0)throw new C.RERR("BadArguments","Fret number must be 0 or higher: "+t);return n+i}},{key:"getNoteForFret",value:function(t,e){var n=this.getValueForFret(t,e),i=Math.floor(n/12),r=n%12;return G.integerToNote(r)+"/"+i}}]),Js);function Js(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"E/5,B/4,G/4,D/4,A/3,E/3,B/2,E/2";!function(t){if(!(t instanceof Js))throw new TypeError("Cannot call a class as a function")}(this),this.setTuning(t)}var Qs=(function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(Zs.prototype,[{key:"setKey",value:function(t){return this.key=t,this.reset(),this}},{key:"getKey",value:function(){return this.key}},{key:"reset",value:function(){if(this.keyParts=this.music.getKeyParts(this.key),this.keyString=this.keyParts.root,this.keyParts.accidental&&(this.keyString+=this.keyParts.accidental),!Xe.scaleTypes[this.keyParts.type])throw new C.RERR("BadArguments","Unsupported key type: ".concat(this.key));this.scale=this.music.getScaleTones(this.music.getNoteValue(this.keyString),Xe.scaleTypes[this.keyParts.type]),this.scaleMap={},this.scaleMapByValue={},this.originalScaleMapByValue={};for(var t=Xe.root_indices[this.keyParts.root],e=0;e<Xe.roots.length;++e){var n=(t+e)%Xe.roots.length,i=Xe.roots[n],r=this.music.getRelativeNoteName(i,this.scale[e]);this.scaleMap[i]=r,this.scaleMapByValue[this.scale[e]]=r,this.originalScaleMapByValue[this.scale[e]]=r}return this}},{key:"getAccidental",value:function(t){var e=this.music.getKeyParts(t).root,n=this.music.getNoteParts(this.scaleMap[e]);return{note:this.scaleMap[e],accidental:n.accidental}}},{key:"selectNote",value:function(t){t=t.toLowerCase();var e=this.music.getNoteParts(t),n=this.scaleMap[e.root],i=this.music.getNoteParts(n);if(n===t)return{note:n,accidental:e.accidental,change:!1};var r=this.scaleMapByValue[this.music.getNoteValue(t)];if(null!=r)return{note:r,accidental:this.music.getNoteParts(r).accidental,change:!1};var o=this.originalScaleMapByValue[this.music.getNoteValue(t)];return null!=o?(this.scaleMap[i.root]=o,delete this.scaleMapByValue[this.music.getNoteValue(n)],{note:this.scaleMapByValue[this.music.getNoteValue(t)]=o,accidental:this.music.getNoteParts(o).accidental,change:!0}):i.root===t?(delete this.scaleMapByValue[this.music.getNoteValue(this.scaleMap[e.root])],this.scaleMapByValue[this.music.getNoteValue(i.root)]=i.root,this.scaleMap[i.root]=i.root,{note:i.root,accidental:null,change:!0}):(delete this.scaleMapByValue[this.music.getNoteValue(this.scaleMap[e.root])],this.scaleMapByValue[this.music.getNoteValue(t)]=t,delete this.scaleMap[i.root],{note:this.scaleMap[i.root]=t,accidental:e.accidental,change:!0})}}]),Zs);function Zs(t){!function(t){if(!(t instanceof Zs))throw new TypeError("Cannot call a class as a function")}(this),this.music=new Xe,this.setKey(t)}function $s(t){return($s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ta(t){return(ta=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ea(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function na(t,e,n){return e&&ea(t.prototype,e),n&&ea(t,n),t}function ia(t,e){return(ia=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ra=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ia(t,e)}(oa,x),na(oa,null,[{key:"FormatByTicksAndDraw",value:function(t,e,n,i,r,o){var s=e.pixelsPerTick;if(null==s)throw new C.RuntimeError("BadArguments","A valid Formatter must be provide to draw offsets by ticks.");var a=s*o.left_shift_ticks,u=s*o.right_shift_ticks,l={height:o.height,y_shift:o.y_shift,left_shift_px:a,right_shift_px:u};new oa({first_note:n.first_note,last_note:n.last_note},i).setContext(t).setRenderOptions(l).setPosition(r).draw()}},{key:"type",get:function(){return{CRESC:1,DECRESC:2}}}]),na(oa,[{key:"setPosition",value:function(t){return t!==ge.Position.ABOVE&&t!==ge.Position.BELOW||(this.position=t),this}},{key:"setRenderOptions",value:function(t){return null!=t.height&&null!=t.y_shift&&null!=t.left_shift_px&&null!=t.right_shift_px&&(this.render_options=t),this}},{key:"setNotes",value:function(t){if(!t.first_note&&!t.last_note)throw new C.RuntimeError("BadArguments","Hairpin needs to have either first_note or last_note set.");return this.first_note=t.first_note,this.last_note=t.last_note,this}},{key:"renderHairpin",value:function(t){var e=this.checkContext(),n=this.render_options.y_shift+20,i=t.first_y;this.position===ge.Position.ABOVE&&(n=30-n,i=t.first_y-t.staff_height);var r=this.render_options.left_shift_px,o=this.render_options.right_shift_px;switch(e.beginPath(),this.hairpin){case oa.type.CRESC:e.moveTo(t.last_x+o,i+n),e.lineTo(t.first_x+r,i+this.render_options.height/2+n),e.lineTo(t.last_x+o,i+this.render_options.height+n);break;case oa.type.DECRESC:e.moveTo(t.first_x+r,i+n),e.lineTo(t.last_x+o,i+this.render_options.height/2+n),e.lineTo(t.first_x+r,i+this.render_options.height+n)}e.stroke(),e.closePath()}},{key:"draw",value:function(){this.checkContext(),this.setRendered();var t=this.first_note,e=this.last_note,n=t.getModifierStartXY(this.position,0),i=e.getModifierStartXY(this.position,0);return this.renderHairpin({first_x:n.x,last_x:i.x,first_y:t.getStave().y+t.getStave().height,last_y:e.getStave().y+e.getStave().height,staff_height:t.getStave().height}),!0}}]),oa);function oa(t,e){var n,i,r;return function(t){if(!(t instanceof oa))throw new TypeError("Cannot call a class as a function")}(this),(i=this,n=!(r=ta(oa).call(this))||"object"!==$s(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i):r).setAttribute("type","StaveHairpin"),n.notes=t,n.hairpin=e,n.position=ge.Position.BELOW,n.render_options={height:10,y_shift:0,left_shift_px:0,right_shift_px:0},n.setNotes(t),n}function sa(t){return(sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aa(t){return(aa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ua(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function la(t,e,n){return e&&ua(t.prototype,e),n&&ua(t,n),t}function ca(t,e){return(ca=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ha=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ca(t,e)}(fa,x),la(fa,null,[{key:"Position",get:function(){return{NEAR_HEAD:1,NEAR_TOP:2}}},{key:"PositionString",get:function(){return{nearHead:fa.Position.NEAR_HEAD,nearTop:fa.Position.NEAR_TOP}}}]),la(fa,[{key:"setNotes",value:function(t,e){if(!t&&!e)throw new C.RuntimeError("BadArguments","Curve needs to have either first_note or last_note set.");return this.from=t,this.to=e,this}},{key:"isPartial",value:function(){return!this.from||!this.to}},{key:"renderCurve",value:function(t){var e=this.context,n=this.render_options.cps,i=this.render_options.x_shift,r=this.render_options.y_shift*t.direction,o=t.first_x+i,s=t.first_y+r,a=t.last_x-i,u=t.last_y+r,l=this.render_options.thickness,c=(a-o)/(n.length+2);e.beginPath(),e.moveTo(o,s),e.bezierCurveTo(o+c+n[0].x,s+n[0].y*t.direction,a-c+n[1].x,u+n[1].y*t.direction,a,u),e.bezierCurveTo(a-c+n[1].x,u+(n[1].y+l)*t.direction,o+c+n[0].x,s+(n[0].y+l)*t.direction,o,s),e.stroke(),e.closePath(),e.fill()}},{key:"draw",value:function(){this.checkContext(),this.setRendered();var t,e,n,i,r,o=this.from,s=this.to,a="baseY",u="baseY";function l(t){return"string"==typeof t?fa.PositionString[t]:t}var c=l(this.render_options.position),h=l(this.render_options.position_end);return c===fa.Position.NEAR_TOP&&(u=a="topY"),h===fa.Position.NEAR_HEAD?u="baseY":h===fa.Position.NEAR_TOP&&(u="topY"),n=o?(t=o.getTieRightX(),r=o.getStemDirection(),o.getStemExtents()[a]):(t=s.getStave().getTieStartX(),s.getStemExtents()[a]),i=s?(e=s.getTieLeftX(),r=s.getStemDirection(),s.getStemExtents()[u]):(e=o.getStave().getTieEndX(),o.getStemExtents()[u]),this.renderCurve({first_x:t,last_x:e,first_y:n,last_y:i,direction:r*(!0===this.render_options.invert?-1:1)}),!0}}]),fa);function fa(t,e,n){var i,r,o;return function(t){if(!(t instanceof fa))throw new TypeError("Cannot call a class as a function")}(this),(r=this,i=!(o=aa(fa).call(this))||"object"!==sa(o)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r):o).setAttribute("type","Curve"),i.render_options={spacing:2,thickness:2,x_shift:0,y_shift:10,position:fa.Position.NEAR_HEAD,position_end:fa.Position.NEAR_HEAD,invert:!1,cps:[{x:0,y:10},{x:0,y:10}]},C.Merge(i.render_options,n),i.setNotes(t,e),i}function pa(t){return(pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function da(t){return(da=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ba(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ya(t,e,n){return e&&ba(t.prototype,e),n&&ba(t,n),t}function ma(t,e){return(ma=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ga(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];va.DEBUG&&C.L("Vex.Flow.TextDynamics",e)}var va=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ma(t,e)}(_a,Zt),ya(_a,null,[{key:"GLYPHS",get:function(){return{f:{code:"vba",width:12},p:{code:"vbf",width:14},m:{code:"v62",width:17},s:{code:"v4a",width:10},z:{code:"v80",width:12},r:{code:"vb1",width:12}}}}]),ya(_a,[{key:"setLine",value:function(t){return this.line=t,this}},{key:"preFormat",value:function(){var r=this,o=0;return this.sequence.split("").forEach(function(t){var e=_a.GLYPHS[t];if(!e)throw new C.RERR("Invalid dynamics character: "+t);var n=r.render_options.glyph_font_size,i=new D(e.code,n);r.glyphs.push(i),o+=e.width}),this.setWidth(o),this.preFormatted=!0,this}},{key:"draw",value:function(){var i=this;this.setRendered();var t=this.getAbsoluteX(),r=this.stave.getYForLine(this.line+-3);ga("Rendering Dynamics: ",this.sequence);var o=t;this.glyphs.forEach(function(t,e){var n=i.sequence[e];t.render(i.context,o,r),o+=_a.GLYPHS[n].width})}}]),_a);function _a(t){var e,n,i;return function(t){if(!(t instanceof _a))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=da(_a).call(this,t))||"object"!==pa(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","TextDynamics"),e.sequence=t.text.toLowerCase(),e.line=t.line||0,e.glyphs=[],C.Merge(e.render_options,{glyph_font_size:40}),ga("New Dynamics Text: ",e.sequence),e}function Sa(t){return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xa(t){return(xa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wa(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ea(t,e,n){return e&&wa(t.prototype,e),n&&wa(t,n),t}function Pa(t,e){return(Pa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ta(t,e,n,i,r,o,s){t.beginPath(),t.moveTo(e,n),t.lineTo(i,r),t.lineTo(o,s),t.lineTo(e,n),t.closePath(),t.fill()}var ka=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pa(t,e)}(Oa,x),Ea(Oa,null,[{key:"TextVerticalPosition",get:function(){return{TOP:1,BOTTOM:2}}},{key:"TextJustification",get:function(){return{LEFT:1,CENTER:2,RIGHT:3}}}]),Ea(Oa,[{key:"setFont",value:function(t){return this.font=t,this}},{key:"setText",value:function(t){return this.text=t,this}},{key:"setNotes",value:function(t){if(!t.first_note&&!t.last_note)throw new C.RuntimeError("BadArguments","Notes needs to have either first_note or last_note set.");if(t.first_indices||(t.first_indices=[0]),t.last_indices||(t.last_indices=[0]),t.first_indices.length!==t.last_indices.length)throw new C.RuntimeError("BadArguments","Connected notes must have similar index sizes");return this.first_note=t.first_note,this.first_indices=t.first_indices,this.last_note=t.last_note,this.last_indices=t.last_indices,this}},{key:"applyLineStyle",value:function(){var t=this.checkContext(),e=this.render_options;e.line_dash&&t.setLineDash(e.line_dash),e.line_width&&t.setLineWidth(e.line_width),e.rounded_end?t.setLineCap("round"):t.setLineCap("square")}},{key:"applyFontStyle",value:function(){var t=this.checkContext();this.font&&t.setFont(this.font.family,this.font.size,this.font.weight),this.render_options.color&&(t.setStrokeStyle(this.render_options.color),t.setFillStyle(this.render_options.color))}},{key:"draw",value:function(){var o=this,s=this.checkContext();this.setRendered();var a,u,l=this.first_note,c=this.last_note,h=this.render_options;s.save(),this.applyLineStyle(),this.first_indices.forEach(function(t,e){var n=o.last_indices[e];a=l.getModifierStartXY(2,t),u=c.getModifierStartXY(1,n);var i=a.y>u.y;a.x+=l.getMetrics().modRightPx+h.padding_left,u.x-=c.getMetrics().modLeftPx+h.padding_right;var r=l.getGlyph().getWidth();l.getKeyProps()[t].displaced&&1===l.getStemDirection()&&(a.x+=r+h.padding_left),c.getKeyProps()[n].displaced&&-1===c.getStemDirection()&&(u.x-=r+h.padding_right),a.y+=i?-3:1,u.y+=i?2:0,function(t,e,n,i){var r,o,s,a,u=i.draw_start_arrow&&i.draw_end_arrow,l=e.x,c=e.y,h=n.x,f=n.y,p=Math.sqrt((h-l)*(h-l)+(f-c)*(f-c)),d=(p-i.arrowhead_length/3)/p;o=i.draw_end_arrow||u?(r=Math.round(l+(h-l)*d),Math.round(c+(f-c)*d)):(r=h,f),a=i.draw_start_arrow||u?(s=l+(h-l)*(1-d),c+(f-c)*(1-d)):(s=l,c),i.color&&(t.setStrokeStyle(i.color),t.setFillStyle(i.color)),t.beginPath(),t.moveTo(s,a),t.lineTo(r,o),t.stroke(),t.closePath();var b,y,m,g,v=Math.atan2(f-c,h-l),_=Math.abs(i.arrowhead_length/Math.cos(i.arrowhead_angle));(i.draw_end_arrow||u)&&(b=v+Math.PI+i.arrowhead_angle,m=h+Math.cos(b)*_,g=f+Math.sin(b)*_,y=v+Math.PI-i.arrowhead_angle,Ta(t,m,g,h,f,h+Math.cos(y)*_,f+Math.sin(y)*_)),(i.draw_start_arrow||u)&&(b=v+i.arrowhead_angle,m=l+Math.cos(b)*_,g=c+Math.sin(b)*_,y=v-i.arrowhead_angle,Ta(t,m,g,l,c,l+Math.cos(y)*_,c+Math.sin(y)*_))}(s,a,u,o.render_options)}),s.restore();var t,e=s.measureText(this.text).width,n=h.text_justification,i=0;n===Oa.TextJustification.LEFT?i=a.x:n===Oa.TextJustification.CENTER?i=(u.x-a.x)/2+a.x-e/2:n===Oa.TextJustification.RIGHT&&(i=u.x-e);var r=h.text_position_vertical;return r===Oa.TextVerticalPosition.TOP?t=l.getStave().getYForTopText():r===Oa.TextVerticalPosition.BOTTOM&&(t=l.getStave().getYForBottomText(G.TEXT_HEIGHT_OFFSET_HACK)),s.save(),this.applyFontStyle(),s.fillText(this.text,i,t),s.restore(),this}}]),Oa);function Oa(t){var e,n,i;return function(t){if(!(t instanceof Oa))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=xa(Oa).call(this))||"object"!==Sa(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","StaveLine"),e.notes=t,e.text="",e.font={family:"Arial",size:10,weight:""},e.render_options={padding_left:4,padding_right:3,line_width:1,line_dash:null,rounded_end:!0,color:null,draw_start_arrow:!1,draw_end_arrow:!1,arrowhead_length:10,arrowhead_angle:Math.PI/8,text_position_vertical:Oa.TextVerticalPosition.TOP,text_justification:Oa.TextJustification.CENTER},e.setNotes(t),e}function Ma(t){return(Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ra(t){return(Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function La(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Aa(t,e,n){return e&&La(t.prototype,e),n&&La(t,n),t}function Ca(t,e){return(Ca=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ia(t,e,n,i,r){var o=Na.GLYPHS[t];new D(o.code,r).render(e,n+o.x_shift,i+o.y_shift)}var Na=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ca(t,e)}(Fa,x),Aa(Fa,null,[{key:"createSustain",value:function(t){return new Fa(t)}},{key:"createSostenuto",value:function(t){var e=new Fa(t);return e.setStyle(Fa.Styles.MIXED),e.setCustomText("Sost. Ped."),e}},{key:"createUnaCorda",value:function(t){var e=new Fa(t);return e.setStyle(Fa.Styles.TEXT),e.setCustomText("una corda","tre corda"),e}},{key:"GLYPHS",get:function(){return{pedal_depress:{code:"v36",x_shift:-10,y_shift:0},pedal_release:{code:"v5d",x_shift:-2,y_shift:3}}}},{key:"Styles",get:function(){return{TEXT:1,BRACKET:2,MIXED:3}}},{key:"StylesString",get:function(){return{text:Fa.Styles.TEXT,bracket:Fa.Styles.BRACKET,mixed:Fa.Styles.MIXED}}}]),Aa(Fa,[{key:"setCustomText",value:function(t,e){return this.custom_depress_text=t||"",this.custom_release_text=e||"",this}},{key:"setStyle",value:function(t){if(t<1&&3<t)throw new C.RERR("InvalidParameter","The style must be one found in PedalMarking.Styles");return this.style=t,this}},{key:"setLine",value:function(t){return this.line=t,this}},{key:"drawBracketed",value:function(){var l,c,h=this.context,f=!1,p=this;this.notes.forEach(function(t,e,n){f=!f;var i=t.getAbsoluteX(),r=t.getStave().getYForBottomText(p.line+3);if(i<l)throw new C.RERR("InvalidConfiguration","The notes provided must be in order of ascending x positions");var o=n[e+1]===t,s=n[e-1]===t,a=0;if(f)if(a=s?5:0,p.style!==Fa.Styles.MIXED||s)h.beginPath(),h.moveTo(i,r-p.render_options.bracket_height),h.lineTo(i+a,r),h.stroke(),h.closePath();else if(p.custom_depress_text){var u=h.measureText(p.custom_depress_text).width;h.fillText(p.custom_depress_text,i-u/2,r),a=u/2+p.render_options.text_margin_right}else Ia("pedal_depress",h,i,r,p.render_options.glyph_point_size),a=20+p.render_options.text_margin_right;else a=o?-5:0,h.beginPath(),h.moveTo(l,c),h.lineTo(i+a,r),h.lineTo(i,r-p.render_options.bracket_height),h.stroke(),h.closePath();l=i+a,c=r})}},{key:"drawText",value:function(){var o=this.context,s=!1,a=this,u=a.render_options.glyph_point_size;this.notes.forEach(function(t){s=!s;var e=t.getStave(),n=t.getAbsoluteX(),i=e.getYForBottomText(a.line+3),r=0;s?a.custom_depress_text?(r=o.measureText(a.custom_depress_text).width,o.fillText(a.custom_depress_text,n-r/2,i)):Ia("pedal_depress",o,n,i,u):a.custom_release_text?(r=o.measureText(a.custom_release_text).width,o.fillText(a.custom_release_text,n-r/2,i)):Ia("pedal_release",o,n,i,u)})}},{key:"draw",value:function(){var t=this.checkContext();this.setRendered(),t.save(),t.setStrokeStyle(this.render_options.color),t.setFillStyle(this.render_options.color),t.setFont(this.font.family,this.font.size,this.font.weight),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Na.DEBUG&&C.L("Vex.Flow.PedalMarking",e)}("Rendering Pedal Marking"),this.style===Fa.Styles.BRACKET||this.style===Fa.Styles.MIXED?(t.setLineWidth(this.render_options.bracket_line_width),this.drawBracketed()):this.style===Fa.Styles.TEXT&&this.drawText(),t.restore()}}]),Fa);function Fa(t){var e,n,i;return function(t){if(!(t instanceof Fa))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=Ra(Fa).call(this))||"object"!==Ma(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","PedalMarking"),e.notes=t,e.style=Fa.TEXT,e.line=0,e.custom_depress_text="",e.custom_release_text="",e.font={family:"Times New Roman",size:12,weight:"italic bold"},e.render_options={bracket_height:10,text_margin_right:6,bracket_line_width:1,glyph_point_size:40,color:"black"},e}function Ba(t){return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Da(){return(Da=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function ja(t){return(ja=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Va(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ga(t,e,n){return e&&Va(t.prototype,e),n&&Va(t,n),t}function Wa(t,e){return(Wa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ua=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wa(t,e)}(Ha,x),Ga(Ha,null,[{key:"Positions",get:function(){return{TOP:1,BOTTOM:-1}}},{key:"PositionString",get:function(){return{top:Ha.Positions.TOP,bottom:Ha.Positions.BOTTOM}}}]),Ga(Ha,[{key:"applyStyle",value:function(t){return t.setFont(this.font.family,this.font.size,this.font.weight),t.setStrokeStyle(this.render_options.color),t.setFillStyle(this.render_options.color),t.setLineWidth(this.render_options.line_width),this}},{key:"setDashed",value:function(t,e){return this.render_options.dashed=t,e&&(this.render_options.dash=e),this}},{key:"setFont",value:function(t){return this.font=Da({},this.font,t),this}},{key:"setLine",value:function(t){return this.line=t,this}},{key:"draw",value:function(){var t=this.context;this.setRendered();var e=0;switch(this.position){case Ha.Positions.TOP:e=this.start.getStave().getYForTopText(this.line);break;case Ha.Positions.BOTTOM:e=this.start.getStave().getYForBottomText(this.line+G.TEXT_HEIGHT_OFFSET_HACK);break;default:throw new C.RERR("InvalidPosition","The position ".concat(this.position," is invalid"))}var n={x:this.start.getAbsoluteX(),y:e},i={x:this.stop.getAbsoluteX(),y:e};!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Ua.DEBUG&&C.L("Vex.Flow.TextBracket",e)}("Rendering TextBracket: start:",n,"stop:",i,"y:",e);var r=this.render_options.bracket_height*this.position;t.save(),this.applyStyle(t),t.fillText(this.text,n.x,n.y);var o=t.measureText(this.text).width,s=t.measureText("M").width,a=n.y-s/2.5;t.setFont(this.font.family,this.font.size/1.4,this.font.weight),t.fillText(this.superscript,n.x+o+1,a);var u=t.measureText(this.superscript).width,l=t.measureText("M").width,c=n.x,h=a,f=i.x+this.stop.getGlyph().getWidth();this.position===Ha.Positions.TOP?(c+=o+u+5,h-=l/2.7):this.position===Ha.Positions.BOTTOM&&(h+=l/2.7,c+=o+2,this.render_options.underline_superscript||(c+=u)),this.render_options.dashed?(et.drawDashedLine(t,c,h,f,h,this.render_options.dash),this.render_options.show_bracket&&et.drawDashedLine(t,f,h+1*this.position,f,h+r,this.render_options.dash)):(t.beginPath(),t.moveTo(c,h),t.lineTo(f,h),this.render_options.show_bracket&&t.lineTo(f,h+r),t.stroke(),t.closePath()),t.restore()}}]),Ha);function Ha(t){var e,n,i,r=t.start,o=t.stop,s=t.text,a=void 0===s?"":s,u=t.superscript,l=void 0===u?"":u,c=t.position,h=void 0===c?Ha.Positions.TOP:c;return function(t){if(!(t instanceof Ha))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=ja(Ha).call(this))||"object"!==Ba(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","TextBracket"),e.start=r,e.stop=o,e.text=a,e.superscript=l,e.position="string"==typeof h?Ha.PositionString[h]:h,e.line=1,e.font={family:"Serif",size:15,weight:"italic"},e.render_options={dashed:!0,dash:[5],color:"black",line_width:1,show_bracket:!0,bracket_height:8,underline_superscript:!0},e}function Ya(t){return(Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function za(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xa(t,e,n){return(Xa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ka(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Ka(t){return(Ka=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qa(t,e){return(qa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ja=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qa(t,e)}(Qa,Zt),function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(Qa.prototype,[{key:"getType",value:function(){return this.type}},{key:"setType",value:function(t){return this.type="string"==typeof t?dr.typeString[t]:t,this.setWidth(this.metrics.widths[this.type]),this}},{key:"getBoundingBox",value:function(){return Xa(Ka(Qa.prototype),"getBoundingBox",this).call(this)}},{key:"addToModifierContext",value:function(){return this}},{key:"preFormat",value:function(){return this.setPreFormatted(!0),this}},{key:"draw",value:function(){if(this.checkContext(),!this.stave)throw new C.RERR("NoStave","Can't draw without a stave.");!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Ja.DEBUG&&C.L("Vex.Flow.BarNote",e)}("Rendering bar line at: ",this.getAbsoluteX());var t=new dr(this.type);t.setX(this.getAbsoluteX()),t.draw(this.stave),this.setRendered()}}]),Qa);function Qa(){var t,e,n,i,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:dr.type.SINGLE;!function(t){if(!(t instanceof Qa))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=Ka(Qa).call(this,{duration:"b"}))||"object"!==Ya(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","BarNote"),e.metrics={widths:{}};var o=dr.type;return e.metrics.widths=(za(t={},o.SINGLE,8),za(t,o.DOUBLE,12),za(t,o.END,15),za(t,o.REPEAT_BEGIN,14),za(t,o.REPEAT_END,14),za(t,o.REPEAT_BOTH,18),za(t,o.NONE,0),t),e.ignore_ticks=!0,e.setType(r),e}function Za(t){return(Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $a(t,e,n){return($a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tu(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function tu(t){return(tu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eu(t,e){return(eu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var nu=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),eu(t,e)}(iu,he),function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(iu.prototype,[{key:"isRest",value:function(){return!0}},{key:"setStave",value:function(t){$a(tu(iu.prototype),"setStave",this).call(this,t)}},{key:"addToModifierContext",value:function(){return this}},{key:"preFormat",value:function(){return this.setPreFormatted(!0),this}},{key:"draw",value:function(){if(!this.stave)throw new C.RERR("NoStave","Can't draw without a stave.");this.setRendered();for(var t=0;t<this.modifiers.length;++t){var e=this.modifiers[t];e.setContext(this.context),e.draw()}}}]),iu);function iu(t){var e,n,i,r;if(function(t){if(!(t instanceof iu))throw new TypeError("Cannot call a class as a function")}(this),!t)throw new C.RuntimeError("BadArguments","Ghost note must have valid initialization data to identify duration.");if("string"==typeof t)n={duration:t};else{if("object"!==Za(t))throw new C.RuntimeError("BadArguments","Ghost note must have valid initialization data to identify duration.");n=t}return(i=this,e=!(r=tu(iu).call(this,n))||"object"!==Za(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i):r).setAttribute("type","GhostNote"),e.setWidth(0),e}function ru(t){return(ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ou(t){return(ou=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function su(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function au(t,e,n){return e&&su(t.prototype,e),n&&su(t,n),t}function uu(t,e){return(uu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lu=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),uu(t,e)}(cu,ge),au(cu,null,[{key:"CATEGORY",get:function(){return"tremolo"}},{key:"YOFFSETSTEMUP",get:function(){return-9}},{key:"YOFFSETSTEMDOWN",get:function(){return-21}},{key:"XOFFSETSTEMUP",get:function(){return 6}},{key:"XOFFSETSTEMDOWN",get:function(){return-2}}]),au(cu,[{key:"getCategory",value:function(){return cu.CATEGORY}},{key:"draw",value:function(){if(this.checkContext(),!this.note||null==this.index)throw new C.RERR("NoAttachedNote","Can't draw Tremolo without a note and index.");this.setRendered();var t=this.note.getStemDirection();this.y_spacing=4*t;var e=this.note.getModifierStartXY(this.position,this.index).x,n=this.note.stem.getExtents().topY,i="gracenotes"===this.note.getCategory()?Bs.SCALE:1;n+=t<0?cu.YOFFSETSTEMDOWN*i:cu.YOFFSETSTEMUP*i,this.font={family:"Arial",size:16*i,weight:""},this.render_options={font_scale:35*i,stroke_px:3,stroke_spacing:10*i},e+=t<0?cu.XOFFSETSTEMDOWN:cu.XOFFSETSTEMUP;for(var r=0;r<this.num;++r)D.renderGlyph(this.context,e,n,this.render_options.font_scale,this.code),n+=this.y_spacing}}]),cu);function cu(t){var e,n,i;return function(t){if(!(t instanceof cu))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=ou(cu).call(this))||"object"!==ru(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","Tremolo"),e.num=t,e.note=null,e.index=null,e.position=ge.Position.CENTER,e.code="v74",e}function hu(t){return(hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fu(t){return(fu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pu(t,e){return(pu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var du=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pu(t,e)}(bu,Zt),function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(bu.prototype,[{key:"setLine",value:function(t){return this.line=t,this}},{key:"setHeight",value:function(t){return this.height=t,this}},{key:"setDecrescendo",value:function(t){return this.decrescendo=t,this}},{key:"preFormat",value:function(){return this.preFormatted=!0,this}},{key:"draw",value:function(){this.checkContext(),this.setRendered();var t,e,n,i,r,o,s=this.getTickContext(),a=yi.getNextContext(s),u=this.getAbsoluteX(),l=a?a.getX():this.stave.x+this.stave.width,c=this.stave.getYForLine(this.line+-3)+1;!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];du.DEBUG&&C.L("Vex.Flow.Crescendo",e)}("Drawing ",this.decrescendo?"decrescendo ":"crescendo ",this.height,"x",u-l),t=this.context,e={begin_x:u-this.render_options.extend_left,end_x:l+this.render_options.extend_right,y:c+this.render_options.y_shift,height:this.height,reverse:this.decrescendo},n=e.begin_x,i=e.end_x,r=e.y,o=e.height/2,t.beginPath(),e.reverse?(t.moveTo(n,r-o),t.lineTo(i,r),t.lineTo(n,r+o)):(t.moveTo(i,r-o),t.lineTo(n,r),t.lineTo(i,r+o)),t.stroke(),t.closePath()}}]),bu);function bu(t){var e,n,i;return function(t){if(!(t instanceof bu))throw new TypeError("Cannot call a class as a function")}(this),(n=this,e=!(i=fu(bu).call(this,t))||"object"!==hu(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):i).setAttribute("type","Crescendo"),e.decrescendo=!1,e.line=t.line||0,e.height=15,C.Merge(e.render_options,{extend_left:0,extend_right:0,y_shift:0}),e}var yu=C.MakeException("ParserError");function mu(t){return void 0!==t.matchedString?t.matchedString:t.results?mu(t.results):1===t.length?mu(t[0]):0===t.length?null:t.map(mu)}var gu=(function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(vu.prototype,[{key:"parse",value:function(t){this.line=t,this.pos=0,this.errorPos=-1;var e=this.expect(this.grammar.begin());return e.errorPos=this.errorPos,e}},{key:"matchFail",value:function(t){-1===this.errorPos&&(this.errorPos=this.pos),this.pos=t}},{key:"matchSuccess",value:function(){this.errorPos=-1}},{key:"matchToken",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1]?new RegExp("^(("+t+"))"):new RegExp("^(("+t+")\\s*)"),n=this.line.slice(this.pos).match(e);return null!==n?{success:!0,matchedString:n[2],incrementPos:n[1].length,pos:this.pos}:{success:!1,pos:this.pos}}},{key:"expectOne",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=[],i=this.pos,r=!0,o=!1;e=!0===e||!0===t.maybe;for(var s=0;s<t.expect.length;s++){var a=t.expect[s],u=this.pos,l=this.expect(a);if(l.success){if(n.push(l),o=!0,t.or)break}else if(r=!1,!t.or){this.pos=u;break}}var c=t.or&&o||r,h=c||!0===e;return e&&!c&&(this.pos=i),h?this.matchSuccess():this.matchFail(i),{success:h,results:n,numMatches:c?1:0}}},{key:"expectOneOrMore",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=[],i=this.pos,r=0,o=!0;do{var s=this.expectOne(t);s.success?(r++,n.push(s.results)):o=!1}while(o);var a=0<r||!0===e;return!e||0<r||(this.pos=i),a?this.matchSuccess():this.matchFail(i),{success:a,results:n,numMatches:r}}},{key:"expectZeroOrMore",value:function(t){return this.expectOneOrMore(t,!0)}},{key:"expect",value:function(t){var e;if(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];gu.DEBUG&&C.L("Vex.Flow.Parser",e)}("Evaluating rules:",t),!t)throw new yu("Invalid Rule: "+t,t);var n=t.bind(this.grammar)();if(n.token)(e=this.matchToken(n.token,!0===n.noSpace)).success&&(this.pos+=e.incrementPos);else{if(!n.expect)throw new yu("Bad grammar! No `token` or `expect` property",n);e=n.oneOrMore?this.expectOneOrMore(n):n.zeroOrMore?this.expectZeroOrMore(n):this.expectOne(n)}return e.matches=[],e.results&&e.results.forEach(function(t){return e.matches.push(mu(t))}),n.run&&e.success&&n.run(e),e}}]),vu);function vu(t){!function(t){if(!(t instanceof vu))throw new TypeError("Cannot call a class as a function")}(this),this.grammar=t}function _u(t){return(_u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Su(){return(Su=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function xu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Eu(t,e,n){return e&&wu(t.prototype,e),n&&wu(t,n),t}function Pu(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Cu.DEBUG&&C.L("Vex.Flow.EasyScore",e)}var Tu=C.MakeException("EasyScoreError"),ku=(Eu(Ru,[{key:"begin",value:function(){return this.LINE}},{key:"LINE",value:function(){return{expect:[this.PIECE,this.PIECES,this.EOL]}}},{key:"PIECE",value:function(){var t=this;return{expect:[this.CHORDORNOTE,this.PARAMS],run:function(){return t.builder.commitPiece()}}}},{key:"PIECES",value:function(){return{expect:[this.COMMA,this.PIECE],zeroOrMore:!0}}},{key:"PARAMS",value:function(){return{expect:[this.DURATION,this.TYPE,this.DOTS,this.OPTS]}}},{key:"CHORDORNOTE",value:function(){return{expect:[this.CHORD,this.SINGLENOTE],or:!0}}},{key:"CHORD",value:function(){var e=this;return{expect:[this.LPAREN,this.NOTES,this.RPAREN],run:function(t){return e.builder.addChord(t.matches[1])}}}},{key:"NOTES",value:function(){return{expect:[this.NOTE],oneOrMore:!0}}},{key:"NOTE",value:function(){return{expect:[this.NOTENAME,this.ACCIDENTAL,this.OCTAVE]}}},{key:"SINGLENOTE",value:function(){var e=this;return{expect:[this.NOTENAME,this.ACCIDENTAL,this.OCTAVE],run:function(t){return e.builder.addSingleNote(t.matches[0],t.matches[1],t.matches[2])}}}},{key:"ACCIDENTAL",value:function(){return{expect:[this.ACCIDENTALS],maybe:!0}}},{key:"DOTS",value:function(){var e=this;return{expect:[this.DOT],zeroOrMore:!0,run:function(t){return e.builder.setNoteDots(t.matches[0])}}}},{key:"TYPE",value:function(){var e=this;return{expect:[this.SLASH,this.MAYBESLASH,this.TYPES],maybe:!0,run:function(t){return e.builder.setNoteType(t.matches[2])}}}},{key:"DURATION",value:function(){var e=this;return{expect:[this.SLASH,this.DURATIONS],maybe:!0,run:function(t){return e.builder.setNoteDuration(t.matches[1])}}}},{key:"OPTS",value:function(){return{expect:[this.LBRACKET,this.KEYVAL,this.KEYVALS,this.RBRACKET],maybe:!0}}},{key:"KEYVALS",value:function(){return{expect:[this.COMMA,this.KEYVAL],zeroOrMore:!0}}},{key:"KEYVAL",value:function(){var e=this;return{expect:[this.KEY,this.EQUALS,this.VAL],run:function(t){return e.builder.addNoteOption(t.matches[0],t.matches[2].slice(1,-1))}}}},{key:"VAL",value:function(){return{expect:[this.SVAL,this.DVAL],or:!0}}},{key:"KEY",value:function(){return{token:"[a-zA-Z][a-zA-Z0-9]*"}}},{key:"DVAL",value:function(){return{token:'["][^"]*["]'}}},{key:"SVAL",value:function(){return{token:"['][^']*[']"}}},{key:"NOTENAME",value:function(){return{token:"[a-gA-G]"}}},{key:"OCTAVE",value:function(){return{token:"[0-9]+"}}},{key:"ACCIDENTALS",value:function(){return{token:"bbs|bb|bss|bs|b|db|d|##|#|n|\\+\\+-|\\+-|\\+\\+|\\+|k|o"}}},{key:"DURATIONS",value:function(){return{token:"[0-9whq]+"}}},{key:"TYPES",value:function(){return{token:"[rRsSxX]"}}},{key:"LPAREN",value:function(){return{token:"[(]"}}},{key:"RPAREN",value:function(){return{token:"[)]"}}},{key:"COMMA",value:function(){return{token:"[,]"}}},{key:"DOT",value:function(){return{token:"[.]"}}},{key:"SLASH",value:function(){return{token:"[/]"}}},{key:"MAYBESLASH",value:function(){return{token:"[/]?"}}},{key:"EQUALS",value:function(){return{token:"[=]"}}},{key:"LBRACKET",value:function(){return{token:"\\["}}},{key:"RBRACKET",value:function(){return{token:"\\]"}}},{key:"EOL",value:function(){return{token:"$"}}}]),Ru),Ou=(Eu(Mu,[{key:"reset",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.options={stem:"auto",clef:"treble"},this.elements={notes:[],accidentals:[]},this.rollingDuration="8",this.resetPiece(),Su(this.options,t)}},{key:"getFactory",value:function(){return this.factory}},{key:"getElements",value:function(){return this.elements}},{key:"addCommitHook",value:function(t){this.commitHooks.push(t)}},{key:"resetPiece",value:function(){Pu("resetPiece"),this.piece={chord:[],duration:this.rollingDuration,dots:0,type:void 0,options:{}}}},{key:"setNoteDots",value:function(t){Pu("setNoteDots:",t),t&&(this.piece.dots=t.length)}},{key:"setNoteDuration",value:function(t){Pu("setNoteDuration:",t),this.rollingDuration=this.piece.duration=t||this.rollingDuration}},{key:"setNoteType",value:function(t){Pu("setNoteType:",t),t&&(this.piece.type=t)}},{key:"addNoteOption",value:function(t,e){Pu("addNoteOption: key:",t,"value:",e),this.piece.options[t]=e}},{key:"addNote",value:function(t,e,n){Pu("addNote:",t,e,n),this.piece.chord.push({key:t,accid:e,octave:n})}},{key:"addSingleNote",value:function(t,e,n){Pu("addSingleNote:",t,e,n),this.addNote(t,e,n)}},{key:"addChord",value:function(t){var n=this;Pu("startChord"),"object"!==_u(t[0])?this.addSingleNote(t[0]):t.forEach(function(t){var e;t&&n.addNote.apply(n,function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(e=t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}())}),Pu("endChord")}},{key:"commitPiece",value:function(){var e=this;Pu("commitPiece");var n=this.factory;if(n){var i=Su({},this.options,this.piece.options),t=i.stem,r=i.clef,o="auto"===t.toLowerCase(),s=o||"up"!==t.toLowerCase()?Ne.STEM_DOWN:Ne.STEM_UP,a=this.piece,u=a.chord,l=a.duration,c=a.dots,h=a.type,f=u.map(function(t){return t.key+"/"+t.octave}),p=n.StaveNote({keys:f,duration:l,dots:c,type:h,clef:r,auto_stem:o});o||p.setStemDirection(s);var d=u.map(function(t){return t.accid||null});d.forEach(function(t,e){t&&p.addAccidental(e,n.Accidental({type:t}))});for(var b=0;b<c;b++)p.addDotToAll();this.commitHooks.forEach(function(t){return t(i,p,e)}),this.elements.notes.push(p),this.elements.accidentals.concat(d),this.resetPiece()}}}]),Mu);function Mu(t){xu(this,Mu),this.factory=t,this.commitHooks=[],this.reset()}function Ru(t){xu(this,Ru),this.builder=t}function Lu(t,e){var n=t.id;void 0!==n&&e.setAttribute("id",n)}function Au(t,e){t.class&&t.class.split(/\s*,\s*/).forEach(function(t){return e.addClass(t)})}var Cu=(Eu(Iu,[{key:"set",value:function(t){return Su(this.defaults,t),this}},{key:"setOptions",value:function(t){var e=this;return this.options=Su({factory:null,builder:null,commitHooks:[Lu,Au,li.easyScoreHook],throwOnError:!1},t),this.factory=this.options.factory,this.builder=this.options.builder||new Ou(this.factory),this.grammar=new ku(this.builder),this.parser=new gu(this.grammar),this.options.commitHooks.forEach(function(t){return e.addCommitHook(t)}),this}},{key:"setContext",value:function(t){return this.factory&&this.factory.setContext(t),this}},{key:"parse",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.builder.reset(e);var n=this.parser.parse(t);if(!n.success&&this.options.throwOnError)throw new Tu("Error parsing line: "+t,n);return n}},{key:"beam",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.factory.Beam({notes:t,options:e}),t}},{key:"tuplet",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.factory.Tuplet({notes:t,options:e}),t}},{key:"notes",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e=Su({clef:this.defaults.clef,stem:this.defaults.stem},e),this.parse(t,e),this.builder.getElements().notes}},{key:"voice",value:function(t,e){return e=Su({time:this.defaults.time},e),this.factory.Voice(e).addTickables(t)}},{key:"addCommitHook",value:function(t){return this.builder.addCommitHook(t)}}]),Iu);function Iu(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};xu(this,Iu),this.setOptions(t),this.defaults={clef:"treble",time:"4/4",stem:"auto"}}function Nu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Fu(){return(Fu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var Bu=C.MakeException("FactoryError");function Du(t,e){var n=0<arguments.length&&void 0!==t?t:{},i=1<arguments.length?e:void 0,r=i.options;return(n=Fu(i,n)).options=Fu(r,n.options),n}var ju,Vu,Gu=(Vu=[{key:"newFromElementId",value:function(t){return new Wu({renderer:{elementId:t,width:1<arguments.length&&void 0!==arguments[1]?arguments[1]:500,height:2<arguments.length&&void 0!==arguments[2]?arguments[2]:200}})}}],Nu((ju=Wu).prototype,[{key:"reset",value:function(){this.renderQ=[],this.systems=[],this.staves=[],this.voices=[],this.stave=null}},{key:"getOptions",value:function(){return this.options}},{key:"setOptions",value:function(t){for(var e=["stave","renderer","font"],n=0;n<e.length;n++){var i=e[n];Fu(this.options[i],t[i])}null===this.options.renderer.elementId&&!this.options.renderer.context||this.initRenderer(),this.reset()}},{key:"initRenderer",value:function(){var t=this.options.renderer,e=t.elementId,n=t.backend,i=t.width,r=t.height,o=t.background;if(""===e)throw new Bu("HTML DOM element not set in Factory");this.context=et.buildContext(e,n,i,r,o)}},{key:"getContext",value:function(){return this.context}},{key:"setContext",value:function(t){return this.context=t,this}},{key:"getStave",value:function(){return this.stave}},{key:"getVoices",value:function(){return this.voices}},{key:"space",value:function(t){return this.options.stave.space*t}},{key:"Stave",value:function(t){t=Du(t,{x:0,y:0,width:this.options.renderer.width-this.space(1),options:{spacing_between_lines_px:this.options.stave.space}});var e=new Lo(t.x,t.y,t.width,t.options);return this.staves.push(e),e.setContext(this.context),this.stave=e}},{key:"TabStave",value:function(t){t=Du(t,{x:0,y:0,width:this.options.renderer.width-this.space(1),options:{spacing_between_lines_px:1.3*this.options.stave.space}});var e=new Fo(t.x,t.y,t.width,t.options);return this.staves.push(e),e.setContext(this.context),this.stave=e}},{key:"StaveNote",value:function(t){var e=new Ne(t);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"GhostNote",value:function(t){var e=new nu(t);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"TextNote",value:function(t){var e=new Wr(t);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"BarNote",value:function(t){t=Du(t,{type:"single",options:{}});var e=new Ja(t.type);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"ClefNote",value:function(t){t=Du(t,{type:"treble",options:{size:"default"}});var e=new ls(t.type,t.options.size,t.options.annotation);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"TimeSigNote",value:function(t){t=Du(t,{time:"4/4",options:{}});var e=new Ss(t.time);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"KeySigNote",value:function(t){var e=new bs(t.key,t.cancelKey,t.alterKey);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"TabNote",value:function(t){var e=new Ho(t);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"GraceNote",value:function(t){var e=new Bs(t);return this.stave&&e.setStave(this.stave),e.setContext(this.context),e}},{key:"GraceNoteGroup",value:function(t){var e=new Cn(t.notes,t.slur);return e.setContext(this.context),e}},{key:"Accidental",value:function(t){t=Du(t,{type:null,options:{}});var e=new nn(t.type);return e.setContext(this.context),e}},{key:"Annotation",value:function(t){t=Du(t,{text:"p",vJustify:"below",hJustify:"center",fontFamily:"Times",fontSize:14,fontWeight:"bold italic",options:{}});var e=new Ri(t.text);return e.setJustification(t.hJustify),e.setVerticalJustification(t.vJustify),e.setFont(t.fontFamily,t.fontSize,t.fontWeight),e.setContext(this.context),e}},{key:"Articulation",value:function(t){t=Du(t,{type:"a.",position:"above",options:{}});var e=new li(t.type);return e.setPosition(t.position),e.setContext(this.context),e}},{key:"TextDynamics",value:function(t){t=Du(t,{text:"p",duration:"q",dots:0,line:0,options:{}});var e=new va({text:t.text,line:t.line,duration:t.duration,dots:t.dots});return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"Fingering",value:function(t){t=Du(t,{number:"0",position:"left",options:{}});var e=new We(t.number);return e.setPosition(t.position),e.setContext(this.context),e}},{key:"StringNumber",value:function(t){t=Du(t,{number:"0",position:"left",options:{}});var e=new Xn(t.number);return e.setPosition(t.position),e.setContext(this.context),e}},{key:"TickContext",value:function(){return(new yi).setContext(this.context)}},{key:"ModifierContext",value:function(){return new Xi}},{key:"MultiMeasureRest",value:function(t){var e=new es(t.number_of_measures,t);return e.setContext(this.context),this.renderQ.push(e),e}},{key:"Voice",value:function(t){t=Du(t,{time:"4/4",options:{}});var e=new At(t.time);return this.voices.push(e),e}},{key:"StaveConnector",value:function(t){t=Du(t,{top_stave:null,bottom_stave:null,type:"double",options:{}});var e=new Vt(t.top_stave,t.bottom_stave);return e.setType(t.type).setContext(this.context),this.renderQ.push(e),e}},{key:"Formatter",value:function(){return new tr}},{key:"Tuplet",value:function(t){t=Du(t,{notes:[],options:{}});var e=new bt(t.notes,t.options).setContext(this.context);return this.renderQ.push(e),e}},{key:"Beam",value:function(t){t=Du(t,{notes:[],options:{autoStem:!1,secondaryBeamBreaks:[]}});var e=new Pt(t.notes,t.options.autoStem).setContext(this.context);return e.breakSecondaryAt(t.options.secondaryBeamBreaks),this.renderQ.push(e),e}},{key:"Curve",value:function(t){t=Du(t,{from:null,to:null,options:{}});var e=new ha(t.from,t.to,t.options).setContext(this.context);return this.renderQ.push(e),e}},{key:"StaveTie",value:function(t){t=Du(t,{from:null,to:null,first_indices:[0],last_indices:[0],text:null,options:{direction:void 0}});var e=new mn({first_note:t.from,last_note:t.to,first_indices:t.first_indices,last_indices:t.last_indices},t.text);return t.options.direction&&e.setDirection(t.options.direction),e.setContext(this.context),this.renderQ.push(e),e}},{key:"StaveLine",value:function(t){t=Du(t,{from:null,to:null,first_indices:[0],last_indices:[0],options:{}});var e=new ka({first_note:t.from,last_note:t.to,first_indices:t.first_indices,last_indices:t.last_indices});return t.options.text&&e.setText(t.options.text),t.options.font&&e.setFont(t.options.font),e.setContext(this.context),this.renderQ.push(e),e}},{key:"VibratoBracket",value:function(t){t=Du(t,{from:null,to:null,options:{harsh:!1}});var e=new Jo({start:t.from,stop:t.to});return t.options.line&&e.setLine(t.options.line),t.options.harsh&&e.setHarsh(t.options.harsh),e.setContext(this.context),this.renderQ.push(e),e}},{key:"TextBracket",value:function(t){t=Du(t,{from:null,to:null,text:"",options:{superscript:"",position:1}});var e=new Ua({start:t.from,stop:t.to,text:t.text,superscript:t.options.superscript,position:t.options.position});return t.options.line&&e.setLine(t.options.line),t.options.font&&e.setFont(t.options.font),e.setContext(this.context),this.renderQ.push(e),e}},{key:"System",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t.factory=this;var e=new qu(t).setContext(this.context);return this.systems.push(e),e}},{key:"EasyScore",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t.factory=this,new Cu(t)}},{key:"PedalMarking",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t=Du(t,{notes:[],options:{style:"mixed"}});var e=new Na(t.notes);return e.setStyle(Na.StylesString[t.options.style]),e.setContext(this.context),this.renderQ.push(e),e}},{key:"NoteSubGroup",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t=Du(t,{notes:[],options:{}});var e=new fn(t.notes);return e.setContext(this.context),e}},{key:"draw",value:function(){var e=this;this.systems.forEach(function(t){return t.setContext(e.context).format()}),this.staves.forEach(function(t){return t.setContext(e.context).draw()}),this.voices.forEach(function(t){return t.setContext(e.context).draw()}),this.renderQ.forEach(function(t){t.isRendered()||t.setContext(e.context).draw()}),this.systems.forEach(function(t){return t.setContext(e.context).draw()}),this.reset()}}]),Nu(ju,Vu),Wu);function Wu(t){!function(t){if(!(t instanceof Wu))throw new TypeError("Cannot call a class as a function")}(this),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Gu.DEBUG&&C.L("Vex.Flow.Factory",e)}("New factory: ",t);var e={stave:{space:10},renderer:{context:null,elementId:"",backend:et.Backends.SVG,width:500,height:200,background:"#FFF"},font:{face:"Arial",point:10,style:""}};this.options=e,this.setOptions(t)}function Uu(t){return(Uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hu(t,e,n){return(Hu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yu(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Yu(t){return(Yu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zu(t,e){return(zu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xu(){return(Xu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function Ku(t,e){var n=e.options;return(t=Xu(e,t)).options=Xu(n,t.options),t}var qu=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zu(t,e)}(Ju,x),function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(Ju.prototype,[{key:"setOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.options=Ku(t,{x:10,y:10,width:500,connector:null,spaceBetweenStaves:12,factory:null,debugFormatter:!1,formatIterations:0,options:{}}),this.factory=this.options.factory||new Gu({renderer:{el:null}})}},{key:"setContext",value:function(t){return Hu(Yu(Ju.prototype),"setContext",this).call(this,t),this.factory.setContext(t),this}},{key:"addConnector",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"double";return this.connector=this.factory.StaveConnector({top_stave:this.parts[0].stave,bottom_stave:this.parts[this.parts.length-1].stave,type:t}),this.connector}},{key:"addStave",value:function(e){var n=this;return(e=Ku(e,{stave:null,voices:[],spaceAbove:0,spaceBelow:0,debugNoteMetrics:!1,options:{left_bar:!1}})).stave||(e.stave=this.factory.Stave({x:this.options.x,y:this.options.y,width:this.options.width,options:e.options})),e.voices.forEach(function(t){return t.setContext(n.context).setStave(e.stave).getTickables().forEach(function(t){return t.setStave(e.stave)})}),this.parts.push(e),e.stave}},{key:"format",value:function(){var e=this,n=new tr;this.formatter=n;var i=this.options.y,r=0,o=[],s=[];this.parts.forEach(function(t){i+=t.stave.space(t.spaceAbove),t.stave.setY(i),n.joinVoices(t.voices),i+=t.stave.space(t.spaceBelow),i+=t.stave.space(e.options.spaceBetweenStaves),t.debugNoteMetrics&&(s.push({y:i,voice:t.voices[0]}),i+=15),o=o.concat(t.voices),r=Math.max(r,t.stave.getNoteStartX())}),this.parts.forEach(function(t){return t.stave.setNoteStartX(r)});var t=this.options.width-(r-this.options.x)-Zt.STAVEPADDING;n.format(o,t);for(var a=0;a<this.options.formatIterations;a++)n.tune();this.startX=r,this.debugNoteMetricsYs=s,this.lastY=i}},{key:"draw",value:function(){var n=this.checkContext();this.setRendered(),this.options.debugFormatter&&tr.plotDebugging(n,this.formatter,this.startX,this.options.y,this.lastY),this.debugNoteMetricsYs.forEach(function(e){e.voice.getTickables().forEach(function(t){return Zt.plotMetrics(n,t,e.y)})})}}]),Ju);function Ju(){var t,e,n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof Ju))throw new TypeError("Cannot call a class as a function")}(this),(e=this,t=!(n=Yu(Ju).call(this))||"object"!==Uu(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):n).setAttribute("type","System"),t.setOptions(i),t.parts=[],t}C.Flow=G,C.Flow.Element=x,C.Flow.Fraction=p,C.Flow.Renderer=et,C.Flow.Formatter=tr,C.Flow.Music=Xe,C.Flow.Glyph=D,C.Flow.Stave=Lo,C.Flow.StaveNote=Ne,C.Flow.StaveModifier=ar,C.Flow.StaveTempo=Nr,C.Flow.Voice=At,C.Flow.Accidental=nn,C.Flow.Beam=Pt,C.Flow.StaveTie=mn,C.Flow.TabStave=Fo,C.Flow.TabNote=Ho,C.Flow.Bend=Bi,C.Flow.Vibrato=Hi,C.Flow.VibratoBracket=Jo,C.Flow.Note=Zt,C.Flow.ModifierContext=Xi,C.Flow.MultiMeasureRest=es,C.Flow.TickContext=yi,C.Flow.Articulation=li,C.Flow.Annotation=Ri,C.Flow.Barline=dr,C.Flow.NoteHead=se,C.Flow.StaveConnector=Vt,C.Flow.ClefNote=ls,C.Flow.KeySignature=lo,C.Flow.KeySigNote=bs,C.Flow.TimeSignature=go,C.Flow.TimeSigNote=Ss,C.Flow.Stem=ut,C.Flow.TabTie=En,C.Flow.Clef=no,C.Flow.Dot=Pe,C.Flow.Modifier=ge,C.Flow.TabSlide=Os,C.Flow.Tuplet=bt,C.Flow.GraceNote=Bs,C.Flow.GraceTabNote=Ys,C.Flow.Tuning=qs,C.Flow.KeyManager=Qs,C.Flow.StaveHairpin=ra,C.Flow.BoundingBox=O,C.Flow.Stroke=Vn,C.Flow.TextNote=Wr,C.Flow.Curve=ha,C.Flow.TextDynamics=va,C.Flow.StaveLine=ka,C.Flow.Ornament=wi,C.Flow.PedalMarking=Na,C.Flow.TextBracket=Ua,C.Flow.FretHandFinger=We,C.Flow.Repetition=Sr,C.Flow.BarNote=Ja,C.Flow.GhostNote=nu,C.Flow.NoteSubGroup=fn,C.Flow.GraceNoteGroup=Cn,C.Flow.Tremolo=lu,C.Flow.StringNumber=Xn,C.Flow.Crescendo=du,C.Flow.Volta=Po,C.Flow.Font=M,C.Flow.System=qu,C.Flow.Factory=Gu,C.Flow.Parser=gu,C.Flow.EasyScore=Cu,C.Flow.Registry=g,e.default=C}],r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)).default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(10),i=(r.prototype.getValue=function(t){var e=this.table["$"+this.toStr(t)];if(!o.isUndefined(e))return e.value},r.prototype.setValue=function(t,e){if(!o.isUndefined(t)&&!o.isUndefined(e)){var n,i="$"+this.toStr(t),r=this.table[i];return n=o.isUndefined(r)?void this.nElements++:r.value,this.table[i]={key:t,value:e},n}},r.prototype.remove=function(t){var e="$"+this.toStr(t),n=this.table[e];if(!o.isUndefined(n))return delete this.table[e],this.nElements--,n.value},r.prototype.keys=function(){var t=[];for(var e in this.table)if(o.has(this.table,e)){var n=this.table[e];t.push(n.key)}return t},r.prototype.values=function(){var t=[];for(var e in this.table)if(o.has(this.table,e)){var n=this.table[e];t.push(n.value)}return t},r.prototype.forEach=function(t){for(var e in this.table)if(o.has(this.table,e)){var n=this.table[e];if(!1===t(n.key,n.value))return}},r.prototype.containsKey=function(t){return!o.isUndefined(this.getValue(t))},r.prototype.clear=function(){this.table={},this.nElements=0},r.prototype.size=function(){return this.nElements},r.prototype.isEmpty=function(){return this.nElements<=0},r.prototype.toString=function(){var n="{";return this.forEach(function(t,e){n+="\n\t"+t+" : "+e}),n+"\n}"},r);function r(t){this.table={},this.nElements=0,this.toStr=t||o.defaultToString}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),r=n(64),o=(s.prototype.ToString=function(){return this.text},s);function s(t,e,n){void 0===t&&(t=""),void 0===e&&(e=i.TextAlignmentEnum.CenterBottom),void 0===n&&(n=r.Fonts.TimesNewRoman),this.text=t,this.textAlignment=e,this.font=n}e.Label=o},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(63),a=n(2),u=n(2),l=(o=s.AbstractNotationInstruction,r(c,o),c.copy=function(t){return new c(t.parent,t.Key,t.Mode)},c.getNoteEnumList=function(t){var e=[];if(0<t.keyType)for(var n=0;n<t.keyType;n++)e.push(c.sharpPositionList[n]);if(t.keyType<0)for(n=0;n<Math.abs(t.keyType);n++)e.push(c.flatPositionList[n]);return e},c.getAllPossibleMajorKeyInstructions=function(){for(var t=[],e=-7;e<7;e++){var n=new c(void 0,e,h.major);t.push(n)}return t},Object.defineProperty(c.prototype,"Key",{get:function(){return this.keyType},set:function(t){this.keyType=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"Mode",{get:function(){return this.mode},set:function(t){this.mode=t},enumerable:!0,configurable:!0}),c.prototype.getFundamentalNotesOfAccidentals=function(){var t=[];if(0<this.keyType)for(var e=0;e<this.keyType;e++)t.push(c.sharpPositionList[e]);else if(this.keyType<0)for(e=0;e<-this.keyType;e++)t.push(c.flatPositionList[e]);return t},c.prototype.getAlterationForPitch=function(t){return 0<this.keyType&&c.sharpPositionList.indexOf(t.FundamentalNote)<=this.keyType?u.AccidentalEnum.SHARP:this.keyType<0&&c.flatPositionList.indexOf(t.FundamentalNote)<=Math.abs(this.keyType)?u.AccidentalEnum.FLAT:u.AccidentalEnum.NONE},c.prototype.ToString=function(){return"Key: "+this.keyType+this.mode},c.prototype.OperatorEquals=function(t){return this===t||void 0!==this&&void 0!==t&&this.Key===t.Key&&this.Mode===t.Mode},c.prototype.OperatorNotEqual=function(t){return!this.OperatorEquals(t)},c.sharpPositionList=[a.NoteEnum.F,a.NoteEnum.C,a.NoteEnum.G,a.NoteEnum.D,a.NoteEnum.A,a.NoteEnum.E,a.NoteEnum.B],c.flatPositionList=[a.NoteEnum.B,a.NoteEnum.E,a.NoteEnum.A,a.NoteEnum.D,a.NoteEnum.G,a.NoteEnum.C,a.NoteEnum.F],c);function c(t,e,n){void 0===t&&(t=void 0),void 0===e&&(e=0),void 0===n&&(n=h.major);var i=o.call(this,t)||this;return i.Key=e,i.mode=n,i}e.KeyInstruction=l;var h,f;e.NoteEnumToHalfToneLink=function(t,e){this.note=t,this.halfTone=e},(f=h=e.KeyEnum||(e.KeyEnum={}))[f.major=0]="major",f[f.minor=1]="minor",f[f.none=2]="none",f[f.dorian=3]="dorian",f[f.phrygian=4]="phrygian",f[f.lydian=5]="lydian",f[f.mixolydian=6]="mixolydian",f[f.aeolian=7]="aeolian",f[f.ionian=8]="ionian",f[f.locrian=9]="locrian"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,s,r,o,S=n(0),l=n(48),c=n(2),x=n(49),w=n(2),a=n(15),u=(Object.defineProperty(h.prototype,"ParentSourceStaffEntry",{get:function(){return this.parentSourceStaffEntry},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"ParentVoice",{get:function(){return this.parentVoice},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"Timestamp",{get:function(){return this.timestamp},set:function(t){this.timestamp=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"Notes",{get:function(){return this.notes},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"IsGrace",{get:function(){return this.isGrace},set:function(t){this.isGrace=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"GraceAfterMainNote",{get:function(){return this.graceAfterMainNote},set:function(t){this.graceAfterMainNote=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"GraceNoteSlash",{get:function(){return this.graceNoteSlash},set:function(t){this.graceNoteSlash=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"GraceSlur",{get:function(){return this.graceSlur},set:function(t){this.graceSlur=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"Articulations",{get:function(){return this.articulations},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"TechnicalInstructions",{get:function(){return this.technicalInstructions},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"LyricsEntries",{get:function(){return this.lyricsEntries},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"Arpeggio",{get:function(){return this.arpeggio},set:function(t){this.arpeggio=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"OrnamentContainer",{get:function(){return this.ornamentContainer},set:function(t){this.ornamentContainer=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"WantedStemDirection",{get:function(){return this.wantedStemDirection},set:function(t){this.wantedStemDirection=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"StemDirectionXml",{get:function(){return this.stemDirectionXml},set:function(t){this.stemDirectionXml=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"StemDirection",{get:function(){return this.stemDirection},set:function(t){this.stemDirection=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"StemColorXml",{get:function(){return this.stemColorXml},set:function(t){this.stemColorXml=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"StemColor",{get:function(){return this.stemColor},set:function(t){this.stemColor=t},enumerable:!0,configurable:!0}),h.isSupportedArticulation=function(t){switch(t){case i.accent:case i.strongaccent:case i.invertedstrongaccent:case i.staccato:case i.staccatissimo:case i.spiccato:case i.tenuto:case i.fermata:case i.invertedfermata:case i.breathmark:case i.caesura:case i.lefthandpizzicato:case i.naturalharmonic:case i.snappizzicato:case i.upbow:case i.downbow:return!0;default:return!1}},h.prototype.hasTie=function(){for(var t=0,e=this.Notes.length;t<e;++t)if(void 0!==this.Notes[t].NoteTie)return!0;return!1},h.prototype.hasSlur=function(){for(var t=0,e=this.Notes.length;t<e;++t)if(0<this.Notes[t].NoteSlurs.length)return!0;return!1},h.prototype.isStaccato=function(){for(var t=0,e=this.Articulations.length;t<e;++t)if(this.Articulations[t]===i.staccato)return!0;return!1},h.prototype.isAccent=function(){for(var t=0,e=this.Articulations.length;t<e;++t){var n=this.Articulations[t];if(n===i.accent||n===i.strongaccent)return!0}return!1},h.prototype.getVerseNumberForLyricEntry=function(n){var i=1;return this.lyricsEntries.forEach(function(t,e){n===e&&(i=t)}),i},h.prototype.createVoiceEntriesForOrnament=function(t,e){void 0===t&&(t=this);var n=[];if(void 0!==t.ornamentContainer){var i=this.notes[0],r=i.Length,o=t.ParentVoice,s=t.Timestamp,a=S.Fraction.createFromFraction(s);switch(t.ornamentContainer.GetOrnament){case x.OrnamentEnum.Trill:var u=new S.Fraction(r.Numerator,8*r.Denominator),l=i.Pitch.getTransposedPitch(1),c=e.getAlterationForPitch(l);t.OrnamentContainer.AccidentalAbove!==w.AccidentalEnum.NONE&&(c=t.ornamentContainer.AccidentalAbove);for(var h=0;h<8;h++)a=S.Fraction.plus(s,new S.Fraction(h*u.Numerator,u.Denominator)),h%2==0?this.createBaseVoiceEntry(a,u,o,i,n):this.createAlteratedVoiceEntry(a,u,o,l,c,n);break;case x.OrnamentEnum.Turn:var f=new S.Fraction(r.Numerator,4*r.Denominator),p=i.Pitch.getTransposedPitch(-1),d=e.getAlterationForPitch(p),b=(l=i.Pitch.getTransposedPitch(1),e.getAlterationForPitch(l));this.createAlteratedVoiceEntry(a,f,o,l,b,n),a.Add(f),this.createBaseVoiceEntry(a,f,o,i,n),a.Add(f),this.createAlteratedVoiceEntry(a,f,o,p,d,n),a.Add(f),this.createBaseVoiceEntry(a,f,o,i,n);break;case x.OrnamentEnum.InvertedTurn:var y=new S.Fraction(r.Numerator,4*r.Denominator);p=i.Pitch.getTransposedPitch(-1),d=e.getAlterationForPitch(p),l=i.Pitch.getTransposedPitch(1),b=e.getAlterationForPitch(l),this.createAlteratedVoiceEntry(a,y,o,p,d,n),a.Add(y),this.createBaseVoiceEntry(a,y,o,i,n),a.Add(y),this.createAlteratedVoiceEntry(a,y,o,l,b,n),a.Add(y),this.createBaseVoiceEntry(a,y,o,i,n);break;case x.OrnamentEnum.DelayedTurn:var m=new S.Fraction(r.Numerator,2*r.Denominator);p=i.Pitch.getTransposedPitch(-1),d=e.getAlterationForPitch(p),l=i.Pitch.getTransposedPitch(1),b=e.getAlterationForPitch(l),this.createBaseVoiceEntry(a,m,o,i,n),a=S.Fraction.plus(s,m),m.Denominator=8*r.Denominator,this.createAlteratedVoiceEntry(a,m,o,l,b,n),a.Add(m),this.createBaseVoiceEntry(a,m,o,i,n),a.Add(m),this.createAlteratedVoiceEntry(a,m,o,p,d,n),a.Add(m),this.createBaseVoiceEntry(a,m,o,i,n);break;case x.OrnamentEnum.DelayedInvertedTurn:var g=new S.Fraction(r.Numerator,2*r.Denominator);p=i.Pitch.getTransposedPitch(-1),d=e.getAlterationForPitch(p),l=i.Pitch.getTransposedPitch(1),b=e.getAlterationForPitch(l),this.createBaseVoiceEntry(a,g,o,i,n),a=S.Fraction.plus(s,g),g.Denominator=8*r.Denominator,this.createAlteratedVoiceEntry(a,g,o,p,d,n),a.Add(g),this.createBaseVoiceEntry(a,g,o,i,n),a.Add(g),this.createAlteratedVoiceEntry(a,g,o,l,b,n),a.Add(g),this.createBaseVoiceEntry(a,g,o,i,n);break;case x.OrnamentEnum.Mordent:var v=new S.Fraction(r.Numerator,4*r.Denominator);l=i.Pitch.getTransposedPitch(1),c=e.getAlterationForPitch(l),this.createBaseVoiceEntry(a,v,o,i,n),a.Add(v),this.createAlteratedVoiceEntry(a,v,o,l,c,n),v.Denominator=2*r.Denominator,a=S.Fraction.plus(s,v),this.createBaseVoiceEntry(a,v,o,i,n);break;case x.OrnamentEnum.InvertedMordent:var _=new S.Fraction(r.Numerator,4*r.Denominator);p=i.Pitch.getTransposedPitch(-1),c=e.getAlterationForPitch(p),this.createBaseVoiceEntry(a,_,o,i,n),a.Add(_),this.createAlteratedVoiceEntry(a,_,o,p,c,n),_.Denominator=2*r.Denominator,a=S.Fraction.plus(s,_),this.createBaseVoiceEntry(a,_,o,i,n);break;default:throw new RangeError}return n}},h.prototype.createBaseVoiceEntry=function(t,e,n,i,r){var o=new h(t,n,i.ParentStaffEntry),s=new c.Pitch(i.Pitch.FundamentalNote,i.Pitch.Octave,i.Pitch.Accidental),a=new l.Note(o,void 0,e,s);o.Notes.push(a),r.push(o)},h.prototype.createAlteratedVoiceEntry=function(t,e,n,i,r,o){var s=new h(t,n,void 0),a=new c.Pitch(i.FundamentalNote,i.Octave,r),u=new l.Note(s,void 0,e,a);s.Notes.push(u),o.push(s)},h);function h(t,e,n,i,r,o){void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===o&&(o=!1),this.notes=[],this.articulations=[],this.technicalInstructions=[],this.lyricsEntries=new a.default,this.wantedStemDirection=s.Undefined,this.stemDirectionXml=s.Undefined,this.stemDirection=s.Undefined,this.timestamp=t,this.parentVoice=e,this.parentSourceStaffEntry=n,this.isGrace=i,this.graceAfterMainNote=!1,this.graceNoteSlash=r,this.graceSlur=o}e.VoiceEntry=u,(o=i=e.ArticulationEnum||(e.ArticulationEnum={}))[o.accent=0]="accent",o[o.strongaccent=1]="strongaccent",o[o.invertedstrongaccent=2]="invertedstrongaccent",o[o.staccato=3]="staccato",o[o.staccatissimo=4]="staccatissimo",o[o.spiccato=5]="spiccato",o[o.tenuto=6]="tenuto",o[o.fermata=7]="fermata",o[o.invertedfermata=8]="invertedfermata",o[o.breathmark=9]="breathmark",o[o.caesura=10]="caesura",o[o.lefthandpizzicato=11]="lefthandpizzicato",o[o.naturalharmonic=12]="naturalharmonic",o[o.snappizzicato=13]="snappizzicato",o[o.upbow=14]="upbow",o[o.downbow=15]="downbow",o[o.scoop=16]="scoop",o[o.plop=17]="plop",o[o.doit=18]="doit",o[o.falloff=19]="falloff",o[o.stress=20]="stress",o[o.unstress=21]="unstress",o[o.detachedlegato=22]="detachedlegato",o[o.otherarticulation=23]="otherarticulation",(r=s=e.StemDirectionType||(e.StemDirectionType={}))[r.Undefined=-1]="Undefined",r[r.Up=0]="Up",r[r.Down=1]="Down",r[r.None=2]="None",r[r.Double=3]="Double"},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(61),S=n(4),N=n(0),I=n(48),F=n(11),B=n(33),D=n(18),x=n(94),M=n(6),j=n(35),b=n(24),_=n(9),V=n(17),c=n(43),r=n(5),G=n(96),u=n(97),W=n(11),U=n(1),f=n(15),a=n(21),y=n(16),H=n(65),Y=n(8),w=n(66),E=n(67),P=n(68),z=n(36),X=n(52),o=(Object.defineProperty(K,"TextMeasurer",{get:function(){return K.textMeasurer},set:function(t){K.textMeasurer=t},enumerable:!0,configurable:!0}),Object.defineProperty(K.prototype,"leadSheet",{get:function(){return this.graphicalMusicSheet.LeadSheet},enumerable:!0,configurable:!0}),K.setMeasuresMinStaffEntriesWidth=function(t,e){for(var n=0,i=t.length;n<i;++n)t[n].minimumStaffEntriesWidth=e},K.prototype.initialize=function(t){this.graphicalMusicSheet=t,this.rules=t.ParentMusicSheet.rules,this.prepareGraphicalMusicSheet()},K.prototype.prepareGraphicalMusicSheet=function(){var t=this.graphicalMusicSheet.ParentMusicSheet;this.staffEntriesWithGraphicalTies=[],this.staffEntriesWithOrnaments=[],this.staffEntriesWithChordSymbols=[],this.staffLinesWithLyricWords=[],this.graphicalMusicSheet.Initialize();for(var e=this.graphicalMusicSheet.MeasureList,n=this.createAccidentalCalculators(),i=this.graphicalMusicSheet.initializeActiveClefs(),r=[],o=t.getCompleteNumberOfStaves(),s=[],a=0;a<o;a++)s.push(void 0);for(var u=0,l=t.SourceMeasures.length;u<l;++u){var c=t.SourceMeasures[u],h=this.createGraphicalMeasuresForSourceMeasure(c,n,r,s,i);e.push(h)}this.handleStaffEntries(),this.calculateVerticalContainersList(),this.setIndicesToVerticalGraphicalContainers()},K.prototype.calculate=function(){this.clearSystemsAndMeasures(),this.clearRecreatedObjects(),this.createGraphicalTies(),this.calculateSheetLabelBoundingBoxes(),this.calculateXLayout(this.graphicalMusicSheet,this.maxInstrNameLabelLength()),this.graphicalMusicSheet.MusicPages.length=0,this.calculateMusicSystems(),this.graphicalMusicSheet.MusicPages[0].PositionAndShape.BorderMarginBottom+=9,i.GraphicalMusicSheet.transformRelativeToAbsolutePosition(this.graphicalMusicSheet)},K.prototype.calculateXLayout=function(t,e){var n=0,i=this.rules.MaxInstructionsConstValue;if(0<this.graphicalMusicSheet.MeasureList.length){var r=this.graphicalMusicSheet.MeasureList[0],o=this.calculateMeasureXLayout(r);o=this.calculateMeasureWidthFromLyrics(r,o),K.setMeasuresMinStaffEntriesWidth(r,o),n=1.2*o+e+i;for(var s=1;s<this.graphicalMusicSheet.MeasureList.length;s++)r=this.graphicalMusicSheet.MeasureList[s],o=this.calculateMeasureXLayout(r),o=this.calculateMeasureWidthFromLyrics(r,o),K.setMeasuresMinStaffEntriesWidth(r,o),n=Math.max(n,1.2*o+i)}this.graphicalMusicSheet.MinAllowedSystemWidth=n},K.prototype.calculateMeasureWidthFromLyrics=function(t,e){throw new Error("abstract, not implemented")},K.prototype.formatMeasures=function(){throw new Error("abstract, not implemented")},K.prototype.calculateMusicSystemsRelativePositions=function(t){var e=new M.PointF2D(this.rules.PageLeftMargin+this.rules.SystemLeftMargin,0);S.EngravingRules.Rules.CompactMode?e.y+=S.EngravingRules.Rules.PageTopMarginNarrow:e.y+=S.EngravingRules.Rules.PageTopMargin;var n=t.MusicSystems[0];t===t.Parent.MusicPages[0]?S.EngravingRules.Rules.RenderTitle&&(e.y+=this.rules.TitleTopDistance+this.rules.SheetTitleHeight+this.rules.TitleBottomDistance):S.EngravingRules.Rules.RenderTitle?e.y+=this.rules.PageTopMargin+this.rules.TitleTopDistance:e.y=this.rules.PageTopMargin,n.PositionAndShape.RelativePosition=e;for(var i=1;i<t.MusicSystems.length;i++){var r=t.MusicSystems[i];e=new M.PointF2D(this.rules.PageLeftMargin+this.rules.SystemLeftMargin,0);var o=t.MusicSystems[i-1],s=o.StaffLines[o.StaffLines.length-1],a=s.SkyBottomLineCalculator.getBottomLineMax()-this.rules.StaffHeight+Math.abs(r.StaffLines[0].SkyBottomLineCalculator.getSkyLineMin())+this.rules.MinimumAllowedDistanceBetweenSystems;e.y=o.PositionAndShape.RelativePosition.y+s.PositionAndShape.RelativePosition.y+this.rules.StaffHeight+Math.max(this.rules.SystemDistance,a),r.PositionAndShape.RelativePosition=e}},K.prototype.calculateMeasureXLayout=function(t){throw new Error("abstract, not implemented")},K.prototype.optimizeDistanceBetweenStaffLines=function(t){if(t.PositionAndShape.calculateAbsolutePositionsRecursive(0,0),!t.checkStaffEntriesForStaffEntryLink())for(var e=0;e<t.StaffLines.length-1;e++){var n=t.StaffLines[e].SkyBottomLineCalculator.getBottomLineMax();if(Math.abs(n)>this.rules.MinimumStaffLineDistance){var i=Math.abs(n)+this.rules.MinimumStaffLineDistance-this.rules.StaffHeight;this.updateStaffLinesRelativePosition(t,e+1,i)}}},K.prototype.updateStaffLinesRelativePosition=function(t,e,n){for(var i=e;i<t.StaffLines.length;i++)t.StaffLines[i].PositionAndShape.RelativePosition.y+=n;t.PositionAndShape.BorderBottom+=n},K.prototype.calculateSystemYLayout=function(){throw new Error("abstract, not implemented")},K.prototype.initGraphicalMeasuresCreation=function(){throw new Error("abstract, not implemented")},K.prototype.handleBeam=function(t,e,n){throw new Error("abstract, not implemented")},K.prototype.handleTiedGraphicalNote=function(t,e,n,i,r,o,s,a){throw new Error("abstract, not implemented")},K.prototype.handleVoiceEntryLyrics=function(t,e,n){throw new Error("abstract, not implemented")},K.prototype.handleVoiceEntryOrnaments=function(t,e,n){throw new Error("abstract, not implemented")},K.prototype.handleVoiceEntryArticulations=function(t,e,n){throw new Error("abstract, not implemented")},K.prototype.handleVoiceEntryTechnicalInstructions=function(t,e,n){throw new Error("abstract, not implemented")},K.prototype.handleTuplet=function(t,e,n){throw new Error("abstract, not implemented")},K.prototype.layoutVoiceEntry=function(t,e,n,i){throw new Error("abstract, not implemented")},K.prototype.layoutStaffEntry=function(t){throw new Error("abstract, not implemented")},K.prototype.createGraphicalTie=function(t,e,n,i,r){throw new Error("abstract, not implemented")},K.prototype.updateStaffLineBorders=function(t){throw new Error("abstract, not implemented")},K.prototype.calculateMeasureNumberPlacement=function(t){for(var e=t.StaffLines[0],n=e.Measures[0].MeasureNumber,i=0,r=e.Measures;i<r.length;i++){var o=r[i];0!==o.MeasureNumber&&1!==o.MeasureNumber||(n=o.MeasureNumber),o.MeasureNumber!==n&&o.MeasureNumber!==n+this.rules.MeasureNumberLabelOffset||o.parentSourceMeasure.ImplicitMeasure||((1!==o.MeasureNumber||1===o.MeasureNumber&&o!==e.Measures[0])&&this.calculateSingleMeasureNumberPlacement(o,e,t),n=o.MeasureNumber)}},K.prototype.calculateSingleMeasureNumberPlacement=function(t,e,n){var i=t.MeasureNumber.toString(),r=new b.GraphicalLabel(new y.Label(i),this.rules.MeasureNumberLabelHeight,_.TextAlignmentEnum.LeftBottom),o=e.SkyBottomLineCalculator;r.setLabelPositionAndShapeBorders(),r.PositionAndShape.Parent=n.PositionAndShape;var s,a=e.PositionAndShape.RelativePosition.x+t.PositionAndShape.RelativePosition.x-r.PositionAndShape.BorderMarginLeft,u=a,l=a-r.PositionAndShape.BorderLeft+r.PositionAndShape.BorderMarginRight;e===n.StaffLines[0]&&n===n.Parent.MusicSystems[0]&&(u-=e.PositionAndShape.RelativePosition.x,l-=e.PositionAndShape.RelativePosition.x);var c=o.getSkyLineMinInRange(u,l);if(t===e.Measures[0]){var h=0;if(0<n.GroupBrackets.length)for(var f=0,p=n.GroupBrackets;f<p.length;f++){var d=p[f];h=Math.min(h,d.PositionAndShape.BorderTop)}s=Math.min(c,h)}else s=c;s=Math.min(0,s),r.PositionAndShape.RelativePosition=new M.PointF2D(a,s),o.updateSkyLineInRange(u,l,s+r.PositionAndShape.BorderMarginTop),n.MeasureNumberLabels.push(r)},K.prototype.layoutGraphicalTie=function(t,e){throw new Error("abstract, not implemented")},K.prototype.calculateSingleStaffLineLyricsPosition=function(t,e){for(var n=0,i=this.rules.StaffHeight,r=[],o=t.SkyBottomLineCalculator,s=t.Measures.length,a=0;a<s;++a)for(var u=t.Measures[a],l=u.PositionAndShape.RelativePosition,c=u.staffEntries.length,h=0;h<c;++h)if(0<(S=u.staffEntries[h]).LyricsEntries.length){r.push(S),n=Math.max(n,S.LyricsEntries.length);for(var f=S.PositionAndShape.RelativePosition.x+l.x,p=Number.MAX_VALUE,d=Number.MIN_VALUE,b=0;b<S.LyricsEntries.length;b++){var y=S.LyricsEntries[b].GraphicalLabel;p=Math.min(p,f+y.PositionAndShape.BorderMarginLeft),d=Math.max(d,f+y.PositionAndShape.BorderMarginRight)}var m=o.getBottomLineMaxInRange(p,d);i=Math.max(i,m)}var g=0;s=r.length;for(var v=0,_=r;v<_.length;v++){var S=_[v];for(b=0;b<S.LyricsEntries.length;b++){var x=S.LyricsEntries[b],w=(y=x.GraphicalLabel,x.LyricsEntry.VerseNumber),E=e.indexOf(w),P=i+this.rules.LyricsHeight+this.rules.VerticalBetweenLyricsDistance+(this.rules.VerticalBetweenLyricsDistance+this.rules.LyricsHeight)*E;this.leadSheet&&(P=3.4+(this.rules.VerticalBetweenLyricsDistance+this.rules.LyricsHeight)*E);var T=y.PositionAndShape.RelativePosition.x;y.PositionAndShape.RelativePosition=new M.PointF2D(T,P),g=Math.max(g,P)}}if(0<r.length){var k=t.PositionAndShape.Size.width,O=r[0].PositionAndShape.RelativePosition.x+r[0].PositionAndShape.BorderMarginLeft+r[0].parentMeasure.PositionAndShape.RelativePosition.x;O=k<O?k:O,o.updateBottomLineInRange(O,k,g)}return r},K.prototype.calculateLyricsExtendsAndDashes=function(t){for(var e=0,n=t.length;e<n;++e)for(var i=t[e],r=0;r<i.LyricsEntries.length;r++){var o=i.LyricsEntries[r];void 0!==o.ParentLyricWord&&o.ParentLyricWord.GraphicalLyricsEntries[o.ParentLyricWord.GraphicalLyricsEntries.length-1]!==o&&this.calculateSingleLyricWord(o),o.LyricsEntry.extend&&this.calculateLyricExtend(o)}},K.prototype.calculateSingleOctaveShift=function(t,e,n,i){throw new Error("abstract, not implemented")},K.prototype.calculateWordRepetitionInstruction=function(t,e){throw new Error("abstract, not implemented")},K.prototype.calculateMoodAndUnknownExpression=function(t,e,n){throw new Error("abstract, not implemented")},K.prototype.clearRecreatedObjects=function(){for(var t=0,e=this.staffEntriesWithGraphicalTies.length;t<e;++t)this.staffEntriesWithGraphicalTies[t].GraphicalTies.length=0;this.staffEntriesWithGraphicalTies.length=0},K.prototype.handleStaffEntryLink=function(t,e){U.debug("handleStaffEntryLink not implemented")},K.prototype.calculateMusicSystems=function(){if(void 0!==this.graphicalMusicSheet.MeasureList){var t=this.graphicalMusicSheet.MeasureList;if(void 0!==t){S.EngravingRules.Rules.MinMeasureToDrawIndex>t.length-1&&(U.debug("minimum measure to draw index out of range. resetting min measure index to limit."),S.EngravingRules.Rules.MinMeasureToDrawIndex=t.length-1);for(var e=[],n=S.EngravingRules.Rules.MinMeasureToDrawIndex,i=t.length;n<i&&n<S.EngravingRules.Rules.MaxMeasureToDrawIndex;++n){for(var r=[],o=0,s=t[n].length;o<s;++o){var a=t[n][o];if(a.isVisible()&&(r.push(a),S.EngravingRules.Rules.ColoringEnabled))for(var u=0,l=a.staffEntries;u<l.length;u++)for(var c=0,h=l[u].graphicalVoiceEntries;c<h.length;c++)h[c].color()}e.push(r)}var f=0;for(n=0,i=e.length;n<i;++n){var p=e[n];f=Math.max(p.length,f);break}if(0!==f){var d=new x.MusicSystemBuilder;for(d.initialize(this.graphicalMusicSheet,e,f),d.buildMusicSystems(),this.formatMeasures(),this.checkMeasuresForWholeRestNotes(),this.leadSheet||(this.calculateBeams(),this.optimizeRestPlacement(),this.calculateStaffEntryArticulationMarks(),this.calculateTieCurves()),this.calculateSkyBottomLines(),this.calculateTupletNumbers(),n=0,i=this.graphicalMusicSheet.MusicPages.length;n<i;++n)for(o=0,s=(v=this.graphicalMusicSheet.MusicPages[n]).MusicSystems.length;o<s;++o){var b=v.MusicSystems[o];this.calculateMeasureNumberPlacement(b)}for(this.leadSheet||this.calculateSlurs(),this.leadSheet||this.calculateOrnaments(),this.calculateChordSymbols(),this.leadSheet||(this.calculateDynamicExpressions(),this.calculateMoodAndUnknownExpressions(),this.calculateExpressionAlignements(),this.calculateOctaveShifts(),this.calculateWordRepetitionInstructions()),this.calculateRepetitionEndings(),this.leadSheet||this.calculateTempoExpressions(),this.calculateLyricsPosition(),n=0,i=this.graphicalMusicSheet.MusicPages.length;n<i;++n)for(o=0,s=(v=this.graphicalMusicSheet.MusicPages[n]).MusicSystems.length;o<s;++o)for(var y=0,m=(b=v.MusicSystems[o]).StaffLines.length;y<m;++y){var g=b.StaffLines[y];this.updateStaffLineBorders(g)}for(this.calculateSystemYLayout(),this.calculateComments(),this.calculateMarkedAreas(),n=0,i=this.graphicalMusicSheet.MusicPages.length;n<i;++n){var v;for(o=0,s=(v=this.graphicalMusicSheet.MusicPages[n]).MusicSystems.length;o<s;++o)(b=v.MusicSystems[o]).setMusicSystemLabelsYPosition(),this.leadSheet?b===b.Parent.MusicSystems[0]&&b.createSystemLeftLine(this.rules.SystemThinLineWidth,this.rules.SystemLabelsRightMargin):(b.setYPositionsToVerticalLineObjectsAndCreateLines(this.rules),b.createSystemLeftLine(this.rules.SystemThinLineWidth,this.rules.SystemLabelsRightMargin),b.createInstrumentBrackets(this.graphicalMusicSheet.ParentMusicSheet.Instruments,this.rules.StaffHeight),b.createGroupBrackets(this.graphicalMusicSheet.ParentMusicSheet.InstrumentalGroups,this.rules.StaffHeight,0),b.alignBeginInstructions()),b.calculateBorders(this.rules);var _=v.MusicSystems[0].PositionAndShape.BorderTop;for(o=0,s=v.MusicSystems.length;o<s;++o)(b=v.MusicSystems[o]).PositionAndShape.RelativePosition=new M.PointF2D(b.PositionAndShape.RelativePosition.x,b.PositionAndShape.RelativePosition.y-_);for(o=0,s=v.MusicSystems.length;o<s;++o)for(y=0,m=(b=v.MusicSystems[o]).StaffLines.length;y<m;++y)(g=b.StaffLines[y]).addActivitySymbolClickArea();v===this.graphicalMusicSheet.MusicPages[0]&&this.calculatePageLabels(v),v.PositionAndShape.calculateTopBottomBorders()}}}}},K.prototype.calculateMarkedAreas=function(){},K.prototype.calculateComments=function(){},K.prototype.calculateChordSymbols=function(){for(var t=0,e=this.graphicalMusicSheet.MusicPages;t<e.length;t++)for(var n=0,i=e[t].MusicSystems;n<i.length;n++)for(var r=0,o=i[n].StaffLines;r<o.length;r++)for(var s=o[r],a=s.SkyBottomLineCalculator,u=0,l=s.Measures;u<l.length;u++)for(var c=0,h=l[u].staffEntries;c<h.length;c++){var f=h[c];if(f.graphicalChordContainer){var p=f.PositionAndShape,d=f.graphicalChordContainer.PositionAndShape,b=d.BorderMarginLeft+p.AbsolutePosition.x,y=d.BorderMarginRight+p.AbsolutePosition.x;a.updateSkyLineInRange(b,y,p.BorderMarginTop)}}},K.prototype.layoutMeasureWithWholeRest=function(t,e,n){},K.prototype.layoutBeams=function(t){},K.prototype.layoutArticulationMarks=function(t,e,n){},K.prototype.layoutOrnament=function(t,e,n){},K.prototype.calculateRestNotePlacementWithinGraphicalBeam=function(t,e,n,i,r){},K.prototype.calculateTupletNumbers=function(){},K.prototype.calculateSlurs=function(){},K.prototype.calculateDynamicExpressionsForMultiExpression=function(t,e,n){},K.prototype.calculateGraphicalVerbalContinuousDynamic=function(t,e){var n,i=t.Label,r=e.x+i.PositionAndShape.BorderMarginLeft,o=e.x+i.PositionAndShape.BorderMarginRight,s=t.ContinuousDynamic.Placement,a=t.ParentStaffLine.SkyBottomLineCalculator;s===Y.PlacementEnum.Below?(n=a.getBottomLineMaxInRange(r,o),i.PositionAndShape.RelativePosition=new M.PointF2D(e.x,n-i.PositionAndShape.BorderMarginTop)):(n=a.getSkyLineMinInRange(r,o),i.PositionAndShape.RelativePosition=new M.PointF2D(e.x,n-i.PositionAndShape.BorderMarginBottom))},K.prototype.calculateGraphicalContinuousDynamic=function(t,e){var n=t.ParentStaffLine.ParentStaff.idInMusicSheet,i=this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(t.ContinuousDynamic.EndMultiExpression.SourceMeasureParent,n);if(i){var r=(t.EndMeasure=i).ParentStaffLine,o=N.Fraction.createFromFraction(t.ContinuousDynamic.EndMultiExpression.AbsoluteTimestamp),s=this.getRelativePositionInStaffLineFromTimestamp(o,n,r,r.isPartOfMultiStaffInstrument(),0),a=t.ParentStaffLine,u=a.ParentMusicSystem,l=u.StaffLines.indexOf(a),c=a.SkyBottomLineCalculator,h=t.ContinuousDynamic.Placement,f=void 0,p=void 0!==r&&a===r;p&&s.x-e.x<this.rules.WedgeMinLength&&(s.x=e.x+this.rules.WedgeMinLength);var d=e.x,b=r.Measures[0].beginInstructionsWidth-this.rules.WedgeHorizontalMargin-2,y=0,m=0;p?y=s.x:(y=a.PositionAndShape.Size.width,m=s.x,(f=new X.GraphicalContinuousDynamicExpression(t.ContinuousDynamic,r)).IsSplittedPart=!0,t.IsSplittedPart=!0);var g=0,v=0;if(h===Y.PlacementEnum.Below){var _=0;if(l<u.StaffLines.length-1&&(_=l+1),l<_){var S=(P=u.StaffLines[_]).PositionAndShape.RelativePosition.y-a.PositionAndShape.RelativePosition.y-this.rules.StaffHeight;g=this.rules.StaffHeight+S/2}else g=this.rules.WedgePlacementBelowY;g-=this.rules.WedgeOpeningLength/2,p||(v=g);var x=c.getBottomLineMaxInRange(d,y);g<x&&(g=x);var w=!1;if(l<u.StaffLines.length-1){var E=a.findClosestStaffEntry(y);if((R=a.findClosestStaffEntry(d))&&E&&(R.parentVerticalContainer,w)){var P,T=(P=u.StaffLines[_]).SkyBottomLineCalculator.getSkyLineMinInRange(d,y);g=(A=(S=P.PositionAndShape.RelativePosition.y-a.PositionAndShape.RelativePosition.y)+T)-this.rules.WedgeOpeningLength>this.rules.StaffHeight?A-this.rules.WedgeVerticalMargin:this.rules.StaffHeight+this.rules.WedgeOpeningLength,t.NotToBeRemoved=!0}}p||((x=r.SkyBottomLineCalculator.getBottomLineMaxInRange(b,m))>v&&(v=x),v+=this.rules.WedgeOpeningLength/2,v+=this.rules.WedgeVerticalMargin),w||(g+=this.rules.WedgeOpeningLength/2,g+=this.rules.WedgeVerticalMargin)}else if(h===Y.PlacementEnum.Above){if(1===a.ParentStaff.ParentInstrument.Staves.length)g=this.rules.WedgePlacementAboveY;else{var k=0;0<l&&(k=l-1);var O=u.StaffLines[k];g=-(S=a.PositionAndShape.RelativePosition.y-O.PositionAndShape.RelativePosition.y-this.rules.StaffHeight)/2}g+=this.rules.WedgeOpeningLength/2,p||(v=g);var M=c.getSkyLineMinInRange(d,y);if(M<g&&(g=M),w=!1,1<a.ParentStaff.ParentInstrument.Staves.length&&0<l){var R=a.findClosestStaffEntry(d);if(E=a.findClosestStaffEntry(y),R&&E){R.parentVerticalContainer;var L=l-1;if(w){var A,C=u.StaffLines[L],I=C.SkyBottomLineCalculator.getBottomLineMaxInRange(d,y);g=((A=(S=a.PositionAndShape.RelativePosition.y-C.PositionAndShape.RelativePosition.y)-I)-this.rules.StaffHeight)/2+this.rules.StaffHeight}}}p||((M=r.SkyBottomLineCalculator.getSkyLineMinInRange(b,m))<v&&(v=M),v-=this.rules.WedgeOpeningLength/2),w||(g-=this.rules.WedgeOpeningLength/2,g-=this.rules.WedgeVerticalMargin),p||(v-=this.rules.WedgeVerticalMargin)}t.Lines.clear(),t.ContinuousDynamic.DynamicType===z.ContDynamicEnum.crescendo?p?(t.createCrescendoLines(d,y,g),t.calcPsi()):(t.createFirstHalfCrescendoLines(d,y,g),t.calcPsi(),f.createSecondHalfCrescendoLines(b,m,v),f.calcPsi()):t.ContinuousDynamic.DynamicType===z.ContDynamicEnum.diminuendo&&(p?(t.createDiminuendoLines(d,y,g),t.calcPsi()):(t.createFirstHalfDiminuendoLines(d,y,g),t.calcPsi(),f.createSecondHalfDiminuendoLines(b,m,v),f.calcPsi()))}else U.warn("Not working")},K.prototype.calculateGraphicalInstantaneousDynamicExpression=function(t,e){var n=t.ParentStaffLine,i=e.x+t.PositionAndShape.BorderMarginLeft,r=e.x+t.PositionAndShape.BorderMarginRight,o=n.SkyBottomLineCalculator,s=0;if(t.Placement===Y.PlacementEnum.Above){var a=o.getSkyLineMinInRange(i,r);if(n.isPartOfMultiStaffInstrument()&&n.ParentStaff!==n.ParentStaff.ParentInstrument.Staves[0]){var u=n.ParentMusicSystem.StaffLines[n.ParentMusicSystem.StaffLines.indexOf(n)-1];s=a>-(h=n.PositionAndShape.RelativePosition.y-u.PositionAndShape.RelativePosition.y-this.rules.StaffHeight)/2?-h/2:a-t.PositionAndShape.BorderMarginBottom}else s=a-t.PositionAndShape.BorderMarginBottom;t.PositionAndShape.RelativePosition=new M.PointF2D(e.x,s)}else if(t.Placement===Y.PlacementEnum.Below){var l=o.getBottomLineMaxInRange(i,r),c=n.ParentStaff.ParentInstrument.Staves[n.ParentStaff.ParentInstrument.Staves.length-1];if(n.isPartOfMultiStaffInstrument()&&n.ParentStaff!==c){var h=n.ParentMusicSystem.StaffLines[n.ParentMusicSystem.StaffLines.indexOf(n)+1].PositionAndShape.RelativePosition.y-n.PositionAndShape.RelativePosition.y-this.rules.StaffHeight;s=l+t.PositionAndShape.BorderMarginBottom<this.rules.StaffHeight+h/2?this.rules.StaffHeight+h/2:l-t.PositionAndShape.BorderMarginTop}else s=l-t.PositionAndShape.BorderMarginTop;t.PositionAndShape.RelativePosition=new M.PointF2D(e.x,s)}t.updateSkyBottomLine()},K.prototype.calcGraphicalRepetitionEndingsRecursively=function(t){},K.prototype.layoutSingleRepetitionEnding=function(t,e,n,i,r,o){},K.prototype.calculateLabel=function(t,e,n,i,r,o,s){void 0===s&&(s=_.TextAlignmentEnum.CenterBottom);var a=new y.Label(n,s);a.fontHeight=o;var u=new b.GraphicalLabel(a,o,a.textAlignment,t.PositionAndShape);u.Label.fontStyle=i,r===Y.PlacementEnum.Below&&(u.Label.textAlignment=_.TextAlignmentEnum.LeftTop),u.setLabelPositionAndShapeBorders(),u.PositionAndShape.BorderMarginBottom*=1.1,u.PositionAndShape.BorderMarginTop*=1.1,u.PositionAndShape.BorderMarginLeft*=1.1,u.PositionAndShape.BorderMarginRight*=1.1;var l,c=e.x+u.PositionAndShape.BorderMarginLeft,h=e.x+u.PositionAndShape.BorderMarginRight;h>t.PositionAndShape.Size.width&&(c=(h=t.PositionAndShape.Size.width-this.rules.MeasureRightMargin)-u.PositionAndShape.MarginSize.width,e.x=c-u.PositionAndShape.BorderMarginLeft);var f=t.SkyBottomLineCalculator;return l=r===Y.PlacementEnum.Below?f.getBottomLineMaxInRange(c,h):f.getSkyLineMinInRange(c,h),u.PositionAndShape.RelativePosition=new M.PointF2D(e.x,l),r===Y.PlacementEnum.Below?f.updateBottomLineInRange(c,h,u.PositionAndShape.BorderMarginBottom+l):f.updateSkyLineInRange(c,h,u.PositionAndShape.BorderMarginTop+l),u},K.prototype.calculateTempoExpressionsForMultiTempoExpression=function(t,e,n){var i=N.Fraction.plus(t.AbsoluteTimestamp,e.Timestamp),r=this.graphicalMusicSheet.MeasureList[n],o=new M.PointF2D;if(e.ContinuousTempo||e.InstantaneousTempo){if(0<S.EngravingRules.Rules.MinMeasureToDrawIndex)return;for(var s=r[0].ParentStaffLine,a=r[0].PositionAndShape.RelativePosition.x,u=0,l=0;l<r.length;l++)if(r[l].ParentStaffLine&&0!==r[l].ParentStaffLine.Measures.length&&0<r[l].ParentStaffLine.Measures.length){s=r[l].ParentStaffLine,a=r[l].PositionAndShape.RelativePosition.x,u=l;break}if(o=this.getRelativePositionInStaffLineFromTimestamp(i,u,s,s.isPartOfMultiStaffInstrument(),a),0<e.EntriesList.length&&e.EntriesList[0].Expression instanceof E.InstantaneousTempoExpression&&(e.EntriesList[0].Expression.Placement=Y.PlacementEnum.Above,0<s.Measures[0].staffEntries.length&&0===Math.abs(o.x-s.Measures[0].staffEntries[0].PositionAndShape.RelativePosition.x)&&s.ParentMusicSystem===s.ParentMusicSystem.Parent.MusicSystems[0])){var c=s.Measures[0].FirstInstructionStaffEntry;if(c){var h=c.GraphicalInstructions.last();o.x=h.PositionAndShape.RelativePosition.x}S.EngravingRules.Rules.CompactMode&&(o.x=s.PositionAndShape.RelativePosition.x+s.Measures[0].PositionAndShape.RelativePosition.x)}for(var f=0,p=e.EntriesList;f<p.length;f++){var d=p[f],b=_.TextAlignmentEnum.CenterBottom;S.EngravingRules.Rules.CompactMode&&(b=_.TextAlignmentEnum.LeftBottom);var y=this.calculateLabel(s,o,d.label,e.getFontstyleOfFirstEntry(),d.Expression.Placement,S.EngravingRules.Rules.UnknownTextHeight,b);if(d.Expression instanceof E.InstantaneousTempoExpression){for(var m=0,g=s.AbstractExpressions;m<g.length;m++){var v=g[m];v instanceof w.GraphicalInstantaneousTempoExpression&&(v.SourceExpression.Label,d.Expression.Label)}if(void 0===new w.GraphicalInstantaneousTempoExpression(d.Expression,y).ParentStaffLine&&U.warn("Adding staffline didn't work"),d.Expression.Enum===E.TempoEnum.metronomeMark){this.createMetronomeMark(d.Expression);continue}}else d.Expression,P.ContinuousTempoExpression}}},K.prototype.createMetronomeMark=function(t){throw new Error("abstract, not implemented")},K.prototype.graphicalMeasureCreatedCalculations=function(t){},K.prototype.clearSystemsAndMeasures=function(){for(var t=0,e=this.graphicalMusicSheet.MusicPages.length;t<e;++t){for(var n=this.graphicalMusicSheet.MusicPages[t],i=0,r=n.MusicSystems.length;i<r;++i){for(var o=n.MusicSystems[i],s=0,a=o.StaffLines.length;s<a;++s){for(var u=o.StaffLines[s],l=0,c=u.Measures.length;l<c;++l){var h,f=u.Measures[l];void 0!==f.FirstInstructionStaffEntry&&(-1<(h=f.PositionAndShape.ChildElements.indexOf(f.FirstInstructionStaffEntry.PositionAndShape))&&f.PositionAndShape.ChildElements.splice(h,1),f.FirstInstructionStaffEntry=void 0,f.beginInstructionsWidth=0),void 0!==f.LastInstructionStaffEntry&&(-1<(h=f.PositionAndShape.ChildElements.indexOf(f.LastInstructionStaffEntry.PositionAndShape))&&f.PositionAndShape.ChildElements.splice(h,1),f.LastInstructionStaffEntry=void 0,f.endInstructionsWidth=0)}u.Measures=[],u.PositionAndShape.ChildElements=[]}o.StaffLines.length=0,o.PositionAndShape.ChildElements=[]}n.MusicSystems=[],n.PositionAndShape.ChildElements=[]}this.graphicalMusicSheet.MusicPages=[]},K.prototype.handleVoiceEntry=function(t,e,n,i,r,o,s,a,u,l){void 0===u&&(u=void 0),void 0===l&&(l=void 0),t.StemDirectionXml!==D.StemDirectionType.Undefined&&S.EngravingRules.Rules.SetWantedStemDirectionByXml&&void 0!==t.StemDirectionXml?t.WantedStemDirection=t.StemDirectionXml:this.calculateStemDirectionFromVoices(t);var c=e.findOrCreateGraphicalVoiceEntry(t);c.octaveShiftValue=a;for(var h=0,f=t.Notes.length;h<f;++h){var p=t.Notes[h];if(void 0!==p&&!(void 0!==l&&void 0!==l.Link&&void 0!==u&&-1<u.indexOf(p))){var d=void 0;d=t.IsGrace?K.symbolFactory.createGraceNote(p,c,r,a):K.symbolFactory.createNote(p,c,r,a,void 0),void 0!==p.Pitch&&this.checkNoteForAccidental(d,n,r,a),this.resetYPositionForLeadSheet(d.PositionAndShape),e.addGraphicalNoteToListAtCorrectYPosition(c,d),d.PositionAndShape.calculateBoundingBox(),this.leadSheet||(void 0!==p.NoteBeam&&p.PrintObject&&this.handleBeam(d,p.NoteBeam,s),void 0!==p.NoteTuplet&&p.PrintObject&&this.handleTuplet(d,p.NoteTuplet,o))}}return 0<t.Articulations.length&&this.handleVoiceEntryArticulations(t.Articulations,t,e),0<t.TechnicalInstructions.length&&this.handleVoiceEntryTechnicalInstructions(t.TechnicalInstructions,t,e),0<t.LyricsEntries.size()&&this.handleVoiceEntryLyrics(t,e,i),void 0!==t.OrnamentContainer&&this.handleVoiceEntryOrnaments(t.OrnamentContainer,t,e),a},K.prototype.resetYPositionForLeadSheet=function(t){this.leadSheet&&(t.RelativePosition=new M.PointF2D(t.RelativePosition.x,0))},K.prototype.layoutVoiceEntries=function(t){if(t.PositionAndShape.RelativePosition=new M.PointF2D(0,0),!this.leadSheet)for(var e=0,n=t.graphicalVoiceEntries;e<n.length;e++){var i=n[e].notes;if(0!==i.length){var r=i[0].sourceNote.ParentVoiceEntry,o=void 0!==i[0].sourceNote.Pitch;this.layoutVoiceEntry(r,i,t,o)}}},K.prototype.maxInstrNameLabelLength=function(){for(var t=0,e=0,n=this.graphicalMusicSheet.ParentMusicSheet.Instruments;e<n.length;e++){var i=n[e];if(0<i.Voices.length&&i.Voices[0].Visible){var r=i.NameLabel;S.EngravingRules.Rules.RenderPartNames||(r=new y.Label("",r.textAlignment,r.font));var o=new b.GraphicalLabel(r,this.rules.InstrumentLabelTextHeight,_.TextAlignmentEnum.LeftCenter);o.setLabelPositionAndShapeBorders(),t=Math.max(t,o.PositionAndShape.MarginSize.width)}}return S.EngravingRules.Rules.RenderPartNames?t:0},K.prototype.calculateSheetLabelBoundingBoxes=function(){var t=this.graphicalMusicSheet.ParentMusicSheet,e=S.EngravingRules.Rules.DefaultColorTitle;if(void 0!==t.Title&&S.EngravingRules.Rules.RenderTitle){var n=new b.GraphicalLabel(t.Title,this.rules.SheetTitleHeight,_.TextAlignmentEnum.CenterBottom);n.Label.colorDefault=e,(this.graphicalMusicSheet.Title=n).setLabelPositionAndShapeBorders()}else S.EngravingRules.Rules.RenderTitle||(this.graphicalMusicSheet.Title=void 0);if(void 0!==t.Subtitle&&S.EngravingRules.Rules.RenderSubtitle){var i=new b.GraphicalLabel(t.Subtitle,this.rules.SheetSubtitleHeight,_.TextAlignmentEnum.CenterCenter);i.Label.colorDefault=e,(this.graphicalMusicSheet.Subtitle=i).setLabelPositionAndShapeBorders()}else S.EngravingRules.Rules.RenderSubtitle||(this.graphicalMusicSheet.Subtitle=void 0);if(void 0!==t.Composer&&S.EngravingRules.Rules.RenderComposer){var r=new b.GraphicalLabel(t.Composer,this.rules.SheetComposerHeight,_.TextAlignmentEnum.RightCenter);r.Label.colorDefault=e,(this.graphicalMusicSheet.Composer=r).setLabelPositionAndShapeBorders()}else S.EngravingRules.Rules.RenderComposer||(this.graphicalMusicSheet.Composer=void 0);if(void 0!==t.Lyricist&&S.EngravingRules.Rules.RenderLyricist){var o=new b.GraphicalLabel(t.Lyricist,this.rules.SheetAuthorHeight,_.TextAlignmentEnum.LeftCenter);o.Label.colorDefault=e,(this.graphicalMusicSheet.Lyricist=o).setLabelPositionAndShapeBorders()}else S.EngravingRules.Rules.RenderLyricist||(this.graphicalMusicSheet.Lyricist=void 0)},K.prototype.checkMeasuresForWholeRestNotes=function(){for(var t=0,e=this.graphicalMusicSheet.MusicPages.length;t<e;++t)for(var n=this.graphicalMusicSheet.MusicPages[t],i=0,r=n.MusicSystems.length;i<r;++i)for(var o=n.MusicSystems[i],s=0,a=o.StaffLines.length;s<a;++s)for(var u=o.StaffLines[s],l=0,c=u.Measures.length;l<c;++l){var h=u.Measures[l];if(1===h.staffEntries.length){var f=h.staffEntries[0];if(0<f.graphicalVoiceEntries.length&&1===f.graphicalVoiceEntries[0].notes.length){var p=f.graphicalVoiceEntries[0].notes[0];void 0===p.sourceNote.Pitch&&new N.Fraction(1,2).lt(p.sourceNote.Length)&&this.layoutMeasureWithWholeRest(p,f,h)}}}},K.prototype.optimizeRestNotePlacement=function(t,e){if(0!==t.graphicalVoiceEntries.length){var n=t.graphicalVoiceEntries[0].notes;if(0!==n.length){var i=n[0],r=void 0===i.sourceNote.Pitch;if(2===t.graphicalVoiceEntries.length){var o=!1,s=t.graphicalVoiceEntries[1].notes;0<s.length&&(o=void 0===s[0].sourceNote.Pitch),r&&o?this.calculateTwoRestNotesPlacementWithCollisionDetection(t):(r||o)&&this.calculateRestNotePlacementWithCollisionDetectionFromGraphicalNote(t)}else if(r&&t!==e.staffEntries[0]&&t!==e.staffEntries[e.staffEntries.length-1]){var a=e.staffEntries.indexOf(t),u=e.staffEntries[a-1],l=e.staffEntries[a+1];if(1===u.graphicalVoiceEntries.length){var c=u.graphicalVoiceEntries[0].notes[0];if(void 0!==c.sourceNote.NoteBeam&&1===l.graphicalVoiceEntries.length){var h=l.graphicalVoiceEntries[0].notes[0];void 0!==h.sourceNote.NoteBeam&&c.sourceNote.NoteBeam===h.sourceNote.NoteBeam&&(this.calculateRestNotePlacementWithinGraphicalBeam(t,i,c,l,h),t.PositionAndShape.calculateBoundingBox())}}}}}},K.prototype.getRelativePositionInStaffLineFromTimestamp=function(t,e,n,i,r){void 0===r&&(r=0);var o=new M.PointF2D,s=void 0,a=void 0,u=this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length,l=this.graphicalMusicSheet.GetInterpolatedIndexInVerticalContainers(t),c=Math.min(Math.floor(l),u-1),h=Math.min(Math.ceil(l),u-1);if(c<0||e<0)return o;if(s=this.getFirstLeftNotNullStaffEntryFromContainer(c,e,i),a=this.getFirstRightNotNullStaffEntryFromContainer(h,e,i),void 0!==s&&void 0!==a){var f=s.parentMeasure.PositionAndShape.RelativePosition.x;0<r&&(f=r);var p=s.PositionAndShape.RelativePosition.x+f,d=a.PositionAndShape.RelativePosition.x+a.parentMeasure.PositionAndShape.RelativePosition.x;0<r&&(d=a.PositionAndShape.RelativePosition.x+f);var b=0;if(s!==a){var y=s.getAbsoluteTimestamp(),m=a.getAbsoluteTimestamp();b=N.Fraction.minus(t,y).RealValue/N.Fraction.minus(m,y).RealValue}s.parentMeasure.ParentStaffLine!==a.parentMeasure.ParentStaffLine&&(s.parentMeasure.ParentStaffLine===n?d=n.PositionAndShape.Size.width:p=n.PositionAndShape.RelativePosition.x),o=new M.PointF2D(p+(d-p)*b,0)}return o},K.prototype.getRelativeXPositionFromTimestamp=function(t){var e=this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length,n=this.graphicalMusicSheet.GetInterpolatedIndexInVerticalContainers(t),i=Math.max(0,Math.min(Math.round(n),e-1)),r=this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[i].getFirstNonNullStaffEntry();return r.PositionAndShape.RelativePosition.x+r.parentMeasure.PositionAndShape.RelativePosition.x},K.prototype.calculatePageLabels=function(t){var e=10;if(0<t.MusicSystems.length){var n=t.MusicSystems[0];e=n.PositionAndShape.RelativePosition.y+n.PositionAndShape.BorderTop}if(void 0!==this.graphicalMusicSheet.Title){var i=this.graphicalMusicSheet.Title;i.PositionAndShape.Parent=t.PositionAndShape,(s=new M.PointF2D).x=this.graphicalMusicSheet.ParentMusicSheet.pageWidth/2,s.y=this.rules.TitleTopDistance+this.rules.SheetTitleHeight,i.PositionAndShape.RelativePosition=s,t.Labels.push(i)}if(void 0!==this.graphicalMusicSheet.Subtitle){var r=this.graphicalMusicSheet.Subtitle;r.PositionAndShape.Parent=t.PositionAndShape,(s=new M.PointF2D).x=this.graphicalMusicSheet.ParentMusicSheet.pageWidth/2,s.y=this.rules.TitleTopDistance+this.rules.SheetTitleHeight+this.rules.SheetMinimumDistanceBetweenTitleAndSubtitle,r.PositionAndShape.RelativePosition=s,t.Labels.push(r)}if(void 0!==this.graphicalMusicSheet.Composer){var o=this.graphicalMusicSheet.Composer;o.PositionAndShape.Parent=t.PositionAndShape,o.setLabelPositionAndShapeBorders(),(s=new M.PointF2D).x=this.graphicalMusicSheet.ParentMusicSheet.pageWidth-this.rules.PageRightMargin,s.y=e-this.rules.SystemComposerDistance,o.PositionAndShape.RelativePosition=s,t.Labels.push(o)}if(void 0!==this.graphicalMusicSheet.Lyricist){var s,a=this.graphicalMusicSheet.Lyricist;a.PositionAndShape.Parent=t.PositionAndShape,a.setLabelPositionAndShapeBorders(),(s=new M.PointF2D).x=this.rules.PageLeftMargin,s.y=e-this.rules.SystemComposerDistance,a.PositionAndShape.RelativePosition=s,t.Labels.push(a)}},K.prototype.createGraphicalTies=function(){for(var t=0;t<this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length;t++)for(var e=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[t],n=0;n<e.CompleteNumberOfStaves;n++)for(var i=0;i<e.VerticalSourceStaffEntryContainers.length;i++){var r=e.VerticalSourceStaffEntryContainers[i].StaffEntries[n];if(void 0!==r)for(var o=this.graphicalMusicSheet.findGraphicalStaffEntryFromMeasureList(n,t,r),s=0,a=r.VoiceEntries.length;s<a;++s)for(var u=r.VoiceEntries[s],l=0,c=u.Notes.length;l<c;++l){var h=u.Notes[l];if(void 0!==h.NoteTie){var f=h.NoteTie;this.handleTie(f,o,n,t)}}}},K.prototype.handleTie=function(t,e,n,i){for(var r=e,o=r.findEndTieGraphicalNoteFromNote(t.StartNote),s=void 0,a=void 0,u=1;u<t.Notes.length;u++)if(o=r.findEndTieGraphicalNoteFromNote(t.Notes[u-1]),s=this.graphicalMusicSheet.GetGraphicalFromSourceStaffEntry(t.Notes[u].ParentStaffEntry)){if(a=s.findEndTieGraphicalNoteFromNote(t.Notes[u]),void 0!==o&&void 0!==a&&void 0!==s){if(!o.sourceNote.PrintObject||!a.sourceNote.PrintObject)continue;var l=this.createGraphicalTie(t,r,s,o,a);r.GraphicalTies.push(l),0<=this.staffEntriesWithGraphicalTies.indexOf(r)&&this.staffEntriesWithGraphicalTies.push(r)}r=s}},K.prototype.createAccidentalCalculators=function(){var t=[],e=this.graphicalMusicSheet.ParentMusicSheet.getFirstSourceMeasure();if(void 0!==e)for(var n=0;n<e.CompleteNumberOfStaves;n++){var i=new u.AccidentalCalculator;if(t.push(i),void 0!==e.FirstInstructionsStaffEntries[n])for(var r=0,o=e.FirstInstructionsStaffEntries[n].Instructions.length;r<o;++r){var s=e.FirstInstructionsStaffEntries[n].Instructions[r];if(s instanceof V.KeyInstruction){var a=s;i.ActiveKeyInstruction=a}}}return t},K.prototype.calculateVerticalContainersList=function(){for(var t=this.graphicalMusicSheet.MeasureList[0].length,e=0;e<this.graphicalMusicSheet.MeasureList.length;e++)for(var n=0;n<t;n++)for(var i=this.graphicalMusicSheet.MeasureList[e][n],r=0,o=i.staffEntries.length;r<o;++r){var s=i.staffEntries[r],a=this.graphicalMusicSheet.getOrCreateVerticalContainer(s.getAbsoluteTimestamp());void 0!==a&&((a.StaffEntries[n]=s).parentVerticalContainer=a)}},K.prototype.setIndicesToVerticalGraphicalContainers=function(){for(var t=0;t<this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length;t++)this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[t].Index=t},K.prototype.createGraphicalMeasuresForSourceMeasure=function(t,e,n,i,r){this.initGraphicalMeasuresCreation();for(var o=[],s=[],a=[],u=[],l=0;l<t.CompleteNumberOfStaves;l++){var c=this.createGraphicalMeasure(t,a,s,e[l],r,i,n,l,u);this.graphicalMeasureCreatedCalculations(c),o.push(c)}return t.VerticalMeasureList=o},K.prototype.createGraphicalMeasure=function(t,e,n,i,r,o,s,a,u){var l=this.graphicalMusicSheet.ParentMusicSheet.getStaffFromIndex(a),c=K.symbolFactory.createGraphicalMeasure(t,l);if(c.hasError=t.getErrorInMeasure(a),void 0!==t.FirstInstructionsStaffEntries[a])for(var h=0,f=t.FirstInstructionsStaffEntries[a].Instructions.length;h<f;++h){var p=t.FirstInstructionsStaffEntries[a].Instructions[h];if(p instanceof V.KeyInstruction){var d=V.KeyInstruction.copy(p);0!==this.graphicalMusicSheet.ParentMusicSheet.Transpose&&c.ParentStaff.ParentInstrument.MidiInstrumentId!==W.MidiInstrument.Percussion&&void 0!==K.transposeCalculator&&K.transposeCalculator.transposeKey(d,this.graphicalMusicSheet.ParentMusicSheet.Transpose),i.ActiveKeyInstruction=d}}for(h=0,f=t.StaffLinkedExpressions[a].length;h<f;++h)if(void 0!==(P=t.StaffLinkedExpressions[a][h]).OctaveShiftStart){var b=P.OctaveShiftStart;o[a]=new G.OctaveShiftParams(b,P.AbsoluteTimestamp,b.ParentEndMultiExpression.AbsoluteTimestamp)}for(var y=0;y<t.VerticalSourceStaffEntryContainers.length;y++)if(void 0!==(R=t.VerticalSourceStaffEntryContainers[y].StaffEntries[a])){for(h=0,f=R.Instructions.length;h<f;++h)(E=R.Instructions[h])instanceof F.ClefInstruction&&(r[a]=E);var m=K.symbolFactory.createStaffEntry(R,c);c.staffEntries.length>y?c.addGraphicalStaffEntryAtTimestamp(m):c.addGraphicalStaffEntry(m);var g=[];void 0!==R.Link&&(R.findLinkedNotes(g),this.handleStaffEntryLink(m,u));var v=B.OctaveEnum.NONE;if(void 0!==o[a]){var _=o[a];_.getAbsoluteStartTimestamp.lte(R.AbsoluteTimestamp)&&R.AbsoluteTimestamp.lte(_.getAbsoluteEndTimestamp)&&(v=_.getOpenOctaveShift.Type)}for(h=0,f=R.VoiceEntries.length;h<f;++h){var S=R.VoiceEntries[h];v=this.handleVoiceEntry(S,m,i,s,r[a],e,n,v,g,R)}if(0<R.Instructions.length){var x=R.Instructions[0];K.symbolFactory.createInStaffClef(m,x)}void 0!==R.ChordContainer&&(R.ParentStaff.ParentInstrument.HasChordSymbols=!0,K.symbolFactory.createChordSymbol(R,m,this.graphicalMusicSheet.ParentMusicSheet.Transpose))}if(i.doCalculationsAtEndOfMeasure(),void 0!==t.LastInstructionsStaffEntries[a]){var w=t.LastInstructionsStaffEntries[a];for(h=0,f=w.Instructions.length;h<f;++h){var E;(E=w.Instructions[h])instanceof F.ClefInstruction&&(r[a]=E)}}for(h=0,f=t.StaffLinkedExpressions[a].length;h<f;++h){var P;void 0!==(P=t.StaffLinkedExpressions[a][h]).OctaveShiftEnd&&void 0!==o[a]&&P.OctaveShiftEnd===o[a].getOpenOctaveShift&&(o[a]=void 0)}for(var T=0,k=c.staffEntries;T<k.length;T++)for(var O=0,M=k[T].graphicalVoiceEntries;O<M.length;O++)S=M[O],this.setBeamNotesWantedStemDirections(S.parentVoiceEntry);if(0===c.staffEntries.length){var R=new j.SourceStaffEntry(new H.VerticalSourceStaffEntryContainer(c.parentSourceMeasure,c.parentSourceMeasure.AbsoluteTimestamp,c.parentSourceMeasure.CompleteNumberOfStaves),l),L=(S=new D.VoiceEntry(new N.Fraction(0,1),l.Voices[0],R),new I.Note(S,R,N.Fraction.createFromFraction(t.Duration),void 0));S.Notes.push(L),m=K.symbolFactory.createStaffEntry(R,c),c.addGraphicalStaffEntry(m),m.relInMeasureTimestamp=S.Timestamp;var A=K.symbolFactory.createVoiceEntry(S,m);m.graphicalVoiceEntries.push(A);var C=K.symbolFactory.createNote(L,A,new F.ClefInstruction,B.OctaveEnum.NONE,void 0);A.notes.push(C)}return c},K.prototype.checkNoteForAccidental=function(t,e,n,i){var r=t.sourceNote.Pitch,o=this.graphicalMusicSheet.ParentMusicSheet.Transpose;0!==o&&t.sourceNote.ParentStaffEntry.ParentStaff.ParentInstrument.MidiInstrumentId!==W.MidiInstrument.Percussion&&(r=t.Transpose(e.ActiveKeyInstruction,n,o,i)),t.sourceNote.halfTone=r.getHalfTone(),e.checkAccidental(t,r)},K.prototype.handleStaffEntries=function(){for(var t=0,e=this.graphicalMusicSheet.MeasureList.length;t<e;++t)for(var n=this.graphicalMusicSheet.MeasureList[t],i=0,r=n.length;i<r;++i)for(var o=0,s=n[i].staffEntries;o<s.length;o++){var a=s[o];void 0!==a.parentMeasure&&0<a.graphicalVoiceEntries.length&&0<a.graphicalVoiceEntries[0].notes.length&&(this.layoutVoiceEntries(a),this.layoutStaffEntry(a))}},K.prototype.calculateSkyBottomLines=function(){for(var t=0,e=this.graphicalMusicSheet.MusicPages;t<e.length;t++)for(var n=0,i=e[t].MusicSystems;n<i.length;n++)for(var r=0,o=i[n].StaffLines;r<o.length;r++)o[r].SkyBottomLineCalculator.calculateLines()},K.prototype.calculateExpressionAlignements=function(){for(var t=0,e=this.graphicalMusicSheet.MusicPages;t<e.length;t++)for(var n=0,i=e[t].MusicSystems;n<i.length;n++)for(var r=0,o=i[n].StaffLines;r<o.length;r++){var s=o[r];s.AlignmentManager.alignDynamicExpressions(),s.AbstractExpressions.forEach(function(t){return t.updateSkyBottomLine()})}},K.prototype.calculateBeams=function(){for(var t=0,e=this.graphicalMusicSheet.MusicPages.length;t<e;++t)for(var n=this.graphicalMusicSheet.MusicPages[t],i=0,r=n.MusicSystems.length;i<r;++i)for(var o=n.MusicSystems[i],s=0,a=o.StaffLines.length;s<a;++s)for(var u=o.StaffLines[s],l=0,c=u.Measures.length;l<c;++l)for(var h=u.Measures[l],f=0,p=h.staffEntries.length;f<p;++f){var d=h.staffEntries[f];this.layoutBeams(d)}},K.prototype.calculateStaffEntryArticulationMarks=function(){for(var t=0,e=this.graphicalMusicSheet.MusicPages.length;t<e;++t)for(var n=this.graphicalMusicSheet.MusicPages[t],i=0,r=n.MusicSystems.length;i<r;++i)for(var o=n.MusicSystems[i],s=0,a=o.StaffLines.length;s<a;++s)for(var u=o.StaffLines[s],l=0,c=u.Measures.length;l<c;++l)for(var h=u.Measures[l],f=0,p=h.staffEntries.length;f<p;++f)for(var d=h.staffEntries[f],b=0,y=d.sourceStaffEntry.VoiceEntries.length;b<y;++b){var m=d.sourceStaffEntry.VoiceEntries[b];0<m.Articulations.length&&this.layoutArticulationMarks(m.Articulations,m,d)}},K.prototype.calculateOrnaments=function(){for(var t=0,e=this.graphicalMusicSheet.MusicPages.length;t<e;++t)for(var n=this.graphicalMusicSheet.MusicPages[t],i=0,r=n.MusicSystems.length;i<r;++i)for(var o=n.MusicSystems[i],s=0,a=o.StaffLines.length;s<a;++s)for(var u=o.StaffLines[s],l=0,c=u.Measures.length;l<c;++l)for(var h=u.Measures[l],f=0,p=h.staffEntries.length;f<p;++f)for(var d=h.staffEntries[f],b=0,y=d.sourceStaffEntry.VoiceEntries.length;b<y;++b){var m=d.sourceStaffEntry.VoiceEntries[b];if(void 0!==m.OrnamentContainer){if(m.hasTie()&&!d.relInMeasureTimestamp.Equals(m.Timestamp))continue;this.layoutOrnament(m.OrnamentContainer,m,d),-1===this.staffEntriesWithOrnaments.indexOf(d)&&this.staffEntriesWithOrnaments.push(d)}}},K.prototype.optimizeRestPlacement=function(){for(var t=0,e=this.graphicalMusicSheet.MusicPages.length;t<e;++t)for(var n=this.graphicalMusicSheet.MusicPages[t],i=0,r=n.MusicSystems.length;i<r;++i)for(var o=n.MusicSystems[i],s=0,a=o.StaffLines.length;s<a;++s)for(var u=o.StaffLines[s],l=0,c=u.Measures.length;l<c;++l)for(var h=u.Measures[l],f=0,p=h.staffEntries.length;f<p;++f){var d=h.staffEntries[f];this.optimizeRestNotePlacement(d,h)}},K.prototype.calculateTwoRestNotesPlacementWithCollisionDetection=function(t){var e=t.graphicalVoiceEntries[0].notes[0],n=t.graphicalVoiceEntries[1].notes[0];n.PositionAndShape.RelativePosition=new M.PointF2D(0,2.5),t.PositionAndShape.calculateAbsolutePositionsRecursiveWithoutTopelement(),e.PositionAndShape.computeNonOverlappingPositionWithMargin(t.PositionAndShape,r.ColDirEnum.Up,new M.PointF2D(0,n.PositionAndShape.RelativePosition.y));var i=e.PositionAndShape.RelativePosition;i.y-=1,e.PositionAndShape.RelativePosition=i,t.PositionAndShape.calculateBoundingBox()},K.prototype.calculateRestNotePlacementWithCollisionDetectionFromGraphicalNote=function(t){var e,n;void 0===t.graphicalVoiceEntries[0].notes[0].sourceNote.Pitch?(e=t.graphicalVoiceEntries[0].notes[0],n=t.graphicalVoiceEntries[1].notes):(n=t.graphicalVoiceEntries[0].notes,e=t.graphicalVoiceEntries[1].notes[0]);var i=!1;t.PositionAndShape.calculateAbsolutePositionsRecursiveWithoutTopelement();for(var r=0,o=n.length;r<o;++r){var s=n[r];if(e.PositionAndShape.marginCollisionDetection(s.PositionAndShape)){i=!0;break}}if(i)if(e.sourceNote.ParentVoiceEntry.ParentVoice instanceof c.LinkedVoice){var a=n[0].PositionAndShape.BorderMarginBottom+n[0].PositionAndShape.RelativePosition.y;e.PositionAndShape.RelativePosition=new M.PointF2D(0,a-e.PositionAndShape.BorderMarginTop+.5)}else{var u=n[n.length-1],l=u.PositionAndShape.BorderMarginTop+u.PositionAndShape.RelativePosition.y;n[0].sourceNote.ParentVoiceEntry.ParentVoice instanceof c.LinkedVoice?e.PositionAndShape.RelativePosition=new M.PointF2D(0,l-e.PositionAndShape.BorderMarginBottom-.5):(a=n[0].PositionAndShape.BorderMarginBottom+n[0].PositionAndShape.RelativePosition.y,e.PositionAndShape.RelativePosition=a<2?new M.PointF2D(0,a-e.PositionAndShape.BorderMarginTop+.5):new M.PointF2D(0,l-e.PositionAndShape.BorderMarginBottom-0))}t.PositionAndShape.calculateBoundingBox()},K.prototype.calculateTieCurves=function(){for(var t=0,e=this.graphicalMusicSheet.MusicPages.length;t<e;++t)for(var n=this.graphicalMusicSheet.MusicPages[t],i=0,r=n.MusicSystems.length;i<r;++i)for(var o=n.MusicSystems[i],s=0,a=o.StaffLines.length;s<a;++s)for(var u=o.StaffLines[s],l=0,c=u.Measures.length;l<c;++l)for(var h=u.Measures[l],f=0,p=h.staffEntries.length;f<p;++f)for(var d=h.staffEntries[f],b=d.GraphicalTies,y=0,m=b.length;y<m;++y){var g=b[y];if(void 0!==g.StartNote&&g.StartNote.parentVoiceEntry.parentStaffEntry===d){var v=g.StartNote.parentVoiceEntry.parentStaffEntry.parentMeasure.ParentStaffLine!==g.EndNote.parentVoiceEntry.parentStaffEntry.parentMeasure.ParentStaffLine;this.layoutGraphicalTie(g,v)}}},K.prototype.calculateLyricsPosition=function(){for(var t=new f.default,e=0,n=this.graphicalMusicSheet.ParentMusicSheet.Instruments.length;e<n;++e){var i=this.graphicalMusicSheet.ParentMusicSheet.Instruments[e];i.HasLyrics&&0<i.LyricVersesNumbers.length&&i.LyricVersesNumbers.sort()}for(e=0,n=this.graphicalMusicSheet.MusicPages.length;e<n;++e)for(var r=0,o=(c=this.graphicalMusicSheet.MusicPages[e]).MusicSystems.length;r<o;++r)for(var s=0,a=(h=c.MusicSystems[r]).StaffLines.length;s<a;++s){var u=h.StaffLines[s],l=this.calculateSingleStaffLineLyricsPosition(u,u.ParentStaff.ParentInstrument.LyricVersesNumbers);t.setValue(u,l),this.calculateLyricsExtendsAndDashes(t.getValue(u))}for(e=0,n=this.graphicalMusicSheet.MusicPages.length;e<n;++e){var c;for(r=0,o=(c=this.graphicalMusicSheet.MusicPages[e]).MusicSystems.length;r<o;++r){var h;for(s=0,a=(h=c.MusicSystems[r]).StaffLines.length;s<a;++s)u=h.StaffLines[s],this.calculateLyricsExtendsAndDashes(t.getValue(u))}}},K.prototype.calculateSingleLyricWord=function(t){var e=t.ParentLyricWord,n=e.GraphicalLyricsEntries.indexOf(t),i=void 0;if(0<=n&&(i=e.GraphicalLyricsEntries[n+1]),void 0!==i){var r=t.StaffEntryParent.parentMeasure.ParentStaffLine,o=i.StaffEntryParent.parentMeasure.ParentStaffLine,s=t.StaffEntryParent,a=i.StaffEntryParent;if(t.StaffEntryParent.parentMeasure.ParentStaffLine===i.StaffEntryParent.parentMeasure.ParentStaffLine){var u=s.parentMeasure.PositionAndShape.RelativePosition.x+s.PositionAndShape.RelativePosition.x+t.GraphicalLabel.PositionAndShape.RelativePosition.x+t.GraphicalLabel.PositionAndShape.BorderMarginRight,l=a.parentMeasure.PositionAndShape.RelativePosition.x+a.PositionAndShape.RelativePosition.x+t.GraphicalLabel.PositionAndShape.RelativePosition.x+i.GraphicalLabel.PositionAndShape.BorderMarginLeft,c=t.GraphicalLabel.PositionAndShape.RelativePosition.y,h=1;l-u>3*this.rules.MinimumDistanceBetweenDashes&&(h=Math.floor((l-u)/this.rules.MinimumDistanceBetweenDashes)-1),1===h?this.calculateSingleDashForLyricWord(r,u,l,c):this.calculateDashes(r,u,l,c)}else{u=s.parentMeasure.PositionAndShape.RelativePosition.x+s.PositionAndShape.RelativePosition.x+t.GraphicalLabel.PositionAndShape.BorderMarginRight;var f=r.Measures[r.Measures.length-1];if(l=f.PositionAndShape.RelativePosition.x+f.PositionAndShape.Size.width,c=t.GraphicalLabel.PositionAndShape.RelativePosition.y,this.calculateDashes(r,u,l,c),o&&a.parentMeasure.ParentStaffLine&&(a!==a.parentMeasure.staffEntries[0]||a.parentMeasure!==a.parentMeasure.ParentStaffLine.Measures[0])){var p=o.Measures[0].staffEntries[0].PositionAndShape.RelativePosition.x,d=a.parentMeasure.PositionAndShape.RelativePosition.x+a.PositionAndShape.RelativePosition.x+i.GraphicalLabel.PositionAndShape.BorderMarginLeft;c=i.GraphicalLabel.PositionAndShape.RelativePosition.y,this.calculateDashes(o,p,d,c)}}}},K.prototype.calculateDashes=function(t,e,n,i){var r=n-e;if(r<3*this.rules.MinimumDistanceBetweenDashes)this.calculateSingleDashForLyricWord(t,e,n,i);else{var o=Math.floor(r/this.rules.MinimumDistanceBetweenDashes)-1,s=r/(1+o),a=0;for(e+=s,n-=s;a<=Math.floor(o/2)&&e<n;)r=this.calculateRightAndLeftDashesForLyricWord(t,e,n,i),e+=s,n-=s,a++;2*s<r&&this.calculateSingleDashForLyricWord(t,e,n,i)}},K.prototype.calculateSingleDashForLyricWord=function(t,e,n,i){var r=new b.GraphicalLabel(new y.Label("-"),this.rules.LyricsHeight,_.TextAlignmentEnum.CenterBottom);r.setLabelPositionAndShapeBorders(),t.LyricsDashes.push(r),-1===this.staffLinesWithLyricWords.indexOf(t)&&this.staffLinesWithLyricWords.push(t),r.PositionAndShape.Parent=t.PositionAndShape;var o=new M.PointF2D(e+(n-e)/2,i);r.PositionAndShape.RelativePosition=o},K.prototype.calculateLyricExtend=function(t){for(var e=t.GraphicalLabel.PositionAndShape.RelativePosition.y,n=t.StaffEntryParent,i=n.parentMeasure.ParentStaffLine,r=void 0,o=void 0,s=n.parentMeasure.ParentStaff.idInMusicSheet,a=n.parentVerticalContainer.Index+1;a<this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length;++a){var u=this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[a].StaffEntries[s];if(void 0!==u){if(u.hasOnlyRests())break;if(0<u.LyricsEntries.length)break;o=(r=u).parentMeasure.ParentStaffLine}}if(void 0!==r)if(i===o){var l=n.parentMeasure.PositionAndShape.RelativePosition.x+n.PositionAndShape.RelativePosition.x+t.GraphicalLabel.PositionAndShape.BorderMarginRight,c=r.parentMeasure.PositionAndShape.RelativePosition.x+r.PositionAndShape.RelativePosition.x+r.PositionAndShape.BorderMarginRight;e-=t.GraphicalLabel.PositionAndShape.Size.height/4,this.calculateSingleLyricWordWithUnderscore(i,l,c,e)}else{var h=i.Measures[i.Measures.length-1].PositionAndShape;if(l=n.parentMeasure.PositionAndShape.RelativePosition.x+n.PositionAndShape.RelativePosition.x+t.GraphicalLabel.PositionAndShape.BorderMarginRight,c=h.RelativePosition.x+h.Size.width,e-=t.GraphicalLabel.PositionAndShape.Size.height/4,this.calculateSingleLyricWordWithUnderscore(i,l,c,e),void 0===r)return;if(r!==r.parentMeasure.staffEntries[0]||r.parentMeasure!==r.parentMeasure.ParentStaffLine.Measures[0]){var f=o.Measures[0].staffEntries[0].PositionAndShape.RelativePosition.x,p=r.parentMeasure.PositionAndShape.RelativePosition.x+r.PositionAndShape.RelativePosition.x+r.PositionAndShape.BorderMarginRight;this.calculateSingleLyricWordWithUnderscore(o,f,p,e)}}},K.prototype.calculateSingleLyricWordWithUnderscore=function(t,e,n,i){var r=new M.PointF2D(e,i),o=new M.PointF2D(n,i),s=new a.GraphicalLine(r,o,this.rules.LyricUnderscoreLineWidth);t.LyricLines.push(s),-1===this.staffLinesWithLyricWords.indexOf(t)&&this.staffLinesWithLyricWords.push(t)},K.prototype.calculateRightAndLeftDashesForLyricWord=function(t,e,n,i){var r=new b.GraphicalLabel(new y.Label("-"),this.rules.LyricsHeight,_.TextAlignmentEnum.CenterBottom);r.setLabelPositionAndShapeBorders(),t.LyricsDashes.push(r),-1===this.staffLinesWithLyricWords.indexOf(t)&&this.staffLinesWithLyricWords.push(t),r.PositionAndShape.Parent=t.PositionAndShape;var o=new M.PointF2D(e,i);r.PositionAndShape.RelativePosition=o;var s=new b.GraphicalLabel(new y.Label("-"),this.rules.LyricsHeight,_.TextAlignmentEnum.CenterBottom);s.setLabelPositionAndShapeBorders(),t.LyricsDashes.push(s),s.PositionAndShape.Parent=t.PositionAndShape;var a=new M.PointF2D(n,i);return s.PositionAndShape.RelativePosition=a,s.PositionAndShape.RelativePosition.x-r.PositionAndShape.RelativePosition.x},K.prototype.calculateDynamicExpressions=function(){for(var t=Math.min(this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length,S.EngravingRules.Rules.MaxMeasureToDrawIndex),e=Math.min(S.EngravingRules.Rules.MinMeasureToDrawIndex,this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length);e<t;e++)for(var n=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[e],i=0;i<n.StaffLinkedExpressions.length;i++)if(this.graphicalMusicSheet.MeasureList[e][i].ParentStaff.ParentInstrument.Visible)for(var r=0;r<n.StaffLinkedExpressions[i].length;r++)(void 0!==n.StaffLinkedExpressions[i][r].InstantaneousDynamic||void 0!==n.StaffLinkedExpressions[i][r].StartingContinuousDynamic&&n.StaffLinkedExpressions[i][r].StartingContinuousDynamic.StartMultiExpression===n.StaffLinkedExpressions[i][r]&&0===n.StaffLinkedExpressions[i][r].UnknownList.length)&&this.calculateDynamicExpressionsForMultiExpression(n.StaffLinkedExpressions[i][r],e,i)},K.prototype.calculateOctaveShifts=function(){for(var t=0;t<this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length;t++)for(var e=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[t],n=0;n<e.StaffLinkedExpressions.length;n++)if(this.graphicalMusicSheet.MeasureList[t][n].ParentStaff.ParentInstrument.Visible)for(var i=0;i<e.StaffLinkedExpressions[n].length;i++)void 0!==e.StaffLinkedExpressions[n][i].OctaveShiftStart&&this.calculateSingleOctaveShift(e,e.StaffLinkedExpressions[n][i],t,n)},K.prototype.getFirstLeftNotNullStaffEntryFromContainer=function(t,e,n){if(void 0!==this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[t].StaffEntries[e])return this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[t].StaffEntries[e];for(var i=t-1;0<=i;i--)if(void 0!==this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[i].StaffEntries[e])return this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[i].StaffEntries[e]},K.prototype.getFirstRightNotNullStaffEntryFromContainer=function(t,e,n){if(void 0!==this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[t].StaffEntries[e])return this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[t].StaffEntries[e];for(var i=t+1;i<this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length;i++)if(void 0!==this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[i].StaffEntries[e])return this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[i].StaffEntries[e]},K.prototype.calculateWordRepetitionInstructions=function(){for(var t=0;t<this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length;t++){for(var e=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[t],n=0,i=e.FirstRepetitionInstructions.length;n<i;++n){var r=e.FirstRepetitionInstructions[n];this.calculateWordRepetitionInstruction(r,t)}for(n=0,i=e.LastRepetitionInstructions.length;n<i;++n)r=e.LastRepetitionInstructions[n],this.calculateWordRepetitionInstruction(r,t)}},K.prototype.calculateRepetitionEndings=function(){for(var t=this.graphicalMusicSheet.ParentMusicSheet,e=0,n=t.Repetitions.length;e<n;++e){var i=t.Repetitions[e];this.calcGraphicalRepetitionEndingsRecursively(i)}},K.prototype.calculateTempoExpressions=function(){for(var t=Math.min(this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length,S.EngravingRules.Rules.MaxMeasureToDrawIndex),e=S.EngravingRules.Rules.MinMeasureToDrawIndex;e<t;e++)for(var n=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[e],i=0;i<n.TempoExpressions.length;i++)this.calculateTempoExpressionsForMultiTempoExpression(n,n.TempoExpressions[i],e)},K.prototype.calculateMoodAndUnknownExpressions=function(){for(var t=0;t<this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length;t++)for(var e=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[t],n=0;n<e.StaffLinkedExpressions.length;n++)if(this.graphicalMusicSheet.MeasureList[t][n].ParentStaff.ParentInstrument.Visible)for(var i=0;i<e.StaffLinkedExpressions[n].length;i++)(0<e.StaffLinkedExpressions[n][i].MoodList.length||0<e.StaffLinkedExpressions[n][i].UnknownList.length)&&this.calculateMoodAndUnknownExpression(e.StaffLinkedExpressions[n][i],t,n)},K.prototype.calculateStemDirectionFromVoices=function(t){if(void 0!==t.ParentSourceStaffEntry.Link)return t===t.ParentSourceStaffEntry.VoiceEntries[0]?void(t.WantedStemDirection=D.StemDirectionType.Up):void(t.WantedStemDirection=D.StemDirectionType.Down);t.ParentVoice instanceof c.LinkedVoice?t.WantedStemDirection=D.StemDirectionType.Down:1<t.ParentSourceStaffEntry.VoiceEntries.length&&(t.WantedStemDirection=D.StemDirectionType.Up)},K.prototype.setBeamNotesWantedStemDirections=function(t){if(t.WantedStemDirection===D.StemDirectionType.Undefined&&0<t.Notes.length){var e=t.Notes[0].NoteBeam;if(void 0!==e)for(var n=0,i=e.Notes;n<i.length;n++){var r=i[n];if(r.ParentVoiceEntry!==t&&r.ParentVoiceEntry.WantedStemDirection!==D.StemDirectionType.Undefined){t.WantedStemDirection=r.ParentVoiceEntry.WantedStemDirection;break}}}},K);function K(){this.staffEntriesWithGraphicalTies=[],this.staffEntriesWithOrnaments=[],this.staffEntriesWithChordSymbols=[],this.staffLinesWithLyricWords=[],this.graphicalLyricWords=[]}e.MusicSheetCalculator=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(22),i=(Object.defineProperty(o.prototype,"Start",{get:function(){return this.start},set:function(t){this.start=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"End",{get:function(){return this.end},set:function(t){this.end=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"Width",{get:function(){return this.width},set:function(t){this.width=t},enumerable:!0,configurable:!0}),o);function o(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=r.OutlineAndFillStyleEnum.BaseWritingColor),this.start=t,this.end=e,this.width=n,this.styleId=i}e.GraphicalLine=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r,o,s,a,u,l=n(88);(u=i=e.OutlineAndFillStyleEnum||(e.OutlineAndFillStyleEnum={}))[u.BaseWritingColor=0]="BaseWritingColor",u[u.FollowingCursor=1]="FollowingCursor",u[u.AlternativeFollowingCursor=2]="AlternativeFollowingCursor",u[u.PlaybackCursor=3]="PlaybackCursor",u[u.Highlighted=4]="Highlighted",u[u.ErrorUnderlay=5]="ErrorUnderlay",u[u.Selected=6]="Selected",u[u.SelectionSymbol=7]="SelectionSymbol",u[u.DebugColor1=8]="DebugColor1",u[u.DebugColor2=9]="DebugColor2",u[u.DebugColor3=10]="DebugColor3",u[u.SplitScreenDivision=11]="SplitScreenDivision",u[u.GreyTransparentOverlay=12]="GreyTransparentOverlay",u[u.MarkedArea1=13]="MarkedArea1",u[u.MarkedArea2=14]="MarkedArea2",u[u.MarkedArea3=15]="MarkedArea3",u[u.MarkedArea4=16]="MarkedArea4",u[u.MarkedArea5=17]="MarkedArea5",u[u.MarkedArea6=18]="MarkedArea6",u[u.MarkedArea7=19]="MarkedArea7",u[u.MarkedArea8=20]="MarkedArea8",u[u.MarkedArea9=21]="MarkedArea9",u[u.MarkedArea10=22]="MarkedArea10",u[u.Comment1=23]="Comment1",u[u.Comment2=24]="Comment2",u[u.Comment3=25]="Comment3",u[u.Comment4=26]="Comment4",u[u.Comment5=27]="Comment5",u[u.Comment6=28]="Comment6",u[u.Comment7=29]="Comment7",u[u.Comment8=30]="Comment8",u[u.Comment9=31]="Comment9",u[u.Comment10=32]="Comment10",e.OUTLINE_AND_FILL_STYLE_DICT=new l.Dictionary,e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.BaseWritingColor,"Thistle"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.FollowingCursor,"Aqua"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.AlternativeFollowingCursor,"Azure"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.PlaybackCursor,"Bisque"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Highlighted,"CadetBlue"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.ErrorUnderlay,"DarkBlue"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Selected,"DarkGoldenRod"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.SelectionSymbol,"BlanchedAlmond"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.DebugColor1,"Chartreuse"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.DebugColor2,"DarkGreen"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.DebugColor3,"DarkOrange"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.SplitScreenDivision,"FireBrick"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.GreyTransparentOverlay,"DarkSalmon"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea1,"DarkSeaGreen"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea2,"DarkOrchid"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea3,"Aquamarine"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea4,"DarkKhaki"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea5,"ForestGreen"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea6,"AliceBlue"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea7,"DeepPink"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea8,"Coral"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea9,"DarkOliveGreen"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea10,"Chocolate"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment1,"DodgerBlue"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment2,"Blue"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment3,"Beige"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment4,"Crimson"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment5,"Fuchsia"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment6,"Brown"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment7,"BlanchedAlmond"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment8,"CornflowerBlue"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment9,"Cornsilk"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment10,"DarkGrey"),(a=e.StyleSets||(e.StyleSets={}))[a.MarkedArea=0]="MarkedArea",a[a.Comment=1]="Comment",(s=e.GraphicalLayers||(e.GraphicalLayers={}))[s.Background=0]="Background",s[s.Highlight=1]="Highlight",s[s.MeasureError=2]="MeasureError",s[s.SelectionSymbol=3]="SelectionSymbol",s[s.Cursor=4]="Cursor",s[s.PSI_Debug=5]="PSI_Debug",s[s.Notes=6]="Notes",s[s.Comment=7]="Comment",s[s.Debug_above=8]="Debug_above",(o=e.NoteState||(e.NoteState={}))[o.Normal=0]="Normal",o[o.Selected=1]="Selected",o[o.Follow_Confirmed=2]="Follow_Confirmed",o[o.QFeedback_NotFound=3]="QFeedback_NotFound",o[o.QFeedback_OK=4]="QFeedback_OK",o[o.QFeedback_Perfect=5]="QFeedback_Perfect",o[o.Debug1=6]="Debug1",o[o.Debug2=7]="Debug2",o[o.Debug3=8]="Debug3",(r=e.AutoColorSet||(e.AutoColorSet={})).C="#d82c6b",r.D="#F89D15",r.E="#FFE21A",r.F="#4dbd5c",r.G="#009D96",r.A="#43469d",r.B="#76429c",r.Rest="#000000"},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s,a=(o=n(63).AbstractNotationInstruction,r(u,o),Object.defineProperty(u.prototype,"Rhythm",{get:function(){return this.rhythm},set:function(t){this.rhythm=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"SymbolEnum",{get:function(){return this.symbolEnum},set:function(t){this.symbolEnum=t},enumerable:!0,configurable:!0}),u.prototype.clone=function(){return new u(this.rhythm.clone(),this.symbolEnum)},u.prototype.OperatorEquals=function(t){return this===t||void 0!==this&&void 0!==t&&this.numerator===t.numerator&&this.denominator===t.denominator},u.prototype.OperatorNotEqual=function(t){return!(this===t)},u.prototype.ToString=function(){return"Rhythm: "+this.rhythm.toString()},u);function u(t,e){var n=o.call(this,void 0)||this;return n.rhythm=t,n.numerator=t.Numerator,n.denominator=t.Denominator,n.symbolEnum=e,n}e.RhythmInstruction=a,(s=e.RhythmSymbolEnum||(e.RhythmSymbolEnum={}))[s.NONE=0]="NONE",s[s.COMMON=1]="COMMON",s[s.CUT=2]="CUT"},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(9),a=n(5),u=n(95),l=n(4),c=n(20),h=(o=u.Clickable,r(f,o),Object.defineProperty(f.prototype,"Label",{get:function(){return this.label},enumerable:!0,configurable:!0}),f.prototype.toString=function(){return this.label.text+" ("+this.boundingBox.RelativePosition.x+","+this.boundingBox.RelativePosition.y+")"},f.prototype.setLabelPositionAndShapeBorders=function(){if(""!==this.Label.text.trim()){var t=l.EngravingRules.Rules.LabelMarginBorderFactor,e=c.MusicSheetCalculator.TextMeasurer.computeTextWidthToHeightRatio(this.Label.text,this.Label.font,this.Label.fontStyle),n=this.Label.fontHeight,i=n*e,r=this.PositionAndShape;switch(this.Label.textAlignment){case s.TextAlignmentEnum.CenterBottom:r.BorderTop=-n,r.BorderLeft=-i/2,r.BorderBottom=0,r.BorderRight=i/2;break;case s.TextAlignmentEnum.CenterCenter:r.BorderTop=-n/2,r.BorderLeft=-i/2,r.BorderBottom=n/2,r.BorderRight=i/2;break;case s.TextAlignmentEnum.CenterTop:r.BorderTop=0,r.BorderLeft=-i/2,r.BorderBottom=n,r.BorderRight=i/2;break;case s.TextAlignmentEnum.LeftBottom:r.BorderTop=-n,r.BorderLeft=0,r.BorderBottom=0,r.BorderRight=i;break;case s.TextAlignmentEnum.LeftCenter:r.BorderTop=-n/2,r.BorderLeft=0,r.BorderBottom=n/2,r.BorderRight=i;break;case s.TextAlignmentEnum.LeftTop:r.BorderTop=0,r.BorderLeft=0,r.BorderBottom=n,r.BorderRight=i;break;case s.TextAlignmentEnum.RightBottom:r.BorderTop=-n,r.BorderLeft=-i,r.BorderBottom=0,r.BorderRight=0;break;case s.TextAlignmentEnum.RightCenter:r.BorderTop=-n/2,r.BorderLeft=-i,r.BorderBottom=n/2,r.BorderRight=0;break;case s.TextAlignmentEnum.RightTop:r.BorderTop=0,r.BorderLeft=-i,r.BorderBottom=n,r.BorderRight=0}r.BorderMarginTop=r.BorderTop-n*t,r.BorderMarginLeft=r.BorderLeft-n*t,r.BorderMarginBottom=r.BorderBottom+n*t,r.BorderMarginRight=r.BorderRight+n*t}},f);function f(t,e,n,i){void 0===i&&(i=void 0);var r=o.call(this)||this;return r.label=t,r.boundingBox=new a.BoundingBox(r,i),r.label.fontHeight=e,r.label.textAlignment=n,r}e.GraphicalLabel=h},function(t,f,e){"use strict";var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(f,"__esModule",{value:!0}),e(14);var r=e(102),o=e(59),b=e(6),s=e(104),a=e(22),y=e(4),u=e(8),l=e(66),c=e(73),h=e(1),p=e(52),d=e(32);f.unitInPixels=10;var m,g=(m=r.MusicSheetDrawer,n(v,m),v.prototype.clear=function(){this.backend.clear()},v.prototype.scale=function(t){this.zoom=t,this.backend.scale(this.zoom)},v.prototype.resize=function(t,e){this.backend.resize(t,e)},v.prototype.translate=function(t,e){this.backend.translate(t,e)},v.prototype.calculatePixelDistance=function(t){return t*f.unitInPixels},v.prototype.drawStaffLine=function(t){m.prototype.drawStaffLine.call(this,t);var e=t.PositionAndShape.AbsolutePosition;this.drawSlurs(t,e)},v.prototype.drawSlurs=function(t,e){for(var n=0,i=t.GraphicalSlurs;n<i.length;n++){var r=i[n];r.slur.isCrossed()||this.drawSlur(r,e)}},v.prototype.drawSlur=function(t,e){var n=[],i=new b.PointF2D(t.bezierStartPt.x+e.x,t.bezierStartPt.y+e.y),r=new b.PointF2D(t.bezierStartControlPt.x+e.x,t.bezierStartControlPt.y+e.y),o=new b.PointF2D(t.bezierEndControlPt.x+e.x,t.bezierEndControlPt.y+e.y),s=new b.PointF2D(t.bezierEndPt.x+e.x,t.bezierEndPt.y+e.y);n.push(this.applyScreenTransformation(i)),n.push(this.applyScreenTransformation(r)),n.push(this.applyScreenTransformation(o)),n.push(this.applyScreenTransformation(s)),t.placement===u.PlacementEnum.Above?(i.y-=.05,r.y-=.3,o.y-=.3,s.y-=.05):(i.y+=.05,r.y+=.3,o.y+=.3,s.y+=.05),n.push(this.applyScreenTransformation(i)),n.push(this.applyScreenTransformation(r)),n.push(this.applyScreenTransformation(o)),n.push(this.applyScreenTransformation(s)),this.backend.renderCurve(n)},v.prototype.drawMeasure=function(t){t.setAbsoluteCoordinates(t.PositionAndShape.AbsolutePosition.x*f.unitInPixels,t.PositionAndShape.AbsolutePosition.y*f.unitInPixels),t.draw(this.backend.getContext());for(var e=0,n=t.staffEntries;e<n.length;e++){var i=n[e];this.drawStaffEntry(i)}},v.prototype.drawLine=function(t,e,n,i){void 0===n&&(n="#FF0000FF"),void 0===i&&(i=.2),t=this.applyScreenTransformation(t),e=this.applyScreenTransformation(e),this.backend.renderLine(t,e,n,i*f.unitInPixels)},v.prototype.drawSkyLine=function(t){var e=t.PositionAndShape.AbsolutePosition,n=t.PositionAndShape.Size.width;this.drawSampledLine(t.SkyLine,e,n)},v.prototype.drawBottomLine=function(t){var e=new b.PointF2D(t.PositionAndShape.AbsolutePosition.x,t.PositionAndShape.AbsolutePosition.y),n=t.PositionAndShape.Size.width;this.drawSampledLine(t.BottomLine,e,n,"#0000FFFF")},v.prototype.drawSampledLine=function(t,e,n,i){void 0===i&&(i="#FF0000FF");for(var r=[],o=0,s=0;s<t.length;s++)t[s]!==o&&(r.push(s),o=t[s]);var a=e;if(0<r.length){var u=y.EngravingRules.Rules.SamplingUnit,l=new b.PointF2D(a.x,a.y),c=new b.PointF2D(r[0]/u+a.x,a.y);this.drawLine(l,c,i);var h=void 0,f=void 0;for(0<=t[0]&&(h=new b.PointF2D(r[0]/u+a.x,a.y),f=new b.PointF2D(r[0]/u+a.x,a.y+t[r[0]]),this.drawLine(h,f,i)),s=1;s<r.length;s++)l=new b.PointF2D(r[s-1]/u+a.x,a.y+t[r[s-1]]),c=new b.PointF2D(r[s]/u+a.x,a.y+t[r[s-1]]),this.drawLine(l,c,i),h=new b.PointF2D(r[s]/u+a.x,a.y+t[r[s-1]]),f=new b.PointF2D(r[s]/u+a.x,a.y+t[r[s]]),this.drawLine(h,f,i);c=r[r.length-1]<t.length?(l=new b.PointF2D(r[r.length-1]/u+a.x,a.y+t[r[r.length-1]]),new b.PointF2D(a.x+n,a.y+t[r[r.length-1]])):(l=new b.PointF2D(r[r.length-1]/u+a.x,a.y),new b.PointF2D(a.x+n,a.y)),this.drawLine(l,c,i)}else{var p=new b.PointF2D(a.x,a.y),d=new b.PointF2D(a.x+n,a.y);this.drawLine(p,d,i)}},v.prototype.drawStaffEntry=function(t){void 0!==t.graphicalChordContainer&&this.drawLabel(t.graphicalChordContainer.GetGraphicalLabel,a.GraphicalLayers.Notes),0<t.LyricsEntries.length&&this.drawLyrics(t.LyricsEntries,a.GraphicalLayers.Notes)},v.prototype.drawLyrics=function(t,e){var n=this;t.forEach(function(t){return n.drawLabel(t.GraphicalLabel,e)})},v.prototype.drawInstrumentBrace=function(t,e){t.draw(this.backend.getContext())},v.prototype.drawGroupBracket=function(t,e){t.draw(this.backend.getContext())},v.prototype.drawOctaveShifts=function(t){for(var e=0,n=t.OctaveShifts;e<n.length;e++){var i=n[e];if(i){var r=this.backend.getContext(),o=i.getTextBracket();o.setContext(r);var s=t.PositionAndShape.AbsolutePosition.x+o.start.getX()/10,a=t.PositionAndShape.AbsolutePosition.x+o.stop.getX()/10;if(1===o.position){var u=t.SkyBottomLineCalculator.getSkyLineMinInRange(s,a);o.start.getStave().options.space_above_staff_ln=u}else{var l=t.SkyBottomLineCalculator.getBottomLineMaxInRange(s,a);o.start.getStave().options.space_below_staff_ln=l}o.draw()}}},v.prototype.drawExpressions=function(t){for(var e=0,n=t.AbstractExpressions;e<n.length;e++){var i=n[e];i instanceof c.GraphicalInstantaneousDynamicExpression?this.drawInstantaneousDynamic(i):i instanceof l.GraphicalInstantaneousTempoExpression?this.drawLabel(i.GraphicalLabel,a.GraphicalLayers.Notes):i instanceof p.GraphicalContinuousDynamicExpression?this.drawContinuousDynamic(i):h.warn("Unkown type of expression!")}},v.prototype.drawInstantaneousDynamic=function(t){this.drawLabel(t.Label,a.GraphicalLayers.Notes)},v.prototype.drawContinuousDynamic=function(t){if(t.IsVerbal)this.drawLabel(t.Label,a.GraphicalLayers.Notes);else for(var e=0,n=t.Lines;e<n.length;e++){var i=n[e],r=new b.PointF2D(t.ParentStaffLine.PositionAndShape.AbsolutePosition.x+i.Start.x,t.ParentStaffLine.PositionAndShape.AbsolutePosition.y+i.Start.y),o=new b.PointF2D(t.ParentStaffLine.PositionAndShape.AbsolutePosition.x+i.End.x,t.ParentStaffLine.PositionAndShape.AbsolutePosition.y+i.End.y);this.drawLine(r,o,"black",i.Width)}},v.prototype.renderLabel=function(t,e,n,i,r,o){var s,a=t.Label.fontHeight*f.unitInPixels,u=t.Label,l=u.fontStyle,c=u.font,h=u.text;y.EngravingRules.Rules.ColoringEnabled&&((s=t.Label.colorDefault)||(s=y.EngravingRules.Rules.DefaultColorLabel)),this.backend.renderText(a,l,c,h,r,o,s)},v.prototype.renderRectangle=function(t,e,n,i){this.backend.renderRectangle(t,n,i)},v.prototype.applyScreenTransformation=function(t){return new b.PointF2D(t.x*f.unitInPixels,t.y*f.unitInPixels)},v.prototype.applyScreenTransformationForRect=function(t){return new o.RectangleF2D(t.x*f.unitInPixels,t.y*f.unitInPixels,t.width*f.unitInPixels,t.height*f.unitInPixels)},v);function v(t,e,n){void 0===n&&(n=new d.DrawingParameters);var i=m.call(this,new s.VexFlowTextMeasurer,n)||this;return i.zoom=1,i.backend=e,i}f.VexFlowMusicSheetDrawer=g},function(t,i,r){"use strict";(function(t){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer=void 0!==t,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var e=new ArrayBuffer(0);try{i.blob=0===new Blob([e],{type:"application/zip"}).size}catch(t){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(e),i.blob=0===n.getBlob("application/zip").size}catch(t){i.blob=!1}}}try{i.nodestream=!!r(150).Readable}catch(t){i.nodestream=!1}}).call(this,r(45).Buffer)},function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r=n,o=i,Object.prototype.hasOwnProperty.call(r,o)&&(t[i]=n[i])}}var r,o;return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){var e,n,i,r,o,s;for(e=i=0,n=t.length;e<n;e++)i+=t[e].length;for(s=new Uint8Array(i),e=r=0,n=t.length;e<n;e++)o=t[e],s.set(o,r),r+=o.length;return s}},o={arraySet:function(t,e,n,i,r){for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(i)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Array.prototype.last||(Array.prototype.last=function(){return this[this.length-1]}),Array.prototype.clear||(Array.prototype.clear=function(){this.length=0}),Array.prototype.contains||(Array.prototype.contains=function(t){return-1!==this.indexOf(t)});var i=(r.contains2=function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},r.last=function(t){return t[t.length-1]},r.removeDictElementIfTrue=function(n,t,i){var r=[];t.forEach(function(t,e){i(n,t,e)&&r.push(t)});for(var e=0;e<r.length;e++)t.remove(r[e])},r.getLastElement=function(t){return t[t.length-1]},r.binarySearch=function(t,e,n,i,r){void 0===i&&(i=0),void 0===r&&(r=t.length-1);for(var o=1;i<r;){var s=n(t[o=Math.floor((i+r)/2)],e);if(0===s)return o;s<0&&(i=o+1),0<s&&(r=o)}return-o},r);function r(){}e.CollectionUtil=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var O=n(14),r=n(11),a=n(2),i=n(23),o=n(17),s=n(2),u=n(2),l=n(34),c=n(44),h=n(64),f=n(22),p=n(1),M=n(18),d=n(42),b=n(49),R=n(71),L=n(25),A=n(4),y=(C.duration=function(t,e){var n=t.RealValue;return 1<=n?"w":n<1&&.5<=n?e?"w":"h":n<.5&&.25<=n?e&&.25<n?"h":"q":n<.25&&.125<=n?e&&.125<n?"q":"8":n<.125&&.0625<=n?e&&.0625<n?"8":"16":n<.0625&&.03125<=n?e&&.03125<n?"16":"32":n<.03125&&.015625<=n?e&&.015625<n?"32":"64":e?"64":"128"},C.pitch=function(t,e){var n=u.NoteEnum[e.FundamentalNote].toLowerCase(),i=a.Pitch.accidentalVexflow(e.Accidental),r=e.Octave-t.Clef().OctaveOffset+3,o=t.sourceNote.Notehead,s="";return void 0!==o&&(s=this.NoteHeadCode(o)),[n+"n/"+r+s,i,t.Clef()]},C.NoteHeadCode=function(t){var e=t.Filled?"2":"1";switch(t.Shape){case R.NoteHeadShape.NORMAL:return"";case R.NoteHeadShape.DIAMOND:return"/D"+e;case R.NoteHeadShape.TRIANGLE:return"/T"+e;case R.NoteHeadShape.X:return"/X"+e;case R.NoteHeadShape.CIRCLEX:return"/X3";case R.NoteHeadShape.RECTANGLE:return"/R"+e;case R.NoteHeadShape.SQUARE:return"/S"+e;case R.NoteHeadShape.SLASH:default:return""}},C.GhostNote=function(t){return new O.Flow.GhostNote({duration:C.duration(t,!1)})},C.StaveNote=function(t){var e=t.notes.reverse(),n=e[0],i=[],r=[],o=n.graphicalNoteLength,s=void 0!==n.sourceNote.NoteTuplet,a=C.duration(o,s);void 0!==n.sourceNote.TypeLength&&n.sourceNote.TypeLength!==o&&(a=C.duration(n.sourceNote.TypeLength,s));for(var u,l=void 0,c=n.numberOfDots,h=!1,f=0,p=!1,d=!1,b=0,y=e;b<y.length;b++){var m=y[b];if(c<m.numberOfDots&&(c=m.numberOfDots),m.sourceNote.isRest()){d=!0,i=["b/4"],m.parentVoiceEntry.parentStaffEntry.parentMeasure.parentSourceMeasure.Duration.RealValue<=o.RealValue&&(i=["d/5"],a="w",h=!(c=0),f=A.EngravingRules.Rules.WholeRestXShiftVexflow*L.unitInPixels);break}m.sourceNote.Notehead&&m.sourceNote.Notehead.Shape===R.NoteHeadShape.SLASH&&(p=!0);var g=m.vfpitch;i.push(g[0]),r.push(g[1]),l=l||C.Clef(g[2]).type}for(var v=0,_=c;v<_;++v)a+="d";p&&(a+="s"),d&&(a+="r");var S={align_center:h,auto_stem:!0,clef:l,duration:a,keys:i,slash:t.parentVoiceEntry.GraceNoteSlash},x=t.notes[0].sourceNote;if(x.IsCueNote&&(S.glyph_font_scale=O.Flow.DEFAULT_NOTATION_FONT_SCALE*O.Flow.GraceNote.SCALE,S.stroke_px=O.Flow.GraceNote.LEDGER_LINE_OFFSET),u=t.parentVoiceEntry.IsGrace||t.notes[0].sourceNote.IsCueNote?new O.Flow.GraceNote(S):new O.Flow.StaveNote(S),A.EngravingRules.Rules.ColoringEnabled){var w=A.EngravingRules.Rules.DefaultColorStem,E=t.parentVoiceEntry.StemColor;!E&&w&&(E=w);var P={fillStyle:E,strokeStyle:E};E&&(t.parentVoiceEntry.StemColor=E,u.setStemStyle(P),u.flag&&A.EngravingRules.Rules.ColorFlags&&u.setFlagStyle(P))}if(u.x_shift=f,t.parentVoiceEntry.IsGrace&&t.notes[0].sourceNote.NoteBeam&&(t.parentVoiceEntry.WantedStemDirection=t.notes[0].sourceNote.NoteBeam.Notes[0].ParentVoiceEntry.WantedStemDirection),void 0!==t.parentVoiceEntry)switch(t.parentVoiceEntry.WantedStemDirection){case M.StemDirectionType.Up:u.setStemDirection(O.Flow.Stem.UP);break;case M.StemDirectionType.Down:u.setStemDirection(O.Flow.Stem.DOWN)}for(v=0,_=e.length;v<_;v+=1){if(e[v].setIndex(u,v),r[v]){if("++"===r[v]){u.addAccidental(v,new O.Flow.Accidental("##")),u.addAccidental(v,new O.Flow.Accidental("#"));continue}if("bbs"===r[v]){u.addAccidental(v,new O.Flow.Accidental("bb")),u.addAccidental(v,new O.Flow.Accidental("b"));continue}u.addAccidental(v,new O.Flow.Accidental(r[v]))}var T=e[v].sourceNote.TremoloStrokes;0<T&&u.addModifier(v,new O.Flow.Tremolo(T))}if(.25===x.Length.RealValue&&x.Notehead&&!1===x.Notehead.Filled){var k=u.getKeyProps();for(v=0;v<k.length;v++)k[v].code="v81"}for(v=0,_=c;v<_;++v)u.addDotToAll();return u},C.generateArticulations=function(t,e){if(void 0!==t&&"GhostNote"!==t.getAttribute("type")){var n=3;t.getStemDirection()===O.Flow.Stem.UP&&(n=4);for(var i=0,r=e;i<r.length;i++){var o=void 0;switch(r[i]){case M.ArticulationEnum.accent:o=new O.Flow.Articulation("a>");break;case M.ArticulationEnum.downbow:o=new O.Flow.Articulation("am");break;case M.ArticulationEnum.fermata:o=new O.Flow.Articulation("a@a"),n=3;break;case M.ArticulationEnum.invertedfermata:o=new O.Flow.Articulation("a@u"),n=4;break;case M.ArticulationEnum.lefthandpizzicato:o=new O.Flow.Articulation("a+");break;case M.ArticulationEnum.snappizzicato:o=new O.Flow.Articulation("ao");break;case M.ArticulationEnum.staccatissimo:o=new O.Flow.Articulation("av");break;case M.ArticulationEnum.staccato:o=new O.Flow.Articulation("a.");break;case M.ArticulationEnum.tenuto:o=new O.Flow.Articulation("a-");break;case M.ArticulationEnum.upbow:o=new O.Flow.Articulation("a|");break;case M.ArticulationEnum.strongaccent:o=new O.Flow.Articulation("a^")}void 0!==o&&(o.setPosition(n),t.addModifier(0,o))}}},C.generateOrnaments=function(t,e){var n=3;t.getStemDirection()===O.Flow.Stem.UP&&(n=4);var i=void 0;switch(e.GetOrnament){case b.OrnamentEnum.DelayedInvertedTurn:(i=new O.Flow.Ornament("turn_inverted")).setDelayed(!0);break;case b.OrnamentEnum.DelayedTurn:(i=new O.Flow.Ornament("turn")).setDelayed(!0);break;case b.OrnamentEnum.InvertedMordent:(i=new O.Flow.Ornament("mordent_inverted")).setDelayed(!1);break;case b.OrnamentEnum.InvertedTurn:(i=new O.Flow.Ornament("turn_inverted")).setDelayed(!1);break;case b.OrnamentEnum.Mordent:(i=new O.Flow.Ornament("mordent")).setDelayed(!1);break;case b.OrnamentEnum.Trill:(i=new O.Flow.Ornament("tr")).setDelayed(!1);break;case b.OrnamentEnum.Turn:(i=new O.Flow.Ornament("turn")).setDelayed(!1);break;default:return void p.warn("unhandled OrnamentEnum type: "+e.GetOrnament)}void 0!==i&&(e.AccidentalBelow!==s.AccidentalEnum.NONE&&i.setLowerAccidental(a.Pitch.accidentalVexflow(e.AccidentalBelow)),e.AccidentalAbove!==s.AccidentalEnum.NONE&&i.setUpperAccidental(a.Pitch.accidentalVexflow(e.AccidentalAbove)),i.setPosition(n),t.addModifier(0,i))},C.Clef=function(t,e){var n,i;switch(void 0===e&&(e="default"),"default"!==e&&"small"!==e&&(p.warn('Invalid VexFlow clef size "'+e+'" specified. Using "default".'),e="default"),t.ClefType){case r.ClefEnum.G:switch(t.Line){case 1:n="french";break;case 2:n="treble";break;default:n="treble",p.error("Clef "+r.ClefEnum[t.ClefType]+" on line "+t.Line+' not supported by VexFlow. Using default value "'+n+'".')}break;case r.ClefEnum.F:switch(t.Line){case 4:n="bass";break;case 3:n="baritone-f";break;case 5:n="subbass";break;default:n="bass",p.error("Clef "+r.ClefEnum[t.ClefType]+" on line "+t.Line+' not supported by VexFlow. Using default value "'+n+'".')}break;case r.ClefEnum.C:switch(t.Line){case 3:n="alto";break;case 4:n="tenor";break;case 1:n="soprano";break;case 2:n="mezzo-soprano";break;default:n="alto",p.error("Clef "+r.ClefEnum[t.ClefType]+" on line "+t.Line+' not supported by VexFlow. Using default value "'+n+'".')}break;case r.ClefEnum.percussion:n="percussion";break;case r.ClefEnum.TAB:n="tab"}return 1===t.OctaveOffset&&"bass"!==n?i="8va":-1===t.OctaveOffset&&(i="8vb"),{type:n,size:e,annotation:i}},C.TimeSignature=function(t){var e;switch(t.SymbolEnum){case i.RhythmSymbolEnum.NONE:e=t.Rhythm.Numerator+"/"+t.Rhythm.Denominator;break;case i.RhythmSymbolEnum.COMMON:e="C";break;case i.RhythmSymbolEnum.CUT:e="C|"}return new O.Flow.TimeSignature(e)},C.keySignature=function(t){if(void 0!==t){var e;switch(t.Mode){case o.KeyEnum.minor:e=C.minorMap[t.Key]+"m";break;case o.KeyEnum.major:case o.KeyEnum.none:e=C.majorMap[t.Key];break;default:e="C"}return e}},C.line=function(t,e){switch(t){case l.SystemLinesEnum.SingleThin:return e===d.SystemLinePosition.MeasureBegin?1:0;case l.SystemLinesEnum.DoubleThin:return 2;case l.SystemLinesEnum.ThinBold:return 6;case l.SystemLinesEnum.BoldThinDots:return 5;case l.SystemLinesEnum.DotsThinBold:case l.SystemLinesEnum.DotsBoldBoldDots:return 6;case l.SystemLinesEnum.None:return 8}},C.font=function(t,e,n){void 0===e&&(e=c.FontStyles.Regular),void 0===n&&(n=h.Fonts.TimesNewRoman);var i="normal",r="normal";switch(e){case c.FontStyles.Bold:r="bold";break;case c.FontStyles.Italic:i="italic";break;case c.FontStyles.BoldItalic:i="italic",r="bold";break;case c.FontStyles.Underlined:}switch(n){case h.Fonts.Kokila:}return i+" "+r+" "+Math.floor(t)+"px 'Times New Roman'"},C.fontStyle=function(t){switch(t){case c.FontStyles.Bold:return"bold";case c.FontStyles.Italic:return"italic";case c.FontStyles.BoldItalic:return"italic bold";default:return"normal"}},C.style=function(t){return f.OUTLINE_AND_FILL_STYLE_DICT.getValue(t)},C.majorMap={"-1":"F","-2":"Bb","-3":"Eb","-4":"Ab","-5":"Db","-6":"Gb","-7":"Cb","-8":"Fb",0:"C",1:"G",2:"D",3:"A",4:"E",5:"B",6:"F#",7:"C#",8:"G#"},C.minorMap={"-1":"D","-2":"G","-3":"C","-4":"F","-5":"Bb","-6":"Eb","-7":"Ab","-8":"Db",0:"A",1:"E",2:"B",3:"F#",4:"C#",5:"G#",6:"D#",7:"A#",8:"E#"},C);function C(){}e.VexFlowConverter=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(r.translateText=function(t,e){if(void 0===this.defaultTextTranslation)return e},r);function r(){}e.ITextTranslation=i},function(t,e,n){"use strict";var i=n(54),r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=h;var o=n(46);o.inherits=n(39);var s=n(151),a=n(78);o.inherits(h,s);for(var u=r(a.prototype),l=0;l<u.length;l++){var c=u[l];h.prototype[c]||(h.prototype[c]=a.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||i.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),i.nextTick(e,t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r,o,s=n(4),a=n(8);(o=e.ColoringModes||(e.ColoringModes={}))[o.XML=0]="XML",o[o.AutoColoring=1]="AutoColoring",o[o.CustomColorSet=2]="CustomColorSet",(r=i=e.DrawingParametersEnum||(e.DrawingParametersEnum={})).allon="allon",r.compact="compact",r.default="default",r.leadsheet="leadsheet",r.preview="preview",r.thumbnail="thumbnail";var u=(Object.defineProperty(l.prototype,"DrawingParametersEnum",{get:function(){return this.drawingParametersEnum},set:function(t){switch(this.drawingParametersEnum=t){case i.allon:this.setForAllOn();break;case i.thumbnail:this.setForThumbnail();break;case i.leadsheet:this.setForLeadsheet();break;case i.compact:this.setForCompactMode();break;case i.default:default:this.setForDefault()}},enumerable:!0,configurable:!0}),l.prototype.setForAllOn=function(){this.drawHighlights=!0,this.drawErrors=!0,this.drawSelectionStartSymbol=!0,this.drawSelectionEndSymbol=!0,this.drawCursors=!0,this.drawActivitySymbols=!0,this.drawScrollIndicator=!0,this.drawComments=!0,this.drawMarkedAreas=!0,this.DrawTitle=!0,this.DrawSubtitle=!0,this.DrawComposer=!0,this.DrawLyricist=!0,this.drawCredits=!0,this.DrawPartNames=!0,this.drawHiddenNotes=!0,s.EngravingRules.Rules.CompactMode=!1},l.prototype.setForDefault=function(){this.setForAllOn(),this.drawHiddenNotes=!1},l.prototype.setForThumbnail=function(){this.drawHighlights=!1,this.drawErrors=!1,this.drawSelectionStartSymbol=!1,this.drawSelectionStartSymbol=!1,this.drawCursors=!1,this.drawActivitySymbols=!1,this.drawScrollIndicator=!1,this.drawComments=!0,this.drawMarkedAreas=!0,this.drawHiddenNotes=!1},l.prototype.setForCompactMode=function(){this.setForDefault(),s.EngravingRules.Rules.CompactMode=!0,this.DrawCredits=!1,this.drawHiddenNotes=!1},l.prototype.setForLeadsheet=function(){this.drawHighlights=!1,this.drawErrors=!1,this.drawSelectionStartSymbol=!0,this.drawSelectionEndSymbol=!0,this.drawCursors=!0,this.drawActivitySymbols=!1,this.drawScrollIndicator=!0,this.drawComments=!0,this.drawMarkedAreas=!0},Object.defineProperty(l.prototype,"DrawCredits",{get:function(){return this.drawCredits},set:function(t){this.drawCredits=t,this.DrawComposer=t,this.DrawTitle=t,this.DrawSubtitle=t,this.DrawLyricist=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DrawTitle",{get:function(){return this.drawTitle},set:function(t){this.drawTitle=t,(s.EngravingRules.Rules.RenderTitle=t)||(this.DrawSubtitle=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DrawSubtitle",{get:function(){return this.drawSubtitle},set:function(t){this.drawSubtitle=t,(s.EngravingRules.Rules.RenderSubtitle=t)&&(this.DrawTitle=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DrawComposer",{get:function(){return this.drawComposer},set:function(t){this.drawComposer=t,s.EngravingRules.Rules.RenderComposer=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DrawLyricist",{get:function(){return this.drawLyricist},set:function(t){this.drawLyricist=t,s.EngravingRules.Rules.RenderLyricist=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"DrawPartNames",{get:function(){return this.drawPartNames},set:function(t){this.drawPartNames=t,s.EngravingRules.Rules.RenderPartNames=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"FingeringPosition",{get:function(){return this.fingeringPosition},set:function(t){this.fingeringPosition=t,s.EngravingRules.Rules.FingeringPosition=t},enumerable:!0,configurable:!0}),l);function l(t){void 0===t&&(t=i.default),this.drawTitle=!0,this.drawSubtitle=!0,this.drawLyricist=!0,this.drawComposer=!0,this.drawCredits=!0,this.drawPartNames=!0,this.fingeringPosition=a.PlacementEnum.Left,this.drawHiddenNotes=!1,this.DrawingParametersEnum=t}e.DrawingParameters=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r,o=n(2),s=(Object.defineProperty(a.prototype,"Type",{get:function(){return this.octaveValue},set:function(t){this.octaveValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"StaffNumber",{get:function(){return this.staffNumber},set:function(t){this.staffNumber=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"ParentStartMultiExpression",{get:function(){return this.startMultiExpression},set:function(t){this.startMultiExpression=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"ParentEndMultiExpression",{get:function(){return this.endMultiExpression},set:function(t){this.endMultiExpression=t},enumerable:!0,configurable:!0}),a.prototype.setOctaveShiftValue=function(t,e){this.octaveValue=1===e&&"down"===t?i.VA8:1===e&&"up"===t?i.VB8:2===e&&"down"===t?i.MA15:2===e&&"up"===t?i.MB15:i.NONE},a.getPitchFromOctaveShift=function(t,e){var n=t.Octave;switch(e){case i.VA8:n-=1;break;case i.VB8:n+=1;break;case i.MA15:n-=2;break;case i.MB15:n+=2;break;case i.NONE:default:n+=0}return new o.Pitch(t.FundamentalNote,n,t.Accidental)},a);function a(t,e){this.setOctaveShiftValue(t,e)}e.OctaveShift=s,(r=i=e.OctaveEnum||(e.OctaveEnum={}))[r.VA8=0]="VA8",r[r.VB8=1]="VB8",r[r.MA15=2]="MA15",r[r.MB15=3]="MB15",r[r.NONE=4]="NONE"},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.SystemLinesEnum||(e.SystemLinesEnum={}))[i.SingleThin=0]="SingleThin",i[i.DoubleThin=1]="DoubleThin",i[i.ThinBold=2]="ThinBold",i[i.BoldThinDots=3]="BoldThinDots",i[i.DotsThinBold=4]="DotsThinBold",i[i.DotsBoldBoldDots=5]="DotsBoldBoldDots",i[i.None=6]="None",i[i.Dotted=7]="Dotted",i[i.Dashed=8]="Dashed",i[i.Bold=9]="Bold",i[i.BoldThin=10]="BoldThin",i[i.DoubleBold=11]="DoubleBold",i[i.Tick=12]="Tick",i[i.Short=13]="Short"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f=n(0),i=n(11),r=n(17),o=n(23),s=(Object.defineProperty(a.prototype,"ParentStaff",{get:function(){return this.parentStaff},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"VerticalContainerParent",{get:function(){return this.verticalContainerParent},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"Timestamp",{get:function(){if(void 0!==this.VerticalContainerParent)return this.VerticalContainerParent.Timestamp},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"AbsoluteTimestamp",{get:function(){if(void 0!==this.VerticalContainerParent)return f.Fraction.plus(this.VerticalContainerParent.ParentMeasure.AbsoluteTimestamp,this.VerticalContainerParent.Timestamp)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"VoiceEntries",{get:function(){return this.voiceEntries},set:function(t){this.voiceEntries=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"Link",{get:function(){return this.staffEntryLink},set:function(t){this.staffEntryLink=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"Instructions",{get:function(){return this.instructions},set:function(t){this.instructions=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"ChordContainer",{get:function(){return this.chordSymbolContainer},set:function(t){this.chordSymbolContainer=t},enumerable:!0,configurable:!0}),a.prototype.removeAllInstructionsOfTypeClefInstruction=function(){for(var t=0,e=0;t<this.instructions.length;)this.instructions[t]instanceof i.ClefInstruction?(this.instructions.splice(t,1),e++):t++;return e},a.prototype.removeFirstInstructionOfTypeClefInstruction=function(){for(var t=0;t<this.instructions.length;t++)if(this.instructions[t]instanceof i.ClefInstruction)return this.instructions.splice(t,1),!0;return!1},a.prototype.removeAllInstructionsOfTypeKeyInstruction=function(){for(var t=0,e=0;t<this.instructions.length;)this.instructions[t]instanceof r.KeyInstruction?(this.instructions.splice(t,1),e++):t++;return e},a.prototype.removeFirstInstructionOfTypeKeyInstruction=function(){for(var t=0;t<this.instructions.length;t++)if(this.instructions[t]instanceof r.KeyInstruction)return this.instructions.splice(t,1),!0;return!1},a.prototype.removeAllInstructionsOfTypeRhythmInstruction=function(){for(var t=0,e=0;t<this.instructions.length;)this.instructions[t]instanceof o.RhythmInstruction?(this.instructions.splice(t,1),e++):t++;return e},a.prototype.removeFirstInstructionOfTypeRhythmInstruction=function(){for(var t=0;t<this.instructions.length;t++)if(this.instructions[t]instanceof o.RhythmInstruction)return this.instructions.splice(t,1),!0;return!1},a.prototype.calculateMinNoteLength=function(){for(var t=new f.Fraction(Number.MAX_VALUE,1),e=0,n=this.VoiceEntries.length;e<n;++e)for(var i=this.VoiceEntries[e],r=0,o=i.Notes.length;r<o;++r){var s=i.Notes[r];s.Length.lt(t)&&(t=s.Length)}return t},a.prototype.calculateMaxNoteLength=function(){for(var t=new f.Fraction(0,1),e=0,n=this.VoiceEntries.length;e<n;++e)for(var i=this.VoiceEntries[e],r=0,o=i.Notes.length;r<o;++r){var s=i.Notes[r];if(void 0!==s.NoteTie){for(var a=f.Fraction.createFromFraction(s.Length),u=!1,l=0,c=s.NoteTie.Notes;l<c.length;l++){var h=c[l];h!==s?u&&a.Add(h.Length):u=!0}t.lt(a)&&(t=a)}else t.lt(s.Length)&&(t=s.Length)}return t},a.prototype.hasNotes=function(){for(var t=0,e=this.VoiceEntries.length;t<e;++t)if(0<this.VoiceEntries[t].Notes.length)return!0;return!1},a.prototype.hasTie=function(){for(var t=0,e=this.VoiceEntries.length;t<e;++t)if(this.VoiceEntries[t].hasTie())return!0;return!1},a.prototype.findLinkedNotes=function(t){for(var e=0,n=this.voiceEntries.length;e<n;++e)for(var i=this.voiceEntries[e],r=0,o=i.Notes.length;r<o;++r){var s=i.Notes[r];s.ParentStaffEntry===this&&t.push(s)}},a);function a(t,e){this.voiceEntries=[],this.instructions=[],this.verticalContainerParent=t,this.parentStaff=e}e.SourceStaffEntry=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s,a,u=n(8),l=n(0),c=(s=u.AbstractExpression,r(h,s),Object.defineProperty(h.prototype,"DynamicType",{get:function(){return this.dynamicType},set:function(t){this.dynamicType=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"StartMultiExpression",{get:function(){return this.startMultiExpression},set:function(t){this.startMultiExpression=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"EndMultiExpression",{get:function(){return this.endMultiExpression},set:function(t){this.endMultiExpression=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"Placement",{get:function(){return this.placement},set:function(t){this.placement=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"StartVolume",{get:function(){return this.startVolume},set:function(t){this.startVolume=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"EndVolume",{get:function(){return this.endVolume},set:function(t){this.endVolume=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"StaffNumber",{get:function(){return this.staffNumber},set:function(t){this.staffNumber=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"Label",{get:function(){return this.label},set:function(t){this.label=t,this.setType()},enumerable:!0,configurable:!0}),h.isInputStringContinuousDynamic=function(t){return void 0!==t&&(h.isStringInStringList(h.listContinuousDynamicIncreasing,t)||h.isStringInStringList(h.listContinuousDynamicDecreasing,t))},h.prototype.getInterpolatedDynamic=function(t){var e,n=this.StartMultiExpression.AbsoluteTimestamp;if(e=void 0!==this.EndMultiExpression?this.EndMultiExpression.AbsoluteTimestamp:l.Fraction.plus(this.startMultiExpression.SourceMeasureParent.AbsoluteTimestamp,this.startMultiExpression.SourceMeasureParent.Duration),t.lt(n))return-1;if(e.lt(t))return-2;var i=l.Fraction.minus(t,n).RealValue/l.Fraction.minus(e,n).RealValue;return Math.max(0,Math.min(99.9,this.startVolume+(this.endVolume-this.startVolume)*i))},h.prototype.isWedge=function(){return void 0===this.label},h.prototype.setType=function(){h.isStringInStringList(h.listContinuousDynamicIncreasing,this.label)?this.dynamicType=o.crescendo:h.isStringInStringList(h.listContinuousDynamicDecreasing,this.label)&&(this.dynamicType=o.diminuendo)},h.listContinuousDynamicIncreasing=["crescendo","cresc","cresc.","cres."],h.listContinuousDynamicDecreasing=["decrescendo","decresc","decr.","diminuendo","dim.","dim"],h);function h(t,e,n,i){void 0===i&&(i="");var r=s.call(this,e)||this;return r.dynamicType=t,r.label=i,r.staffNumber=n,r.startVolume=-1,r.endVolume=-1,""!==i&&r.setType(),r}e.ContinuousDynamicExpression=c,(a=o=e.ContDynamicEnum||(e.ContDynamicEnum={}))[a.crescendo=0]="crescendo",a[a.diminuendo=1]="diminuendo"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(r.Compare=function(t,e){if(void 0!==t.parentRepetition&&void 0!==e.parentRepetition){if(t.alignment===s.End&&e.alignment===s.End){if(t.parentRepetition.StartIndex<e.parentRepetition.StartIndex)return 1;if(t.parentRepetition.StartIndex>e.parentRepetition.StartIndex)return-1}if(t.alignment===s.Begin&&e.alignment===s.Begin){if(t.parentRepetition.EndIndex<e.parentRepetition.EndIndex)return 1;if(t.parentRepetition.EndIndex>e.parentRepetition.EndIndex)return-1}}return 0},r);function r(){}e.RepetitionInstructionComparer=i;var o,s,a,u,l=(c.prototype.CompareTo=function(t){var e=t;if(this.measureIndex>e.measureIndex)return 1;if(this.measureIndex<e.measureIndex)return-1;if(this.alignment===s.Begin){if(e.alignment===s.End)return-1;switch(this.type){case o.Ending:return 1;case o.StartLine:return e.type===o.Ending?-1:1;case o.Coda:case o.Segno:return e.type===o.Coda?1:-1}}else{if(e.alignment===s.Begin)return 1;switch(this.type){case o.Ending:return-1;case o.Fine:case o.ToCoda:return e.type===o.Ending?1:-1;case o.ForwardJump:switch(e.type){case o.Ending:case o.Fine:case o.ToCoda:return 1}return-1;case o.DalSegnoAlFine:case o.DaCapoAlFine:case o.DalSegnoAlCoda:case o.DaCapoAlCoda:case o.DaCapo:case o.DalSegno:case o.BackJumpLine:return 1}}return 0},c.prototype.equals=function(t){if(this.measureIndex!==t.measureIndex||this.type!==t.type||this.alignment!==t.alignment)return!1;if(this.endingIndices===t.endingIndices)return!0;if(void 0===this.endingIndices||void 0===t.endingIndices||this.endingIndices.length!==t.endingIndices.length)return!1;for(var e=0;e<this.endingIndices.length;e++)if(this.endingIndices[e]!==t.endingIndices[e])return!1;return!0},c);function c(t,e,n,i,r){void 0===n&&(n=s.End),void 0===i&&(i=void 0),void 0===r&&(r=void 0),this.endingIndices=void 0,this.measureIndex=t,void 0!==r&&(this.endingIndices=r.slice()),this.type=e,this.alignment=n,this.parentRepetition=i}e.RepetitionInstruction=l,(u=o=e.RepetitionInstructionEnum||(e.RepetitionInstructionEnum={}))[u.StartLine=0]="StartLine",u[u.ForwardJump=1]="ForwardJump",u[u.BackJumpLine=2]="BackJumpLine",u[u.Ending=3]="Ending",u[u.DaCapo=4]="DaCapo",u[u.DalSegno=5]="DalSegno",u[u.Fine=6]="Fine",u[u.ToCoda=7]="ToCoda",u[u.DalSegnoAlFine=8]="DalSegnoAlFine",u[u.DaCapoAlFine=9]="DaCapoAlFine",u[u.DalSegnoAlCoda=10]="DalSegnoAlCoda",u[u.DaCapoAlCoda=11]="DaCapoAlCoda",u[u.Coda=12]="Coda",u[u.Segno=13]="Segno",u[u.None=14]="None",(a=s=e.AlignmentType||(e.AlignmentType={}))[a.Begin=0]="Begin",a[a.End=1]="End"},function(t,o,e){"use strict";for(var a=e(3),u=e(26),n=e(56),i=e(12),l=new Array(256),r=0;r<256;r++)l[r]=252<=r?6:248<=r?5:240<=r?4:224<=r?3:192<=r?2:1;function s(){i.call(this,"utf-8 decode"),this.leftOver=null}function c(){i.call(this,"utf-8 encode")}l[254]=l[254]=1,o.utf8encode=function(t){return u.nodebuffer?n.newBufferFrom(t,"utf-8"):function(t){var e,n,i,r,o,s=t.length,a=0;for(r=0;r<s;r++)55296==(64512&(n=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=t.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=u.uint8array?new Uint8Array(a):new Array(a),r=o=0;o<a;r++)55296==(64512&(n=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=t.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),n<128?e[o++]=n:(n<2048?e[o++]=192|n>>>6:(n<65536?e[o++]=224|n>>>12:(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63),e[o++]=128|n>>>6&63),e[o++]=128|63&n);return e}(t)},o.utf8decode=function(t){return u.nodebuffer?a.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,n,i,r,o=t.length,s=new Array(2*o);for(e=n=0;e<o;)if((i=t[e++])<128)s[n++]=i;else if(4<(r=l[i]))s[n++]=65533,e+=r-1;else{for(i&=2===r?31:3===r?15:7;1<r&&e<o;)i=i<<6|63&t[e++],r--;1<r?s[n++]=65533:i<65536?s[n++]=i:(i-=65536,s[n++]=55296|i>>10&1023,s[n++]=56320|1023&i)}return s.length!==n&&(s.subarray?s=s.subarray(0,n):s.length=n),a.applyFromCharCode(s)}(t=a.transformTo(u.uint8array?"uint8array":"array",t))},a.inherits(s,i),s.prototype.processChunk=function(t){var e=a.transformTo(u.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var n=e;(e=new Uint8Array(n.length+this.leftOver.length)).set(this.leftOver,0),e.set(n,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var i=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+l[t[n]]>e?n:e}(e),r=e;i!==e.length&&(u.uint8array?(r=e.subarray(0,i),this.leftOver=e.subarray(i,e.length)):(r=e.slice(0,i),this.leftOver=e.slice(i,e.length))),this.push({data:o.utf8decode(r),meta:t.meta})},s.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=s,a.inherits(c,i),c.prototype.processChunk=function(t){this.push({data:o.utf8encode(t.data),meta:t.meta})},o.Utf8EncodeWorker=c},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&p())}function p(){if(!c){var t=a(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function b(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||c||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=b,r.addListener=b,r.once=b,r.off=b,r.removeListener=b,r.removeAllListeners=b,r.emit=b,r.prependListener=b,r.prependOnceListener=b,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(10);function r(t,e,n){for(var i=n||a.defaultEquals,r=t.length,o=0;o<r;o++)if(i(t[o],e))return o;return-1}e.indexOf=r,e.lastIndexOf=function(t,e,n){for(var i=n||a.defaultEquals,r=t.length-1;0<=r;r--)if(i(t[r],e))return r;return-1},e.contains=function(t,e,n){return 0<=r(t,e,n)},e.remove=function(t,e,n){var i=r(t,e,n);return!(i<0||(t.splice(i,1),0))},e.frequency=function(t,e,n){for(var i=n||a.defaultEquals,r=t.length,o=0,s=0;s<r;s++)i(t[s],e)&&o++;return o},e.equals=function(t,e,n){var i=n||a.defaultEquals;if(t.length!==e.length)return!1;for(var r=t.length,o=0;o<r;o++)if(!i(t[o],e[o]))return!1;return!0},e.copy=function(t){return t.concat()},e.swap=function(t,e,n){if(e<0||e>=t.length||n<0||n>=t.length)return!1;var i=t[e];return t[e]=t[n],t[n]=i,!0},e.toString=function(t){return"["+t.toString()+"]"},e.forEach=function(t,e){for(var n=0,i=t;n<i.length;n++)if(!1===e(i[n]))return}},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.SystemLinePosition||(e.SystemLinePosition={}))[i.MeasureBegin=0]="MeasureBegin",i[i.MeasureEnd=1]="MeasureEnd"},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=(o=n(50).Voice,r(a,o),Object.defineProperty(a.prototype,"Master",{get:function(){return this.master},enumerable:!0,configurable:!0}),a);function a(t,e,n){var i=o.call(this,t,e)||this;return i.master=n,i}e.LinkedVoice=s},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.FontStyles||(e.FontStyles={}))[i.Regular=0]="Regular",i[i.Bold=1]="Bold",i[i.Italic=2]="Italic",i[i.BoldItalic=3]="BoldItalic",i[i.Underlined=4]="Underlined"},function(t,F,e){"use strict";(function(t){var a=e(210),o=e(211),s=e(149);function n(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=h.prototype:(null===t&&(t=new h(e)),t.length=e),t}function h(t,e,n){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(t,e,n);if("number"!=typeof t)return i(this,t,e,n);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return r(this,t)}function i(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),h.TYPED_ARRAY_SUPPORT?(t=e).__proto__=h.prototype:t=c(t,e),t}(t,e,n,i):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!h.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|p(e,n),r=(t=u(t,i)).write(e,n);return r!==i&&(t=t.slice(0,r)),t}(t,e,n):function(t,e){if(h.isBuffer(e)){var n=0|f(e.length);return 0===(t=u(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?u(t,0):c(t,e);if("Buffer"===e.type&&s(e.data))return c(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function r(t,e){if(l(e),t=u(t,e<0?0:0|f(e)),!h.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function c(t,e){var n=e.length<0?0:0|f(e.length);t=u(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function f(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function p(t,e){if(h.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return C(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return I(t).length;default:if(i)return C(t).length;e=(""+e).toLowerCase(),i=!0}}function d(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function b(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=h.from(e,i)),h.isBuffer(e))return 0===e.length?-1:y(t,e,n,i,r);if("number"==typeof e)return e&=255,h.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,i,r){var o,s=1,a=t.length,u=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a/=s=2,u/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var c=-1;for(o=n;o<a;o++)if(l(t,o)===l(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(a<n+u&&(n=a-u),o=n;0<=o;o--){for(var h=!0,f=0;f<u;f++)if(l(t,o+f)!==l(e,f)){h=!1;break}if(h)return o}return-1}function m(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<i&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function g(t,e,n,i){return N(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function v(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,s,a,u,l=t[r],c=null,h=239<l?4:223<l?3:191<l?2:1;if(r+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=t[r+1]))&&127<(u=(31&l)<<6|63&o)&&(c=u);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&2047<(u=(15&l)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(c=u);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(c=u)}null===c?(c=65533,h=1):65535<c&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),r+=h}return function(t){var e=t.length;if(e<=_)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=_));return n}(i)}F.Buffer=h,F.SlowBuffer=function(t){return+t!=t&&(t=0),h.alloc(+t)},F.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),F.kMaxLength=n(),h.poolSize=8192,h._augment=function(t){return t.__proto__=h.prototype,t},h.from=function(t,e,n){return i(null,t,e,n)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(t,e,n){return r=e,o=n,l(i=t),i<=0?u(null,i):void 0!==r?"string"==typeof o?u(null,i).fill(r,o):u(null,i).fill(r):u(null,i);var i,r,o},h.allocUnsafe=function(t){return r(null,t)},h.allocUnsafeSlow=function(t){return r(null,t)},h.isBuffer=function(t){return!(null==t||!t._isBuffer)},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!s(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var n;if(void 0===e)for(n=e=0;n<t.length;++n)e+=t[n].length;var i=h.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var o=t[n];if(!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},h.byteLength=p,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},h.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?v(this,0,t):function(t,e,n){var i,r,o,s=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return w(this,e,n);case"utf8":case"utf-8":return v(this,e,n);case"ascii":return S(this,e,n);case"latin1":case"binary":return x(this,e,n);case"base64":return i=this,o=n,0===(r=e)&&o===i.length?a.fromByteArray(i):a.fromByteArray(i.slice(r,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,n);default:if(s)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",e=F.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,n,i,r){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(r<=i&&n<=e)return 0;if(r<=i)return-1;if(n<=e)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(i,r),l=t.slice(e,n),c=0;c<a;++c)if(u[c]!==l[c]){o=u[c],s=l[c];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},h.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},h.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},h.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r,o,s,a,u,l,c,h,f,p=this.length-e;if((void 0===n||p<n)&&(n=p),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i=i||"utf8";for(var d=!1;;)switch(i){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return h=e,f=n,N(C(t,(c=this).length-h),c,h,f);case"ascii":return g(this,t,e,n);case"latin1":case"binary":return g(this,t,e,n);case"base64":return a=this,u=e,l=n,N(I(t),a,u,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o=e,s=n,N(function(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)i=(n=t.charCodeAt(s))>>8,r=n%256,o.push(r),o.push(i);return o}(t,(r=this).length-o),r,o,s);default:if(d)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),d=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function S(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function x(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function w(t,e,n){var i,r=t.length;(!e||e<0)&&(e=0),(!n||n<0||r<n)&&(n=r);for(var o="",s=e;s<n;++s)o+=(i=t[s])<16?"0"+i.toString(16):i.toString(16);return o}function E(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function P(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function T(t,e,n,i,r,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r<e||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function k(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function O(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function M(t,e,n,i){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(t,e,n,i,r){return r||M(t,0,n,4),o.write(t,e,n,i,23,4),n+4}function L(t,e,n,i,r){return r||M(t,0,n,8),o.write(t,e,n,i,52,8),n+8}h.prototype.slice=function(t,e){var n,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):i<t&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):i<e&&(e=i),e<t&&(e=t),h.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=h.prototype;else{var r=e-t;n=new h(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},h.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},h.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var i=this[t+--e],r=1;0<e&&(r*=256);)i+=this[t+--e]*r;return i},h.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},h.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var i=e,r=1,o=this[t+--i];0<i&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,n,i){t=+t,e|=0,n|=0,i||T(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},h.prototype.writeUIntBE=function(t,e,n,i){t=+t,e|=0,n|=0,i||T(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;0<=--r&&(o*=256);)this[e+r]=t/o&255;return e+n},h.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,1,255,0),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},h.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},h.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):O(this,t,e,!0),e+4},h.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},h.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);T(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},h.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);T(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;0<=--o&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},h.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,1,127,-128),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},h.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},h.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):O(this,t,e,!0),e+4},h.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},h.prototype.writeFloatLE=function(t,e,n){return R(this,t,e,!0,n)},h.prototype.writeFloatBE=function(t,e,n){return R(this,t,e,!1,n)},h.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},h.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},h.prototype.copy=function(t,e,n,i){if(n=n||0,i||0===i||(i=this.length),e>=t.length&&(e=t.length),e=e||0,0<i&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;0<=r;--r)t[r+e]=this[r+n];else if(o<1e3||!h.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},h.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!h.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(t=t||0))for(o=e;o<n;++o)this[o]=t;else{var s=h.isBuffer(t)?t:C(new h(t,i).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var A=/[^+\/0-9A-Za-z-_]/g;function C(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],s=0;s<i;++s){if(55295<(n=t.charCodeAt(s))&&n<57344){if(!r){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===i){-1<(e-=3)&&o.push(239,191,189);continue}r=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&-1<(e-=3)&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function I(t){return a.toByteArray(function(t){if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(A,"")).length<2)return"";for(var e;t.length%4!=0;)t+="=";return t}(t))}function N(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,e(19))},function(t,n,e){(function(t){function e(t){return Object.prototype.toString.call(t)}n.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},n.isBoolean=function(t){return"boolean"==typeof t},n.isNull=function(t){return null===t},n.isNullOrUndefined=function(t){return null==t},n.isNumber=function(t){return"number"==typeof t},n.isString=function(t){return"string"==typeof t},n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=function(t){return void 0===t},n.isRegExp=function(t){return"[object RegExp]"===e(t)},n.isObject=function(t){return"object"==typeof t&&null!==t},n.isDate=function(t){return"[object Date]"===e(t)},n.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},n.isFunction=function(t){return"function"==typeof t},n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=t.isBuffer}).call(this,e(45).Buffer)},function(t,e,n){"use strict";var i;i="undefined"!=typeof Promise?Promise:n(224),t.exports={Promise:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(0),o=(Object.defineProperty(s.prototype,"ParentVoiceEntry",{get:function(){return this.voiceEntry},set:function(t){this.voiceEntry=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"ParentStaffEntry",{get:function(){return this.parentStaffEntry},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"ParentStaff",{get:function(){return this.parentStaffEntry.ParentStaff},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"Length",{get:function(){return this.length},set:function(t){this.length=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"TypeLength",{get:function(){return this.typeLength},set:function(t){this.typeLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"NormalNotes",{get:function(){return this.normalNotes},set:function(t){this.normalNotes=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"Pitch",{get:function(){return this.pitch},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"NoteBeam",{get:function(){return this.beam},set:function(t){this.beam=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"Notehead",{get:function(){return this.notehead},set:function(t){this.notehead=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"NoteTuplet",{get:function(){return this.tuplet},set:function(t){this.tuplet=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"NoteTie",{get:function(){return this.tie},set:function(t){this.tie=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"NoteSlurs",{get:function(){return this.slurs},set:function(t){this.slurs=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"PlaybackInstrumentId",{get:function(){return this.playbackInstrumentId},set:function(t){this.playbackInstrumentId=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"PrintObject",{get:function(){return this.printObject},set:function(t){this.printObject=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"Arpeggio",{get:function(){return this.arpeggio},set:function(t){this.arpeggio=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"IsCueNote",{get:function(){return this.isCueNote},set:function(t){this.isCueNote=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"StemDirectionXml",{get:function(){return this.stemDirectionXml},set:function(t){this.stemDirectionXml=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"TremoloStrokes",{get:function(){return this.tremoloStrokes},set:function(t){this.tremoloStrokes=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"StemColorXml",{get:function(){return this.stemColorXml},set:function(t){this.stemColorXml=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"NoteheadColorXml",{get:function(){return this.noteheadColorXml},set:function(t){this.noteheadColorXml=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"NoteheadColor",{get:function(){return this.noteheadColor},set:function(t){this.noteheadColor=t},enumerable:!0,configurable:!0}),s.prototype.isRest=function(){return void 0===this.Pitch},s.prototype.ToString=function(){return void 0!==this.pitch?this.Pitch.ToString()+", length: "+this.length.toString():"rest note, length: "+this.length.toString()},s.prototype.getAbsoluteTimestamp=function(){return r.Fraction.plus(this.voiceEntry.Timestamp,this.parentStaffEntry.VerticalContainerParent.ParentMeasure.AbsoluteTimestamp)},s.prototype.checkForDoubleSlur=function(t){for(var e=0,n=this.slurs.length;e<n;++e){var i=this.slurs[e];if(void 0!==i.StartNote&&void 0!==i.EndNote&&void 0!==t.StartNote&&t.StartNote===i.StartNote&&i.EndNote===this)return!0}return!1},s);function s(t,e,n,i){this.slurs=[],this.playbackInstrumentId=void 0,this.notehead=void 0,this.printObject=!0,this.voiceEntry=t,this.parentStaffEntry=e,this.length=n,this.pitch=i,this.halfTone=void 0!==i?i.getHalfTone():0}e.Note=o,(i=e.Appearance||(e.Appearance={}))[i.Normal=0]="Normal",i[i.Grace=1]="Grace",i[i.Cue=2]="Cue"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(2),o=(Object.defineProperty(s.prototype,"GetOrnament",{get:function(){return this.ornament},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"AccidentalAbove",{get:function(){return this.accidentalAbove},set:function(t){this.accidentalAbove=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"AccidentalBelow",{get:function(){return this.accidentalBelow},set:function(t){this.accidentalBelow=t},enumerable:!0,configurable:!0}),s);function s(t){this.accidentalAbove=r.AccidentalEnum.NONE,this.accidentalBelow=r.AccidentalEnum.NONE,this.ornament=t}e.OrnamentContainer=o,(i=e.OrnamentEnum||(e.OrnamentEnum={}))[i.Trill=0]="Trill",i[i.Turn=1]="Turn",i[i.InvertedTurn=2]="InvertedTurn",i[i.DelayedTurn=3]="DelayedTurn",i[i.DelayedInvertedTurn=4]="DelayedInvertedTurn",i[i.Mordent=5]="Mordent",i[i.InvertedMordent=6]="InvertedMordent"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(r.prototype,"VoiceEntries",{get:function(){return this.voiceEntries},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Parent",{get:function(){return this.parent},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Visible",{get:function(){return this.visible},set:function(t){this.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Audible",{get:function(){return this.audible},set:function(t){this.audible=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Following",{get:function(){return this.following},set:function(t){this.following=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"VoiceId",{get:function(){return this.voiceId},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Volume",{get:function(){return this.volume},set:function(t){this.volume=t},enumerable:!0,configurable:!0}),r);function r(t,e){this.voiceEntries=[],this.volume=1,this.parent=t,this.visible=!0,this.audible=!0,this.following=!0,this.voiceId=e}e.Voice=i},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(7),a=n(5),u=n(4),l=(o=s.GraphicalObject,r(c,o),Object.defineProperty(c.prototype,"Label",{get:function(){return this.label},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"ParentStaffLine",{get:function(){return this.parentStaffLine},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"SourceExpression",{get:function(){return this.expression},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"Placement",{get:function(){return this.expression.Placement},enumerable:!0,configurable:!0}),c);function c(t,e){var n=o.call(this)||this;return n.rules=u.EngravingRules.Rules,n.expression=e,n.boundingBox=new a.BoundingBox(n,t.PositionAndShape),n.parentStaffLine=t,n.parentStaffLine.AbstractExpressions.push(n),n}e.AbstractGraphicalExpression=l},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(21),s=n(36),c=n(6),u=n(51),l=n(8),h=n(1),f=(o=u.AbstractGraphicalExpression,r(p,o),Object.defineProperty(p.prototype,"StartMeasure",{get:function(){return this.startMeasure},set:function(t){this.startMeasure=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"EndMeasure",{get:function(){return this.endMeasure},set:function(t){this.endMeasure=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"EndStaffLine",{get:function(){return this.endMeasure?this.endMeasure.ParentStaffLine:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"IsSplittedPart",{get:function(){return this.isSplittedPart},set:function(t){this.isSplittedPart=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"IsVerbal",{get:function(){return void 0!==this.ContinuousDynamic.Label&&0<this.ContinuousDynamic.Label.length},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"NotToBeRemoved",{get:function(){return this.notToBeRemoved},set:function(t){this.notToBeRemoved=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"Lines",{get:function(){return this.lines},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"ContinuousDynamic",{get:function(){return this.SourceExpression},enumerable:!0,configurable:!0}),p.prototype.updateSkyBottomLine=function(){var t=this.parentStaffLine.SkyBottomLineCalculator,e=this.IsVerbal?this.label.PositionAndShape.RelativePosition.x+this.label.PositionAndShape.BorderMarginLeft:0,n=this.IsVerbal?this.label.PositionAndShape.RelativePosition.x+this.label.PositionAndShape.BorderMarginRight:0;switch(!this.IsVerbal&&this.lines.length<2&&h.warn("Not enough lines for SkyBottomLine calculation"),this.Placement){case l.PlacementEnum.Above:if(this.IsVerbal){var i=this.label.PositionAndShape.BorderMarginTop+this.label.PositionAndShape.RelativePosition.y;t.updateSkyLineInRange(e,n,i)}else t.updateSkyLineWithWedge(this.lines[0].Start,this.lines[0].End);break;case l.PlacementEnum.Below:this.IsVerbal?(i=this.label.PositionAndShape.BorderMarginBottom+this.label.PositionAndShape.RelativePosition.y,t.updateBottomLineInRange(e,n,i)):t.updateBottomLineWithWedge(this.lines[1].Start,this.lines[1].End);break;default:h.error("Placement for GraphicalContinuousDynamicExpression is unknown")}},p.prototype.createCrescendoLines=function(t,e,n,i,r){void 0===i&&(i=this.rules.WedgeOpeningLength),void 0===r&&(r=this.rules.WedgeLineWidth);var o=new c.PointF2D(t,n),s=new c.PointF2D(e,n-i/2),a=new c.PointF2D(e,n+i/2);this.addWedgeLines(o,s,a,r)},p.prototype.createFirstHalfCrescendoLines=function(t,e,n,i,r){void 0===i&&(i=this.rules.WedgeMeasureEndOpeningLength),void 0===r&&(r=this.rules.WedgeLineWidth);var o=new c.PointF2D(t,n),s=new c.PointF2D(e,n-i/2),a=new c.PointF2D(e,n+i/2);this.addWedgeLines(o,s,a,r)},p.prototype.createSecondHalfCrescendoLines=function(t,e,n,i,r,o){void 0===i&&(i=this.rules.WedgeMeasureBeginOpeningLength),void 0===r&&(r=this.rules.WedgeOpeningLength),void 0===o&&(o=this.rules.WedgeLineWidth);var s=new c.PointF2D(t,n-i/2),a=new c.PointF2D(t,n+i/2),u=new c.PointF2D(e,n-r/2),l=new c.PointF2D(e,n+r/2);this.addDoubleLines(s,u,a,l,o)},p.prototype.recalculateCrescendoLines=function(t,e,n){var i=1e-4<Math.abs(this.lines[0].Start.y-this.lines[1].Start.y);this.lines.clear(),i?this.createSecondHalfCrescendoLines(t,e,n):this.isSplittedPart?this.createFirstHalfCrescendoLines(t,e,n):this.createCrescendoLines(t,e,n)},p.prototype.createDiminuendoLines=function(t,e,n,i,r){void 0===i&&(i=this.rules.WedgeOpeningLength),void 0===r&&(r=this.rules.WedgeLineWidth);var o=new c.PointF2D(t,n-i/2),s=new c.PointF2D(t,n+i/2),a=new c.PointF2D(e,n);this.addWedgeLines(a,o,s,r)},p.prototype.createFirstHalfDiminuendoLines=function(t,e,n,i,r,o){void 0===i&&(i=this.rules.WedgeOpeningLength),void 0===r&&(r=this.rules.WedgeMeasureEndOpeningLength),void 0===o&&(o=this.rules.WedgeLineWidth);var s=new c.PointF2D(t,n-i/2),a=new c.PointF2D(t,n+i/2),u=new c.PointF2D(e,n-r/2),l=new c.PointF2D(e,n+r/2);this.addDoubleLines(s,u,a,l,o)},p.prototype.createSecondHalfDiminuendoLines=function(t,e,n,i,r){void 0===i&&(i=this.rules.WedgeMeasureBeginOpeningLength),void 0===r&&(r=this.rules.WedgeLineWidth);var o=new c.PointF2D(t,n-i/2),s=new c.PointF2D(t,n+i/2),a=new c.PointF2D(e,n);this.addWedgeLines(a,o,s,r)},p.prototype.recalculateDiminuendoLines=function(t,e,n){var i=1e-4<Math.abs(this.lines[0].End.y-this.lines[1].End.y);this.lines.clear(),i?this.createFirstHalfDiminuendoLines(t,e,n):this.isSplittedPart?this.createSecondHalfDiminuendoLines(t,e,n):this.createDiminuendoLines(t,e,n)},p.prototype.calcPsi=function(){this.IsVerbal?this.PositionAndShape.calculateBoundingBox():(this.PositionAndShape.RelativePosition=this.lines[0].Start,this.PositionAndShape.BorderMarginTop=this.lines[0].End.y-this.lines[0].Start.y,this.PositionAndShape.BorderMarginBottom=this.lines[1].End.y-this.lines[1].Start.y,this.ContinuousDynamic.DynamicType===s.ContDynamicEnum.crescendo?(this.PositionAndShape.BorderMarginLeft=0,this.PositionAndShape.BorderMarginRight=this.lines[0].End.x-this.lines[0].Start.x):(this.PositionAndShape.BorderMarginLeft=this.lines[0].End.x-this.lines[0].Start.x,this.PositionAndShape.BorderMarginRight=0))},p.prototype.cleanUp=function(){this.lines.clear()},p.prototype.shiftYPosition=function(t){this.IsVerbal?(this.PositionAndShape.RelativePosition.y+=t,this.PositionAndShape.calculateBoundingBox()):(this.lines[0].Start.y+=t,this.lines[0].End.y+=t,this.lines[1].End.y+=t)},p.prototype.squeeze=function(t){this.IsVerbal||Math.abs(this.lines[0].End.x-this.lines[0].Start.x)<Math.abs(t)||(this.ContinuousDynamic.DynamicType===s.ContDynamicEnum.crescendo?0<t?this.lines[0].Start.x+=t:(this.lines[0].End.x+=t,this.lines[1].End.x+=t):t<0?this.lines[0].Start.x+=t:(this.lines[0].End.x+=t,this.lines[1].End.x+=t),this.calcPsi())},p.prototype.addWedgeLines=function(t,e,n,i){var r=new a.GraphicalLine(t,e,i),o=new a.GraphicalLine(t,n,i);this.lines.push(r),this.lines.push(o)},p.prototype.addDoubleLines=function(t,e,n,i,r){var o=new a.GraphicalLine(t,e,r),s=new a.GraphicalLine(n,i,r);this.lines.push(o),this.lines.push(s)},p);function p(t,e){var n=o.call(this,e,t)||this;return n.lines=[],n.isSplittedPart=!1,n.notToBeRemoved=!1,n}e.GraphicalContinuousDynamicExpression=f},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s,a,u=n(8),l=n(194),c=n(13),h=n(1),f=(s=u.AbstractExpression,r(p,s),Object.defineProperty(p.prototype,"ParentMultiExpression",{get:function(){return this.multiExpression},set:function(t){this.multiExpression=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"DynEnum",{get:function(){return this.dynamicEnum},set:function(t){this.dynamicEnum=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"SoundDynamic",{get:function(){return this.soundDynamic},set:function(t){this.soundDynamic=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"Placement",{get:function(){return this.placement},set:function(t){this.placement=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"StaffNumber",{get:function(){return this.staffNumber},set:function(t){this.staffNumber=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"Length",{get:function(){return Math.abs(this.length)<1e-4&&(this.length=this.calculateLength()),this.length},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"MidiVolume",{get:function(){return 127*p.dynamicToRelativeVolumeDict[this.dynamicEnum]},enumerable:!0,configurable:!0}),p.isInputStringInstantaneousDynamic=function(t){return void 0!==t&&p.isStringInStringList(p.listInstantaneousDynamics,t)},p.prototype.getDynamicExpressionSymbol=function(t){switch(t){case"p":return l.DynamicExpressionSymbolEnum.p;case"f":return l.DynamicExpressionSymbolEnum.f;case"s":return l.DynamicExpressionSymbolEnum.s;case"z":return l.DynamicExpressionSymbolEnum.z;case"m":return l.DynamicExpressionSymbolEnum.m;case"r":return l.DynamicExpressionSymbolEnum.r;default:throw new c.InvalidEnumArgumentException("unknown DynamicExpressionSymbolEnum: "+t)}},p.prototype.calculateLength=function(){return h.debug("[Andrea] instantaneousDynamicExpression: not implemented: calculateLength!"),0},p.dynamicToRelativeVolumeDict={f:92/127,ff:108/127,fff:124/127,ffff:125/127,fffff:126/127,ffffff:1,fp:.5,fz:.5,mf:76/127,mp:60/127,p:44/127,pp:28/127,ppp:12/127,pppp:10/127,ppppp:8/127,pppppp:6/127,rf:.5,rfz:.5,sf:.5,sff:.5,sffz:.5,sfp:.5,sfpp:.5,sfz:.5},p.listInstantaneousDynamics=["pppppp","ppppp","pppp","ppp","pp","p","ffffff","fffff","ffff","fff","ff","f","mf","mp","sf","sff","sp","spp","fp","rf","rfz","sfz","sffz","fz"],p);function p(t,e,n,i){var r=s.call(this,n)||this;return r.dynamicEnum=o[t.toLowerCase()],r.soundDynamic=e,r.staffNumber=i,r}e.InstantaneousDynamicExpression=f,(a=o=e.DynamicEnum||(e.DynamicEnum={}))[a.pppppp=0]="pppppp",a[a.ppppp=1]="ppppp",a[a.pppp=2]="pppp",a[a.ppp=3]="ppp",a[a.pp=4]="pp",a[a.p=5]="p",a[a.mp=6]="mp",a[a.mf=7]="mf",a[a.f=8]="f",a[a.ff=9]="ff",a[a.fff=10]="fff",a[a.ffff=11]="ffff",a[a.fffff=12]="fffff",a[a.ffffff=13]="ffffff",a[a.sf=14]="sf",a[a.sff=15]="sff",a[a.sfp=16]="sfp",a[a.sfpp=17]="sfpp",a[a.fp=18]="fp",a[a.rf=19]="rf",a[a.rfz=20]="rfz",a[a.sfz=21]="sfz",a[a.sffz=22]="sffz",a[a.fz=23]="fz",a[a.other=24]="other"},function(t,e,n){"use strict";(function(a){void 0===a||!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?t.exports={nextTick:function(t,e,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var r,o,s=arguments.length;switch(s){case 0:case 1:return a.nextTick(t);case 2:return a.nextTick(function(){t.call(null,e)});case 3:return a.nextTick(function(){t.call(null,e,n)});case 4:return a.nextTick(function(){t.call(null,e,n,i)});default:for(r=new Array(s-1),o=0;o<r.length;)r[o++]=arguments[o];return a.nextTick(function(){t.apply(null,r)})}}}:t.exports=a}).call(this,n(40))},function(t,e,n){var i=n(45),r=i.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return r(t,e,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(o(i,e),e.Buffer=s),o(r,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=r(t);return void 0!==e?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},function(t,e,n){"use strict";(function(n){t.exports={isNode:void 0!==n,newBufferFrom:function(t,e){if(n.from&&n.from!==Uint8Array.from)return n.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new n(t,e)},allocBuffer:function(t){if(n.alloc)return n.alloc(t);var e=new n(t);return e.fill(0),e},isBuffer:function(t){return n.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}}).call(this,n(45).Buffer)},function(e,t,n){(function(V,G){var t;t=function(){"use strict";function u(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,e=void 0,r=void 0,a=function(t,e){f[i]=t,f[i+1]=e,2===(i+=2)&&(r?r(p):g())},t="undefined"!=typeof window?window:void 0,o=t||{},s=o.MutationObserver||o.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==V&&"[object process]"==={}.toString.call(V),c="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var t=setTimeout;return function(){return t(p,1)}}var f=new Array(1e3);function p(){for(var t=0;t<i;t+=2)(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0;i=0}var d,b,y,m,g=void 0;function v(t,e){var n=this,i=new this.constructor(x);void 0===i[S]&&N(i);var r=n._state;if(r){var o=arguments[r-1];a(function(){return C(r,i,o,n._result)})}else L(n,i,t,e);return i}function _(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(x);return k(e,t),e}g=l?function(){return V.nextTick(p)}:s?(b=0,y=new s(p),m=document.createTextNode(""),y.observe(m,{characterData:!0}),function(){m.data=b=++b%2}):c?((d=new MessageChannel).port1.onmessage=p,function(){return d.port2.postMessage(0)}):void 0===t?function(){try{var t=Function("return this")().require("vertx");return void 0!==(e=t.runOnLoop||t.runOnContext)?function(){e(p)}:h()}catch(t){return h()}}():h();var S=Math.random().toString(36).substring(2);function x(){}var w=void 0,E=1,P=2;function T(t,e,n){var r,o,i,s;e.constructor===t.constructor&&n===v&&e.constructor.resolve===_?(i=t,(s=e)._state===E?M(i,s._result):s._state===P?R(i,s._result):L(s,void 0,function(t){return k(i,t)},function(t){return R(i,t)})):void 0===n?M(t,e):u(n)?(r=e,o=n,a(function(n){var i=!1,t=function(t,e){try{t.call(e,function(t){i||(i=!0,r!==t?k(n,t):M(n,t))},function(t){i||(i=!0,R(n,t))})}catch(t){return t}}(o,r,n._label);!i&&t&&(i=!0,R(n,t))},t)):M(t,e)}function k(t,e){if(t===e)R(t,new TypeError("You cannot resolve a promise with itself"));else if(r=typeof(i=e),null===i||"object"!=r&&"function"!=r)M(t,e);else{var n=void 0;try{n=e.then}catch(e){return void R(t,e)}T(t,e,n)}var i,r}function O(t){t._onerror&&t._onerror(t._result),A(t)}function M(t,e){t._state===w&&(t._result=e,t._state=E,0!==t._subscribers.length&&a(A,t))}function R(t,e){t._state===w&&(t._state=P,t._result=e,a(O,t))}function L(t,e,n,i){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+E]=n,r[o+P]=i,0===o&&t._state&&a(A,t)}function A(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i=void 0,r=void 0,o=t._result,s=0;s<e.length;s+=3)i=e[s],r=e[s+n],i?C(n,i,r,o):r(o);t._subscribers.length=0}}function C(t,e,n,i){var r=u(n),o=void 0,s=void 0,a=!0;if(r){try{o=n(i)}catch(t){a=!1,s=t}if(e===o)return void R(e,new TypeError("A promises callback cannot return that same promise."))}else o=i;e._state!==w||(r&&a?k(e,o):!1===a?R(e,s):t===E?M(e,o):t===P&&R(e,o))}var I=0;function N(t){t[S]=I++,t._state=void 0,t._result=void 0,t._subscribers=[]}var F=(j.prototype._enumerate=function(t){for(var e=0;this._state===w&&e<t.length;e++)this._eachEntry(t[e],e)},j.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===_){var r=void 0,o=void 0,s=!1;try{r=e.then}catch(e){s=!0,o=e}if(r===v&&e._state!==w)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===B){var a=new n(x);s?R(a,o):T(a,e,r),this._willSettleAt(a,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},j.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===w&&(this._remaining--,t===P?R(i,n):this._result[e]=n),0===this._remaining&&M(i,this._result)},j.prototype._willSettleAt=function(t,e){var n=this;L(t,void 0,function(t){return n._settledAt(E,e,t)},function(t){return n._settledAt(P,e,t)})},j),B=(D.prototype.catch=function(t){return this.then(null,t)},D.prototype.finally=function(e){var n=this.constructor;return u(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},D);function D(t){this[S]=I++,this._result=this._state=void 0,this._subscribers=[],x!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof D?function(e,t){try{t(function(t){k(e,t)},function(t){R(e,t)})}catch(t){R(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function j(t,e){this._instanceConstructor=t,this.promise=new t(x),this.promise[S]||N(this.promise),n(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?M(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&M(this.promise,this._result))):R(this.promise,new Error("Array Methods must be provided an Array"))}return B.prototype.then=v,B.all=function(t){return new F(this,t).promise},B.race=function(r){var o=this;return n(r)?new o(function(t,e){for(var n=r.length,i=0;i<n;i++)o.resolve(r[i]).then(t,e)}):new o(function(t,e){return e(new TypeError("You must pass an array to race."))})},B.resolve=_,B.reject=function(t){var e=new this(x);return R(e,t),e},B._setScheduler=function(t){r=t},B._setAsap=function(t){a=t},B._asap=a,B.polyfill=function(){var t=void 0;if(void 0!==G)t=G;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=B},B.Promise=B},e.exports=t()}).call(this,n(40),n(19))},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s,a,u=n(5),l=n(7),c=n(6),h=(s=l.GraphicalObject,r(f,s),Object.defineProperty(f.prototype,"MusicSystems",{get:function(){return this.musicSystems},set:function(t){this.musicSystems=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"Labels",{get:function(){return this.labels},set:function(t){this.labels=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"Parent",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!0,configurable:!0}),f.prototype.setMusicPageAbsolutePosition=function(t,e){return e.PagePlacement===o.Down?new c.PointF2D(0,t*e.PageHeight):e.PagePlacement===o.Right?new c.PointF2D(t*this.parent.ParentMusicSheet.pageWidth,0):t%2==0?0===t?new c.PointF2D(0,t*e.PageHeight):new c.PointF2D(0,(t-1)*e.PageHeight):1===t?new c.PointF2D(this.parent.ParentMusicSheet.pageWidth,(t-1)*e.PageHeight):new c.PointF2D(this.parent.ParentMusicSheet.pageWidth,(t-2)*e.PageHeight)},f);function f(t){var e=s.call(this)||this;return e.musicSystems=[],e.labels=[],e.parent=t,e.boundingBox=new u.BoundingBox(e,void 0),e}e.GraphicalMusicPage=h,(a=o=e.PagePlacementEnum||(e.PagePlacementEnum={}))[a.Down=0]="Down",a[a.Right=1]="Right",a[a.RightDown=2]="RightDown"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(86),r=n(6),o=(s.createFromLocationAndSize=function(t,e){return new s(t.x,t.y,e.width,e.height)},Object.defineProperty(s.prototype,"Location",{get:function(){return new r.PointF2D(this.x,this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"Size",{get:function(){return new i.SizeF2D(this.width,this.height)},enumerable:!0,configurable:!0}),s);function s(t,e,n,i){this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=e,this.width=n,this.height=i}e.RectangleF2D=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(s.prototype.attribute=function(t){return this.elem.attributes.getNamedItem(t)},s.prototype.attributes=function(){if(!this.attrs){for(var t=this.elem.attributes,e=[],n=0;n<t.length;n+=1)e.push(t[n]);this.attrs=e}return this.attrs},s.prototype.element=function(t){for(var e=this.elem.childNodes,n=0,i=e.length;n<i;n+=1){var r=e[n];if(r.nodeType===Node.ELEMENT_NODE&&r.nodeName.toLowerCase()===t)return new s(r)}},s.prototype.elements=function(t){var e=this.elem.childNodes,n=[],i=void 0===t;i||(t=t.toLowerCase());for(var r=0;r<e.length;r+=1){var o=e[r];o.nodeType!==Node.ELEMENT_NODE||!i&&o.nodeName.toLowerCase()!==t||n.push(new s(o))}return n},s);function s(t){if(this.hasAttributes=!1,void 0===t)throw new Error("IXmlElement: expected Element, got undefined");this.elem=t,this.name=t.nodeName.toLowerCase(),t.hasAttributes()&&(this.hasAttributes=!0,this.firstAttribute=t.attributes[0]),this.hasElements=t.hasChildNodes(),1===t.childNodes.length&&t.childNodes[0].nodeType===Node.TEXT_NODE?this.value=t.childNodes[0].nodeValue:this.value=""}e.IXmlElement=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(87),a=n(21),h=n(6),u=n(11),o=n(17),y=n(0),f=n(5),s=n(1),l=n(28),r=(Object.defineProperty(c.prototype,"ParentMusicSheet",{get:function(){return this.musicSheet},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"GetCalculator",{get:function(){return this.calculator},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"MusicPages",{get:function(){return this.musicPages},set:function(t){this.musicPages=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"MeasureList",{get:function(){return this.measureList},set:function(t){this.measureList=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"VerticalGraphicalStaffEntryContainers",{get:function(){return this.verticalGraphicalStaffEntryContainers},set:function(t){this.verticalGraphicalStaffEntryContainers=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"Title",{get:function(){return this.title},set:function(t){this.title=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"Subtitle",{get:function(){return this.subtitle},set:function(t){this.subtitle=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"Composer",{get:function(){return this.composer},set:function(t){this.composer=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"Lyricist",{get:function(){return this.lyricist},set:function(t){this.lyricist=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"Cursors",{get:function(){return this.cursors},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"SelectionStartSymbol",{get:function(){return this.selectionStartSymbol},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"SelectionEndSymbol",{get:function(){return this.selectionEndSymbol},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"MinAllowedSystemWidth",{get:function(){return this.minAllowedSystemWidth},set:function(t){this.minAllowedSystemWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"NumberOfStaves",{get:function(){return this.numberOfStaves},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"LeadSheet",{get:function(){return this.leadSheet},set:function(t){this.leadSheet=t},enumerable:!0,configurable:!0}),c.transformRelativeToAbsolutePosition=function(t){for(var e=0;e<t.MusicPages.length;e++){var n=t.MusicPages[e].setMusicPageAbsolutePosition(e,t.ParentMusicSheet.rules);t.MusicPages[e].PositionAndShape.calculateAbsolutePositionsRecursive(n.x,n.y)}},c.prototype.Initialize=function(){this.verticalGraphicalStaffEntryContainers=[],this.musicPages=[],this.measureList=[]},c.prototype.reCalculate=function(){this.calculator.calculate()},c.prototype.prepare=function(){this.calculator.prepareGraphicalMusicSheet()},c.prototype.EnforceRedrawOfMusicSystems=function(){for(var t=0,e=this.musicPages.length;t<e;++t)for(var n=this.musicPages[t],i=0,r=n.MusicSystems.length;i<r;++i)n.MusicSystems[i].needsToBeRedrawn=!0},c.prototype.getClickedObject=function(t){for(var e=0,n=this.MusicPages.length;e<n;++e)return this.MusicPages[e].PositionAndShape.getClickedObjectOfType(t)},c.prototype.findGraphicalStaffEntryFromMeasureList=function(t,e,n){for(var i=e;i<this.measureList.length;i++)for(var r=this.measureList[i][t],o=0,s=r.staffEntries.length;o<s;++o){var a=r.staffEntries[o];if(a.sourceStaffEntry===n)return a}},c.prototype.findNextGraphicalStaffEntry=function(t,e,n){var i=n.parentMeasure,r=i.staffEntries.indexOf(n);if(r<i.staffEntries.length-1)return i.staffEntries[r+1];if(e<this.measureList.length-1){var o=this.measureList[e+1][t];if(0<o.staffEntries.length)return o.staffEntries[0]}},c.prototype.getFirstVisibleMeasuresListFromIndeces=function(t,e){for(var n=[],i=this.measureList[0].length,r=t;r<=e;r++)for(var o=0;o<i;o++)if(this.measureList[r][o].isVisible()){n.push(this.measureList[r][o]);break}return n},c.prototype.orderMeasuresByStaffLine=function(t){var e=[],n=[];e.push(n);for(var i=0;i<t.length;i++)0===i?n.push(t[0]):(t[i].ParentStaffLine===t[i-1].ParentStaffLine||(-1===e.indexOf(n)&&e.push(n),n=[],e.push(n)),n.push(t[i]));return e},c.prototype.initializeActiveClefs=function(){var t=[],e=this.musicSheet.getFirstSourceMeasure();if(void 0!==e)for(var n=0;n<e.CompleteNumberOfStaves;n++){var i=new u.ClefInstruction;if(void 0!==e.FirstInstructionsStaffEntries[n])for(var r=0,o=e.FirstInstructionsStaffEntries[n].Instructions.length;r<o;++r){var s=e.FirstInstructionsStaffEntries[n].Instructions[r];s instanceof u.ClefInstruction&&(i=s)}t.push(i)}return t},c.prototype.GetMainKey=function(){var t=this.musicSheet.getFirstSourceMeasure();if(void 0!==t)for(var e=0;e<t.CompleteNumberOfStaves;e++)for(var n=0,i=t.FirstInstructionsStaffEntries[e].Instructions.length;n<i;++n){var r=t.FirstInstructionsStaffEntries[e].Instructions[n];if(r instanceof o.KeyInstruction)return r}},c.prototype.getOrCreateVerticalContainer=function(t){if(0===this.verticalGraphicalStaffEntryContainers.length||l.CollectionUtil.getLastElement(this.verticalGraphicalStaffEntryContainers).AbsoluteTimestamp.lt(t)){var e=new i.VerticalGraphicalStaffEntryContainer(this.numberOfStaves,t);return this.verticalGraphicalStaffEntryContainers.push(e),e}for(var n=this.verticalGraphicalStaffEntryContainers.length-1;0<=n;n--){if(this.verticalGraphicalStaffEntryContainers[n].AbsoluteTimestamp.lt(t))return e=new i.VerticalGraphicalStaffEntryContainer(this.numberOfStaves,t),this.verticalGraphicalStaffEntryContainers.splice(n+1,0,e),e;if(this.verticalGraphicalStaffEntryContainers[n].AbsoluteTimestamp.Equals(t))return this.verticalGraphicalStaffEntryContainers[n]}},c.prototype.GetVerticalContainerFromTimestamp=function(t,e){void 0===e&&(e=0);var n=l.CollectionUtil.binarySearch(this.verticalGraphicalStaffEntryContainers,new i.VerticalGraphicalStaffEntryContainer(0,t),i.VerticalGraphicalStaffEntryContainer.compareByTimestamp,e);if(0<=n)return this.verticalGraphicalStaffEntryContainers[n]},c.prototype.GetInterpolatedIndexInVerticalContainers=function(t){var e,n=this.verticalGraphicalStaffEntryContainers,i=0,r=n.length-1,o=void 0,s=void 0;if(t.lte(n[n.length-1].AbsoluteTimestamp)){for(;1<r-i;){var a=Math.floor((r+i)/2);if(n[i].AbsoluteTimestamp.Equals(t)){r=i;break}if(n[r].AbsoluteTimestamp.Equals(t)){i=r;break}if(n[a].AbsoluteTimestamp.Equals(t))return this.verticalGraphicalStaffEntryContainers.indexOf(n[a]);t.lt(n[a].AbsoluteTimestamp)?r=a:i=a}if(i===r)return this.verticalGraphicalStaffEntryContainers.indexOf(n[i]);o=n[i].AbsoluteTimestamp,s=n[r].AbsoluteTimestamp}else o=n[n.length-1].AbsoluteTimestamp,s=y.Fraction.plus(this.getLongestStaffEntryDuration(n.length-1),o),r=n.length;var u=s.RealValue-o.RealValue;return e=r-(s.RealValue-t.RealValue)/u,Math.min(e,this.verticalGraphicalStaffEntryContainers.length)},c.prototype.getVisibleStavesIndecesFromSourceMeasure=function(t){for(var e=[],n=[],i=0,r=t.length;i<r;++i){var o=t[i].ParentStaff.ParentInstrument;-1===e.indexOf(o)&&e.push(o)}for(i=0,r=e.length;i<r;++i){o=e[i];for(var s=this.musicSheet.getGlobalStaffIndexOfFirstStaff(o),a=0;a<o.Staves.length;a++)n.push(s+a)}return n},c.prototype.getGraphicalMeasureFromSourceMeasureAndIndex=function(t,e){for(var n=0;n<this.measureList.length;n++)if(this.measureList[n][0].parentSourceMeasure===t)return this.measureList[n][e]},c.prototype.getMeasureIndex=function(t,e,n){for(e=0;e<this.measureList.length;e++)for(var i=0,r=this.measureList[e].length;i<r;++i)if(this.measureList[e][i]===t)return!0;return!1},c.prototype.GetNearesNote=function(t,e){var n=[],i=new f.BoundingBox;i.BorderLeft=t.x-10,i.BorderTop=t.y-10,i.BorderRight=t.x+10,i.BorderBottom=t.y+10,i.AbsolutePosition=new h.PointF2D(0,0);for(var r=0,o=this.MusicPages.length;r<o;++r){var s=this.MusicPages[r].PositionAndShape.getObjectsInRegion(i);if(void 0!==s)for(var a=0,u=s.length;a<u;++a){var l=s[a];Math.abs(l.PositionAndShape.AbsolutePosition.x-t.x)<e.x&&Math.abs(l.PositionAndShape.AbsolutePosition.y-t.y)<e.y&&n.push(l)}}var c=void 0;for(r=0,o=n.length;r<o;++r)if(l=n[r],void 0===c)c=l;else{if(void 0===l.parentVoiceEntry.parentStaffEntry.relInMeasureTimestamp)continue;this.CalculateDistance(l.PositionAndShape.AbsolutePosition,t)<this.CalculateDistance(c.PositionAndShape.AbsolutePosition,t)&&(c=l)}if(void 0!==c)return c},c.prototype.GetClickableLabel=function(t){var e=new f.BoundingBox;e.BorderLeft=t.x-4,e.BorderTop=t.y-4,e.BorderRight=t.x+4,e.BorderBottom=t.y+4,e.AbsolutePosition=new h.PointF2D(0,0);for(var n=0,i=this.MusicPages.length;n<i;++n){var r=this.MusicPages[n].PositionAndShape.getObjectsInRegion(e);if(1===r.length)for(var o=0,s=r.length;o<s;++o)return r[o]}},c.prototype.GetNearestStaffEntry=function(t){var e=[],n=new f.BoundingBox(void 0);n.BorderLeft=t.x-10,n.BorderTop=t.y-10,n.BorderRight=t.x+10,n.BorderBottom=t.y+10,n.AbsolutePosition=new h.PointF2D(0,0);for(var i=0,r=this.MusicPages.length;i<r;++i){var o=this.MusicPages[i].PositionAndShape.getObjectsInRegion(n,!1);if(void 0!==o&&0!==o.length)for(var s=0,a=o.length;s<a;++s){var u=o[s];e.push(u)}}var l=void 0;for(i=0,r=e.length;i<r;++i)if(u=e[i],void 0===l)l=u;else{if(void 0===u.relInMeasureTimestamp)continue;this.CalculateDistance(u.PositionAndShape.AbsolutePosition,t)<this.CalculateDistance(l.PositionAndShape.AbsolutePosition,t)&&(l=u)}if(void 0!==l)return l},c.prototype.GetPossibleCommentAnchor=function(t){var e=this.GetNearestStaffEntry(t);if(void 0!==e)return e.sourceStaffEntry},c.prototype.getClickedObjectOfType=function(t){for(var e=0,n=this.musicPages.length;e<n;++e){var i=this.musicPages[e].PositionAndShape.getClickedObjectOfType(t);if(void 0!==i)return i}},c.prototype.tryGetTimestampFromPosition=function(t){var e=this.getClickedObjectOfType(t);if(void 0!==e)return e.getAbsoluteTimestamp()},c.prototype.tryGetClickableLabel=function(e){try{return this.GetClickableLabel(e)}catch(t){s.info("GraphicalMusicSheet.tryGetClickableObject","positionOnMusicSheet: "+e,t)}},c.prototype.tryGetTimeStampFromPosition=function(t){try{var e=this.GetNearestStaffEntry(t);if(void 0===e)return;return e.getAbsoluteTimestamp()}catch(e){s.info("GraphicalMusicSheet.tryGetTimeStampFromPosition","positionOnMusicSheet: "+t,e)}},c.prototype.getStaffEntry=function(t){var e=this.VerticalGraphicalStaffEntryContainers[t],n=void 0;try{for(var i=0,r=e.StaffEntries.length;i<r;++i){var o=e.StaffEntries[i];void 0!==o&&o.sourceStaffEntry.ParentStaff.ParentInstrument.Visible&&(void 0===n?n=o:void 0!==o.PositionAndShape&&void 0!==n.PositionAndShape&&n.PositionAndShape.RelativePosition.x>o.PositionAndShape.RelativePosition.x&&(n=o))}}catch(t){s.info("GraphicalMusicSheet.getStaffEntry",t)}return n},c.prototype.GetPreviousVisibleContainerIndex=function(t){for(var e=t-1;0<=e;e--)for(var n=this.verticalGraphicalStaffEntryContainers[e].StaffEntries,i=0,r=n.length;i<r;++i){var o=n[i];if(void 0!==o&&o.sourceStaffEntry.ParentStaff.ParentInstrument.Visible)return e}return-1},c.prototype.GetNextVisibleContainerIndex=function(t){for(var e=t+1;e<this.verticalGraphicalStaffEntryContainers.length;++e)for(var n=this.verticalGraphicalStaffEntryContainers[e].StaffEntries,i=0,r=n.length;i<r;++i){var o=n[i];if(void 0!==o&&o.sourceStaffEntry.ParentStaff.ParentInstrument.Visible)return e}return-1},c.prototype.findClosestLeftStaffEntry=function(t,e){for(var n=void 0,i=Math.floor(t),r=i=Math.min(this.VerticalGraphicalStaffEntryContainers.length-1,i);0<=r;r--)if(void 0!==(n=this.getStaffEntry(r))){if(!e)return n;if(n.sourceStaffEntry.ParentStaff.ParentInstrument.Visible)return n}},c.prototype.findClosestRightStaffEntry=function(t,e){for(var n=void 0,i=Math.max(0,Math.ceil(t));i<this.VerticalGraphicalStaffEntryContainers.length;i++)if(void 0!==(n=this.getStaffEntry(i))){if(!e)return n;if(n.sourceStaffEntry.ParentStaff.ParentInstrument.Visible)return n}},c.prototype.calculateCursorLineAtTimestamp=function(t,e){var n=this.calculateXPositionFromTimestamp(t),i=n[0],r=n[1];if(void 0!==r&&0!==r.StaffLines.length){var o=r.PositionAndShape.AbsolutePosition.y,s=l.CollectionUtil.last(r.StaffLines).PositionAndShape.RelativePosition.y+4;return new a.GraphicalLine(new h.PointF2D(i,o),new h.PointF2D(i,o+s),3,e)}},c.prototype.calculateXPositionFromTimestamp=function(t){var e,n,i=void 0,r=this.GetInterpolatedIndexInVerticalContainers(t),o=this.findClosestLeftStaffEntry(r,!0),s=this.findClosestRightStaffEntry(r,!0),a=t.RealValue;if(void 0===o&&void 0===s)return[0,void 0];if((e=void 0!==o?o.parentMeasure.ParentStaffLine.ParentMusicSystem:s.parentMeasure.ParentStaffLine.ParentMusicSystem)===(n=void 0!==s?s.parentMeasure.ParentStaffLine.ParentMusicSystem:o.parentMeasure.ParentStaffLine.ParentMusicSystem)){i=e;var u=void 0,l=void 0,c=void 0;if(void 0===o)l=c=s.PositionAndShape.AbsolutePosition.x,u=0;else if(void 0===s){l=o.PositionAndShape.AbsolutePosition.x,c=i.GetRightBorderAbsoluteXPosition();var h=o.parentMeasure.parentSourceMeasure;u=(a-o.getAbsoluteTimestamp().RealValue)/(y.Fraction.plus(h.AbsoluteTimestamp,h.Duration).RealValue-o.getAbsoluteTimestamp().RealValue)}else l=o.PositionAndShape.AbsolutePosition.x,c=s.PositionAndShape.AbsolutePosition.x,u=o===s?0:(a-o.getAbsoluteTimestamp().RealValue)/(s.getAbsoluteTimestamp().RealValue-o.getAbsoluteTimestamp().RealValue);return[p=l+(u=Math.min(1,Math.max(0,u)))*(c-l),i]}var f=s.parentMeasure.parentSourceMeasure.AbsoluteTimestamp.RealValue,p=void(u=void 0);if(a<f){i=e,l=o.PositionAndShape.AbsolutePosition.x;var d=i.GetRightBorderAbsoluteXPosition();u=(a-o.getAbsoluteTimestamp().RealValue)/(f-o.getAbsoluteTimestamp().RealValue),p=l+(u=Math.min(1,Math.max(0,u)))*(d-l)}else{i=n,c=s.PositionAndShape.AbsolutePosition.x;var b=i.GetLeftBorderAbsoluteXPosition();u=(a-f)/(s.getAbsoluteTimestamp().RealValue-f),p=b+(u=Math.min(1,Math.max(0,u)))*(c-b)}return[p,i]},c.prototype.GetNumberOfVisibleInstruments=function(){for(var t=0,e=0,n=this.musicSheet.Instruments.length;e<n;++e)!0===this.musicSheet.Instruments[e].Visible&&t++;return t},c.prototype.GetNumberOfFollowedInstruments=function(){for(var t=0,e=0,n=this.musicSheet.Instruments.length;e<n;++e)!0===this.musicSheet.Instruments[e].Following&&t++;return t},c.prototype.GetGraphicalFromSourceStaffEntry=function(t){return t.VerticalContainerParent.ParentMeasure.VerticalMeasureList[t.ParentStaff.idInMusicSheet].findGraphicalStaffEntryFromTimestamp(t.Timestamp)},c.prototype.CalculateDistance=function(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},c.prototype.getLongestStaffEntryDuration=function(t){for(var e=new y.Fraction(0,1),n=0,i=this.verticalGraphicalStaffEntryContainers[t].StaffEntries;n<i.length;n++){var r=i[n];if(void 0!==r){var o=r.findStaffEntryMaxNoteLength();e.lt(o)&&(e=o)}}return e},c);function c(t,e){this.musicPages=[],this.measureList=[],this.verticalGraphicalStaffEntryContainers=[],this.cursors=[],this.leadSheet=!1,this.musicSheet=t,this.numberOfStaves=this.musicSheet.Staves.length,this.calculator=e,this.calculator.initialize(this)}e.GraphicalMusicSheet=r;e.SystemImageProperties=function(){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(10),i=n(41),r=(s.prototype.add=function(t,e){if(o.isUndefined(e)&&(e=this.nElements),e<0||e>this.nElements||o.isUndefined(t))return!1;var n=this.createNode(t);if(0===this.nElements||null===this.lastNode)this.firstNode=n,this.lastNode=n;else if(e===this.nElements)this.lastNode.next=n,this.lastNode=n;else if(0===e)n.next=this.firstNode,this.firstNode=n;else{var i=this.nodeAtIndex(e-1);if(null==i)return!1;n.next=i.next,i.next=n}return this.nElements++,!0},s.prototype.first=function(){if(null!==this.firstNode)return this.firstNode.element},s.prototype.last=function(){if(null!==this.lastNode)return this.lastNode.element},s.prototype.elementAtIndex=function(t){var e=this.nodeAtIndex(t);if(null!==e)return e.element},s.prototype.indexOf=function(t,e){var n=e||o.defaultEquals;if(o.isUndefined(t))return-1;for(var i=this.firstNode,r=0;null!==i;){if(n(i.element,t))return r;r++,i=i.next}return-1},s.prototype.contains=function(t,e){return 0<=this.indexOf(t,e)},s.prototype.remove=function(t,e){var n=e||o.defaultEquals;if(this.nElements<1||o.isUndefined(t))return!1;for(var i=null,r=this.firstNode;null!==r;){if(n(r.element,t))return null==i?(this.firstNode=r.next,r===this.lastNode&&(this.lastNode=null)):(r===this.lastNode&&(this.lastNode=i),i.next=r.next,r.next=null),this.nElements--,!0;r=(i=r).next}return!1},s.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},s.prototype.equals=function(t,e){var n=e||o.defaultEquals;return t instanceof s&&this.size()===t.size()&&this.equalsAux(this.firstNode,t.firstNode,n)},s.prototype.equalsAux=function(t,e,n){for(;null!==t&&null!==e;){if(!n(t.element,e.element))return!1;t=t.next,e=e.next}return!0},s.prototype.removeElementAtIndex=function(t){if(!(t<0||t>=this.nElements||null===this.firstNode||null===this.lastNode)){var e;if(1===this.nElements)e=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var n=this.nodeAtIndex(t-1);null===n?(e=this.firstNode.element,this.firstNode=this.firstNode.next):n.next===this.lastNode&&(e=this.lastNode.element,this.lastNode=n),null!==n&&null!==n.next&&(e=n.next.element,n.next=n.next.next)}return this.nElements--,e}},s.prototype.forEach=function(t){for(var e=this.firstNode;null!==e&&!1!==t(e.element);)e=e.next},s.prototype.reverse=function(){for(var t=null,e=this.firstNode,n=null;null!==e;)n=e.next,e.next=t,t=e,e=n;n=this.firstNode,this.firstNode=this.lastNode,this.lastNode=n},s.prototype.toArray=function(){for(var t=[],e=this.firstNode;null!==e;)t.push(e.element),e=e.next;return t},s.prototype.size=function(){return this.nElements},s.prototype.isEmpty=function(){return this.nElements<=0},s.prototype.toString=function(){return i.toString(this.toArray())},s.prototype.nodeAtIndex=function(t){if(t<0||t>=this.nElements)return null;if(t===this.nElements-1)return this.lastNode;for(var e=this.firstNode,n=0;n<t&&null!=e;n++)e=e.next;return e},s.prototype.createNode=function(t){return{element:t,next:null}},s);function s(){this.firstNode=null,this.lastNode=null,this.nElements=0}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(r.prototype,"Parent",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"PrintObject",{get:function(){return this.printObject},set:function(t){this.printObject=t},enumerable:!0,configurable:!0}),r);function r(t){this.printObject=!0,this.parent=t}e.AbstractNotationInstruction=i},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.Fonts||(e.Fonts={}))[i.TimesNewRoman=0]="TimesNewRoman",i[i.Kokila=1]="Kokila"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=(o.prototype.$get$=function(t){return this.staffEntries[t]},o.prototype.$set$=function(t,e){this.staffEntries[t]=e},Object.defineProperty(o.prototype,"Timestamp",{get:function(){return this.timestamp},set:function(t){this.timestamp=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"StaffEntries",{get:function(){return this.staffEntries},set:function(t){this.staffEntries=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"Comments",{get:function(){return this.comments},set:function(t){this.comments=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ParentMeasure",{get:function(){return this.parentMeasure},set:function(t){this.parentMeasure=t},enumerable:!0,configurable:!0}),o.prototype.getAbsoluteTimestamp=function(){return i.Fraction.plus(this.timestamp,this.parentMeasure.AbsoluteTimestamp)},o);function o(t,e,n){this.staffEntries=[],this.comments=[],this.timestamp=e,this.staffEntries=new Array(n),this.parentMeasure=t}e.VerticalSourceStaffEntryContainer=r},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=(o=n(51).AbstractGraphicalExpression,r(a,o),Object.defineProperty(a.prototype,"GraphicalLabel",{get:function(){return this.label},enumerable:!0,configurable:!0}),a.prototype.updateSkyBottomLine=function(){},a);function a(t,e){var n=o.call(this,e.PositionAndShape.Parent.DataObject,t)||this;return n.label=e,n}e.GraphicalInstantaneousTempoExpression=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a,s,u=n(98),l=n(13),c=n(0),h=(a=u.AbstractTempoExpression,r(f,a),f.getDefaultValueForTempoType=function(t){switch(t){case o.larghissimo:return 20;case o.grave:return 30;case o.lento:return 48;case o.largo:return 52;case o.larghetto:return 63;case o.adagio:return 70;case o.adagietto:return 75;case o.andanteModerato:return 88;case o.andante:return 92;case o.andantino:return 96;case o.moderato:return 106;case o.allegretto:return 112;case o.allegroModerato:return 118;case o.allegro:return 130;case o.vivace:return 140;case o.vivacissimo:return 155;case o.allegrissimo:return 170;case o.presto:return 184;case o.prestissimo:return 200;default:throw new l.ArgumentOutOfRangeException("tempoEnum")}},f.isInputStringInstantaneousTempo=function(t){return void 0!==t&&(f.isStringInStringList(f.listInstantaneousTempoLarghissimo,t)||f.isStringInStringList(f.listInstantaneousTempoGrave,t)||f.isStringInStringList(f.listInstantaneousTempoLento,t)||f.isStringInStringList(f.listInstantaneousTempoLargo,t)||f.isStringInStringList(f.listInstantaneousTempoLarghetto,t)||f.isStringInStringList(f.listInstantaneousTempoAdagio,t)||f.isStringInStringList(f.listInstantaneousTempoAdagietto,t)||f.isStringInStringList(f.listInstantaneousTempoAndanteModerato,t)||f.isStringInStringList(f.listInstantaneousTempoAndante,t)||f.isStringInStringList(f.listInstantaneousTempoAndantino,t)||f.isStringInStringList(f.listInstantaneousTempoModerato,t)||f.isStringInStringList(f.listInstantaneousTempoAllegretto,t)||f.isStringInStringList(f.listInstantaneousTempoAllegroModerato,t)||f.isStringInStringList(f.listInstantaneousTempoAllegro,t)||f.isStringInStringList(f.listInstantaneousTempoVivace,t)||f.isStringInStringList(f.listInstantaneousTempoVivacissimo,t)||f.isStringInStringList(f.listInstantaneousTempoAllegrissimo,t)||f.isStringInStringList(f.listInstantaneousTempoPresto,t)||f.isStringInStringList(f.listInstantaneousTempoPrestissimo,t)||f.isStringInStringList(f.listInstantaneousTempoChangesGeneral,t))},Object.defineProperty(f.prototype,"Label",{get:function(){return this.label},set:function(t){this.label=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"Placement",{get:function(){return this.placement},set:function(t){this.placement=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"StaffNumber",{get:function(){return this.staffNumber},set:function(t){this.staffNumber=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"Enum",{get:function(){return this.tempoEnum},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"TempoInBpm",{get:function(){return this.tempoInBpm},set:function(t){this.tempoInBpm=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"ParentMultiTempoExpression",{get:function(){return this.parentMultiTempoExpression},enumerable:!0,configurable:!0}),f.prototype.getAbsoluteTimestamp=function(){return c.Fraction.plus(this.ParentMultiTempoExpression.SourceMeasureParent.AbsoluteTimestamp,this.ParentMultiTempoExpression.Timestamp)},f.prototype.getAbsoluteFloatTimestamp=function(){return c.Fraction.plus(this.ParentMultiTempoExpression.SourceMeasureParent.AbsoluteTimestamp,this.ParentMultiTempoExpression.Timestamp).RealValue},f.prototype.setTempoAndTempoType=function(t){return this.label?f.isStringInStringList(f.listInstantaneousTempoLarghissimo,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.larghissimo)),this.tempoInBpm=t,void(this.tempoEnum=o.larghissimo)):f.isStringInStringList(f.listInstantaneousTempoGrave,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.grave)),this.tempoInBpm=t,void(this.tempoEnum=o.grave)):f.isStringInStringList(f.listInstantaneousTempoLento,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.lento)),this.tempoInBpm=t,void(this.tempoEnum=o.lento)):f.isStringInStringList(f.listInstantaneousTempoLargo,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.largo)),this.tempoInBpm=t,void(this.tempoEnum=o.largo)):f.isStringInStringList(f.listInstantaneousTempoLarghetto,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.larghetto)),this.tempoInBpm=t,void(this.tempoEnum=o.larghetto)):f.isStringInStringList(f.listInstantaneousTempoAdagio,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.adagio)),this.tempoInBpm=t,void(this.tempoEnum=o.adagio)):f.isStringInStringList(f.listInstantaneousTempoAdagietto,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.adagietto)),this.tempoInBpm=t,void(this.tempoEnum=o.adagietto)):f.isStringInStringList(f.listInstantaneousTempoAndanteModerato,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.andanteModerato)),this.tempoInBpm=t,void(this.tempoEnum=o.andanteModerato)):f.isStringInStringList(f.listInstantaneousTempoAndante,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.andante)),this.tempoInBpm=t,void(this.tempoEnum=o.andante)):f.isStringInStringList(f.listInstantaneousTempoAndantino,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.andantino)),this.tempoInBpm=t,void(this.tempoEnum=o.andantino)):f.isStringInStringList(f.listInstantaneousTempoModerato,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.moderato)),this.tempoInBpm=t,void(this.tempoEnum=o.moderato)):f.isStringInStringList(f.listInstantaneousTempoAllegretto,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.allegretto)),this.tempoInBpm=t,void(this.tempoEnum=o.allegretto)):f.isStringInStringList(f.listInstantaneousTempoAllegroModerato,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.allegroModerato)),this.tempoInBpm=t,void(this.tempoEnum=o.allegroModerato)):f.isStringInStringList(f.listInstantaneousTempoAllegro,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.allegro)),this.tempoInBpm=t,void(this.tempoEnum=o.allegro)):f.isStringInStringList(f.listInstantaneousTempoVivace,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.vivace)),this.tempoInBpm=t,void(this.tempoEnum=o.vivace)):f.isStringInStringList(f.listInstantaneousTempoVivacissimo,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.vivacissimo)),this.tempoInBpm=t,void(this.tempoEnum=o.vivacissimo)):f.isStringInStringList(f.listInstantaneousTempoAllegrissimo,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.allegrissimo)),this.tempoInBpm=t,void(this.tempoEnum=o.allegrissimo)):f.isStringInStringList(f.listInstantaneousTempoPresto,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.presto)),this.tempoInBpm=t,void(this.tempoEnum=o.presto)):f.isStringInStringList(f.listInstantaneousTempoPrestissimo,this.label)?(0===t&&(t=f.getDefaultValueForTempoType(o.prestissimo)),this.tempoInBpm=t,void(this.tempoEnum=o.prestissimo)):f.isStringInStringList(f.listInstantaneousTempoAddons,this.label)?(this.tempoInBpm=0,void(this.tempoEnum=o.addon)):f.isStringInStringList(f.listInstantaneousTempoChangesGeneral,this.label)?(this.tempoInBpm=0,void(this.tempoEnum=o.changes)):void 0:(this.tempoInBpm=t,void(this.tempoEnum=o.metronomeMark))},f.listInstantaneousTempoLarghissimo=["Larghissimo","Sehr breit","very, very slow"],f.listInstantaneousTempoGrave=["Grave","Schwer","slow and solemn"],f.listInstantaneousTempoLento=["Lento","Lent","Langsam","slowly"],f.listInstantaneousTempoLargo=["Largo","Breit","broadly"],f.listInstantaneousTempoLarghetto=["Larghetto","Etwas breit","rather broadly"],f.listInstantaneousTempoAdagio=["Adagio","Langsam","Ruhig","slow and stately"],f.listInstantaneousTempoAdagietto=["Adagietto","Ziemlich ruhig","Ziemlich langsam","rather slow"],f.listInstantaneousTempoAndanteModerato=["Andante moderato"],f.listInstantaneousTempoAndante=["Andante","Gehend","Schreitend","at a walking pace"],f.listInstantaneousTempoAndantino=["Andantino"],f.listInstantaneousTempoModerato=["Moderato","Mäßig","Mod�r�","moderately"],f.listInstantaneousTempoAllegretto=["Allegretto","fast"],f.listInstantaneousTempoAllegroModerato=["Allegro moderato"],f.listInstantaneousTempoAllegro=["Allegro","Rapide","Vite","Rasch","Schnell","Fr�hlich"],f.listInstantaneousTempoVivace=["Vivace","Lebhaft","Lebendig","lively and fast"],f.listInstantaneousTempoVivacissimo=["Vivacissimo","Sehr lebhaft","Sehr lebendig"],f.listInstantaneousTempoAllegrissimo=["Allegrissimo","very fast"],f.listInstantaneousTempoPresto=["Presto","Sehr schnell","Geschwind"],f.listInstantaneousTempoPrestissimo=["Prestissimo","äußerst schnell"],f.listInstantaneousTempoChangesGeneral=["tempo primo","a tempo","tempo i","rubato","doppio movimento"],f.listInstantaneousTempoAddons=["assai","amoroso","cantabile","con brio","con dolore","con espressione","con fuoco","con moto","con spirito","spiritoso","espressivo","giocoso","giusto","grazioso","lesto","lugubre","maestoso","ma non troppo","marcato","molto","morendo","mosso","non tanto","piu","un poco","poco","quasi","risoluto","scherzando","sostenuto","teneramente","tempo giusto","tranquillo","sehr","lieblich","liebevoll","mit Leidenschaft","mit Liebe","amourös","gesanglich","mit Schwung","mit Feuer","mit Schmerz","mit Ausdruck","mit Bewegung","geistvoll","ausdrucksvoll","freudig","verspielt","angemessen","graziös","mit Grazie","flink","behände","traurig","klagend","majestätisch","aber nicht zu sehr","markant","gemäßigt","viel","sehr","ersterbend","bewegt","nicht zu sehr","mehr","ein wenig","gleichsam","entschlossen","zupackend","heiter","nachdrücklich","getragen","gewichtig","zart","zärtlich","im angemessenen Zeitmaß","ruhig","ein wenig","alla marcia","ad libitum","alla breve"],f);function f(t,e,n,i,r,o){void 0===o&&(o=!1);var s=a.call(this,t,e,n,r)||this;return s.setTempoAndTempoType(i),s}e.InstantaneousTempoExpression=h,(s=o=e.TempoEnum||(e.TempoEnum={}))[s.none=0]="none",s[s.larghissimo=1]="larghissimo",s[s.grave=2]="grave",s[s.lento=3]="lento",s[s.largo=4]="largo",s[s.larghetto=5]="larghetto",s[s.adagio=6]="adagio",s[s.adagietto=7]="adagietto",s[s.andanteModerato=8]="andanteModerato",s[s.andante=9]="andante",s[s.andantino=10]="andantino",s[s.moderato=11]="moderato",s[s.allegretto=12]="allegretto",s[s.allegroModerato=13]="allegroModerato",s[s.allegro=14]="allegro",s[s.vivace=15]="vivace",s[s.vivacissimo=16]="vivacissimo",s[s.allegrissimo=17]="allegrissimo",s[s.presto=18]="presto",s[s.prestissimo=19]="prestissimo",s[s.lastRealTempo=20]="lastRealTempo",s[s.addon=21]="addon",s[s.changes=22]="changes",s[s.metronomeMark=23]="metronomeMark"},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s,a,u=n(0),l=(s=n(98).AbstractTempoExpression,r(c,s),c.isInputStringContinuousTempo=function(t){return void 0!==t&&(c.isStringInStringList(c.listContinuousTempoFaster,t)||c.isStringInStringList(c.listContinuousTempoSlower,t))},c.isIncreasingTempo=function(t){return t<=o.piuMosso},c.isDecreasingTempo=function(t){return t>=o.allargando&&t<=o.ritenuto},Object.defineProperty(c.prototype,"TempoType",{get:function(){return this.tempoType},set:function(t){this.tempoType=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"StartTempo",{get:function(){return this.startTempo},set:function(t){this.startTempo=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"EndTempo",{get:function(){return this.endTempo},set:function(t){this.endTempo=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"AbsoluteEndTimestamp",{get:function(){return this.absoluteEndTimestamp},set:function(t){this.absoluteEndTimestamp=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"AbsoluteTimestamp",{get:function(){return this.ParentMultiTempoExpression.AbsoluteTimestamp},enumerable:!0,configurable:!0}),c.prototype.getAbsoluteFloatTimestamp=function(){return this.ParentMultiTempoExpression.AbsoluteTimestamp.RealValue},c.prototype.getInterpolatedTempo=function(t){var e=u.Fraction.plus(this.parentMultiTempoExpression.SourceMeasureParent.AbsoluteTimestamp,this.parentMultiTempoExpression.Timestamp);if(t.lt(e))return-1;if(this.absoluteEndTimestamp.lt(t))return-2;var n=u.Fraction.minus(t,e).RealValue/u.Fraction.minus(this.absoluteEndTimestamp,e).RealValue;return Math.max(0,Math.min(250,this.startTempo+(this.endTempo-this.startTempo)*n))},c.prototype.setTempoType=function(){c.isStringInStringList(c.listContinuousTempoFaster,this.label)?this.tempoType=o.accelerando:c.isStringInStringList(c.listContinuousTempoSlower,this.label)&&(this.tempoType=o.ritardando)},c.listContinuousTempoFaster=["accelerando","piu mosso","poco piu","stretto"],c.listContinuousTempoSlower=["poco meno","meno mosso","piu lento","calando","allargando","rallentando","ritardando","ritenuto","ritard.","ritard","rit.","rit","riten.","riten"],c);function c(t,e,n,i){var r=s.call(this,t,e,n,i)||this;return r.setTempoType(),r}e.ContinuousTempoExpression=l,(a=o=e.ContinuousTempoType||(e.ContinuousTempoType={}))[a.accelerando=0]="accelerando",a[a.stretto=1]="stretto",a[a.stringendo=2]="stringendo",a[a.mosso=3]="mosso",a[a.piuMosso=4]="piuMosso",a[a.allargando=5]="allargando",a[a.calando=6]="calando",a[a.menoMosso=7]="menoMosso",a[a.rallentando=8]="rallentando",a[a.ritardando=9]="ritardando",a[a.ritard=10]="ritard",a[a.rit=11]="rit",a[a.ritenuto=12]="ritenuto",a[a.rubato=13]="rubato",a[a.precipitando=14]="precipitando"},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(70),a=n(16),u=n(100),l=(o=s.InstrumentalGroup,r(c,o),Object.defineProperty(c.prototype,"Voices",{get:function(){return this.voices},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"Staves",{get:function(){return this.staves},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"NameLabel",{get:function(){return this.nameLabel},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"HasLyrics",{get:function(){return this.hasLyrics},set:function(t){this.hasLyrics=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"HasChordSymbols",{get:function(){return this.hasChordSymbols},set:function(t){this.hasChordSymbols=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"LyricVersesNumbers",{get:function(){return this.lyricVersesNumbers},set:function(t){this.lyricVersesNumbers=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"Name",{get:function(){return this.nameLabel.text},set:function(t){this.nameLabel.text=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"IdString",{get:function(){return this.idString},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"Id",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"MidiInstrumentId",{get:function(){return this.subInstruments[0].midiInstrumentID},set:function(t){this.subInstruments[0].midiInstrumentID=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"Volume",{get:function(){return this.subInstruments[0].volume},set:function(t){for(var e=0,n=this.subInstruments.length;e<n;++e)this.subInstruments[e].volume=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"PlaybackTranspose",{get:function(){return this.playbackTranspose},set:function(t){this.playbackTranspose=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"SubInstruments",{get:function(){return this.subInstruments},enumerable:!0,configurable:!0}),c.prototype.getSubInstrument=function(t){for(var e=0,n=this.subInstruments.length;e<n;++e){var i=this.subInstruments[e];if(i.idString===t)return i}},Object.defineProperty(c.prototype,"PartAbbreviation",{get:function(){return this.partAbbreviation},set:function(t){this.partAbbreviation=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"Visible",{get:function(){return 0<this.voices.length&&this.Voices[0].Visible},set:function(t){for(var e=0,n=this.Voices.length;e<n;++e)this.Voices[e].Visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"Audible",{get:function(){for(var t=!1,e=0,n=this.Voices.length;e<n;++e){var i=this.Voices[e];t=t||i.Audible}return t},set:function(t){for(var e=0,n=this.Voices.length;e<n;++e)this.Voices[e].Audible=t;for(e=0,n=this.staves.length;e<n;++e)this.staves[e].audible=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"Following",{get:function(){for(var t=!1,e=0,n=this.Voices.length;e<n;++e){var i=this.Voices[e];t=t||i.Following}return t},set:function(t){for(var e=0,n=this.Voices.length;e<n;++e)this.Voices[e].Following=t;for(e=0,n=this.staves.length;e<n;++e)this.staves[e].following=t},enumerable:!0,configurable:!0}),c.prototype.SetVoiceAudible=function(t,e){for(var n=0,i=this.Voices.length;n<i;++n){var r=this.Voices[n];if(r.VoiceId===t){r.Audible=e;break}}},c.prototype.SetVoiceFollowing=function(t,e){for(var n=0,i=this.Voices.length;n<i;++n){var r=this.Voices[n];if(r.VoiceId===t){r.Following=e;break}}},c.prototype.SetStaffAudible=function(t,e){var n=this.staves[t-1];if(n.audible=e)for(var i=0,r=n.Voices.length;i<r;++i)n.Voices[i].Audible=!0;else for(i=0,r=n.Voices.length;i<r;++i){for(var o=n.Voices[i],s=!1,a=0,u=this.Staves.length;a<u;++a){var l=this.Staves[a];if(l.Id!==t&&l.audible)for(var c=0,h=l.Voices.length;c<h;++c)l.Voices[c]===o&&(s=!0)}s||(o.Audible=!1)}},c.prototype.SetStaffFollow=function(t,e){var n=this.staves[t-1];if(n.following=e)for(var i=0,r=n.Voices.length;i<r;++i)n.Voices[i].Following=!0;else for(i=0,r=n.Voices.length;i<r;++i){for(var o=n.Voices[i],s=!1,a=0,u=this.Staves.length;a<u;++a){var l=this.Staves[a];if(l.Id!==t&&l.following)for(var c=0,h=l.Voices.length;c<h;++c)l.Voices[c]===o&&(s=!0)}s||(o.Following=!1)}},c.prototype.areAllVoiceVisible=function(){for(var t=0,e=this.Voices;t<e.length;t++)if(!e[t].Visible)return!1;return!0},c.prototype.createStaves=function(t){for(var e=0;e<t;e++)this.staves.push(new u.Staff(this,e+1))},c.prototype.toString=function(){return this.Name+" , id: "+this.id+", idstring: "+this.idString},c);function c(t,e,n,i){var r=o.call(this,void 0,n,i)||this;return r.transpose=0,r.voices=[],r.staves=[],r.hasLyrics=!1,r.hasChordSymbols=!1,r.lyricVersesNumbers=[],r.subInstruments=[],r.id=t,r.idString=e,r.nameLabel=new a.Label(e),r}e.Instrument=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(r.prototype,"InstrumentalGroups",{get:function(){return this.instrumentalGroups},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Parent",{get:function(){return this.parent},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Name",{get:function(){return this.name},set:function(t){this.name=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"GetMusicSheet",{get:function(){return this.musicSheet},enumerable:!0,configurable:!0}),r);function r(t,e,n){this.instrumentalGroups=[],this.name=t,this.musicSheet=e,this.parent=n}e.InstrumentalGroup=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r,o=n(1),s=(a.prototype.setShapeFromXml=function(t,e){void 0===e&&(e=void 0),this.shape=a.ShapeTypeXmlToShape(t);var n=e;void 0===n&&(n=void 0===this.sourceNote?(o.warn("notehead: sourceNote and filledXmlAttribute undefined."),!0):2<this.sourceNote.Length.Denominator),this.filled=n},Object.defineProperty(a.prototype,"SourceNote",{get:function(){return this.sourceNote},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"Shape",{get:function(){return this.shape},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"Filled",{get:function(){return this.filled},enumerable:!0,configurable:!0}),a.ShapeTypeXmlToShape=function(t){switch(t.toLowerCase()){case"normal":return i.NORMAL;case"x":return i.X;case"slash":return i.SLASH;case"diamond":return i.DIAMOND;case"square":case"la":return i.SQUARE;case"do":case"triangle":return i.TRIANGLE;case"rectangle":return i.RECTANGLE;case"circle-x":return i.CIRCLEX;default:return o.info("unsupported/unhandled xml notehead '"+t+"'. Using normal notehead."),i.NORMAL}},a);function a(t,e,n){void 0===n&&(n=void 0),this.sourceNote=t,this.setShapeFromXml(e,n)}e.Notehead=s,(r=i=e.NoteHeadShape||(e.NoteHeadShape={}))[r.CIRCLEX=0]="CIRCLEX",r[r.DIAMOND=1]="DIAMOND",r[r.NORMAL=2]="NORMAL",r[r.RECTANGLE=3]="RECTANGLE",r[r.SLASH=4]="SLASH",r[r.SQUARE=5]="SQUARE",r[r.TRIANGLE=6]="TRIANGLE",r[r.X=7]="X"},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.MusicSymbol||(e.MusicSymbol={}))[i.Unused_first_Symbol=0]="Unused_first_Symbol",i[i.BLACK_HEAD=1]="BLACK_HEAD",i[i.UPWARDS_TAIL=2]="UPWARDS_TAIL",i[i.DOWNWARDS_TAIL=3]="DOWNWARDS_TAIL",i[i.UPWARDS_DOUBLE_TAIL=4]="UPWARDS_DOUBLE_TAIL",i[i.DOWNWARDS_DOUBLE_TAIL=5]="DOWNWARDS_DOUBLE_TAIL",i[i.UPWARDS_TRIPLE_TAIL=6]="UPWARDS_TRIPLE_TAIL",i[i.DOWNWARDS_TRIPLE_TAIL=7]="DOWNWARDS_TRIPLE_TAIL",i[i.UPWARDS_QUAD_TAIL=8]="UPWARDS_QUAD_TAIL",i[i.DOWNWARDS_QUAD_TAIL=9]="DOWNWARDS_QUAD_TAIL",i[i.ROUND_HEAD=10]="ROUND_HEAD",i[i.WHITE_HEAD=11]="WHITE_HEAD",i[i.G_CLEF=12]="G_CLEF",i[i.F_CLEF=13]="F_CLEF",i[i.C_CLEF=14]="C_CLEF",i[i.BREVE=15]="BREVE",i[i.BREVE_REST=16]="BREVE_REST",i[i.COMMON_TIME=17]="COMMON_TIME",i[i.CUT_TIME=18]="CUT_TIME",i[i.WHOLE_REST=19]="WHOLE_REST",i[i.HALF_REST=20]="HALF_REST",i[i.QUARTER_REST=21]="QUARTER_REST",i[i.EIGHTH_REST=22]="EIGHTH_REST",i[i.SIXTEENTH_REST=23]="SIXTEENTH_REST",i[i.THIRTYSECOND_REST=24]="THIRTYSECOND_REST",i[i.SIXTYFOURTH_REST=25]="SIXTYFOURTH_REST",i[i.FLAT=26]="FLAT",i[i.SHARP=27]="SHARP",i[i.NATURAL=28]="NATURAL",i[i.DOUBLE_FLAT=29]="DOUBLE_FLAT",i[i.DOUBLE_SHARP=30]="DOUBLE_SHARP",i[i.ZERO=31]="ZERO",i[i.ONE=32]="ONE",i[i.TWO=33]="TWO",i[i.THREE=34]="THREE",i[i.FOUR=35]="FOUR",i[i.FIVE=36]="FIVE",i[i.SIX=37]="SIX",i[i.SEVEN=38]="SEVEN",i[i.EIGHT=39]="EIGHT",i[i.NINE=40]="NINE",i[i.DOT=41]="DOT",i[i.FERMATA=42]="FERMATA",i[i.INVERTED_FERMATA=43]="INVERTED_FERMATA",i[i.SPICCATO=44]="SPICCATO",i[i.TENUTO=45]="TENUTO",i[i.MARCATO=46]="MARCATO",i[i.MARCATISSIMO=47]="MARCATISSIMO",i[i.INVERTED_MARCATISSIMO=48]="INVERTED_MARCATISSIMO",i[i.P=49]="P",i[i.F=50]="F",i[i.S=51]="S",i[i.Z=52]="Z",i[i.M=53]="M",i[i.R=54]="R",i[i.SEGNO=55]="SEGNO",i[i.CODA=56]="CODA",i[i.DRUM_CLEF=57]="DRUM_CLEF",i[i.G_CLEF_SUB8=58]="G_CLEF_SUB8",i[i.G_CLEF_SUPER8=59]="G_CLEF_SUPER8",i[i.G_CLEF_SUB15=60]="G_CLEF_SUB15",i[i.G_CLEF_SUPER15=61]="G_CLEF_SUPER15",i[i.F_CLEF_SUB8=62]="F_CLEF_SUB8",i[i.F_CLEF_SUPER8=63]="F_CLEF_SUPER8",i[i.F_CLEF_SUB15=64]="F_CLEF_SUB15",i[i.F_CLEF_SUPER15=65]="F_CLEF_SUPER15",i[i.DOWN_BOW=66]="DOWN_BOW",i[i.MORDENT=67]="MORDENT",i[i.INVERTED_MORDENT=68]="INVERTED_MORDENT",i[i.TURN=69]="TURN",i[i.INVERTED_TURN=70]="INVERTED_TURN",i[i.LEFTHAND_PIZZICATO=71]="LEFTHAND_PIZZICATO",i[i.RELEASE_PED=72]="RELEASE_PED",i[i.ENGAGE_PED=73]="ENGAGE_PED",i[i.VA8=74]="VA8",i[i.VB8=75]="VB8",i[i.TRILL=76]="TRILL",i[i.MA15=77]="MA15",i[i.MB15=78]="MB15",i[i.HIGH=79]="HIGH",i[i.PLAY=80]="PLAY",i[i.MIC=81]="MIC",i[i.SNAP_PIZZICATO=82]="SNAP_PIZZICATO",i[i.NATURAL_HARMONIC=83]="NATURAL_HARMONIC",i[i.EditPen=84]="EditPen"},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(51),a=n(8),u=n(1),l=(o=s.AbstractGraphicalExpression,r(c,o),c.prototype.updateSkyBottomLine=function(){var t=this.parentStaffLine.SkyBottomLineCalculator,e=this.PositionAndShape.RelativePosition.x+this.PositionAndShape.BorderMarginLeft,n=this.PositionAndShape.RelativePosition.x+this.PositionAndShape.BorderMarginRight,i=0;switch(this.Placement){case a.PlacementEnum.Above:i=this.PositionAndShape.RelativePosition.y+this.PositionAndShape.BorderMarginTop,t.updateSkyLineInRange(e,n,i);break;case a.PlacementEnum.Below:i=this.PositionAndShape.RelativePosition.y+this.PositionAndShape.BorderMarginBottom,t.updateBottomLineInRange(e,n,i);break;default:u.error("Placement for GraphicalInstantaneousDynamicExpression is unknown")}},c);function c(t,e,n){var i=o.call(this,e,t)||this;return i.mInstantaneousDynamicExpression=t,i.mMeasure=n,i}e.GraphicalInstantaneousDynamicExpression=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(20),a=n(2),i=(Object.defineProperty(u.prototype,"RootPitch",{get:function(){return this.rootPitch},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"ChordKind",{get:function(){return this.chordKind},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"BassPitch",{get:function(){return this.bassPitch},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"ChordDegree",{get:function(){return this.degree},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"KeyInstruction",{get:function(){return this.keyInstruction},enumerable:!0,configurable:!0}),u.calculateChordText=function(t,e){var n=t.RootPitch;void 0!==s.MusicSheetCalculator.transposeCalculator&&(n=s.MusicSheetCalculator.transposeCalculator.transposePitch(t.RootPitch,t.KeyInstruction,e));var i=o.Pitch.getNoteEnumString(n.FundamentalNote);if(n.Accidental!==a.AccidentalEnum.NONE&&(i+=this.getTextForAccidental(n.Accidental)),i+=u.getTextFromChordKindEnum(t.ChordKind),void 0!==t.BassPitch){var r=t.BassPitch;void 0!==s.MusicSheetCalculator.transposeCalculator&&(r=s.MusicSheetCalculator.transposeCalculator.transposePitch(t.BassPitch,t.KeyInstruction,e)),i+="/",i+=o.Pitch.getNoteEnumString(r.FundamentalNote),i+=this.getTextForAccidental(r.Accidental)}if(void 0!==t.ChordDegree){switch(t.ChordDegree.text){case l.add:i+="add";break;case l.alter:i+="alt";break;case l.subtract:i+="sub"}i+=t.ChordDegree.value,t.ChordDegree.alteration!==a.AccidentalEnum.NONE&&(i+=u.getTextForAccidental(t.ChordDegree.alteration))}return i},u.getTextForAccidental=function(t){var e="";switch(t){case a.AccidentalEnum.DOUBLEFLAT:e+="bb";break;case a.AccidentalEnum.FLAT:e+="b";break;case a.AccidentalEnum.SHARP:e+="#";break;case a.AccidentalEnum.DOUBLESHARP:e+="x"}return e},u.getTextFromChordKindEnum=function(t){var e="";switch(t){case r.major:break;case r.minor:e+="m";break;case r.augmented:e+="aug";break;case r.diminished:e+="dim";break;case r.dominant:e+="7";break;case r.majorseventh:e+="maj7";break;case r.minorseventh:e+="m7";break;case r.diminishedseventh:e+="dim7";break;case r.augmentedseventh:e+="aug7";break;case r.halfdiminished:e+="m7b5";break;case r.majorminor:e+="";break;case r.majorsixth:e+="maj6";break;case r.minorsixth:e+="m6";break;case r.dominantninth:e+="9";break;case r.majorninth:e+="maj9";break;case r.minorninth:e+="m9";break;case r.dominant11th:e+="11";break;case r.major11th:e+="maj11";break;case r.minor11th:e+="m11";break;case r.dominant13th:e+="13";break;case r.major13th:e+="maj13";break;case r.minor13th:e+="m13";break;case r.suspendedsecond:e+="sus2";break;case r.suspendedfourth:e+="sus4";break;case r.Neapolitan:case r.Italian:case r.French:case r.German:case r.pedal:case r.power:case r.Tristan:}return e},u);function u(t,e,n,i,r){this.rootPitch=t,this.chordKind=e,this.keyInstruction=r,this.bassPitch=n,this.degree=i}e.ChordSymbolContainer=i;var l,r,c,h;e.Degree=function(t,e,n){this.value=t,this.alteration=e,this.text=n},(h=l=e.ChordDegreeText||(e.ChordDegreeText={}))[h.add=0]="add",h[h.alter=1]="alter",h[h.subtract=2]="subtract",(c=r=e.ChordSymbolEnum||(e.ChordSymbolEnum={}))[c.major=0]="major",c[c.minor=1]="minor",c[c.augmented=2]="augmented",c[c.diminished=3]="diminished",c[c.dominant=4]="dominant",c[c.majorseventh=5]="majorseventh",c[c.minorseventh=6]="minorseventh",c[c.diminishedseventh=7]="diminishedseventh",c[c.augmentedseventh=8]="augmentedseventh",c[c.halfdiminished=9]="halfdiminished",c[c.majorminor=10]="majorminor",c[c.majorsixth=11]="majorsixth",c[c.minorsixth=12]="minorsixth",c[c.dominantninth=13]="dominantninth",c[c.majorninth=14]="majorninth",c[c.minorninth=15]="minorninth",c[c.dominant11th=16]="dominant11th",c[c.major11th=17]="major11th",c[c.minor11th=18]="minor11th",c[c.dominant13th=19]="dominant13th",c[c.major13th=20]="major13th",c[c.minor13th=21]="minor13th",c[c.suspendedsecond=22]="suspendedsecond",c[c.suspendedfourth=23]="suspendedfourth",c[c.Neapolitan=24]="Neapolitan",c[c.Italian=25]="Italian",c[c.French=26]="French",c[c.German=27]="German",c[c.pedal=28]="pedal",c[c.power=29]="power",c[c.Tristan=30]="Tristan"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(r.prototype,"Visible",{get:function(){return this.visible},set:function(t){this.visible=t},enumerable:!0,configurable:!0}),r.prototype.getFirstSourceMeasure=function(){return this.musicSheet.SourceMeasures[this.startIndex]},r.prototype.getLastSourceMeasure=function(){return this.musicSheet.SourceMeasures[this.endIndex]},r);function r(t){this.enrolledTimestamps=[],this.visible=!0,this.musicSheet=t}e.PartListEntry=i},function(t,e,n){"use strict";var i,r="object"==typeof Reflect?Reflect:null,c=r&&"function"==typeof r.apply?r.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}((t.exports=s).EventEmitter=s).prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function u(t,e,n,i){var r,o,s,a;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"==typeof s?s=o[e]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),0<(r=l(t))&&s.length>r&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return t}function h(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,c(this.listener,this.target,t))}.bind(i);return r.listener=n,i.wrapFn=r}function f(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):d(r,r.length)}function p(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function d(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var o;if(0<e.length&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=r[t];if(void 0===a)return!1;if("function"==typeof a)c(a,this,e);else{var u=a.length,l=d(a,u);for(n=0;n<u;++n)c(l[n],this,e)}return!0},s.prototype.on=s.prototype.addListener=function(t,e){return u(this,t,e,!1)},s.prototype.prependListener=function(t,e){return u(this,t,e,!0)},s.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,h(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,h(this,t,e)),this},s.prototype.off=s.prototype.removeListener=function(t,e){var n,i,r,o,s;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,o=n.length-1;0<=o;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,s||e)}return this},s.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;0<=i;i--)this.removeListener(t,e[i]);return this},s.prototype.listeners=function(t){return f(this,t,!0)},s.prototype.rawListeners=function(t){return f(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return 0<this._eventsCount?i(this._events):[]}},function(t,e,n){(((e=t.exports=n(151)).Stream=e).Readable=e).Writable=n(78),e.Duplex=n(31),e.Transform=n(156),e.PassThrough=n(218)},function(w,t,E){"use strict";(function(t,e,n){var m=E(54);function h(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(void 0),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}w.exports=c;var a,f=!t.browser&&-1<["v0.10","v0.9."].indexOf(t.version.slice(0,5))?e:m.nextTick;c.WritableState=l;var i=E(46);i.inherits=E(39);var r,o={deprecate:E(217)},s=E(152),g=E(55).Buffer,v=n.Uint8Array||function(){},u=E(153);function _(){}function l(t,e){a=a||E(31),t=t||{};var n=e instanceof a;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,r=t.writableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(r||0===r)?r:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=(this.destroyed=!1)===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n,i,r,o,s,a,u=t._writableState,l=u.sync,c=u.writecb;if((a=u).writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0,e)n=t,r=l,o=e,s=c,--(i=u).pendingcb,r?(m.nextTick(s,o),m.nextTick(x,n,i),n._writableState.errorEmitted=!0,n.emit("error",o)):(s(o),n._writableState.errorEmitted=!0,n.emit("error",o),x(n,i));else{var h=b(u);h||u.corked||u.bufferProcessing||!u.bufferedRequest||d(t,u),l?f(p,t,u,h,c):p(t,u,h,c)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new h(this)}function c(t){if(a=a||E(31),!(r.call(c,this)||this instanceof a))return new c(t);this._writableState=new l(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function S(t,e,n,i,r,o,s){e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function p(t,e,n,i){var r,o;n||(r=t,0===(o=e).length&&o.needDrain&&(o.needDrain=!1,r.emit("drain"))),e.pendingcb--,i(),x(t,e)}function d(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=e.bufferedRequestCount,r=new Array(i),o=e.corkedRequestsFree;o.entry=n;for(var s=0,a=!0;n;)(r[s]=n).isBuf||(a=!1),n=n.next,s+=1;r.allBuffers=a,S(t,e,!0,e.length,r,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new h(e),e.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,c=n.callback;if(S(t,e,!1,e.objectMode?1:u.length,u,l,c),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function b(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function y(e,n){e._final(function(t){n.pendingcb--,t&&e.emit("error",t),n.prefinished=!0,e.emit("prefinish"),x(e,n)})}function x(t,e){var n,i,r=b(e);return r&&(n=t,(i=e).prefinished||i.finalCalled||("function"==typeof n._final?(i.pendingcb++,i.finalCalled=!0,m.nextTick(y,n,i)):(i.prefinished=!0,n.emit("prefinish"))),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}i.inherits(c,s),l.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(l.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(r=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(t){return!!r.call(this,t)||this===c&&t&&t._writableState instanceof l}})):r=function(t){return t instanceof this},c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},c.prototype.write=function(t,e,n){var i,r,o,s,a,u,l,c,h,f,p,d=this._writableState,b=!1,y=!d.objectMode&&(i=t,g.isBuffer(i)||i instanceof v);return y&&!g.isBuffer(t)&&(p=t,t=g.from(p)),"function"==typeof e&&(n=e,e=null),e=y?"buffer":e||d.defaultEncoding,"function"!=typeof n&&(n=_),d.ended?(c=this,h=n,f=new Error("write after end"),c.emit("error",f),m.nextTick(h,f)):(y||(r=this,o=d,a=n,l=!(u=!0),null===(s=t)?l=new TypeError("May not write null values to stream"):"string"==typeof s||void 0===s||o.objectMode||(l=new TypeError("Invalid non-string/buffer chunk")),l&&(r.emit("error",l),m.nextTick(a,l),u=!1),u))&&(d.pendingcb++,b=function(t,e,n,i,r,o){if(!n){var s=(u=i,l=r,(a=e).objectMode||!1===a.decodeStrings||"string"!=typeof u||(u=g.from(u,l)),u);i!==s&&(n=!0,r="buffer",i=s)}var a,u,l,c=e.objectMode?1:i.length;e.length+=c;var h=e.length<e.highWaterMark;if(h||(e.needDrain=!0),e.writing||e.corked){var f=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},f?f.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else S(t,e,!1,c,i,r,o);return h}(this,d,y,t,e,n)),b},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||d(this,t))},c.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},c.prototype._writev=null,c.prototype.end=function(t,e,n){var i,r,o,s=this._writableState;"function"==typeof t?(n=t,e=t=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),s.corked&&(s.corked=1,this.uncork()),s.ending||s.finished||(i=this,o=n,(r=s).ending=!0,x(i,r),o&&(r.finished?m.nextTick(o):i.once("finish",o)),r.ended=!0,i.writable=!1)},Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),c.prototype.destroy=u.destroy,c.prototype._undestroy=u.undestroy,c.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,E(40),E(154).setImmediate,E(19))},function(t,e,n){"use strict";var i=n(47),r=n(160),o=n(161),s=n(162);function a(t,e,n,i,r){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=i,this.compressedContent=r}o=n(161),a.prototype={getContentWorker:function(){var t=new r(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),e=this;return t.on("end",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),t},getCompressedWorker:function(){return new r(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(t,e,n){return t.pipe(new s).pipe(new o("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",e)},t.exports=a},function(t,e,n){"use strict";var i=n(3),s=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e){return void 0!==t&&t.length?"string"!==i.getTypeOf(t)?function(t,e,n){var i=s,r=0+n;t^=-1;for(var o=0;o<r;o++)t=t>>>8^i[255&(t^e[o])];return-1^t}(0|e,t,t.length):function(t,e,n){var i=s,r=0+n;t^=-1;for(var o=0;o<r;o++)t=t>>>8^i[255&(t^e.charCodeAt(o))];return-1^t}(0|e,t,t.length):0}},function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=n(60),f=n(177),p=n(125),d=n(61),o=n(25),s=n(207),a=n(109),i=n(84),b=n(148),y=n(57),m=n(83),g=n(1),l=n(32),r=n(85),c=n(4),u=n(8),v=n(88),_=n(175),S=n(174),x=(w.prototype.load=function(t){if(this.reset(),"string"==typeof t){var e=t,n=this;if("PK"===e.substr(0,4))return b.MXLHelper.MXLtoXMLstring(e).then(function(t){return n.load(t)},function(t){throw g.debug(t),new Error("OpenSheetMusicDisplay: Invalid MXL file")});if(""===e.substr(0,3))return n.load(e.substr(3));if("<?xml"===e.substr(0,5))t=(new DOMParser).parseFromString(e,"application/xml");else if(e.length<2083)return m.AJAX.ajax(e).then(function(t){return n.load(t)},function(t){throw t})}if(!t||!t.nodeName)return y.Promise.reject(new Error("OpenSheetMusicDisplay: The document which was provided is invalid"));for(var i,r=t.childNodes,o=0,s=r.length;o<s;o+=1){var a=r[o];if(a.nodeType===Node.ELEMENT_NODE&&"score-partwise"===a.nodeName.toLowerCase()){i=a;break}}if(!i)return y.Promise.reject(new Error("OpenSheetMusicDisplay: Document is not a valid 'partwise' MusicXML"));var u=new h.IXmlElement(i),l=new f.VexFlowMusicSheetCalculator,c=new p.MusicSheetReader;return this.sheet=c.createMusicSheet(u,"Untitled Score"),void 0===this.sheet?y.Promise.reject(new Error("given music sheet was incomplete or could not be loaded.")):(this.graphic=new d.GraphicalMusicSheet(this.sheet,l),this.drawingParameters.drawCursors&&this.cursor&&this.cursor.init(this.sheet.MusicPartManager,this.graphic),g.info("Loaded sheet "+this.sheet.TitleString+" successfully."),y.Promise.resolve({}))},w.prototype.render=function(){if(!this.graphic)throw new Error("OpenSheetMusicDisplay: Before rendering a music sheet, please load a MusicXML file");this.drawer.clear();var t=this.container.offsetWidth;this.sheet.pageWidth=t/this.zoom/10,this.graphic.reCalculate();var e=10*this.graphic.MusicPages[0].PositionAndShape.BorderBottom*this.zoom;this.drawingParameters.drawCursors&&(this.graphic.Cursors.length=0),this.drawer.resize(t,e),this.drawer.scale(this.zoom),this.drawer.drawSheet(this.graphic),this.drawingParameters.drawCursors&&this.cursor&&this.cursor.update()},w.prototype.IsReadyToRender=function(){return void 0!==this.graphic},w.prototype.clear=function(){this.drawer.clear(),this.reset()},w.prototype.setOptions=function(t){this.drawingParameters||(this.drawingParameters=new l.DrawingParameters),t.drawingParameters&&(this.drawingParameters.DrawingParametersEnum=l.DrawingParametersEnum[t.drawingParameters.toLowerCase()]);var e=void 0!==this.backend;void 0===t.backend&&void 0!==this.backend||(e&&this.drawer.clear(),void 0===t.backend||"svg"===t.backend.toLowerCase()?this.backend=new s.SvgVexFlowBackend:this.backend=new a.CanvasVexFlowBackend,this.backend.initialize(this.container),this.canvas=this.backend.getCanvas(),this.innerElement=this.backend.getInnerElement(),this.enableOrDisableCursor(this.drawingParameters.drawCursors),this.drawer=new o.VexFlowMusicSheetDrawer(this.canvas,this.backend,this.drawingParameters)),void 0!==t.autoBeam&&(c.EngravingRules.Rules.AutoBeamNotes=t.autoBeam);var n=t.autoBeamOptions;if(n&&(void 0===n.maintain_stem_directions&&(n.maintain_stem_directions=!1),(c.EngravingRules.Rules.AutoBeamOptions=n).groups&&n.groups.length))for(var i=0,r=n.groups;i<r.length;i++)if(2!==r[i].length)throw new Error("Each fraction in autoBeamOptions.groups must be of length 2, e.g. [3,4] for beaming three fourths");void 0!==t.coloringMode&&this.setColoringMode(t),void 0!==t.coloringEnabled&&(c.EngravingRules.Rules.ColoringEnabled=t.coloringEnabled),void 0!==t.colorStemsLikeNoteheads&&(c.EngravingRules.Rules.ColorStemsLikeNoteheads=t.colorStemsLikeNoteheads),t.disableCursor&&(this.drawingParameters.drawCursors=!1,this.enableOrDisableCursor(this.drawingParameters.drawCursors)),t.drawHiddenNotes&&(this.drawingParameters.drawHiddenNotes=!0),void 0!==t.drawCredits&&(this.drawingParameters.DrawCredits=t.drawCredits),void 0!==t.drawComposer&&(this.drawingParameters.DrawComposer=t.drawComposer),void 0!==t.drawTitle&&(this.drawingParameters.DrawTitle=t.drawTitle),void 0!==t.drawSubtitle&&(this.drawingParameters.DrawSubtitle=t.drawSubtitle),void 0!==t.drawLyricist&&(this.drawingParameters.DrawLyricist=t.drawLyricist),void 0!==t.drawPartNames&&(this.drawingParameters.DrawPartNames=t.drawPartNames),void 0!==t.drawPartAbbreviations&&(c.EngravingRules.Rules.RenderPartAbbreviations=t.drawPartAbbreviations),!1===t.drawFingerings&&(c.EngravingRules.Rules.RenderFingerings=!1),void 0!==t.fingeringPosition&&(c.EngravingRules.Rules.FingeringPosition=u.AbstractExpression.PlacementEnumFromString(t.fingeringPosition)),void 0!==t.fingeringInsideStafflines&&(c.EngravingRules.Rules.FingeringInsideStafflines=t.fingeringInsideStafflines),void 0!==t.followCursor&&(this.FollowCursor=t.followCursor),void 0!==t.setWantedStemDirectionByXml&&(c.EngravingRules.Rules.SetWantedStemDirectionByXml=t.setWantedStemDirectionByXml),t.defaultColorNotehead&&(c.EngravingRules.Rules.DefaultColorNotehead=t.defaultColorNotehead),t.defaultColorRest&&(c.EngravingRules.Rules.DefaultColorRest=t.defaultColorRest),t.defaultColorStem&&(c.EngravingRules.Rules.DefaultColorStem=t.defaultColorStem),t.defaultColorLabel&&(c.EngravingRules.Rules.DefaultColorLabel=t.defaultColorLabel),t.defaultColorTitle&&(c.EngravingRules.Rules.DefaultColorTitle=t.defaultColorTitle),t.drawUpToMeasureNumber&&(c.EngravingRules.Rules.MaxMeasureToDrawIndex=t.drawUpToMeasureNumber),t.drawFromMeasureNumber&&(c.EngravingRules.Rules.MinMeasureToDrawIndex=t.drawFromMeasureNumber-1),t.tupletsRatioed&&(c.EngravingRules.Rules.TupletsRatioed=!0),t.tupletsBracketed&&(c.EngravingRules.Rules.TupletsBracketed=!0),t.tripletsBracketed&&(c.EngravingRules.Rules.TripletsBracketed=!0),t.autoResize?(this.resizeHandlerAttached||this.autoResize(),this.autoResizeEnabled=!0):!1===t.autoResize&&(this.autoResizeEnabled=!1)},w.prototype.setColoringMode=function(t){if(t.coloringMode!==l.ColoringModes.XML){var e,n=[_.NoteEnum.C,_.NoteEnum.D,_.NoteEnum.E,_.NoteEnum.F,_.NoteEnum.G,_.NoteEnum.A,_.NoteEnum.B,-1];if(t.coloringMode===l.ColoringModes.CustomColorSet){if(!t.coloringSetCustom||8!==t.coloringSetCustom.length)throw new Error("Invalid amount of colors: With coloringModes.customColorSet, you have to provide a coloringSetCustom parameter with 8 strings (C to B, rest note).");for(var i=0,r=t.coloringSetCustom;i<r.length;i++){var o=r[i];if(!/^\#[0-9a-fA-F]{6}$/.test(o))throw new Error("One of the color strings in options.coloringSetCustom was not a valid HTML Hex color:\n"+o)}e=t.coloringSetCustom}else if(t.coloringMode===l.ColoringModes.AutoColoring){e=[];for(var s=Object.keys(S.AutoColorSet),a=0;a<s.length;a++)e.push(S.AutoColorSet[s[a]])}var u=new v.Dictionary;for(a=0;a<n.length;a++)u.setValue(n[a],e[a]);u.setValue(-1,e[7]),c.EngravingRules.Rules.ColoringSetCurrent=u,c.EngravingRules.Rules.ColoringMode=t.coloringMode}else c.EngravingRules.Rules.ColoringMode=l.ColoringModes.XML},w.prototype.setLogLevel=function(t){switch(t){case"trace":g.setLevel(g.levels.TRACE);break;case"debug":g.setLevel(g.levels.DEBUG);break;case"info":g.setLevel(g.levels.INFO);break;case"warn":g.setLevel(g.levels.WARN);break;case"error":g.setLevel(g.levels.ERROR);break;default:g.warn("Could not set log level to "+t+". Using warn instead."),g.setLevel(g.levels.WARN)}},w.prototype.reset=function(){this.drawingParameters.drawCursors&&this.cursor&&this.cursor.hide(),this.sheet=void 0,this.graphic=void 0,this.zoom=1},w.prototype.autoResize=function(){var t=this;this.handleResize(function(){},function(){t.IsReadyToRender()&&t.render()})},w.prototype.handleResize=function(t,e){var n,i=void 0,r=200,o=this;function s(){o.AutoResizeEnabled&&(n=(new Date).getTime(),i||(t(),n=(new Date).getTime(),i=window.setTimeout(a,r)))}function a(){i=void 0,window.clearTimeout(i),(new Date).getTime()-n<r?i=window.setTimeout(a,r):e()}window.attachEvent?window.attachEvent("onresize",s):window.addEventListener("resize",s),this.resizeHandlerAttached=!0,window.setTimeout(t,0),window.setTimeout(e,1)},w.prototype.enableOrDisableCursor=function(t){if(this.drawingParameters.drawCursors=t)this.cursor||(this.cursor=new i.Cursor(this.innerElement,this),this.sheet&&this.graphic&&this.cursor.init(this.sheet.MusicPartManager,this.graphic));else{if(!this.cursor)return;this.cursor.hide()}},Object.defineProperty(w.prototype,"DrawSkyLine",{get:function(){return this.drawer.skyLineVisible},set:function(t){this.drawer&&(this.drawer.skyLineVisible=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"DrawBottomLine",{get:function(){return this.drawer.bottomLineVisible},set:function(t){this.drawer&&(this.drawer.bottomLineVisible=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"DrawBoundingBox",{get:function(){return this.drawer.drawableBoundingBoxElement},set:function(t){this.drawer.drawableBoundingBoxElement=t,this.render()},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"AutoResizeEnabled",{get:function(){return this.autoResizeEnabled},set:function(t){this.autoResizeEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"FollowCursor",{get:function(){return this.followCursor},set:function(t){this.followCursor=t},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"Sheet",{get:function(){return this.sheet},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"Drawer",{get:function(){return this.drawer},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"GraphicSheet",{get:function(){return this.graphic},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"DrawingParameters",{get:function(){return this.drawingParameters},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"EngravingRules",{get:function(){return c.EngravingRules.Rules},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"Version",{get:function(){return this.version},enumerable:!0,configurable:!0}),w);function w(t,e){if(void 0===e&&(e=r.OSMDOptions.OSMDOptionsStandard()),this.version="0.7.0-dev",this.zoom=1,"string"==typeof t?this.container=document.getElementById(t):t&&"appendChild"in t&&(this.container=t),!this.container)throw new Error("Please pass a valid div container to OpenSheetMusicDisplay");void 0===e.autoResize&&(e.autoResize=!0),this.setOptions(e)}e.OpenSheetMusicDisplay=x},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(57),i=(r.ajax=function(n){var i,r=-1<n.indexOf(".mxl")?"text/plain; charset=x-user-defined":"application/xml";if(XMLHttpRequest)i=new XMLHttpRequest;else{if(!ActiveXObject)return o.Promise.reject(new Error("XMLHttp not supported."));i=new ActiveXObject("Microsoft.XMLHTTP")}return new o.Promise(function(t,e){i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&(200===i.status?t(i.responseText):0===i.status&&i.responseText?t(i.responseText):e(new Error("Could not retrieve requested URL "+i.status)))},i.ontimeout=function(t){e(new Error("Server request Timeout"))},i.overrideMimeType(r),i.open("GET",n,!0),i.send()})},r);function r(){}e.AJAX=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(r.prototype.init=function(t,e){this.manager=t,this.reset(),this.graphic=e,this.hidden=!0,this.hide()},r.prototype.show=function(){this.hidden=!1,this.update()},r.prototype.getStaffEntriesFromVoiceEntry=function(t){var e=t.ParentSourceStaffEntry.VerticalContainerParent.ParentMeasure.measureListIndex,n=t.ParentSourceStaffEntry.ParentStaff.idInMusicSheet;return this.graphic.findGraphicalStaffEntryFromMeasureList(n,e,t.ParentSourceStaffEntry)},r.prototype.update=function(){var e=this;if(!this.hidden){this.graphic.Cursors.length=0;var t=this.iterator,n=t.CurrentVisibleVoiceEntries();if(!t.EndReached&&void 0!==t.CurrentVoiceEntries&&0!==n.length){var i,r,o,s=n.map(function(t){return e.getStaffEntriesFromVoiceEntry(t)}).sort(function(t,e){return t.PositionAndShape.AbsolutePosition.x<=e.PositionAndShape.AbsolutePosition.x?-1:1})[0];i=s.PositionAndShape.AbsolutePosition.x;var a=s.parentMeasure.parentMusicSystem;r=a.PositionAndShape.AbsolutePosition.y+a.StaffLines[0].PositionAndShape.RelativePosition.y,o=a.PositionAndShape.AbsolutePosition.y+a.StaffLines[a.StaffLines.length-1].PositionAndShape.RelativePosition.y+4-r;var u=this.cursorElement;u.style.top=10*r*this.openSheetMusicDisplay.zoom+"px",u.style.left=10*(i-1.5)*this.openSheetMusicDisplay.zoom+"px",u.height=10*o*this.openSheetMusicDisplay.zoom;var l=30*this.openSheetMusicDisplay.zoom;l!==u.width&&(u.width=l,this.updateStyle(l)),this.openSheetMusicDisplay.FollowCursor&&this.cursorElement.scrollIntoView({behavior:"smooth",block:"center"}),this.cursorElement.style.display=""}}},r.prototype.hide=function(){this.cursorElement.style.display="none",this.hidden=!0},r.prototype.next=function(){this.iterator.moveToNext(),this.hidden||this.show()},r.prototype.reset=function(){this.iterator=this.manager.getIterator(),this.iterator.moveToNext(),this.update()},r.prototype.updateStyle=function(t,e){void 0===e&&(e="#33e02f");var n=document.createElement("canvas");n.width=this.cursorElement.width,n.height=1;var i=n.getContext("2d");i.globalAlpha=.5;var r=i.createLinearGradient(0,0,this.cursorElement.width,0);r.addColorStop(0,"white"),r.addColorStop(.2,e),r.addColorStop(.8,e),r.addColorStop(1,"white"),i.fillStyle=r,i.fillRect(0,0,t,1),this.cursorElement.src=n.toDataURL("image/png")},Object.defineProperty(r.prototype,"Iterator",{get:function(){return this.iterator},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Hidden",{get:function(){return this.hidden},enumerable:!0,configurable:!0}),r.prototype.VoicesUnderCursor=function(t){return this.iterator.CurrentVisibleVoiceEntries(t)},r.prototype.NotesUnderCursor=function(t){var e=this.VoicesUnderCursor(t),n=[];return e.forEach(function(t){n.push.apply(n,t.Notes)}),n},r);function r(t,e){this.hidden=!0,this.container=t,this.openSheetMusicDisplay=e;var n=document.createElement("img");n.style.position="absolute",n.style.zIndex="-1",this.cursorElement=n,this.container.appendChild(n)}e.Cursor=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(32),r=(o.OSMDOptionsStandard=function(){return{autoResize:!0,backend:"svg",drawingParameters:i.DrawingParametersEnum.default}},o);function o(){}e.OSMDOptions=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SizeF2D=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.width=t,this.height=e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(r.prototype,"Index",{get:function(){return this.index},set:function(t){this.index=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"AbsoluteTimestamp",{get:function(){return this.absoluteTimestamp},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"StaffEntries",{get:function(){return this.staffEntries},set:function(t){this.staffEntries=t},enumerable:!0,configurable:!0}),r.compareByTimestamp=function(t,e){var n=t.absoluteTimestamp.RealValue,i=e.absoluteTimestamp.RealValue;return n<i?-1:i<n?1:0},r.prototype.getFirstNonNullStaffEntry=function(){for(var t=0,e=this.staffEntries.length;t<e;++t){var n=this.staffEntries[t];if(void 0!==n)return n}},r);function r(t,e){this.staffEntries=[],this.absoluteTimestamp=e,this.staffEntries=new Array(t)}e.VerticalGraphicalStaffEntryContainer=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(41);e.arrays=i;var r=n(178);e.Bag=r.default;var o=n(179);e.BSTree=o.default;var s=n(90);e.BSTreeKV=s.default;var a=n(15);e.Dictionary=a.default;var u=n(92);e.Heap=u.default;var l=n(180);e.LinkedDictionary=l.default;var c=n(62);e.LinkedList=c.default;var h=n(181);e.MultiDictionary=h.default;var f=n(93);e.FactoryDictionary=f.default;var p=n(93);e.DefaultDictionary=p.default;var d=n(91);e.Queue=d.default;var b=n(182);e.PriorityQueue=b.default;var y=n(89);e.Set=y.default;var m=n(183);e.Stack=m.default;var g=n(184);e.MultiRootTree=g.default;var v=n(10);e.util=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),r=n(41),o=n(15),s=(a.prototype.contains=function(t){return this.dictionary.containsKey(t)},a.prototype.add=function(t){return!this.contains(t)&&!i.isUndefined(t)&&(this.dictionary.setValue(t,t),!0)},a.prototype.intersection=function(e){var n=this;this.forEach(function(t){return e.contains(t)||n.remove(t),!0})},a.prototype.union=function(t){var e=this;t.forEach(function(t){return e.add(t),!0})},a.prototype.difference=function(t){var e=this;t.forEach(function(t){return e.remove(t),!0})},a.prototype.isSubsetOf=function(e){if(this.size()>e.size())return!1;var n=!0;return this.forEach(function(t){return!!e.contains(t)||(n=!1)}),n},a.prototype.remove=function(t){return!!this.contains(t)&&(this.dictionary.remove(t),!0)},a.prototype.forEach=function(n){this.dictionary.forEach(function(t,e){return n(e)})},a.prototype.toArray=function(){return this.dictionary.values()},a.prototype.isEmpty=function(){return this.dictionary.isEmpty()},a.prototype.size=function(){return this.dictionary.size()},a.prototype.clear=function(){this.dictionary.clear()},a.prototype.toString=function(){return r.toString(this.toArray())},a);function a(t){this.dictionary=new o.default(t)}e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),r=n(91),o=(s.prototype.add=function(t){return!i.isUndefined(t)&&null!==this.insertNode(this.createNode(t))&&(this.nElements++,!0)},s.prototype.clear=function(){this.root=null,this.nElements=0},s.prototype.isEmpty=function(){return 0===this.nElements},s.prototype.size=function(){return this.nElements},s.prototype.contains=function(t){return!i.isUndefined(t)&&null!==this.searchNode(this.root,t)},s.prototype.search=function(t){var e=this.searchNode(this.root,t);if(null!==e)return e.element},s.prototype.remove=function(t){var e=this.searchNode(this.root,t);return null!==e&&(this.removeNode(e),this.nElements--,!0)},s.prototype.inorderTraversal=function(t){this.inorderTraversalAux(this.root,t,{stop:!1})},s.prototype.preorderTraversal=function(t){this.preorderTraversalAux(this.root,t,{stop:!1})},s.prototype.postorderTraversal=function(t){this.postorderTraversalAux(this.root,t,{stop:!1})},s.prototype.levelTraversal=function(t){this.levelTraversalAux(this.root,t)},s.prototype.minimum=function(){if(!this.isEmpty()&&null!==this.root)return this.minimumAux(this.root).element},s.prototype.maximum=function(){if(!this.isEmpty()&&null!==this.root)return this.maximumAux(this.root).element},s.prototype.forEach=function(t){this.inorderTraversal(t)},s.prototype.toArray=function(){var e=[];return this.inorderTraversal(function(t){return e.push(t),!0}),e},s.prototype.height=function(){return this.heightAux(this.root)},s.prototype.searchNode=function(t,e){for(var n=1;null!==t&&0!==n;)(n=this.compare(e,t.element))<0?t=t.leftCh:0<n&&(t=t.rightCh);return t},s.prototype.transplant=function(t,e){null===t.parent?this.root=e:t===t.parent.leftCh?t.parent.leftCh=e:t.parent.rightCh=e,null!==e&&(e.parent=t.parent)},s.prototype.removeNode=function(t){if(null===t.leftCh)this.transplant(t,t.rightCh);else if(null===t.rightCh)this.transplant(t,t.leftCh);else{var e=this.minimumAux(t.rightCh);e.parent!==t&&(this.transplant(e,e.rightCh),e.rightCh=t.rightCh,e.rightCh.parent=e),this.transplant(t,e),e.leftCh=t.leftCh,e.leftCh.parent=e}},s.prototype.inorderTraversalAux=function(t,e,n){null===t||n.stop||(this.inorderTraversalAux(t.leftCh,e,n),n.stop||(n.stop=!1===e(t.element),n.stop||this.inorderTraversalAux(t.rightCh,e,n)))},s.prototype.levelTraversalAux=function(t,e){var n=new r.default;for(null!==t&&n.enqueue(t),t=n.dequeue()||null;null!=t;){if(!1===e(t.element))return;null!==t.leftCh&&n.enqueue(t.leftCh),null!==t.rightCh&&n.enqueue(t.rightCh),t=n.dequeue()||null}},s.prototype.preorderTraversalAux=function(t,e,n){null===t||n.stop||(n.stop=!1===e(t.element),n.stop||(this.preorderTraversalAux(t.leftCh,e,n),n.stop||this.preorderTraversalAux(t.rightCh,e,n)))},s.prototype.postorderTraversalAux=function(t,e,n){null===t||n.stop||(this.postorderTraversalAux(t.leftCh,e,n),n.stop||(this.postorderTraversalAux(t.rightCh,e,n),n.stop||(n.stop=!1===e(t.element))))},s.prototype.minimumAux=function(t){for(;null!=t&&null!==t.leftCh;)t=t.leftCh;return t},s.prototype.maximumAux=function(t){for(;null!=t&&null!==t.rightCh;)t=t.rightCh;return t},s.prototype.heightAux=function(t){return null===t?-1:Math.max(this.heightAux(t.leftCh),this.heightAux(t.rightCh))+1},s.prototype.insertNode=function(t){for(var e=null,n=this.root;null!==n;){var i=this.compare(t.element,n.element);if(0===i)return null;n=i<0?(e=n).leftCh:(e=n).rightCh}return null===(t.parent=e)?this.root=t:this.compare(t.element,e.element)<0?e.leftCh=t:e.rightCh=t,t},s.prototype.createNode=function(t){return{element:t,leftCh:null,rightCh:null,parent:null}},s);function s(t){this.root=null,this.compare=t||i.defaultCompare,this.nElements=0}e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(62),r=(o.prototype.enqueue=function(t){return this.list.add(t)},o.prototype.add=function(t){return this.list.add(t)},o.prototype.dequeue=function(){if(0!==this.list.size()){var t=this.list.first();return this.list.removeElementAtIndex(0),t}},o.prototype.peek=function(){if(0!==this.list.size())return this.list.first()},o.prototype.size=function(){return this.list.size()},o.prototype.contains=function(t,e){return this.list.contains(t,e)},o.prototype.isEmpty=function(){return this.list.size()<=0},o.prototype.clear=function(){this.list.clear()},o.prototype.forEach=function(t){this.list.forEach(t)},o);function o(){this.list=new i.default}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),r=n(41),o=(s.prototype.leftChildIndex=function(t){return 2*t+1},s.prototype.rightChildIndex=function(t){return 2*t+2},s.prototype.parentIndex=function(t){return Math.floor((t-1)/2)},s.prototype.minIndex=function(t,e){return e>=this.data.length?t>=this.data.length?-1:t:this.compare(this.data[t],this.data[e])<=0?t:e},s.prototype.siftUp=function(t){for(var e=this.parentIndex(t);0<t&&0<this.compare(this.data[e],this.data[t]);)r.swap(this.data,e,t),t=e,e=this.parentIndex(t)},s.prototype.siftDown=function(t){for(var e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t));0<=e&&0<this.compare(this.data[t],this.data[e]);)r.swap(this.data,e,t),t=e,e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t))},s.prototype.peek=function(){return 0<this.data.length?this.data[0]:void 0},s.prototype.add=function(t){return!i.isUndefined(t)&&(this.data.push(t),this.siftUp(this.data.length-1),!0)},s.prototype.removeRoot=function(){if(0<this.data.length){var t=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),0<this.data.length&&this.siftDown(0),t}},s.prototype.contains=function(t){var e=i.compareToEquals(this.compare);return r.contains(this.data,t,e)},s.prototype.size=function(){return this.data.length},s.prototype.isEmpty=function(){return this.data.length<=0},s.prototype.clear=function(){this.data.length=0},s.prototype.forEach=function(t){r.forEach(this.data,t)},s);function s(t){this.data=[],this.compare=t||i.defaultCompare}e.default=o},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(15),a=n(10),u=(o=s.default,r(l,o),l.prototype.setDefault=function(t,e){var n=o.prototype.getValue.call(this,t);return a.isUndefined(n)?(this.setValue(t,e),e):n},l.prototype.getValue=function(t){return this.setDefault(t,this.defaultFactoryFunction())},l);function l(t,e){var n=o.call(this,e)||this;return n.defaultFactoryFunction=t,n}e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(58),l=n(4),y=n(23),m=n(17),g=n(11),c=n(6),h=n(21),v=n(34),f=n(20),r=n(11),p=n(28),d=n(42),o=(s.prototype.initialize=function(t,e,n){this.leadSheet=t.LeadSheet,this.graphicalMusicSheet=t,this.rules=this.graphicalMusicSheet.ParentMusicSheet.rules,this.measureList=e,this.currentMusicPage=this.createMusicPage(),this.currentPageHeight=0,this.numberOfVisibleStaffLines=n,this.activeRhythm=new Array(this.numberOfVisibleStaffLines),this.activeKeys=new Array(this.numberOfVisibleStaffLines),this.activeClefs=new Array(this.numberOfVisibleStaffLines),this.initializeActiveInstructions(this.measureList[0])},s.prototype.buildMusicSystems=function(){var t=!1,e=this.getFullPageSystemWidth();this.measureListIndex=0,this.currentSystemParams=new _,this.currentSystemParams.currentSystem=this.initMusicSystem(),this.layoutSystemStaves(),this.addSystemLabels(),this.currentPageHeight+=this.currentSystemParams.currentSystem.PositionAndShape.RelativePosition.y;for(var n=0,i=0,r=this.measureList.length;i<r;++i)0<this.measureList[i].length&&n++;for(;this.measureListIndex<n;){var o=this.measureList[this.measureListIndex];for(i=0,r=o.length;i<r;++i)o[i].resetLayout();var s=o[0].parentSourceMeasure,a=s.BreakSystemAfter,u=this.currentSystemParams.IsSystemStartMeasure(),l=s===this.graphicalMusicSheet.ParentMusicSheet.getFirstSourceMeasure(),c=this.rules.MeasureLeftMargin,h=0,f=this.getMeasureStartLine();c+=this.getLineWidth(o[0],f,u),this.leadSheet||(c+=this.addBeginInstructions(o,u,l),h+=this.addEndInstructions(o));for(var p=0,d=0;d<this.numberOfVisibleStaffLines;d++)p=Math.max(p,o[d].minimumStaffEntriesWidth);var b=this.getMeasureEndLine();h+=this.getLineWidth(o[0],b,u);var y=this.rules.MeasureLeftMargin;if(this.measureListIndex+1<this.measureList.length){var m=this.measureList[this.measureListIndex+1];m[0].parentSourceMeasure.hasBeginInstructions()&&(y+=this.addBeginInstructions(m,!1,!1))}var g=c+h+p,v=this.currentSystemParams.currentWidth+g+y<e;u||v?(this.addMeasureToSystem(o,f,b,g,c,p,h),this.updateActiveClefs(s,o),this.measureListIndex++):this.finalizeCurrentAndCreateNewSystem(o,t),t=a}this.finalizeCurrentAndCreateNewSystem(this.measureList[this.measureList.length-1],!0)},s.prototype.setMeasureWidth=function(t,e,n,i){for(var r=0,o=t.length;r<o;++r){var s=t[r];s.setWidth(e),0<n&&(s.beginInstructionsWidth=n),0<i&&(s.endInstructionsWidth=i)}},s.prototype.finalizeCurrentAndCreateNewSystem=function(t,e){void 0===e&&(e=!1),this.adaptRepetitionLineWithIfNeeded(),e||this.checkAndCreateExtraInstructionMeasure(t),this.stretchMusicSystem(e),this.currentPageHeight+this.currentSystemParams.currentSystem.PositionAndShape.Size.height+this.rules.SystemDistance<=this.rules.PageHeight?(this.currentPageHeight+=this.currentSystemParams.currentSystem.PositionAndShape.Size.height+this.rules.SystemDistance,this.currentPageHeight+this.currentSystemParams.currentSystem.PositionAndShape.Size.height+this.rules.SystemDistance>=this.rules.PageHeight&&(this.currentMusicPage=this.createMusicPage(),this.currentPageHeight=this.rules.PageTopMargin+this.rules.TitleTopDistance)):(this.currentMusicPage=this.createMusicPage(),this.currentPageHeight=this.rules.PageTopMargin+this.rules.TitleTopDistance),this.currentSystemParams=new _,this.measureListIndex<this.measureList.length&&(this.currentSystemParams.currentSystem=this.initMusicSystem(),this.layoutSystemStaves(),this.addSystemLabels())},s.prototype.adaptRepetitionLineWithIfNeeded=function(){var t=this.currentSystemParams.systemMeasures;if(1<=t.length){var e=this.currentSystemParams.currentSystem.GraphicalMeasures[this.currentSystemParams.currentSystem.GraphicalMeasures.length-1],n=t[t.length-1],i=0;n.endLine===v.SystemLinesEnum.DotsBoldBoldDots&&(n.endLine=v.SystemLinesEnum.DotsThinBold,i=e[0].getLineWidth(v.SystemLinesEnum.DotsBoldBoldDots)/2-e[0].getLineWidth(v.SystemLinesEnum.DotsThinBold)),this.currentSystemParams.currentSystemFixWidth-=i;for(var r=0,o=e.length;r<o;++r)e[r].endInstructionsWidth-=i}},s.prototype.addMeasureToSystem=function(t,e,n,i,r,o,s){this.currentSystemParams.systemMeasures.push({beginLine:e,endLine:n}),this.setMeasureWidth(t,i,r,s),this.addStaveMeasuresToSystem(t),this.currentSystemParams.currentWidth+=i,this.currentSystemParams.currentSystemFixWidth+=r+s,this.currentSystemParams.currentSystemVarWidth+=o,this.currentSystemParams.systemMeasureIndex++},s.prototype.addSystemLabels=function(){this.currentSystemParams.currentSystem.createMusicSystemLabel(this.rules.InstrumentLabelTextHeight,this.rules.SystemLabelsRightMargin,this.rules.LabelMarginBorderFactor)},s.prototype.createMusicPage=function(){var t=new i.GraphicalMusicPage(this.graphicalMusicSheet);return this.graphicalMusicSheet.MusicPages.push(t),t.PositionAndShape.BorderLeft=0,t.PositionAndShape.BorderRight=this.graphicalMusicSheet.ParentMusicSheet.pageWidth,t.PositionAndShape.BorderTop=0,t.PositionAndShape.BorderBottom=this.rules.PageHeight,t.PositionAndShape.RelativePosition=new c.PointF2D(0,0),t},s.prototype.initMusicSystem=function(){var t=f.MusicSheetCalculator.symbolFactory.createMusicSystem(this.currentMusicPage,this.globalSystemIndex++);return this.currentMusicPage.MusicSystems.push(t),t},s.prototype.getFullPageSystemWidth=function(){return this.currentMusicPage.PositionAndShape.Size.width-this.rules.PageLeftMargin-this.rules.PageRightMargin-this.rules.SystemLeftMargin-this.rules.SystemRightMargin},s.prototype.layoutSystemStaves=function(){var t=this.getFullPageSystemWidth(),e=this.currentSystemParams.currentSystem,n=e.PositionAndShape;n.BorderLeft=0,n.BorderRight=t,n.BorderTop=0;for(var i=[],r=this.graphicalMusicSheet.ParentMusicSheet.Instruments,o=0,s=r.length;o<s;++o){var a=r[o];if(0!==a.Voices.length&&a.Visible)for(var u=0,l=a.Staves.length;u<l;++u){var c=a.Staves[u];i.push(c)}}var h=!1;if(this.leadSheet)for(o=0,s=i.length;o<s;++o)if(1<(c=i[o]).ParentInstrument.LyricVersesNumbers.length){h=!0;break}for(var f=0,p=0;p<i.length;p++)this.addStaffLineToMusicSystem(e,f,i[p]),f+=this.rules.StaffHeight,p+1<i.length&&(f+=this.leadSheet&&!h?2.5:i[p].ParentInstrument===i[p+1].ParentInstrument?this.rules.BetweenStaffDistance:this.rules.StaffDistance);n.BorderBottom=f},s.prototype.addStaffLineToMusicSystem=function(t,e,n){if(void 0!==t){var i=f.MusicSheetCalculator.symbolFactory.createStaffLine(t,n);t.StaffLines.push(i);var r=i.PositionAndShape,o=new c.PointF2D;t.Parent.MusicSystems[0]!==t||t.Parent!==t.Parent.Parent.MusicPages[0]||l.EngravingRules.Rules.CompactMode?(o.x=0,r.BorderRight=t.PositionAndShape.Size.width):(o.x=this.rules.FirstSystemMargin,r.BorderRight=t.PositionAndShape.Size.width-this.rules.FirstSystemMargin),o.y=e,r.RelativePosition=o,r.BorderLeft=0,r.BorderTop=0,r.BorderBottom=this.rules.StaffHeight;for(var s=0;s<5;s++){var a=new c.PointF2D;a.x=0,a.y=s*this.rules.StaffHeight/4;var u=new c.PointF2D;u.x=i.PositionAndShape.Size.width,u.y=s*this.rules.StaffHeight/4,this.leadSheet&&(a.y=u.y=0),i.StaffLines[s]=new h.GraphicalLine(a,u,this.rules.StaffLineWidth)}}},s.prototype.initializeActiveInstructions=function(t){var e=this.graphicalMusicSheet.ParentMusicSheet.getFirstSourceMeasure();if(void 0!==e){this.visibleStaffIndices=this.graphicalMusicSheet.getVisibleStavesIndecesFromSourceMeasure(t);for(var n=0,i=this.visibleStaffIndices.length;n<i;n++){var r=this.visibleStaffIndices[n],o=this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(e,r);this.activeClefs[n]=e.FirstInstructionsStaffEntries[r].Instructions[0];var s=m.KeyInstruction.copy(e.FirstInstructionsStaffEntries[r].Instructions[1]);s=this.transposeKeyInstruction(s,o),this.activeKeys[n]=s,this.activeRhythm[n]=e.FirstInstructionsStaffEntries[r].Instructions[2]}}},s.prototype.transposeKeyInstruction=function(t,e){return 0!==this.graphicalMusicSheet.ParentMusicSheet.Transpose&&e.ParentStaff.ParentInstrument.MidiInstrumentId!==r.MidiInstrument.Percussion&&void 0!==f.MusicSheetCalculator.transposeCalculator&&f.MusicSheetCalculator.transposeCalculator.transposeKey(t,this.graphicalMusicSheet.ParentMusicSheet.Transpose),t},s.prototype.addBeginInstructions=function(t,e,n){var i=t.length;if(0===i)return 0;for(var r=0,o=t[0].parentSourceMeasure,s=0;s<i;++s){var a=t[s],u=this.visibleStaffIndices[s],l=o.FirstInstructionsStaffEntries[u],c=this.AddInstructionsAtMeasureBegin(l,a,s,n,e);r=Math.max(r,c)}return r},s.prototype.addEndInstructions=function(t){var e=t.length;if(0===e)return 0;for(var n=.5,i=t[0].parentSourceMeasure,r=0;r<e;r++){var o=t[r],s=this.visibleStaffIndices[r],a=i.LastInstructionsStaffEntries[s],u=this.addInstructionsAtMeasureEnd(a,o);n=Math.max(n,u)}return n},s.prototype.AddInstructionsAtMeasureBegin=function(t,e,n,i,r){var o=0,s=void 0,a=void 0,u=void 0;if(void 0!==t)for(var l=0,c=t.Instructions.length;l<c;++l){var h=t.Instructions[l];h instanceof g.ClefInstruction?s=h:h instanceof m.KeyInstruction?a=h:h instanceof y.RhythmInstruction&&(u=h)}r&&(void 0===s&&(s=this.activeClefs[n]),void 0===a&&(a=this.activeKeys[n]),i&&void 0===u&&(u=this.activeRhythm[n]));var f=!1,p=!1,d=!1;if(void 0!==s?(e.addClefAtBegin(s),f=!0):s=this.activeClefs[n],void 0!==a){a=this.transposeKeyInstruction(a,e);var b=r?void 0:this.activeKeys[n];e.addKeyAtBegin(a,b,s),p=!0}return void 0!==u&&u.PrintObject&&(e.addRhythmAtBegin(u),d=!0),(f||p||d)&&(o+=e.beginInstructionsWidth,d&&(o+=this.rules.RhythmRightMargin)),o},s.prototype.addInstructionsAtMeasureEnd=function(t,e){if(void 0===t||void 0===t.Instructions||0===t.Instructions.length)return 0;for(var n=0,i=t.Instructions.length;n<i;++n){var r=t.Instructions[n];if(r instanceof g.ClefInstruction){var o=r;e.addClefAtEnd(o)}}return this.rules.MeasureRightMargin+e.endInstructionsWidth},s.prototype.updateActiveClefs=function(t,e){for(var n=0,i=e.length;n<i;n++){var r=this.visibleStaffIndices[n],o=t.FirstInstructionsStaffEntries[r];if(void 0!==o)for(var s=0,a=o.Instructions.length;s<a;++s)(d=o.Instructions[s])instanceof g.ClefInstruction?this.activeClefs[n]=d:d instanceof m.KeyInstruction?this.activeKeys[n]=d:d instanceof y.RhythmInstruction&&(this.activeRhythm[n]=d);var u=t.getEntriesPerStaff(r);for(s=0,a=u.length;s<a;++s){var l=u[s];if(void 0!==l.Instructions)for(var c=0,h=l.Instructions.length;c<h;++c)(d=l.Instructions[c])instanceof g.ClefInstruction&&(this.activeClefs[n]=d)}var f=t.LastInstructionsStaffEntries[r];if(void 0!==f){var p=f.Instructions;for(s=0,h=p.length;s<h;++s){var d;(d=p[s])instanceof g.ClefInstruction&&(this.activeClefs[n]=d)}}}},s.prototype.checkAndCreateExtraInstructionMeasure=function(t){for(var e=t[0].parentSourceMeasure.FirstInstructionsStaffEntries,n=[],i=0,r=t.length;i<r;++i){var o=t[i];n.push(e[o.ParentStaff.idInMusicSheet])}var s=0,a=0;for(r=n.length;a<r;++a){var u=n[a];if(void 0!==u){for(var l=u.Instructions,c=void 0,h=void 0,f=0,p=l.length;f<p;++f){var d=l[f];d instanceof m.KeyInstruction&&d.Key!==this.activeKeys[a].Key&&(c=d),d instanceof y.RhythmInstruction&&d!==this.activeRhythm[a]&&(h=d)}if(void 0!==c||void 0!==h){var b=this.addExtraInstructionMeasure(a,c,h);s=Math.max(s,b)}}}0<s&&(this.currentSystemParams.systemMeasures.push({beginLine:v.SystemLinesEnum.None,endLine:v.SystemLinesEnum.None}),this.currentSystemParams.currentWidth+=s,this.currentSystemParams.currentSystemFixWidth+=s)},s.prototype.addExtraInstructionMeasure=function(t,e,n){var i=this.currentSystemParams.currentSystem,r=f.MusicSheetCalculator.symbolFactory.createExtraGraphicalMeasure(i.StaffLines[t]);[].push(r),void 0!==e&&r.addKeyAtBegin(e,this.activeKeys[t],this.activeClefs[t]),void 0!==n&&n.PrintObject&&r.addRhythmAtBegin(n),r.PositionAndShape.BorderLeft=0,r.PositionAndShape.BorderTop=0,r.PositionAndShape.BorderBottom=this.rules.StaffHeight;var o=this.rules.MeasureLeftMargin+r.beginInstructionsWidth+this.rules.MeasureRightMargin;return r.PositionAndShape.BorderRight=o,i.StaffLines[t].Measures.push(r),o},s.prototype.addStaveMeasuresToSystem=function(t){if(void 0!==t[0]){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);for(var i=this.currentSystemParams.currentSystem,r=0;r<this.numberOfVisibleStaffLines;r++){var o=e[r];i.StaffLines[r].Measures.push(o),o.ParentStaffLine=i.StaffLines[r]}i.AddGraphicalMeasures(e)}},s.prototype.getMeasureStartLine=function(){if(this.thisMeasureBeginsLineRepetition()){var t=this.currentSystemParams.IsSystemStartMeasure(),e=0===this.measureListIndex;if(this.previousMeasureEndsLineRepetition()&&!t)return v.SystemLinesEnum.DotsBoldBoldDots;if(!e)return v.SystemLinesEnum.BoldThinDots}return v.SystemLinesEnum.None},s.prototype.getMeasureEndLine=function(){if(this.nextMeasureBeginsLineRepetition()&&this.thisMeasureEndsLineRepetition())return v.SystemLinesEnum.DotsBoldBoldDots;if(this.thisMeasureEndsLineRepetition())return v.SystemLinesEnum.DotsThinBold;if(this.measureListIndex===this.measureList.length-1||this.measureList[this.measureListIndex][0].parentSourceMeasure.endsPiece)return v.SystemLinesEnum.ThinBold;if(this.nextMeasureHasKeyInstructionChange()||this.thisMeasureEndsWordRepetition()||this.nextMeasureBeginsWordRepetition())return v.SystemLinesEnum.DoubleThin;var t=this.measureList[this.measureListIndex][0].parentSourceMeasure;return"regular"===t.endingBarStyle?v.SystemLinesEnum.SingleThin:"dotted"===t.endingBarStyle?v.SystemLinesEnum.Dotted:"dashed"===t.endingBarStyle?v.SystemLinesEnum.Dashed:"heavy"===t.endingBarStyle?v.SystemLinesEnum.Bold:"light-light"===t.endingBarStyle?v.SystemLinesEnum.DoubleThin:"light-heavy"===t.endingBarStyle?v.SystemLinesEnum.ThinBold:"heavy-light"===t.endingBarStyle?v.SystemLinesEnum.BoldThin:"heavy-heavy"===t.endingBarStyle?v.SystemLinesEnum.DoubleBold:"tick"===t.endingBarStyle?v.SystemLinesEnum.Tick:"short"===t.endingBarStyle?v.SystemLinesEnum.Short:"none"===t.endingBarStyle?v.SystemLinesEnum.None:v.SystemLinesEnum.SingleThin},s.prototype.getLineWidth=function(t,e,n){var i=t.getLineWidth(e);return e===v.SystemLinesEnum.DotsBoldBoldDots&&(i/=2),n&&e===v.SystemLinesEnum.BoldThinDots&&(i+=this.rules.DistanceBetweenLastInstructionAndRepetitionBarline),i},s.prototype.previousMeasureEndsLineRepetition=function(){if(0===this.measureListIndex)return!1;for(var t=0,e=this.measureList[this.measureListIndex-1].length;t<e;++t)if(this.measureList[this.measureListIndex-1][t].endsWithLineRepetition())return!0;return!1},s.prototype.thisMeasureBeginsLineRepetition=function(){for(var t=0,e=this.measureList[this.measureListIndex].length;t<e;++t)if(this.measureList[this.measureListIndex][t].beginsWithLineRepetition())return!0;return!1},s.prototype.nextMeasureBeginsLineRepetition=function(){var t=this.measureListIndex+1;if(t>=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length||!this.measureList[t])return!1;for(var e=0,n=this.measureList[t].length;e<n;++e)if(this.measureList[t][e].beginsWithLineRepetition())return!0;return!1},s.prototype.thisMeasureEndsLineRepetition=function(){for(var t=0,e=this.measureList[this.measureListIndex].length;t<e;++t)if(this.measureList[this.measureListIndex][t].endsWithLineRepetition())return!0;return!1},s.prototype.nextMeasureBeginsWordRepetition=function(){var t=this.measureListIndex+1;if(t>=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length)return!1;for(var e=0,n=this.measureList[t].length;e<n;++e)if(this.measureList[t][e].beginsWithWordRepetition())return!0;return!1},s.prototype.thisMeasureEndsWordRepetition=function(){for(var t=0,e=this.measureList[this.measureListIndex].length;t<e;++t)if(this.measureList[this.measureListIndex][t].endsWithWordRepetition())return!0;return!1},s.prototype.nextMeasureHasKeyInstructionChange=function(){return void 0!==this.getNextMeasureKeyInstruction()},s.prototype.getNextMeasureKeyInstruction=function(){if(this.measureListIndex<this.measureList.length-1)for(var t=0;t<this.measureList[this.measureListIndex].length;t++){var e=this.measureList[this.measureListIndex+1][t].parentSourceMeasure;if(void 0===e)return;return e.getKeyInstruction(this.visibleStaffIndices[t])}},s.prototype.calculateXScalingFactor=function(t,e){return Math.abs(e-0)<1e-5||Math.abs(t-0)<1e-5?1:(this.currentSystemParams.currentSystem.StaffLines[0].PositionAndShape.Size.width-t)/e},s.prototype.stretchMusicSystem=function(t){var e=this.calculateXScalingFactor(this.currentSystemParams.currentSystemFixWidth,this.currentSystemParams.currentSystemVarWidth);t&&(e=Math.min(e,this.rules.LastSystemMaxScalingFactor));for(var n=this.currentSystemParams.currentSystem,i=0,r=n.StaffLines.length;i<r;++i)for(var o=n.StaffLines[i],s=0,a=0;a<o.Measures.length;a++){var u=o.Measures[a];if(u.setPositionInStaffline(s),u.setWidth(u.beginInstructionsWidth+u.minimumStaffEntriesWidth*e+u.endInstructionsWidth),a<this.currentSystemParams.systemMeasures.length){var l=this.currentSystemParams.systemMeasures[a].beginLine,c=u.getLineWidth(v.SystemLinesEnum.BoldThinDots);switch(l){case v.SystemLinesEnum.BoldThinDots:var h=s;0===a&&(h=s+u.beginInstructionsWidth-c),n.createVerticalLineForMeasure(h,c,l,d.SystemLinePosition.MeasureBegin,a,u)}}if(u.staffEntriesScaleFactor=e,u.layoutSymbols(),!(a+1<this.currentSystemParams.systemMeasures.length&&this.currentSystemParams.systemMeasures[a+1].beginLine===v.SystemLinesEnum.BoldThinDots)){var f=v.SystemLinesEnum.SingleThin;a<this.currentSystemParams.systemMeasures.length&&(f=this.currentSystemParams.systemMeasures[a].endLine),c=u.getLineWidth(f);var p=u.PositionAndShape.RelativePosition.x+u.PositionAndShape.BorderRight-c;f===v.SystemLinesEnum.DotsBoldBoldDots&&(p-=c/2),n.createVerticalLineForMeasure(p,c,f,d.SystemLinePosition.MeasureEnd,a,u)}s=u.PositionAndShape.RelativePosition.x+u.PositionAndShape.BorderRight}t&&this.decreaseMusicSystemBorders()},s.prototype.decreaseMusicSystemBorders=function(){for(var t=this.currentSystemParams.currentSystem,e=p.CollectionUtil.last(t.StaffLines[0].Measures).PositionAndShape,n=e.RelativePosition.x+e.Size.width,i=0,r=t.StaffLines.length;i<r;++i){var o=t.StaffLines[i];o.PositionAndShape.BorderRight=n;for(var s=0,a=o.StaffLines.length;s<a;++s){var u=o.StaffLines[s];u.End=new c.PointF2D(n,u.End.y)}}t.PositionAndShape.BorderRight=n+this.currentSystemParams.maxLabelLength+this.rules.SystemLabelsRightMargin},s);function s(){this.globalSystemIndex=0,this.leadSheet=!1}e.MusicSystemBuilder=o;var _=(a.prototype.IsSystemStartMeasure=function(){return 0===this.systemMeasureIndex},a);function a(){this.systemMeasures=[],this.systemMeasureIndex=0,this.currentWidth=0,this.currentSystemFixWidth=0,this.currentSystemVarWidth=0,this.maxLabelLength=0}e.SystemBuildParameters=_;e.MeasureBuildParameters=function(){}},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=(o=n(7).GraphicalObject,r(a,o),a);function a(){return null!==o&&o.apply(this,arguments)||this}e.Clickable=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.OctaveShiftParams=function(t,e,n){this.getOpenOctaveShift=t,this.getAbsoluteStartTimestamp=e,this.getAbsoluteEndTimestamp=n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=n(17),s=n(2),i=n(15),a=n(20),u=(Object.defineProperty(l.prototype,"ActiveKeyInstruction",{get:function(){return this.activeKeyInstruction},set:function(t){this.activeKeyInstruction=t,this.reactOnKeyInstructionChange()},enumerable:!0,configurable:!0}),l.prototype.doCalculationsAtEndOfMeasure=function(){this.currentInMeasureNoteAlterationsDict.clear();for(var t=0,e=this.keySignatureNoteAlterationsDict.keys();t<e.length;t++){var n=e[t];this.currentInMeasureNoteAlterationsDict.setValue(n,this.keySignatureNoteAlterationsDict.getValue(n))}},l.prototype.checkAccidental=function(t,e){if(void 0!==e){var n=e.FundamentalNote+12*e.Octave,i=0<=this.currentAlterationsComparedToKeyInstructionList.indexOf(n);this.currentInMeasureNoteAlterationsDict.containsKey(n)?(i&&this.currentAlterationsComparedToKeyInstructionList.splice(this.currentAlterationsComparedToKeyInstructionList.indexOf(n),1),this.currentInMeasureNoteAlterationsDict.getValue(n)!==e.AccidentalHalfTones&&(this.keySignatureNoteAlterationsDict.containsKey(n)&&this.keySignatureNoteAlterationsDict.getValue(n)!==e.AccidentalHalfTones?(this.currentAlterationsComparedToKeyInstructionList.push(n),this.currentInMeasureNoteAlterationsDict.setValue(n,e.AccidentalHalfTones)):this.currentInMeasureNoteAlterationsDict.remove(n),a.MusicSheetCalculator.symbolFactory.addGraphicalAccidental(t,e))):e.Accidental!==r.AccidentalEnum.NONE&&e.Accidental!==r.AccidentalEnum.NATURAL?(i||this.currentAlterationsComparedToKeyInstructionList.push(n),this.currentInMeasureNoteAlterationsDict.setValue(n,e.AccidentalHalfTones),a.MusicSheetCalculator.symbolFactory.addGraphicalAccidental(t,e)):i&&(this.currentAlterationsComparedToKeyInstructionList.splice(this.currentAlterationsComparedToKeyInstructionList.indexOf(n),1),a.MusicSheetCalculator.symbolFactory.addGraphicalAccidental(t,e))}},l.prototype.reactOnKeyInstructionChange=function(){var t,e=o.KeyInstruction.getNoteEnumList(this.activeKeyInstruction);t=0<this.activeKeyInstruction.Key?r.AccidentalEnum.SHARP:r.AccidentalEnum.FLAT,this.keySignatureNoteAlterationsDict.clear(),this.currentAlterationsComparedToKeyInstructionList.length=0;for(var n=-9;n<9;n++)for(var i=0;i<e.length;i++)this.keySignatureNoteAlterationsDict.setValue(e[i]+12*n,s.Pitch.HalfTonesFromAccidental(t));this.doCalculationsAtEndOfMeasure()},l);function l(){this.keySignatureNoteAlterationsDict=new i.default,this.currentAlterationsComparedToKeyInstructionList=[],this.currentInMeasureNoteAlterationsDict=new i.default}e.AccidentalCalculator=u},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=(o=n(8).AbstractExpression,r(a,o),Object.defineProperty(a.prototype,"Label",{get:function(){return this.label},set:function(t){this.label=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"Placement",{get:function(){return this.placement},set:function(t){this.placement=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"StaffNumber",{get:function(){return this.staffNumber},set:function(t){this.staffNumber=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"ParentMultiTempoExpression",{get:function(){return this.parentMultiTempoExpression},enumerable:!0,configurable:!0}),a.isStringInStringList=function(t,e){for(var n=0,i=t;n<i.length;n++){var r=i[n];if(a.stringContainsSeparatedWord(e.toLowerCase().trim(),r.toLowerCase().trim()))return!0}return!1},a.stringContainsSeparatedWord=function(t,e){return t===e||-1!==t.indexOf(" "+e)||-1!==t.indexOf(e+" ")},a);function a(t,e,n,i){var r=o.call(this,e)||this;return r.label=t,r.staffNumber=n,r.parentMultiTempoExpression=i,r}e.AbstractTempoExpression=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(69),a=n(5),u=n(0),f=n(9),p=n(24),l=n(7),d=n(4),b=n(6),c=n(34),h=n(15),y=n(42),m=n(16),g=(o=l.GraphicalObject,r(v,o),Object.defineProperty(v.prototype,"Parent",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"NextSystem",{get:function(){var t=this.Parent.MusicSystems.indexOf(this);return t!==this.Parent.MusicSystems.length?this.Parent.MusicSystems[t+1]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"StaffLines",{get:function(){return this.staffLines},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"GraphicalMeasures",{get:function(){return this.graphicalMeasures},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"MeasureNumberLabels",{get:function(){return this.measureNumberLabels},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"Labels",{get:function(){return this.labels.values()},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"ObjectsToRedraw",{get:function(){return this.objectsToRedraw},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"InstrumentBrackets",{get:function(){return this.instrumentBrackets},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"GroupBrackets",{get:function(){return this.groupBrackets},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"GraphicalMarkedAreas",{get:function(){return this.graphicalMarkedAreas},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"GraphicalComments",{get:function(){return this.graphicalComments},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"SystemLines",{get:function(){return this.systemLines},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"Id",{get:function(){return this.id},enumerable:!0,configurable:!0}),v.prototype.createSystemLeftLine=function(t,e){var n=-t/2;this===this.parent.MusicSystems[0]&&this.parent===this.parent.Parent.MusicPages[0]&&(n=this.maxLabelLength+e-t/2);var i=this.staffLines[0].Measures[0],r=void 0;1<this.staffLines.length&&(r=this.staffLines[this.staffLines.length-1].Measures[0]);var o=this.createSystemLine(n,t,c.SystemLinesEnum.SingleThin,y.SystemLinePosition.MeasureBegin,this,i,r);this.SystemLines.push(o),o.PositionAndShape.RelativePosition=new b.PointF2D(n,0),o.PositionAndShape.BorderLeft=0,o.PositionAndShape.BorderRight=t,o.PositionAndShape.BorderTop=0,o.PositionAndShape.BorderBottom=this.boundingBox.Size.height,this.createLinesForSystemLine(o)},v.prototype.createVerticalLineForMeasure=function(t,e,n,i,r,o){var s=o.ParentStaffLine,a=new b.PointF2D(s.PositionAndShape.RelativePosition.x,s.PositionAndShape.RelativePosition.y),u=s.ParentStaff.ParentInstrument.Staves;if(s.ParentStaff===u[0]){var l=void 0;1<u.length&&(l=this.getBottomStaffLine(s).Measures[r]);var c=this.createSystemLine(t,e,n,i,this,o,l),h=a.x+t;c.PositionAndShape.RelativePosition=new b.PointF2D(h,0),c.PositionAndShape.BorderLeft=0,c.PositionAndShape.BorderRight=e,this.SystemLines.push(c)}},v.prototype.setYPositionsToVerticalLineObjectsAndCreateLines=function(t){},v.prototype.calculateBorders=function(t){},v.prototype.alignBeginInstructions=function(){},v.prototype.GetLeftBorderAbsoluteXPosition=function(){return this.StaffLines[0].PositionAndShape.AbsolutePosition.x+this.StaffLines[0].Measures[0].beginInstructionsWidth},v.prototype.GetRightBorderAbsoluteXPosition=function(){return this.StaffLines[0].PositionAndShape.AbsolutePosition.x+this.StaffLines[0].StaffLines[0].End.x},v.prototype.AddGraphicalMeasures=function(t){for(var e=0,n=t.length;e<n;++e)t[e].parentMusicSystem=this;this.graphicalMeasures.push(t)},v.prototype.GetSystemsFirstTimeStamp=function(){return this.graphicalMeasures[0][0].parentSourceMeasure.AbsoluteTimestamp},v.prototype.GetSystemsLastTimeStamp=function(){var t=this.graphicalMeasures[this.graphicalMeasures.length-1][0].parentSourceMeasure;return u.Fraction.plus(t.AbsoluteTimestamp,t.Duration)},v.prototype.createInstrumentBrackets=function(t,e){for(var n=0,i=t.length;n<i;++n){var r=t[n];if(1<r.Staves.length){for(var o=void 0,s=void 0,a=0,u=this.staffLines.length;a<u;++a){var l=this.staffLines[a];l.ParentStaff===r.Staves[0]&&(o=l),l.ParentStaff===r.Staves[r.Staves.length-1]&&(s=l)}void 0!==o&&void 0!==s&&this.createInstrumentBracket(o,s)}}},v.prototype.createGroupBrackets=function(t,e,n){for(var i=0,r=t.length;i<r;++i){var o=t[i];if(!(o.InstrumentalGroups.length<1)){var s=this.findFirstVisibleInstrumentInInstrumentalGroup(o),a=this.findLastVisibleInstrumentInInstrumentalGroup(o);if(void 0!==s&&void 0!==a){for(var u=void 0,l=void 0,c=0,h=this.staffLines.length;c<h;++c){var f=this.staffLines[c];f.ParentStaff===s.Staves[0]&&(u=f),f.ParentStaff===a.Staves[0]&&(l=f)}void 0!==u&&void 0!==l&&this.createGroupBracket(u,l,n),o.InstrumentalGroups.length<1||this.createGroupBrackets(o.InstrumentalGroups,e,n+1)}}}},v.prototype.createMusicSystemLabel=function(t,e,n){if(this.parent===this.parent.Parent.MusicPages[0]){for(var i=this.parent.Parent.ParentMusicSheet.getVisibleInstruments(),r=0,o=i.length;r<o;++r){var s=i[r],a=void 0;if(this!==this.parent.MusicSystems[0]){if(!d.EngravingRules.Rules.RenderPartAbbreviations||1===this.Parent.Parent.ParentMusicSheet.Instruments.length||!s.PartAbbreviation||""===s.PartAbbreviation)return;var u=s.PartAbbreviation;a=new m.Label(u,s.NameLabel.textAlignment,s.NameLabel.font)}else a=s.NameLabel,d.EngravingRules.Rules.RenderPartNames||(a=new m.Label("",s.NameLabel.textAlignment,s.NameLabel.font),e=0);var l=new p.GraphicalLabel(a,t,f.TextAlignmentEnum.LeftCenter,this.boundingBox);l.setLabelPositionAndShapeBorders(),this.labels.setValue(s,l)}this.maxLabelLength=0;var c=this.labels.values();for(r=0,o=c.length;r<o;++r){var h=c[r];h.PositionAndShape.Size.width>this.maxLabelLength&&(this.maxLabelLength=h.PositionAndShape.Size.width)}this.updateMusicSystemStaffLineXPosition(e)}},v.prototype.setMusicSystemLabelsYPosition=function(){var a=this;this.parent===this.parent.Parent.MusicPages[0]&&this.labels.forEach(function(t,e){for(var n=0,i=0,r=0;r<a.staffLines.length;r++)if(a.staffLines[r].ParentStaff.ParentInstrument===t){for(var o=r;o<a.staffLines.length;o++){var s=a.staffLines[o];if(s.ParentStaff.ParentInstrument!==t)break;n+=s.PositionAndShape.RelativePosition.y,i++}break}0<i&&(e.PositionAndShape.RelativePosition=new b.PointF2D(0,n/i+2))})},v.prototype.checkStaffEntriesForStaffEntryLink=function(){for(var t=!1,e=!1,n=0;n<this.staffLines.length-1;n++){for(var i=0,r=this.staffLines[n].Measures.length;i<r;++i)for(var o=0,s=(a=this.staffLines[n].Measures[i]).staffEntries.length;o<s;++o)void 0!==a.staffEntries[o].sourceStaffEntry.Link&&(t=!0);for(i=0,r=this.staffLines[n+1].Measures.length;i<r;++i){var a;for(o=0,s=(a=this.staffLines[n+1].Measures[i]).staffEntries.length;o<s;++o)void 0!==a.staffEntries[o].sourceStaffEntry.Link&&(e=!0)}}return!(!t||!e)},v.prototype.getBottomStaffLine=function(t){for(var e=t.ParentStaff.ParentInstrument.Staves,n=e[e.length-1],i=0,r=t.ParentMusicSystem.staffLines;i<r.length;i++){var o=r[i];if(o.ParentStaff===n)return o}},v.prototype.createSystemLine=function(t,e,n,i,r,o,s){throw void 0===s&&(s=void 0),new Error("not implemented")},v.prototype.createLinesForSystemLine=function(t){},v.prototype.calcBracketsWidth=function(){for(var t=0,e=0,n=this.GroupBrackets.length;e<n;++e){var i=this.GroupBrackets[e];t=Math.max(t,i.PositionAndShape.Size.width)}for(var r=0,o=this.InstrumentBrackets.length;r<o;++r){var s=this.InstrumentBrackets[r];t=Math.max(t,s.PositionAndShape.Size.width)}return t},v.prototype.createInstrumentBracket=function(t,e){},v.prototype.createGroupBracket=function(t,e,n){},v.prototype.findFirstVisibleInstrumentInInstrumentalGroup=function(t){for(var e=0,n=t.InstrumentalGroups.length;e<n;++e){var i=t.InstrumentalGroups[e];if(!(i instanceof s.Instrument))return this.findFirstVisibleInstrumentInInstrumentalGroup(i);if(!0===i.Visible)return i}},v.prototype.findLastVisibleInstrumentInInstrumentalGroup=function(t){for(var e,n=t.InstrumentalGroups.length-1;0<=n;n--){if(!((e=t.InstrumentalGroups[n])instanceof s.Instrument))return this.findLastVisibleInstrumentInInstrumentalGroup(e);if(!0===e.Visible)return e}},v.prototype.updateMusicSystemStaffLineXPosition=function(t){for(var e=0,n=this.StaffLines.length;e<n;++e){var i=this.StaffLines[e],r=i.PositionAndShape.RelativePosition;r.x=this.maxLabelLength+t,i.PositionAndShape.RelativePosition=r,i.PositionAndShape.BorderRight=this.boundingBox.Size.width-this.maxLabelLength-t;for(var o=0;o<i.StaffLines.length;o++){var s=new b.PointF2D(i.PositionAndShape.Size.width,i.StaffLines[o].End.y);i.StaffLines[o].End=s}}},v);function v(t,e){var n=o.call(this)||this;return n.needsToBeRedrawn=!0,n.staffLines=[],n.graphicalMeasures=[],n.labels=new h.default,n.measureNumberLabels=[],n.objectsToRedraw=[],n.instrumentBrackets=[],n.groupBrackets=[],n.graphicalMarkedAreas=[],n.graphicalComments=[],n.systemLines=[],n.parent=t,n.id=e,n.boundingBox=new a.BoundingBox(n,t.PositionAndShape),n.maxLabelLength=0,n.rules=n.parent.Parent.ParentMusicSheet.Rules,n}e.MusicSystem=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(r.prototype,"ParentInstrument",{get:function(){return this.parentInstrument},set:function(t){this.parentInstrument=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Voices",{get:function(){return this.voices},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Id",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Volume",{get:function(){return this.volume},set:function(t){this.volume=t},enumerable:!0,configurable:!0}),r);function r(t,e){this.voices=[],this.volume=1,this.parentInstrument=t,this.id=e,this.audible=!0,this.following=!0}e.Staff=i},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s,o=n(34),a=n(5),u=(s=n(7).GraphicalObject,r(l,s),l.getObjectWidthForLineType=function(t,e){switch(e){case o.SystemLinesEnum.SingleThin:return t.SystemThinLineWidth;case o.SystemLinesEnum.DoubleThin:return 2*t.SystemThinLineWidth+t.DistanceBetweenVerticalSystemLines;case o.SystemLinesEnum.ThinBold:return t.SystemThinLineWidth+t.SystemBoldLineWidth+t.DistanceBetweenVerticalSystemLines;case o.SystemLinesEnum.BoldThinDots:case o.SystemLinesEnum.DotsThinBold:return t.SystemThinLineWidth+t.SystemBoldLineWidth+t.DistanceBetweenVerticalSystemLines+t.SystemDotWidth+t.DistanceBetweenDotAndLine;case o.SystemLinesEnum.DotsBoldBoldDots:return 2*t.SystemBoldLineWidth+2*t.SystemDotWidth+2*t.DistanceBetweenDotAndLine+t.DistanceBetweenVerticalSystemLines;default:return 0}},l);function l(t,e,n,i,r){void 0===r&&(r=void 0);var o=s.call(this)||this;return o.lineType=t,o.linePosition=e,o.parentMusicSystem=n,o.topMeasure=i,o.bottomMeasure=r,o.parentTopStaffLine=i.ParentStaffLine,o.boundingBox=new a.BoundingBox(o,n.PositionAndShape),o}e.SystemLine=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),u=n(5),E=n(22),b=n(21),a=n(59),y=n(6),s=n(24),l=n(16),c=n(9),h=n(13),m=n(72),g=n(103),r=(Object.defineProperty(o.prototype,"Mode",{set:function(t){this.phonicScoreMode=t},enumerable:!0,configurable:!0}),o.prototype.drawSheet=function(t){if(this.graphicalMusicSheet=t,this.rules=t.ParentMusicSheet.Rules,this.drawSplitScreenLine(),this.drawingParameters.drawCursors)for(var e=0,n=t.Cursors;e<n.length;e++){var i=n[e],r=new u.BoundingBox(i);r.AbsolutePosition=i.Start,r.BorderBottom=i.End.y-i.Start.y,r.BorderRight=i.Width/2,r.BorderLeft=-i.Width/2,this.isVisible(r)&&this.drawLineAsVerticalRectangle(i,E.GraphicalLayers.Cursor)}this.drawingParameters.drawScrollIndicator&&this.drawScrollIndicator();for(var o=0,s=this.graphicalMusicSheet.MusicPages;o<s.length;o++){var a=s[o];this.drawPage(a)}},o.prototype.drawLineAsHorizontalRectangle=function(t,e){var n=new a.RectangleF2D(t.Start.x,t.End.y-t.Width/2,t.End.x-t.Start.x,t.Width);n=this.applyScreenTransformationForRect(n),this.renderRectangle(n,e,t.styleId)},o.prototype.drawLineAsVerticalRectangle=function(t,e){var n=t.Start,i=t.Width,r=new a.RectangleF2D(n.x-i/2,n.y,i,t.End.y-n.y);r=this.applyScreenTransformationForRect(r),this.renderRectangle(r,e,t.styleId)},o.prototype.drawLineAsHorizontalRectangleWithOffset=function(t,e,n){var i=new y.PointF2D(t.Start.x+e.x,t.Start.y+e.y),r=new y.PointF2D(t.End.x+e.x,t.End.y+e.y),o=t.Width,s=new a.RectangleF2D(i.x,r.y-o/2,r.x-i.x,o);s=this.applyScreenTransformationForRect(s),this.renderRectangle(s,n,t.styleId)},o.prototype.drawLineAsVerticalRectangleWithOffset=function(t,e,n){var i=new y.PointF2D(t.Start.x+e.x,t.Start.y+e.y),r=new y.PointF2D(t.End.x+e.x,t.End.y+e.y),o=t.Width,s=new a.RectangleF2D(i.x,i.y,o,r.y-i.y);s=this.applyScreenTransformationForRect(s),this.renderRectangle(s,n,t.styleId)},o.prototype.drawRectangle=function(t,e){var n=t.PositionAndShape,i=new a.RectangleF2D(n.AbsolutePosition.x,n.AbsolutePosition.y,n.BorderRight,n.BorderBottom);i=this.applyScreenTransformationForRect(i),this.renderRectangle(i,e,t.style)},o.prototype.calculatePixelDistance=function(t){throw new Error("not implemented")},o.prototype.drawLabel=function(t,e){if(this.isVisible(t.PositionAndShape)){var n=t.Label;if(""!==n.text.trim()){var i=this.applyScreenTransformation(t.PositionAndShape.AbsolutePosition),r=this.calculatePixelDistance(n.fontHeight),o=r*this.textMeasurer.computeTextWidthToHeightRatio(n.text,n.font,n.fontStyle),s=Math.ceil(o),a=Math.ceil(1.2*r);switch(n.textAlignment){case c.TextAlignmentEnum.LeftTop:break;case c.TextAlignmentEnum.LeftCenter:i.y-=a/2;break;case c.TextAlignmentEnum.LeftBottom:i.y-=a;break;case c.TextAlignmentEnum.CenterTop:i.x-=s/2;break;case c.TextAlignmentEnum.CenterCenter:i.x-=s/2,i.y-=a/2;break;case c.TextAlignmentEnum.CenterBottom:i.x-=s/2,i.y-=a;break;case c.TextAlignmentEnum.RightTop:i.x-=s;break;case c.TextAlignmentEnum.RightCenter:i.x-=s,i.y-=a/2;break;case c.TextAlignmentEnum.RightBottom:i.x-=s,i.y-=a;break;default:throw new h.ArgumentOutOfRangeException("")}this.renderLabel(t,e,s,a,r,i)}}},o.prototype.applyScreenTransformation=function(t){throw new Error("not implemented")},o.prototype.applyScreenTransformations=function(t){for(var e=[],n=0,i=t;n<i.length;n++){var r=i[n];e.push(this.applyScreenTransformation(r))}return e},o.prototype.applyScreenTransformationForRect=function(t){throw new Error("not implemented")},o.prototype.drawSplitScreenLine=function(){},o.prototype.renderRectangle=function(t,e,n,i){throw void 0===i&&(i=1),new Error("not implemented")},o.prototype.drawScrollIndicator=function(){},o.prototype.drawSelectionStartSymbol=function(t){},o.prototype.drawSelectionEndSymbol=function(t){},o.prototype.renderLabel=function(t,e,n,i,r,o){throw new Error("not implemented")},o.prototype.renderSystemToScreen=function(t,e,n){},o.prototype.drawMeasure=function(t){throw new Error("not implemented")},o.prototype.drawSkyLine=function(t){},o.prototype.drawBottomLine=function(t){},o.prototype.drawInstrumentBrace=function(t,e){},o.prototype.drawGroupBracket=function(t,e){},o.prototype.isVisible=function(t){return!0},o.prototype.drawMusicSystem=function(t){var e=this.getSystemAbsBoundingRect(t),n=this.getSytemBoundingBoxInPixels(e);this.drawMusicSystemComponents(t,n,e)},o.prototype.getSytemBoundingBoxInPixels=function(t){var e=this.applyScreenTransformationForRect(t);return e.x=Math.round(e.x),e.y=Math.round(e.y),e},o.prototype.getSystemAbsBoundingRect=function(t){var e=t.PositionAndShape.BoundingRectangle;return new a.RectangleF2D(t.PositionAndShape.AbsolutePosition.x+t.PositionAndShape.BorderLeft-1,t.PositionAndShape.AbsolutePosition.y+t.PositionAndShape.BorderTop-1,e.width+6,e.height+2)},o.prototype.drawMusicSystemComponents=function(t,e,n){var i=this.graphicalMusicSheet.SelectionStartSymbol,r=this.graphicalMusicSheet.SelectionEndSymbol;this.drawingParameters.drawSelectionStartSymbol&&void 0!==i&&this.isVisible(i.PositionAndShape)&&this.drawSelectionStartSymbol(i),this.drawingParameters.drawSelectionEndSymbol&&void 0!==r&&this.isVisible(r.PositionAndShape)&&this.drawSelectionEndSymbol(r);for(var o=0,s=t.StaffLines;o<s.length;o++){var a=s[o];this.drawStaffLine(a),0<a.LyricsDashes.length&&this.drawDashes(a.LyricsDashes),0<a.LyricLines.length&&this.drawLyricLines(a.LyricLines,a)}for(var u=0,l=t.SystemLines;u<l.length;u++){var c=l[u];this.drawSystemLineObject(c)}if(t.Parent===t.Parent.Parent.MusicPages[0])for(var h=0,f=t.Labels;h<f.length;h++){var p=f[h];this.drawLabel(p,E.GraphicalLayers.Notes)}for(var d=0,b=t.InstrumentBrackets;d<b.length;d++){var y=b[d];this.drawInstrumentBrace(y,t)}for(var m=0,g=t.GroupBrackets;m<g.length;m++)y=g[m],this.drawGroupBracket(y,t);if(!this.leadSheet)for(var v=0,_=t.MeasureNumberLabels;v<_.length;v++){var S=_[v];this.drawLabel(S,E.GraphicalLayers.Notes)}for(var x=0,w=t.StaffLines;x<w.length;x++)a=w[x],this.drawStaffLineSymbols(a);this.drawingParameters.drawMarkedAreas&&this.drawMarkedAreas(t),this.drawingParameters.drawComments&&this.drawComment(t)},o.prototype.activateSystemRendering=function(t,e,n,i){return!0},o.prototype.drawSystemLineObject=function(t){},o.prototype.drawStaffLine=function(t){for(var e=0,n=t.Measures;e<n.length;e++){var i=n[e];this.drawMeasure(i)}0<t.LyricsDashes.length&&this.drawDashes(t.LyricsDashes),this.drawOctaveShifts(t),this.drawExpressions(t),this.skyLineVisible&&this.drawSkyLine(t),this.bottomLineVisible&&this.drawBottomLine(t)},o.prototype.drawLyricLines=function(t,e){var n=this;e.LyricLines.forEach(function(t){t.Start.y+=e.PositionAndShape.AbsolutePosition.y,t.End.y+=e.PositionAndShape.AbsolutePosition.y,t.Start.x+=e.PositionAndShape.AbsolutePosition.x,t.End.x+=e.PositionAndShape.AbsolutePosition.x,n.drawGraphicalLine(t,i.EngravingRules.Rules.LyricUnderscoreLineWidth)})},o.prototype.drawExpressions=function(t){},o.prototype.drawGraphicalLine=function(t,e,n){void 0===n&&(n="black"),this.drawLine(t.Start,t.End,n,e)},o.prototype.drawLine=function(t,e,n,i){void 0===n&&(n="#FF0000FF")},o.prototype.drawDashes=function(t){var e=this;t.forEach(function(t){return e.drawLabel(t,E.GraphicalLayers.Notes)})},o.prototype.drawOctaveShifts=function(t){},o.prototype.drawStaffLines=function(t){if(void 0!==t.StaffLines)for(var e=t.PositionAndShape.AbsolutePosition,n=0;n<5;n++)this.drawLineAsHorizontalRectangleWithOffset(t.StaffLines[n],e,E.GraphicalLayers.Notes)},o.prototype.drawInstantaneousDynamic=function(t){throw new Error("not implemented")},o.prototype.drawContinuousDynamic=function(t){throw new Error("not implemented")},o.prototype.drawSymbol=function(t,e,n,i,r){void 0===i&&(i=1),void 0===r&&(r=E.GraphicalLayers.Notes)},Object.defineProperty(o.prototype,"leadSheet",{get:function(){return this.graphicalMusicSheet.LeadSheet},set:function(t){this.graphicalMusicSheet.LeadSheet=t},enumerable:!0,configurable:!0}),o.prototype.drawPage=function(t){if(this.isVisible(t.PositionAndShape)){for(var e=0,n=t.MusicSystems;e<n.length;e++){var i=n[e];this.isVisible(i.PositionAndShape)&&this.drawMusicSystem(i)}if(t===t.Parent.MusicPages[0])for(var r=0,o=t.Labels;r<o.length;r++){var s=o[r];this.drawLabel(s,E.GraphicalLayers.Notes)}this.drawableBoundingBoxElement&&this.drawBoundingBoxes(t.PositionAndShape,0,this.drawableBoundingBoxElement)}},o.prototype.drawBoundingBoxes=function(t,e,n){var i=this;void 0===e&&(e=0),void 0===n&&(n="all");var r=t.DataObject.constructor.name;if(r===n||"all"===n){var o=new a.RectangleF2D(t.AbsolutePosition.x+t.BorderMarginLeft,t.AbsolutePosition.y+t.BorderMarginTop,t.BorderMarginRight-t.BorderMarginLeft,t.BorderMarginBottom-t.BorderMarginTop);this.drawLineAsHorizontalRectangle(new b.GraphicalLine(new y.PointF2D(t.AbsolutePosition.x-1,t.AbsolutePosition.y),new y.PointF2D(t.AbsolutePosition.x+1,t.AbsolutePosition.y),.1,E.OutlineAndFillStyleEnum.BaseWritingColor),e-1),this.drawLineAsVerticalRectangle(new b.GraphicalLine(new y.PointF2D(t.AbsolutePosition.x,t.AbsolutePosition.y-1),new y.PointF2D(t.AbsolutePosition.x,t.AbsolutePosition.y+1),.1,E.OutlineAndFillStyleEnum.BaseWritingColor),e-1),o=this.applyScreenTransformationForRect(o),this.renderRectangle(o,E.GraphicalLayers.Background,e,.5),this.renderLabel(new s.GraphicalLabel(new l.Label(r),.8,c.TextAlignmentEnum.CenterCenter),e,o.width,o.height,o.height,new y.PointF2D(o.x,o.y+12))}e++,t.ChildElements.forEach(function(t){return i.drawBoundingBoxes(t,e,n)})},o.prototype.drawMarkedAreas=function(t){for(var e=0,n=t.GraphicalMarkedAreas;e<n.length;e++){var i=n[e];void 0!==i&&(void 0!==i.systemRectangle&&this.drawRectangle(i.systemRectangle,E.GraphicalLayers.Background),void 0!==i.settings&&this.drawLabel(i.settings,E.GraphicalLayers.Comment),void 0!==i.labelRectangle&&this.drawRectangle(i.labelRectangle,E.GraphicalLayers.Background),void 0!==i.label&&this.drawLabel(i.label,E.GraphicalLayers.Comment))}},o.prototype.drawComment=function(t){for(var e=0,n=t.GraphicalComments;e<n.length;e++){var i=n[e];void 0!==i&&(void 0!==i.settings&&this.drawLabel(i.settings,E.GraphicalLayers.Comment),void 0!==i.label&&this.drawLabel(i.label,E.GraphicalLayers.Comment))}},o.prototype.drawStaffLineSymbols=function(t){var e=t.ParentStaff.ParentInstrument,n=t.PositionAndShape.AbsolutePosition.x,i=t.PositionAndShape.AbsolutePosition.y+2,r=t.PositionAndShape.BorderRight;e.highlight&&this.drawingParameters.drawHighlights&&this.drawLineAsHorizontalRectangle(new b.GraphicalLine(new y.PointF2D(n,i),new y.PointF2D(n+r,i),4,E.OutlineAndFillStyleEnum.Highlighted),E.GraphicalLayers.Highlight);var o=g.MusicSymbolDrawingStyle.Disabled,s=m.MusicSymbol.PLAY,a=this.drawingParameters.drawActivitySymbols;switch(this.phonicScoreMode){case g.PhonicScoreModes.Midi:s=m.MusicSymbol.PLAY,this.midiPlaybackAvailable&&t.ParentStaff.audible&&(o=g.MusicSymbolDrawingStyle.PlaybackSymbols);break;case g.PhonicScoreModes.Following:s=m.MusicSymbol.MIC,t.ParentStaff.following&&(o=g.MusicSymbolDrawingStyle.FollowSymbols);break;default:a=!1}if(a){var u=new y.PointF2D(n+r+2,i);this.drawSymbol(s,o,u)}if(this.drawingParameters.drawErrors)for(var l=0,c=t.Measures;l<c.length;l++){var h=c[l],f=h.PositionAndShape,p=f.AbsolutePosition.x,d=f.AbsolutePosition.y+2;h.hasError&&this.graphicalMusicSheet.ParentMusicSheet.DrawErroneousMeasures&&this.drawLineAsHorizontalRectangle(new b.GraphicalLine(new y.PointF2D(p,d),new y.PointF2D(p+f.BorderRight,d),4,E.OutlineAndFillStyleEnum.ErrorUnderlay),E.GraphicalLayers.MeasureError)}},o);function o(t,e){this.drawableBoundingBoxElement=!1,this.skyLineVisible=!1,this.bottomLineVisible=!1,this.phonicScoreMode=g.PhonicScoreModes.Manual,this.textMeasurer=t,this.splitScreenLineColor=-1,this.drawingParameters=e}e.MusicSheetDrawer=r},function(t,e,n){"use strict";var i,r,o;Object.defineProperty(e,"__esModule",{value:!0}),(o=e.DrawingMode||(e.DrawingMode={}))[o.All=0]="All",o[o.NoOverlays=1]="NoOverlays",o[o.Leadsheet=2]="Leadsheet",(r=e.MusicSymbolDrawingStyle||(e.MusicSymbolDrawingStyle={}))[r.Normal=0]="Normal",r[r.Disabled=1]="Disabled",r[r.Selected=2]="Selected",r[r.Clickable=3]="Clickable",r[r.PlaybackSymbols=4]="PlaybackSymbols",r[r.FollowSymbols=5]="FollowSymbols",r[r.QFeedbackNotFound=6]="QFeedbackNotFound",r[r.QFeedbackOk=7]="QFeedbackOk",r[r.QFeedbackPerfect=8]="QFeedbackPerfect",r[r.Debug1=9]="Debug1",r[r.Debug2=10]="Debug2",r[r.Debug3=11]="Debug3",(i=e.PhonicScoreModes||(e.PhonicScoreModes={}))[i.Following=0]="Following",i[i.Midi=1]="Midi",i[i.Manual=2]="Manual"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(29),i=(o.prototype.computeTextWidthToHeightRatio=function(t,e,n,i){return void 0===i&&(i=this.fontSize),this.context.font=r.VexFlowConverter.font(i,n,e),this.context.measureText(t).width/i},o.prototype.setFontSize=function(t){return void 0===t&&(t=this.fontSizeStandard),this.fontSize=t},o);function o(){this.fontSize=20,this.fontSizeStandard=this.fontSize;var t=document.createElement("canvas");this.context=t.getContext("2d")}e.VexFlowTextMeasurer=i},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s,o=n(14),a=n(7),u=n(5),l=n(25),c=(s=a.GraphicalObject,r(h,s),h.prototype.draw=function(t){this.vexflowConnector.setContext(t).draw();var e=this.vexflowConnector,n=e.top_stave.getYForLine(0),i=e.bottom_stave.getYForLine(e.bottom_stave.getNumLines()-1)+e.thickness;this.PositionAndShape.AbsolutePosition.x=(e.top_stave.getX()-2+e.x_shift)/l.unitInPixels,this.PositionAndShape.AbsolutePosition.y=n/l.unitInPixels,this.PositionAndShape.Size.height=(i-n)/l.unitInPixels,this.PositionAndShape.Size.width=12/l.unitInPixels},h.prototype.addConnector=function(t,e,n,i){this.vexflowConnector=new o.Flow.StaveConnector(t,e).setType(n).setXShift(-5*i)},h);function h(t,e,n){void 0===n&&(n=0);var i=s.call(this)||this;i.PositionAndShape=new u.BoundingBox(i,t.ParentMusicSystem.PositionAndShape);var r=t.Measures[0],o=e.Measures[0];return i.addConnector(r.getVFStave(),o.getVFStave(),4,n),i}e.VexFlowInstrumentBracket=c},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(5),a=n(7),u=n(107),l=n(6),c=n(108),h=n(111),f=(o=a.GraphicalObject,r(p,o),Object.defineProperty(p.prototype,"Measures",{get:function(){return this.measures},set:function(t){this.measures=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"StaffLines",{get:function(){return this.staffLines},set:function(t){this.staffLines=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"NextStaffLine",{get:function(){var t=this.parentMusicSystem.StaffLines.indexOf(this);return t!==this.parentMusicSystem.StaffLines.length?this.parentMusicSystem.StaffLines[t+1]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"LyricLines",{get:function(){return this.lyricLines},set:function(t){this.lyricLines=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"AbstractExpressions",{get:function(){return this.abstractExpressions},set:function(t){this.abstractExpressions=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"LyricsDashes",{get:function(){return this.lyricsDashes},set:function(t){this.lyricsDashes=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"ParentMusicSystem",{get:function(){return this.parentMusicSystem},set:function(t){this.parentMusicSystem=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"ParentStaff",{get:function(){return this.parentStaff},set:function(t){this.parentStaff=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"AlignmentManager",{get:function(){return this.alignmentManager},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"SkyBottomLineCalculator",{get:function(){return this.skyBottomLine},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"SkyLine",{get:function(){return this.skyBottomLine.SkyLine},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"BottomLine",{get:function(){return this.skyBottomLine.BottomLine},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"OctaveShifts",{get:function(){return this.octaveShifts},set:function(t){this.octaveShifts=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"GraphicalSlurs",{get:function(){return this.graphicalSlurs},enumerable:!0,configurable:!0}),p.prototype.addSlurToStaffline=function(t){this.graphicalSlurs.push(t)},p.prototype.addActivitySymbolClickArea=function(){var t=new u.StaffLineActivitySymbol(this),e=this.PositionAndShape;t.PositionAndShape.RelativePosition=new l.PointF2D(e.RelativePosition.x+e.BorderRight+.5,e.RelativePosition.y+.5),t.PositionAndShape.Parent=this.parentMusicSystem.PositionAndShape},p.prototype.isPartOfMultiStaffInstrument=function(){return 1<this.parentStaff.ParentInstrument.Staves.length},p.prototype.findClosestStaffEntry=function(t){for(var e=void 0,n=0,i=this.Measures.length;n<i;++n)for(var r=this.Measures[n],o=0,s=r.staffEntries.length;o<s;++o){var a=r.staffEntries[o];Math.abs(a.PositionAndShape.RelativePosition.x-t+r.PositionAndShape.RelativePosition.x)<5&&(e=a)}return e},p);function p(t,e){var n=o.call(this)||this;return n.measures=[],n.staffLines=new Array(5),n.octaveShifts=[],n.lyricLines=[],n.lyricsDashes=[],n.abstractExpressions=[],n.graphicalSlurs=[],n.parentMusicSystem=t,n.parentStaff=e,n.boundingBox=new s.BoundingBox(n,t.PositionAndShape),n.skyBottomLine=new c.SkyBottomLineCalculator(n),n.alignmentManager=new h.AlignmentManager(n),n}e.StaffLine=f},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(7),a=n(5),u=(o=s.GraphicalObject,r(l,o),l);function l(t){var e=o.call(this)||this,n=(e.parentStaffLine=t).PositionAndShape;return e.boundingBox=new a.BoundingBox(e,n),e.boundingBox.BorderRight=6,e.boundingBox.BorderBottom=4.5,e.boundingBox.BorderLeft=-1.5,e.boundingBox.BorderTop=-1.5,e}e.StaffLineActivitySymbol=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),T=(n(6),n(109)),k=n(25),O=n(1),r=(o.prototype.calculateLines=function(){var t,e,n=this,i=Math.max(Math.ceil(this.StaffLineParent.PositionAndShape.Size.width*this.SamplingUnit),1);this.mSkyLine=[],this.mBottomLine=[];for(var r=new T.CanvasVexFlowBackend,o=0,s=this.StaffLineParent.Measures;o<s.length;o++){var a=s[o];a.PositionAndShape.calculateAbsolutePositionsRecursive(0,0);var u=a.getVFStave();r.initializeHeadless(u.getWidth());var l=r.getContext(),c=r.getCanvas(),h=c.width,f=c.height;u.setY(u.y+100);var p=u.getWidth();u.setWidth(h),a.format(),u.setWidth(p),a.draw(l);for(var d=l.getImageData(0,0,h,f),b=Math.max(Math.ceil(a.PositionAndShape.Size.width*this.mRules.SamplingUnit),1),y=new Array(b),m=new Array(b),g=0;g<h;g++){for(var v=0;v<f;v++){var _=v*h*4+4*g;if(0<d.data[_+3]){y[g]=v;break}}for(v=f;0<v;v--)if(_=v*h*4+4*g,0<d.data[_+3]){m[g]=v;break}}(t=this.mSkyLine).push.apply(t,y),(e=this.mBottomLine).push.apply(e,m),r.clear()}for(var S=this.mSkyLine.length/i,x=[],w=[],E=0;E<this.mSkyLine.length;E+=S){var P=this.mSkyLine.slice(E,E+S);x.push(Math.min.apply(Math,P)),P=this.mBottomLine.slice(E,E+S),w.push(Math.max.apply(Math,P))}this.mSkyLine=x,this.mBottomLine=w,this.mSkyLine.length!==i&&O.debug("SkyLine calculation was not correct ("+this.mSkyLine.length+" instead of "+i+")"),this.mBottomLine.length!==i&&O.debug("BottomLine calculation was not correct ("+this.mBottomLine.length+" instead of "+i+")"),this.mSkyLine=this.mSkyLine.map(function(t){return(t-Math.max.apply(Math,n.mSkyLine))/k.unitInPixels}),this.mBottomLine=this.mBottomLine.map(function(t){return(t-Math.min.apply(Math,n.mBottomLine))/k.unitInPixels+n.mRules.StaffHeight})},o.prototype.drawPixel=function(t,e,n){void 0===n&&(n="#FF0000FF");var i=e.getContext(),r=i.fillStyle;i.fillStyle=n,i.fillRect(t.x,t.y,2,2),i.fillStyle=r},o.prototype.updateSkyLineWithWedge=function(t,e){var n=Math.floor(t.x*this.SamplingUnit),i=Math.ceil(e.x*this.SamplingUnit),r=(e.y-t.y)/(e.x-t.x);i-n<=1&&(i++,r=0),n<0&&(n=0),n>=this.BottomLine.length&&(n=this.BottomLine.length-1),i<0&&(i=0),i>=this.BottomLine.length&&(i=this.BottomLine.length),this.SkyLine[n]=t.y;for(var o=n+1;o<Math.min(i,this.SkyLine.length);o++)this.SkyLine[o]=this.SkyLine[o-1]+r/this.SamplingUnit},o.prototype.updateBottomLineWithWedge=function(t,e){var n=Math.floor(t.x*this.SamplingUnit),i=Math.ceil(e.x*this.SamplingUnit),r=(e.y-t.y)/(e.x-t.x);i-n<=1&&(i++,r=0),n<0&&(n=0),n>=this.BottomLine.length&&(n=this.BottomLine.length-1),i<0&&(i=0),i>=this.BottomLine.length&&(i=this.BottomLine.length),this.BottomLine[n]=t.y;for(var o=n+1;o<i;o++)this.BottomLine[o]=this.BottomLine[o-1]+r/this.SamplingUnit},o.prototype.updateSkyLineInRange=function(t,e,n){this.updateInRange(this.mSkyLine,t,e,n)},o.prototype.updateBottomLineInRange=function(t,e,n){this.updateInRange(this.BottomLine,t,e,n)},o.prototype.resetSkyLineInRange=function(t,e){this.updateInRange(this.SkyLine,t,e)},o.prototype.resetBottomLineInRange=function(t,e){this.setInRange(this.BottomLine,t,e)},o.prototype.setSkyLineWithValue=function(e){this.SkyLine.forEach(function(t){return e})},o.prototype.setBottomLineWithValue=function(e){this.BottomLine.forEach(function(t){return e})},o.prototype.getLeftIndexForPointX=function(t,e){var n=Math.floor(t*this.SamplingUnit);return n<0?0:e<=n?e-1:n},o.prototype.getRightIndexForPointX=function(t,e){var n=Math.ceil(t*this.SamplingUnit);return n<0?0:e<=n?e-1:n},o.prototype.updateStaffLineBorders=function(){this.mStaffLineParent.PositionAndShape.BorderTop=this.getSkyLineMin(),this.mStaffLineParent.PositionAndShape.BorderMarginTop=this.getSkyLineMin(),this.mStaffLineParent.PositionAndShape.BorderBottom=this.getBottomLineMax(),this.mStaffLineParent.PositionAndShape.BorderMarginBottom=this.getBottomLineMax()},o.prototype.getSkyLineMin=function(){return Math.min.apply(Math,this.SkyLine.filter(function(t){return!isNaN(t)}))},o.prototype.getSkyLineMinAtPoint=function(t){var e=Math.round(t*this.SamplingUnit);return this.mSkyLine[e]},o.prototype.getSkyLineMinInRange=function(t,e){return this.getMinInRange(this.SkyLine,t,e)},o.prototype.getBottomLineMax=function(){return Math.max.apply(Math,this.BottomLine.filter(function(t){return!isNaN(t)}))},o.prototype.getBottomLineMaxAtPoint=function(t){var e=Math.round(t*this.SamplingUnit);return this.mBottomLine[e]},o.prototype.getBottomLineMaxInRange=function(t,e){return this.getMaxInRange(this.BottomLine,t,e)},o.prototype.getBottomLineMaxInBoundingBox=function(t){var e=Math.floor(t.AbsolutePosition.x+t.BorderLeft),n=Math.ceil(t.AbsolutePosition.x+t.BorderRight);return this.getMaxInRange(this.mBottomLine,e,n)},o.prototype.updateWithBoundingBoxRecursivly=function(t){if(t.ChildElements&&0<t.ChildElements.length)this.updateWithBoundingBoxRecursivly(t);else{var e=t.BorderTop+t.AbsolutePosition.y,n=t.BorderBottom+t.AbsolutePosition.y;if(e<0){var i=Math.floor(t.AbsolutePosition.x+t.BorderLeft),r=Math.ceil(t.AbsolutePosition.x+t.BorderRight);this.updateInRange(this.mSkyLine,i,r,e)}else n>this.mRules.StaffHeight&&(i=Math.floor(t.AbsolutePosition.x+t.BorderLeft),r=Math.ceil(t.AbsolutePosition.x+t.BorderRight),this.updateInRange(this.mBottomLine,i,r,n))}},o.prototype.updateInRange=function(t,e,n,i){if(void 0===e&&(e=0),void 0===n&&(n=t.length),void 0===i&&(i=0),e=Math.floor(e*this.SamplingUnit),(n=Math.ceil(n*this.SamplingUnit))<e)throw new Error("start index of line is greater then the end index");e<0&&(e=0),n>t.length&&(n=t.length);for(var r=e;r<n;r++)t[r]=Math.abs(i)>Math.abs(t[r])?i:t[r]},o.prototype.setInRange=function(t,e,n,i){if(void 0===e&&(e=0),void 0===n&&(n=t.length),void 0===i&&(i=0),e=Math.floor(e*this.SamplingUnit),(n=Math.ceil(n*this.SamplingUnit))<e)throw new Error("start index of line is greater then the end index");e<0&&(e=0),n>t.length&&(n=t.length);for(var r=e;r<n;r++)t[r]=i},o.prototype.getMinInRange=function(t,e,n){return e=Math.floor(e*this.SamplingUnit),n=Math.ceil(n*this.SamplingUnit),void 0===t?Number.MAX_VALUE:(e<0&&(e=0),e>=t.length&&(e=t.length-1),n<0&&(n=0),n>=t.length&&(n=t.length),0<=e&&n<=t.length?Math.min.apply(Math,t.slice(e,n)):void 0)},o.prototype.getMaxInRange=function(t,e,n){return e=Math.floor(e*this.SamplingUnit),n=Math.ceil(n*this.SamplingUnit),void 0===t?Number.MIN_VALUE:(e<0&&(e=0),e>=t.length&&(e=t.length-1),n<0&&(n=0),n>=t.length&&(n=t.length),0<=e&&n<=t.length?Math.max.apply(Math,t.slice(e,n)):void 0)},Object.defineProperty(o.prototype,"SamplingUnit",{get:function(){return this.mRules.SamplingUnit},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"StaffLineParent",{get:function(){return this.mStaffLineParent},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"SkyLine",{get:function(){return this.mSkyLine},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"BottomLine",{get:function(){return this.mBottomLine},enumerable:!0,configurable:!0}),o);function o(t){this.mStaffLineParent=t,this.mRules=i.EngravingRules.Rules}e.SkyBottomLineCalculator=r},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(14),a=n(110),u=n(29),l=(o=a.VexFlowBackend,r(c,o),c.prototype.getBackendType=function(){return 1},c.prototype.initialize=function(t){this.canvas=document.createElement("canvas"),this.inner=document.createElement("div"),this.inner.style.position="relative",this.canvas.style.zIndex="0",this.inner.appendChild(this.canvas),t.appendChild(this.inner),this.renderer=new s.Flow.Renderer(this.canvas,this.getBackendType()),this.ctx=this.renderer.getContext()},c.prototype.initializeHeadless=function(t,e){void 0===t&&(t=300),void 0===e&&(e=300),this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=e,this.renderer=new s.Flow.Renderer(this.canvas,this.getBackendType()),this.ctx=this.renderer.getContext()},c.prototype.getContext=function(){return this.ctx},c.prototype.clear=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},c.prototype.scale=function(t){this.ctx.scale(t,t)},c.prototype.translate=function(t,e){this.CanvasRenderingCtx.translate(t,e)},c.prototype.renderText=function(t,e,n,i,r,o,s){void 0===s&&(s=void 0);var a=this.CanvasRenderingCtx.font;this.CanvasRenderingCtx.save(),this.CanvasRenderingCtx.font=u.VexFlowConverter.font(t,e,n),this.CanvasRenderingCtx.fillStyle=s,this.CanvasRenderingCtx.strokeStyle=s,this.CanvasRenderingCtx.fillText(i,o.x,o.y+r),this.CanvasRenderingCtx.restore(),this.CanvasRenderingCtx.font=a},c.prototype.renderRectangle=function(t,e,n){void 0===n&&(n=1);var i=this.CanvasRenderingCtx.fillStyle;this.CanvasRenderingCtx.fillStyle=u.VexFlowConverter.style(e),this.CanvasRenderingCtx.globalAlpha=n,this.ctx.fillRect(t.x,t.y,t.width,t.height),this.CanvasRenderingCtx.fillStyle=i,this.CanvasRenderingCtx.globalAlpha=1},c.prototype.renderLine=function(t,e,n,i){void 0===n&&(n="#FF0000FF"),void 0===i&&(i=2);var r=this.CanvasRenderingCtx.strokeStyle;this.CanvasRenderingCtx.strokeStyle=n,this.CanvasRenderingCtx.beginPath(),this.CanvasRenderingCtx.moveTo(t.x,t.y),this.CanvasRenderingCtx.lineTo(e.x,e.y),this.CanvasRenderingCtx.stroke(),this.CanvasRenderingCtx.strokeStyle=r},c.prototype.renderCurve=function(t){this.ctx.beginPath(),this.ctx.moveTo(t[0].x,t[0].y),this.ctx.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y),this.ctx.lineTo(t[7].x,t[7].y),this.ctx.bezierCurveTo(t[6].x,t[6].y,t[5].x,t[5].y,t[4].x,t[4].y),this.ctx.lineTo(t[0].x,t[0].y),this.ctx.closePath(),this.ctx.fill()},Object.defineProperty(c.prototype,"CanvasRenderingCtx",{get:function(){return this.ctx.vexFlowCanvasContext},enumerable:!0,configurable:!0}),c);function c(){return null!==o&&o.apply(this,arguments)||this}e.CanvasVexFlowBackend=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.VexFlowBackends=function(){};var i=(r.prototype.getInnerElement=function(){return this.inner},r.prototype.getCanvas=function(){return this.canvas},r.prototype.getRenderer=function(){return this.renderer},r.prototype.resize=function(t,e){this.renderer.resize(t,e)},r);function r(){}e.VexFlowBackend=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var y=n(112),s=n(6),i=n(4),r=(o.prototype.alignDynamicExpressions=function(){for(var t=[],e=new Array,n=0;n<this.parentStaffline.AbstractExpressions.length-1;n++){var i=this.parentStaffline.AbstractExpressions[n],r=this.parentStaffline.AbstractExpressions[n+1];i.Placement===r.Placement&&(this.getDistance(i.PositionAndShape,r.PositionAndShape).x<this.rules.DynamicExpressionMaxDistance?(-1===e.indexOf(i)&&e.push(i),e.push(r)):(t.push(e),e=new Array))}t.push(e);for(var o=0,s=t;o<s.length;o++){var a=s[o];if(0<a.length)for(var u=a.map(function(t){return t.PositionAndShape.Center.y}),l=Math.max.apply(Math,u),c=0;c<a.length;c++){var h=a[c],f=u[c]-l;if(h instanceof y.VexFlowContinuousDynamicExpression?h.shiftYPosition(-f):h.PositionAndShape.RelativePosition.y-=.8*f,h.PositionAndShape.calculateBoundingBox(),h.squeeze){r=c<a.length-1?a[c+1]:void 0;var p=0<c?a[c-1]:void 0;if(r){var d=this.getOverlap(h.PositionAndShape,r.PositionAndShape);h.squeeze(-(d.x+this.rules.DynamicExpressionSpacer))}if(p){var b=this.getOverlap(p.PositionAndShape,h.PositionAndShape);h.squeeze(b.x+this.rules.DynamicExpressionSpacer)}}}}},o.prototype.getDistance=function(t,e){var n=t.RelativePosition.x+t.BorderMarginRight,i=e.RelativePosition.x+e.BorderMarginLeft,r=e.RelativePosition.y+t.BorderMarginBottom,o=e.RelativePosition.y+e.BorderMarginTop;return new s.PointF2D(i-n,o-r)},o.prototype.getOverlap=function(t,e){return new s.PointF2D(t.RelativePosition.x+t.BorderMarginRight-(e.RelativePosition.x+e.BorderMarginLeft),t.RelativePosition.y+t.BorderMarginBottom-(e.RelativePosition.y+e.BorderMarginTop))},o);function o(t){this.rules=i.EngravingRules.Rules,this.parentStaffline=t}e.AlignmentManager=r},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(52),a=n(24),u=n(16),l=n(9),c=n(44),h=(o=s.GraphicalContinuousDynamicExpression,r(f,o),f);function f(t,e,n){var i=o.call(this,t,e)||this;return i.IsVerbal&&(i.label=new a.GraphicalLabel(new u.Label(t.Label),n||i.rules.ContinuousDynamicTextHeight,l.TextAlignmentEnum.LeftCenter,i.PositionAndShape),i.label.Label.fontStyle=c.FontStyles.Italic,i.label.setLabelPositionAndShapeBorders(),i.PositionAndShape.calculateBoundingBox()),i}e.VexFlowContinuousDynamicExpression=h},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(7),b=n(0),a=n(5),u=n(6),l=(o=s.GraphicalObject,r(c,o),Object.defineProperty(c.prototype,"ParentStaff",{get:function(){return this.parentStaff},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"MeasureNumber",{get:function(){return this.measureNumber},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"FirstInstructionStaffEntry",{get:function(){return this.firstInstructionStaffEntry},set:function(t){this.firstInstructionStaffEntry=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"LastInstructionStaffEntry",{get:function(){return this.lastInstructionStaffEntry},set:function(t){this.lastInstructionStaffEntry=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"ParentStaffLine",{get:function(){return this.parentStaffLine},set:function(t){this.parentStaffLine=t,void 0!==this.parentStaffLine&&(this.PositionAndShape.Parent=this.parentStaffLine.PositionAndShape)},enumerable:!0,configurable:!0}),c.prototype.resetLayout=function(){throw new Error("not implemented")},c.prototype.getLineWidth=function(t){throw new Error("not implemented")},c.prototype.addClefAtBegin=function(t){throw new Error("not implemented")},c.prototype.addKeyAtBegin=function(t,e,n){throw new Error("not implemented")},c.prototype.addRhythmAtBegin=function(t){throw new Error("not implemented")},c.prototype.addClefAtEnd=function(t){throw new Error("not implemented")},c.prototype.setPositionInStaffline=function(t){this.PositionAndShape.RelativePosition=new u.PointF2D(t,0)},c.prototype.setWidth=function(t){this.PositionAndShape.BorderRight=t},c.prototype.layoutSymbols=function(){throw new Error("not implemented")},c.prototype.findGraphicalStaffEntryFromTimestamp=function(t){for(var e=0,n=this.staffEntries.length;e<n;++e){var i=this.staffEntries[e];if(i.relInMeasureTimestamp.Equals(t))return i}},c.prototype.findGraphicalStaffEntryFromVerticalContainerTimestamp=function(t){for(var e=0,n=this.staffEntries.length;e<n;++e){var i=this.staffEntries[e];if(i.sourceStaffEntry.VerticalContainerParent.getAbsoluteTimestamp().Equals(t))return i}},c.prototype.hasSameDurationWithSourceMeasureParent=function(){for(var t=new b.Fraction(0,1),e=0,n=this.staffEntries.length;e<n;++e){var i=this.staffEntries[e];t.Add(i.findStaffEntryMinNoteLength())}return t.Equals(this.parentSourceMeasure.Duration)},c.prototype.hasMultipleVoices=function(){if(0===this.staffEntries.length)return!1;for(var t=[],e=0,n=this.staffEntries.length;e<n;++e)for(var i=this.staffEntries[e],r=0,o=i.sourceStaffEntry.VoiceEntries.length;r<o;++r){var s=i.sourceStaffEntry.VoiceEntries[r];t.indexOf(s.ParentVoice)<0&&t.push(s.ParentVoice)}return 1<t.length},c.prototype.isVisible=function(){return this.ParentStaff.ParentInstrument.Visible},c.prototype.getGraphicalMeasureDurationFromStaffEntries=function(){for(var t=new b.Fraction(0,1),e=[],n=0,i=this.staffEntries.length;n<i;++n)for(var r=0,o=(h=this.staffEntries[n]).sourceStaffEntry.VoiceEntries.length;r<o;++r){var s=h.sourceStaffEntry.VoiceEntries[r];e.indexOf(s.ParentVoice)<0&&e.push(s.ParentVoice)}for(n=0,i=e.length;n<i;++n){for(var a=e[n],u=new b.Fraction(0,1),l=0,c=this.staffEntries;l<c.length;l++)for(var h,f=0,p=(h=c[l]).graphicalVoiceEntries;f<p.length;f++){var d=p[f];d.parentVoiceEntry.ParentVoice===a&&0<d.notes.length&&u.Add(d.notes[0].graphicalNoteLength)}t.lt(u)&&(t=b.Fraction.createFromFraction(u))}return t},c.prototype.addGraphicalStaffEntry=function(t){this.staffEntries.push(t)},c.prototype.addGraphicalStaffEntryAtTimestamp=function(t){if(void 0!==t)if(0===this.staffEntries.length||this.staffEntries[this.staffEntries.length-1].relInMeasureTimestamp.lt(t.relInMeasureTimestamp))this.staffEntries.push(t);else for(var e=this.staffEntries.length-1;0<=e;e--){if(this.staffEntries[e].relInMeasureTimestamp.lt(t.relInMeasureTimestamp)){this.staffEntries.splice(e+1,0,t);break}0===e&&this.staffEntries.splice(e,0,t)}},c.prototype.beginsWithLineRepetition=function(){var t=this.parentSourceMeasure;return void 0!==t&&t.beginsWithLineRepetition()},c.prototype.endsWithLineRepetition=function(){var t=this.parentSourceMeasure;return void 0!==t&&t.endsWithLineRepetition()},c.prototype.beginsWithWordRepetition=function(){var t=this.parentSourceMeasure;return void 0!==t&&t.beginsWithWordRepetition()},c.prototype.endsWithWordRepetition=function(){var t=this.parentSourceMeasure;return void 0!==t&&t.endsWithWordRepetition()},c);function c(t,e,n){void 0===t&&(t=void 0),void 0===e&&(e=void 0),void 0===n&&(n=void 0);var i=o.call(this)||this;return i.measureNumber=-1,i.parentStaff=t,i.parentSourceMeasure=e,void 0!==(i.parentStaffLine=n)?(i.parentStaff=n.ParentStaff,i.PositionAndShape=new a.BoundingBox(i,n.PositionAndShape)):i.PositionAndShape=new a.BoundingBox(i),i.PositionAndShape.BorderBottom=4,void 0!==i.parentSourceMeasure&&(i.measureNumber=i.parentSourceMeasure.MeasureNumber),i.staffEntries=[],i}e.GraphicalMeasure=l},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(115),a=n(25),u=(o=s.GraphicalVoiceEntry,r(l,o),l.prototype.applyBordersFromVexflow=function(){var t=this.vfStaveNote;if(t.getNoteHeadBeginX){var e=t.getBoundingBox(),n=t.getNoteHeadBeginX()-e.x;this.PositionAndShape.RelativePosition.y=e.y/a.unitInPixels,this.PositionAndShape.BorderTop=0,this.PositionAndShape.BorderBottom=e.h/a.unitInPixels,this.PositionAndShape.BorderLeft=-(n+t.width/2)/a.unitInPixels,this.PositionAndShape.BorderRight=(e.w-n)/a.unitInPixels}},Object.defineProperty(l.prototype,"vfStaveNote",{get:function(){return this.mVexFlowStaveNote},set:function(t){this.mVexFlowStaveNote=t},enumerable:!0,configurable:!0}),l);function l(t,e){return o.call(this,t,e)||this}e.VexFlowVoiceEntry=u},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(7),a=n(5),m=n(4),g=n(32),u=(o=s.GraphicalObject,r(l,o),l.prototype.sort=function(){this.notes.sort(function(t,e){return e.sourceNote.Pitch.getHalfTone()-t.sourceNote.Pitch.getHalfTone()})},l.prototype.color=function(){for(var t,e=m.EngravingRules.Rules.DefaultColorNotehead,n=m.EngravingRules.Rules.DefaultColorRest,i=m.EngravingRules.Rules.DefaultColorStem,r=this.vfStaveNote,o=0;o<this.notes.length;o++){if(t=(b=this.notes[o]).sourceNote.NoteheadColor,m.EngravingRules.Rules.ColoringMode===g.ColoringModes.AutoColoring||m.EngravingRules.Rules.ColoringMode===g.ColoringModes.CustomColorSet)if(b.sourceNote.isRest())t=m.EngravingRules.Rules.ColoringSetCurrent.getValue(-1);else{var s=b.sourceNote.Pitch.FundamentalNote;t=m.EngravingRules.Rules.ColoringSetCurrent.getValue(s)}if((t=b.sourceNote.PrintObject?t||m.EngravingRules.Rules.DefaultColorNotehead:"#00000000")||(!b.sourceNote.isRest()&&e?t=e:b.sourceNote.isRest()&&n&&(t=n)),t&&b.sourceNote.PrintObject)b.sourceNote.NoteheadColor=t;else if(!t)continue;if(b.sourceNote.NoteBeam&&m.EngravingRules.Rules.ColorStemsLikeNoteheads){for(var a=b.sourceNote.NoteBeam.Notes,u=!0,l=0;l<a.length;l++)a[l].NoteheadColor!==t&&(u=!1);u&&null!==r.beam&&r.beam.setStyle&&r.beam.setStyle({fillStyle:t,strokeStyle:t})}if(r&&r.note_heads){var c=r.note_heads[o];c&&c.setStyle({fillStyle:t,strokeStyle:t})}}var h=this.parentVoiceEntry.StemColor;h&&!m.EngravingRules.Rules.ColorStemsLikeNoteheads||(t?h=t:i&&(h=i));for(var f=!0,p=0,d=this.parentVoiceEntry.Notes;p<d.length;p++){var b;if((b=d[p]).PrintObject){f=!1;break}}f&&(h="#00000000");var y={fillStyle:h,strokeStyle:h};h&&r.setStemStyle&&(f||(this.parentVoiceEntry.StemColor=h),r.setStemStyle(y),r.flag&&r.setFlagStyle&&m.EngravingRules.Rules.ColorFlags&&r.setFlagStyle(y))},l);function l(t,e){var n=o.call(this)||this;return n.parentVoiceEntry=t,n.parentStaffEntry=e,n.PositionAndShape=new a.BoundingBox(n,e?e.PositionAndShape:void 0,!0),n.notes=[],n}e.GraphicalVoiceEntry=u},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(5),a=n(0),u=n(7),l=n(28),c=n(20),h=(o=u.GraphicalObject,r(f,o),Object.defineProperty(f.prototype,"GraphicalInstructions",{get:function(){return this.graphicalInstructions},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"GraphicalTies",{get:function(){return this.graphicalTies},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"LyricsEntries",{get:function(){return this.lyricsEntries},set:function(t){this.lyricsEntries=t},enumerable:!0,configurable:!0}),f.prototype.getAbsoluteTimestamp=function(){var t=this.parentMeasure.parentSourceMeasure.AbsoluteTimestamp.clone();return void 0!==this.relInMeasureTimestamp&&t.Add(this.relInMeasureTimestamp),t},f.prototype.findEndTieGraphicalNoteFromNote=function(t){for(var e=0,n=this.graphicalVoiceEntries;e<n.length;e++)for(var i=0,r=n[e].notes;i<r.length;i++){var o=r[i],s=o.sourceNote;if(!s.isRest()&&s.Pitch.FundamentalNote===t.Pitch.FundamentalNote&&s.Pitch.Octave===t.Pitch.Octave&&s.getAbsoluteTimestamp().Equals(t.getAbsoluteTimestamp()))return o}},f.prototype.findEndTieGraphicalNoteFromNoteWithStartingSlur=function(t,e){if(void 0!==t)for(var n=0,i=this.graphicalVoiceEntries;n<i.length;n++){var r=i[n];if(r.parentVoiceEntry===t.ParentVoiceEntry)for(var o=0,s=r.notes;o<s.length;o++){var a=s[o],u=a.sourceNote;if(void 0!==u.NoteTie&&-1!==u.NoteSlurs.indexOf(e))return a}}},f.prototype.findGraphicalNoteFromGraceNote=function(t){if(void 0!==t)for(var e=0,n=this.graphicalVoiceEntries;e<n.length;e++){var i=n[e];if(i.parentVoiceEntry===t.ParentVoiceEntry)for(var r=0,o=i.notes;r<o.length;r++){var s=o[r];if(s.sourceNote===t)return s}}},f.prototype.findGraphicalNoteFromNote=function(t){if(void 0!==t)for(var e=0,n=this.graphicalVoiceEntries;e<n.length;e++){var i=n[e];if(i.parentVoiceEntry===t.ParentVoiceEntry)for(var r=0,o=i.notes;r<o.length;r++){var s=o[r];if(s.sourceNote===t&&this.getAbsoluteTimestamp().Equals(t.getAbsoluteTimestamp()))return s}}},f.prototype.getGraphicalNoteDurationFromVoice=function(t){for(var e=0,n=this.graphicalVoiceEntries;e<n.length;e++){var i=n[e];if(i.parentVoiceEntry.ParentVoice===t)return i.notes[0].graphicalNoteLength}return new a.Fraction(0,1)},f.prototype.findVoiceEntryGraphicalNotes=function(t){for(var e=0,n=this.graphicalVoiceEntries;e<n.length;e++){var i=n[e];if(i.parentVoiceEntry===t)return i.notes}},f.prototype.isVoiceEntryPartOfLinkedVoiceEntry=function(t){if(void 0!==this.sourceStaffEntry.Link)for(var e=0,n=this.sourceStaffEntry.Link.LinkStaffEntries.length;e<n;++e){var i=this.sourceStaffEntry.Link.LinkStaffEntries[e];if(-1!==i.VoiceEntries.indexOf(t)&&i!==this.sourceStaffEntry)return!0}return!1},f.prototype.findStaffEntryMinNoteLength=function(){for(var t=new a.Fraction(Number.MAX_VALUE,1),e=0,n=this.graphicalVoiceEntries;e<n.length;e++)for(var i=0,r=n[e].notes;i<r.length;i++){var o=r[i].graphicalNoteLength;o.lt(t)&&0<o.GetExpandedNumerator()&&(t=o)}return t},f.prototype.findStaffEntryMaxNoteLength=function(){for(var t=new a.Fraction(0,1),e=0,n=this.graphicalVoiceEntries;e<n.length;e++)for(var i=0,r=n[e].notes;i<r.length;i++){var o=r[i].graphicalNoteLength;t.lt(o)&&0<o.GetExpandedNumerator()&&(t=o)}return t},f.prototype.findOrCreateGraphicalVoiceEntry=function(t){for(var e=0,n=this.graphicalVoiceEntries;e<n.length;e++){var i=n[e];if(i.parentVoiceEntry===t)return i}var r=c.MusicSheetCalculator.symbolFactory.createVoiceEntry(t,this);return this.graphicalVoiceEntries.push(r),r},f.prototype.findOrCreateGraphicalVoiceEntryFromGraphicalNote=function(t){for(var e=0,n=this.graphicalVoiceEntries;e<n.length;e++){var i=n[e];if(i===t.parentVoiceEntry)return i}var r=c.MusicSheetCalculator.symbolFactory.createVoiceEntry(t.sourceNote.ParentVoiceEntry,this);return this.graphicalVoiceEntries.push(r),r},f.prototype.addGraphicalNoteToListAtCorrectYPosition=function(t,e){var n=t.notes;if(0===n.length||e.PositionAndShape.RelativePosition.y<l.CollectionUtil.last(n).PositionAndShape.RelativePosition.y)n.push(e);else for(var i=n.length-1;0<=i;i--){if(n[i].PositionAndShape.RelativePosition.y>e.PositionAndShape.RelativePosition.y){n.splice(i+1,0,e);break}if(0===i){n.splice(0,0,e);break}}},f.prototype.hasOnlyRests=function(){for(var t=0,e=this.graphicalVoiceEntries;t<e.length;t++)for(var n=0,i=e[t].notes;n<i.length;n++)if(!i[n].sourceNote.isRest())return!1;return!0},f);function f(t,e,n){void 0===e&&(e=void 0),void 0===n&&(n=void 0);var i=o.call(this)||this;return i.graphicalInstructions=[],i.graphicalTies=[],i.lyricsEntries=[],i.parentMeasure=t,i.graphicalVoiceEntries=[],i.sourceStaffEntry=e,void 0!==n?(i.staffEntryParent=n,i.parentVerticalContainer=n.parentVerticalContainer,i.PositionAndShape=new s.BoundingBox(i,n.PositionAndShape)):i.PositionAndShape=new s.BoundingBox(i,t.PositionAndShape),void 0!==e&&(i.relInMeasureTimestamp=e.Timestamp),i}e.GraphicalStaffEntry=h},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(7),a=n(20),u=n(5),l=(o=s.GraphicalObject,r(c,o),c.prototype.Transpose=function(t,e,n,i){var r=this.sourceNote.Pitch;return void 0!==a.MusicSheetCalculator.transposeCalculator&&(r=a.MusicSheetCalculator.transposeCalculator.transposePitch(this.sourceNote.Pitch,t,n)),r},c.prototype.calculateNumberOfNeededDots=function(t){var e=1,n=2,i=t.GetExpandedNumerator();if(void 0===this.sourceNote||void 0===this.sourceNote.NoteTuplet)for(;n<i;)e++,n=Math.pow(2,e);return Math.min(3,e-1)},c);function c(t,e,n){void 0===n&&(n=void 0);var i=o.call(this)||this;return i.sourceNote=t,i.parentVoiceEntry=e,i.PositionAndShape=new u.BoundingBox(i,e.PositionAndShape),i.graphicalNoteLength=void 0!==n?n:t.Length,i.numberOfDots=i.calculateNumberOfNeededDots(i.graphicalNoteLength),i}e.GraphicalNote=l},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(9),a=n(16),u=n(24),l=n(74),c=n(5),h=n(7),f=n(6),p=(o=h.GraphicalObject,r(d,o),Object.defineProperty(d.prototype,"GetChordSymbolContainer",{get:function(){return this.chordSymbolContainer},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"GetGraphicalLabel",{get:function(){return this.graphicalLabel},enumerable:!0,configurable:!0}),d.prototype.calculateLabel=function(t,e){var n=l.ChordSymbolContainer.calculateChordText(this.chordSymbolContainer,e);this.graphicalLabel=new u.GraphicalLabel(new a.Label(n),t,s.TextAlignmentEnum.CenterBottom,this.boundingBox),this.graphicalLabel.PositionAndShape.RelativePosition=new f.PointF2D(0,0)},d);function d(t,e,n,i){var r=o.call(this)||this;return r.chordSymbolContainer=t,r.boundingBox=new c.BoundingBox(r,e),r.calculateLabel(n,i),r}e.GraphicalChordSymbolContainer=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(r.prototype,"GetTie",{get:function(){return this.tie},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"StartNote",{get:function(){return this.startNote},set:function(t){this.startNote=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"EndNote",{get:function(){return this.endNote},set:function(t){this.endNote=t},enumerable:!0,configurable:!0}),r);function r(t,e,n){void 0===e&&(e=void 0),void 0===n&&(n=void 0),this.tie=t,this.startNote=e,this.endNote=n}e.GraphicalTie=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(24),s=n(16),a=n(6),u=n(4),l=n(9),i=(Object.defineProperty(r.prototype,"LyricsEntry",{get:function(){return this.lyricsEntry},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ParentLyricWord",{get:function(){return this.graphicalLyricWord},set:function(t){this.graphicalLyricWord=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"GraphicalLabel",{get:function(){return this.graphicalLabel},set:function(t){this.graphicalLabel=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"StaffEntryParent",{get:function(){return this.graphicalStaffEntry},set:function(t){this.graphicalStaffEntry=t},enumerable:!0,configurable:!0}),r);function r(t,e,n,i){this.lyricsEntry=t,this.graphicalStaffEntry=e;var r=u.EngravingRules.Rules.LyricsAlignmentStandard;4<=t.Text.length&&4<t.Parent.Notes[0].Length.Denominator&&l.TextAlignmentEnum.LeftBottom,this.graphicalLabel=new o.GraphicalLabel(new s.Label(t.Text),n,r,e.PositionAndShape),this.graphicalLabel.PositionAndShape.RelativePosition=new a.PointF2D(0,i),r===l.TextAlignmentEnum.LeftBottom&&(this.graphicalLabel.PositionAndShape.RelativePosition.x-=1)}e.GraphicalLyricEntry=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(r.prototype,"GetLyricWord",{get:function(){return this.lyricWord},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"GraphicalLyricsEntries",{get:function(){return this.graphicalLyricsEntries},set:function(t){this.graphicalLyricsEntries=t},enumerable:!0,configurable:!0}),r.prototype.isFilled=function(){for(var t=0;t<this.graphicalLyricsEntries.length;t++)if(void 0===this.graphicalLyricsEntries[t])return!1;return!0},r.prototype.initialize=function(){for(var t=0;t<this.lyricWord.Syllables.length;t++)this.graphicalLyricsEntries.push(void 0)},r);function r(t){this.graphicalLyricsEntries=[],this.lyricWord=t,this.initialize()}e.GraphicalLyricWord=i},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(7),a=n(33),u=n(5),l=n(72),c=n(13),h=(o=s.GraphicalObject,r(f,o),f.prototype.setSymbol=function(){switch(this.getOctaveShift.Type){case a.OctaveEnum.VA8:this.octaveSymbol=l.MusicSymbol.VA8;break;case a.OctaveEnum.VB8:this.octaveSymbol=l.MusicSymbol.VB8;break;case a.OctaveEnum.MA15:this.octaveSymbol=l.MusicSymbol.MA15;break;case a.OctaveEnum.MB15:this.octaveSymbol=l.MusicSymbol.MB15;break;default:throw new c.ArgumentOutOfRangeException("")}},f);function f(t,e){var n=o.call(this)||this;return n.getOctaveShift=t,n.setSymbol(),n.PositionAndShape=new u.BoundingBox(n,e),n}e.GraphicalOctaveShift=h},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,q=n(6),s=n(124),J=n(8),Q=n(195),c=n(43),a=n(0),h=n(18),u=(o=s.GraphicalCurve,r(l,o),l.Compare=function(t,e){var n=a.Fraction.minus(t.staffEntries[t.staffEntries.length-1].getAbsoluteTimestamp(),t.staffEntries[0].getAbsoluteTimestamp()),i=a.Fraction.minus(e.staffEntries[e.staffEntries.length-1].getAbsoluteTimestamp(),e.staffEntries[0].getAbsoluteTimestamp());return n.RealValue>i.RealValue?1:i.RealValue>n.RealValue?-1:0},l.prototype.calculateCurve=function(t){var e=this.staffEntries[0],n=this.staffEntries[this.staffEntries.length-1],i=e.findGraphicalNoteFromNote(this.slur.StartNote);void 0===i&&this.graceStart&&(i=e.findGraphicalNoteFromGraceNote(this.slur.StartNote)),void 0===i&&(i=e.findEndTieGraphicalNoteFromNoteWithStartingSlur(this.slur.StartNote,this.slur));var r=n.findGraphicalNoteFromNote(this.slur.EndNote);void 0===r&&this.graceEnd&&(r=n.findGraphicalNoteFromGraceNote(this.slur.EndNote));var o=e.parentMeasure.ParentStaffLine,s=o.SkyBottomLineCalculator;this.calculatePlacement(s,o);var a,u,l,c=this.calculateStartAndEnd(i,r,o,t,s),h=c.startX,f=c.endX,p=c.startY,d=c.endY,b=t.SlurTangentMinAngle,y=t.SlurTangentMaxAngle;if(this.placement===J.PlacementEnum.Above){p-=t.SlurNoteHeadYOffset,d-=t.SlurNoteHeadYOffset,a=new q.PointF2D(h,p),u=new q.PointF2D(f,d);var m=new q.PointF2D(this.staffEntries[0].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[0].PositionAndShape.RelativePosition.x,p);void 0!==i?m.x+=this.staffEntries[0].PositionAndShape.BorderRight:m.x=this.staffEntries[0].parentMeasure.beginInstructionsWidth,this.graceStart&&(m.x+=n.PositionAndShape.RelativePosition.x);var g=new q.PointF2D(this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[this.staffEntries.length-1].PositionAndShape.RelativePosition.x,d);if(void 0!==r?g.x+=this.staffEntries[this.staffEntries.length-1].PositionAndShape.BorderLeft:g.x=this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.Size.width,this.graceEnd&&(g.x+=n.staffEntryParent.PositionAndShape.RelativePosition.x),0===(l=this.calculateTopPoints(m,g,o,s)).length){var v=new q.PointF2D((g.x-m.x)/2+m.x,(g.y-m.y)/2+m.y);l.push(v)}var _=Math.atan((d-p)/(f-h)),S=new q.PointF2D(0,0),x=new q.PointF2D(f-h,-(d-p)),w=void 0,E=void 0;E=(w=Q.Matrix2D.getRotationMatrix(_)).getTransposeMatrix(),x=w.vectorMultiplication(x);var P=this.calculateTranslatedAndRotatedPointListAbove(l,h,p,w),T=this.calculateMaxLeftSlope(P,S,x),k=this.calculateMaxRightSlope(P,S,x),O=S.y-S.x*T,M=x.y-x.x*k,R=new q.PointF2D,L=!1;Math.abs(Math.abs(T)-Math.abs(k))<1e-4?(R.x=x.x/2,L=!(R.y=0)):(R.x=(M-O)/(T-k),R.y=T*R.x+O);var A=b,C=-b;L||this.calculateAngles(A,C,T,k,y);var I=(Y=this.calculateControlPoints(x.x,A,C,P)).leftControlPoint,N=Y.rightControlPoint;(I=E.vectorMultiplication(I)).x+=h,I.y=-I.y+p,(N=E.vectorMultiplication(N)).x+=h,N.y=-N.y+p,this.bezierStartPt=a,this.bezierStartControlPt=I,this.bezierEndControlPt=N,this.bezierEndPt=u;for(var F=o.SkyLine.length,B=s.getLeftIndexForPointX(this.bezierStartPt.x,F),D=s.getLeftIndexForPointX(this.bezierEndPt.x,F),j=this.bezierEndPt.x-this.bezierStartPt.x,V=s.SamplingUnit,G=B;G<D;G++){var W=G/V-this.bezierStartPt.x,U=this.calculateCurvePointAtIndex(Math.abs(W)/j);(K=s.getLeftIndexForPointX(U.x,F))>=B&&(o.SkyLine[K]=Math.min(o.SkyLine[K],U.y)),++K<F&&(o.SkyLine[K]=Math.min(o.SkyLine[K],U.y))}}else{p+=t.SlurNoteHeadYOffset,d+=t.SlurNoteHeadYOffset,a=new q.PointF2D(h,p),u=new q.PointF2D(f,d);var H=new q.PointF2D(this.staffEntries[0].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[0].PositionAndShape.RelativePosition.x,p);void 0!==i?H.x+=this.staffEntries[0].PositionAndShape.BorderRight:H.x=this.staffEntries[0].parentMeasure.beginInstructionsWidth,this.graceStart&&(H.x+=n.PositionAndShape.RelativePosition.x);var Y,z=new q.PointF2D(this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[this.staffEntries.length-1].PositionAndShape.RelativePosition.x,d);void 0!==r?z.x+=this.staffEntries[this.staffEntries.length-1].PositionAndShape.BorderLeft:z.x=this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.Size.width,this.graceEnd&&(z.x+=n.staffEntryParent.PositionAndShape.RelativePosition.x),0===(l=this.calculateBottomPoints(H,z,o,s)).length&&(v=new q.PointF2D((z.x-H.x)/2+H.x,(z.y-H.y)/2+H.y),l.push(v)),_=Math.atan((d-p)/(f-h)),S=new q.PointF2D(0,0),x=new q.PointF2D(f-h,d-p),E=w=void 0,E=(w=Q.Matrix2D.getRotationMatrix(-_)).getTransposeMatrix(),x=w.vectorMultiplication(x),P=this.calculateTranslatedAndRotatedPointListBelow(l,h,p,w),T=this.calculateMaxLeftSlope(P,S,x),k=this.calculateMaxRightSlope(P,S,x),O=S.y-S.x*T,M=x.y-x.x*k,R=new q.PointF2D,L=!1,Math.abs(Math.abs(T)-Math.abs(k))<1e-4?(R.x=x.x/2,L=!(R.y=0)):(R.x=(M-O)/(T-k),R.y=T*R.x+O),C=-(A=b),L||this.calculateAngles(A,C,T,k,y),I=(Y=this.calculateControlPoints(x.x,A,C,P)).leftControlPoint,N=Y.rightControlPoint,(I=E.vectorMultiplication(I)).x+=h,I.y+=p,(N=E.vectorMultiplication(N)).x+=h,N.y+=p,this.bezierStartPt=a,this.bezierStartControlPt=I,this.bezierEndControlPt=N,this.bezierEndPt=u;var X=o.BottomLine.length;for(B=s.getLeftIndexForPointX(this.bezierStartPt.x,X),D=s.getLeftIndexForPointX(this.bezierEndPt.x,X),j=this.bezierEndPt.x-this.bezierStartPt.x,V=s.SamplingUnit,G=B;G<D;G++){var K;W=G/V-this.bezierStartPt.x,U=this.calculateCurvePointAtIndex(Math.abs(W)/j),(K=s.getLeftIndexForPointX(U.x,X))>=B&&(o.BottomLine[K]=Math.max(o.BottomLine[K],U.y)),++K<X&&(o.BottomLine[K]=Math.max(o.BottomLine[K],U.y))}}},l.prototype.calculateStartAndEnd=function(t,e,n,i,r){var o=0,s=0,a=0,u=0;if(void 0!==t){o=t.PositionAndShape.RelativePosition.x+t.parentVoiceEntry.parentStaffEntry.PositionAndShape.RelativePosition.x+t.parentVoiceEntry.parentStaffEntry.parentMeasure.PositionAndShape.RelativePosition.x,this.graceStart&&(o+=t.parentVoiceEntry.parentStaffEntry.staffEntryParent.PositionAndShape.RelativePosition.x);var l=t.parentVoiceEntry;s=this.placement===J.PlacementEnum.Above?l.PositionAndShape.RelativePosition.y+l.PositionAndShape.BorderTop:l.PositionAndShape.RelativePosition.y+l.PositionAndShape.BorderBottom,l.parentVoiceEntry.StemDirection===h.StemDirectionType.Down&&this.placement===J.PlacementEnum.Below&&(o-=.5),l.parentVoiceEntry.StemDirection===h.StemDirectionType.Up&&this.placement===J.PlacementEnum.Above&&(o+=.5)}else o=n.Measures[0].beginInstructionsWidth;if(void 0!==e){a=e.PositionAndShape.RelativePosition.x+e.parentVoiceEntry.parentStaffEntry.PositionAndShape.RelativePosition.x+e.parentVoiceEntry.parentStaffEntry.parentMeasure.PositionAndShape.RelativePosition.x,this.graceEnd&&(a+=e.parentVoiceEntry.parentStaffEntry.staffEntryParent.PositionAndShape.RelativePosition.x);var c=e.parentVoiceEntry;u=this.placement===J.PlacementEnum.Above?c.PositionAndShape.RelativePosition.y+c.PositionAndShape.BorderTop:c.PositionAndShape.RelativePosition.y+c.PositionAndShape.BorderBottom,c.parentVoiceEntry.StemDirection===h.StemDirectionType.Down&&this.placement===J.PlacementEnum.Below&&(a-=.5),c.parentVoiceEntry.StemDirection===h.StemDirectionType.Up&&this.placement===J.PlacementEnum.Above&&(a+=.5)}else a=n.PositionAndShape.Size.width;return void 0===t&&void 0===e&&(u=s=0),void 0===t&&(s=u),void 0===e&&(u=s),this.slur.startNoteHasMoreStartingSlurs()&&this.slur.isSlurLonger()&&(this.placement===J.PlacementEnum.Above?s-=i.SlursStartingAtSameStaffEntryYOffset:s+=i.SlursStartingAtSameStaffEntryYOffset),this.slur.endNoteHasMoreEndingSlurs()&&this.slur.isSlurLonger()&&(this.placement===J.PlacementEnum.Above?u-=i.SlursStartingAtSameStaffEntryYOffset:u+=i.SlursStartingAtSameStaffEntryYOffset),{startX:o,startY:s,endX:a,endY:u}},l.prototype.calculatePlacement=function(t,e){for(var n=0,i=this.staffEntries.length;n<i;++n)if(this.staffEntries[n].parentMeasure.hasMultipleVoices())return void(this.slur.StartNote.ParentVoiceEntry.ParentVoice instanceof c.LinkedVoice||this.slur.EndNote.ParentVoiceEntry.ParentVoice instanceof c.LinkedVoice?this.placement=J.PlacementEnum.Below:this.placement=J.PlacementEnum.Above);for(n=0,i=this.staffEntries.length;n<i;++n)if(0<this.staffEntries[n].LyricsEntries.length)return void(this.placement=J.PlacementEnum.Above);var r=this.staffEntries[0],o=this.staffEntries[this.staffEntries.length-1],s=r.PositionAndShape.BorderLeft+r.PositionAndShape.RelativePosition.x+r.parentMeasure.PositionAndShape.RelativePosition.x,a=o.PositionAndShape.BorderRight+o.PositionAndShape.RelativePosition.x+o.parentMeasure.PositionAndShape.RelativePosition.x;this.graceStart&&(s+=o.PositionAndShape.RelativePosition.x),this.graceEnd&&(a+=o.staffEntryParent.PositionAndShape.RelativePosition.x);var u=t.getSkyLineMinInRange(s,a),l=t.getBottomLineMaxInRange(s,a);u=Math.min(r.PositionAndShape.BorderTop,o.PositionAndShape.BorderTop)-u,l-=Math.max(r.PositionAndShape.BorderBottom,o.PositionAndShape.BorderBottom),Math.abs(l)>Math.abs(u)?this.placement=J.PlacementEnum.Above:this.placement=J.PlacementEnum.Below},l.prototype.calculateTopPoints=function(t,e,n,i){var r=[],o=i.getRightIndexForPointX(t.x,n.SkyLine.length),s=i.getLeftIndexForPointX(e.x,n.SkyLine.length);o<0&&(o=0),s>=n.SkyLine.length&&(s=n.SkyLine.length-1);for(var a=o;a<s;a++){var u=new q.PointF2D((.5+a)/i.SamplingUnit,n.SkyLine[a]);r.push(u)}return r},l.prototype.calculateBottomPoints=function(t,e,n,i){var r=[],o=i.getRightIndexForPointX(t.x,n.BottomLine.length),s=i.getLeftIndexForPointX(e.x,n.BottomLine.length);o<0&&(o=0),s>=n.BottomLine.length&&(s=n.BottomLine.length-1);for(var a=o;a<s;a++){var u=new q.PointF2D((.5+a)/i.SamplingUnit,n.BottomLine[a]);r.push(u)}return r},l.prototype.calculateMaxLeftSlope=function(t,e,n){for(var i=-Number.MAX_VALUE,r=e.x,o=e.y,s=0;s<t.length;s++)Math.abs(t[s].y-Number.MAX_VALUE)<1e-4||Math.abs(t[s].y- -Number.MAX_VALUE)<1e-4||(i=Math.max(i,(t[s].y-o)/(t[s].x-r)));return Math.max(i,Math.abs(n.y-o)/(n.x-r))},l.prototype.calculateMaxRightSlope=function(t,e,n){for(var i=Number.MAX_VALUE,r=n.x,o=n.y,s=0;s<t.length;s++)Math.abs(t[s].y-Number.MAX_VALUE)<1e-4||Math.abs(t[s].y- -Number.MAX_VALUE)<1e-4||(i=Math.min(i,(o-t[s].y)/(r-t[s].x)));return Math.min(i,(o-e.y)/(r-e.x))},l.prototype.getPointListMaxY=function(t){for(var e=-Number.MAX_VALUE,n=0,i=t.length;n<i;++n){var r=t[n];Math.abs(r.y- -Number.MAX_VALUE)<1e-4||Math.abs(r.y-Number.MAX_VALUE)<1e-4||(e=Math.max(e,r.y))}return e},l.prototype.calculateTranslatedAndRotatedPointListAbove=function(t,e,n,i){for(var r=[],o=0;o<t.length;o++)if(!(Math.abs(t[o].y-Number.MAX_VALUE)<1e-4||Math.abs(t[o].y- -Number.MAX_VALUE)<1e-4)){var s=new q.PointF2D(t[o].x-e,-(t[o].y-n));s=i.vectorMultiplication(s),r.push(s)}return r},l.prototype.calculateTranslatedAndRotatedPointListBelow=function(t,e,n,i){for(var r=[],o=0;o<t.length;o++)if(!(Math.abs(t[o].y-Number.MAX_VALUE)<1e-4||Math.abs(t[o].y- -Number.MAX_VALUE)<1e-4)){var s=new q.PointF2D(t[o].x-e,t[o].y-n);s=i.vectorMultiplication(s),r.push(s)}return r},l.prototype.calculateHeightWidthRatio=function(t,e){return 0===e.length?0:Math.max(0,this.getPointListMaxY(e))/t},l.prototype.calculateControlPoints=function(t,e,n,i){var r=this.calculateHeightWidthRatio(t,i),o=t*(l.k*r+l.d),s=new q.PointF2D;s.x=o*Math.cos(e*l.degreesToRadiansFactor),s.y=o*Math.sin(e*l.degreesToRadiansFactor);var a=new q.PointF2D;return a.x=t-o*Math.cos(n*l.degreesToRadiansFactor),a.y=-o*Math.sin(n*l.degreesToRadiansFactor),{leftControlPoint:s,rightControlPoint:a}},l.prototype.calculateAngles=function(t,e,n,i,r){var o=Math.atan(n)/l.degreesToRadiansFactor;0<n?o+=20:o-=20;var s=Math.atan(i)/l.degreesToRadiansFactor;i<0?s-=20:s+=20,t=Math.min(Math.max(t,o),r),e=Math.max(Math.min(e,s),-r)},l.degreesToRadiansFactor=Math.PI/180,l.k=.9,l.d=.2,l);function l(t){var e=o.call(this)||this;return e.staffEntries=[],e.slur=t,e}e.GraphicalSlur=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),r=(o.prototype.calculateCurvePointAtIndex=function(t){var e=Math.round(t);return e<0||o.bezierCurveStepSize<=e?new i.PointF2D:new i.PointF2D(o.oneMinusTPow3[e]*this.bezierStartPt.x+o.bezierFactorOne[e]*this.bezierStartControlPt.x+o.bezierFactorTwo[e]*this.bezierEndControlPt.x+o.tPow3[e]*this.bezierEndPt.x,o.oneMinusTPow3[e]*this.bezierStartPt.y+o.bezierFactorOne[e]*this.bezierStartControlPt.y+o.bezierFactorTwo[e]*this.bezierEndControlPt.y+o.tPow3[e]*this.bezierEndPt.y)},o.bezierCurveStepSize=1e3,o);function o(){o.tPow3=new Array(o.bezierCurveStepSize),o.oneMinusTPow3=new Array(o.bezierCurveStepSize),o.bezierFactorOne=new Array(o.bezierCurveStepSize),o.bezierFactorTwo=new Array(o.bezierCurveStepSize);for(var t=0;t<o.bezierCurveStepSize;t++){var e=t/o.bezierCurveStepSize;o.tPow3[t]=Math.pow(e,3),o.oneMinusTPow3[t]=Math.pow(1-e,3),o.bezierFactorOne[t]=3*Math.pow(1-e,2)*e,o.bezierFactorTwo[t]=3*(1-e)*Math.pow(e,2)}}e.GraphicalCurve=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var y=n(126),m=n(129),g=n(0),p=n(130),P=n(69),T=n(30),k=n(13),O=n(1),c=n(23),h=n(23),f=n(35),M=n(70),R=n(144),L=n(11),v=n(16),i=n(145),r=(Object.defineProperty(_.prototype,"CompleteNumberOfStaves",{get:function(){return this.completeNumberOfStaves},enumerable:!0,configurable:!0}),_.doCalculationsAfterDurationHasBeenSet=function(t){for(var e=0,n=t;e<n.length;e++)n[e].doCalculationsAfterDurationHasBeenSet()},_.prototype.createMusicSheet=function(t,e){try{return this._createMusicSheet(t,e)}catch(t){return void O.info("MusicSheetReader.CreateMusicSheet",t)}},_.prototype._removeFromArray=function(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},_.prototype.trimString=function(t){return t.replace(/^\s+|\s+$/g,"")},_.prototype._lastElement=function(t){return t[t.length-1]},_.prototype._createMusicSheet=function(t,e){var n=[],i=0;if(this.musicSheet=new y.MusicSheet,this.musicSheet.Path=e,void 0===t)throw new k.MusicSheetReadingException("Undefined root element");this.pushSheetLabels(t,e);var r=t.element("part-list");if(void 0===r)throw new k.MusicSheetReadingException("Undefined partListNode");var o=t.elements("part"),s=r.elements();this.initializeReading(s,o,n);var a=!0;this.currentFraction=new g.Fraction(0,1);var u=!1,l=t.element("identification");for(void 0!==l&&(l=l.element("encoding")),void 0!==l&&(l=l.element("software")),void 0!==l&&"Guitar Pro 5"===l.value&&(u=!0);a;){void 0!==this.currentMeasure&&this.currentMeasure.endsPiece&&(i=0),this.currentMeasure=new m.SourceMeasure(this.completeNumberOfStaves);for(var c=0,h=n;c<h.length;c++){var f=h[c];try{a=a&&f.readNextXmlMeasure(this.currentMeasure,this.currentFraction,u)}catch(t){var p=T.ITextTranslation.translateText("ReaderErrorMessages/InstrumentError","Error while reading instruments.");throw new k.MusicSheetReadingException(p,t)}}a&&(this.musicSheet.addMeasure(this.currentMeasure),this.checkIfRhythmInstructionsAreSetAndEqual(n),this.checkSourceMeasureForNullEntries(),i=this.setSourceMeasureDuration(n,i),_.doCalculationsAfterDurationHasBeenSet(n),this.currentMeasure.AbsoluteTimestamp=this.currentFraction.clone(),this.musicSheet.SheetErrors.finalizeMeasure(this.currentMeasure.MeasureNumber),this.currentFraction.Add(this.currentMeasure.Duration),this.previousMeasure=this.currentMeasure)}void 0!==this.repetitionInstructionReader&&(this.repetitionInstructionReader.removeRedundantInstructions(),void 0!==this.repetitionCalculator&&this.repetitionCalculator.calculateRepetitions(this.musicSheet,this.repetitionInstructionReader.repetitionInstructions)),this.musicSheet.checkForInstrumentWithNoVoice(),this.musicSheet.fillStaffList();for(var d=0,b=this.afterSheetReadingModules.length;d<b;++d)this.afterSheetReadingModules[d].calculate(this.musicSheet);return this.musicSheet},_.prototype.initializeReading=function(t,e,n){var i=this.createInstrumentGroups(t);this.completeNumberOfStaves=this.getCompleteNumberOfStavesFromXml(e),0!==e.length&&(this.repetitionInstructionReader.MusicSheet=this.musicSheet,this.currentFraction=new g.Fraction(0,1),this.currentMeasure=void 0,this.previousMeasure=void 0);for(var r=0,o=0,s=e;o<s.length;o++){var a=s[o],u=a.attribute("id");if(u){var l=i[u.value],c=a.elements("measure"),h=1;try{h=this.getInstrumentNumberOfStavesFromXml(a)}catch(t){var f=T.ITextTranslation.translateText("ReaderErrorMessages/InstrumentStavesNumberError","Invalid number of staves at instrument: ");this.musicSheet.SheetErrors.push(f+l.Name);continue}l.createStaves(h),n.push(new p.InstrumentReader(this.repetitionInstructionReader,c,l)),void 0!==this.repetitionInstructionReader&&(this.repetitionInstructionReader.xmlMeasureList[r]=c),r++}}},_.prototype.checkIfRhythmInstructionsAreSetAndEqual=function(t){for(var e=[],n=0;n<this.completeNumberOfStaves;n++)if(void 0!==this.currentMeasure.FirstInstructionsStaffEntries[n]){var i=this.currentMeasure.FirstInstructionsStaffEntries[n].Instructions[this.currentMeasure.FirstInstructionsStaffEntries[n].Instructions.length-1];i instanceof c.RhythmInstruction&&e.push(i)}for(var r=0,o=-1,s=0,a=e.length;s<a;++s)if((u=e[s]).Rhythm.RealValue>r){if(this.areRhythmInstructionsMixed(e)&&u.SymbolEnum!==h.RhythmSymbolEnum.NONE)continue;r=u.Rhythm.RealValue,o=e.indexOf(u)}if(0<e.length&&e.length<this.completeNumberOfStaves){var u=e[o].clone();for(n=0;n<this.completeNumberOfStaves;n++)void 0===this.currentMeasure.FirstInstructionsStaffEntries[n]||this._lastElement(this.currentMeasure.FirstInstructionsStaffEntries[n].Instructions)instanceof c.RhythmInstruction||(this.currentMeasure.FirstInstructionsStaffEntries[n].removeAllInstructionsOfTypeRhythmInstruction(),this.currentMeasure.FirstInstructionsStaffEntries[n].Instructions.push(u.clone())),void 0===this.currentMeasure.FirstInstructionsStaffEntries[n]&&(this.currentMeasure.FirstInstructionsStaffEntries[n]=new f.SourceStaffEntry(void 0,void 0),this.currentMeasure.FirstInstructionsStaffEntries[n].Instructions.push(u.clone()));for(s=0,a=t.length;s<a;++s)t[s].ActiveRhythm=u}if(0===e.length&&this.currentMeasure===this.musicSheet.SourceMeasures[0]){for(u=new c.RhythmInstruction(new g.Fraction(4,4,0,!1),h.RhythmSymbolEnum.NONE),n=0;n<this.completeNumberOfStaves;n++)void 0===this.currentMeasure.FirstInstructionsStaffEntries[n]?this.currentMeasure.FirstInstructionsStaffEntries[n]=new f.SourceStaffEntry(void 0,void 0):this.currentMeasure.FirstInstructionsStaffEntries[n].removeAllInstructionsOfTypeRhythmInstruction(),this.currentMeasure.FirstInstructionsStaffEntries[n].Instructions.push(u);for(s=0,a=t.length;s<a;++s)t[s].ActiveRhythm=u}for(s=0,a=e.length;s<a;++s){if((u=e[s]).Rhythm.RealValue<r&&this._lastElement(this.currentMeasure.FirstInstructionsStaffEntries[e.indexOf(u)].Instructions)instanceof c.RhythmInstruction){var l=this.currentMeasure.FirstInstructionsStaffEntries[e.indexOf(u)].Instructions;l[l.length-1]=e[o].clone()}Math.abs(u.Rhythm.RealValue-r)<1e-6&&u.SymbolEnum!==h.RhythmSymbolEnum.NONE&&this.areRhythmInstructionsMixed(e)&&(u.SymbolEnum=h.RhythmSymbolEnum.NONE)}},_.prototype.areRhythmInstructionsMixed=function(t){for(var e=1;e<t.length;e++)if(Math.abs(t[e].Rhythm.RealValue-t[0].Rhythm.RealValue)<1e-6&&t[e].SymbolEnum!==t[0].SymbolEnum)return!0;return!1},_.prototype.setSourceMeasureDuration=function(t,e){for(var n=new g.Fraction(0,1),i=[],r=0,o=t;r<o.length;r++){var s=o[r];i.push(s.MaxTieNoteFraction);var a=s.ActiveRhythm.Rhythm;n.lt(a)&&(n=new g.Fraction(a.Numerator,a.Denominator,0,!1))}for(var u=this.currentMeasure.calculateInstrumentsDuration(this.musicSheet,i),l=new g.Fraction(0,1),c=0,h=u;c<h.length;c++){var f=h[c];l.lt(f)&&(l=f)}g.Fraction.Equal(l,n)?this.checkFractionsForEquivalence(l,n):l.lt(n)&&(l=this.currentMeasure.reverseCheck(this.musicSheet,l),this.checkFractionsForEquivalence(l,n)),this.currentMeasure.ImplicitMeasure=this.checkIfMeasureIsImplicit(l,n),this.currentMeasure.ImplicitMeasure||e++,this.currentMeasure.Duration=l,this.currentMeasure.MeasureNumber=e;for(var p=0;p<u.length;p++)if(f=u[p],this.currentMeasure.ImplicitMeasure&&f!==l||!g.Fraction.Equal(f,n)&&!this.allInstrumentsHaveSameDuration(u,l))for(var d=this.musicSheet.getGlobalStaffIndexOfFirstStaff(this.musicSheet.Instruments[p]),b=0;b<this.musicSheet.Instruments[p].Staves.length;b++)if(!this.graphicalMeasureIsEmpty(d+b)){this.currentMeasure.setErrorInGraphicalMeasure(d+b,!0);var y=T.ITextTranslation.translateText("ReaderErrorMessages/MissingNotesError","Given Notes don't correspond to measure duration.");this.musicSheet.SheetErrors.pushMeasureError(y)}return e},_.prototype.checkFractionsForEquivalence=function(t,e){if(e.Denominator>t.Denominator){var n=e.Denominator/t.Denominator;t.expand(n)}},_.prototype.checkIfMeasureIsImplicit=function(t,e){return!(void 0!==this.previousMeasure||!t.lt(e))||void 0!==this.previousMeasure&&g.Fraction.plus(this.previousMeasure.Duration,t).Equals(e)},_.prototype.allInstrumentsHaveSameDuration=function(t,e){for(var n=0,i=0,r=t.length;i<r;++i)t[i].Equals(e)&&n++;return n===t.length&&e!==new g.Fraction(0,1)},_.prototype.graphicalMeasureIsEmpty=function(t){for(var e=0,n=0;n<this.currentMeasure.VerticalSourceStaffEntryContainers.length;n++)void 0===this.currentMeasure.VerticalSourceStaffEntryContainers[n].StaffEntries[t]&&e++;return e===this.currentMeasure.VerticalSourceStaffEntryContainers.length},_.prototype.checkSourceMeasureForNullEntries=function(){for(var t=this.currentMeasure.VerticalSourceStaffEntryContainers.length-1;0<=t;t--)for(var e=this.currentMeasure.VerticalSourceStaffEntryContainers[t].StaffEntries.length-1;0<=e;e--){if(void 0!==(a=this.currentMeasure.VerticalSourceStaffEntryContainers[t].StaffEntries[e]))for(var n=a.VoiceEntries.length-1;0<=n;n--){var i=a.VoiceEntries[n];0===i.Notes.length&&(this._removeFromArray(i.ParentVoice.VoiceEntries,i),this._removeFromArray(a.VoiceEntries,i))}void 0!==a&&0===a.VoiceEntries.length&&(this.currentMeasure.VerticalSourceStaffEntryContainers[t].StaffEntries[e]=void 0)}for(t=this.currentMeasure.VerticalSourceStaffEntryContainers.length-1;0<=t;t--){for(var r=0,o=0,s=this.currentMeasure.VerticalSourceStaffEntryContainers[t].StaffEntries.length;o<s;++o){var a;void 0===(a=this.currentMeasure.VerticalSourceStaffEntryContainers[t].StaffEntries[o])&&r++}r===this.currentMeasure.VerticalSourceStaffEntryContainers[t].StaffEntries.length&&this._removeFromArray(this.currentMeasure.VerticalSourceStaffEntryContainers,this.currentMeasure.VerticalSourceStaffEntryContainers[t])}},_.prototype.pushSheetLabels=function(t,e){this.readComposer(t),this.readTitle(t);try{void 0!==this.musicSheet.Title&&void 0!==this.musicSheet.Composer||this.readTitleAndComposerFromCredits(t)}catch(t){O.info("MusicSheetReader.pushSheetLabels","readTitleAndComposerFromCredits",t)}try{if(void 0===this.musicSheet.Title){var n=Math.max(0,e.lastIndexOf("/"),e.lastIndexOf("\\")),i=e.substr(n).split(".",1);this.musicSheet.Title=new v.Label(i[0])}}catch(t){O.info("MusicSheetReader.pushSheetLabels","read title from file name",t)}},_.prototype.presentAttrsWithValue=function(t,e){for(var n=0,i=t.attributes();n<i.length;n++)if(i[n].value===e)return!0;return!1},_.prototype.readComposer=function(t){var e=t.element("identification");if(void 0!==e)for(var n=e.elements("creator"),i=0,r=n.length;i<r;++i){var o=n[i];if(o.hasAttributes){if(this.presentAttrsWithValue(o,"composer")){this.musicSheet.Composer=new v.Label(this.trimString(o.value));continue}(this.presentAttrsWithValue(o,"lyricist")||this.presentAttrsWithValue(o,"poet"))&&(this.musicSheet.Lyricist=new v.Label(this.trimString(o.value)))}}},_.prototype.readTitleAndComposerFromCredits=function(t){var e=this.computeSystemYCoordinates(t);if(0!==e){for(var n=1,i=void 0,r=0,o=void 0,s=void 0,a=t.elements("credit"),u=0,l=a.length;u<l;++u){var c=a[u];if(!c.attribute("page"))return;if("1"===c.attribute("page").value){var h=void 0;if(void 0!==c){if(!(h=c.element("credit-words")).attribute("justify"))break;var f=h.attribute("justify").value,p=h.attribute("default-y").value,d=parseFloat(p);if(e<d){if(void 0===this.musicSheet.Title){var b=h.attribute("font-size").value,y=parseFloat(b);n<y&&(n=y,i=h.value)}if(void 0===this.musicSheet.Subtitle&&"right"!==f&&"left"!==f&&r<d&&(r=d,s&&(o=s),s=h.value),void 0===this.musicSheet.Composer||void 0===this.musicSheet.Lyricist)switch(f){case"right":this.musicSheet.Composer=new v.Label(this.trimString(h.value));break;case"left":this.musicSheet.Lyricist=new v.Label(this.trimString(h.value))}}}}}void 0===this.musicSheet.Title&&i&&(this.musicSheet.Title=new v.Label(this.trimString(i))),void 0===this.musicSheet.Subtitle&&o&&(this.musicSheet.Subtitle=new v.Label(this.trimString(o)))}},_.prototype.computeSystemYCoordinates=function(t){if(void 0===t.element("defaults"))return 0;var e=0,n=0;try{var i=t.element("defaults").element("page-layout").element("page-height").value;e=parseFloat(i)}catch(t){return O.info("MusicSheetReader.computeSystemYCoordinates(): couldn't find page height, not reading title/composer."),0}for(var r=!1,o=t.elements("part"),s=0,a=o.length;s<a;++s){for(var u=o[s].elements("measure"),l=0,c=u.length;l<c;++l){var h=u[l];if(void 0!==h.element("print")){for(var f=h.element("print").elements("system-layout"),p=0,d=f.length;p<d;++p){var b=f[p];if(void 0!==b.element("top-system-distance")){var y=b.element("top-system-distance").value;n=parseFloat(y),r=!0;break}}break}}if(r)break}return void 0!==t.element("defaults").element("system-layout")&&void 0!==t.element("defaults").element("system-layout").element("top-system-distance")&&(y=t.element("defaults").element("system-layout").element("top-system-distance").value,n=parseFloat(y)),0===n?0:e-n},_.prototype.readTitle=function(t){var e=t.element("work"),n=void 0;void 0!==e&&void 0!==(n=e.element("work-title"))&&n.value&&(this.musicSheet.Title=new v.Label(this.trimString(n.value)));var i=t.element("movement-title"),r="";if(void 0!==i&&(void 0===this.musicSheet.Title?this.musicSheet.Title=new v.Label(this.trimString(i.value)):r=this.trimString(i.value)),void 0!==e){var o=e.element("work-number");if(void 0!==o){var s=o.value;s&&(r=r?s:r+", "+s)}}r&&(this.musicSheet.Subtitle=new v.Label(r))},_.prototype.createInstrumentGroups=function(t){var e,n=0,i={};try{for(var r=t,o=0,s=r.length;o<s;++o){var a=r[o];if("score-part"===a.name){var u=a.attribute("id").value,l=new P.Instrument(n,u,this.musicSheet,e);n++;for(var c=a.elements(),h=0,f=c.length;h<f;++h){var p=c[h];try{if("part-name"===p.name)l.Name=p.value;else if("part-abbreviation"===p.name)l.PartAbbreviation=p.value;else if("score-instrument"===p.name){(b=new R.SubInstrument(l)).idString=p.firstAttribute.value,l.SubInstruments.push(b);var d=p.element("instrument-name");void 0!==d&&(b.name=d.value,b.setMidiInstrument(d.value))}else if("midi-instrument"===p.name){for(var b=l.getSubInstrument(p.firstAttribute.value),y=0,m=l.SubInstruments.length;y<m;++y){var g=l.SubInstruments[y];if(g.idString===p.value){b=g;break}}var v=p.elements();for(y=0,m=v.length;y<m;++y){var _=v[y];try{if("midi-channel"===_.name)10===parseInt(_.value,10)&&(l.MidiInstrumentId=L.MidiInstrument.Percussion);else if("midi-program"===_.name)0<l.SubInstruments.length&&l.MidiInstrumentId!==L.MidiInstrument.Percussion&&(b.midiInstrumentID=Math.max(0,parseInt(_.value,10)-1));else if("midi-unpitched"===_.name)b.fixedKey=Math.max(0,parseInt(_.value,10));else if("volume"===_.name)try{var S=parseFloat(_.value);b.volume=S/127}catch(t){O.debug("ExpressionReader.readExpressionParameters","read volume",t)}else if("pan"===_.name)try{S=parseFloat(_.value),b.pan=S/64}catch(t){O.debug("ExpressionReader.readExpressionParameters","read pan",t)}}catch(t){O.info("MusicSheetReader.createInstrumentGroups midi settings: ",t)}}}}catch(t){O.info("MusicSheetReader.createInstrumentGroups: ",t)}}0===l.SubInstruments.length&&(b=new R.SubInstrument(l),l.SubInstruments.push(b)),i[u]=l,void 0!==e?e.InstrumentalGroups.push(l):this.musicSheet.InstrumentalGroups.push(l),this.musicSheet.Instruments.push(l)}else if("part-group"===a.name&&"start"===a.attribute("type").value){var x=new M.InstrumentalGroup("group",this.musicSheet,e);void 0!==e?e.InstrumentalGroups.push(x):this.musicSheet.InstrumentalGroups.push(x),e=x}else if("part-group"===a.name&&"stop"===a.attribute("type").value&&void 0!==e){if(1===e.InstrumentalGroups.length){var w=e.InstrumentalGroups[0];void 0!==e.Parent?(e.Parent.InstrumentalGroups.push(w),this._removeFromArray(e.Parent.InstrumentalGroups,e)):(this.musicSheet.InstrumentalGroups.push(w),this._removeFromArray(this.musicSheet.InstrumentalGroups,e))}e=e.Parent}}}catch(t){var E=T.ITextTranslation.translateText("ReaderErrorMessages/InstrumentError","Error while reading Instruments");throw new k.MusicSheetReadingException(E,t)}for(o=0,s=this.musicSheet.Instruments.length;o<s;++o)(l=this.musicSheet.Instruments[o]).Name||(l.Name="Instr. "+l.IdString);return i},_.prototype.getCompleteNumberOfStavesFromXml=function(t){for(var e=0,n=0,i=t;n<i.length;n++){var r=i[n].elements("measure");if(0<r.length){var o=r[0];if(void 0!==o){var s=o.element("attributes");void 0!==s&&(s=s.element("staves")),void 0===s?e++:e+=parseInt(s.value,10)}}}if(isNaN(e)||e<=0){var a=T.ITextTranslation.translateText("ReaderErrorMessages/StaffError","Invalid number of staves.");throw new k.MusicSheetReadingException(a)}return e},_.prototype.getInstrumentNumberOfStavesFromXml=function(t){var e=0,n=t.element("measure");if(void 0!==n){var i=n.element("attributes"),r=void 0;void 0!==i&&(r=i.element("staves")),e=void 0===i||void 0===r?1:parseInt(r.value,10)}if(isNaN(e)||e<=0){var o=T.ITextTranslation.translateText("ReaderErrorMessages/StaffError","Invalid number of Staves.");throw new k.MusicSheetReadingException(o)}return e},_);function _(t){void 0===t&&(t=void 0),this.completeNumberOfStaves=0,this.afterSheetReadingModules=void 0===t?[]:t,this.repetitionInstructionReader=i.MusicSymbolModuleFactory.createRepetitionInstructionReader(),this.repetitionCalculator=i.MusicSymbolModuleFactory.createRepetitionCalculator()}e.MusicSheetReader=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function i(){}var r=n(0),o=n(196),s=n(127),a=n(50),u=n(199),l=n(4),c=n(22),h=n(1);e.PlaybackSettings=i;var f=(p.getIndexFromStaff=function(t){return t.idInMusicSheet},Object.defineProperty(p.prototype,"SourceMeasures",{get:function(){return this.sourceMeasures},set:function(t){this.sourceMeasures=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"Repetitions",{get:function(){return this.repetitions},set:function(t){this.repetitions=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"DynListStaves",{get:function(){return this.dynListStaves},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"TimestampSortedTempoExpressionsList",{get:function(){return this.timestampSortedTempoExpressionsList},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"TimestampSortedDynamicExpressionsList",{get:function(){return this.timestampSortedDynamicExpressionsList},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"InstrumentalGroups",{get:function(){return this.instrumentalGroups},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"Instruments",{get:function(){return this.instruments},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"SheetPlaybackSetting",{get:function(){return this.playbackSettings},set:function(t){this.playbackSettings=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"DrawErroneousMeasures",{get:function(){return this.drawErroneousMeasures},set:function(t){this.drawErroneousMeasures=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"HasBeenOpenedForTheFirstTime",{get:function(){return this.hasBeenOpenedForTheFirstTime},set:function(t){this.hasBeenOpenedForTheFirstTime=t},enumerable:!0,configurable:!0}),p.prototype.InitializeStartTempoInBPM=function(t){this.userStartTempoInBPM=t},Object.defineProperty(p.prototype,"DefaultStartTempoInBpm",{get:function(){return this.defaultStartTempoInBpm},set:function(t){this.defaultStartTempoInBpm=t,this.InitializeStartTempoInBPM(t)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"Path",{get:function(){return this.path},set:function(t){this.path=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"Staves",{get:function(){return this.staves},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"TitleString",{get:function(){return void 0!==this.title?this.title.text:""},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"SubtitleString",{get:function(){return void 0!==this.subtitle?this.subtitle.text:""},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"ComposerString",{get:function(){return void 0!==this.composer?this.composer.text:""},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"LyricistString",{get:function(){return void 0!==this.lyricist?this.lyricist.text:""},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"Title",{get:function(){return this.title},set:function(t){this.title=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"Subtitle",{get:function(){return this.subtitle},set:function(t){this.subtitle=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"Composer",{get:function(){return this.composer},set:function(t){this.composer=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"Lyricist",{get:function(){return this.lyricist},set:function(t){this.lyricist=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"Rules",{get:function(){return this.engravingRules},set:function(t){this.engravingRules=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"SheetErrors",{get:function(){return this.musicSheetErrors},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"SelectionStart",{get:function(){return this.selectionStart},set:function(t){this.selectionStart=t.clone(),this.currentEnrolledPosition=t.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"SelectionEnd",{get:function(){return this.selectionEnd},set:function(t){this.selectionEnd=t},enumerable:!0,configurable:!0}),p.prototype.addMeasure=function(t){this.sourceMeasures.push(t),t.measureListIndex=this.sourceMeasures.length-1},p.prototype.checkForInstrumentWithNoVoice=function(){for(var t=0,e=this.instruments.length;t<e;++t){var n=this.instruments[t];if(0===n.Voices.length){var i=new a.Voice(n,1);n.Voices.push(i)}}},p.prototype.getStaffFromIndex=function(t){return this.staves[t]},p.prototype.fillStaffList=function(){for(var t=0,e=0,n=this.instruments.length;e<n;++e)for(var i=this.instruments[e],r=0,o=i.Staves.length;r<o;++r){var s=i.Staves[r];s.idInMusicSheet=t,this.staves.push(s),t++}},Object.defineProperty(p.prototype,"MusicPartManager",{get:function(){return this.musicPartManager},set:function(t){this.musicPartManager=t},enumerable:!0,configurable:!0}),p.prototype.getCompleteNumberOfStaves=function(){for(var t=0,e=0,n=this.instruments.length;e<n;++e)t+=this.instruments[e].Staves.length;return t},p.prototype.getListOfMeasuresFromIndeces=function(t,e){for(var n=[],i=t;i<=e;i++)n.push(this.sourceMeasures[i]);return n},p.prototype.getNextSourceMeasure=function(t){var e=this.sourceMeasures.indexOf(t);return e===this.sourceMeasures.length-1?t:this.sourceMeasures[e+1]},p.prototype.getFirstSourceMeasure=function(){return this.sourceMeasures[0]},p.prototype.getLastSourceMeasure=function(){return this.sourceMeasures[this.sourceMeasures.length-1]},p.prototype.resetAllNoteStates=function(){for(var t=this.MusicPartManager.getIterator();!t.EndReached&&void 0!==t.CurrentVoiceEntries;){for(var e=0,n=t.CurrentVoiceEntries.length;e<n;++e)for(var i=t.CurrentVoiceEntries[e],r=0,o=i.Notes.length;r<o;++r)i.Notes[r].state=c.NoteState.Normal;t.moveToNext()}},p.prototype.getMusicSheetInstrumentIndex=function(t){return this.Instruments.indexOf(t)},p.prototype.getGlobalStaffIndexOfFirstStaff=function(t){for(var e=this.getMusicSheetInstrumentIndex(t),n=0,i=0;i<e;i++)n+=this.Instruments[i].Staves.length;return n},p.prototype.setRepetitionNewUserNumberOfRepetitions=function(t,e){for(var n=0,i=0;i<this.repetitions.length;i++)if(this.repetitions[i]instanceof s.Repetition){if(t===n){this.repetitions[i].UserNumberOfRepetitions=e;break}n++}},p.prototype.getRepetitionByIndex=function(t){for(var e=0,n=0;n<this.repetitions.length;n++)if(this.repetitions[n]instanceof s.Repetition){if(t===e)return this.repetitions[n];e++}},p.prototype.CompareTo=function(t){return this.Title.text.localeCompare(t.Title.text)},Object.defineProperty(p.prototype,"Errors",{get:function(){return this.musicSheetErrors.measureErrors},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"FirstMeasureNumber",{get:function(){try{return this.getFirstSourceMeasure().MeasureNumber}catch(t){return h.info("MusicSheet.FirstMeasureNumber: ",t),0}},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"LastMeasureNumber",{get:function(){try{return this.getLastSourceMeasure().MeasureNumber}catch(t){return h.info("MusicSheet.LastMeasureNumber: ",t),0}},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"CurrentEnrolledPosition",{get:function(){return this.currentEnrolledPosition.clone()},set:function(t){this.currentEnrolledPosition=t.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"Transpose",{get:function(){return this.transpose},set:function(t){this.transpose=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"FullNameString",{get:function(){return this.ComposerString+" "+this.TitleString},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"IdString",{get:function(){return this.idString},set:function(t){this.idString=t},enumerable:!0,configurable:!0}),p.prototype.getEnrolledSelectionStartTimeStampWorkaround=function(){var t=this.MusicPartManager.getIterator(this.SelectionStart);return r.Fraction.createFromFraction(t.CurrentEnrolledTimestamp)},Object.defineProperty(p.prototype,"SheetEndTimestamp",{get:function(){var t=this.getLastSourceMeasure();return r.Fraction.plus(t.AbsoluteTimestamp,t.Duration)},enumerable:!0,configurable:!0}),p.prototype.getSourceMeasureFromTimeStamp=function(t){for(var e=0,n=this.sourceMeasures.length;e<n;++e)for(var i=this.sourceMeasures[e],r=0,o=i.VerticalSourceStaffEntryContainers.length;r<o;++r){var s=i.VerticalSourceStaffEntryContainers[r];if(t.Equals(s.getAbsoluteTimestamp()))return i}return this.findSourceMeasureFromTimeStamp(t)},p.prototype.findSourceMeasureFromTimeStamp=function(t){for(var e=0,n=this.sourceMeasures;e<n.length;e++){var i=n[e];if(i.AbsoluteTimestamp.lte(t)&&t.lt(r.Fraction.plus(i.AbsoluteTimestamp,i.Duration)))return i}},p.prototype.getVisibleInstruments=function(){for(var t=[],e=0,n=this.Instruments.length;e<n;++e){var i=this.Instruments[e];0<i.Voices.length&&i.Voices[0].Visible&&t.push(i)}return t},p.defaultTitle="[kein Titel]",p);function p(){this.idString="kjgdfuilhsdaöoihfsvjh",this.sourceMeasures=[],this.repetitions=[],this.dynListStaves=[],this.timestampSortedDynamicExpressionsList=[],this.timestampSortedTempoExpressionsList=[],this.instrumentalGroups=[],this.instruments=[],this.musicPartManager=void 0,this.musicSheetErrors=new u.MusicSheetErrors,this.staves=[],this.transpose=0,this.defaultStartTempoInBpm=0,this.drawErroneousMeasures=!1,this.hasBeenOpenedForTheFirstTime=!1,this.currentEnrolledPosition=new r.Fraction(0,1),this.rules=l.EngravingRules.Rules,this.playbackSettings=new i,this.playbackSettings.rhythm=new r.Fraction(4,4,0,!1),this.userStartTempoInBPM=100,this.pageWidth=120,this.MusicPartManager=new o.MusicPartManager(this)}e.MusicSheet=f},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(128),a=n(0),u=n(75),l=n(1),c=(o=u.PartListEntry,r(h,o),Object.defineProperty(h.prototype,"BackwardJumpInstructions",{get:function(){return this.backwardJumpInstructions},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"EndingIndexDict",{get:function(){return this.endingIndexDict},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"EndingParts",{get:function(){return this.endingParts},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"Visibles",{get:function(){return this.visibles},set:function(t){this.visibles=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"DefaultNumberOfRepetitions",{get:function(){var t=2;return this.virtualOverallRepetition&&(t=1),Math.max(t,Object.keys(this.endingIndexDict).length,this.checkRepetitionForMultipleLyricVerses())},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"UserNumberOfRepetitions",{get:function(){return this.userNumberOfRepetitions},set:function(t){this.userNumberOfRepetitions=t,this.repetitonIterationOrder=[];for(var e=this.userNumberOfRepetitions-this.NumberOfEndings,n=1;n<=this.userNumberOfRepetitions;n++)n<=e?this.repetitonIterationOrder.push(1):this.repetitonIterationOrder.push(n-e)},enumerable:!0,configurable:!0}),h.prototype.getForwardJumpTargetForIteration=function(t){var e=this.repetitonIterationOrder[t-1];return void 0!==this.endingIndexDict[e]?this.endingIndexDict[e].part.StartIndex:-1},h.prototype.getBackwardJumpTarget=function(){return this.startMarker.measureIndex},h.prototype.SetEndingStartIndex=function(t,e){var n=new f(new s.SourceMusicPart(this.musicSheet2,e,e));this.endingParts.push(n);for(var i=0,r=t;i<r.length;i++){var o=r[i];try{(this.endingIndexDict[o]=n).endingIndices.push(o),this.numberOfEndings<o&&(this.numberOfEndings=o)}catch(t){l.error("Repetition: Exception.",t)}}},h.prototype.setEndingEndIndex=function(t,e){void 0!==this.endingIndexDict[t]&&this.endingIndexDict[t].part.setEndIndex(e)},Object.defineProperty(h.prototype,"NumberOfEndings",{get:function(){return this.numberOfEndings},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"FromWords",{get:function(){return this.fromWords},set:function(t){this.fromWords=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"AbsoluteTimestamp",{get:function(){return a.Fraction.createFromFraction(this.musicSheet2.SourceMeasures[this.startMarker.measureIndex].AbsoluteTimestamp)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"StartIndex",{get:function(){return this.startMarker.measureIndex},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"EndIndex",{get:function(){if(0===this.BackwardJumpInstructions.length)return this.StartIndex;var t=this.backwardJumpInstructions[this.backwardJumpInstructions.length-1].measureIndex;return void 0!==this.endingIndexDict[this.NumberOfEndings]&&(t=Math.max(this.endingIndexDict[this.NumberOfEndings].part.EndIndex,t)),t},enumerable:!0,configurable:!0}),h.prototype.checkRepetitionForMultipleLyricVerses=function(){for(var t=0,e=this.StartIndex,n=this.EndIndex,i=e;i<=n;i++)for(var r=this.musicSheet2.SourceMeasures[i],o=0;o<r.CompleteNumberOfStaves;o++)for(var s=0,a=r.VerticalSourceStaffEntryContainers[o].StaffEntries;s<a.length;s++){var u=a[s];if(void 0!==u){for(var l=0,c=0,h=u.VoiceEntries;c<h.length;c++){var f=h[c];l+=Object.keys(f.LyricsEntries).length}t=Math.max(t,l)}}return t},Object.defineProperty(h.prototype,"FirstSourceMeasureNumber",{get:function(){return this.getFirstSourceMeasure().MeasureNumber},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"LastSourceMeasureNumber",{get:function(){return this.getLastSourceMeasure().MeasureNumber},enumerable:!0,configurable:!0}),h);function h(t,e){var n=o.call(this,t)||this;return n.backwardJumpInstructions=[],n.endingParts=[],n.endingIndexDict={},n.userNumberOfRepetitions=0,n.visibles=[],n.fromWords=!1,n.repetitonIterationOrder=[],n.numberOfEndings=1,n.musicSheet2=t,n.virtualOverallRepetition=e,n}e.Repetition=c;var f=(p.prototype.ToString=function(){return this.endingIndices.join(", ")},p);function p(t){this.endingIndices=[],this.part=t}e.RepetitionEndingPart=f},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(75),a=n(0),u=(o=s.PartListEntry,r(l,o),Object.defineProperty(l.prototype,"MeasuresCount",{get:function(){return this.endIndex-this.startIndex+1},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"StartIndex",{get:function(){return this.startIndex},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"EndIndex",{get:function(){return this.endIndex},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ParentRepetition",{get:function(){return this.parentRepetition},set:function(t){this.parentRepetition=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"AbsoluteTimestamp",{get:function(){return a.Fraction.createFromFraction(this.musicSheet.SourceMeasures[this.startIndex].AbsoluteTimestamp)},enumerable:!0,configurable:!0}),l.prototype.setStartIndex=function(t){this.startIndex=t},l.prototype.setEndIndex=function(t){this.endIndex=t},l);function l(t,e,n){var i=o.call(this,t)||this;return i.musicSheet=t,i.startIndex=e,i.endIndex=n,i}e.SourceMusicPart=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=n(0),c=n(65),h=n(35),s=n(37),a=n(18),o=n(17),i=(Object.defineProperty(r.prototype,"MeasureNumber",{get:function(){return this.measureNumber},set:function(t){this.measureNumber=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"AbsoluteTimestamp",{get:function(){return this.absoluteTimestamp},set:function(t){this.absoluteTimestamp=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"CompleteNumberOfStaves",{get:function(){return this.completeNumberOfStaves},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Duration",{get:function(){return this.duration},set:function(t){this.duration=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ImplicitMeasure",{get:function(){return this.implicitMeasure},set:function(t){this.implicitMeasure=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"BreakSystemAfter",{get:function(){return this.breakSystemAfter},set:function(t){this.breakSystemAfter=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"StaffLinkedExpressions",{get:function(){return this.staffLinkedExpressions},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"TempoExpressions",{get:function(){return this.tempoExpressions},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"VerticalSourceStaffEntryContainers",{get:function(){return this.verticalSourceStaffEntryContainers},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"FirstInstructionsStaffEntries",{get:function(){return this.firstInstructionsStaffEntries},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"LastInstructionsStaffEntries",{get:function(){return this.lastInstructionsStaffEntries},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"FirstRepetitionInstructions",{get:function(){return this.firstRepetitionInstructions},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"LastRepetitionInstructions",{get:function(){return this.lastRepetitionInstructions},enumerable:!0,configurable:!0}),r.prototype.getErrorInMeasure=function(t){return this.graphicalMeasureErrors[t]},r.prototype.setErrorInGraphicalMeasure=function(t,e){this.graphicalMeasureErrors[t]=e},r.prototype.getNextMeasure=function(t){return t[this.measureListIndex+1]},r.prototype.getPreviousMeasure=function(t){if(1<this.measureListIndex)return t[this.measureListIndex-1]},Object.defineProperty(r.prototype,"VerticalMeasureList",{get:function(){return this.verticalMeasureList},set:function(t){this.verticalMeasureList=t},enumerable:!0,configurable:!0}),r.prototype.findOrCreateStaffEntry=function(t,e,n){for(var i,r=void 0,o=0,s=this.verticalSourceStaffEntryContainers;o<s.length;o++)if((u=s[o]).Timestamp.Equals(t)){i=u;break}if(void 0!==i)return void 0!==i.StaffEntries[e]?r=i.StaffEntries[e]:(r=new h.SourceStaffEntry(i,n),i.StaffEntries[e]=r),{createdNewContainer:!1,staffEntry:r};var a=this.verticalSourceStaffEntryContainers[this.verticalSourceStaffEntryContainers.length-1];if(0===this.verticalSourceStaffEntryContainers.length||a.Timestamp.lt(t)){var u=new c.VerticalSourceStaffEntryContainer(this,t.clone(),this.completeNumberOfStaves);this.verticalSourceStaffEntryContainers.push(u),r=new h.SourceStaffEntry(u,n),u.StaffEntries[e]=r}else for(var l=this.verticalSourceStaffEntryContainers.length-1;0<=l;l--){if(this.verticalSourceStaffEntryContainers[l].Timestamp.lt(t)){u=new c.VerticalSourceStaffEntryContainer(this,t.clone(),this.completeNumberOfStaves),this.verticalSourceStaffEntryContainers.splice(l+1,0,u),r=new h.SourceStaffEntry(u,n),u.StaffEntries[e]=r;break}if(0===l){u=new c.VerticalSourceStaffEntryContainer(this,t.clone(),this.completeNumberOfStaves),this.verticalSourceStaffEntryContainers.splice(l,0,u),r=new h.SourceStaffEntry(u,n),u.StaffEntries[e]=r;break}}return{createdNewContainer:!0,staffEntry:r}},r.prototype.findOrCreateVoiceEntry=function(t,e){for(var n=void 0,i=!1,r=0,o=t.VoiceEntries;r<o.length;r++){var s=o[r];if(s.ParentVoice===e){n=s;break}}return void 0===n&&(n=new a.VoiceEntry(t.Timestamp,e,t),t.VoiceEntries.push(n),i=!0),{createdVoiceEntry:i,voiceEntry:n}},r.prototype.getPreviousSourceStaffEntryFromIndex=function(t,e){for(var n=e-1;0<=n;n--)if(void 0!==this.verticalSourceStaffEntryContainers[n][t])return this.verticalSourceStaffEntryContainers[n][t]},r.prototype.getVerticalContainerIndexByTimestamp=function(t){for(var e=0,n=this.VerticalSourceStaffEntryContainers.length;e<n;++e)if(this.VerticalSourceStaffEntryContainers[e].Timestamp.Equals(t))return e;return-1},r.prototype.getVerticalContainerByTimestamp=function(t){for(var e=0,n=this.VerticalSourceStaffEntryContainers.length;e<n;++e){var i=this.VerticalSourceStaffEntryContainers[e];if(i.Timestamp.Equals(t))return i}},r.prototype.checkForEmptyVerticalContainer=function(t){for(var e=0,n=0;n<this.completeNumberOfStaves;n++)void 0===this.verticalSourceStaffEntryContainers[t][n]&&e++;e===this.completeNumberOfStaves&&this.verticalSourceStaffEntryContainers.splice(t,1)},r.prototype.reverseCheck=function(t,e){for(var n=new d.Fraction(0,1),i=[],r=0;r<t.Instruments.length;r++){for(var o=new d.Fraction(0,1),s=t.getGlobalStaffIndexOfFirstStaff(t.Instruments[r]),a=0;a<t.Instruments[r].Staves.length;a++){var u=this.getLastSourceStaffEntryForInstrument(s+a);if(void 0!==u&&!u.hasTie())for(var l=this.verticalSourceStaffEntryContainers.indexOf(u.VerticalContainerParent)-1;0<=l;l--){var c=this.verticalSourceStaffEntryContainers[l][s+a];if(void 0!==c&&c.hasTie()&&o.lt(d.Fraction.plus(c.Timestamp,c.calculateMaxNoteLength()))){o=d.Fraction.plus(c.Timestamp,c.calculateMaxNoteLength());break}}}i.push(o)}for(var h=0,f=i.length;h<f;++h){var p=i[h];n.lt(p)&&(n=p)}return d.Fraction.max(n,e)},r.prototype.calculateInstrumentsDuration=function(t,e){for(var n=[],i=0;i<t.Instruments.length;i++){for(var r=new d.Fraction(0,1),o=t.getGlobalStaffIndexOfFirstStaff(t.Instruments[i]),s=0;s<t.Instruments[i].Staves.length;s++){var a=this.getLastSourceStaffEntryForInstrument(o+s);void 0!==a&&void 0!==a.Timestamp&&r.lt(d.Fraction.plus(a.Timestamp,a.calculateMaxNoteLength()))&&(r=d.Fraction.plus(a.Timestamp,a.calculateMaxNoteLength()))}r.lt(e[i])&&(r=e[i]),n.push(r)}return n},r.prototype.getEntriesPerStaff=function(t){for(var e=[],n=0,i=this.VerticalSourceStaffEntryContainers;n<i.length;n++){var r=i[n].StaffEntries[t];void 0!==r&&e.push(r)}return e},r.prototype.hasBeginInstructions=function(){for(var t=0,e=this.FirstInstructionsStaffEntries.length;t<e;t++){var n=this.FirstInstructionsStaffEntries[t];if(void 0!==n&&0<n.Instructions.length)return!0}return!1},r.prototype.beginsWithLineRepetition=function(){for(var t=0,e=this.FirstRepetitionInstructions.length;t<e;++t){var n=this.FirstRepetitionInstructions[t];if(n.type===s.RepetitionInstructionEnum.StartLine)return!0;if(void 0!==n.parentRepetition&&n===n.parentRepetition.startMarker&&!n.parentRepetition.FromWords)return!0}return!1},r.prototype.endsWithLineRepetition=function(){for(var t=0,e=this.LastRepetitionInstructions.length;t<e;++t){var n=this.LastRepetitionInstructions[t];if(n.type===s.RepetitionInstructionEnum.BackJumpLine)return!0;var i=n.parentRepetition;if(void 0!==i&&!i.FromWords)for(var r=0,o=i.BackwardJumpInstructions.length;r<o;++r)if(n===i.BackwardJumpInstructions[r])return!0}return!1},r.prototype.beginsWithWordRepetition=function(){for(var t=0,e=this.FirstRepetitionInstructions.length;t<e;++t){var n=this.FirstRepetitionInstructions[t];if(void 0!==n.parentRepetition&&n===n.parentRepetition.startMarker&&n.parentRepetition.FromWords)return!0}return!1},r.prototype.endsWithWordRepetition=function(){for(var t=0,e=this.LastRepetitionInstructions.length;t<e;++t){var n=this.LastRepetitionInstructions[t],i=n.parentRepetition;if(void 0!==i&&i.FromWords){for(var r=0,o=i.BackwardJumpInstructions.length;r<o;++r)if(n===i.BackwardJumpInstructions[r])return!0;if(n===i.forwardJumpInstruction)return!0}}return!1},r.prototype.beginsRepetitionEnding=function(){for(var t=0,e=this.FirstRepetitionInstructions;t<e.length;t++){var n=e[t];if(n.type===s.RepetitionInstructionEnum.Ending&&n.alignment===s.AlignmentType.Begin)return!0}return!1},r.prototype.endsRepetitionEnding=function(){for(var t=0,e=this.LastRepetitionInstructions;t<e.length;t++){var n=e[t];if(n.type===s.RepetitionInstructionEnum.Ending&&n.alignment===s.AlignmentType.End)return!0}return!1},r.prototype.getKeyInstruction=function(t){if(void 0!==this.FirstInstructionsStaffEntries[t])for(var e=this.FirstInstructionsStaffEntries[t],n=0,i=e.Instructions.length;n<i;++n){var r=e.Instructions[n];if(r instanceof o.KeyInstruction)return r}},r.prototype.getLastSourceStaffEntryForInstrument=function(t){for(var e,n=this.verticalSourceStaffEntryContainers.length-1;0<=n&&!(e=this.verticalSourceStaffEntryContainers[n].StaffEntries[t]);n--);return e},r);function r(t){this.staffLinkedExpressions=[],this.tempoExpressions=[],this.verticalSourceStaffEntryContainers=[],this.graphicalMeasureErrors=[],this.firstRepetitionInstructions=[],this.lastRepetitionInstructions=[],this.completeNumberOfStaves=t,this.implicitMeasure=!1,this.breakSystemAfter=!1,this.endsPiece=!1,this.endingBarStyle="",this.firstInstructionsStaffEntries=new Array(t),this.lastInstructionsStaffEntries=new Array(t);for(var e=0;e<t;e++)this.graphicalMeasureErrors.push(!1),this.staffLinkedExpressions.push([])}e.SourceMeasure=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(131),v=n(35),U=n(11),H=n(17),Y=n(23),ot=n(0),st=n(30),at=n(13),z=n(11),X=n(23),K=n(17),ut=n(1),q=n(11),lt=n(139),i=n(140),r=n(143),ct=n(18),s=(Object.defineProperty(a.prototype,"ActiveKey",{get:function(){return this.activeKey},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"MaxTieNoteFraction",{get:function(){return this.maxTieNoteFraction},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"ActiveRhythm",{get:function(){return this.activeRhythm},set:function(t){this.activeRhythm=t},enumerable:!0,configurable:!0}),a.prototype.readNextXmlMeasure=function(t,e,n){if(this.currentXmlMeasureIndex>=this.xmlMeasureList.length)return!1;this.currentMeasure=t,this.inSourceMeasureInstrumentIndex=this.musicSheet.getGlobalStaffIndexOfFirstStaff(this.instrument),void 0!==this.repetitionInstructionReader&&this.repetitionInstructionReader.prepareReadingMeasure(t,this.currentXmlMeasureIndex);var i=new ot.Fraction(0,1),r=new ot.Fraction(0,1),o=!1;this.maxTieNoteFraction=new ot.Fraction(0,1);var s=!1;try{for(var a=this.xmlMeasureList[this.currentXmlMeasureIndex].elements(),u=0,l=a;u<l.length;u++){var c=l[u];if("note"===c.name){var h=!0;c.hasAttributes&&c.attribute("print-object")&&"no"===c.attribute("print-object").value&&(h=!1);var f=1;1<this.instrument.Staves.length&&void 0!==c.element("staff")&&(f=parseInt(c.element("staff").value,10),isNaN(f)&&(ut.debug("InstrumentReader.readNextXmlMeasure.get staff number"),f=1)),this.currentStaff=this.instrument.Staves[f-1];var p=void 0!==c.element("chord");if(void 0!==c.element("voice")){var d=parseInt(c.element("voice").value,10);this.currentVoiceGenerator=this.getOrCreateVoiceGenerator(d,f-1)}else p&&void 0!==this.currentVoiceGenerator||(this.currentVoiceGenerator=this.getOrCreateVoiceGenerator(1,f-1));var b=0,y=new ot.Fraction(0,1),m=2,g=void 0,v=!1;if(void 0!==c.element("duration")){if(b=parseInt(c.element("duration").value,10),isNaN(b)){var _=st.ITextTranslation.translateText("ReaderErrorMessages/NoteDurationError","Invalid Note Duration.");this.musicSheet.SheetErrors.pushMeasureError(_),ut.debug("InstrumentReader.readNextXmlMeasure",_);continue}if(y=new ot.Fraction(b,4*this.divisions),0===b?y=this.getNoteDurationFromTypeNode(c):g=this.getNoteDurationFromTypeNode(c),void 0!==c.element("time-modification")){y=this.getNoteDurationForTuplet(c);var S=c.element("time-modification");void 0!==S&&void 0!==S.element("normal-notes")&&(m=parseInt(S.element("normal-notes").value,10)),v=!0}}var x=void 0!==c.element("rest"),w=c.element("notations"),E=void 0!==c.element("grace")||0===b||p&&s,P=!1,T=!1;if(E){var k=c.element("grace");k&&k.attributes()&&k.attribute("slash")&&"yes"===k.attribute("slash").value&&(P=!0),y=this.getNoteDurationFromTypeNode(c);var O=c.element("notations");void 0!==O&&void 0!==O.element("slur")&&(T=!0)}var M=!1;void 0!==c.element("cue")&&(M=!0);var R=c.element("type");if(void 0!==R){var L=R.attribute("size");null!=L&&"cue"===L.value&&(M=!0)}var A=ct.StemDirectionType.Undefined,C=void 0,I=c.element("stem");if(void 0!==I){switch(I.value){case"down":A=ct.StemDirectionType.Down;break;case"up":A=ct.StemDirectionType.Up;break;case"double":A=ct.StemDirectionType.Double;break;case"none":A=ct.StemDirectionType.None;break;default:A=ct.StemDirectionType.Undefined}var N=I.attribute("color");N&&(C=this.parseXmlColor(N.value))}var F=0;if(void 0!==w){var B=w.element("ornaments");if(void 0!==B){var D=B.element("tremolo");if(void 0!==D){var j=D.attribute("type");if(j&&"single"===j.value){var V=parseInt(D.value,10);0<V&&(F=V)}}}}var G=void 0,W=c.element("notehead");if(W){var U=W.attribute("color");U&&(G=this.parseXmlColor(U.value))}var H=void 0,Y=c.attribute("color");Y&&(H=this.parseXmlColor(Y.value),void 0===G&&(G=H),void 0===C&&(C=H));var z=i.clone();p&&(z=r.clone()),this.currentStaffEntry=this.currentMeasure.findOrCreateStaffEntry(z,this.inSourceMeasureInstrumentIndex+f-1,this.currentStaff).staffEntry,(!this.currentVoiceGenerator.hasVoiceEntry()||!p&&!E&&!s||E&&!s||E&&!p||!E&&s)&&this.currentVoiceGenerator.createVoiceEntry(z,this.currentStaffEntry,!x&&!E,E,P,T),E||p||(r=i.clone(),i.Add(y)),p&&void 0!==this.currentStaffEntry&&this.currentStaffEntry.ParentStaff!==this.currentStaff&&(this.currentStaffEntry=this.currentVoiceGenerator.checkForStaffEntryLink(this.inSourceMeasureInstrumentIndex+f-1,this.currentStaff,this.currentStaffEntry,this.currentMeasure));var X=void 0!==this.currentStaffEntry&&void 0!==this.currentStaffEntry.Timestamp&&this.currentStaffEntry.Timestamp.Equals(new ot.Fraction(0,1))&&!this.currentStaffEntry.hasNotes();this.saveAbstractInstructionList(this.instrument.Staves.length,X),void 0!==this.openChordSymbolContainer&&(this.currentStaffEntry.ChordContainer=this.openChordSymbolContainer,this.openChordSymbolContainer=void 0),this.activeRhythm,v||E||(y=new ot.Fraction(b,4*this.divisions)),this.currentVoiceGenerator.read(c,y,g,m,x,this.currentStaffEntry,this.currentMeasure,e,this.maxTieNoteFraction,p,n,h,M,A,F,C,G),void 0===w||void 0===w.element("dynamics")||void 0!==(tt=this.expressionReaders[this.readExpressionStaffNumber(c)-1])&&(tt.readExpressionParameters(c,this.instrument,this.divisions,i,r,this.currentMeasure.MeasureNumber,!1),tt.read(c,this.currentMeasure,r)),s=E}else if("attributes"===c.name){var K=c.element("divisions");if(void 0!==K&&(this.divisions=parseInt(K.value,10),isNaN(this.divisions))){if(_=st.ITextTranslation.translateText("ReaderErrorMessages/DivisionError","Invalid divisions value at Instrument: "),ut.debug("InstrumentReader.readNextXmlMeasure",_),this.divisions=this.readDivisionsFromNotes(),!(0<this.divisions))throw o=!0,new at.MusicSheetReadingException(_+this.instrument.Name);this.musicSheet.SheetErrors.push(_+this.instrument.Name)}if(void 0===c.element("divisions")&&0===this.divisions&&0===this.currentXmlMeasureIndex){if(_=st.ITextTranslation.translateText("ReaderErrorMessages/DivisionError","Invalid divisions value at Instrument: "),this.divisions=this.readDivisionsFromNotes(),!(0<this.divisions))throw o=!0,new at.MusicSheetReadingException(_+this.instrument.Name);this.musicSheet.SheetErrors.push(_+this.instrument.Name)}this.addAbstractInstruction(c,n),i.Equals(new ot.Fraction(0,1))&&this.isAttributesNodeAtBeginOfMeasure(this.xmlMeasureList[this.currentXmlMeasureIndex],c)&&this.saveAbstractInstructionList(this.instrument.Staves.length,!0),this.isAttributesNodeAtEndOfMeasure(this.xmlMeasureList[this.currentXmlMeasureIndex],c)&&this.saveClefInstructionAtEndOfMeasure()}else if("forward"===c.name){var q=parseInt(c.element("duration").value,10);i.Add(new ot.Fraction(q,4*this.divisions))}else if("backup"===c.name){var J=parseInt(c.element("duration").value,10);i.Sub(new ot.Fraction(J,4*this.divisions)),i.IsNegative()&&(i=new ot.Fraction(0,1)),r.Sub(new ot.Fraction(J,4*this.divisions)),r.IsNegative()&&(r=new ot.Fraction(0,1))}else if("direction"===c.name){var Q=c.element("direction-type"),Z=Math.min(1,i.RealValue);void 0!==this.activeRhythm&&void 0!==this.activeRhythm.Rhythm&&(Z/=this.activeRhythm.Rhythm.RealValue);var $=!1;if(void 0!==this.repetitionInstructionReader&&($=this.repetitionInstructionReader.handleRepetitionInstructionsFromWordsOrSymbols(Q,Z)),!$){var tt=this.expressionReaders[0],et=this.readExpressionStaffNumber(c)-1;et<this.expressionReaders.length&&(tt=this.expressionReaders[et]),void 0!==tt&&(void 0!==Q.element("octave-shift")&&(tt.readExpressionParameters(c,this.instrument,this.divisions,i,r,this.currentMeasure.MeasureNumber,!0),tt.addOctaveShift(c,this.currentMeasure,r.clone())),tt.readExpressionParameters(c,this.instrument,this.divisions,i,r,this.currentMeasure.MeasureNumber,!1),tt.read(c,this.currentMeasure,i))}}else"barline"===c.name?(void 0!==this.repetitionInstructionReader&&this.repetitionInstructionReader.handleLineRepetitionInstructions(c,!1),void 0!==c.element("bar-style")&&(this.currentMeasure.endingBarStyle=c.element("bar-style").value)):"sound"===c.name||"harmony"===c.name&&(this.openChordSymbolContainer=lt.ChordSymbolReader.readChordSymbol(c,this.musicSheet,this.activeKey))}for(var nt in this.voiceGeneratorsDict)this.voiceGeneratorsDict.hasOwnProperty(nt)&&this.voiceGeneratorsDict[nt].checkForOpenBeam();if(this.currentXmlMeasureIndex===this.xmlMeasureList.length-1){for(var it=0;it<this.instrument.Staves.length;it++)this.activeClefsHaveBeenInitialized[it]||this.createDefaultClefInstruction(this.musicSheet.getGlobalStaffIndexOfFirstStaff(this.instrument)+it);for(this.activeKeyHasBeenInitialized||this.createDefaultKeyInstruction(),it=0;it<this.expressionReaders.length;it++){var rt=this.expressionReaders[it];void 0!==rt&&rt.checkForOpenExpressions(this.currentMeasure,i)}}}catch(t){if(o)throw new at.MusicSheetReadingException(t.Message);_=st.ITextTranslation.translateText("ReaderErrorMessages/MeasureError","Error while reading Measure."),this.musicSheet.SheetErrors.pushMeasureError(_),ut.debug("InstrumentReader.readNextXmlMeasure",_,t)}return this.previousMeasure=this.currentMeasure,this.currentXmlMeasureIndex+=1,!0},a.prototype.parseXmlColor=function(t){if(t)return 7===t.length?t:9===t.length?"#"+t.substr(3):void 0},a.prototype.doCalculationsAfterDurationHasBeenSet=function(){for(var t in this.voiceGeneratorsDict)this.voiceGeneratorsDict.hasOwnProperty(t)&&this.voiceGeneratorsDict[t].checkOpenTies()},a.prototype.getOrCreateVoiceGenerator=function(t,e){var n=this.instrument.Staves[e],i=this.voiceGeneratorsDict[t];if(void 0!==i)-1===n.Voices.indexOf(i.GetVoice)&&n.Voices.push(i.GetVoice);else{var r=this.staffMainVoiceGeneratorDict[e];void 0!==r?(i=new o.VoiceGenerator(this.instrument,t,this.slurReader,r.GetVoice),n.Voices.push(i.GetVoice),this.voiceGeneratorsDict[t]=i):(i=new o.VoiceGenerator(this.instrument,t,this.slurReader),n.Voices.push(i.GetVoice),this.voiceGeneratorsDict[t]=i,this.staffMainVoiceGeneratorDict[e]=i)}return i},a.prototype.createExpressionGenerators=function(t){this.expressionReaders=new Array(t);for(var e=0;e<t;e++)this.expressionReaders[e]=new i.ExpressionReader(this.musicSheet,this.instrument,e+1)},a.prototype.createDefaultClefInstruction=function(t){var e;e=0<this.musicSheet.SourceMeasures.length?this.musicSheet.SourceMeasures[0]:this.currentMeasure;var n,i=new U.ClefInstruction(z.ClefEnum.G,0,2);void 0===e.FirstInstructionsStaffEntries[t]?(n=new v.SourceStaffEntry(void 0,void 0),e.FirstInstructionsStaffEntries[t]=n):(n=e.FirstInstructionsStaffEntries[t]).removeFirstInstructionOfTypeClefInstruction(),(i.Parent=n).Instructions.splice(0,0,i)},a.prototype.createDefaultKeyInstruction=function(){var t;t=0<this.musicSheet.SourceMeasures.length?this.musicSheet.SourceMeasures[0]:this.currentMeasure;for(var e=new H.KeyInstruction(void 0,0,K.KeyEnum.major),n=this.inSourceMeasureInstrumentIndex;n<this.inSourceMeasureInstrumentIndex+this.instrument.Staves.length;n++)if(void 0===t.FirstInstructionsStaffEntries[n]){var i=new v.SourceStaffEntry(void 0,void 0);t.FirstInstructionsStaffEntries[n]=i,(e.Parent=i).Instructions.push(e)}else i=t.FirstInstructionsStaffEntries[n],(e.Parent=i).removeFirstInstructionOfTypeKeyInstruction(),i.Instructions[0]instanceof U.ClefInstruction?i.Instructions.splice(1,0,e):i.Instructions.splice(0,0,e)},a.prototype.isAttributesNodeAtBeginOfMeasure=function(t,e){var n=t.elements(),i=n.indexOf(e);if(0<i&&"backup"===n[i-1].name)return!0;for(var r=-1,o=0;o<n.length;o++)if("note"===n[o].name){r=o;break}return i<r&&0<r||r<0},a.prototype.isAttributesNodeAtEndOfMeasure=function(t,e){for(var n=t.elements().slice(),i=0,r=0;r<n.length;r++)if(n[r]===e){i=r;break}var o=0;for(r=i;r<n.length;r++)if("note"===n[r].name){o=r;break}return o<i},a.prototype.getNoteDurationFromTypeNode=function(t){var e=t.element("type");if(void 0===e)return new ot.Fraction(0,4*this.divisions);var n=e.value;return this.currentVoiceGenerator.getNoteDurationFromType(n)},a.prototype.addAbstractInstruction=function(t,e){if(void 0===t.element("divisions")||1!==t.elements().length){var n=t.element("transpose");if(void 0!==n){var i=n.element("chromatic");void 0!==i&&(this.instrument.PlaybackTranspose=parseInt(i.value,10))}var r,o=t.elements("clef");if(0<o.length)for(var s=0,a=o.length;s<a;++s){var u=o[s],l=z.ClefEnum.G,c=2,h=1,f=0,p=u.element("line");if(void 0!==p)try{c=parseInt(p.value,10)}catch(t){r=st.ITextTranslation.translateText("ReaderErrorMessages/ClefLineError","Invalid clef line given -> using default clef line."),this.musicSheet.SheetErrors.pushMeasureError(r),c=2,ut.debug("InstrumentReader.addAbstractInstruction",r,t)}var d=u.element("sign");if(void 0!==d)try{l=z.ClefEnum[d.value],U.ClefInstruction.isSupportedClef(l)||(l===z.ClefEnum.TAB&&e&&(f=-1),r=st.ITextTranslation.translateText("ReaderErrorMessages/ClefError","Unsupported clef found -> using default clef."),this.musicSheet.SheetErrors.pushMeasureError(r),l=z.ClefEnum.G,c=2)}catch(t){r=st.ITextTranslation.translateText("ReaderErrorMessages/ClefError","Invalid clef found -> using default clef."),this.musicSheet.SheetErrors.pushMeasureError(r),l=z.ClefEnum.G,c=2,ut.debug("InstrumentReader.addAbstractInstruction",r,t)}var b=u.element("clef-octave-change");if(void 0!==b)try{f=parseInt(b.value,10)}catch(t){r=st.ITextTranslation.translateText("ReaderErrorMessages/ClefOctaveError","Invalid clef octave found -> using default clef octave."),this.musicSheet.SheetErrors.pushMeasureError(r),f=0}if(u.hasAttributes&&"number"===u.attributes()[0].name)try{h=parseInt(u.attributes()[0].value,10)}catch(t){r=st.ITextTranslation.translateText("ReaderErrorMessages/ClefError","Invalid clef found -> using default clef."),this.musicSheet.SheetErrors.pushMeasureError(r),h=1}var y=new U.ClefInstruction(l,f,c);this.abstractInstructions.push([h,y])}if(void 0!==t.element("key")&&this.instrument.MidiInstrumentId!==q.MidiInstrument.Percussion){var m=0,g=t.element("key").element("fifths");if(void 0!==g)try{m=parseInt(g.value,10)}catch(t){r=st.ITextTranslation.translateText("ReaderErrorMessages/KeyError","Invalid key found -> set to default."),this.musicSheet.SheetErrors.pushMeasureError(r),m=0,ut.debug("InstrumentReader.addAbstractInstruction",r,t)}var v=K.KeyEnum.none,_=t.element("key");if(void 0!==_&&(_=_.element("mode")),void 0!==_)try{v=K.KeyEnum[_.value]}catch(t){r=st.ITextTranslation.translateText("ReaderErrorMessages/KeyError","Invalid key found -> set to default."),this.musicSheet.SheetErrors.pushMeasureError(r),v=K.KeyEnum.major,ut.debug("InstrumentReader.addAbstractInstruction",r,t)}var S=new H.KeyInstruction(void 0,m,v);this.abstractInstructions.push([1,S])}if(void 0!==t.element("time")){var x=t.element("time"),w=X.RhythmSymbolEnum.NONE,E=!0;if(void 0!==x&&x.hasAttributes){var P=x.attribute("symbol");P&&("common"===P.value?w=X.RhythmSymbolEnum.COMMON:"cut"===P.value&&(w=X.RhythmSymbolEnum.CUT));var T=x.attribute("print-object");T&&"no"===T.value&&(E=!1)}var k=0,O=0,M=void 0!==x&&void 0!==x.element("senza-misura"),R=t.elements("time"),L=[],A=[];for(s=0,a=R.length;s<a;++s){var C=R[s];L.push.apply(L,C.elements("beats")),A.push.apply(A,C.elements("beat-type"))}if(M)this.abstractInstructions.push([1,new Y.RhythmInstruction(new ot.Fraction(4,4,0,!1),X.RhythmSymbolEnum.NONE)]);else{try{if(void 0!==L&&0<L.length&&void 0!==A&&L.length===A.length){for(var I=L.length,N=new Array(I),F=0,B=0;B<I;B++){var D,j=L[B].value,V=0;if(-1!==j.indexOf("+")){var G=j.split("+");for(s=0,a=G.length;s<a;++s)V+=parseInt(G[s],10)}else V=parseInt(j,10);D=parseInt(A[B].value,10),F=Math.max(F,D),N[B]=new ot.Fraction(V,D,0,!1)}for(B=0;B<I;B++)N[B].Denominator===F?k+=N[B].Numerator:k+=F/N[B].Denominator*N[B].Numerator;O=F}else k=parseInt(t.element("time").element("beats").value,10),O=parseInt(t.element("time").element("beat-type").value,10)}catch(t){r=st.ITextTranslation.translateText("ReaderErrorMessages/RhythmError","Invalid rhythm found -> set to default."),this.musicSheet.SheetErrors.pushMeasureError(r),O=k=4,ut.debug("InstrumentReader.addAbstractInstruction",r,t)}var W=new Y.RhythmInstruction(new ot.Fraction(k,O,0,!1),w);W.PrintObject=E,this.abstractInstructions.push([1,W])}}}},a.prototype.saveAbstractInstructionList=function(t,e){for(var n=this.abstractInstructions.length-1;0<=n;n--){var i=this.abstractInstructions[n],r=i[0],o=i[1];if(o instanceof U.ClefInstruction){var s=o;if(0===this.currentXmlMeasureIndex||r<=this.activeClefs.length&&s!==this.activeClefs[r-1])if(e||void 0===this.currentStaffEntry||this.currentStaffEntry.hasNotes()||r-1!==this.instrument.Staves.indexOf(this.currentStaffEntry.ParentStaff)){if(e){var a=void 0;if(void 0!==this.currentMeasure){var u=s,l=this.inSourceMeasureInstrumentIndex+r-1,c=this.currentMeasure.FirstInstructionsStaffEntries[l];if(0===this.currentXmlMeasureIndex)if(void 0===c)a=new v.SourceStaffEntry(void 0,void 0),this.currentMeasure.FirstInstructionsStaffEntries[l]=a,(u.Parent=a).Instructions.push(u),this.activeClefsHaveBeenInitialized[r-1]=!0;else if(void 0===this.currentMeasure.FirstInstructionsStaffEntries[l]||c.Instructions[0]instanceof U.ClefInstruction){var h=new v.SourceStaffEntry(void 0,void 0);this.currentMeasure.LastInstructionsStaffEntries[l]=h,(u.Parent=h).Instructions.push(u)}else a=c,(u.Parent=a).removeFirstInstructionOfTypeClefInstruction(),a.Instructions.splice(0,0,u),this.activeClefsHaveBeenInitialized[r-1]=!0;else if(this.activeClefsHaveBeenInitialized[r-1])h=new v.SourceStaffEntry(void 0,void 0),this.previousMeasure.LastInstructionsStaffEntries[l]=h,(u.Parent=h).Instructions.push(u);else{var f=this.musicSheet.SourceMeasures[0];void 0===f.FirstInstructionsStaffEntries[l]?a=new v.SourceStaffEntry(void 0,void 0):(a=f.FirstInstructionsStaffEntries[l]).removeFirstInstructionOfTypeClefInstruction(),(u.Parent=a).Instructions.splice(0,0,u),this.activeClefsHaveBeenInitialized[r-1]=!0}this.activeClefs[r-1]=s,this.abstractInstructions.splice(n,1)}}}else(u=s).Parent=this.currentStaffEntry,this.currentStaffEntry.removeFirstInstructionOfTypeClefInstruction(),this.currentStaffEntry.Instructions.push(u),this.activeClefs[r-1]=s,this.abstractInstructions.splice(n,1);else r<=this.activeClefs.length&&s===this.activeClefs[r-1]&&this.abstractInstructions.splice(n,1)}if(o instanceof H.KeyInstruction){var p=o;if(void 0===this.activeKey||this.activeKey.Key!==p.Key){this.activeKey=p,this.abstractInstructions.splice(n,1);var d=void 0;if(void 0!==(d=this.activeKeyHasBeenInitialized?this.currentMeasure:(this.activeKeyHasBeenInitialized=!0,0<this.currentXmlMeasureIndex?this.musicSheet.SourceMeasures[0]:this.currentMeasure)))for(var b=this.inSourceMeasureInstrumentIndex;b<this.inSourceMeasureInstrumentIndex+t;b++){var y=p;void 0===d.FirstInstructionsStaffEntries[b]?(a=new v.SourceStaffEntry(void 0,void 0),d.FirstInstructionsStaffEntries[b]=a,(y.Parent=a).Instructions.push(y)):(a=d.FirstInstructionsStaffEntries[b],(y.Parent=a).removeFirstInstructionOfTypeKeyInstruction(),0===a.Instructions.length?a.Instructions.push(y):a.Instructions[0]instanceof U.ClefInstruction?a.Instructions.splice(1,0,y):a.Instructions.splice(0,0,y))}}else this.abstractInstructions.splice(n,1)}if(o instanceof Y.RhythmInstruction){var m=o;if(void 0===this.activeRhythm||this.activeRhythm!==m){if(this.activeRhythm=m,this.abstractInstructions.splice(n,1),void 0!==this.currentMeasure)for(b=this.inSourceMeasureInstrumentIndex;b<this.inSourceMeasureInstrumentIndex+t;b++){var g=m;(a=void 0)===this.currentMeasure.FirstInstructionsStaffEntries[b]?(a=new v.SourceStaffEntry(void 0,void 0),this.currentMeasure.FirstInstructionsStaffEntries[b]=a):(a=this.currentMeasure.FirstInstructionsStaffEntries[b]).removeFirstInstructionOfTypeRhythmInstruction(),(g.Parent=a).Instructions.push(g)}}else this.abstractInstructions.splice(n,1)}}},a.prototype.saveClefInstructionAtEndOfMeasure=function(){for(var t=this.abstractInstructions.length-1;0<=t;t--){var e=this.abstractInstructions[t][0],n=this.abstractInstructions[t][1];if(n instanceof U.ClefInstruction){var i=n;if(void 0===this.activeClefs[e-1]||i.ClefType!==this.activeClefs[e-1].ClefType||i.ClefType===this.activeClefs[e-1].ClefType&&i.Line!==this.activeClefs[e-1].Line){var r=new v.SourceStaffEntry(void 0,void 0);this.currentMeasure.LastInstructionsStaffEntries[this.inSourceMeasureInstrumentIndex+e-1]=r;var o=i;(o.Parent=r).Instructions.push(o),this.activeClefs[e-1]=i,this.abstractInstructions.splice(t,1)}}}},a.prototype.getNoteDurationForTuplet=function(t){var e=new ot.Fraction(0,1),n=this.getNoteDurationFromTypeNode(t);if(void 0!==t.element("time-modification")){var i=t.element("time-modification");if(void 0!==i&&void 0!==i.element("actual-notes")&&void 0!==i.element("normal-notes")){var r=i.element("actual-notes"),o=i.element("normal-notes");if(void 0!==r&&void 0!==o){var s=parseInt(r.value,10),a=parseInt(o.value,10);e=new ot.Fraction(a*n.Numerator,s*n.Denominator)}}}return e},a.prototype.readExpressionStaffNumber=function(t){var e=1;if(void 0!==t.element("staff")){var n=t.element("staff");if(void 0!==n)try{e=parseInt(n.value,10)}catch(t){var i=st.ITextTranslation.translateText("ReaderErrorMessages/ExpressionStaffError","Invalid Expression staff number -> set to default.");this.musicSheet.SheetErrors.pushMeasureError(i),e=1,ut.debug("InstrumentReader.readExpressionStaffNumber",i,t)}}return e},a.prototype.readDivisionsFromNotes=function(){for(var t=0,e=this.currentXmlMeasureIndex,n=!1;!n;){for(var i=this.xmlMeasureList[e].elements(),r=0,o=i.length;r<o;++r){var s=i[r];if("note"===s.name&&void 0===s.element("time-modification")){var a=s.element("duration"),u=s.element("type");if(void 0!==a&&void 0!==u){var l=u.value,c=0;try{c=parseInt(a.value,10)}catch(t){ut.debug("InstrumentReader.readDivisionsFromNotes",t);continue}switch(l){case"1024th":t=c/4*1024;break;case"512th":t=c/4*512;break;case"256th":t=c/4*256;break;case"128th":t=c/4*128;break;case"64th":t=c/4*64;break;case"32nd":t=c/4*32;break;case"16th":t=c/4*16;break;case"eighth":t=c/4*8;break;case"quarter":t=c/4*4;break;case"half":t=c/4*2;break;case"whole":t=c/4;break;case"breve":t=c/4/2;break;case"long":t=c/4/4;break;case"maxima":t=c/4/8}}}if(0<t){n=!0;break}}if(0===t&&++e===this.xmlMeasureList.length){var h=st.ITextTranslation.translateText("ReaderErrorMEssages/DivisionsError","Invalid divisions value at Instrument: ");throw new at.MusicSheetReadingException(h+this.instrument.Name)}}return t},a);function a(t,e,n){this.voiceGeneratorsDict={},this.staffMainVoiceGeneratorDict={},this.divisions=0,this.currentXmlMeasureIndex=0,this.activeKeyHasBeenInitialized=!1,this.abstractInstructions=[],this.repetitionInstructionReader=t,this.xmlMeasureList=e,this.musicSheet=n.GetMusicSheet,this.instrument=n,this.activeClefs=new Array(n.Staves.length),this.activeClefsHaveBeenInitialized=new Array(n.Staves.length);for(var i=0;i<n.Staves.length;i++)this.activeClefsHaveBeenInitialized[i]=!1;this.createExpressionGenerators(n.Staves.length),this.slurReader=new r.SlurReader(this.musicSheet)}e.InstrumentReader=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(43),o=n(50),s=n(18),C=n(48),a=n(35),f=n(132),c=n(133),g=n(134),I=n(0),N=n(30),u=n(135),F=n(13),B=n(2),D=n(2),l=n(136),j=n(1),V=n(2),h=n(28),p=n(137),G=n(71),L=n(138),i=(Object.defineProperty(d.prototype,"GetVoice",{get:function(){return this.voice},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"OctaveShift",{get:function(){return this.currentOctaveShift},set:function(t){this.currentOctaveShift=t},enumerable:!0,configurable:!0}),d.prototype.createVoiceEntry=function(t,e,n,i,r,o){void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===o&&(o=!1),this.currentVoiceEntry=new s.VoiceEntry(t.clone(),this.voice,e,i,r,o),n&&this.voice.VoiceEntries.push(this.currentVoiceEntry),-1===e.VoiceEntries.indexOf(this.currentVoiceEntry)&&e.VoiceEntries.push(this.currentVoiceEntry)},d.prototype.read=function(t,e,n,i,r,o,s,a,u,l,c,h,f,p,d,b,y){this.currentStaffEntry=o,this.currentMeasure=s;try{this.currentNote=r?this.addRestNote(e,h,f,y):this.addSingleNote(t,e,n,i,l,c,h,f,p,d,b,y);var m=t.elements("lyric");void 0!==this.lyricsReader&&void 0!==m&&(this.lyricsReader.addLyricEntry(m,this.currentVoiceEntry),this.voice.Parent.HasLyrics=!0);var g=!1,v=t.element("notations");if(void 0!==v){void 0!==this.articulationReader&&this.readArticulations(v,this.currentVoiceEntry);var _=v.elements("slur");void 0!==this.slurReader&&0<_.length&&!this.currentNote.ParentVoiceEntry.IsGrace&&this.slurReader.addSlur(_,this.currentNote);var S=v.elements("tuplet");0<S.length&&(this.openTupletNumber=this.addTuplet(t,S),g=!0);var x=v.element("arpeggiate");if(void 0!==x&&!this.currentVoiceEntry.IsGrace){var w=void 0;if(void 0!==this.currentVoiceEntry.Arpeggio)w=this.currentVoiceEntry.Arpeggio;else{var E=void 0,P=x.attribute("direction");if(null!==P)switch(P.value){case"up":E=4;break;case"down":E=3;break;default:E=7}w=new L.Arpeggio(this.currentVoiceEntry,E),this.currentVoiceEntry.Arpeggio=w}w.addNote(this.currentNote)}var T=v.elements("tied");0<T.length&&this.addTie(T,a,u);var k=this.openTieDict;for(var O in k)if(k.hasOwnProperty(O)){var M=k[O];I.Fraction.plus(M.StartNote.ParentStaffEntry.Timestamp,M.Duration).lt(this.currentStaffEntry.Timestamp)&&delete k[O]}}void 0===t.element("time-modification")||g||this.handleTimeModificationNode(t)}catch(t){var R=N.ITextTranslation.translateText("ReaderErrorMessages/NoteError","Ignored erroneous Note.");this.musicSheet.SheetErrors.pushMeasureError(R)}return this.currentNote},d.prototype.checkForStaffEntryLink=function(t,e,n,i){var r=new l.StaffEntryLink(this.currentVoiceEntry);r.LinkStaffEntries.push(n),n.Link=r;var o=this.currentVoiceEntry.Timestamp.clone(),s=i.getVerticalContainerByTimestamp(o);return void 0===(n=s.StaffEntries[t])&&(n=new a.SourceStaffEntry(s,e),s.StaffEntries[t]=n),n.VoiceEntries.push(this.currentVoiceEntry),r.LinkStaffEntries.push(n),n.Link=r,n},d.prototype.checkForOpenBeam=function(){void 0!==this.openBeam&&void 0!==this.currentNote&&this.handleOpenBeam()},d.prototype.checkOpenTies=function(){var t=this.openTieDict;for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];I.Fraction.plus(n.StartNote.ParentStaffEntry.Timestamp,n.Duration).lt(n.StartNote.ParentStaffEntry.VerticalContainerParent.ParentMeasure.Duration)&&delete t[e]}},d.prototype.hasVoiceEntry=function(){return void 0!==this.currentVoiceEntry},d.prototype.getNoteDurationFromType=function(t){switch(t){case"1024th":return new I.Fraction(1,1024);case"512th":return new I.Fraction(1,512);case"256th":return new I.Fraction(1,256);case"128th":return new I.Fraction(1,128);case"64th":return new I.Fraction(1,64);case"32th":case"32nd":return new I.Fraction(1,32);case"16th":return new I.Fraction(1,16);case"eighth":return new I.Fraction(1,8);case"quarter":return new I.Fraction(1,4);case"half":return new I.Fraction(1,2);case"whole":return new I.Fraction(1,1);case"breve":return new I.Fraction(2,1);case"long":return new I.Fraction(4,1);case"maxima":return new I.Fraction(8,1);default:var e=N.ITextTranslation.translateText("ReaderErrorMessages/NoteDurationError","Invalid note duration.");throw new F.MusicSheetReadingException(e)}},d.prototype.readArticulations=function(t,e){var n=t.element("articulations");void 0!==n&&this.articulationReader.addArticulationExpression(n,e);var i=t.element("fermata");void 0!==i&&this.articulationReader.addFermata(i,e);var r=t.element("technical");void 0!==r&&this.articulationReader.addTechnicalArticulations(r,e);var o=t.element("ornaments");void 0!==o&&this.articulationReader.addOrnament(o,e)},d.prototype.addSingleNote=function(t,e,n,i,r,o,s,a,u,l,c,h){for(var f=0,p=B.AccidentalEnum.NONE,d=D.NoteEnum.C,b=0,y=void 0,m=void 0,g=void 0,v=t.elements(),_=0,S=v.length;_<S;++_){var x=v[_];try{if("pitch"===x.name)for(var w=x.elements(),E=0,P=w.length;E<P;++E){var T=w[E];g=m=void 0;try{if("step"===T.name){if(void 0===(d=D.NoteEnum[T.value])){var k=N.ITextTranslation.translateText("ReaderErrorMessages/NotePitchError","Invalid pitch while reading note.");throw this.musicSheet.SheetErrors.pushMeasureError(k),new F.MusicSheetReadingException(k,void 0)}}else if("alter"===T.name){if(f=parseFloat(T.value),isNaN(f))throw k=N.ITextTranslation.translateText("ReaderErrorMessages/NoteAlterationError","Invalid alteration while reading note."),this.musicSheet.SheetErrors.pushMeasureError(k),new F.MusicSheetReadingException(k,void 0);p=V.Pitch.AccidentalFromHalfTones(f)}else if("octave"===T.name&&(b=parseInt(T.value,10),isNaN(b)))throw k=N.ITextTranslation.translateText("ReaderErrorMessages/NoteOctaveError","Invalid octave value while reading note."),this.musicSheet.SheetErrors.pushMeasureError(k),new F.MusicSheetReadingException(k,void 0)}catch(t){j.info("VoiceGenerator.addSingleNote read Step: ",t.message)}}else if("accidental"===x.name)"natural"===x.value&&(p=B.AccidentalEnum.NATURAL);else if("unpitched"===x.name){var O=x.element("display-step");void 0!==O&&(d=D.NoteEnum[O.value.toUpperCase()]);var M=x.element("display-octave");void 0!==M&&(b=parseInt(M.value,10),o&&(b+=1))}else"instrument"===x.name?void 0!==x.firstAttribute&&(y=x.firstAttribute.value):"notehead"===x.name&&(m=x.value,null!==x.attribute("filled")&&(g="yes"===x.attribute("filled").value))}catch(t){j.info("VoiceGenerator.addSingleNote: ",t)}}b-=V.Pitch.OctaveXmlDifference;var R=new V.Pitch(d,b,p),L=I.Fraction.createFromFraction(e),A=new C.Note(this.currentVoiceEntry,this.currentStaffEntry,L,R);return A.TypeLength=n,A.NormalNotes=i,A.PrintObject=s,A.IsCueNote=a,A.StemDirectionXml=u,A.TremoloStrokes=l,(void 0!==m&&"normal"!==m||void 0!==g)&&(A.Notehead=new G.Notehead(A,m,g)),A.NoteheadColorXml=h,A.NoteheadColor=h,A.PlaybackInstrumentId=y,this.currentVoiceEntry.Notes.push(A),this.currentVoiceEntry.StemDirectionXml=u,c&&(this.currentVoiceEntry.StemColorXml=c,this.currentVoiceEntry.StemColor=c,A.StemColorXml=c),t.elements("beam")&&!r&&this.createBeam(t,A),A},d.prototype.addRestNote=function(t,e,n,i){var r=I.Fraction.createFromFraction(t),o=new C.Note(this.currentVoiceEntry,this.currentStaffEntry,r,void 0);return o.PrintObject=e,o.IsCueNote=n,o.NoteheadColorXml=i,o.NoteheadColor=i,this.currentVoiceEntry.Notes.push(o),void 0!==this.openBeam&&this.openBeam.ExtendedNoteList.push(o),o},d.prototype.createBeam=function(t,e){try{var n=t.element("beam"),i=void 0;if(void 0!==n&&n.hasAttributes&&(i=n.attribute("number")),void 0!==i){var r=parseInt(i.value,10),o=t.elements("beam"),s=o[0].value;1===r&&void 0!==o&&("begin"===s&&this.lastBeamTag!==s&&(void 0!==this.openBeam&&this.handleOpenBeam(),this.openBeam=new f.Beam),this.lastBeamTag=s);var a=!1;if(void 0===this.openBeam)return;for(var u=0,l=this.openBeam.Notes.length;u<l;++u){var c=this.openBeam.Notes[u];this.currentVoiceEntry===c.ParentVoiceEntry&&(a=!0)}a||(this.openBeam.addNoteToBeam(e),"end"===s&&1===r&&(this.openBeam=void 0))}}catch(t){var h=N.ITextTranslation.translateText("ReaderErrorMessages/BeamError","Error while reading beam.");throw this.musicSheet.SheetErrors.pushMeasureError(h),new F.MusicSheetReadingException("",t)}},d.prototype.handleOpenBeam=function(){if(1===this.openBeam.Notes.length)return this.openBeam.Notes[0].NoteBeam=void 0,void(this.openBeam=void 0);if(this.currentNote===h.CollectionUtil.last(this.openBeam.Notes))this.openBeam=void 0;else{var t=h.CollectionUtil.last(this.openBeam.Notes).ParentStaffEntry,e=this.currentMeasure.getVerticalContainerIndexByTimestamp(t.Timestamp),n=t.VerticalContainerParent.StaffEntries.indexOf(t);if(e<this.currentMeasure.VerticalSourceStaffEntryContainers.length-1){var i=this.currentMeasure.VerticalSourceStaffEntryContainers[e+1].StaffEntries[n];if(void 0!==i)for(var r=0,o=i.VoiceEntries.length;r<o;++r){var s=i.VoiceEntries[r];if(s.ParentVoice===this.voice){var a=s.Notes[0];a.Length.lte(new I.Fraction(1,8))&&this.openBeam.addNoteToBeam(a),this.openBeam=void 0}}}else this.openBeam=void 0}},d.prototype.addTuplet=function(t,e){var n=!1;if(void 0!==e&&1<e.length){void 0!==(y=t.element("time-modification"))&&(y=y.element("actual-notes"));for(var i=e,r=0,o=i.length;r<o;++r){var s=i[r];if(void 0!==s&&s.attributes())if((d=s.attribute("bracket"))&&"yes"===d.value&&(n=!0),(f=s.attribute("type"))&&"start"===f.value){var a=1;s.attribute("number")&&(a=parseInt(s.attribute("number").value,10));var u=0;if(void 0!==y&&(u=parseInt(y.value,10),isNaN(u))){var l=N.ITextTranslation.translateText("ReaderErrorMessages/TupletNoteDurationError","Invalid tuplet note duration.");throw this.musicSheet.SheetErrors.pushMeasureError(l),new F.MusicSheetReadingException(l,void 0)}var c=new g.Tuplet(u,n);void 0!==this.tupletDict[a]&&(delete this.tupletDict[a],0===Object.keys(this.tupletDict).length?this.openTupletNumber=0:1<Object.keys(this.tupletDict).length&&this.openTupletNumber--),this.tupletDict[a]=c,(m=[]).push(this.currentNote),c.Notes.push(m),c.Fractions.push(this.getTupletNoteDurationFromType(t)),this.currentNote.NoteTuplet=c,this.openTupletNumber=a}else"stop"===f.value&&(a=1,s.attribute("number")&&(a=parseInt(s.attribute("number").value,10)),void 0!==(c=this.tupletDict[a])&&((m=[]).push(this.currentNote),c.Notes.push(m),c.Fractions.push(this.getTupletNoteDurationFromType(t)),this.currentNote.NoteTuplet=c,delete this.tupletDict[a],0===Object.keys(this.tupletDict).length?this.openTupletNumber=0:1<Object.keys(this.tupletDict).length&&this.openTupletNumber--))}}else if(void 0!==e[0]){var h=e[0];if(h.hasAttributes){var f=h.attribute("type").value,p=1;h.attribute("number")&&(p=parseInt(h.attribute("number").value,10));var d,b=isNaN(p);if((d=h.attribute("bracket"))&&"yes"===d.value&&(n=!0),"start"===f){var y;if(void(u=0)!==(y=t.element("time-modification"))&&(y=y.element("actual-notes")),void 0!==y&&(u=parseInt(y.value,10),isNaN(u)))throw l=N.ITextTranslation.translateText("ReaderErrorMessages/TupletNoteDurationError","Invalid tuplet note duration."),this.musicSheet.SheetErrors.pushMeasureError(l),new F.MusicSheetReadingException(l);b&&(this.openTupletNumber++,p=this.openTupletNumber),void 0===(c=this.tupletDict[p])&&(c=this.tupletDict[p]=new g.Tuplet(u,n)),(m=[]).push(this.currentNote),c.Notes.push(m),c.Fractions.push(this.getTupletNoteDurationFromType(t)),this.currentNote.NoteTuplet=c,this.openTupletNumber=p}else if("stop"===f){var m;b&&(p=this.openTupletNumber),void 0!==(c=this.tupletDict[this.openTupletNumber])&&((m=[]).push(this.currentNote),c.Notes.push(m),c.Fractions.push(this.getTupletNoteDurationFromType(t)),this.currentNote.NoteTuplet=c,0===Object.keys(this.tupletDict).length?this.openTupletNumber=0:1<Object.keys(this.tupletDict).length&&this.openTupletNumber--,delete this.tupletDict[p])}}}return this.openTupletNumber},d.prototype.handleTimeModificationNode=function(t){if(void 0!==this.tupletDict[this.openTupletNumber])try{var e=this.tupletDict[this.openTupletNumber],n=(o=h.CollectionUtil.last(e.Notes))[0].ParentVoiceEntry,i=void 0;n.Timestamp.Equals(this.currentVoiceEntry.Timestamp)?i=o:(i=[],e.Notes.push(i),e.Fractions.push(this.getTupletNoteDurationFromType(t))),i.push(this.currentNote),this.currentNote.NoteTuplet=e}catch(t){var r=N.ITextTranslation.translateText("ReaderErrorMessages/TupletNumberError","Invalid tuplet number.");throw this.musicSheet.SheetErrors.pushMeasureError(r),t}else if(0<this.currentVoiceEntry.Notes.length){var o,s=this.currentVoiceEntry.Notes[0];void 0!==s.NoteTuplet&&(e=s.NoteTuplet,(o=h.CollectionUtil.last(e.Notes)).push(this.currentNote),this.currentNote.NoteTuplet=e)}},d.prototype.addTie=function(t,e,n){if(void 0!==t)if(1===t.length){var i=t[0];if(void 0!==i&&i.attributes()){var r=i.attribute("type").value;try{if("start"===r){var o=this.findCurrentNoteInTieDict(this.currentNote);o<0&&delete this.openTieDict[o];var s=this.getNextAvailableNumberForTie(),a=new c.Tie(this.currentNote);this.openTieDict[s]=a}else if("stop"===r){var u=this.findCurrentNoteInTieDict(this.currentNote);void 0!==(a=this.openTieDict[u])&&(a.AddNote(this.currentNote),n.lt(I.Fraction.plus(this.currentStaffEntry.Timestamp,this.currentNote.Length))&&(n=I.Fraction.plus(this.currentStaffEntry.Timestamp,this.currentNote.Length)),delete this.openTieDict[u])}}catch(t){var l=N.ITextTranslation.translateText("ReaderErrorMessages/TieError","Error while reading tie.");this.musicSheet.SheetErrors.pushMeasureError(l)}}}else 2===t.length&&0<=(u=this.findCurrentNoteInTieDict(this.currentNote))&&((a=this.openTieDict[u]).AddNote(this.currentNote),n.lt(I.Fraction.plus(this.currentStaffEntry.Timestamp,this.currentNote.Length))&&(n=I.Fraction.plus(this.currentStaffEntry.Timestamp,this.currentNote.Length)))},d.prototype.getNextAvailableNumberForTie=function(){var t=Object.keys(this.openTieDict);if(0===t.length)return 1;t.sort(function(t,e){return+t-+e});for(var e=0;e<t.length;e++)if(""+(e+1)!==t[e])return e+1;return+t[t.length-1]+1},d.prototype.findCurrentNoteInTieDict=function(t){var e=this.openTieDict;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(i.Pitch.FundamentalNote===t.Pitch.FundamentalNote&&i.Pitch.Octave===t.Pitch.Octave)return+n}return-1},d.prototype.getTupletNoteDurationFromType=function(t){if(void 0!==t.element("type")){var e=t.element("type");if(void 0!==e){var n=e.value;try{return this.getNoteDurationFromType(n)}catch(t){var i=N.ITextTranslation.translateText("ReaderErrorMessages/NoteDurationError","Invalid note duration.");throw this.musicSheet.SheetErrors.pushMeasureError(i),new F.MusicSheetReadingException("",t)}}}},d);function d(t,e,n,i){void 0===i&&(i=void 0),this.lastBeamTag="",this.openTieDict={},this.currentOctaveShift=0,this.tupletDict={},this.openTupletNumber=0,this.musicSheet=t.GetMusicSheet,this.slurReader=n,this.voice=void 0!==i?new r.LinkedVoice(t,e,i):new o.Voice(t,e),t.Voices.push(this.voice),this.lyricsReader=new u.LyricsReader(this.musicSheet),this.articulationReader=new p.ArticulationReader}e.VoiceGenerator=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=(Object.defineProperty(o.prototype,"Notes",{get:function(){return this.notes},set:function(t){this.notes=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ExtendedNoteList",{get:function(){return this.extendedNoteList},set:function(t){this.extendedNoteList=t},enumerable:!0,configurable:!0}),o.prototype.addNoteToBeam=function(t){void 0!==t&&((t.NoteBeam=this).notes.push(t),this.extendedNoteList.push(t))},o);function o(){this.notes=[],this.extendedNoteList=[]}e.Beam=r,(i=e.BeamEnum||(e.BeamEnum={}))[i.BeamNone=-1]="BeamNone",i[i.BeamBegin=0]="BeamBegin",i[i.BeamContinue=1]="BeamContinue",i[i.BeamEnd=2]="BeamEnd",i[i.BeamForward=3]="BeamForward",i[i.BeamBackward=4]="BeamBackward"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=(Object.defineProperty(o.prototype,"Notes",{get:function(){return this.notes},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"StartNote",{get:function(){return this.notes[0]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"Duration",{get:function(){for(var t=new r.Fraction,e=0,n=this.notes;e<n.length;e++){var i=n[e];t.Add(i.Length)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"Pitch",{get:function(){return this.StartNote.Pitch},enumerable:!0,configurable:!0}),o.prototype.AddNote=function(t){this.notes.push(t),t.NoteTie=this},o);function o(t){this.notes=[],this.AddNote(t)}e.Tie=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(r.prototype,"TupletLabelNumber",{get:function(){return this.tupletLabelNumber},set:function(t){this.tupletLabelNumber=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Notes",{get:function(){return this.notes},set:function(t){this.notes=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Fractions",{get:function(){return this.fractions},set:function(t){this.fractions=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Bracket",{get:function(){return this.bracket},set:function(t){this.bracket=t},enumerable:!0,configurable:!0}),r.prototype.getNoteIndex=function(t){for(var e=this.notes.length-1;0<=e;e--)for(var n=0;n<this.notes[e].length;n++)if(t===this.notes[e][n])return e;return 0},r);function r(t,e){void 0===e&&(e=!1),this.notes=[],this.fractions=[],this.tupletLabelNumber=t,this.bracket=e}e.Tuplet=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var _=n(200),S=n(201),x=n(30),i=(r.prototype.addLyricEntry=function(t,e){if(void 0!==t){for(var n=t,i=0,r=n.length;i<r;++i){var o=n[i];try{var s="single";if(void 0!==o.element("text")){var a=o.element("text");if(void 0!==o.element("syllabic")&&(s=o.element("syllabic").value),void 0!==a){var u=a.value;if(void 0!==o.element("elision")&&"-"===u){for(var l=o.elements(),c=0,h=0;h<l.length;h++)if("elision"===(d=l[h]).name){c=h;break}var f=void 0,p=void 0;if(0<c)for(h=c;h<l.length;h++){var d;"text"===(d=l[h]).name&&(f=d),"syllabic"===d.name&&(p=d)}void 0!==f&&void 0!==p&&(a=f,s="middle")}var b=1;if(void 0!==o.attributes()&&void 0!==o.attribute("number"))try{b=parseInt(o.attribute("number").value,10)}catch(t){try{var y=o.attribute("number").value.toLowerCase().split("verse");1<y.length&&(b=parseInt(y[1],10))}catch(t){var m=x.ITextTranslation.translateText("ReaderErrorMessages/LyricVerseNumberError","Invalid lyric verse number");this.musicSheet.SheetErrors.pushMeasureError(m);continue}}var g=void 0;if("single"===s||"end"===s){if(void 0!==this.openLyricWords[b]){this.currentLyricWord=this.openLyricWords[b];var v=this.currentLyricWord.Syllables.length;g=new S.LyricsEntry(u,b,this.currentLyricWord,e,v),this.currentLyricWord.Syllables.push(g),delete this.openLyricWords[b],this.currentLyricWord=void 0}else g=new S.LyricsEntry(u,b,void 0,e);g.extend=void 0!==o.element("extend")}else"begin"===s?(void 0!==this.openLyricWords[b]&&(delete this.openLyricWords[b],this.currentLyricWord=void 0),this.currentLyricWord=new _.LyricWord,this.openLyricWords[b]=this.currentLyricWord,g=new S.LyricsEntry(u,b,this.currentLyricWord,e,0),this.currentLyricWord.Syllables.push(g)):"middle"===s&&(void 0!==this.openLyricWords[b]?(this.currentLyricWord=this.openLyricWords[b],v=this.currentLyricWord.Syllables.length,g=new S.LyricsEntry(u,b,this.currentLyricWord,e,v),this.currentLyricWord.Syllables.push(g)):g=new S.LyricsEntry(u,b,void 0,e));void 0!==g&&(e.LyricsEntries[b],e.LyricsEntries.setValue(b,g),e.ParentVoice.Parent.LyricVersesNumbers[b],e.ParentVoice.Parent.LyricVersesNumbers.push(b))}}}catch(t){m=x.ITextTranslation.translateText("ReaderErrorMessages/LyricError","Error while reading lyric entry."),this.musicSheet.SheetErrors.pushMeasureError(m);continue}}e.ParentVoice.Parent.LyricVersesNumbers=e.ParentVoice.Parent.LyricVersesNumbers.filter(function(t,e,n){return n.indexOf(t)===e})}},r);function r(t){this.openLyricWords={},this.musicSheet=t}e.LyricsReader=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(r.prototype,"GetVoiceEntry",{get:function(){return this.voiceEntry},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"LinkStaffEntries",{get:function(){return this.linkStaffEntries},set:function(t){this.linkStaffEntries=t},enumerable:!0,configurable:!0}),r);function r(t){this.linkStaffEntries=[],this.voiceEntry=t}e.StaffEntryLink=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=n(18),a=n(1),l=n(202),d=n(49),b=n(8),y=n(2),i=(r.prototype.getAccEnumFromString=function(t){switch(t){case"sharp":return y.AccidentalEnum.SHARP;case"flat":return y.AccidentalEnum.FLAT;case"natural":return y.AccidentalEnum.NATURAL;case"double-sharp":case"sharp-sharp":return y.AccidentalEnum.DOUBLESHARP;case"double-flat":case"flat-flat":return y.AccidentalEnum.DOUBLEFLAT;case"quarter-sharp":return y.AccidentalEnum.QUARTERTONESHARP;case"quarter-flat":return y.AccidentalEnum.QUARTERTONEFLAT;case"triple-sharp":return y.AccidentalEnum.TRIPLESHARP;case"triple-flat":return y.AccidentalEnum.TRIPLEFLAT;default:return y.AccidentalEnum.NONE}},r.prototype.addArticulationExpression=function(t,e){if(void 0!==t&&0<t.elements().length)for(var n=t.elements(),i=0,r=n.length;i<r;++i){var o=n[i].name;try{o.replace("-","");var s=u.ArticulationEnum[o];u.VoiceEntry.isSupportedArticulation(s)&&("staccato"===o&&0<e.Articulations.length&&e.Articulations[0]!==u.ArticulationEnum.staccato&&e.Articulations.splice(0,0,s),-1===e.Articulations.indexOf(s)&&e.Articulations.push(s))}catch(t){return void a.debug("addArticulationExpression","Invalid note articulation.",t)}}},r.prototype.addFermata=function(t,e){var n=u.ArticulationEnum.fermata;0<t.attributes().length&&void 0!==t.attribute("type")&&"inverted"===t.attribute("type").value&&(n=u.ArticulationEnum.invertedfermata),e.Articulations.push(n)},r.prototype.addTechnicalArticulations=function(t,e){var n={"down-bow":u.ArticulationEnum.downbow,"open-string":u.ArticulationEnum.naturalharmonic,"snap-pizzicato":u.ArticulationEnum.snappizzicato,stopped:u.ArticulationEnum.lefthandpizzicato,"up-bow":u.ArticulationEnum.upbow};for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];void 0!==t.element(i)&&-1===e.Articulations.indexOf(r)&&e.Articulations.push(r)}var o=t.element("fingering");if(void 0!==o){var s=new l.TechnicalInstruction;s.type=l.TechnicalInstructionType.Fingering,s.value=o.value,s.placement=b.PlacementEnum.NotYetDefined;var a=o.attribute("placement");if(null!=a)switch(a.value){case"above":s.placement=b.PlacementEnum.Above;break;case"below":s.placement=b.PlacementEnum.Below;break;case"left":s.placement=b.PlacementEnum.Left;break;case"right":s.placement=b.PlacementEnum.Right;break;default:s.placement=b.PlacementEnum.NotYetDefined}e.TechnicalInstructions.push(s)}},r.prototype.addOrnament=function(t,e){if(void 0!==t){var n=void 0,i={"delayed-inverted-turn":d.OrnamentEnum.DelayedInvertedTurn,"delayed-turn":d.OrnamentEnum.DelayedTurn,"inverted-mordent":d.OrnamentEnum.InvertedMordent,"inverted-turn":d.OrnamentEnum.InvertedTurn,mordent:d.OrnamentEnum.Mordent,"trill-mark":d.OrnamentEnum.Trill,turn:d.OrnamentEnum.Turn};for(var r in i)i.hasOwnProperty(r)&&void 0!==t.element(r)&&(n=new d.OrnamentContainer(i[r]));if(void 0!==n){var o=t.elements("accidental-mark");if(void 0!==o)for(var s=b.PlacementEnum.Below,a=y.AccidentalEnum.NONE,u=o,l=0,c=u.length;l<c;++l){var h=u[l],f=h.value;a=this.getAccEnumFromString(f);var p=h.attribute("placement");h.hasAttributes&&void 0!==p&&("above"===(f=p.value)?s=b.PlacementEnum.Above:"below"===f&&(s=b.PlacementEnum.Below)),s===b.PlacementEnum.Above?n.AccidentalAbove=a:s===b.PlacementEnum.Below&&(n.AccidentalBelow=a)}e.OrnamentContainer=n}}},r);function r(){}e.ArticulationReader=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(r.prototype.addNote=function(t){this.notes.push(t),t.Arpeggio=this},r);function r(t,e){void 0===e&&(e=7),this.parentVoiceEntry=t,this.type=e,this.notes=[]}e.Arpeggio=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var k=n(74),O=n(2),M=n(30),R=n(1),i=(r.readChordSymbol=function(t,e,n){var i=t.element("root"),r=t.element("kind");if(void 0!==i&&void 0!==r){var o=i.element("root-step"),s=i.element("root-alter");if(void 0!==o){var a;try{a=O.NoteEnum[o.value.trim()]}catch(t){var u=M.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return e.SheetErrors.pushMeasureError(u),void R.debug("InstrumentReader.readChordSymbol",u,t)}var l=O.AccidentalEnum.NONE;if(void 0!==s)try{l=O.Pitch.AccidentalFromHalfTones(parseInt(s.value,void 0))}catch(t){u=M.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol"),e.SheetErrors.pushMeasureError(u),R.debug("InstrumentReader.readChordSymbol",u,t)}var c,h=new O.Pitch(a,1,l),f=r.value.trim().replace("-","");try{c=k.ChordSymbolEnum[f]}catch(t){return u=M.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol"),e.SheetErrors.pushMeasureError(u),void R.debug("InstrumentReader.readChordSymbol",u,t)}var p=void 0,d=t.element("bass");if(void 0!==d){var b=d.element("bass-step"),y=d.element("bass-alter"),m=O.NoteEnum.C;if(void 0!==b)try{m=O.NoteEnum[b.value.trim()]}catch(t){return u=M.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol"),e.SheetErrors.pushMeasureError(u),void R.debug("InstrumentReader.readChordSymbol",u,t)}var g=O.AccidentalEnum.NONE;if(void 0!==y)try{g=O.Pitch.AccidentalFromHalfTones(parseInt(y.value,void 0))}catch(t){u=M.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol"),e.SheetErrors.pushMeasureError(u),R.debug("InstrumentReader.readChordSymbol",u,t)}p=new O.Pitch(m,1,g)}var v=void 0,_=t.element("degree");if(void 0!==_){var S=_.element("degree-value"),x=_.element("degree-alter"),w=_.element("degree-type");if(void 0===S||void 0===x||void 0===w)return;var E=void 0;try{E=parseInt(S.value.trim(),void 0)}catch(t){return u=M.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol"),e.SheetErrors.pushMeasureError(u),void R.debug("InstrumentReader.readChordSymbol",u,t)}var P=void 0;try{P=O.Pitch.AccidentalFromHalfTones(parseInt(x.value,void 0))}catch(t){return u=M.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol"),e.SheetErrors.pushMeasureError(u),void R.debug("InstrumentReader.readChordSymbol",u,t)}var T=void 0;try{T=k.ChordDegreeText[w.value.trim().toLowerCase()]}catch(t){return u=M.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol"),e.SheetErrors.pushMeasureError(u),void R.debug("InstrumentReader.readChordSymbol",u,t)}v=new k.Degree(E,P,T)}return new k.ChordSymbolContainer(h,c,p,v,n)}}},r);function r(){}e.ChordSymbolReader=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var m=n(0),i=n(203),d=n(36),b=n(68),y=n(53),f=n(33),r=n(204),g=n(67),v=n(141),_=n(142),S=n(8),x=n(9),w=n(30),E=n(1),P=n(4),o=(s.prototype.readExpressionParameters=function(t,e,n,i,r,o,s){this.initialize();var a=t.element("offset");if(void 0!==a&&!s)try{this.offsetDivisions=parseInt(a.value,10)}catch(t){var u="ReaderErrorMessages/ExpressionOffsetError, Invalid expression offset -> set to default.";E.debug("ExpressionReader.readExpressionParameters",u,t),this.musicSheet.SheetErrors.pushMeasureError(u),this.offsetDivisions=0}this.directionTimestamp=m.Fraction.createFromFraction(i);var l=new m.Fraction(Math.abs(this.offsetDivisions),4*n);0<this.offsetDivisions?0<i.RealValue?(l=m.Fraction.multiply(m.Fraction.minus(i,r),l),this.directionTimestamp=m.Fraction.plus(l,i)):this.directionTimestamp=m.Fraction.createFromFraction(l):this.offsetDivisions<0&&(0<i.RealValue?(l=m.Fraction.multiply(m.Fraction.minus(i,r),l),this.directionTimestamp=m.Fraction.minus(i,l)):this.directionTimestamp=m.Fraction.createFromFraction(l));var c=t.attribute("placement");if(null!=c)try{var h=c.value;"below"===h?this.placement=S.PlacementEnum.Below:"above"===h&&(this.placement=S.PlacementEnum.Above)}catch(t){u=w.ITextTranslation.translateText("ReaderErrorMessages/ExpressionPlacementError","Invalid expression placement -> set to default."),E.debug("ExpressionReader.readExpressionParameters",u,t),this.musicSheet.SheetErrors.pushMeasureError(u),this.placement=S.PlacementEnum.Below}if(this.placement===S.PlacementEnum.NotYetDefined)try{var f=t.element("direction-type");if(void 0!==f){var p=f.element("dynamics");void 0!==p&&null!=(b=p.attribute("default-y"))&&this.readExpressionPlacement(b,"read dynamics y pos");var d=f.element("wedge");void 0!==d&&null!=(b=d.attribute("default-y"))&&this.readExpressionPlacement(b,"read wedge y pos");var b,y=f.element("words");void 0!==y&&null!=(b=y.attribute("default-y"))&&this.readExpressionPlacement(b,"read words y pos")}}catch(t){u=w.ITextTranslation.translateText("ReaderErrorMessages/ExpressionPlacementError","Invalid expression placement -> set to default."),E.debug("ExpressionReader.readExpressionParameters",u,t),this.musicSheet.SheetErrors.pushMeasureError(u),this.placement=S.PlacementEnum.Below}this.placement===S.PlacementEnum.NotYetDefined&&(1<e.Staves.length?this.placement=S.PlacementEnum.Below:e.HasLyrics?this.placement=S.PlacementEnum.Above:this.placement=S.PlacementEnum.Below)},s.prototype.read=function(t,e,n){var i=!1,r=!1,o=t.element("sound");if(void 0!==o){var s=o.attribute("tempo"),a=o.attribute("dynamics");if(s){var u=s.value.match(/\d+/);this.soundTempo=void 0!==u?parseInt(u[0],10):100,i=!0}a&&(u=a.value.match(/\d+/),this.soundDynamic=void 0!==u?parseInt(u[0],10):100,r=!0)}var l=t.element("direction-type");if(void 0!==l){var c=l.element("metronome");if(void 0===c)if(void 0===(c=l.element("dynamics")))void 0===(c=l.element("words"))?void 0===(c=l.element("wedge"))||this.interpretWedge(c,e,n,e.MeasureNumber):i?(this.createNewTempoExpressionIfNeeded(e),this.currentMultiTempoExpression.CombinedExpressionsText=c.value,b=new g.InstantaneousTempoExpression(c.value,this.placement,this.staffNumber,this.soundTempo,this.currentMultiTempoExpression),this.currentMultiTempoExpression.addExpression(b,"")):r||this.interpretWords(c,e,n);else{var h=void 0!==t.element("notations");this.interpretInstantaneousDynamics(c,e,n,h)}else{var f=c.element("beat-unit"),p=void 0!==c.element("beat-unit-dot"),d=c.element("per-minute");if(void 0!==f&&void 0!==d){c.hasAttributes&&void 0!==c.attribute("default-x")&&(this.directionTimestamp=m.Fraction.createFromFraction(n));var b,y=parseInt(d.value,10);this.createNewTempoExpressionIfNeeded(e),(b=new g.InstantaneousTempoExpression(void 0,this.placement,this.staffNumber,y,this.currentMultiTempoExpression,!0)).dotted=p,b.beatUnit=f.value,this.currentMultiTempoExpression.addExpression(b,""),this.currentMultiTempoExpression.CombinedExpressionsText="test"}}}},s.prototype.checkForOpenExpressions=function(t,e){void 0!==this.openContinuousDynamicExpression&&(this.createNewMultiExpressionIfNeeded(t,e),this.closeOpenContinuousDynamic()),void 0!==this.openContinuousTempoExpression&&this.closeOpenContinuousTempo(m.Fraction.plus(t.AbsoluteTimestamp,e))},s.prototype.addOctaveShift=function(t,e,n){var i=1,r=t.element("staff");if(void 0!==r)try{i=parseInt(r.value,10)}catch(t){var o=w.ITextTranslation.translateText("ReaderErrorMessages/OctaveShiftStaffError","Invalid octave shift staff number -> set to default");this.musicSheet.SheetErrors.pushMeasureError(o),i=1,E.debug("ExpressionReader.addOctaveShift",o,t)}var s=t.element("direction-type");if(void 0!==s){var a=s.element("octave-shift");if(void 0!==a&&a.hasAttributes)try{if(void 0!==a.attribute("size")){var u=parseInt(a.attribute("size").value,10),l=0;if(8===u?l=1:15===u&&(l=2),void 0!==a.attribute("type")){var c=a.attribute("type").value;if("up"===c||"down"===c){var h=new f.OctaveShift(c,l);h.StaffNumber=i,this.createNewMultiExpressionIfNeeded(e),(this.getMultiExpression.OctaveShiftStart=h).ParentStartMultiExpression=this.getMultiExpression,this.openOctaveShift=h}else"stop"===c&&void 0!==this.openOctaveShift&&(this.createNewMultiExpressionIfNeeded(e,n),this.getMultiExpression.OctaveShiftEnd=this.openOctaveShift,this.openOctaveShift.ParentEndMultiExpression=this.getMultiExpression,this.openOctaveShift=void 0)}}}catch(t){o=w.ITextTranslation.translateText("ReaderErrorMessages/OctaveShiftError","Error while reading octave shift."),this.musicSheet.SheetErrors.pushMeasureError(o),E.debug("ExpressionReader.addOctaveShift",o,t)}}},s.prototype.initialize=function(){this.placement=S.PlacementEnum.NotYetDefined,this.soundTempo=0,this.soundDynamic=0,this.offsetDivisions=0},s.prototype.readExpressionPlacement=function(t,e){try{var n=parseInt(t.value,10);n<0?this.placement=S.PlacementEnum.Below:0<n&&(this.placement=S.PlacementEnum.Above)}catch(t){E.debug("ExpressionReader.readExpressionParameters",e,t)}},s.prototype.interpretInstantaneousDynamics=function(t,e,n,i){if(t.hasElements){t.hasAttributes&&void 0!==t.attribute("default-x")&&(this.directionTimestamp=m.Fraction.createFromFraction(n));var r=t.elements()[0].name;if("other-dynamics"===r&&(r=t.elements()[0].value),void 0!==r){var o=void 0;try{o=y.DynamicEnum[r]}catch(t){var s=w.ITextTranslation.translateText("ReaderErrorMessages/DynamicError","Error while reading dynamic.");return void this.musicSheet.SheetErrors.pushMeasureError(s)}if(void 0===this.activeInstantaneousDynamic||void 0!==this.activeInstantaneousDynamic&&this.activeInstantaneousDynamic.DynEnum!==o){i?this.createNewMultiExpressionIfNeeded(e,m.Fraction.createFromFraction(n)):this.createNewMultiExpressionIfNeeded(e),void 0!==this.openContinuousDynamicExpression&&this.openContinuousDynamicExpression.StartMultiExpression!==this.getMultiExpression&&this.closeOpenContinuousDynamic();var a=new y.InstantaneousDynamicExpression(r,this.soundDynamic,this.placement,this.staffNumber);this.getMultiExpression.addExpression(a,""),this.initialize(),void 0!==this.activeInstantaneousDynamic?this.activeInstantaneousDynamic.DynEnum=a.DynEnum:this.activeInstantaneousDynamic=new y.InstantaneousDynamicExpression(r,0,S.PlacementEnum.NotYetDefined,1)}}}},s.prototype.interpretWords=function(t,e,n){var i=t.value;if(0<i.length){if(t.hasAttributes&&void 0!==t.attribute("default-x")&&(this.directionTimestamp=m.Fraction.createFromFraction(n)),this.checkIfWordsNodeIsRepetitionInstruction(i))return;this.fillMultiOrTempoExpression(i,e),this.initialize()}},s.prototype.interpretWedge=function(t,e,n,i){void 0!==t&&t.hasAttributes&&void 0!==t.attribute("default-x")&&(this.directionTimestamp=m.Fraction.createFromFraction(n)),this.createNewMultiExpressionIfNeeded(e),this.addWedge(t,i),this.initialize()},s.prototype.createNewMultiExpressionIfNeeded=function(t,e){void 0===e&&(e=void 0),void 0===e&&(e=this.directionTimestamp),(void 0===this.getMultiExpression||void 0!==this.getMultiExpression&&(this.getMultiExpression.SourceMeasureParent!==t||this.getMultiExpression.SourceMeasureParent===t&&this.getMultiExpression.Timestamp!==e))&&(this.getMultiExpression=new r.MultiExpression(t,m.Fraction.createFromFraction(e)),t.StaffLinkedExpressions[this.globalStaffIndex].push(this.getMultiExpression))},s.prototype.createNewTempoExpressionIfNeeded=function(t){void 0!==this.currentMultiTempoExpression&&this.currentMultiTempoExpression.SourceMeasureParent===t&&this.currentMultiTempoExpression.Timestamp===this.directionTimestamp||(this.currentMultiTempoExpression=new i.MultiTempoExpression(t,m.Fraction.createFromFraction(this.directionTimestamp)),t.TempoExpressions.push(this.currentMultiTempoExpression))},s.prototype.addWedge=function(t,e){if(void 0!==t&&t.hasAttributes){var n=t.attribute("type").value.toLowerCase();try{if("crescendo"===n||"diminuendo"===n){var i=new d.ContinuousDynamicExpression(d.ContDynamicEnum[n],this.placement,this.staffNumber);void 0!==this.openContinuousDynamicExpression&&this.closeOpenContinuousDynamic(),this.openContinuousDynamicExpression=i,(this.getMultiExpression.StartingContinuousDynamic=i).StartMultiExpression=this.getMultiExpression,void 0!==this.activeInstantaneousDynamic&&this.activeInstantaneousDynamic.StaffNumber===i.StaffNumber&&(this.activeInstantaneousDynamic=void 0)}else"stop"===n&&void 0!==this.openContinuousDynamicExpression&&this.closeOpenContinuousDynamic()}catch(t){var r="ReaderErrorMessages/WedgeError, Error while reading Crescendo / Diminuendo.";this.musicSheet.SheetErrors.pushMeasureError(r),E.debug("ExpressionReader.addWedge",r,t)}}},s.prototype.fillMultiOrTempoExpression=function(t,e){if(void 0!==t)for(var n=0,i=t.trim().split(/([\s,\r\n]and[\s,\r\n]|[\s,\r\n]und[\s,\r\n]|[\s,\r\n]e[\s,\r\n]|[\s,\r\n])+/g);n<i.length;n++){var r=i[n];this.createExpressionFromString("",r,e,t)}},s.prototype.createExpressionFromString=function(t,e,n,i){if(g.InstantaneousTempoExpression.isInputStringInstantaneousTempo(e)||b.ContinuousTempoExpression.isInputStringContinuousTempo(e)){if(0<n.TempoExpressions.length)for(var r=0,o=n.TempoExpressions.length;r<o;++r)if((h=n.TempoExpressions[r]).Timestamp===this.directionTimestamp&&void 0!==h.InstantaneousTempo&&-1!==h.InstantaneousTempo.Label.indexOf(e))return!1;if(this.createNewTempoExpressionIfNeeded(n),this.currentMultiTempoExpression.CombinedExpressionsText=i,g.InstantaneousTempoExpression.isInputStringInstantaneousTempo(e)){var s=new g.InstantaneousTempoExpression(e,this.placement,this.staffNumber,this.soundTempo,this.currentMultiTempoExpression);return this.currentMultiTempoExpression.addExpression(s,t),!0}if(b.ContinuousTempoExpression.isInputStringContinuousTempo(e)){var a=new b.ContinuousTempoExpression(e,this.placement,this.staffNumber,this.currentMultiTempoExpression);return this.currentMultiTempoExpression.addExpression(a,t),!0}}if(y.InstantaneousDynamicExpression.isInputStringInstantaneousDynamic(e)||d.ContinuousDynamicExpression.isInputStringContinuousDynamic(e)){if(this.createNewMultiExpressionIfNeeded(n),y.InstantaneousDynamicExpression.isInputStringInstantaneousDynamic(e)){void 0!==this.openContinuousDynamicExpression&&void 0===this.openContinuousDynamicExpression.EndMultiExpression&&this.closeOpenContinuousDynamic();var u=new y.InstantaneousDynamicExpression(e,this.soundDynamic,this.placement,this.staffNumber);return this.getMultiExpression.addExpression(u,t),!0}if(d.ContinuousDynamicExpression.isInputStringContinuousDynamic(e)){var l=new d.ContinuousDynamicExpression(void 0,this.placement,this.staffNumber,e);return void 0!==this.openContinuousDynamicExpression&&void 0===this.openContinuousDynamicExpression.EndMultiExpression&&this.closeOpenContinuousDynamic(),void 0!==this.activeInstantaneousDynamic&&this.activeInstantaneousDynamic.StaffNumber===l.StaffNumber&&(this.activeInstantaneousDynamic=void 0),(this.openContinuousDynamicExpression=l).StartMultiExpression=this.getMultiExpression,this.getMultiExpression.addExpression(l,t),!0}}if(v.MoodExpression.isInputStringMood(e)){this.createNewMultiExpressionIfNeeded(n);var c=new v.MoodExpression(e,this.placement,this.staffNumber);return this.getMultiExpression.addExpression(c,t),!0}if(this.createNewMultiExpressionIfNeeded(n),0<n.TempoExpressions.length)for(r=0,o=n.TempoExpressions.length;r<o;++r){var h;if((h=n.TempoExpressions[r]).Timestamp===this.directionTimestamp&&void 0!==h.InstantaneousTempo&&0<h.EntriesList.length&&!this.hasDigit(e)&&0<this.globalStaffIndex){if(0<=h.EntriesList[0].label.indexOf(e))return!1;break}}var f=x.TextAlignmentEnum.CenterBottom;P.EngravingRules.Rules.CompactMode&&(f=x.TextAlignmentEnum.LeftBottom);var p=new _.UnknownExpression(e,this.placement,f,this.staffNumber);return this.getMultiExpression.addExpression(p,t),!1},s.prototype.closeOpenContinuousDynamic=function(){this.openContinuousDynamicExpression.EndMultiExpression=this.getMultiExpression,this.getMultiExpression.EndingContinuousDynamic=this.openContinuousDynamicExpression,this.openContinuousDynamicExpression=void 0},s.prototype.closeOpenContinuousTempo=function(t){this.openContinuousTempoExpression.AbsoluteEndTimestamp=t,this.openContinuousTempoExpression=void 0},s.prototype.checkIfWordsNodeIsRepetitionInstruction=function(t){return"coda"===(t=t.trim().toLowerCase())||"tocoda"===t||"to coda"===t||"fine"===t||"d.c."===t||"dacapo"===t||"da capo"===t||"d.s."===t||"dalsegno"===t||"dal segno"===t||"d.c. al fine"===t||"d.s. al fine"===t||"d.c. al coda"===t||"d.s. al coda"===t},s.prototype.hasDigit=function(t){return/\d/.test(t)},s);function s(t,e,n){this.musicSheet=t,this.staffNumber=n,this.globalStaffIndex=t.getGlobalStaffIndexOfFirstStaff(e)+(n-1),this.initialize()}e.ExpressionReader=o},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s,a,u=(s=n(8).AbstractExpression,r(l,s),l.isInputStringMood=function(t){return void 0!==t&&(l.isStringInStringList(l.listMoodAffettuoso,t)||l.isStringInStringList(l.listMoodAgitato,t)||l.isStringInStringList(l.listMoodAnimato,t)||l.isStringInStringList(l.listMoodAppassionato,t)||l.isStringInStringList(l.listMoodBrillante,t)||l.isStringInStringList(l.listMoodCantabile,t)||l.isStringInStringList(l.listMoodDolce,t)||l.isStringInStringList(l.listMoodEnergico,t)||l.isStringInStringList(l.listMoodEroico,t)||l.isStringInStringList(l.listMoodEspressivo,t)||l.isStringInStringList(l.listMoodFurioso,t)||l.isStringInStringList(l.listMoodGiocoso,t)||l.isStringInStringList(l.listMoodGioioso,t)||l.isStringInStringList(l.listMoodGrandioso,t)||l.isStringInStringList(l.listMoodGrazioso,t)||l.isStringInStringList(l.listMoodLacrimoso,t)||l.isStringInStringList(l.listMoodLeggiero,t)||l.isStringInStringList(l.listMoodMaestoso,t)||l.isStringInStringList(l.listMoodMalinconico,t)||l.isStringInStringList(l.listMoodMarcato,t)||l.isStringInStringList(l.listMoodMarziale,t)||l.isStringInStringList(l.listMoodMesto,t)||l.isStringInStringList(l.listMoodMorendo,t)||l.isStringInStringList(l.listMoodNobilmente,t)||l.isStringInStringList(l.listMoodPatetico,t)||l.isStringInStringList(l.listMoodPesante,t)||l.isStringInStringList(l.listMoodSaltando,t)||l.isStringInStringList(l.listMoodSautille,t)||l.isStringInStringList(l.listMoodScherzando,t)||l.isStringInStringList(l.listMoodSostenuto,t)||l.isStringInStringList(l.listMoodSpiccato,t)||l.isStringInStringList(l.listMoodTenerezza,t)||l.isStringInStringList(l.listMoodTranquillamente,t)||l.isStringInStringList(l.listMoodTrionfante,t))},Object.defineProperty(l.prototype,"Label",{get:function(){return this.label},set:function(t){this.label=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"Mood",{get:function(){return this.moodType},set:function(t){this.moodType=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"StaffNumber",{get:function(){return this.staffNumber},set:function(t){this.staffNumber=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"Placement",{get:function(){return this.placement},set:function(t){this.placement=t},enumerable:!0,configurable:!0}),l.prototype.setMoodType=function(){l.isStringInStringList(l.listMoodAffettuoso,this.label)?this.moodType=o.Affettuoso:l.isStringInStringList(l.listMoodAgitato,this.label)?this.moodType=o.Agitato:l.isStringInStringList(l.listMoodAnimato,this.label)?this.moodType=o.Animato:l.isStringInStringList(l.listMoodAppassionato,this.label)?this.moodType=o.Appassionato:l.isStringInStringList(l.listMoodBrillante,this.label)?this.moodType=o.Brillante:l.isStringInStringList(l.listMoodCantabile,this.label)?this.moodType=o.Cantabile:l.isStringInStringList(l.listMoodDolce,this.label)?this.moodType=o.Dolce:l.isStringInStringList(l.listMoodEnergico,this.label)?this.moodType=o.Energico:l.isStringInStringList(l.listMoodEroico,this.label)?this.moodType=o.Eroico:l.isStringInStringList(l.listMoodEspressivo,this.label)?this.moodType=o.Espressivo:l.isStringInStringList(l.listMoodFurioso,this.label)?this.moodType=o.Furioso:l.isStringInStringList(l.listMoodGiocoso,this.label)?this.moodType=o.Giocoso:l.isStringInStringList(l.listMoodGioioso,this.label)?this.moodType=o.Gioioso:l.isStringInStringList(l.listMoodGrandioso,this.label)?this.moodType=o.Grandioso:l.isStringInStringList(l.listMoodGrazioso,this.label)?this.moodType=o.Grazioso:l.isStringInStringList(l.listMoodLacrimoso,this.label)?this.moodType=o.Lacrimoso:l.isStringInStringList(l.listMoodLeggiero,this.label)?this.moodType=o.Leggiero:l.isStringInStringList(l.listMoodMaestoso,this.label)?this.moodType=o.Maestoso:l.isStringInStringList(l.listMoodMalinconico,this.label)?this.moodType=o.Malinconico:l.isStringInStringList(l.listMoodMarcato,this.label)?this.moodType=o.Marcato:l.isStringInStringList(l.listMoodMarziale,this.label)?this.moodType=o.Marziale:l.isStringInStringList(l.listMoodMesto,this.label)?this.moodType=o.Mesto:l.isStringInStringList(l.listMoodMorendo,this.label)?this.moodType=o.Morendo:l.isStringInStringList(l.listMoodNobilmente,this.label)?this.moodType=o.Nobilmente:l.isStringInStringList(l.listMoodPatetico,this.label)?this.moodType=o.Patetico:l.isStringInStringList(l.listMoodPesante,this.label)?this.moodType=o.Pesante:l.isStringInStringList(l.listMoodSaltando,this.label)?this.moodType=o.Saltando:l.isStringInStringList(l.listMoodSautille,this.label)?this.moodType=o.Sautille:l.isStringInStringList(l.listMoodScherzando,this.label)?this.moodType=o.Scherzando:l.isStringInStringList(l.listMoodSostenuto,this.label)?this.moodType=o.Sostenuto:l.isStringInStringList(l.listMoodSpiccato,this.label)?this.moodType=o.Spiccato:l.isStringInStringList(l.listMoodTenerezza,this.label)?this.moodType=o.Tenerezza:l.isStringInStringList(l.listMoodTranquillamente,this.label)?this.moodType=o.Tranquillamente:l.isStringInStringList(l.listMoodTrionfante,this.label)&&(this.moodType=o.Trionfante)},l.listMoodAffettuoso=["affettuoso"],l.listMoodAgitato=["agitato"],l.listMoodAppassionato=["appassionato"],l.listMoodAnimato=["animato","lively"],l.listMoodBrillante=["brillante"],l.listMoodCantabile=["cantabile"],l.listMoodDolce=["dolce"],l.listMoodEnergico=["energico"],l.listMoodEroico=["eroico"],l.listMoodEspressivo=["espressivo"],l.listMoodFurioso=["furioso"],l.listMoodGiocoso=["giocoso"],l.listMoodGioioso=["gioioso"],l.listMoodLacrimoso=["lacrimoso"],l.listMoodGrandioso=["grandioso"],l.listMoodGrazioso=["grazioso"],l.listMoodLeggiero=["leggiero"],l.listMoodMaestoso=["maestoso"],l.listMoodMalinconico=["malinconico"],l.listMoodMarcato=["marcato"],l.listMoodMarziale=["marziale"],l.listMoodMesto=["mesto"],l.listMoodMorendo=["morendo"],l.listMoodNobilmente=["nobilmente"],l.listMoodPatetico=["patetico"],l.listMoodPesante=["pesante"],l.listMoodSautille=["sautille"],l.listMoodSaltando=["saltando"],l.listMoodScherzando=["scherzando"],l.listMoodSostenuto=["sostenuto"],l.listMoodSpiccato=["spiccato"],l.listMoodTenerezza=["tenerezza"],l.listMoodTranquillamente=["tranquillamente"],l.listMoodTrionfante=["trionfante"],l);function l(t,e,n){var i=s.call(this,e)||this;return i.label=t,i.staffNumber=n,i.setMoodType(),i}e.MoodExpression=u,(a=o=e.MoodEnum||(e.MoodEnum={}))[a.Affettuoso=0]="Affettuoso",a[a.Agitato=1]="Agitato",a[a.Appassionato=2]="Appassionato",a[a.Animato=3]="Animato",a[a.Brillante=4]="Brillante",a[a.Cantabile=5]="Cantabile",a[a.Dolce=6]="Dolce",a[a.Energico=7]="Energico",a[a.Eroico=8]="Eroico",a[a.Espressivo=9]="Espressivo",a[a.Furioso=10]="Furioso",a[a.Giocoso=11]="Giocoso",a[a.Gioioso=12]="Gioioso",a[a.Lacrimoso=13]="Lacrimoso",a[a.Grandioso=14]="Grandioso",a[a.Grazioso=15]="Grazioso",a[a.Leggiero=16]="Leggiero",a[a.Maestoso=17]="Maestoso",a[a.Malinconico=18]="Malinconico",a[a.Marcato=19]="Marcato",a[a.Marziale=20]="Marziale",a[a.Mesto=21]="Mesto",a[a.Morendo=22]="Morendo",a[a.Nobilmente=23]="Nobilmente",a[a.Patetico=24]="Patetico",a[a.Pesante=25]="Pesante",a[a.Sautille=26]="Sautille",a[a.Saltando=27]="Saltando",a[a.Scherzando=28]="Scherzando",a[a.Sostenuto=29]="Sostenuto",a[a.Spiccato=30]="Spiccato",a[a.Tenerezza=31]="Tenerezza",a[a.Tranquillamente=32]="Tranquillamente",a[a.Trionfante=33]="Trionfante",a[a.Vivace=34]="Vivace"},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(8),a=n(9),u=(o=s.AbstractExpression,r(l,o),Object.defineProperty(l.prototype,"Label",{get:function(){return this.label},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"Placement",{get:function(){return this.placement},set:function(t){this.placement=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"StaffNumber",{get:function(){return this.staffNumber},set:function(t){this.staffNumber=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"TextAlignment",{get:function(){return this.textAlignment},enumerable:!0,configurable:!0}),l);function l(t,e,n,i){var r=o.call(this,e)||this;return r.label=t,r.staffNumber=i,void 0===n&&(n=a.TextAlignmentEnum.LeftBottom),r.textAlignment=n,r}e.UnknownExpression=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=n(205),c=n(1),h=n(30),i=(r.prototype.addSlur=function(t,e){try{if(void 0!==t)for(var n=0,i=t;n<i.length;n++){var r=i[n];if(0<r.attributes().length){var o=r.attribute("type").value,s=1;try{void 0!==r.attribute("number")&&(s=parseInt(r.attribute("number").value,10))}catch(t){c.debug("VoiceGenerator.addSlur number: ",t)}if("start"===o)void 0===(a=this.openSlurDict[s])&&(a=new l.Slur,this.openSlurDict[s]=a),a.StartNote=e;else if("stop"===o){var a;void 0!==(a=this.openSlurDict[s])&&((a.EndNote=e).checkForDoubleSlur(a)||(e.NoteSlurs.push(a),a.StartNote.NoteSlurs.push(a)),delete this.openSlurDict[s])}}}}catch(t){var u=h.ITextTranslation.translateText("ReaderErrorMessages/SlurError","Error while reading slur.");this.musicSheet.SheetErrors.pushMeasureError(u)}},r);function r(t){this.openSlurDict={},this.musicSheet=t}e.SlurReader=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),r=n(1),o=(Object.defineProperty(s.prototype,"ParentInstrument",{get:function(){return this.parentInstrument},enumerable:!0,configurable:!0}),s.isPianoInstrument=function(t){return t===i.MidiInstrument.Acoustic_Grand_Piano||t===i.MidiInstrument.Bright_Acoustic_Piano||t===i.MidiInstrument.Electric_Grand_Piano||t===i.MidiInstrument.Electric_Piano_1||t===i.MidiInstrument.Electric_Piano_2},s.prototype.setMidiInstrument=function(t){this.midiInstrumentID=s.midiInstrument[this.parseMidiInstrument(t)]},s.prototype.parseMidiInstrument=function(t){try{if(t){var e=t.toLowerCase().trim();for(var n in s.midiInstrument)if(-1!==e.indexOf(n))return n}if(this.parentInstrument.Name)for(var n in e=this.parentInstrument.Name.toLowerCase().trim(),s.midiInstrument)if(-1!==e.indexOf(n))return n}catch(t){r.error("Error parsing MIDI Instrument. Default to Grand Piano.")}return"unnamed"},s.midiInstrument={alt:i.MidiInstrument.Synth_Voice,alto:i.MidiInstrument.Synth_Voice,banjo:i.MidiInstrument.Banjo,bariton:i.MidiInstrument.Synth_Voice,baritone:i.MidiInstrument.Synth_Voice,bass:i.MidiInstrument.Synth_Voice,"blockflöte":i.MidiInstrument.Recorder,brass:i.MidiInstrument.Trombone,bratsche:i.MidiInstrument.Viola,cello:i.MidiInstrument.Cello,clarinet:i.MidiInstrument.Clarinet,contrabass:i.MidiInstrument.Contrabass,drums:i.MidiInstrument.Percussion,flute:i.MidiInstrument.Flute,"flöte":i.MidiInstrument.Flute,frenchhorn:i.MidiInstrument.French_Horn,gitarre:i.MidiInstrument.Acoustic_Guitar_nylon,guitar:i.MidiInstrument.Acoustic_Guitar_nylon,harfe:i.MidiInstrument.Orchestral_Harp,harp:i.MidiInstrument.Orchestral_Harp,klarinette:i.MidiInstrument.Clarinet,klavier:i.MidiInstrument.Acoustic_Grand_Piano,kontrabass:i.MidiInstrument.Contrabass,oboe:i.MidiInstrument.Oboe,organ:i.MidiInstrument.Church_Organ,orgel:i.MidiInstrument.Church_Organ,orgue:i.MidiInstrument.Church_Organ,percussion:i.MidiInstrument.Percussion,piano:i.MidiInstrument.Acoustic_Grand_Piano,piccolo:i.MidiInstrument.Piccolo,posaune:i.MidiInstrument.Trombone,recorder:i.MidiInstrument.Recorder,sax:i.MidiInstrument.Tenor_Sax,schlagwerk:i.MidiInstrument.Percussion,schlagzeug:i.MidiInstrument.Percussion,sopran:i.MidiInstrument.Synth_Voice,steeldrum:i.MidiInstrument.Steel_Drums,streicher:i.MidiInstrument.String_Ensemble_1,strings:i.MidiInstrument.String_Ensemble_1,tenor:i.MidiInstrument.Synth_Voice,tpt:i.MidiInstrument.Trumpet,trombone:i.MidiInstrument.Trombone,trompete:i.MidiInstrument.Trumpet,trumpet:i.MidiInstrument.Trumpet,tuba:i.MidiInstrument.Tuba,unnamed:i.MidiInstrument.Acoustic_Grand_Piano,viola:i.MidiInstrument.Viola,violin:i.MidiInstrument.Violin,"violon-c":i.MidiInstrument.Cello,"violon.":i.MidiInstrument.Violin,voice:i.MidiInstrument.Synth_Voice,woodblock:i.MidiInstrument.Woodblock},s);function s(t){this.parentInstrument=t,this.fixedKey=-1,this.name=this.parseMidiInstrument(this.parentInstrument.Name),this.midiInstrumentID=s.midiInstrument[this.name],this.volume=1}e.SubInstrument=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(146),r=n(147),o=(s.createRepetitionInstructionReader=function(){return new i.RepetitionInstructionReader},s.createRepetitionCalculator=function(){return new r.RepetitionCalculator},s);function s(){}e.MusicSymbolModuleFactory=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var E=n(37),c=n(37),a=n(206),i=(Object.defineProperty(r.prototype,"MusicSheet",{set:function(t){this.musicSheet=t,this.xmlMeasureList=new Array(this.musicSheet.Instruments.length),this.repetitionInstructions=[]},enumerable:!0,configurable:!0}),r.prototype.prepareReadingMeasure=function(t,e){this.currentMeasureIndex=e},r.prototype.handleLineRepetitionInstructions=function(t,e){if(0<t.elements().length){var n,i=!1,r="",o="",s="",a=[],u=t.element("bar-style");void 0!==u&&(s=u.value),n=0<t.attributes().length&&void 0!==t.attribute("location")?t.attribute("location").value:"right";for(var l=t.elements(),c=0,h=l.length;c<h;++c){var f=l[c];if("repeat"===f.name&&f.hasAttributes)i=!0,r=f.attribute("direction").value;else if("ending"===f.name&&f.hasAttributes&&void 0!==f.attribute("type")&&void 0!==f.attribute("number")){o=f.attribute("type").value;for(var p=f.attribute("number").value.split("[,+]"),d=0,b=p.length;d<b;++d){var y=p[d],m=y.match("[0-9]");if(-1!==y.search("-")&&2===m.length)for(var g=parseInt(m[0],10),v=parseInt(m[1],10),_=g;_<=v;_++)a.push(_);else for(var S=0,x=m.length;S<x;++S)_=m[S],a.push(parseInt(_,10))}}}if("light-heavy"!==s||a.length,i||0<a.length)if("left"===n){if("start"===o){var w=new E.RepetitionInstruction(this.currentMeasureIndex,E.RepetitionInstructionEnum.Ending,E.AlignmentType.Begin,void 0,a);this.addInstruction(this.repetitionInstructions,w)}"forward"===r&&(w=new E.RepetitionInstruction(this.currentMeasureIndex,E.RepetitionInstructionEnum.StartLine),this.addInstruction(this.repetitionInstructions,w))}else"stop"!==o&&"discontinue"!==o||(w=new E.RepetitionInstruction(this.currentMeasureIndex,E.RepetitionInstructionEnum.Ending,E.AlignmentType.End,void 0,a),this.addInstruction(this.repetitionInstructions,w)),"backward"===r&&(w=new E.RepetitionInstruction(this.currentMeasureIndex,E.RepetitionInstructionEnum.BackJumpLine),this.addInstruction(this.repetitionInstructions,w))}},r.prototype.handleRepetitionInstructionsFromWordsOrSymbols=function(t,e){var n=t.element("words");if(void 0!==n){var i=n.value.trim().toLowerCase();if(a.StringUtil.StringContainsSeparatedWord(i,"d\\s?\\.s\\. al fine")){var r=this.currentMeasureIndex;e<.5&&this.currentMeasureIndex<this.xmlMeasureList[0].length-1&&r--;var o=new E.RepetitionInstruction(r,E.RepetitionInstructionEnum.DalSegnoAlFine);return this.addInstruction(this.repetitionInstructions,o),!0}var s="d\\.\\s?c\\.";if(a.StringUtil.StringContainsSeparatedWord(i,s+" al coda"))return r=this.currentMeasureIndex,e<.5&&r--,o=new E.RepetitionInstruction(r,E.RepetitionInstructionEnum.DalSegnoAlCoda),this.addInstruction(this.repetitionInstructions,o),!0;if(a.StringUtil.StringContainsSeparatedWord(i,s+" al fine"))return r=this.currentMeasureIndex,e<.5&&this.currentMeasureIndex<this.xmlMeasureList[0].length-1&&r--,o=new E.RepetitionInstruction(r,E.RepetitionInstructionEnum.DaCapoAlFine),this.addInstruction(this.repetitionInstructions,o),!0;if(a.StringUtil.StringContainsSeparatedWord(i,s+" al coda"))return r=this.currentMeasureIndex,e<.5&&r--,o=new E.RepetitionInstruction(r,E.RepetitionInstructionEnum.DaCapoAlCoda),this.addInstruction(this.repetitionInstructions,o),!0;if(a.StringUtil.StringContainsSeparatedWord(i,s)||a.StringUtil.StringContainsSeparatedWord(i,"da\\s?capo"))return r=this.currentMeasureIndex,e<.5&&this.currentMeasureIndex<this.xmlMeasureList[0].length-1&&r--,o=new E.RepetitionInstruction(r,E.RepetitionInstructionEnum.DaCapo),this.addInstruction(this.repetitionInstructions,o),!0;if(a.StringUtil.StringContainsSeparatedWord(i,"d\\s?\\.s\\.")||a.StringUtil.StringContainsSeparatedWord(i,"dal\\s?segno"))return r=this.currentMeasureIndex,e<.5&&this.currentMeasureIndex<this.xmlMeasureList[0].length-1&&r--,o=new E.RepetitionInstruction(r,E.RepetitionInstructionEnum.DalSegno),this.addInstruction(this.repetitionInstructions,o),!0;if(a.StringUtil.StringContainsSeparatedWord(i,"to\\s?coda")||a.StringUtil.StringContainsSeparatedWord(i,"a (la )?coda"))return r=this.currentMeasureIndex,e<.5&&r--,o=new E.RepetitionInstruction(r,E.RepetitionInstructionEnum.ToCoda),this.addInstruction(this.repetitionInstructions,o),!0;if(a.StringUtil.StringContainsSeparatedWord(i,"fine"))return r=this.currentMeasureIndex,e<.5&&r--,o=new E.RepetitionInstruction(r,E.RepetitionInstructionEnum.Fine),this.addInstruction(this.repetitionInstructions,o),!0;if(a.StringUtil.StringContainsSeparatedWord(i,"coda"))return r=this.currentMeasureIndex,.5<e&&r++,o=new E.RepetitionInstruction(r,E.RepetitionInstructionEnum.Coda),this.addInstruction(this.repetitionInstructions,o),!0;if(a.StringUtil.StringContainsSeparatedWord(i,"segno"))return r=this.currentMeasureIndex,.5<e&&r++,o=new E.RepetitionInstruction(r,E.RepetitionInstructionEnum.Segno),this.addInstruction(this.repetitionInstructions,o),!0}else{if(void 0!==t.element("segno"))return r=this.currentMeasureIndex,.5<e&&r++,o=new E.RepetitionInstruction(r,E.RepetitionInstructionEnum.Segno),this.addInstruction(this.repetitionInstructions,o),!0;if(void 0!==t.element("coda"))return r=this.currentMeasureIndex,.5<e&&r++,o=new E.RepetitionInstruction(r,E.RepetitionInstructionEnum.Coda),this.addInstruction(this.repetitionInstructions,o),!0}return!1},r.prototype.removeRedundantInstructions=function(){for(var t=0,e=0,n=0,i=0,r=0;r<this.repetitionInstructions.length;r++){var o=this.repetitionInstructions[r];switch(o.type){case E.RepetitionInstructionEnum.Coda:0<n&&this.findInstructionInPreviousMeasure(r,o.measureIndex,E.RepetitionInstructionEnum.ToCoda)&&(o.type=E.RepetitionInstructionEnum.None),0===e&&0===n&&(o.type=E.RepetitionInstructionEnum.ToCoda,o.alignment=E.AlignmentType.End,o.measureIndex--);break;case E.RepetitionInstructionEnum.Segno:if(0<t-i){for(var s=!1,a=0,u=this.repetitionInstructions.length;a<u;++a){var l=this.repetitionInstructions[a];if(o.measureIndex-l.measureIndex==1)switch(l.type){case E.RepetitionInstructionEnum.BackJumpLine:l.type=0<n-e?E.RepetitionInstructionEnum.DalSegnoAlCoda:E.RepetitionInstructionEnum.DalSegno,o.type=E.RepetitionInstructionEnum.None,s=!0;break;case E.RepetitionInstructionEnum.DalSegno:case E.RepetitionInstructionEnum.DalSegnoAlFine:case E.RepetitionInstructionEnum.DalSegnoAlCoda:o.type=E.RepetitionInstructionEnum.None,s=!0}if(s)break}if(s)break;o.type=0<n-e?E.RepetitionInstructionEnum.DalSegnoAlCoda:E.RepetitionInstructionEnum.DalSegno,o.alignment=E.AlignmentType.End,o.measureIndex--}}if(this.backwardSearchForPreviousIdenticalInstruction(r,o)||o.type===E.RepetitionInstructionEnum.None)this.repetitionInstructions.splice(r,1),r--;else switch(o.type){case E.RepetitionInstructionEnum.Fine:break;case E.RepetitionInstructionEnum.ToCoda:n++;break;case E.RepetitionInstructionEnum.Coda:e++;break;case E.RepetitionInstructionEnum.Segno:t++;break;case E.RepetitionInstructionEnum.DalSegnoAlFine:case E.RepetitionInstructionEnum.DalSegnoAlCoda:i++}}this.repetitionInstructions.sort(c.RepetitionInstructionComparer.Compare)},r.prototype.findInstructionInPreviousMeasure=function(t,e,n){for(var i=t-1;0<=i;i--){var r=this.repetitionInstructions[i];if(e-r.measureIndex==1&&r.type===n)return!0}return!1},r.prototype.backwardSearchForPreviousIdenticalInstruction=function(t,e){for(var n=t-1;0<=n;n--)if(this.repetitionInstructions[n].equals(e))return!0;return!1},r.prototype.addInstruction=function(t,e){for(var n=!0,i=0,r=t.length;i<r;++i){var o=t[i];if(e.equals(o)){n=!1;break}}n&&t.push(e)},r);function r(){}e.RepetitionInstructionReader=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(37),a=n(37),r=n(13),o=(s.prototype.calculateRepetitions=function(t,e){this.musicSheet=t,this.repetitionInstructions=e;for(var n=this.musicSheet.SourceMeasures,i=0,r=this.repetitionInstructions.length;i<r;++i){var o=this.repetitionInstructions[i];this.currentMeasureIndex=o.measureIndex,this.currentMeasure=n[this.currentMeasureIndex],this.handleRepetitionInstructions(o)}for(i=0,r=this.musicSheet.SourceMeasures.length;i<r;++i){var s=this.musicSheet.SourceMeasures[i];1<s.FirstRepetitionInstructions.length&&s.FirstRepetitionInstructions.sort(a.RepetitionInstructionComparer.Compare),1<s.LastRepetitionInstructions.length&&s.LastRepetitionInstructions.sort(a.RepetitionInstructionComparer.Compare)}},s.prototype.handleRepetitionInstructions=function(t){if(!this.currentMeasure)return!1;switch(t.type){case i.RepetitionInstructionEnum.StartLine:this.currentMeasure.FirstRepetitionInstructions.push(t);break;case i.RepetitionInstructionEnum.BackJumpLine:this.currentMeasure.LastRepetitionInstructions.push(t);break;case i.RepetitionInstructionEnum.Ending:if(t.alignment===i.AlignmentType.Begin)this.currentMeasure.FirstRepetitionInstructions.push(t);else for(var e=0,n=t.endingIndices.length;e<n;++e)this.currentMeasure.LastRepetitionInstructions.push(t);break;case i.RepetitionInstructionEnum.Segno:this.currentMeasure.FirstRepetitionInstructions.push(t);break;case i.RepetitionInstructionEnum.Fine:case i.RepetitionInstructionEnum.ToCoda:case i.RepetitionInstructionEnum.Coda:case i.RepetitionInstructionEnum.DaCapo:case i.RepetitionInstructionEnum.DalSegno:case i.RepetitionInstructionEnum.DalSegnoAlFine:case i.RepetitionInstructionEnum.DaCapoAlFine:case i.RepetitionInstructionEnum.DalSegnoAlCoda:case i.RepetitionInstructionEnum.DaCapoAlCoda:this.currentMeasure.LastRepetitionInstructions.push(t);break;case i.RepetitionInstructionEnum.None:break;default:throw new r.ArgumentOutOfRangeException("currentRepetitionInstruction")}return!0},s);function s(){this.repetitionInstructions=[]}e.RepetitionCalculator=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(60),r=n(57),o=n(208),s=(a.MXLtoIXmlElement=function(t){var n=new o;return n.loadAsync(t).then(function(t){return n.file("META-INF/container.xml").async("string")},function(t){throw t}).then(function(t){var e=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("rootfile")[0].getAttribute("full-path");return n.file(e).async("string")},function(t){throw t}).then(function(t){var e=(new DOMParser).parseFromString(t,"text/xml"),n=new i.IXmlElement(e.documentElement);return r.Promise.resolve(n)},function(t){throw t}).then(function(t){return t},function(t){throw new Error("extractSheetFromMxl: "+t.message)})},a.MXLtoXMLstring=function(t){var n=new o;return n.loadAsync(t).then(function(t){return n.file("META-INF/container.xml").async("string")},function(t){throw t}).then(function(t){var e=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("rootfile")[0].getAttribute("full-path");return n.file(e).async("string")},function(t){throw t})},a);function a(){}e.MXLHelper=s},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){t.exports=n(212)},function(A,t,C){"use strict";(function(t,b){var y=C(54);A.exports=c;var s,m=C(149);c.ReadableState=o,C(76).EventEmitter;function g(t,e){return t.listeners(e).length}var r=C(152),p=C(55).Buffer,d=t.Uint8Array||function(){},e=C(46);e.inherits=C(39);var n=C(213),v=void 0;v=n&&n.debuglog?n.debuglog("stream"):function(){};var a,u=C(214),i=C(153);e.inherits(c,r);var l=["error","close","destroy","pause","resume"];function o(t,e){t=t||{};var n=e instanceof(s=s||C(31));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,r=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(r||0===r)?r:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(a=a||C(155).StringDecoder,this.decoder=new a(t.encoding),this.encoding=t.encoding)}function c(t){if(s=s||C(31),!(this instanceof c))return new c(t);this._readableState=new o(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),r.call(this)}function h(t,e,n,i,r){var o,s,a,u,l,c,h,f=t._readableState;return null===e?(f.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,S(t)}}(t,f)):(r||(a=f,c=u=e,p.isBuffer(c)||c instanceof d||"string"==typeof u||void 0===u||a.objectMode||(l=new TypeError("Invalid non-string/buffer chunk")),o=l),o?t.emit("error",o):f.objectMode||e&&0<e.length?("string"==typeof e||f.objectMode||Object.getPrototypeOf(e)===p.prototype||(s=e,e=p.from(s)),i?f.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):_(t,f,e,!0):f.ended?t.emit("error",new Error("stream.push() after EOF")):(f.reading=!1,f.decoder&&!n?(e=f.decoder.write(e),f.objectMode||0!==e.length?_(t,f,e,!1):w(t,f)):_(t,f,e,!1))):i||(f.reading=!1)),!(h=f).ended&&(h.needReadable||h.length<h.highWaterMark||0===h.length)}function _(t,e,n,i){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&S(t)),w(t,e)}Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),c.prototype.destroy=i.destroy,c.prototype._undestroy=i.undestroy,c.prototype._destroy=function(t,e){this.push(null),e(t)},c.prototype.push=function(t,e){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof t&&((e=e||i.defaultEncoding)!==i.encoding&&(t=p.from(t,e),e=""),n=!0),h(this,t,e,!1,n)},c.prototype.unshift=function(t){return h(this,t,null,!0,!1)},c.prototype.isPaused=function(){return!1===this._readableState.flowing},c.prototype.setEncoding=function(t){return a=a||C(155).StringDecoder,this._readableState.decoder=new a(t),this._readableState.encoding=t,this};function f(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=(8388608<=(n=t)?n=8388608:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0));var n}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(v("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?y.nextTick(x,t):x(t))}function x(t){v("emit readable"),t.emit("readable"),k(t)}function w(t,e){e.readingMore||(e.readingMore=!0,y.nextTick(E,t,e))}function E(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(v("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function P(t){v("readable nexttick read 0"),t.read(0)}function T(t,e){e.reading||(v("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),k(t),e.flowing&&!e.reading&&t.read(0)}function k(t){var e=t._readableState;for(v("flow",e.flowing);e.flowing&&null!==t.read(););}function O(t,e){return 0===e.length?null:(e.objectMode?s=e.buffer.shift():!t||t>=e.length?(s=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):(n=t,i=e.buffer,r=e.decoder,n<i.head.data.length?(o=i.head.data.slice(0,n),i.head.data=i.head.data.slice(n)):o=n===i.head.data.length?i.shift():r?function(t,e){var n=e.head,i=1,r=n.data;for(t-=r.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?r+=o:r+=o.slice(0,t),0==(t-=s)){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n).data=o.slice(s);break}++i}return e.length-=i,r}(n,i):function(t,e){var n=p.allocUnsafe(t),i=e.head,r=1;for(i.data.copy(n),t-=i.data.length;i=i.next;){var o=i.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),0==(t-=s)){s===o.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i).data=o.slice(s);break}++r}return e.length-=r,n}(n,i),s=o),s);var n,i,r,o,s}function M(t){var e=t._readableState;if(0<e.length)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,y.nextTick(R,e,t))}function R(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function L(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}c.prototype.read=function(t){v("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return v("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?M(this):S(this),null;if(0===(t=f(t,e))&&e.ended)return 0===e.length&&M(this),null;var i,r=e.needReadable;return v("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&v("length less than watermark",r=!0),e.ended||e.reading?v("reading or ended",r=!1):r&&(v("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=f(n,e))),null===(i=0<t?O(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&M(this)),null!==i&&this.emit("data",i),i},c.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},c.prototype.pipe=function(i,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=i;break;case 1:o.pipes=[o.pipes,i];break;default:o.pipes.push(i)}o.pipesCount+=1,v("pipe count=%d opts=%j",o.pipesCount,t);var e=t&&!1===t.end||i===b.stdout||i===b.stderr?d:s;function s(){v("onend"),i.end()}o.endEmitted?y.nextTick(e):r.once("end",e),i.on("unpipe",function t(e,n){v("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,v("cleanup"),i.removeListener("close",f),i.removeListener("finish",p),i.removeListener("drain",a),i.removeListener("error",h),i.removeListener("unpipe",t),r.removeListener("end",s),r.removeListener("end",d),r.removeListener("data",c),u=!0,!o.awaitDrain||i._writableState&&!i._writableState.needDrain||a())});var n,a=(n=r,function(){var t=n._readableState;v("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&g(n,"data")&&(t.flowing=!0,k(n))});i.on("drain",a);var u=!1,l=!1;function c(t){v("ondata"),(l=!1)!==i.write(t)||l||((1===o.pipesCount&&o.pipes===i||1<o.pipesCount&&-1!==L(o.pipes,i))&&!u&&(v("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function h(t){v("onerror",t),d(),i.removeListener("error",h),0===g(i,"error")&&i.emit("error",t)}function f(){i.removeListener("finish",p),d()}function p(){v("onfinish"),i.removeListener("close",f),d()}function d(){v("unpipe"),r.unpipe(i)}return r.on("data",c),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?m(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(i,"error",h),i.once("close",f),i.once("finish",p),i.emit("pipe",r),o.flowing||(v("pipe resume"),r.resume()),i},c.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t=t||e.pipes,e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var i=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<r;o++)i[o].emit("unpipe",this,n);return this}var s=L(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},c.prototype.addListener=c.prototype.on=function(t,e){var n=r.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&S(this):y.nextTick(P,this))}return n},c.prototype.resume=function(){var t,e,n=this._readableState;return n.flowing||(v("resume"),n.flowing=!0,t=this,(e=n).resumeScheduled||(e.resumeScheduled=!0,y.nextTick(T,t,e))),this},c.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this},c.prototype.wrap=function(e){var n=this,i=this._readableState,r=!1;for(var t in e.on("end",function(){if(v("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),e.on("data",function(t){v("wrapped data"),i.decoder&&(t=i.decoder.write(t)),i.objectMode&&null==t||(i.objectMode||t&&t.length)&&(n.push(t)||(r=!0,e.pause()))}),e)void 0===this[t]&&"function"==typeof e[t]&&(this[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t));for(var o=0;o<l.length;o++)e.on(l[o],this.emit.bind(this,l[o]));return this._read=function(t){v("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),c._fromList=O}).call(this,C(19),C(40))},function(t,e,n){t.exports=n(76).EventEmitter},function(t,e,n){"use strict";var o=n(54);function s(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,i=this._readableState&&this._readableState.destroyed,r=this._writableState&&this._writableState.destroyed;return i||r?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||o.nextTick(s,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(o.nextTick(s,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,r,o){(function(t){var e=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}r.setTimeout=function(){return new i(n.call(setTimeout,e,arguments),clearTimeout)},r.setInterval=function(){return new i(n.call(setInterval,e,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(e,this._id)},r.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},r.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},r._unrefActive=r.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},o(216),r.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,r.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,o(19))},function(t,e,n){"use strict";var i=n(55).Buffer,r=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(i.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=l,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(1<t.lastNeed&&1<e.length){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(2<t.lastNeed&&2<e.length&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1);var n=t.toString("utf16le",e);if(n){var i=n.charCodeAt(n.length-1);if(55296<=i&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0==n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}(e.StringDecoder=o).prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var n=function(t,e,n){var i=e.length-1;if(i<n)return 0;var r=s(e[i]);return 0<=r?(0<r&&(t.lastNeed=r-1),r):--i<n||-2===r?0:0<=(r=s(e[i]))?(0<r&&(t.lastNeed=r-2),r):--i<n||-2===r?0:0<=(r=s(e[i]))?(0<r&&(2===r?r=0:t.lastNeed=r-3),r):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var i=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=o;var i=n(31),r=n(46);function o(t){if(!(this instanceof o))return new o(t);i.call(this,t),this._transformState={afterTransform:function(t,e){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,(n.writecb=null)!=e&&this.push(e),i(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var n=this;"function"==typeof this._flush?this._flush(function(t,e){a(n,t,e)}):a(this,null,null)}function a(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=n(39),r.inherits(o,i),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,i.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;i.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t,e,n){"use strict";var p=n(3),h=n(26),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(t){for(var e,n,i,r,o,s,a,u=[],l=0,c=t.length,h=c,f="string"!==p.getTypeOf(t);l<t.length;)h=c-l,i=f?(e=t[l++],n=l<c?t[l++]:0,l<c?t[l++]:0):(e=t.charCodeAt(l++),n=l<c?t.charCodeAt(l++):0,l<c?t.charCodeAt(l++):0),r=e>>2,o=(3&e)<<4|n>>4,s=1<h?(15&n)<<2|i>>6:64,a=2<h?63&i:64,u.push(d.charAt(r)+d.charAt(o)+d.charAt(s)+d.charAt(a));return u.join("")},e.decode=function(t){var e,n,i,r,o,s,a=0,u=0;if("data:"===t.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var l,c=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===d.charAt(64)&&c--,t.charAt(t.length-2)===d.charAt(64)&&c--,c%1!=0)throw new Error("Invalid base64 input, bad content length.");for(l=h.uint8array?new Uint8Array(0|c):new Array(0|c);a<t.length;)e=d.indexOf(t.charAt(a++))<<2|(r=d.indexOf(t.charAt(a++)))>>4,n=(15&r)<<4|(o=d.indexOf(t.charAt(a++)))>>2,i=(3&o)<<6|(s=d.indexOf(t.charAt(a++))),l[u++]=e,64!==o&&(l[u++]=n),64!==s&&(l[u++]=i);return l}},function(s,t,a){"use strict";(function(u){var l=a(3),r=a(226),o=a(12),c=a(157),t=a(26),e=a(47),n=null;if(t.nodestream)try{n=a(227)}catch(t){}function i(t,e,n){var i=e;switch(e){case"blob":case"arraybuffer":i="uint8array";break;case"base64":i="string"}try{this._internalType=i,this._outputType=e,this._mimeType=n,l.checkSupport(i),this._worker=t.pipe(new r(i)),t.lock()}catch(t){this._worker=new o("error"),this._worker.error(t)}}i.prototype={accumulate:function(t){return function(t,a){return new e.Promise(function(e,n){var i=[],r=t._internalType,o=t._outputType,s=t._mimeType;t.on("data",function(t,e){i.push(t),a&&a(e)}).on("error",function(t){i=[],n(t)}).on("end",function(){try{var t=function(t,e,n){switch(t){case"blob":return l.newBlob(l.transformTo("arraybuffer",e),n);case"base64":return c.encode(e);default:return l.transformTo(t,e)}}(o,function(t,e){var n,i=0,r=null,o=0;for(n=0;n<e.length;n++)o+=e[n].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(r=new Uint8Array(o),n=0;n<e.length;n++)r.set(e[n],i),i+=e[n].length;return r;case"nodebuffer":return u.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(r,i),s);e(t)}catch(t){n(t)}i=[]}).resume()})}(this,t)},on:function(t,e){var n=this;return"data"===t?this._worker.on(t,function(t){e.call(n,t.data,t.meta)}):this._worker.on(t,function(){l.delay(e,arguments,n)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(l.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new n(this,{objectMode:"nodebuffer"!==this._outputType},t)}},s.exports=i}).call(this,a(45).Buffer)},function(t,e,n){"use strict";e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},function(t,e,n){"use strict";var i=n(3),r=n(12);function o(t){r.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then(function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=i.getTypeOf(t),e.isPaused||e._tickAndRepeat()},function(t){e.error(t)})}i.inherits(o,r),o.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},function(t,e,n){"use strict";var i=n(3),r=n(12);function o(t){r.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}i.inherits(o,r),o.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}r.prototype.processChunk.call(this,t)},t.exports=o},function(t,e,n){"use strict";var i=n(12),r=n(80);function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n(3).inherits(o,i),o.prototype.processChunk=function(t){this.streamInfo.crc32=r(t.data,this.streamInfo.crc32||0),this.push(t)},t.exports=o},function(t,e,n){"use strict";var i=n(12);e.STORE={magic:"\0\0",compressWorker:function(t){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},e.DEFLATE=n(230)},function(t,e,n){"use strict";t.exports=function(t,e,n,i){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;o=o+(r=r+e[i++]|0)|0,--s;);r%=65521,o%=65521}return r|o<<16|0}},function(t,e,n){"use strict";var a=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e,n,i){var r=a,o=i+n;t^=-1;for(var s=i;s<o;s++)t=t>>>8^r[255&(t^e[s])];return-1^t}},function(t,e,n){"use strict";var u=n(27),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var l=new u.Buf8(256),i=0;i<256;i++)l[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function c(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&r))return String.fromCharCode.apply(null,u.shrinkBuf(t,e));for(var n="",i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n}l[254]=l[254]=1,e.string2buf=function(t){var e,n,i,r,o,s=t.length,a=0;for(r=0;r<s;r++)55296==(64512&(n=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=t.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new u.Buf8(a),r=o=0;o<a;r++)55296==(64512&(n=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=t.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),n<128?e[o++]=n:(n<2048?e[o++]=192|n>>>6:(n<65536?e[o++]=224|n>>>12:(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63),e[o++]=128|n>>>6&63),e[o++]=128|63&n);return e},e.buf2binstring=function(t){return c(t,t.length)},e.binstring2buf=function(t){for(var e=new u.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,i,r,o,s=e||t.length,a=new Array(2*s);for(n=i=0;n<s;)if((r=t[n++])<128)a[i++]=r;else if(4<(o=l[r]))a[i++]=65533,n+=o-1;else{for(r&=2===o?31:3===o?15:7;1<o&&n<s;)r=r<<6|63&t[n++],o--;1<o?a[i++]=65533:r<65536?a[i++]=r:(r-=65536,a[i++]=55296|r>>10&1023,a[i++]=56320|1023&r)}return c(a,i)},e.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+l[t[n]]>e?n:e}},function(t,e,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,n){"use strict";e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\b"},function(t,e,n){"use strict";var i=n(3),r=n(26),o=n(171),s=n(244),a=n(245),u=n(173);t.exports=function(t){var e=i.getTypeOf(t);return i.checkSupport(e),"string"!==e||r.uint8array?"nodebuffer"===e?new a(t):r.uint8array?new u(i.transformTo("uint8array",t)):new o(i.transformTo("array",t)):new s(t)}},function(t,e,n){"use strict";var i=n(172);function r(t){i.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}n(3).inherits(r,i),r.prototype.byteAt=function(t){return this.data[this.zero+t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===i&&this.data[o+3]===r)return o-this.zero;return-1},r.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&n===o[1]&&i===o[2]&&r===o[3]},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=r},function(t,e,n){"use strict";var i=n(3);function r(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return i.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},t.exports=r},function(t,e,n){"use strict";var i=n(171);function r(t){i.call(this,t)}n(3).inherits(r,i),r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=r},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(13)),i(e(69)),i(e(70)),i(e(16)),i(e(126)),i(e(144)),i(e(247)),i(e(248)),i(e(250)),i(e(252))},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(176)),i(e(174)),i(e(260)),i(e(262))},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(83)),i(e(84)),i(e(85)),i(e(82))},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,m=n(20),s=n(185),a=n(119),u=n(104),g=n(14),v=n(1),_=n(25),l=n(120),c=n(121),S=n(192),f=n(193),T=n(4),k=n(9),j=n(123),p=n(112),h=(o=m.MusicSheetCalculator,r(d,o),d.prototype.clearRecreatedObjects=function(){o.prototype.clearRecreatedObjects.call(this);for(var t=0,e=this.graphicalMusicSheet.MeasureList;t<e.length;t++)for(var n=0,i=e[t];n<i.length;n++)i[n].clean()},d.prototype.formatMeasures=function(){for(var t=0,e=this.graphicalMusicSheet.MeasureList;t<e.length;t++){var n=e[t];n[0].format();for(var i=0,r=n;i<r.length;i++)for(var o=0,s=r[i].staffEntries;o<s.length;o++)s[o].calculateXPosition()}},d.prototype.calculateMeasureXLayout=function(t){for(var e=[],n=new g.Flow.Formatter,i=0,r=t;i<r.length;i++){var o=(h=r[i]).vfVoices,s=[];for(var a in o)o.hasOwnProperty(a)&&(s.push(o[a]),e.push(o[a]));0!==s.length?n.joinVoices(s):v.info("Found a measure with no voices. Continuing anyway.",o)}var u=200;if(0<e.length){u=n.preCalculateMinTotalWidth(e)/_.unitInPixels+5,m.MusicSheetCalculator.setMeasuresMinStaffEntriesWidth(t,u);for(var l=0,c=t;l<c.length;l++){var h;if((h=c[l])===t[0]){var f=h;f.formatVoices=function(t){n.format(e,t)},f.formatVoices(u*_.unitInPixels)}else h.formatVoices=void 0}}for(var p=0,d=t;p<d.length;p++)for(var b=0,y=d[p].staffEntries;b<y.length;b++)y[b].calculateXPosition();return u},d.prototype.calculateMeasureWidthFromLyrics=function(t,e){for(var n=1,i=0,r=t;i<r.length;i++)for(var o=r[i],s={},a=0;a<o.staffEntries.length;a++){var u=o.staffEntries[a];if(0!==u.LyricsEntries.length)for(var l=0;l<u.LyricsEntries.length;l++){var c=u.LyricsEntries[l],h=c.GraphicalLabel.Label.textAlignment,f=T.EngravingRules.Rules.HorizontalBetweenLyricsDistance,p=T.EngravingRules.Rules.LyricOverlapAllowedIntoNextMeasure;if(c.ParentLyricWord){0<c.LyricsEntry.SyllableIndex&&(f=T.EngravingRules.Rules.BetweenSyllableMinimumDistance,k.TextAlignment.IsCenterAligned(c.GraphicalLabel.Label.textAlignment)&&(f+=1));var d=c.ParentLyricWord.GetLyricWord.Syllables;1<d.length&&c.LyricsEntry.SyllableIndex<d.length-1&&(void 0===this.dashSpace&&(this.dashSpace=1.5),p-=this.dashSpace)}var b=c.GraphicalLabel.PositionAndShape,y=b.Size.width,m=u.PositionAndShape.RelativePosition.x+b.BorderMarginLeft;void 0!==s[l]&&s[l].extend;var g=void 0,v=void 0;s[l]&&(v=m-s[l].lyricsXPosition);var _=void 0,S=void 0,x=e*n;k.TextAlignment.IsCenterAligned(h)?(_=x-m,S=y/2-(p/=4),s[l]&&(g=s[l].labelWidth/2+y/2+f)):k.TextAlignment.IsLeft(h)&&(_=x-m,S=y-p,s[l]&&(g=s[l].labelWidth+f));var w,E=S/_,P=1;s[l]&&(P=g/v,4<s[l].sourceNoteDuration.Denominator&&(P*=1.1)),w=Math.max(E,P),n=Math.max(n,w),s[l]={extend:c.LyricsEntry.extend,labelWidth:y,lyricsXPosition:m,measureNumber:o.MeasureNumber,sourceNoteDuration:c.LyricsEntry.Parent.Notes[0].Length,text:c.LyricsEntry.Text}}}return e*n},d.prototype.createGraphicalTie=function(t,e,n,i,r){return new a.GraphicalTie(t,i,r)},d.prototype.updateStaffLineBorders=function(t){t.SkyBottomLineCalculator.updateStaffLineBorders()},d.prototype.graphicalMeasureCreatedCalculations=function(t){t.graphicalMeasureCreatedCalculations()},d.prototype.layoutVoiceEntry=function(t,e,n,i){},d.prototype.layoutStaffEntry=function(t){t.parentMeasure.layoutStaffEntry(t)},d.prototype.calculateSystemYLayout=function(){for(var t=0,e=this.graphicalMusicSheet.MusicPages;t<e.length;t++){for(var n=e[t],i=0,r=n.MusicSystems;i<r.length;i++){var o=r[i];this.optimizeDistanceBetweenStaffLines(o)}this.calculateMusicSystemsRelativePositions(n)}},d.prototype.initGraphicalMeasuresCreation=function(){},d.prototype.layoutArticulationMarks=function(t,e,n){},d.prototype.layoutGraphicalTie=function(t,e){var n=t.StartNote,i=t.EndNote,r=void 0,o=0;void 0!==n&&void 0!==n.vfnote&&2<=n.vfnote.length&&(r=n.vfnote[0],o=n.vfnote[1]);var s=void 0,a=0;if(void 0!==i&&void 0!==i.vfnote&&2<=i.vfnote.length&&(s=i.vfnote[0],a=i.vfnote[1]),e){var u=new g.Flow.StaveTie({first_indices:[o],first_note:r});n.parentVoiceEntry.parentStaffEntry.parentMeasure.vfTies.push(u);var l=new g.Flow.StaveTie({last_indices:[a],last_note:s});i.parentVoiceEntry.parentStaffEntry.parentMeasure.vfTies.push(l)}else{var c=new g.Flow.StaveTie({first_indices:[o],first_note:r,last_indices:[a],last_note:s});i.parentVoiceEntry.parentStaffEntry.parentMeasure.vfTies.push(c)}},d.prototype.calculateDynamicExpressionsForMultiExpression=function(t,e,n){if(!(e<T.EngravingRules.Rules.MinMeasureToDrawIndex||e>T.EngravingRules.Rules.MaxMeasureToDrawIndex)){var i=t.AbsoluteTimestamp,r=this.graphicalMusicSheet.MeasureList[e],o=r[n].ParentStaffLine,s=r[n],a=this.getRelativePositionInStaffLineFromTimestamp(i,n,o,o.isPartOfMultiStaffInstrument()),u=a;if(a.x<=0&&(u.x=s.beginInstructionsWidth+this.rules.RhythmRightMargin),t.InstantaneousDynamic){var l=new f.VexFlowInstantaneousDynamicExpression(t.InstantaneousDynamic,o,s);this.calculateGraphicalInstantaneousDynamicExpression(l,u)}if(t.StartingContinuousDynamic){var c=t.StartingContinuousDynamic,h=new p.VexFlowContinuousDynamicExpression(t.StartingContinuousDynamic,o);h.StartMeasure=s,!h.IsVerbal&&c.EndMultiExpression?this.calculateGraphicalContinuousDynamic(h,u):h.IsVerbal?this.calculateGraphicalVerbalContinuousDynamic(h,u):v.warn("This continuous dynamic is not covered")}}},d.prototype.createMetronomeMark=function(t){var e=this.graphicalMusicSheet.MeasureList[0][0].getVFStave();e.setTempo({bpm:t.TempoInBpm,dots:t.dotted,duration:"q"},T.EngravingRules.Rules.MetronomeMarkYShift*_.unitInPixels),e.getModifiers()[e.getModifiers().length-1].setShiftX(T.EngravingRules.Rules.MetronomeMarkXShift*_.unitInPixels);var n=this.graphicalMusicSheet.MeasureList[0][0].ParentStaffLine.SkyLine;n[0]=Math.min(n[0],-4.5+T.EngravingRules.Rules.MetronomeMarkYShift)},d.prototype.calculateSingleOctaveShift=function(t,e,n,i){var r=e.OctaveShiftStart,o=r.ParentStartMultiExpression.Timestamp,s=r.ParentEndMultiExpression.Timestamp,a=this.graphicalMusicSheet.MeasureList[n][i].ParentStaffLine,u=void 0;void 0!==r.ParentEndMultiExpression&&(u=this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(r.ParentEndMultiExpression.SourceMeasureParent,i));var l=void 0;if(void 0!==r.ParentEndMultiExpression&&(l=this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(r.ParentStartMultiExpression.SourceMeasureParent,i)),void 0!==u&&void 0!==a&&void 0!==u.ParentStaffLine){var c=new S.VexFlowOctaveShift(r,a.PositionAndShape);a.OctaveShifts.push(c);var h=l.findGraphicalStaffEntryFromTimestamp(o),f=u.findGraphicalStaffEntryFromTimestamp(s);if(c.setStartNote(h),u.ParentStaffLine!==l.ParentStaffLine){c.endsOnDifferentStaffLine=!0;var p=l.ParentStaffLine.Measures[l.ParentStaffLine.Measures.length-1],d=p.staffEntries[p.staffEntries.length-1];c.setEndNote(d);var b=new S.VexFlowOctaveShift(r,u.PositionAndShape);u.ParentStaffLine.OctaveShifts.push(b);var y=u.ParentStaffLine.Measures[0].staffEntries[0];b.setStartNote(y),b.setEndNote(f)}else c.setEndNote(f)}else v.warn("End measure or staffLines for octave shift are undefined! This should not happen!")},d.prototype.calculateWordRepetitionInstruction=function(t,e){for(var n=void 0,i=this.graphicalMusicSheet.MeasureList[e],r=0,o=i.length;r<o;++r){var s=i[r];if(void 0!==s.ParentStaffLine&&s.ParentStaff.ParentInstrument.Visible){n=s;break}}void 0!==n&&n.addWordRepetition(t)},d.prototype.calculateMoodAndUnknownExpression=function(t,e,n){},d.prototype.handleTiedGraphicalNote=function(t,e,n,i,r,o,s,a){},d.prototype.handleBeam=function(t,e,n){t.parentVoiceEntry.parentStaffEntry.parentMeasure.handleBeam(t,e)},d.prototype.handleVoiceEntryLyrics=function(t,s,a){var u=this;t.LyricsEntries.forEach(function(t,e){var n=new l.GraphicalLyricEntry(e,s,u.rules.LyricsHeight,u.rules.StaffHeight);if(s.LyricsEntries.push(n),n.GraphicalLabel.setLabelPositionAndShapeBorders(),void 0!==e.Word){var i=e.Word.Syllables.indexOf(e),r=a.indexOf(e.Word);if(-1===r&&(a.push(e.Word),r=a.indexOf(e.Word)),0===u.graphicalLyricWords.length||r>u.graphicalLyricWords.length-1){var o=new c.GraphicalLyricWord(e.Word);(n.ParentLyricWord=o).GraphicalLyricsEntries[i]=n,u.graphicalLyricWords.push(o)}else o=u.graphicalLyricWords[r],(n.ParentLyricWord=o).GraphicalLyricsEntries[i]=n,o.isFilled()&&(a.splice(r,1),u.graphicalLyricWords.splice(u.graphicalLyricWords.indexOf(o),1))}})},d.prototype.handleVoiceEntryOrnaments=function(t,e,n){},d.prototype.handleVoiceEntryArticulations=function(t,e,n){},d.prototype.handleVoiceEntryTechnicalInstructions=function(t,e,n){},d.prototype.handleTuplet=function(t,e,n){t.parentVoiceEntry.parentStaffEntry.parentMeasure.handleTuplet(t,e)},d.prototype.findIndexGraphicalSlurFromSlur=function(t,e){for(var n=0;n<t.length;n++)if(t[n].slur===e)return n;return-1},d.prototype.calculateSlurs=function(){for(var t={},e=0,n=this.graphicalMusicSheet.MeasureList[0];e<n.length;e++)t[n[e].ParentStaff.idInMusicSheet]=[];for(var i=0,r=this.graphicalMusicSheet.MusicPages;i<r.length;i++)for(var o=0,s=r[i].MusicSystems;o<s.length;o++)for(var a=0,u=s[o].StaffLines;a<u.length;a++){for(var l=t[(F=u[a]).ParentStaff.idInMusicSheet],c=0;c<l.length;c++){var h=l[c],f=new j.GraphicalSlur(h.slur);F.addSlurToStaffline(f),l[c]=f}for(var p=0,d=F.Measures;p<d.length;p++)for(var b=0,y=d[p].staffEntries;b<y.length;b++){for(var m=y[b],g=0,v=m.graphicalVoiceEntries;g<v.length;g++)for(var _=0,S=v[g].notes;_<S.length;_++)for(var x=S[_],w=0,E=x.sourceNote.NoteSlurs;w<E.length;w++){var P=E[w];if(void 0!==P.EndNote&&void 0!==P.StartNote){if(P.StartNote===x.sourceNote){if(void 0!==x.sourceNote.NoteTie&&x.parentVoiceEntry.parentStaffEntry.getAbsoluteTimestamp()!==x.sourceNote.NoteTie.StartNote.getAbsoluteTimestamp())break;var T=new j.GraphicalSlur(P);l.push(T),F.addSlurToStaffline(T)}if(P.EndNote===x.sourceNote){var k=this.findIndexGraphicalSlurFromSlur(l,P);0<=k&&(-1===(T=l[k]).staffEntries.indexOf(m)&&T.staffEntries.push(m),l.splice(k,1))}}}for(var O=0,M=l;O<M.length;O++)-1===(T=M[O]).staffEntries.indexOf(m)&&T.staffEntries.push(m)}}for(var R=0,L=this.graphicalMusicSheet.MusicPages;R<L.length;R++)for(var A=0,C=L[R].MusicSystems;A<C.length;A++)for(var I=0,N=C[A].StaffLines;I<N.length;I++)for(var F,B=0,D=(F=N[I]).GraphicalSlurs.sort(j.GraphicalSlur.Compare);B<D.length;B++)(T=D[B]).slur.isCrossed()||T.calculateCurve(this.rules)},d);function d(){var t=o.call(this)||this;return m.MusicSheetCalculator.symbolFactory=new s.VexFlowGraphicalSymbolFactory,m.MusicSheetCalculator.TextMeasurer=new u.VexFlowTextMeasurer,t}e.VexFlowMusicSheetCalculator=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),r=n(15),o=n(89),s=(a.prototype.add=function(t,e){if(void 0===e&&(e=1),i.isUndefined(t)||e<=0)return!1;if(this.contains(t))this.dictionary.getValue(t).copies+=e;else{var n={value:t,copies:e};this.dictionary.setValue(t,n)}return this.nElements+=e,!0},a.prototype.count=function(t){return this.contains(t)?this.dictionary.getValue(t).copies:0},a.prototype.contains=function(t){return this.dictionary.containsKey(t)},a.prototype.remove=function(t,e){if(void 0===e&&(e=1),i.isUndefined(t)||e<=0)return!1;if(this.contains(t)){var n=this.dictionary.getValue(t);return e>n.copies?this.nElements-=n.copies:this.nElements-=e,n.copies-=e,n.copies<=0&&this.dictionary.remove(t),!0}return!1},a.prototype.toArray=function(){for(var t=[],e=0,n=this.dictionary.values();e<n.length;e++)for(var i=n[e],r=i.value,o=i.copies,s=0;s<o;s++)t.push(r);return t},a.prototype.toSet=function(){for(var t=new o.default(this.toStrF),e=0,n=this.dictionary.values();e<n.length;e++){var i=n[e].value;t.add(i)}return t},a.prototype.forEach=function(o){this.dictionary.forEach(function(t,e){for(var n=e.value,i=e.copies,r=0;r<i;r++)if(!1===o(n))return!1;return!0})},a.prototype.size=function(){return this.nElements},a.prototype.isEmpty=function(){return 0===this.nElements},a.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},a);function a(t){this.toStrF=t||i.defaultToString,this.dictionary=new r.default(this.toStrF),this.nElements=0}e.default=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=(o=n(90).default,r(a,o),a);function a(){return null!==o&&o.apply(this,arguments)||this}e.default=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),s=n(10),a=(c.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},c),u=(l.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},l);function l(){this.key=null,this.value=null}function c(t,e){this.key=t,this.value=e}var h,f=(h=o.default,r(p,h),p.prototype.appendToTail=function(t){var e=this.tail.prev;(e.next=t).prev=e,t.next=this.tail,this.tail.prev=t},p.prototype.getLinkedDictionaryPair=function(t){if(!s.isUndefined(t)){var e="$"+this.toStr(t);return this.table[e]}},p.prototype.getValue=function(t){var e=this.getLinkedDictionaryPair(t);if(!s.isUndefined(e))return e.value},p.prototype.remove=function(t){var e=this.getLinkedDictionaryPair(t);if(!s.isUndefined(e))return h.prototype.remove.call(this,t),e.unlink(),e.value},p.prototype.clear=function(){h.prototype.clear.call(this),this.head.next=this.tail,this.tail.prev=this.head},p.prototype.replace=function(t,e){var n="$"+this.toStr(e.key);e.next=t.next,e.prev=t.prev,this.remove(t.key),(e.prev.next=e).next.prev=e,this.table[n]=e,++this.nElements},p.prototype.setValue=function(t,e){if(!s.isUndefined(t)&&!s.isUndefined(e)){var n=this.getLinkedDictionaryPair(t),i=new a(t,e),r="$"+this.toStr(t);return s.isUndefined(n)?(this.appendToTail(i),this.table[r]=i,void++this.nElements):(this.replace(n,i),n.value)}},p.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(t)}),n},p.prototype.values=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),n},p.prototype.forEach=function(t){for(var e=this.head.next;null!==e.next;){if(!1===t(e.key,e.value))return;e=e.next}},p);function p(t){var e=h.call(this,t)||this;return e.head=new u,e.tail=new u,e.head.next=e.tail,e.tail.prev=e.head,e}e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),i=n(15),o=n(41),s=(a.prototype.getValue=function(t){var e=this.dict.getValue(t);return r.isUndefined(e)?[]:o.copy(e)},a.prototype.setValue=function(t,e){if(r.isUndefined(t)||r.isUndefined(e))return!1;var n=this.dict.getValue(t);return r.isUndefined(n)?(this.dict.setValue(t,[e]),!0):!(!this.allowDuplicate&&o.contains(n,e,this.equalsF)||(n.push(e),0))},a.prototype.remove=function(t,e){if(r.isUndefined(e)){var n=this.dict.remove(t);return!r.isUndefined(n)}var i=this.dict.getValue(t);return!(r.isUndefined(i)||!o.remove(i,e,this.equalsF)||(0===i.length&&this.dict.remove(t),0))},a.prototype.keys=function(){return this.dict.keys()},a.prototype.values=function(){for(var t=[],e=0,n=this.dict.values();e<n.length;e++)for(var i=0,r=n[e];i<r.length;i++){var o=r[i];t.push(o)}return t},a.prototype.containsKey=function(t){return this.dict.containsKey(t)},a.prototype.clear=function(){this.dict.clear()},a.prototype.size=function(){return this.dict.size()},a.prototype.isEmpty=function(){return this.dict.isEmpty()},a);function a(t,e,n){void 0===n&&(n=!1),this.dict=new i.default(t),this.equalsF=e||r.defaultEquals,this.allowDuplicate=n}e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),r=n(92),o=(s.prototype.enqueue=function(t){return this.heap.add(t)},s.prototype.add=function(t){return this.heap.add(t)},s.prototype.dequeue=function(){if(0!==this.heap.size()){var t=this.heap.peek();return this.heap.removeRoot(),t}},s.prototype.peek=function(){return this.heap.peek()},s.prototype.contains=function(t){return this.heap.contains(t)},s.prototype.isEmpty=function(){return this.heap.isEmpty()},s.prototype.size=function(){return this.heap.size()},s.prototype.clear=function(){this.heap.clear()},s.prototype.forEach=function(t){this.heap.forEach(t)},s);function s(t){this.heap=new r.default(i.reverseCompareFunction(t))}e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(62),r=(o.prototype.push=function(t){return this.list.add(t,0)},o.prototype.add=function(t){return this.list.add(t,0)},o.prototype.pop=function(){return this.list.removeElementAtIndex(0)},o.prototype.peek=function(){return this.list.first()},o.prototype.size=function(){return this.list.size()},o.prototype.contains=function(t,e){return this.list.contains(t,e)},o.prototype.isEmpty=function(){return this.list.isEmpty()},o.prototype.clear=function(){this.list.clear()},o.prototype.forEach=function(t){this.list.forEach(t)},o);function o(){this.list=new i.default}e.default=r},function(t,e,n){"use strict";var l,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=l=l||{})[i.BEFORE=0]="BEFORE",i[i.AFTER=1]="AFTER",i[i.INSIDE_AT_END=2]="INSIDE_AT_END",i[i.INSIDE_AT_START=3]="INSIDE_AT_START";var r=(o.prototype.initRootIds=function(){for(var t=0,e=this.rootIds;t<e.length;t++){var n=e[t];this.createEmptyNodeIfNotExist(n)}},o.prototype.initNodes=function(){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t))for(var e=0,n=this.nodes[t];e<n.length;e++){var i=n[e];this.createEmptyNodeIfNotExist(i)}},o.prototype.createEmptyNodeIfNotExist=function(t){this.nodes[t]||(this.nodes[t]=[])},o.prototype.getRootIds=function(){return this.rootIds.slice()},o.prototype.getNodes=function(){var t={};for(var e in this.nodes)this.nodes.hasOwnProperty(e)&&(t[e]=this.nodes[e].slice());return t},o.prototype.getObject=function(){return{rootIds:this.getRootIds(),nodes:this.getNodes()}},o.prototype.toObject=function(){return this.getObject()},o.prototype.flatten=function(){for(var t=this,e=[],n=0;n<this.rootIds.length;n++){var i=this.rootIds[n];e.push({id:i,level:0,hasParent:!1,childrenCount:0}),u(i,this.nodes,e,0)}for(var r=0,o=e;r<o.length;r++){var s=o[r];s.childrenCount=(a=s.id,t.nodes[a]?t.nodes[a].length:0)}var a;return e;function u(t,e,n,i){if(void 0===i&&(i=0),t&&e&&n&&e[t]){i++;for(var r=e[t],o=0;o<r.length;o++){var s=r[o];n.push({id:s,level:i,hasParent:!0}),u(s,e,n,i)}i--}}},o.prototype.moveIdBeforeId=function(t,e){return this.moveId(t,e,l.BEFORE)},o.prototype.moveIdAfterId=function(t,e){return this.moveId(t,e,l.AFTER)},o.prototype.moveIdIntoId=function(t,e,n){return void 0===n&&(n=!0),n?this.moveId(t,e,l.INSIDE_AT_START):this.moveId(t,e,l.INSIDE_AT_END)},o.prototype.swapRootIdWithRootId=function(t,e){var n=this.findRootId(t),i=this.findRootId(e);this.swapRootPositionWithRootPosition(n,i)},o.prototype.swapRootPositionWithRootPosition=function(t,e){var n=this.rootIds[e];this.rootIds[e]=this.rootIds[t],this.rootIds[t]=n},o.prototype.deleteId=function(t){this.rootDeleteId(t),this.nodeAndSubNodesDelete(t),this.nodeRefrencesDelete(t)},o.prototype.insertIdBeforeId=function(t,e){var n=this.findRootId(t);for(var i in-1<n&&this.insertIdIntoRoot(e,n),this.nodes)if(this.nodes.hasOwnProperty(i)){var r=this.findNodeId(i,t);-1<r&&this.insertIdIntoNode(i,e,r)}},o.prototype.insertIdAfterId=function(t,e){var n=this.findRootId(t);for(var i in-1<n&&this.insertIdIntoRoot(e,n+1),this.nodes)if(this.nodes.hasOwnProperty(i)){var r=this.findNodeId(i,t);-1<r&&this.insertIdIntoNode(i,e,r+1)}},o.prototype.insertIdIntoId=function(t,e){this.nodeInsertAtEnd(t,e),this.nodes[e]=[]},o.prototype.insertIdIntoRoot=function(t,e){if(void 0===e)this.rootInsertAtEnd(t);else if(e<0){var n=this.rootIds.length;this.rootIds.splice(e+n+1,0,t)}else this.rootIds.splice(e,0,t);this.nodes[t]=this.nodes[t]||[]},o.prototype.insertIdIntoNode=function(t,e,n){if(this.nodes[t]=this.nodes[t]||[],this.nodes[e]=this.nodes[e]||[],void 0===n)this.nodeInsertAtEnd(t,e);else if(n<0){var i=this.nodes[t].length;this.nodes[t].splice(n+i+1,0,e)}else this.nodes[t].splice(n,0,e)},o.prototype.moveId=function(t,e,n){var i=t,r=this.findRootId(i);for(var o in this.nodes[e],this.nodes)if(this.nodes.hasOwnProperty(o)){this.findNodeId(o,e);break}var s=e,a=this.findRootId(s);for(var o in this.nodes[e],this.nodes)if(this.nodes.hasOwnProperty(o)){this.findNodeId(o,e);break}if(-1<r){if(-1<a)switch(this.rootDelete(r),r<a&&a--,n){case l.BEFORE:this.insertIdIntoRoot(i,a);break;case l.AFTER:this.insertIdIntoRoot(i,a+1);break;case l.INSIDE_AT_START:this.nodeInsertAtStart(s,i);break;case l.INSIDE_AT_END:this.nodeInsertAtEnd(s,i)}else for(var o in this.rootDelete(r),this.nodes)if(this.nodes.hasOwnProperty(o)&&-1<(u=this.findNodeId(o,s))){switch(n){case l.BEFORE:this.insertIdIntoNode(o,i,u);break;case l.AFTER:this.insertIdIntoNode(o,i,u+1);break;case l.INSIDE_AT_START:this.nodeInsertAtStart(s,i);break;case l.INSIDE_AT_END:this.nodeInsertAtEnd(s,i)}break}}else if(-1<a){for(var o in this.nodes)if(this.nodes.hasOwnProperty(o)&&-1<(u=this.findNodeId(o,i))){this.nodeDeleteAtIndex(o,u);break}switch(n){case l.BEFORE:this.insertIdIntoRoot(i,a);break;case l.AFTER:this.insertIdIntoRoot(i,a+1);break;case l.INSIDE_AT_START:this.nodeInsertAtStart(s,i);break;case l.INSIDE_AT_END:this.nodeInsertAtEnd(s,i)}}else{for(var o in this.nodes)if(this.nodes.hasOwnProperty(o)&&-1<(u=this.findNodeId(o,i))){this.nodeDeleteAtIndex(o,u);break}for(var o in this.nodes){var u;if(this.nodes.hasOwnProperty(o)&&-1<(u=this.findNodeId(o,s))){switch(n){case l.BEFORE:this.insertIdIntoNode(o,i,u);break;case l.AFTER:this.insertIdIntoNode(o,i,u+1);break;case l.INSIDE_AT_START:this.nodeInsertAtStart(s,i);break;case l.INSIDE_AT_END:this.nodeInsertAtEnd(s,i)}break}}}},o.prototype.swapArrayElements=function(t,e,n){var i=t[e];return t[e]=t[n],t[n]=i,t},o.prototype.rootDeleteId=function(t){var e=this.findRootId(t);-1<e&&this.rootDelete(e)},o.prototype.nodeAndSubNodesDelete=function(t){for(var e=[],n=0;n<this.nodes[t].length;n++){var i=this.nodes[t][n];this.nodeAndSubNodesDelete(i),e.push(t)}for(this.nodeDelete(t),n=0;n<e.length;n++)this.nodeDelete(e[n])},o.prototype.nodeRefrencesDelete=function(t){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e))for(var n=0;n<this.nodes[e].length;n++)this.nodes[e][n]===t&&this.nodeDeleteAtIndex(e,n)},o.prototype.nodeDelete=function(t){delete this.nodes[t]},o.prototype.findRootId=function(t){return this.rootIds.indexOf(t)},o.prototype.findNodeId=function(t,e){return this.nodes[t].indexOf(e)},o.prototype.findNode=function(t){return this.nodes[t]},o.prototype.nodeInsertAtStart=function(t,e){this.nodes[t].unshift(e)},o.prototype.nodeInsertAtEnd=function(t,e){this.nodes[t].push(e)},o.prototype.rootDelete=function(t){this.rootIds.splice(t,1)},o.prototype.nodeDeleteAtIndex=function(t,e){this.nodes[t].splice(e,1)},o.prototype.rootInsertAtStart=function(t){this.rootIds.unshift(t)},o.prototype.rootInsertAtEnd=function(t){this.rootIds.push(t)},o);function o(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.rootIds=t,this.nodes=e,this.initRootIds(),this.initNodes()}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),i=n(186),o=n(188),s=n(189),a=n(190),u=n(33),l=n(191),c=n(118),h=n(4),f=n(114),p=n(29),d=(b.prototype.createMusicSystem=function(t,e){return new i.VexFlowMusicSystem(t,e)},b.prototype.createStaffLine=function(t,e){return new o.VexFlowStaffLine(t,e)},b.prototype.createGraphicalMeasure=function(t,e){return new s.VexFlowMeasure(e,void 0,t)},b.prototype.createExtraGraphicalMeasure=function(t){return new s.VexFlowMeasure(t.ParentStaff,t)},b.prototype.createStaffEntry=function(t,e){return new a.VexFlowStaffEntry(e,t,void 0)},b.prototype.createVoiceEntry=function(t,e){return new f.VexFlowVoiceEntry(t,e)},b.prototype.createNote=function(t,e,n,i,r){return void 0===i&&(i=u.OctaveEnum.NONE),void 0===r&&(r=void 0),new l.VexFlowGraphicalNote(t,e,n,i,r)},b.prototype.createGraceNote=function(t,e,n,i){return void 0===i&&(i=u.OctaveEnum.NONE),new l.VexFlowGraphicalNote(t,e,n,i)},b.prototype.addGraphicalAccidental=function(t,e){t.setPitch(e)},b.prototype.addFermataAtTiedEndNote=function(t,e){},b.prototype.createInStaffClef=function(t,e){var n=t,i=p.VexFlowConverter.Clef(e,"small");n.vfClefBefore=new r.Flow.ClefNote(i.type,i.size,i.annotation)},b.prototype.createChordSymbol=function(t,e,n){var i=new c.GraphicalChordSymbolContainer(t.ChordContainer,e.PositionAndShape,h.EngravingRules.Rules.ChordSymbolTextHeight,n),r=i.GetGraphicalLabel;r.PositionAndShape.RelativePosition.y-=h.EngravingRules.Rules.ChordSymbolYOffset,r.setLabelPositionAndShapeBorders(),i.PositionAndShape.calculateBoundingBox(),e.graphicalChordContainer=i},b.prototype.createGraphicalTechnicalInstruction=function(t,e){},b);function b(){}e.VexFlowGraphicalSymbolFactory=d},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(99),a=n(101),u=n(29),l=n(105),c=n(187),h=(o=s.MusicSystem,r(f,o),f.prototype.calculateBorders=function(t){if(0!==this.staffLines.length){var e=this.calcBracketsWidth();this.boundingBox.BorderLeft=-e,this.boundingBox.BorderMarginLeft=-e,this.boundingBox.XBordersHaveBeenSet=!0;var n=this.staffLines[0].SkyBottomLineCalculator.getSkyLineMin();this.boundingBox.BorderTop=n,this.boundingBox.BorderMarginTop=n;var i=this.staffLines[this.staffLines.length-1],r=i.SkyBottomLineCalculator.getBottomLineMax()+i.PositionAndShape.RelativePosition.y;this.boundingBox.BorderBottom=r,this.boundingBox.BorderMarginBottom=r,this.boundingBox.XBordersHaveBeenSet=!0,this.boundingBox.YBordersHaveBeenSet=!0}},f.prototype.createSystemLine=function(t,e,n,i,r,o,s){return void 0===s&&(s=void 0),o.addMeasureLine(n,i),s&&(s.lineTo(o,u.VexFlowConverter.line(n,i)),s.addMeasureLine(n,i)),new a.SystemLine(n,i,this,o,s)},f.prototype.createInstrumentBracket=function(t,e){var n=t,i=e,r=new c.VexFlowInstrumentBrace(n,i);this.InstrumentBrackets.push(r)},f.prototype.createGroupBracket=function(t,e,n){var i=t,r=e;if(0===n){var o=new l.VexFlowInstrumentBracket(i,r,n);this.GroupBrackets.push(o)}else{var s=new c.VexFlowInstrumentBrace(i,r,n);this.GroupBrackets.push(s)}},f);function f(t,e){return o.call(this,t,e)||this}e.VexFlowMusicSystem=h},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),n(14);var o,s=(o=n(105).VexFlowInstrumentBracket,r(a,o),a);function a(t,e,n){void 0===n&&(n=0);var i=o.call(this,t,e,n)||this;return i.vexflowConnector.setType(3),i}e.VexFlowInstrumentBrace=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=(o=n(106).StaffLine,r(a,o),Object.defineProperty(a.prototype,"SlursInVFStaffLine",{get:function(){return this.slursInVFStaffLine},enumerable:!0,configurable:!0}),a.prototype.addVFSlurToVFStaffline=function(t){this.slursInVFStaffLine.push(t)},a);function a(t,e){var n=o.call(this,t,e)||this;return n.slursInVFStaffLine=[],n}e.VexFlowStaffLine=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s,a,T=n(14),u=n(113),l=n(34),k=n(29),O=T.Flow.NoteSubGroup,M=n(1),c=n(25),h=n(37),f=n(42),R=n(18),g=n(114),L=n(0),A=n(43),C=n(4),b=n(8),p=(s=u.GraphicalMeasure,r(d,s),d.prototype.setAbsoluteCoordinates=function(t,e){this.stave.setX(t).setY(e)},d.prototype.resetLayout=function(){this.stave=new T.Flow.Stave(0,0,0,{space_above_staff_ln:0,space_below_staff_ln:0}),this.updateInstructionWidth()},d.prototype.clean=function(){this.vfTies.length=0,this.connectors=[],this.resetLayout()},d.prototype.getLineWidth=function(t){switch(t){case l.SystemLinesEnum.BoldThinDots:case l.SystemLinesEnum.DotsThinBold:case l.SystemLinesEnum.DotsBoldBoldDots:return 10/c.unitInPixels;default:return 0}},d.prototype.addClefAtBegin=function(t){this.octaveOffset=t.OctaveOffset;var e=k.VexFlowConverter.Clef(t,"default");this.stave.addClef(e.type,e.size,e.annotation,5),this.updateInstructionWidth()},d.prototype.addKeyAtBegin=function(t,e,n){this.stave.setKeySignature(k.VexFlowConverter.keySignature(t),k.VexFlowConverter.keySignature(e),void 0),this.updateInstructionWidth()},d.prototype.addRhythmAtBegin=function(t){var e=k.VexFlowConverter.TimeSignature(t);this.stave.addModifier(e,5),this.updateInstructionWidth()},d.prototype.addClefAtEnd=function(t){var e=k.VexFlowConverter.Clef(t,"small");this.stave.setEndClef(e.type,e.size,e.annotation),this.updateInstructionWidth()},d.prototype.addMeasureLine=function(t,e){switch(e){case f.SystemLinePosition.MeasureBegin:switch(t){case l.SystemLinesEnum.BoldThinDots:this.stave.setBegBarType(4)}break;case f.SystemLinePosition.MeasureEnd:switch(t){case l.SystemLinesEnum.DotsBoldBoldDots:this.stave.setEndBarType(6);break;case l.SystemLinesEnum.DotsThinBold:this.stave.setEndBarType(5);break;case l.SystemLinesEnum.DoubleThin:this.stave.setEndBarType(2);break;case l.SystemLinesEnum.ThinBold:this.stave.setEndBarType(3);break;case l.SystemLinesEnum.None:this.stave.setEndBarType(7)}}},d.prototype.addMeasureNumber=function(){var t=this.MeasureNumber.toString(),e=o.ABOVE;this.stave.setText(t,e,{justification:1,shift_x:0,shift_y:0})},d.prototype.addWordRepetition=function(t){var e=void 0,n=6;switch(t.type){case h.RepetitionInstructionEnum.Segno:e=4,n=5;break;case h.RepetitionInstructionEnum.Coda:e=2,n=5;break;case h.RepetitionInstructionEnum.DaCapo:e=6;break;case h.RepetitionInstructionEnum.DalSegno:e=9;break;case h.RepetitionInstructionEnum.Fine:e=12;break;case h.RepetitionInstructionEnum.ToCoda:break;case h.RepetitionInstructionEnum.DaCapoAlFine:e=8;break;case h.RepetitionInstructionEnum.DaCapoAlCoda:e=7;break;case h.RepetitionInstructionEnum.DalSegnoAlFine:e=11;break;case h.RepetitionInstructionEnum.DalSegnoAlCoda:e=10}void 0===e?this.addVolta(t):this.stave.addModifier(new T.Flow.Repetition(e,0,0),n)},d.prototype.addVolta=function(t){var e=2;if(t.type===h.RepetitionInstructionEnum.Ending){switch(t.alignment){case h.AlignmentType.Begin:e=this.parentSourceMeasure.endsRepetitionEnding()?5:2;break;case h.AlignmentType.End:if(this.parentSourceMeasure.beginsRepetitionEnding())return;e=4}this.stave.setVoltaType(e,t.endingIndices[0],0)}},d.prototype.setWidth=function(t){s.prototype.setWidth.call(this,t),this.stave.setWidth(t*c.unitInPixels)},d.prototype.layoutSymbols=function(){},d.prototype.draw=function(t){for(var e in this.stave.setContext(t).draw(),this.vfVoices)this.vfVoices.hasOwnProperty(e)&&(t.save(),this.vfVoices[e].draw(t,this.stave),t.restore());for(var e in this.vfbeams)if(this.vfbeams.hasOwnProperty(e))for(var n=0,i=this.vfbeams[e];n<i.length;n++)i[n].setContext(t).draw();if(this.autoVfBeams)for(var r=0,o=this.autoVfBeams;r<o.length;r++)o[r].setContext(t).draw();if(this.autoTupletVfBeams)for(var s=0,a=this.autoTupletVfBeams;s<a.length;s++)a[s].setContext(t).draw();for(var e in this.vftuplets)if(this.vftuplets.hasOwnProperty(e))for(var u=0,l=this.vftuplets[e];u<l.length;u++)l[u].setContext(t).draw();for(var c=0,h=this.vfTies;c<h.length;c++)h[c].setContext(t).draw();for(var f=0,p=this.connectors;f<p.length;f++)p[f].setContext(t).draw()},d.prototype.format=function(){this.formatVoices&&this.formatVoices((this.PositionAndShape.Size.width-this.beginInstructionsWidth-this.endInstructionsWidth)*c.unitInPixels)},d.prototype.getVoicesWithinMeasure=function(){for(var t=[],e=0,n=this.staffEntries;e<n.length;e++)for(var i=0,r=n[e].graphicalVoiceEntries;i<r.length;i++){var o=r[i];-1===t.indexOf(o.parentVoiceEntry.ParentVoice)&&t.push(o.parentVoiceEntry.ParentVoice)}return t},d.prototype.getGraphicalVoiceEntriesPerVoice=function(t){for(var e=[],n=0,i=this.staffEntries;n<i.length;n++)for(var r=0,o=i[n].graphicalVoiceEntries;r<o.length;r++){var s=o[r];s.parentVoiceEntry.ParentVoice===t&&e.push(s)}return e},d.prototype.getRestFilledVexFlowStaveNotesPerVoice=function(t){for(var e=void 0,n=this.getGraphicalVoiceEntriesPerVoice(t),i=0,r=n.length;i<r;++i){for(var o=n[i],s=o.notes[0].sourceNote.getAbsoluteTimestamp(),a=new L.Fraction,u=0,l=o.notes;u<l.length;u++){var c=l[u],h=L.Fraction.plus(c.sourceNote.getAbsoluteTimestamp(),c.sourceNote.Length);a<h&&(a=h)}if(void 0===e){var f=L.Fraction.minus(s,this.parentSourceMeasure.AbsoluteTimestamp);if(0<f.RealValue){M.debug("Ghost Found at start");var p=k.VexFlowConverter.GhostNote(f);(b=new g.VexFlowVoiceEntry(void 0,void 0)).vfStaveNote=p,n.splice(0,0,b),i++}}else{var d=L.Fraction.minus(s,e);0<d.RealValue&&(M.debug("Ghost Found in between"),p=k.VexFlowConverter.GhostNote(d),(b=new g.VexFlowVoiceEntry(void 0,void 0)).vfStaveNote=p,n.splice(i,0,b),i++)}e=a}var b,y=L.Fraction.plus(this.parentSourceMeasure.AbsoluteTimestamp,this.parentSourceMeasure.Duration),m=L.Fraction.minus(y,e);return 0<m.RealValue&&(M.debug("Ghost Found at end"),p=k.VexFlowConverter.GhostNote(m),(b=new g.VexFlowVoiceEntry(void 0,void 0)).vfStaveNote=p,n.push(b)),n},d.prototype.handleBeam=function(t,e){var n,i=t.sourceNote.ParentVoiceEntry.ParentVoice.VoiceId,r=this.beams[i];void 0===r&&(r=this.beams[i]=[]);for(var o=0,s=r;o<s.length;o++){var a=s[o];a[0]===e&&(n=a)}void 0===n&&(n=[e,[]],r.push(n));var u=t.parentVoiceEntry;n[1].indexOf(u)<0&&n[1].push(u)},d.prototype.handleTuplet=function(t,e){var n=t.sourceNote.ParentVoiceEntry.ParentVoice.VoiceId;e=t.sourceNote.NoteTuplet;var i,r=this.tuplets[n];void 0===r&&(r=this.tuplets[n]=[]);for(var o=0,s=r;o<s.length;o++){var a=s[o];a[0]===e&&(i=a)}void 0===i&&(i=[e,[]],r.push(i));var u=t.parentVoiceEntry;i[1].indexOf(u)<0&&i[1].push(u)},d.prototype.finalizeBeams=function(){this.vfbeams={};var t=[];for(var e in this.beams)if(this.beams.hasOwnProperty(e)){var n=this.vfbeams[e];void 0===n&&(n=this.vfbeams[e]=[]);for(var i=0,r=this.beams[e];i<r.length;i++){for(var o=r[i],s=!1,a=0,u=o[0].Notes;a<u.length;a++)if((S=u[a]).Length.RealValue>=new L.Fraction(1,4).RealValue&&(void 0===S.TypeLength||.125<S.TypeLength.RealValue)){s=!0;break}if(s)M.debug("Beam between note >= quarter, likely tremolo, currently unsupported. continuing.");else{for(var l=[],c=o[0],h=o[1],f=!0,p=0,d=h;p<d.length;p++){var b=d[p];b.parentVoiceEntry.ParentVoice===c.Notes[0].ParentVoiceEntry.ParentVoice&&(f=b.parentVoiceEntry.WantedStemDirection===R.StemDirectionType.Undefined)}for(var y=!1,m=void 0,g=[],v=0,_=h;v<_.length;v++){var S,x=_[v];void 0!==(S=x.vfStaveNote)&&(l.push(S),t.push(S)),x.parentVoiceEntry.IsGrace&&(y=!0),x.parentVoiceEntry.StemColor&&C.EngravingRules.Rules.ColoringEnabled&&g.push(x.parentVoiceEntry.StemColor)}if(1<l.length){var w=new T.Flow.Beam(l,f);if(y&&(w.render_options.beam_width=3,w.render_options.partial_beam_length=4),2<=g.length&&C.EngravingRules.Rules.ColorBeams){m=g[0];for(var E=0,P=g;E<P.length;E++)if(P[E]!==m){m=void 0;break}w.setStyle({fillStyle:m,strokeStyle:m})}n.push(w)}else M.debug("Warning! Beam with no notes!")}}}C.EngravingRules.Rules.AutoBeamNotes&&this.autoBeamNotes(t)},d.prototype.autoBeamNotes=function(t){var e,n=[],i=[],r=[];this.autoTupletVfBeams=[];for(var o=0,s=this.staffEntries;o<s.length;o++)for(var a=0,u=s[o].graphicalVoiceEntries;a<u.length;a++){var l=u[a],c=l.vfStaveNote;if(l.parentVoiceEntry.IsGrace||0<=l.notes[0].graphicalNoteLength.CompareTo(new L.Fraction(1,4))||t.contains(c)){if(2<=i.length)for(var h=0,f=i;h<f.length;h++){var p=f[h];n.push(p)}i=[]}else{var d=l.notes[0].sourceNote.NoteTuplet;d?(void 0===e?e=d:e!==d&&(1<r.length&&this.autoTupletVfBeams.push(new T.Flow.Beam(r,!0)),r=[],e=d),r.push(l.vfStaveNote)):(e=void 0,i.push(l.vfStaveNote))}}if(2<=r.length&&this.autoTupletVfBeams.push(new T.Flow.Beam(r,!0)),2<=i.length)for(var b=0,y=i;b<y.length;b++)p=y[b],n.push(p);var m=C.EngravingRules.Rules.AutoBeamOptions,g={beam_middle_only:m.beam_middle_rests_only,beam_rests:m.beam_rests,maintain_stem_directions:m.maintain_stem_directions};if(m.groups&&m.groups.length){for(var v=[],_=0,S=m.groups;_<S.length;_++){var x=S[_];v.push(new T.Flow.Fraction(x[0],x[1]))}g.groups=v}this.autoVfBeams=T.Flow.Beam.generateBeams(n,g)},d.prototype.finalizeTuplets=function(){for(var t in this.vftuplets={},this.tuplets)if(this.tuplets.hasOwnProperty(t)){var e=this.vftuplets[t];void 0===e&&(e=this.vftuplets[t]=[]);for(var n=0,i=this.tuplets[t];n<i.length;n++){for(var r=i[n],o=[],s=0,a=r[1];s<a.length;s++){var u=a[s];o.push(u.vfStaveNote)}if(1<o.length){var l=r[0],c=l.Notes[0][0].NormalNotes,h=l.Bracket||3===l.TupletLabelNumber&&C.EngravingRules.Rules.TripletsBracketed||3!==l.TupletLabelNumber&&C.EngravingRules.Rules.TupletsBracketed;e.push(new T.Flow.Tuplet(o,{bracketed:h,notes_occupied:c,num_notes:l.TupletLabelNumber,ratioed:C.EngravingRules.Rules.TupletsRatioed}))}else M.debug("Warning! Tuplet with no notes! Trying to ignore, but this is a serious problem.")}}},d.prototype.layoutStaffEntry=function(t){},d.prototype.graphicalMeasureCreatedCalculations=function(){for(var t,e,n=0,i=this.staffEntries;n<i.length;n++){t=!1,e=[];for(var r=0,o=i[n].graphicalVoiceEntries;r<o.length;r++){var s=o[r];if(s.parentVoiceEntry.IsGrace)e.push(s),t=t||s.parentVoiceEntry.GraceSlur;else if(s.notes[0].sourceNote.PrintObject,s.vfStaveNote=k.VexFlowConverter.StaveNote(s),0<e.length){for(var a=[],u=0;u<e.length;u++){var l=e[u],c=k.VexFlowConverter.StaveNote(l);l.vfStaveNote=c,a.push(c)}var h=new T.Flow.GraceNoteGroup(a,t);s.vfStaveNote.addModifier(0,h),e=[]}}}if(0<e.length)for(var f=0,p=e;f<p.length;f++){var d=p[f];d.vfStaveNote=k.VexFlowConverter.StaveNote(d),d.parentVoiceEntry.GraceAfterMainNote=!0}this.finalizeBeams(),this.finalizeTuplets();for(var b=0,y=this.getVoicesWithinMeasure();b<y.length;b++){var m=y[b];if(void 0!==m){var g=!(m instanceof A.LinkedVoice);this.vfVoices[m.VoiceId]=new T.Flow.Voice({beat_value:this.parentSourceMeasure.Duration.Denominator,num_beats:this.parentSourceMeasure.Duration.Numerator,resolution:T.Flow.RESOLUTION}).setMode(2);for(var v=0,_=this.getRestFilledVexFlowStaveNotesPerVoice(m);v<_.length;v++){var S=_[v];if(!S.parentVoiceEntry||!S.parentVoiceEntry.IsGrace||S.parentVoiceEntry.GraceAfterMainNote){var x=S;if(0!==S.notes.length&&S.notes[0]&&S.notes[0].sourceNote.PrintObject){if(g){var w=x.parentStaffEntry;if(w&&void 0!==w.vfClefBefore){var E=new O([w.vfClefBefore]);x.vfStaveNote.addModifier(0,E)}}if(S.parentVoiceEntry&&C.EngravingRules.Rules.RenderFingerings&&this.createFingerings(S),S.parentVoiceEntry&&void 0!==S.parentVoiceEntry.Arpeggio){var P=S.parentVoiceEntry.Arpeggio.type;x.vfStaveNote.addStroke(0,new T.Flow.Stroke(P))}this.vfVoices[m.VoiceId].addTickable(x.vfStaveNote)}else this.vfVoices[m.VoiceId].addTickable(x.vfStaveNote)}}}}this.createArticulations(),this.createOrnaments(),this.setStemDirectionFromVexFlow()},d.prototype.setStemDirectionFromVexFlow=function(){for(var t=0,e=this.staffEntries;t<e.length;t++)for(var n=0,i=e[t].graphicalVoiceEntries;n<i.length;n++)for(var r=i[n],o=0,s=r.notes;o<s.length;o++){var a=s[o].vfnote;if(void 0!==a&&void 0!==a[0])switch(a[0].getStemDirection()){case T.Flow.Stem.UP:r.parentVoiceEntry.StemDirection=R.StemDirectionType.Up;break;case T.Flow.Stem.DOWN:r.parentVoiceEntry.StemDirection=R.StemDirectionType.Down}}},d.prototype.createArticulations=function(){for(var t=0,e=this.staffEntries.length;t<e;++t)for(var n=0,i=this.staffEntries[t].graphicalVoiceEntries;n<i.length;n++){var r=i[n],o=r.vfStaveNote;k.VexFlowConverter.generateArticulations(o,r.notes[0].sourceNote.ParentVoiceEntry.Articulations)}},d.prototype.createOrnaments=function(){for(var t=0,e=this.staffEntries.length;t<e;++t){var n=this.staffEntries[t].graphicalVoiceEntries;for(var i in n)if(n.hasOwnProperty(i)){var r=n[i].vfStaveNote,o=n[i].notes[0].sourceNote.ParentVoiceEntry.OrnamentContainer;void 0!==o&&k.VexFlowConverter.generateOrnaments(r,o)}}},d.prototype.createFingerings=function(t){for(var e=t,n=t.parentVoiceEntry.TechnicalInstructions,i=n.length,r=0;r<n.length;r++){var o=n[r],s=C.EngravingRules.Rules.FingeringPosition;o.placement!==b.PlacementEnum.NotYetDefined&&(s=o.placement);var a=void 0;switch(s){default:case b.PlacementEnum.Left:a=1;break;case b.PlacementEnum.Right:a=2;break;case b.PlacementEnum.Above:a=3;break;case b.PlacementEnum.Below:a=4;break;case b.PlacementEnum.NotYetDefined:var u=t.parentStaffEntry.sourceStaffEntry.ParentStaff;1<t.notes.length||1<t.parentStaffEntry.graphicalVoiceEntries.length?a=1:s=0===u.idInMusicSheet?(a=3,b.PlacementEnum.Above):(a=4,b.PlacementEnum.Below)}var l=new T.Flow.FretHandFinger(o.value);if(l.setPosition(a),s===b.PlacementEnum.Above||s===b.PlacementEnum.Below){var c=s===b.PlacementEnum.Above?-1:1,h=s===b.PlacementEnum.Above?r:n.length-1-r;if(C.EngravingRules.Rules.FingeringInsideStafflines&&1<i){var f=l.getWidth()/2,p=2.5*i;l.setOffsetY(c*(h+p)*f)}else if(!C.EngravingRules.Rules.FingeringInsideStafflines){var d=new T.Flow.StringNumber(o.value);d.radius=0,d.setPosition(a),d.setOffsetY(c*h*d.getWidth()*2/3),e.vfStaveNote.addModifier(r,d);continue}}e.vfStaveNote.addModifier(r,l)}},d.prototype.lineTo=function(t,e){var n=new T.Flow.StaveConnector(t.getVFStave(),this.stave);n.setType(e),this.connectors.push(n)},d.prototype.getVFStave=function(){return this.stave},d.prototype.updateInstructionWidth=function(){for(var t=0,e=0,n=0,i=this.stave.getModifiers();n<i.length;n++){var r=i[n];r.getPosition()===o.BEGIN?t+=r.getWidth()+r.getPadding(void 0):r.getPosition()===o.END&&(e+=r.getWidth()+r.getPadding(void 0))}this.beginInstructionsWidth=t/c.unitInPixels,this.endInstructionsWidth=e/c.unitInPixels},d);function d(t,e,n){void 0===e&&(e=void 0),void 0===n&&(n=void 0);var i=s.call(this,t,n,e)||this;return i.octaveOffset=3,i.vfVoices={},i.vfTies=[],i.vfRepetitionWords=[],i.connectors=[],i.beams={},i.tuplets={},i.vftuplets={},i.minimumStaffEntriesWidth=-1,i.resetLayout(),i}e.VexFlowMeasure=p,(a=o=e.StavePositionEnum||(e.StavePositionEnum={}))[a.LEFT=1]="LEFT",a[a.RIGHT=2]="RIGHT",a[a.ABOVE=3]="ABOVE",a[a.BELOW=4]="BELOW",a[a.BEGIN=5]="BEGIN",a[a.END=6]="END"},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(116),a=n(25),u=n(4),l=(o=s.GraphicalStaffEntry,r(c,o),c.prototype.calculateXPosition=function(){for(var t=this.parentMeasure.getVFStave(),e=0,n=0,i=this.graphicalVoiceEntries;n<i.length;n++){var r=i[n];if(r.vfStaveNote){if(r.vfStaveNote.setStave(t),!r.vfStaveNote.preFormatted||null===r.vfStaveNote.getBoundingBox())continue;r.applyBordersFromVexflow(),this.PositionAndShape.RelativePosition.x=r.vfStaveNote.getBoundingBox().getX()/a.unitInPixels;var o=r.notes[0].sourceNote;o.isRest()&&1===o.Length.WholeValue&&(this.PositionAndShape.RelativePosition.x+=u.EngravingRules.Rules.WholeRestXShiftVexflow-.1,r.PositionAndShape.BorderLeft=-.7,r.PositionAndShape.BorderRight=.7),r.PositionAndShape.BorderLeft<e&&(e=r.PositionAndShape.BorderLeft)}}this.PositionAndShape.RelativePosition.x-=e,this.PositionAndShape.calculateBoundingBox()},c);function c(t,e,n){return o.call(this,t,e,n)||this}e.VexFlowStaffEntry=l},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a,o=n(14),s=n(117),u=n(29),l=n(2),c=n(33),h=(a=s.GraphicalNote,r(f,a),f.prototype.setPitch=function(t){if(this.vfnote){var e=l.Pitch.accidentalVexflow(t.Accidental);e&&(alert(e),this.vfnote[0].addAccidental(this.vfnote[1],new o.Flow.Accidental(e)))}else{var n=c.OctaveShift.getPitchFromOctaveShift(t,this.octaveShift);this.vfpitch=u.VexFlowConverter.pitch(this,n)}},f.prototype.setIndex=function(t,e){this.vfnote=[t,e]},f.prototype.Clef=function(){return this.clef},f);function f(t,e,n,i,r){void 0===i&&(i=c.OctaveEnum.NONE),void 0===r&&(r=void 0);var o=a.call(this,t,e,r)||this;if(o.clef=n,o.octaveShift=i,t.Pitch){var s=c.OctaveShift.getPitchFromOctaveShift(t.Pitch,i);o.vfpitch=u.VexFlowConverter.pitch(o,s),o.vfpitch[1]=void 0}return o}e.VexFlowGraphicalNote=h},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(14),a=n(122),u=n(33),l=n(1),c=(o=a.GraphicalOctaveShift,r(h,o),h.prototype.setStartNote=function(t){this.startNote=t.graphicalVoiceEntries[0].vfStaveNote},h.prototype.setEndNote=function(t){this.endNote=t.graphicalVoiceEntries[0].vfStaveNote},h.prototype.getTextBracket=function(){return new s.Flow.TextBracket({position:this.position,start:this.startNote,stop:this.endNote,superscript:this.supscript,text:this.text})},h);function h(t,e){var n=o.call(this,t,e)||this;switch(t.Type){case u.OctaveEnum.VA8:n.position=1,n.supscript="va",n.text="8";break;case u.OctaveEnum.MA15:n.position=1,n.supscript="ma",n.text="15";break;case u.OctaveEnum.VB8:n.position=-1,n.supscript="vb",n.text="8";break;case u.OctaveEnum.MB15:n.position=-1,n.supscript="mb",n.text="15";break;default:l.error("Unknown or NONE octaveshift. This should not be called!")}return n}e.VexFlowOctaveShift=c},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(73),a=n(53),u=n(24),l=n(16),c=n(9),h=n(44),f=(o=s.GraphicalInstantaneousDynamicExpression,r(p,o),Object.defineProperty(p.prototype,"InstantaneousDynamic",{get:function(){return this.mInstantaneousDynamicExpression},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"Expression",{get:function(){return a.DynamicEnum[this.mInstantaneousDynamicExpression.DynEnum]},enumerable:!0,configurable:!0}),p);function p(t,e,n){var i=o.call(this,t,e,n)||this;return i.label=new u.GraphicalLabel(new l.Label(i.Expression),i.rules.ContinuousDynamicTextHeight,c.TextAlignmentEnum.CenterCenter,i.PositionAndShape),i.label.Label.fontStyle=h.FontStyles.BoldItalic,i.label.setLabelPositionAndShapeBorders(),i.PositionAndShape.calculateBoundingBox(),i}e.VexFlowInstantaneousDynamicExpression=f},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.DynamicExpressionSymbolEnum||(e.DynamicExpressionSymbolEnum={}))[i.p=0]="p",i[i.f=1]="f",i[i.s=2]="s",i[i.z=3]="z",i[i.m=4]="m",i[i.r=5]="r"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),r=(o.getRotationMatrix=function(t){var e=new o,n=Math.cos(t),i=Math.sin(t);return e.matrix[0][0]=n,e.matrix[0][1]=-i,e.matrix[1][0]=i,e.matrix[1][1]=n,e},o.prototype.scalarMultiplication=function(t){for(var e=0;e<2;e++)for(var n=0;n<2;n++)this.matrix[e][n]*=t},o.prototype.getTransposeMatrix=function(){for(var t=new o,e=0;e<2;e++)for(var n=0;n<2;n++)t.matrix[e][n]=this.matrix[n][e];return t},o.prototype.vectorMultiplication=function(t){var e=new i.PointF2D;return e.x=t.x*this.matrix[0][0]+t.y*this.matrix[0][1],e.y=t.x*this.matrix[1][0]+t.y*this.matrix[1][1],e},o);function o(){this.matrix=[];for(var t=0;t<2;t++){this.matrix[t]=[];for(var e=0;e<2;e++)this.matrix[t][e]=0}}e.Matrix2D=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(197),o=(s.prototype.reInit=function(){this.init()},s.prototype.init=function(){this.parts=this.musicSheet.Repetitions.slice(),this.sheetStart=this.musicSheet.SelectionStart=new i.Fraction(0,1),this.sheetEnd=this.musicSheet.SelectionEnd=this.musicSheet.SheetEndTimestamp,this.calcMapping()},s.prototype.getCurrentRepetitionTimestampTransform=function(t){for(var e=void 0,n=this.timestamps.length-1;0<=n;n--)if(t>=(e=this.timestamps[n]).$from)return e;return this.timestamps[0]},s.prototype.absoluteEnrolledToSheetTimestamp=function(t){if(0===this.timestamps.length)return t;var e=this.getCurrentRepetitionTimestampTransform(t);return i.Fraction.plus(t,i.Fraction.minus(e.to,e.$from))},Object.defineProperty(s.prototype,"Parts",{get:function(){return this.parts},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"MusicSheet",{get:function(){return this.musicSheet},enumerable:!0,configurable:!0}),s.prototype.getIterator=function(t){return void 0===t?new r.MusicPartManagerIterator(this,this.musicSheet.SelectionStart,this.musicSheet.SelectionEnd):new r.MusicPartManagerIterator(this,t,void 0)},s.prototype.setSelectionStart=function(t){this.musicSheet.SelectionStart=t,this.musicSheet.SelectionEnd=void 0},s.prototype.setSelectionRange=function(t,e){this.musicSheet.SelectionStart=void 0===t?this.sheetStart:t,this.musicSheet.SelectionEnd=void 0===e?this.sheetEnd:e},s.prototype.calcMapping=function(){var t=[],e=this.getIterator(),n=e.CurrentRepetition,i=new a(e.CurrentEnrolledTimestamp.clone(),e.CurrentSourceTimestamp.clone(),void 0,0);for(t.push(i);!e.EndReached;){if(e.JumpOccurred||n!==e.CurrentRepetition){if(n=e.CurrentRepetition,e.backJumpOccurred){var r=e.JumpResponsibleRepetition;i.nextBackJump=e.CurrentEnrolledTimestamp,i.curRepetition=r,i.curRepetitionIteration=e.CurrentJumpResponsibleRepetitionIterationBeforeJump;for(var o=this.timestamps.length-2;0<=o&&!t[o].to.lt(r.AbsoluteTimestamp)&&void 0===t[o].curRepetition;o--)t[o].nextBackJump=i.nextBackJump,t[o].curRepetition=r,t[o].curRepetitionIteration=i.curRepetitionIteration}i=new a(e.CurrentEnrolledTimestamp.clone(),e.CurrentSourceTimestamp.clone(),void 0,0),t.push(i)}e.moveToNext()}this.timestamps=t},s);function s(t){this.musicSheet=t}e.MusicPartManager=o;var a=function(t,e,n,i){this.$from=t,this.to=e,this.curRepetition=n,this.curRepetitionIteration=i,this.nextBackJump=void 0,this.nextForwardJump=void 0};e.TimestampTransform=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=n(0),c=n(198),r=n(23),h=n(36),f=n(1),i=(Object.defineProperty(o.prototype,"EndReached",{get:function(){return this.endReached},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"FrontReached",{get:function(){return this.frontReached},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"CurrentMeasure",{get:function(){return this.currentMeasure},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"CurrentRepetition",{get:function(){return this.currentRepetition},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"CurrentRepetitionIteration",{get:function(){return void 0!==this.CurrentRepetition?this.getRepetitionIterationCount(this.CurrentRepetition):0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"CurrentJumpResponsibleRepetitionIterationBeforeJump",{get:function(){return void 0!==this.jumpResponsibleRepetition?this.getRepetitionIterationCount(this.jumpResponsibleRepetition)-1:0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"CurrentVoiceEntries",{get:function(){return this.currentVoiceEntries},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"CurrentMeasureIndex",{get:function(){return this.currentMeasureIndex},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"CurrentEnrolledTimestamp",{get:function(){return l.Fraction.plus(this.currentEnrolledMeasureTimestamp,this.currentVerticalContainerInMeasureTimestamp)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"CurrentSourceTimestamp",{get:function(){return this.currentTimeStamp},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"JumpOccurred",{get:function(){return this.backJumpOccurred||this.forwardJumpOccurred},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ActiveTempoExpression",{get:function(){return this.activeTempoExpression},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ActiveDynamicExpressions",{get:function(){return this.activeDynamicExpressions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"CurrentTempoChangingExpression",{get:function(){return this.currentTempoChangingExpression},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"JumpResponsibleRepetition",{get:function(){return this.jumpResponsibleRepetition},enumerable:!0,configurable:!0}),o.prototype.clone=function(){var t=new o(this.manager);return t.currentVoiceEntryIndex=this.currentVoiceEntryIndex,t.currentMappingPart=this.currentMappingPart,t.currentPartIndex=this.currentPartIndex,t.currentVoiceEntries=this.currentVoiceEntries,t.endReached=this.endReached,t.frontReached=this.frontReached,t},o.prototype.CurrentVisibleVoiceEntries=function(t){var e=[];if(void 0===this.currentVoiceEntries)return e;if(void 0!==t){for(var n=0,i=this.currentVoiceEntries;n<i.length;n++)if((s=i[n]).ParentVoice.Parent.IdString===t.IdString)return this.getVisibleEntries(s,e),e}else for(var r=0,o=this.currentVoiceEntries;r<o.length;r++){var s=o[r];this.getVisibleEntries(s,e)}return e},o.prototype.CurrentAudibleVoiceEntries=function(t){var e=[];if(void 0===this.currentVoiceEntries)return e;if(void 0!==t){for(var n=0,i=this.currentVoiceEntries;n<i.length;n++)if((s=i[n]).ParentVoice.Parent.IdString===t.IdString)return this.getAudibleEntries(s,e),e}else for(var r=0,o=this.currentVoiceEntries;r<o.length;r++){var s=o[r];this.getAudibleEntries(s,e)}return e},o.prototype.getCurrentDynamicChangingExpressions=function(){return this.currentDynamicChangingExpressions},o.prototype.CurrentScoreFollowingVoiceEntries=function(t){var e=[];if(void 0===this.currentVoiceEntries)return e;if(void 0!==t){for(var n=0,i=this.currentVoiceEntries;n<i.length;n++)if((s=i[n]).ParentVoice.Parent.IdString===t.IdString)return this.getScoreFollowingEntries(s,e),e}else for(var r=0,o=this.currentVoiceEntries;r<o.length;r++){var s=o[r];this.getScoreFollowingEntries(s,e)}return e},o.prototype.moveToNext=function(){this.forwardJumpOccurred=this.backJumpOccurred=!1,this.endReached||(void 0!==this.currentVoiceEntries&&(this.currentVoiceEntries=[]),this.recursiveMove(),void 0===this.currentMeasure&&(this.currentTimeStamp=new l.Fraction(99999,1)))},o.prototype.moveToNextVisibleVoiceEntry=function(t){for(;!this.endReached;)if(this.moveToNext(),this.checkEntries(t))return},o.prototype.resetRepetitionIterationCount=function(t){return this.setRepetitionIterationCount(t,1),1},o.prototype.incrementRepetitionIterationCount=function(t){return-1===this.repetitionIterationCountDictKeys.indexOf(t)?this.setRepetitionIterationCount(t,1):this.setRepetitionIterationCount(t,this.getRepetitionIterationCount(t)+1)},o.prototype.setRepetitionIterationCount=function(t,e){var n=this.repetitionIterationCountDictKeys.indexOf(t);return-1===n?(this.repetitionIterationCountDictKeys.push(t),this.repetitionIterationCountDictValues.push(e)):this.repetitionIterationCountDictValues[n]=e,e},o.prototype.getRepetitionIterationCount=function(t){var e=this.repetitionIterationCountDictKeys.indexOf(t);if(-1!==e)return this.repetitionIterationCountDictValues[e]},o.prototype.handleRepetitionsAtMeasureBegin=function(){for(var t=0,e=this.currentMeasure.FirstRepetitionInstructions.length;t<e;++t){var n=this.currentMeasure.FirstRepetitionInstructions[t];if(void 0!==n.parentRepetition){var i=n.parentRepetition;(this.currentRepetition=i).StartIndex===this.currentMeasureIndex&&void 0!==this.JumpResponsibleRepetition&&i!==this.JumpResponsibleRepetition&&i.StartIndex>=this.JumpResponsibleRepetition.StartIndex&&i.EndIndex<=this.JumpResponsibleRepetition.EndIndex&&this.resetRepetitionIterationCount(i)}}},o.prototype.handleRepetitionsAtMeasureEnd=function(){for(var t=0,e=this.currentMeasure.LastRepetitionInstructions.length;t<e;++t){var n=this.currentMeasure.LastRepetitionInstructions[t],i=n.parentRepetition;if(void 0!==i){if(-1<i.BackwardJumpInstructions.indexOf(n)&&this.getRepetitionIterationCount(i)<i.UserNumberOfRepetitions)return this.doBackJump(i),void(this.backJumpOccurred=!0);if(n===i.forwardJumpInstruction){void 0!==this.JumpResponsibleRepetition&&i!==this.JumpResponsibleRepetition&&i.StartIndex>=this.JumpResponsibleRepetition.StartIndex&&i.EndIndex<=this.JumpResponsibleRepetition.EndIndex&&this.resetRepetitionIterationCount(i);var r=i.getForwardJumpTargetForIteration(this.getRepetitionIterationCount(i));if(0<=r)return this.currentMeasureIndex=r,this.currentMeasure=this.manager.MusicSheet.SourceMeasures[this.currentMeasureIndex],this.currentVoiceEntryIndex=-1,this.jumpResponsibleRepetition=i,void(this.forwardJumpOccurred=!0);-2===r&&(this.endReached=!0)}}}this.currentMeasureIndex++,void 0!==this.JumpResponsibleRepetition&&this.currentMeasureIndex>this.JumpResponsibleRepetition.EndIndex&&(this.jumpResponsibleRepetition=void 0)},o.prototype.doBackJump=function(t){this.currentMeasureIndex=t.getBackwardJumpTarget(),this.currentMeasure=this.manager.MusicSheet.SourceMeasures[this.currentMeasureIndex],this.currentVoiceEntryIndex=-1,this.incrementRepetitionIterationCount(t),this.jumpResponsibleRepetition=t},o.prototype.activateCurrentRhythmInstructions=function(){if(void 0!==this.currentMeasure&&0<this.currentMeasure.FirstInstructionsStaffEntries.length&&void 0!==this.currentMeasure.FirstInstructionsStaffEntries[0])for(var t=this.currentMeasure.FirstInstructionsStaffEntries[0].Instructions,e=0,n=t.length;e<n;++e){var i=t[e];i instanceof r.RhythmInstruction&&(this.manager.MusicSheet.SheetPlaybackSetting.rhythm=i.Rhythm)}},o.prototype.activateCurrentDynamicOrTempoInstructions=function(){for(var t=this.manager.MusicSheet.TimestampSortedDynamicExpressionsList;0<this.currentDynamicEntryIndex&&(this.currentDynamicEntryIndex>=t.length||this.CurrentSourceTimestamp.lte(t[this.currentDynamicEntryIndex].parMultiExpression().AbsoluteTimestamp));)this.currentDynamicEntryIndex--;for(;this.currentDynamicEntryIndex<t.length&&t[this.currentDynamicEntryIndex].parMultiExpression().AbsoluteTimestamp.lt(this.CurrentSourceTimestamp);)this.currentDynamicEntryIndex++;for(;this.currentDynamicEntryIndex<t.length&&t[this.currentDynamicEntryIndex].parMultiExpression().AbsoluteTimestamp.Equals(this.CurrentSourceTimestamp);){var e=t[this.currentDynamicEntryIndex],n=e.staffNumber;this.CurrentSourceTimestamp.Equals(e.parMultiExpression().AbsoluteTimestamp)&&(void 0!==e.continuousDynamicExpression?this.activeDynamicExpressions[n]=e.continuousDynamicExpression:void 0!==e.instantaneousDynamicExpression&&(this.activeDynamicExpressions[n]=e.instantaneousDynamicExpression)),this.currentDynamicEntryIndex++}for(this.currentDynamicChangingExpressions=[],n=0;n<this.activeDynamicExpressions.length;n++)if(void 0!==this.activeDynamicExpressions[n]){var i=void 0,r=void 0;if(this.activeDynamicExpressions[n]instanceof h.ContinuousDynamicExpression){var o=this.activeDynamicExpressions[n];i=o.StartMultiExpression.AbsoluteTimestamp,r=o.EndMultiExpression.AbsoluteTimestamp,i.lte(this.CurrentSourceTimestamp)&&this.CurrentSourceTimestamp.lte(r)&&this.currentDynamicChangingExpressions.push(new c.DynamicsContainer(o,n))}else{var s=this.activeDynamicExpressions[n];this.CurrentSourceTimestamp.Equals(s.ParentMultiExpression.AbsoluteTimestamp)&&this.currentDynamicChangingExpressions.push(new c.DynamicsContainer(s,n))}}for(var a=this.manager.MusicSheet.TimestampSortedTempoExpressionsList;0<this.currentTempoEntryIndex&&(this.currentTempoEntryIndex>=a.length||this.CurrentSourceTimestamp.lte(a[this.currentTempoEntryIndex].AbsoluteTimestamp));)this.currentTempoEntryIndex--;for(;this.currentTempoEntryIndex<a.length&&a[this.currentTempoEntryIndex].AbsoluteTimestamp.lt(this.CurrentSourceTimestamp);)this.currentTempoEntryIndex++;for(;this.currentTempoEntryIndex<a.length&&a[this.currentTempoEntryIndex].AbsoluteTimestamp.Equals(this.CurrentSourceTimestamp);)this.activeTempoExpression=a[this.currentTempoEntryIndex],this.currentTempoEntryIndex++;(this.currentTempoChangingExpression=void 0)!==this.activeTempoExpression&&(r=this.activeTempoExpression.AbsoluteTimestamp,void 0!==this.activeTempoExpression.ContinuousTempo&&(r=this.activeTempoExpression.ContinuousTempo.AbsoluteEndTimestamp),(this.activeTempoExpression.AbsoluteTimestamp.lte(this.CurrentSourceTimestamp)||this.CurrentSourceTimestamp.lte(r))&&(this.currentTempoChangingExpression=this.activeTempoExpression))},o.prototype.recursiveMove=function(){if(this.currentVoiceEntryIndex++,0===this.currentVoiceEntryIndex&&(this.handleRepetitionsAtMeasureBegin(),this.activateCurrentRhythmInstructions()),0<=this.currentVoiceEntryIndex&&this.currentVoiceEntryIndex<this.currentMeasure.VerticalSourceStaffEntryContainers.length){var t=this.currentMeasure.VerticalSourceStaffEntryContainers[this.currentVoiceEntryIndex];return this.currentVoiceEntries=this.getVoiceEntries(t),this.currentVerticalContainerInMeasureTimestamp=t.Timestamp,this.currentTimeStamp=l.Fraction.plus(this.currentMeasure.AbsoluteTimestamp,this.currentVerticalContainerInMeasureTimestamp),this.currentTimeStamp>=this.manager.MusicSheet.SelectionEnd&&(this.endReached=!0),void this.activateCurrentDynamicOrTempoInstructions()}if(this.currentEnrolledMeasureTimestamp.Add(this.currentMeasure.Duration),this.handleRepetitionsAtMeasureEnd(),0<=this.currentMeasureIndex&&this.currentMeasureIndex<this.manager.MusicSheet.SourceMeasures.length)return this.currentMeasure=this.manager.MusicSheet.SourceMeasures[this.currentMeasureIndex],this.currentTimeStamp=l.Fraction.plus(this.currentMeasure.AbsoluteTimestamp,this.currentVerticalContainerInMeasureTimestamp),this.currentVoiceEntryIndex=-1,void this.recursiveMove();this.currentVerticalContainerInMeasureTimestamp=new l.Fraction,this.currentMeasure=void 0,this.currentVoiceEntries=void 0,this.endReached=!0},o.prototype.checkEntries=function(t){var e=this.CurrentVisibleVoiceEntries();if(0<e.length){if(!t)return!0;for(var n=0,i=e.length;n<i;++n)if(void 0!==e[n].Notes[0].Pitch)return!0}return!1},o.prototype.getVisibleEntries=function(t,e){t.ParentVoice.Visible&&e.push(t)},o.prototype.getAudibleEntries=function(t,e){t.ParentVoice.Audible&&e.push(t)},o.prototype.getScoreFollowingEntries=function(t,e){t.ParentVoice.Following&&t.ParentVoice.Parent.Following&&e.push(t)},o.prototype.getVoiceEntries=function(t){for(var e=[],n=0,i=t.StaffEntries;n<i.length;n++){var r=i[n];if(void 0!==r)for(var o=0,s=r.VoiceEntries;o<s.length;o++){var a=s[o];e.push(a)}}return e},o);function o(t,e,n){this.currentMeasureIndex=0,this.currentPartIndex=0,this.currentVoiceEntryIndex=-1,this.currentDynamicEntryIndex=0,this.currentTempoEntryIndex=0,this.currentDynamicChangingExpressions=[],this.currentRepetition=void 0,this.endReached=!1,this.frontReached=!1,this.currentTimeStamp=new l.Fraction(0,1),this.currentEnrolledMeasureTimestamp=new l.Fraction(0,1),this.currentVerticalContainerInMeasureTimestamp=new l.Fraction(0,1),this.jumpResponsibleRepetition=void 0,this.activeDynamicExpressions=[];try{this.frontReached=!0,this.manager=t,this.currentVoiceEntries=void 0,this.frontReached=!1;for(var i=0,r=t.MusicSheet.Repetitions;i<r.length;i++){var o=r[i];this.setRepetitionIterationCount(o,1)}if(this.activeDynamicExpressions=new Array(t.MusicSheet.getCompleteNumberOfStaves()),this.currentMeasure=this.manager.MusicSheet.SourceMeasures[0],void 0===e)return;for(;this.moveToNext(),(void 0===this.currentVoiceEntries||this.currentTimeStamp.lt(e))&&!this.endReached;);for(var s=0;s<this.activeDynamicExpressions.length;s++)if(void 0!==this.activeDynamicExpressions[s])if(this.activeDynamicExpressions[s]instanceof h.ContinuousDynamicExpression){var a=this.activeDynamicExpressions[s];this.currentDynamicChangingExpressions.push(new c.DynamicsContainer(a,s))}else{var u=this.activeDynamicExpressions[s];this.currentDynamicChangingExpressions.push(new c.DynamicsContainer(u,s))}this.currentTempoChangingExpression=this.activeTempoExpression}catch(t){f.info("MusicPartManagerIterator: "+t)}}e.MusicPartManagerIterator=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(36),r=n(53),o=(s.prototype.parMultiExpression=function(){return void 0!==this.continuousDynamicExpression?this.continuousDynamicExpression.StartMultiExpression:void 0!==this.instantaneousDynamicExpression?this.instantaneousDynamicExpression.ParentMultiExpression:void 0},s.prototype.CompareTo=function(t){return this.parMultiExpression().AbsoluteTimestamp.CompareTo(t.parMultiExpression().AbsoluteTimestamp)},s);function s(t,e){t instanceof i.ContinuousDynamicExpression?this.continuousDynamicExpression=t:t instanceof r.InstantaneousDynamicExpression&&(this.instantaneousDynamicExpression=t),this.staffNumber=e}e.DynamicsContainer=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(r.prototype.finalizeMeasure=function(t){var e=this.measureErrors[t];void 0===e&&(e=[]),this.measureErrors[t]=e.concat(this.tempErrors),this.tempErrors=[]},r.prototype.pushMeasureError=function(t){this.tempErrors.push(t)},r.prototype.push=function(t){this.errors.push(t)},r);function r(){this.measureErrors={},this.errors=[],this.tempErrors=[]}e.MusicSheetErrors=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(r.prototype,"Syllables",{get:function(){return this.syllables},enumerable:!0,configurable:!0}),r.prototype.containsVoiceEntry=function(t){for(var e=0,n=this.Syllables.length;e<n;++e)if(this.Syllables[e].Parent===t)return!0;return!1},r.prototype.findLyricEntryInVoiceEntry=function(t){for(var e=0,n=this.Syllables.length;e<n;++e){var i=this.Syllables[e];if(i.Parent===t)return i}},r);function r(){this.syllables=[]}e.LyricWord=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(r.prototype,"Text",{get:function(){return this.text},set:function(t){this.text=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Word",{get:function(){return this.word},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Parent",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"VerseNumber",{get:function(){return this.verseNumber},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"SyllableIndex",{get:function(){return this.syllableIndex},enumerable:!0,configurable:!0}),r);function r(t,e,n,i,r){void 0===r&&(r=-1),this.text=t,this.word=n,this.parent=i,this.verseNumber=e,0<=r&&(this.syllableIndex=r)}e.LyricsEntry=i},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.TechnicalInstructionType||(e.TechnicalInstructionType={}))[i.Fingering=0]="Fingering";e.TechnicalInstruction=function(){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(67),o=n(8),s=n(44),a=n(68),u=(Object.defineProperty(l.prototype,"Timestamp",{get:function(){return this.timestamp},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"AbsoluteTimestamp",{get:function(){return i.Fraction.plus(this.sourceMeasure.AbsoluteTimestamp,this.timestamp)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SourceMeasureParent",{get:function(){return this.sourceMeasure},set:function(t){this.sourceMeasure=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"InstantaneousTempo",{get:function(){return this.instantaneousTempo},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ContinuousTempo",{get:function(){return this.continuousTempo},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"EntriesList",{get:function(){return this.expressions},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"CombinedExpressionsText",{get:function(){return this.combinedExpressionsText},set:function(t){this.combinedExpressionsText=t},enumerable:!0,configurable:!0}),l.prototype.getPlacementOfFirstEntry=function(){var t=o.PlacementEnum.Above;return 0<this.expressions.length&&(this.expressions[0].Expression instanceof r.InstantaneousTempoExpression?t=this.expressions[0].Expression.Placement:this.expressions[0].Expression instanceof a.ContinuousTempoExpression&&(t=this.expressions[0].Expression.Placement)),t},l.prototype.getFontstyleOfFirstEntry=function(){var t=s.FontStyles.Regular;return this.expressions[0].Expression instanceof r.InstantaneousTempoExpression?t=s.FontStyles.Bold:this.expressions[0].Expression instanceof a.ContinuousTempoExpression&&(t=s.FontStyles.Italic),t},l.prototype.addExpression=function(t,e){t instanceof r.InstantaneousTempoExpression?this.instantaneousTempo=t:t instanceof a.ContinuousTempoExpression&&(this.continuousTempo=t);var n=new c;n.prefix=e,n.Expression=t,n.label=t.Label,this.expressions.push(n)},l.prototype.CompareTo=function(t){return this.SourceMeasureParent.MeasureNumber>t.SourceMeasureParent.MeasureNumber?1:this.SourceMeasureParent.MeasureNumber<t.SourceMeasureParent.MeasureNumber?-1:this.Timestamp.RealValue>t.Timestamp.RealValue?1:this.Timestamp.RealValue<t.Timestamp.RealValue?-1:0},l);function l(t,e){this.expressions=[],this.sourceMeasure=t,this.timestamp=e}e.MultiTempoExpression=u;var c=(Object.defineProperty(h.prototype,"Expression",{get:function(){return this.expression},set:function(t){this.expression=t},enumerable:!0,configurable:!0}),h);function h(){}e.TempoExpressionEntry=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(53),o=n(36),s=n(141),a=n(142),u=n(8),l=(Object.defineProperty(c.prototype,"SourceMeasureParent",{get:function(){return this.sourceMeasure},set:function(t){this.sourceMeasure=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"StaffNumber",{get:function(){return this.staffNumber},set:function(t){this.staffNumber=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"Timestamp",{get:function(){return this.timestamp},set:function(t){this.timestamp=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"AbsoluteTimestamp",{get:function(){return i.Fraction.plus(this.timestamp,this.sourceMeasure.AbsoluteTimestamp)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"InstantaneousDynamic",{get:function(){return this.instantaneousDynamic},set:function(t){this.instantaneousDynamic=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"EndingContinuousDynamic",{get:function(){return this.endingContinuousDynamic},set:function(t){this.endingContinuousDynamic=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"StartingContinuousDynamic",{get:function(){return this.startingContinuousDynamic},set:function(t){this.startingContinuousDynamic=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"MoodList",{get:function(){return this.moodList},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"UnknownList",{get:function(){return this.unknownList},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"EntriesList",{get:function(){return this.expressions},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"OctaveShiftStart",{get:function(){return this.octaveShiftStart},set:function(t){this.octaveShiftStart=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"OctaveShiftEnd",{get:function(){return this.octaveShiftEnd},set:function(t){this.octaveShiftEnd=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"CombinedExpressionsText",{get:function(){return this.combinedExpressionsText},set:function(t){this.combinedExpressionsText=t},enumerable:!0,configurable:!0}),c.prototype.getPlacementOfFirstEntry=function(){var t=u.PlacementEnum.Above;return 0<this.expressions.length&&(this.expressions[0].expression instanceof r.InstantaneousDynamicExpression?t=this.expressions[0].expression.Placement:this.expressions[0].expression instanceof o.ContinuousDynamicExpression?t=this.expressions[0].expression.Placement:this.expressions[0].expression instanceof s.MoodExpression?t=this.expressions[0].expression.Placement:this.expressions[0].expression instanceof a.UnknownExpression&&(t=this.expressions[0].expression.Placement)),t},c.prototype.addExpression=function(t,e){t instanceof r.InstantaneousDynamicExpression?(void 0!==this.instantaneousDynamic&&this.removeExpressionFromEntryList(this.InstantaneousDynamic),this.instantaneousDynamic=t,this.instantaneousDynamic.ParentMultiExpression=this):t instanceof o.ContinuousDynamicExpression?this.startingContinuousDynamic=t:t instanceof s.MoodExpression?this.moodList.push(t):t instanceof a.UnknownExpression&&this.unknownList.push(t),this.addExpressionToEntryList(t,e)},c.prototype.CompareTo=function(t){return this.SourceMeasureParent.MeasureNumber>t.SourceMeasureParent.MeasureNumber?1:this.SourceMeasureParent.MeasureNumber<t.SourceMeasureParent.MeasureNumber?-1:this.Timestamp.RealValue>t.Timestamp.RealValue?1:this.Timestamp.RealValue<t.Timestamp.RealValue?-1:0},c.prototype.addExpressionToEntryList=function(t,e){var n=new h;n.prefix=e,(n.expression=t)instanceof o.ContinuousDynamicExpression?n.label=t.Label:t instanceof s.MoodExpression?n.label=t.Label:t instanceof a.UnknownExpression?n.label=t.Label:n.label="",this.expressions.push(n)},c.prototype.removeExpressionFromEntryList=function(t){for(var e=0,n=this.expressions.length;e<n;++e)if(this.expressions[e].expression===t){this.expressions.splice(e,1);break}},c);function c(t,e){this.unknownList=[],this.moodList=[],this.expressions=[],this.sourceMeasure=t,this.timestamp=e}e.MultiExpression=l;var h=function(){};e.MultiExpressionEntry=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=(Object.defineProperty(o.prototype,"StartNote",{get:function(){return this.startNote},set:function(t){this.startNote=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"EndNote",{get:function(){return this.endNote},set:function(t){this.endNote=t},enumerable:!0,configurable:!0}),o.prototype.startNoteHasMoreStartingSlurs=function(){if(void 0===this.startNote)return!1;for(var t=0,e=this.startNote.NoteSlurs.length;t<e;++t){var n=this.startNote.NoteSlurs[t];if(n!==this&&n.StartNote===this.startNote)return!0}return!1},o.prototype.endNoteHasMoreEndingSlurs=function(){if(void 0===this.endNote)return!1;for(var t=0,e=this.endNote.NoteSlurs.length;t<e;++t){var n=this.endNote.NoteSlurs[t];if(n!==this&&n.EndNote===this.endNote)return!0}return!1},o.prototype.isCrossed=function(){return this.startNote.ParentStaffEntry.ParentStaff!==this.endNote.ParentStaffEntry.ParentStaff},o.prototype.isSlurLonger=function(){if(void 0===this.endNote||void 0===this.startNote)return!1;for(var t=r.Fraction.minus(this.endNote.getAbsoluteTimestamp(),this.startNote.getAbsoluteTimestamp()),e=0,n=this.startNote.NoteSlurs.length;e<n;++e)if((i=this.startNote.NoteSlurs[e])!==this&&void 0!==i.EndNote&&void 0!==i.StartNote&&-1===r.Fraction.minus(i.EndNote.getAbsoluteTimestamp(),i.StartNote.getAbsoluteTimestamp()).CompareTo(t))return!0;for(e=0,n=this.endNote.NoteSlurs.length;e<n;++e){var i;if((i=this.endNote.NoteSlurs[e])!==this&&void 0!==i.EndNote&&void 0!==i.StartNote&&r.Fraction.minus(i.EndNote.getAbsoluteTimestamp(),i.StartNote.getAbsoluteTimestamp()).CompareTo(t))return!0}return!1},o);function o(){}e.Slur=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(r.StringContainsSeparatedWord=function(t,e){return!!new RegExp("( |^)"+e+"([ .]|$)").test(t)},r);function r(){}e.StringUtil=i},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(14),a=n(110),u=n(29),l=(o=a.VexFlowBackend,r(c,o),c.prototype.getBackendType=function(){return 3},c.prototype.initialize=function(t){this.canvas=document.createElement("div"),this.inner=this.canvas,this.inner.style.position="relative",this.canvas.style.zIndex="0",t.appendChild(this.inner),this.renderer=new s.Flow.Renderer(this.canvas,this.getBackendType()),this.ctx=this.renderer.getContext()},c.prototype.getContext=function(){return this.ctx},c.prototype.clear=function(){if(this.ctx)for(var t=this.ctx.svg;t.lastChild;)t.removeChild(t.lastChild)},c.prototype.scale=function(t){this.ctx.scale(t,t)},c.prototype.translate=function(t,e){},c.prototype.renderText=function(t,e,n,i,r,o,s){void 0===s&&(s=void 0),this.ctx.save(),s&&(this.ctx.attributes.fill=s,this.ctx.attributes.stroke=s),this.ctx.setFont("Times New Roman",t,u.VexFlowConverter.fontStyle(e)),this.ctx.attributes["font-size"]=t+"px",this.ctx.state["font-size"]=t+"px",this.ctx.fillText(i,o.x,o.y+r),this.ctx.restore()},c.prototype.renderRectangle=function(t,e,n){void 0===n&&(n=1),this.ctx.save(),this.ctx.attributes.fill=u.VexFlowConverter.style(e),this.ctx.attributes["fill-opacity"]=n,this.ctx.fillRect(t.x,t.y,t.width,t.height),this.ctx.restore(),this.ctx.attributes["fill-opacity"]=1},c.prototype.renderLine=function(t,e,n,i){void 0===n&&(n="#FF0000FF"),void 0===i&&(i=2),this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(e.x,e.y),this.ctx.attributes.stroke=n,this.ctx.lineWidth=i,this.ctx.stroke(),this.ctx.restore()},c.prototype.renderCurve=function(t){this.ctx.beginPath(),this.ctx.moveTo(t[0].x,t[0].y),this.ctx.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y),this.ctx.lineTo(t[7].x,t[7].y),this.ctx.bezierCurveTo(t[6].x,t[6].y,t[5].x,t[5].y,t[4].x,t[4].y),this.ctx.lineTo(t[0].x,t[0].y),this.ctx.closePath(),this.ctx.fill()},c);function c(){return null!==o&&o.apply(this,arguments)||this}e.SvgVexFlowBackend=l},function(t,e,n){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var t=new i;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(i.prototype=n(209)).loadAsync=n(242),i.support=n(26),i.defaults=n(159),i.version="3.2.0",i.loadAsync=function(t,e){return(new i).loadAsync(t,e)},i.external=n(47),t.exports=i},function(t,e,n){"use strict";function o(t,e,n){var i,r=l.getTypeOf(e),o=l.extend(n||{},h);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(t=m(t)),o.createFolders&&(i=y(t))&&g.call(this,i,!0);var s,a="string"===r&&!1===o.binary&&!1===o.base64;n&&void 0!==n.binary||(o.binary=!a),(e instanceof f&&0===e.uncompressedSize||o.dir||!e||0===e.length)&&(o.base64=!1,o.binary=!0,e="",o.compression="STORE",r="string"),s=e instanceof f||e instanceof c?e:d.isNode&&d.isStream(e)?new b(t,e):l.prepareContent(t,e,o.binary,o.optimizedBinaryString,o.base64);var u=new p(t,s,o);this.files[t]=u}var r=n(38),l=n(3),c=n(12),s=n(158),h=n(159),f=n(79),p=n(228),a=n(229),d=n(56),b=n(241),y=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},m=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},g=function(t,e){return e=void 0!==e?e:h.createFolders,t=m(t),this.files[t]||o.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function u(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var i={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,i;for(e in this.files)this.files.hasOwnProperty(e)&&(i=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,i))},filter:function(n){var i=[];return this.forEach(function(t,e){n(t,e)&&i.push(e)}),i},file:function(t,e,n){if(1!==arguments.length)return t=this.root+t,o.call(this,t,e,n),this;if(u(t)){var i=t;return this.filter(function(t,e){return!e.dir&&i.test(t)})}var r=this.files[this.root+t];return r&&!r.dir?r:null},folder:function(n){if(!n)return this;if(u(n))return this.filter(function(t,e){return e.dir&&n.test(t)});var t=this.root+n,e=g.call(this,t),i=this.clone();return i.root=e.name,i},remove:function(n){n=this.root+n;var t=this.files[n];if(t||("/"!==n.slice(-1)&&(n+="/"),t=this.files[n]),t&&!t.dir)delete this.files[n];else for(var e=this.filter(function(t,e){return e.name.slice(0,n.length)===n}),i=0;i<e.length;i++)delete this.files[e[i].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=l.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");l.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var i=n.comment||this.comment||"";e=a.generateWorker(this,n,i)}catch(t){(e=new c("error")).error(t)}return new s(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};t.exports=i},function(t,e,n){"use strict";e.byteLength=function(t){var e=h(t),n=e[0],i=e[1];return 3*(n+i)/4-i},e.toByteArray=function(t){for(var e,n=h(t),i=n[0],r=n[1],o=new c(3*(i+r)/4-r),s=0,a=0<r?i-4:i,u=0;u<a;u+=4)e=l[t.charCodeAt(u)]<<18|l[t.charCodeAt(u+1)]<<12|l[t.charCodeAt(u+2)]<<6|l[t.charCodeAt(u+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=255&e;return 2===r&&(e=l[t.charCodeAt(u)]<<2|l[t.charCodeAt(u+1)]>>4,o[s++]=255&e),1===r&&(e=l[t.charCodeAt(u)]<<10|l[t.charCodeAt(u+1)]<<4|l[t.charCodeAt(u+2)]>>2,o[s++]=e>>8&255,o[s++]=255&e),o},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,r=[],o=0,s=n-i;o<s;o+=16383)r.push(u(t,o,s<o+16383?s:o+16383));return 1==i?(e=t[n-1],r.push(a[e>>2]+a[e<<4&63]+"==")):2==i&&(e=(t[n-2]<<8)+t[n-1],r.push(a[e>>10]+a[e>>4&63]+a[e<<2&63]+"=")),r.join("")};for(var a=[],l=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,o=i.length;r<o;++r)a[r]=i[r],l[i.charCodeAt(r)]=r;function h(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t,e,n){for(var i,r,o=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(a[(r=i)>>18&63]+a[r>>12&63]+a[r>>6&63]+a[63&r]);return o.join("")}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,u=(1<<a)-1,l=u>>1,c=-7,h=n?r-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=a;0<c;o=256*o+t[e+h],h+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;0<c;s=256*s+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=l}return(p?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var s,a,u,l=8*o-r-1,c=(1<<l)-1,h=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,d=i?1:-1,b=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),2<=(e+=1<=s+h?f/u:f*Math.pow(2,1-h))*u&&(s++,u/=2),c<=s+h?(a=0,s=c):1<=s+h?(a=(e*u-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));8<=r;t[n+p]=255&a,p+=d,a/=256,r-=8);for(s=s<<r|a,l+=r;0<l;t[n+p]=255&s,p+=d,s/=256,l-=8);t[n+p-d]|=128*b}},function(t,e,n){t.exports=i;var c=n(76).EventEmitter;function i(){c.call(this)}n(39)(i,c),i.Readable=n(77),i.Writable=n(219),i.Duplex=n(220),i.Transform=n(221),i.PassThrough=n(222),(i.Stream=i).prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function r(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",r),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",a));var o=!1;function s(){o||(o=!0,e.end())}function a(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function u(t){if(l(),0===c.listenerCount(this,"error"))throw t}function l(){n.removeListener("data",i),e.removeListener("drain",r),n.removeListener("end",s),n.removeListener("close",a),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",l),n.removeListener("close",l),e.removeListener("close",l)}return n.on("error",u),e.on("error",u),n.on("end",l),n.on("close",l),e.on("close",l),e.emit("pipe",n),e}},function(t,e){},function(t,e,n){"use strict";var s=n(55).Buffer,i=n(215);function r(){!function(t){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.head=null,this.tail=null,this.length=0}t.exports=(r.prototype.push=function(t){var e={data:t,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},r.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},r.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},r.prototype.clear=function(){this.head=this.tail=null,this.length=0},r.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},r.prototype.concat=function(t){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i=s.allocUnsafe(t>>>0),r=this.head,o=0;r;)e=i,n=o,r.data.copy(e,n),o+=r.data.length,r=r.next;return i},r),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(t,d){!function(n,i){"use strict";if(!n.setImmediate){var r,o,e,s,t,a=1,u={},l=!1,c=n.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(n);h=h&&h.setTimeout?h:n,r="[object process]"==={}.toString.call(n.process)?function(t){d.nextTick(function(){p(t)})}:function(){if(n.postMessage&&!n.importScripts){var t=!0,e=n.onmessage;return n.onmessage=function(){t=!1},n.postMessage("","*"),n.onmessage=e,t}}()?(s="setImmediate$"+Math.random()+"$",t=function(t){t.source===n&&"string"==typeof t.data&&0===t.data.indexOf(s)&&p(+t.data.slice(s.length))},n.addEventListener?n.addEventListener("message",t,!1):n.attachEvent("onmessage",t),function(t){n.postMessage(s+t,"*")}):n.MessageChannel?((e=new MessageChannel).port1.onmessage=function(t){p(t.data)},function(t){e.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(o=c.documentElement,function(t){var e=c.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):function(t){setTimeout(p,0,t)},h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return u[a]=i,r(a),a++},h.clearImmediate=f}function f(t){delete u[t]}function p(t){if(l)setTimeout(p,0,t);else{var e=u[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(i,n)}}(e)}finally{f(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(19),n(40))},function(t,e,n){(function(n){function i(t){try{if(!n.localStorage)return!1}catch(t){return!1}var e=n.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}t.exports=function(t,e){if(i("noDeprecation"))return t;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,n(19))},function(t,e,n){"use strict";t.exports=o;var i=n(156),r=n(46);function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}r.inherits=n(39),r.inherits(o,i),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(78)},function(t,e,n){t.exports=n(31)},function(t,e,n){t.exports=n(77).Transform},function(t,e,n){t.exports=n(77).PassThrough},function(e,t,n){"use strict";(function(t){e.exports="function"==typeof t?t:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}}).call(this,n(154).setImmediate)},function(t,e,n){"use strict";var r=n(225);function l(){}var c={},o=["REJECTED"],s=["FULFILLED"],i=["PENDING"];function a(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=i,this.queue=[],this.outcome=void 0,t!==l&&p(this,t)}function u(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(e,n,i){r(function(){var t;try{t=n(i)}catch(t){return c.reject(e,t)}t===e?c.reject(e,new TypeError("Cannot resolve promise with itself")):c.resolve(e,t)})}function f(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(e,t){var n=!1;function i(t){n||(n=!0,c.reject(e,t))}function r(t){n||(n=!0,c.resolve(e,t))}var o=d(function(){t(r,i)});"error"===o.status&&i(o.value)}function d(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}(t.exports=a).prototype.finally=function(e){if("function"!=typeof e)return this;var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})},a.prototype.catch=function(t){return this.then(null,t)},a.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===o)return this;var n=new this.constructor(l);return this.state!==i?h(n,this.state===s?t:e,this.outcome):this.queue.push(new u(n,t,e)),n},u.prototype.callFulfilled=function(t){c.resolve(this.promise,t)},u.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},u.prototype.callRejected=function(t){c.reject(this.promise,t)},u.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},c.resolve=function(t,e){var n=d(f,e);if("error"===n.status)return c.reject(t,n.value);var i=n.value;if(i)p(t,i);else{t.state=s,t.outcome=e;for(var r=-1,o=t.queue.length;++r<o;)t.queue[r].callFulfilled(e)}return t},c.reject=function(t,e){t.state=o,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},a.resolve=function(t){return t instanceof this?t:c.resolve(new this(l),t)},a.reject=function(t){var e=new this(l);return c.reject(e,t)},a.all=function(t){var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,r=!1;if(!i)return this.resolve([]);for(var o=new Array(i),s=0,e=-1,a=new this(l);++e<i;)u(t[e],e);return a;function u(t,e){n.resolve(t).then(function(t){o[e]=t,++s!==i||r||(r=!0,c.resolve(a,o))},function(t){r||(r=!0,c.reject(a,t))})}},a.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,n=!1;if(!e)return this.resolve([]);for(var i,r=-1,o=new this(l);++r<e;)i=t[r],this.resolve(i).then(function(t){n||(n=!0,c.resolve(o,t))},function(t){n||(n=!0,c.reject(o,t))});return o}},function(c,t,e){"use strict";(function(e){var n,i,t=e.MutationObserver||e.WebKitMutationObserver;if(t){var r=0,o=new t(l),s=e.document.createTextNode("");o.observe(s,{characterData:!0}),n=function(){s.data=r=++r%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var a=new e.MessageChannel;a.port1.onmessage=l,n=function(){a.port2.postMessage(0)}}var u=[];function l(){var t,e;i=!0;for(var n=u.length;n;){for(e=u,u=[],t=-1;++t<n;)e[t]();n=u.length}i=!1}c.exports=function(t){1!==u.push(t)||i||n()}}).call(this,e(19))},function(t,e,n){"use strict";var i=n(12),r=n(3);function o(t){i.call(this,"ConvertWorker to "+t),this.destType=t}r.inherits(o,i),o.prototype.processChunk=function(t){this.push({data:r.transformTo(this.destType,t.data),meta:t.meta})},t.exports=o},function(t,e,n){"use strict";var r=n(150).Readable;function i(t,e,n){r.call(this,e),this._helper=t;var i=this;t.on("data",function(t,e){i.push(t)||i._helper.pause(),n&&n(e)}).on("error",function(t){i.emit("error",t)}).on("end",function(){i.push(null)})}n(3).inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},function(t,e,n){"use strict";function i(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var o=n(158),r=n(160),s=n(38),a=n(79),u=n(12);i.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var i="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var r=!this._dataBinary;r&&!i&&(e=e.pipe(new s.Utf8EncodeWorker)),!r&&i&&(e=e.pipe(new s.Utf8DecodeWorker))}catch(t){(e=new u("error")).error(t)}return new o(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof u?this._data:new r(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<l.length;h++)i.prototype[l[h]]=c;t.exports=i},function(t,e,n){"use strict";var l=n(163),i=n(240);e.generateWorker=function(t,s,e){var a=new i(s.streamFiles,e,s.platform,s.encodeFileName),u=0;try{t.forEach(function(t,e){u++;var n=function(t,e){var n=t||e,i=l[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(e.options.compression,s.compression),i=e.options.compressionOptions||s.compressionOptions||{},r=e.dir,o=e.date;e._compressWorker(n,i).withStreamInfo("file",{name:t,dir:r,date:o,comment:e.comment||"",unixPermissions:e.unixPermissions,dosPermissions:e.dosPermissions}).pipe(a)}),a.entriesCount=u}catch(t){a.error(t)}return a}},function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=n(231),o=n(3),s=n(12),a=i?"uint8array":"array";function u(t,e){s.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}e.magic="\b\0",o.inherits(u,s),u.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(a,t.data),!1)},u.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},e.compressWorker=function(t){return new u("Deflate",t)},e.uncompressWorker=function(){return new u("Inflate",{})}},function(t,e,n){"use strict";var i={};(0,n(27).assign)(i,n(232),n(235),n(168)),t.exports=i},function(t,e,n){"use strict";var s=n(233),a=n(27),u=n(166),r=n(81),o=n(167),l=Object.prototype.toString,c=0,h=-1,f=0,p=8;function d(t){if(!(this instanceof d))return new d(t);this.options=a.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var n=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==c)throw new Error(r[n]);if(e.header&&s.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i="string"==typeof e.dictionary?u.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=s.deflateSetDictionary(this.strm,i))!==c)throw new Error(r[n]);this._dict_set=!0}}function i(t,e){var n=new d(e);if(n.push(t,!0),n.err)throw n.msg||r[n.err];return n.result}d.prototype.push=function(t,e){var n,i,r=this.strm,o=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,"string"==typeof t?r.input=u.string2buf(t):"[object ArrayBuffer]"===l.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new a.Buf8(o),r.next_out=0,r.avail_out=o),1!==(n=s.deflate(r,i))&&n!==c)return this.onEnd(n),!(this.ended=!0);0!==r.avail_out&&(0!==r.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(u.buf2binstring(a.shrinkBuf(r.output,r.next_out))):this.onData(a.shrinkBuf(r.output,r.next_out)))}while((0<r.avail_in||0===r.avail_out)&&1!==n);return 4===i?(n=s.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==i||(this.onEnd(c),!(r.avail_out=0))},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=d,e.deflate=i,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,i(t,e)}},function(t,e,n){"use strict";var u,f=n(27),l=n(234),p=n(164),d=n(165),i=n(81),c=0,h=0,b=-2,r=2,y=8,o=286,s=30,a=19,m=2*o+1,g=15,v=3,_=258,S=_+v+1,x=42,w=113;function E(t,e){return t.msg=i[e],e}function P(t){return(t<<1)-(4<t?9:0)}function T(t){for(var e=t.length;0<=--e;)t[e]=0}function k(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(f.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function O(t,e){l._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,k(t.strm)}function M(t,e){t.pending_buf[t.pending++]=e}function R(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function L(t,e){var n,i,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,u=t.strstart>t.w_size-S?t.strstart-(t.w_size-S):0,l=t.window,c=t.w_mask,h=t.prev,f=t.strstart+_,p=l[o+s-1],d=l[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(l[(n=e)+s]===d&&l[n+s-1]===p&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<f);if(i=_-(f-o),o=f-_,s<i){if(t.match_start=e,a<=(s=i))break;p=l[o+s-1],d=l[o+s]}}}while((e=h[e&c])>u&&0!=--r);return s<=t.lookahead?s:t.lookahead}function A(t){var e,n,i,r,o,s,a,u,l,c,h=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=h+(h-S)){for(f.arraySet(t.window,t.window,h,h,0),t.match_start-=h,t.strstart-=h,t.block_start-=h,e=n=t.hash_size;i=t.head[--e],t.head[e]=h<=i?i-h:0,--n;);for(e=n=h;i=t.prev[--e],t.prev[e]=h<=i?i-h:0,--n;);r+=h}if(0===t.strm.avail_in)break;if(s=t.strm,a=t.window,u=t.strstart+t.lookahead,l=r,c=void 0,(c=s.avail_in)>l&&(c=l),n=0===c?0:(s.avail_in-=c,f.arraySet(a,s.input,s.next_in,c,u),1===s.state.wrap?s.adler=p(s.adler,a,c,u):2===s.state.wrap&&(s.adler=d(s.adler,a,c,u)),s.next_in+=c,s.total_in+=c,c),t.lookahead+=n,t.lookahead+t.insert>=v)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+v-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<v)););}while(t.lookahead<S&&0!==t.strm.avail_in)}function C(t,e){for(var n,i;;){if(t.lookahead<S){if(A(t),t.lookahead<S&&e===c)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=v&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+v-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-S&&(t.match_length=L(t,n)),t.match_length>=v)if(i=l._tr_tally(t,t.strstart-t.match_start,t.match_length-v),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=v){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+v-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=l._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(O(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<v-1?t.strstart:v-1,4===e?(O(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(O(t,!1),0===t.strm.avail_out)?1:2}function I(t,e){for(var n,i,r;;){if(t.lookahead<S){if(A(t),t.lookahead<S&&e===c)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=v&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+v-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=v-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-S&&(t.match_length=L(t,n),t.match_length<=5&&(1===t.strategy||t.match_length===v&&4096<t.strstart-t.match_start)&&(t.match_length=v-1)),t.prev_length>=v&&t.match_length<=t.prev_length){for(r=t.strstart+t.lookahead-v,i=l._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-v),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+v-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=v-1,t.strstart++,i&&(O(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((i=l._tr_tally(t,0,t.window[t.strstart-1]))&&O(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=l._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<v-1?t.strstart:v-1,4===e?(O(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(O(t,!1),0===t.strm.avail_out)?1:2}function N(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function F(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new f.Buf16(2*m),this.dyn_dtree=new f.Buf16(2*(2*s+1)),this.bl_tree=new f.Buf16(2*(2*a+1)),T(this.dyn_ltree),T(this.dyn_dtree),T(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new f.Buf16(g+1),this.heap=new f.Buf16(2*o+1),T(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new f.Buf16(2*o+1),T(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function B(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=r,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?x:w,t.adler=2===e.wrap?0:1,e.last_flush=c,l._tr_init(e),h):E(t,b)}function D(t){var e,n=B(t);return n===h&&((e=t.state).window_size=2*e.w_size,T(e.head),e.max_lazy_match=u[e.level].max_lazy,e.good_match=u[e.level].good_length,e.nice_match=u[e.level].nice_length,e.max_chain_length=u[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=v-1,e.match_available=0,e.ins_h=0),n}function j(t,e,n,i,r,o){if(!t)return b;var s=1;if(-1===e&&(e=6),i<0?(s=0,i=-i):15<i&&(s=2,i-=16),r<1||9<r||n!==y||i<8||15<i||e<0||9<e||o<0||4<o)return E(t,b);8===i&&(i=9);var a=new F;return(t.state=a).strm=t,a.wrap=s,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+v-1)/v),a.window=new f.Buf8(2*a.w_size),a.head=new f.Buf16(a.hash_size),a.prev=new f.Buf16(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new f.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=o,a.method=n,D(t)}u=[new N(0,0,0,0,function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(A(t),0===t.lookahead&&e===c)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,O(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-S&&(O(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(O(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(O(t,!1),t.strm.avail_out),1)}),new N(4,4,8,4,C),new N(4,5,16,8,C),new N(4,6,32,32,C),new N(4,4,16,16,I),new N(8,16,32,32,I),new N(8,16,128,128,I),new N(8,32,128,256,I),new N(32,128,258,1024,I),new N(32,258,258,4096,I)],e.deflateInit=function(t,e){return j(t,e,y,15,8,0)},e.deflateInit2=j,e.deflateReset=D,e.deflateResetKeep=B,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?b:(t.state.gzhead=e,h):b},e.deflate=function(t,e){var n,i,r,o;if(!t||!t.state||5<e||e<0)return t?E(t,b):b;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return E(t,0===t.avail_out?-5:b);if(i.strm=t,n=i.last_flush,i.last_flush=e,i.status===x)if(2===i.wrap)t.adler=0,M(i,31),M(i,139),M(i,8),i.gzhead?(M(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),M(i,255&i.gzhead.time),M(i,i.gzhead.time>>8&255),M(i,i.gzhead.time>>16&255),M(i,i.gzhead.time>>24&255),M(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),M(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(M(i,255&i.gzhead.extra.length),M(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=d(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(M(i,0),M(i,0),M(i,0),M(i,0),M(i,0),M(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),M(i,3),i.status=w);else{var s=y+(i.w_bits-8<<4)<<8;s|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(s|=32),s+=31-s%31,i.status=w,R(i,s),0!==i.strstart&&(R(i,t.adler>>>16),R(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>r&&(t.adler=d(t.adler,i.pending_buf,i.pending-r,r)),k(t),r=i.pending,i.pending!==i.pending_buf_size));)M(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(t.adler=d(t.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=d(t.adler,i.pending_buf,i.pending-r,r)),k(t),r=i.pending,i.pending===i.pending_buf_size)){o=1;break}o=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,M(i,o)}while(0!==o);i.gzhead.hcrc&&i.pending>r&&(t.adler=d(t.adler,i.pending_buf,i.pending-r,r)),0===o&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=d(t.adler,i.pending_buf,i.pending-r,r)),k(t),r=i.pending,i.pending===i.pending_buf_size)){o=1;break}o=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,M(i,o)}while(0!==o);i.gzhead.hcrc&&i.pending>r&&(t.adler=d(t.adler,i.pending_buf,i.pending-r,r)),0===o&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&k(t),i.pending+2<=i.pending_buf_size&&(M(i,255&t.adler),M(i,t.adler>>8&255),t.adler=0,i.status=w)):i.status=w),0!==i.pending){if(k(t),0===t.avail_out)return i.last_flush=-1,h}else if(0===t.avail_in&&P(e)<=P(n)&&4!==e)return E(t,-5);if(666===i.status&&0!==t.avail_in)return E(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==c&&666!==i.status){var a=2===i.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(A(t),0===t.lookahead)){if(e===c)return 1;break}if(t.match_length=0,n=l._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(O(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(O(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(O(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var n,i,r,o,s=t.window;;){if(t.lookahead<=_){if(A(t),t.lookahead<=_&&e===c)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=v&&0<t.strstart&&(i=s[r=t.strstart-1])===s[++r]&&i===s[++r]&&i===s[++r]){o=t.strstart+_;do{}while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<o);t.match_length=_-(o-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=v?(n=l._tr_tally(t,1,t.match_length-v),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=l._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(O(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(O(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(O(t,!1),0===t.strm.avail_out)?1:2}(i,e):u[i.level].func(i,e);if(3!==a&&4!==a||(i.status=666),1===a||3===a)return 0===t.avail_out&&(i.last_flush=-1),h;if(2===a&&(1===e?l._tr_align(i):5!==e&&(l._tr_stored_block(i,0,0,!1),3===e&&(T(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),k(t),0===t.avail_out))return i.last_flush=-1,h}return 4!==e?h:i.wrap<=0?1:(2===i.wrap?(M(i,255&t.adler),M(i,t.adler>>8&255),M(i,t.adler>>16&255),M(i,t.adler>>24&255),M(i,255&t.total_in),M(i,t.total_in>>8&255),M(i,t.total_in>>16&255),M(i,t.total_in>>24&255)):(R(i,t.adler>>>16),R(i,65535&t.adler)),k(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?h:1)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==x&&69!==e&&73!==e&&91!==e&&103!==e&&e!==w&&666!==e?E(t,b):(t.state=null,e===w?E(t,-3):h):b},e.deflateSetDictionary=function(t,e){var n,i,r,o,s,a,u,l,c=e.length;if(!t||!t.state)return b;if(2===(o=(n=t.state).wrap)||1===o&&n.status!==x||n.lookahead)return b;for(1===o&&(t.adler=p(t.adler,e,c,0)),n.wrap=0,c>=n.w_size&&(0===o&&(T(n.head),n.strstart=0,n.block_start=0,n.insert=0),l=new f.Buf8(n.w_size),f.arraySet(l,e,c-n.w_size,n.w_size,0),e=l,c=n.w_size),s=t.avail_in,a=t.next_in,u=t.input,t.avail_in=c,t.next_in=0,t.input=e,A(n);n.lookahead>=v;){for(i=n.strstart,r=n.lookahead-(v-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+v-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,--r;);n.strstart=i,n.lookahead=v-1,A(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=v-1,n.match_available=0,t.next_in=a,t.input=u,t.avail_in=s,n.wrap=o,h},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";var a=n(27);function i(t){for(var e=t.length;0<=--e;)t[e]=0}var y=15,r=16,u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],l=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],c=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],h=new Array(576);i(h);var f=new Array(60);i(f);var p=new Array(512);i(p);var d=new Array(256);i(d);var b=new Array(29);i(b);var m,g,v,_=new Array(30);function S(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function o(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function x(t){return t<256?p[t]:p[256+(t>>>7)]}function w(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function E(t,e,n){t.bi_valid>r-n?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>r-t.bi_valid,t.bi_valid+=n-r):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function P(t,e,n){E(t,n[2*e],n[2*e+1])}function T(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function k(t,e,n){var i,r,o=new Array(y+1),s=0;for(i=1;i<=y;i++)o[i]=s=s+n[i-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=T(o[a]++,a))}}function O(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function M(t){8<t.bi_valid?w(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function R(t,e,n,i){var r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]}function L(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&R(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!R(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function A(t,e,n){var i,r,o,s,a=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],r=t.pending_buf[t.l_buf+a],a++,0===i?P(t,r,e):(P(t,(o=d[r])+256+1,e),0!==(s=u[o])&&E(t,r-=b[o],s),P(t,o=x(--i),n),0!==(s=l[o])&&E(t,i-=_[o],s)),a<t.last_lit;);P(t,256,e)}function C(t,e){var n,i,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<u;n++)0!==o[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=l,n=t.heap_len>>1;1<=n;n--)L(t,o,n);for(r=u;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],L(t,o,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,o[2*r]=o[2*n]+o[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,o[2*n+1]=o[2*i+1]=r,t.heap[1]=r++,L(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,i,r,o,s,a,u=e.dyn_tree,l=e.max_code,c=e.stat_desc.static_tree,h=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,d=e.stat_desc.max_length,b=0;for(o=0;o<=y;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(o=u[2*u[2*(i=t.heap[n])+1]+1]+1)>d&&(o=d,b++),u[2*i+1]=o,l<i||(t.bl_count[o]++,s=0,p<=i&&(s=f[i-p]),a=u[2*i],t.opt_len+=a*(o+s),h&&(t.static_len+=a*(c[2*i+1]+s)));if(0!==b){do{for(o=d-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[d]--,b-=2}while(0<b);for(o=d;0!==o;o--)for(i=t.bl_count[o];0!==i;)(r=t.heap[--n])>l||(u[2*r+1]!==o&&(t.opt_len+=(o-u[2*r+1])*u[2*r],u[2*r+1]=o),i--)}}(t,e),k(o,l,t.bl_count)}function I(t,e,n){var i,r,o=-1,s=e[1],a=0,u=7,l=4;for(0===s&&(u=138,l=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=e[2*(i+1)+1],++a<u&&r===s||(a<l?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=r,l=(a=0)===s?(u=138,3):r===s?(u=6,3):(u=7,4))}function N(t,e,n){var i,r,o=-1,s=e[1],a=0,u=7,l=4;for(0===s&&(u=138,l=3),i=0;i<=n;i++)if(r=s,s=e[2*(i+1)+1],!(++a<u&&r===s)){if(a<l)for(;P(t,r,t.bl_tree),0!=--a;);else 0!==r?(r!==o&&(P(t,r,t.bl_tree),a--),P(t,16,t.bl_tree),E(t,a-3,2)):a<=10?(P(t,17,t.bl_tree),E(t,a-3,3)):(P(t,18,t.bl_tree),E(t,a-11,7));o=r,l=(a=0)===s?(u=138,3):r===s?(u=6,3):(u=7,4)}}i(_);var F=!1;function B(t,e,n,i){var r,o,s;E(t,0+(i?1:0),3),o=e,s=n,M(r=t),w(r,s),w(r,~s),a.arraySet(r.pending_buf,r.window,o,s,r.pending),r.pending+=s}e._tr_init=function(t){F||(function(){var t,e,n,i,r,o=new Array(y+1);for(i=n=0;i<28;i++)for(b[i]=n,t=0;t<1<<u[i];t++)d[n++]=i;for(d[n-1]=i,i=r=0;i<16;i++)for(_[i]=r,t=0;t<1<<l[i];t++)p[r++]=i;for(r>>=7;i<30;i++)for(_[i]=r<<7,t=0;t<1<<l[i]-7;t++)p[256+r++]=i;for(e=0;e<=y;e++)o[e]=0;for(t=0;t<=143;)h[2*t+1]=8,t++,o[8]++;for(;t<=255;)h[2*t+1]=9,t++,o[9]++;for(;t<=279;)h[2*t+1]=7,t++,o[7]++;for(;t<=287;)h[2*t+1]=8,t++,o[8]++;for(k(h,287,o),t=0;t<30;t++)f[2*t+1]=5,f[2*t]=T(t,5);m=new S(h,u,257,286,y),g=new S(f,l,0,30,y),v=new S(new Array(0),s,0,19,7)}(),F=!0),t.l_desc=new o(t.dyn_ltree,m),t.d_desc=new o(t.dyn_dtree,g),t.bl_desc=new o(t.bl_tree,v),t.bi_buf=0,t.bi_valid=0,O(t)},e._tr_stored_block=B,e._tr_flush_block=function(t,e,n,i){var r,o,s=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),C(t,t.l_desc),C(t,t.d_desc),s=function(t){var e;for(I(t,t.dyn_ltree,t.l_desc.max_code),I(t,t.dyn_dtree,t.d_desc.max_code),C(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*c[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==e?B(t,e,n,i):4===t.strategy||o===r?(E(t,2+(i?1:0),3),A(t,h,f)):(E(t,4+(i?1:0),3),function(t,e,n,i){var r;for(E(t,e-257,5),E(t,n-1,5),E(t,i-4,4),r=0;r<i;r++)E(t,t.bl_tree[2*c[r]+1],3);N(t,t.dyn_ltree,e-1),N(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),A(t,t.dyn_ltree,t.dyn_dtree)),O(t),i&&M(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(d[n]+256+1)]++,t.dyn_dtree[2*x(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){var e;E(t,2,3),P(t,256,h),16===(e=t).bi_valid?(w(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},function(t,e,n){"use strict";var h=n(236),f=n(27),p=n(166),d=n(168),i=n(81),r=n(167),o=n(239),b=Object.prototype.toString;function s(t){if(!(this instanceof s))return new s(t);this.options=f.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var n=h.inflateInit2(this.strm,e.windowBits);if(n!==d.Z_OK)throw new Error(i[n]);if(this.header=new o,h.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=p.string2buf(e.dictionary):"[object ArrayBuffer]"===b.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=h.inflateSetDictionary(this.strm,e.dictionary))!==d.Z_OK))throw new Error(i[n])}function a(t,e){var n=new s(e);if(n.push(t,!0),n.err)throw n.msg||i[n.err];return n.result}s.prototype.push=function(t,e){var n,i,r,o,s,a=this.strm,u=this.options.chunkSize,l=this.options.dictionary,c=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?d.Z_FINISH:d.Z_NO_FLUSH,"string"==typeof t?a.input=p.binstring2buf(t):"[object ArrayBuffer]"===b.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new f.Buf8(u),a.next_out=0,a.avail_out=u),(n=h.inflate(a,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&l&&(n=h.inflateSetDictionary(this.strm,l)),n===d.Z_BUF_ERROR&&!0===c&&(n=d.Z_OK,c=!1),n!==d.Z_STREAM_END&&n!==d.Z_OK)return this.onEnd(n),!(this.ended=!0);a.next_out&&(0!==a.avail_out&&n!==d.Z_STREAM_END&&(0!==a.avail_in||i!==d.Z_FINISH&&i!==d.Z_SYNC_FLUSH)||("string"===this.options.to?(r=p.utf8border(a.output,a.next_out),o=a.next_out-r,s=p.buf2string(a.output,r),a.next_out=o,a.avail_out=u-o,o&&f.arraySet(a.output,a.output,r,o,0),this.onData(s)):this.onData(f.shrinkBuf(a.output,a.next_out)))),0===a.avail_in&&0===a.avail_out&&(c=!0)}while((0<a.avail_in||0===a.avail_out)&&n!==d.Z_STREAM_END);return n===d.Z_STREAM_END&&(i=d.Z_FINISH),i===d.Z_FINISH?(n=h.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===d.Z_OK):i!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(a.avail_out=0))},s.prototype.onData=function(t){this.chunks.push(t)},s.prototype.onEnd=function(t){t===d.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=s,e.inflate=a,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,a(t,e)},e.ungzip=a},function(t,e,n){"use strict";var M=n(27),R=n(164),L=n(165),A=n(237),C=n(238),I=1,N=2,F=0,B=-2,D=1,i=852,r=592;function j(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new M.Buf16(320),this.work=new M.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function s(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=D,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new M.Buf32(i),e.distcode=e.distdyn=new M.Buf32(r),e.sane=1,e.back=-1,F):B}function a(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,s(t)):B}function u(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?B:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,a(t))):B}function l(t,e){var n,i;return t?(i=new o,(t.state=i).window=null,(n=u(t,e))!==F&&(t.state=null),n):B}var c,h,f=!0;function V(t){if(f){var e;for(c=new M.Buf32(512),h=new M.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(C(I,t.lens,0,288,c,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;C(N,t.lens,0,32,h,0,t.work,{bits:5}),f=!1}t.lencode=c,t.lenbits=9,t.distcode=h,t.distbits=5}function G(t,e,n,i){var r,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new M.Buf8(o.wsize)),i>=o.wsize?(M.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((r=o.wsize-o.wnext)>i&&(r=i),M.arraySet(o.window,e,n-i,r,o.wnext),(i-=r)?(M.arraySet(o.window,e,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}e.inflateReset=a,e.inflateReset2=u,e.inflateResetKeep=s,e.inflateInit=function(t){return l(t,15)},e.inflateInit2=l,e.inflate=function(t,e){var n,i,r,o,s,a,u,l,c,h,f,p,d,b,y,m,g,v,_,S,x,w,E,P,T=0,k=new M.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return B;12===(n=t.state).mode&&(n.mode=13),s=t.next_out,r=t.output,u=t.avail_out,o=t.next_in,i=t.input,a=t.avail_in,l=n.hold,c=n.bits,h=a,f=u,w=F;t:for(;;)switch(n.mode){case D:if(0===n.wrap){n.mode=13;break}for(;c<16;){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}if(2&n.wrap&&35615===l){k[n.check=0]=255&l,k[1]=l>>>8&255,n.check=L(n.check,k,2,0),c=l=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&l)){t.msg="unknown compression method",n.mode=30;break}if(c-=4,x=8+(15&(l>>>=4)),0===n.wbits)n.wbits=x;else if(x>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<x,t.adler=n.check=1,n.mode=512&l?10:12,c=l=0;break;case 2:for(;c<16;){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}if(n.flags=l,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&(k[0]=255&l,k[1]=l>>>8&255,n.check=L(n.check,k,2,0)),c=l=0,n.mode=3;case 3:for(;c<32;){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}n.head&&(n.head.time=l),512&n.flags&&(k[0]=255&l,k[1]=l>>>8&255,k[2]=l>>>16&255,k[3]=l>>>24&255,n.check=L(n.check,k,4,0)),c=l=0,n.mode=4;case 4:for(;c<16;){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&(k[0]=255&l,k[1]=l>>>8&255,n.check=L(n.check,k,2,0)),c=l=0,n.mode=5;case 5:if(1024&n.flags){for(;c<16;){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&(k[0]=255&l,k[1]=l>>>8&255,n.check=L(n.check,k,2,0)),c=l=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((p=n.length)>a&&(p=a),p&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),M.arraySet(n.head.extra,i,o,p,x)),512&n.flags&&(n.check=L(n.check,i,p,o)),a-=p,o+=p,n.length-=p),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===a)break t;for(p=0;x=i[o+p++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x)),x&&p<a;);if(512&n.flags&&(n.check=L(n.check,i,p,o)),a-=p,o+=p,x)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===a)break t;for(p=0;x=i[o+p++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x)),x&&p<a;);if(512&n.flags&&(n.check=L(n.check,i,p,o)),a-=p,o+=p,x)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;c<16;){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}if(l!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}c=l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;c<32;){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}t.adler=n.check=j(l),c=l=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=s,t.avail_out=u,t.next_in=o,t.avail_in=a,n.hold=l,n.bits=c,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){l>>>=7&c,c-=7&c,n.mode=27;break}for(;c<3;){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}switch(n.last=1&l,c-=1,3&(l>>>=1)){case 0:n.mode=14;break;case 1:if(V(n),n.mode=20,6!==e)break;l>>>=2,c-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}l>>>=2,c-=2;break;case 14:for(l>>>=7&c,c-=7&c;c<32;){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}if((65535&l)!=(l>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&l,c=l=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(p=n.length){if(a<p&&(p=a),u<p&&(p=u),0===p)break t;M.arraySet(r,i,o,p,s),a-=p,o+=p,u-=p,s+=p,n.length-=p;break}n.mode=12;break;case 17:for(;c<14;){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}if(n.nlen=257+(31&l),l>>>=5,c-=5,n.ndist=1+(31&l),l>>>=5,c-=5,n.ncode=4+(15&l),l>>>=4,c-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;c<3;){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}n.lens[O[n.have++]]=7&l,l>>>=3,c-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,E={bits:n.lenbits},w=C(0,n.lens,0,19,n.lencode,0,n.work,E),n.lenbits=E.bits,w){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;m=(T=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,g=65535&T,!((y=T>>>24)<=c);){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}if(g<16)l>>>=y,c-=y,n.lens[n.have++]=g;else{if(16===g){for(P=y+2;c<P;){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}if(l>>>=y,c-=y,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}x=n.lens[n.have-1],p=3+(3&l),l>>>=2,c-=2}else if(17===g){for(P=y+3;c<P;){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}c-=y,x=0,p=3+(7&(l>>>=y)),l>>>=3,c-=3}else{for(P=y+7;c<P;){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}c-=y,x=0,p=11+(127&(l>>>=y)),l>>>=7,c-=7}if(n.have+p>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;p--;)n.lens[n.have++]=x}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,E={bits:n.lenbits},w=C(I,n.lens,0,n.nlen,n.lencode,0,n.work,E),n.lenbits=E.bits,w){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,E={bits:n.distbits},w=C(N,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,E),n.distbits=E.bits,w){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=a&&258<=u){t.next_out=s,t.avail_out=u,t.next_in=o,t.avail_in=a,n.hold=l,n.bits=c,A(t,f),s=t.next_out,r=t.output,u=t.avail_out,o=t.next_in,i=t.input,a=t.avail_in,l=n.hold,c=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;m=(T=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,g=65535&T,!((y=T>>>24)<=c);){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}if(m&&0==(240&m)){for(v=y,_=m,S=g;m=(T=n.lencode[S+((l&(1<<v+_)-1)>>v)])>>>16&255,g=65535&T,!(v+(y=T>>>24)<=c);){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}l>>>=v,c-=v,n.back+=v}if(l>>>=y,c-=y,n.back+=y,n.length=g,0===m){n.mode=26;break}if(32&m){n.back=-1,n.mode=12;break}if(64&m){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&m,n.mode=22;case 22:if(n.extra){for(P=n.extra;c<P;){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;m=(T=n.distcode[l&(1<<n.distbits)-1])>>>16&255,g=65535&T,!((y=T>>>24)<=c);){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}if(0==(240&m)){for(v=y,_=m,S=g;m=(T=n.distcode[S+((l&(1<<v+_)-1)>>v)])>>>16&255,g=65535&T,!(v+(y=T>>>24)<=c);){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}l>>>=v,c-=v,n.back+=v}if(l>>>=y,c-=y,n.back+=y,64&m){t.msg="invalid distance code",n.mode=30;break}n.offset=g,n.extra=15&m,n.mode=24;case 24:if(n.extra){for(P=n.extra;c<P;){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===u)break t;if(p=f-u,n.offset>p){if((p=n.offset-p)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}d=p>n.wnext?(p-=n.wnext,n.wsize-p):n.wnext-p,p>n.length&&(p=n.length),b=n.window}else b=r,d=s-n.offset,p=n.length;for(u<p&&(p=u),u-=p,n.length-=p;r[s++]=b[d++],--p;);0===n.length&&(n.mode=21);break;case 26:if(0===u)break t;r[s++]=n.length,u--,n.mode=21;break;case 27:if(n.wrap){for(;c<32;){if(0===a)break t;a--,l|=i[o++]<<c,c+=8}if(f-=u,t.total_out+=f,n.total+=f,f&&(t.adler=n.check=n.flags?L(n.check,r,f,s-f):R(n.check,r,f,s-f)),f=u,(n.flags?l:j(l))!==n.check){t.msg="incorrect data check",n.mode=30;break}c=l=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;c<32;){if(0===a)break t;a--,l+=i[o++]<<c,c+=8}if(l!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}c=l=0}n.mode=29;case 29:w=1;break t;case 30:w=-3;break t;case 31:return-4;case 32:default:return B}return t.next_out=s,t.avail_out=u,t.next_in=o,t.avail_in=a,n.hold=l,n.bits=c,(n.wsize||f!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&G(t,t.output,t.next_out,f-t.avail_out)?(n.mode=31,-4):(h-=t.avail_in,f-=t.avail_out,t.total_in+=h,t.total_out+=f,n.total+=f,n.wrap&&f&&(t.adler=n.check=n.flags?L(n.check,r,f,t.next_out-f):R(n.check,r,f,t.next_out-f)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===h&&0===f||4===e)&&w===F&&(w=-5),w)},e.inflateEnd=function(t){if(!t||!t.state)return B;var e=t.state;return e.window&&(e.window=null),t.state=null,F},e.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?B:((n.head=e).done=!1,F):B},e.inflateSetDictionary=function(t,e){var n,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?B:11===n.mode&&R(1,e,i,0)!==n.check?-3:G(t,e,i,i)?(n.mode=31,-4):(n.havedict=1,F):B},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,n){"use strict";t.exports=function(t,e){var n,i,r,o,s,a,u,l,c,h,f,p,d,b,y,m,g,v,_,S,x,w,E,P,T;n=t.state,i=t.next_in,P=t.input,r=i+(t.avail_in-5),o=t.next_out,T=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),u=n.dmax,l=n.wsize,c=n.whave,h=n.wnext,f=n.window,p=n.hold,d=n.bits,b=n.lencode,y=n.distcode,m=(1<<n.lenbits)-1,g=(1<<n.distbits)-1;t:do{d<15&&(p+=P[i++]<<d,d+=8,p+=P[i++]<<d,d+=8),v=b[p&m];e:for(;;){if(p>>>=_=v>>>24,d-=_,0==(_=v>>>16&255))T[o++]=65535&v;else{if(!(16&_)){if(0==(64&_)){v=b[(65535&v)+(p&(1<<_)-1)];continue e}if(32&_){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}S=65535&v,(_&=15)&&(d<_&&(p+=P[i++]<<d,d+=8),S+=p&(1<<_)-1,p>>>=_,d-=_),d<15&&(p+=P[i++]<<d,d+=8,p+=P[i++]<<d,d+=8),v=y[p&g];n:for(;;){if(p>>>=_=v>>>24,d-=_,!(16&(_=v>>>16&255))){if(0==(64&_)){v=y[(65535&v)+(p&(1<<_)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(x=65535&v,d<(_&=15)&&(p+=P[i++]<<d,(d+=8)<_&&(p+=P[i++]<<d,d+=8)),(x+=p&(1<<_)-1)>u){t.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=_,d-=_,x>(_=o-s)){if((_=x-_)>c&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(E=f,(w=0)===h){if(w+=l-_,_<S){for(S-=_;T[o++]=f[w++],--_;);w=o-x,E=T}}else if(h<_){if(w+=l+h-_,(_-=h)<S){for(S-=_;T[o++]=f[w++],--_;);if(w=0,h<S){for(S-=_=h;T[o++]=f[w++],--_;);w=o-x,E=T}}}else if(w+=h-_,_<S){for(S-=_;T[o++]=f[w++],--_;);w=o-x,E=T}for(;2<S;)T[o++]=E[w++],T[o++]=E[w++],T[o++]=E[w++],S-=3;S&&(T[o++]=E[w++],1<S&&(T[o++]=E[w++]))}else{for(w=o-x;T[o++]=T[w++],T[o++]=T[w++],T[o++]=T[w++],2<(S-=3););S&&(T[o++]=T[w++],1<S&&(T[o++]=T[w++]))}break}}break}}while(i<r&&o<a);i-=S=d>>3,p&=(1<<(d-=S<<3))-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=o<a?a-o+257:257-(o-a),n.hold=p,n.bits=d}},function(t,e,n){"use strict";var I=n(27),N=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],F=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],B=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],D=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,i,r,o,s,a){var u,l,c,h,f,p,d,b,y,m=a.bits,g=0,v=0,_=0,S=0,x=0,w=0,E=0,P=0,T=0,k=0,O=null,M=0,R=new I.Buf16(16),L=new I.Buf16(16),A=null,C=0;for(g=0;g<=15;g++)R[g]=0;for(v=0;v<i;v++)R[e[n+v]]++;for(x=m,S=15;1<=S&&0===R[S];S--);if(S<x&&(x=S),0===S)return r[o++]=20971520,r[o++]=20971520,a.bits=1,0;for(_=1;_<S&&0===R[_];_++);for(x<_&&(x=_),g=P=1;g<=15;g++)if(P<<=1,(P-=R[g])<0)return-1;if(0<P&&(0===t||1!==S))return-1;for(L[1]=0,g=1;g<15;g++)L[g+1]=L[g]+R[g];for(v=0;v<i;v++)0!==e[n+v]&&(s[L[e[n+v]]++]=v);if(p=0===t?(O=A=s,19):1===t?(O=N,M-=257,A=F,C-=257,256):(O=B,A=D,-1),g=_,f=o,E=v=k=0,c=-1,h=(T=1<<(w=x))-1,1===t&&852<T||2===t&&592<T)return 1;for(;;){for(d=g-E,y=s[v]<p?(b=0,s[v]):s[v]>p?(b=A[C+s[v]],O[M+s[v]]):(b=96,0),u=1<<g-E,_=l=1<<w;r[f+(k>>E)+(l-=u)]=d<<24|b<<16|y|0,0!==l;);for(u=1<<g-1;k&u;)u>>=1;if(0!==u?(k&=u-1,k+=u):k=0,v++,0==--R[g]){if(g===S)break;g=e[n+s[v]]}if(x<g&&(k&h)!==c){for(0===E&&(E=x),f+=_,P=1<<(w=g-E);w+E<S&&!((P-=R[w+E])<=0);)w++,P<<=1;if(T+=1<<w,1===t&&852<T||2===t&&592<T)return 1;r[c=k&h]=x<<24|w<<16|f-o|0}}return 0!==k&&(r[f+k]=g-E<<24|64<<16|0),a.bits=x,0}},function(t,e,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e,n){"use strict";function M(t,e){var n,i="";for(n=0;n<e;n++)i+=String.fromCharCode(255&t),t>>>=8;return i}function i(t,e,n,i,r,o){var s,a,u=t.file,l=t.compression,c=o!==L.utf8encode,h=R.transformTo("string",o(u.name)),f=R.transformTo("string",L.utf8encode(u.name)),p=u.comment,d=R.transformTo("string",o(p)),b=R.transformTo("string",L.utf8encode(p)),y=f.length!==u.name.length,m=b.length!==p.length,g="",v="",_="",S=u.dir,x=u.date,w={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(w.crc32=t.crc32,w.compressedSize=t.compressedSize,w.uncompressedSize=t.uncompressedSize);var E=0;e&&(E|=8),c||!y&&!m||(E|=2048);var P,T=0,k=0;S&&(T|=16),"UNIX"===r?(k=798,T|=((P=u.unixPermissions)||(P=S?16893:33204),(65535&P)<<16)):(k=20,T|=63&(u.dosPermissions||0)),s=x.getUTCHours(),s<<=6,s|=x.getUTCMinutes(),s<<=5,s|=x.getUTCSeconds()/2,a=x.getUTCFullYear()-1980,a<<=4,a|=x.getUTCMonth()+1,a<<=5,a|=x.getUTCDate(),y&&(v=M(1,1)+M(A(h),4)+f,g+="up"+M(v.length,2)+v),m&&(_=M(1,1)+M(A(d),4)+b,g+="uc"+M(_.length,2)+_);var O="";return O+="\n\0",O+=M(E,2),O+=l.magic,O+=M(s,2),O+=M(a,2),O+=M(w.crc32,4),O+=M(w.compressedSize,4),O+=M(w.uncompressedSize,4),O+=M(h.length,2),O+=M(g.length,2),{fileRecord:C.LOCAL_FILE_HEADER+O+h+g,dirRecord:C.CENTRAL_FILE_HEADER+M(k,2)+O+M(d.length,2)+"\0\0\0\0"+M(T,4)+M(i,4)+h+g+d}}var R=n(3),r=n(12),L=n(38),A=n(80),C=n(169);function o(t,e,n,i){r.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=i,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}R.inherits(o,r),o.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,r.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-i-1))/n:100}}))},o.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=i(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},o.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=i(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:function(t){return C.DATA_DESCRIPTOR+M(t.crc32,4)+M(t.compressedSize,4)+M(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},o.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n,i,r,o,s,a,u=this.bytesWritten-t,l=(n=this.dirRecords.length,i=u,r=t,o=this.zipComment,s=this.encodeFileName,a=R.transformTo("string",s(o)),C.CENTRAL_DIRECTORY_END+"\0\0\0\0"+M(n,2)+M(n,2)+M(i,4)+M(r,4)+M(a.length,2)+a);this.push({data:l,meta:{percent:100}})},o.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},o.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",function(t){e.processChunk(t)}),t.on("end",function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()}),t.on("error",function(t){e.error(t)}),this},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},o.prototype.error=function(t){var e=this._sources;if(!r.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},o.prototype.lock=function(){r.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},t.exports=o},function(t,e,n){"use strict";var i=n(3),r=n(12);function o(t,e){r.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}i.inherits(o,r),o.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",function(t){e.push({data:t,meta:{percent:0}})}).on("error",function(t){e.isPaused?this.generatedError=t:e.error(t)}).on("end",function(){e.isPaused?e._upstreamEnded=!0:e.end()})},o.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},function(t,e,n){"use strict";var i=n(3),r=n(47),a=n(38),u=(i=n(3),n(243)),o=n(162),l=n(56);function c(i){return new r.Promise(function(t,e){var n=i.decompressed.getContentWorker().pipe(new o);n.on("error",function(t){e(t)}).on("end",function(){n.streamInfo.crc32!==i.decompressed.crc32?e(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}t.exports=function(t,o){var s=this;return o=i.extend(o||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),l.isNode&&l.isStream(t)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",t,!0,o.optimizedBinaryString,o.base64).then(function(t){var e=new u(o);return e.load(t),e}).then(function(t){var e=[r.Promise.resolve(t)],n=t.files;if(o.checkCRC32)for(var i=0;i<n.length;i++)e.push(c(n[i]));return r.Promise.all(e)}).then(function(t){for(var e=t.shift(),n=e.files,i=0;i<n.length;i++){var r=n[i];s.file(r.fileNameStr,r.decompressed,{binary:!0,optimizedBinaryString:!0,date:r.date,dir:r.dir,comment:r.fileCommentStr.length?r.fileCommentStr:null,unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions,createFolders:o.createFolders})}return e.zipComment.length&&(s.comment=e.zipComment),s})}},function(t,e,n){"use strict";var i=n(170),r=n(3),o=n(169),s=n(246),a=(n(38),n(26));function u(t){this.files=[],this.loadOptions=t}u.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(e)+", expected "+r.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var i=this.reader.readString(4)===e;return this.reader.setIndex(n),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=a.uint8array?"uint8array":"array",n=r.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,i=this.zip64EndOfCentralSize-44;0<i;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(t=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var i=e-n;if(0<i)this.isSignature(e,o.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(t){this.reader=i(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=u},function(t,e,n){"use strict";var i=n(172);function r(t){i.call(this,t)}n(3).inherits(r,i),r.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},r.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=r},function(t,e,n){"use strict";var i=n(173);function r(t){i.call(this,t)}n(3).inherits(r,i),r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=r},function(t,e,n){"use strict";var i=n(170),o=n(3),r=n(79),s=n(80),a=n(38),u=n(163),l=n(26);function c(t,e){this.options=t,this.loadOptions=e}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in u)if(u.hasOwnProperty(e)&&u[e].magic===t)return u[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,i,r=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index<r;)e=t.readInt(2),n=t.readInt(2),i=t.readData(n),this.extraFields[e]={id:e,length:n,value:i}},handleUTF8:function(){var t=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=o.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var r=o.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(r)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=i(t.value);return 1!==e.readInt(1)?null:s(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=i(t.value);return 1!==e.readInt(1)?null:s(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null}},t.exports=c},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(138)),i(e(132)),i(e(74)),i(e(43)),i(e(48)),i(e(71)),i(e(49)),i(e(129)),i(e(35)),i(e(100)),i(e(136)),i(e(133)),i(e(134)),i(e(65)),i(e(50)),i(e(18))},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(249)),i(e(75)),i(e(127)),i(e(128))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(r.prototype,"IsRepetition",{get:function(){return void 0!==this.parentRepetition},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"IsEnding",{get:function(){return this.isEnding},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"IsLastRepetitionRun",{get:function(){return this.IsRepetition&&this.repetitionRun+1===this.parentRepetition.UserNumberOfRepetitions},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"RepetitionRun",{get:function(){return this.repetitionRun},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ParentPartListEntry",{get:function(){return this.parentPartListEntry},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"SourceMusicPart",{get:function(){return this.sourceMusicPart},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"StartTimestamp",{get:function(){return this.startTimestamp},enumerable:!0,configurable:!0}),r.prototype.CompareTo=function(t){return void 0!==t?this.startTimestamp.CompareTo(t.startTimestamp):1},r);function r(t,e,n,i,r){void 0===i&&(i=-1),void 0===r&&(r=!1),this.repetitionRun=-1,this.sourceMusicPart=t,this.parentPartListEntry=n,this.startTimestamp=e.clone(),this.repetitionRun=i,this.parentRepetition=n,this.isEnding=r}e.MappingSourceMusicPart=i},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(130)),i(e(125)),i(e(145)),i(e(131)),i(e(251))},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(137)),i(e(139)),i(e(140)),i(e(135)),i(e(147)),i(e(146)),i(e(143))},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(51)),i(e(253)),i(e(97)),i(e(111)),i(e(5)),i(e(95)),i(e(22)),i(e(103)),i(e(32)),i(e(4)),i(e(118)),i(e(254)),i(e(52)),i(e(124)),i(e(73)),i(e(66)),i(e(24)),i(e(21)),i(e(120)),i(e(121)),i(e(255)),i(e(113)),i(e(58)),i(e(61)),i(e(117)),i(e(7)),i(e(122)),i(e(256)),i(e(123)),i(e(116)),i(e(257)),i(e(119)),i(e(115)),i(e(20)),i(e(102)),i(e(72)),i(e(99)),i(e(94)),i(e(96)),i(e(258)),i(e(259)),i(e(108)),i(e(106)),i(e(107)),i(e(101)),i(e(42)),i(e(34)),i(e(87))},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=(o=n(7).GraphicalObject,r(a,o),Object.defineProperty(a.prototype,"Parent",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!0,configurable:!0}),a);function a(t){var e=o.call(this)||this;return e.parent=t,e}e.AbstractGraphicalInstruction=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.GraphicalComment=function(t,e){this.label=t,this.settings=e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.GraphicalMarkedArea=function(t,e,n,i){void 0===e&&(e=void 0),void 0===n&&(n=void 0),void 0===i&&(i=void 0),this.systemRectangle=t,this.labelRectangle=e,this.label=n,this.settings=i}},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(5),a=(o=n(7).GraphicalObject,r(u,o),u);function u(t,e,n,i){var r=o.call(this)||this;return r.boundingBox=new s.BoundingBox(n),r.boundingBox.RelativePosition=t,r.boundingBox.BorderRight=e.x-t.x,r.boundingBox.BorderBottom=e.y-t.y,r.style=i,r}e.GraphicalRectangle=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(r.prototype,"GetStaffEntryLink",{get:function(){return this.staffEntryLink},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"GraphicalLinkedStaffEntries",{get:function(){return this.graphicalLinkedStaffEntries},set:function(t){this.graphicalLinkedStaffEntries=t},enumerable:!0,configurable:!0}),r.prototype.isFilled=function(){for(var t=0;t<this.graphicalLinkedStaffEntries.length;t++)if(void 0===this.graphicalLinkedStaffEntries[t])return!1;return!0},r.prototype.getLinkedStaffEntriesGraphicalNotes=function(t){if(-1!==this.graphicalLinkedStaffEntries.indexOf(t)){for(var e=[],n=0,i=this.graphicalLinkedStaffEntries.length;n<i;++n)for(var r=0,o=this.graphicalLinkedStaffEntries[n].graphicalVoiceEntries;r<o.length;r++)for(var s=0,a=o[r].notes;s<a.length;s++){var u=a[s];void 0!==u.sourceNote.ParentStaffEntry.Link&&u.sourceNote.ParentVoiceEntry===this.staffEntryLink.GetVoiceEntry&&e.push(u)}return e}},r.prototype.initialize=function(){for(var t=0,e=this.staffEntryLink.LinkStaffEntries.length;t<e;++t)this.graphicalLinkedStaffEntries.push(void 0)},r);function r(t){this.graphicalLinkedStaffEntries=[],this.staffEntryLink=t,this.initialize()}e.GraphicalStaffEntryLink=i},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var f,o=n(7),p=n(22),d=n(6),b=n(5),y=n(21),m=n(28),s=(f=o.GraphicalObject,r(a,f),a);function a(t,e){var n=f.call(this)||this,i=e,r=t.PositionAndShape.AbsolutePosition.y,o=m.CollectionUtil.last(t.StaffLines).PositionAndShape.RelativePosition.y+4;n.verticalLine=new y.GraphicalLine(new d.PointF2D(i,r),new d.PointF2D(i,r+o),.4,p.OutlineAndFillStyleEnum.SelectionSymbol);for(var s=0,a=t.StaffLines.length;s<a;++s){var u=t.StaffLines[s],l=new d.PointF2D(i,r+u.PositionAndShape.RelativePosition.y),c=new Array(3);l.y-=.2,c[0].x=l.x-3,c[0].y=l.y+1.2,c[1].x=l.x-2,c[1].y=l.y+.4,c[2].x=l.x-2,c[2].y=l.y+2,n.arrows.push(c);var h=new Array(8);l.x-=.1,l.y+=.3,h[0].x=l.x-2,h[0].y=l.y+1.5-.2,h[1].x=l.x-1,h[1].y=l.y+1.5-.2,h[2].x=l.x-1,h[2].y=l.y+2.5,h[3].x=l.x-2,h[3].y=l.y+2.5,h[4].x=h[0].x,h[4].y=h[0].y-.8,h[5].x=h[4].x+.8+1,h[5].y=h[4].y,h[6].x=h[5].x,h[6].y=h[3].y+.8,h[7].x=h[3].x,h[7].y=h[6].y,n.arrowlines.push(h)}return n.boundingBox=new b.BoundingBox(n),n.boundingBox.AbsolutePosition=new d.PointF2D(i,r),n.boundingBox.BorderLeft=-.4,n.boundingBox.BorderRight=4,n.boundingBox.BorderBottom=o,n}e.SelectionEndSymbol=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var h,f=n(6),p=n(22),d=n(21),o=n(7),b=n(5),y=n(28),s=(h=o.GraphicalObject,r(a,h),a);function a(t,e){var n=h.call(this)||this,i=e,r=t.PositionAndShape.AbsolutePosition.y,o=y.CollectionUtil.last(t.StaffLines).PositionAndShape.RelativePosition.y+4;n.verticalLine=new d.GraphicalLine(new f.PointF2D(i,r),new f.PointF2D(i,r+o),.4,p.OutlineAndFillStyleEnum.SelectionSymbol);for(var s=0,a=t.StaffLines.length;s<a;++s){var u=t.StaffLines[s],l=new f.PointF2D(i,r+u.PositionAndShape.RelativePosition.y),c=new Array(7);c[0].x=l.x+4,c[0].y=l.y+2,c[1].x=l.x+2.5,c[1].y=l.y+.5,c[2].x=l.x+2.5,c[2].y=l.y+1.3,c[3].x=l.x+1,c[3].y=l.y+1.3,c[4].x=l.x+1,c[4].y=l.y+2.7,c[5].x=l.x+2.5,c[5].y=l.y+2.7,c[6].x=l.x+2.5,c[6].y=l.y+3.5,n.arrows.push(c)}return n.boundingBox=new b.BoundingBox(n),n.boundingBox.AbsolutePosition=new f.PointF2D(i,r),n.boundingBox.BorderLeft=-.4,n.boundingBox.BorderRight=4,n.boundingBox.BorderBottom=o,n}e.SelectionStartSymbol=s},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(28)),i(e(261))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(r.log=function(t,e){return Math.log(e)/Math.log(t)},r.log10=function(t){return r.log(10,t)},r.meanSimple=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e/t.length},r.meanWeighted=function(t,e){if(t.length!==e.length||0===t.length)return 0;for(var n=0,i=0,r=0;r<t.length;r++){var o=e[r];n+=t[r]*o,i+=o}return n/i},r);function r(){}e.PSMath=i},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(0)),i(e(2)),i(e(263)),i(e(264))},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(44)),i(e(64)),i(e(9))},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(148)),i(e(60))}],r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=175);function r(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var n,i},"object"==typeof n&&"object"==typeof e?e.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof n?n.opensheetmusicdisplay=r():i.opensheetmusicdisplay=r()},{}],3:[function(t,e,n){var i,r;i=window,r=function(){return(i={},r.m=n=[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){var i="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(t))return i.get(t);i.set(t,n)}function n(){return r(t,arguments,l(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,t)})(t)}function r(t,e,n){return(r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&u(r,n.prototype),r}).apply(null,arguments)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e);var C=function(){};C.L=function(t,e){if(e){var n=Array.prototype.slice.call(e).join(" ");window.console.log(t+": "+n)}},C.MakeException=function(i){return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(r,a(Error)),r;function r(t,e){var n;return s(this,r),(n=function(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,l(r).call(this,t))).name=i,n.message=t,n.data=e,n}};var c=(i(h.prototype,[{key:"toString",value:function(){return"[RuntimeError] "+this.code+":"+this.message}}]),h);function h(t,e){s(this,h),this.code=t,this.message=e}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function p(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}C.RuntimeError=c,C.RERR=C.RuntimeError,C.Merge=function(t,e){for(var n in e)t[n]=e[n];return t},C.Min=Math.min,C.Max=Math.max,C.forEach=function(t,e){for(var n=0;n<t.length;n++)e(t[n],n)},C.RoundN=function(t,e){return e/2<=t%e?parseInt(t/e,10)*e+e:parseInt(t/e,10)*e},C.MidLine=function(t,e){var n=e+(t-e)/2;return 0<n%2&&(n=C.RoundN(10*n,5)/10),n},C.SortAndUnique=function(t,e,n){if(1<t.length){var i,r=[];t.sort(e);for(var o=0;o<t.length;++o)0!==o&&n(t[o],i)||r.push(t[o]),i=t[o];return r}return t},C.Contains=function(t,e){for(var n=t.length;n--;)if(t[n]===e)return!0;return!1},C.getCanvasContext=function(t){if(!t)throw new C.RERR("BadArgument","Invalid canvas selector: "+t);var e=document.getElementById(t);if(!e||!e.getContext)throw new C.RERR("UnsupportedBrowserError","This browser does not support HTML5 Canvas");return e.getContext("2d")},C.drawDot=function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"#55";t.save(),t.setFillStyle(i),t.beginPath(),t.arc(e,n,3,0,2*Math.PI,!0),t.closePath(),t.fill(),t.restore()},C.BM=function(t,e){var n=(new Date).getTime();e();var i=(new Date).getTime()-n;C.L(t+i+"ms")},C.StackTrace=function(){return(new Error).stack},C.W=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.join(" ");window.console.log("Warning: ",i,C.StackTrace())},C.Prefix=function(t){return C.Prefix.prefix+t},C.Prefix.prefix="vf-";var d=(p(b,null,[{key:"GCD",value:function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new C.RERR("BadArgument","Invalid numbers: ".concat(t,", ").concat(e));for(var n;0!==e;)e=t%(n=e),t=n;return t}},{key:"LCM",value:function(t,e){return t*e/b.GCD(t,e)}},{key:"LCMM",value:function(t){if(0===t.length)return 0;if(1===t.length)return t[0];if(2===t.length)return b.LCM(t[0],t[1]);var e=t[0];return t.shift(),b.LCM(e,b.LCMM(t))}}]),p(b,[{key:"set",value:function(t,e){return this.numerator=void 0===t?1:t,this.denominator=void 0===e?1:e,this}},{key:"value",value:function(){return this.numerator/this.denominator}},{key:"simplify",value:function(){var t=this.numerator,e=this.denominator,n=b.GCD(t,e);return t/=n,(e/=n)<0&&(e=-e,t=-t),this.set(t,e)}},{key:"add",value:function(t,e){var n,i;i=t instanceof b?(n=t.numerator,t.denominator):(n=void 0!==t?t:0,void 0!==e?e:1);var r=b.LCM(this.denominator,i),o=r/this.denominator,s=r/i,a=this.numerator*o+n*s;return this.set(a,r)}},{key:"subtract",value:function(t,e){var n,i;i=t instanceof b?(n=t.numerator,t.denominator):(n=void 0!==t?t:0,void 0!==e?e:1);var r=b.LCM(this.denominator,i),o=r/this.denominator,s=r/i,a=this.numerator*o-n*s;return this.set(a,r)}},{key:"multiply",value:function(t,e){var n,i;return i=t instanceof b?(n=t.numerator,t.denominator):(n=void 0!==t?t:1,void 0!==e?e:1),this.set(this.numerator*n,this.denominator*i)}},{key:"divide",value:function(t,e){var n,i;return i=t instanceof b?(n=t.numerator,t.denominator):(n=void 0!==t?t:1,void 0!==e?e:1),this.set(this.numerator*i,this.denominator*n)}},{key:"equals",value:function(t){var e=b.__compareA.copy(t).simplify(),n=b.__compareB.copy(this).simplify();return e.numerator===n.numerator&&e.denominator===n.denominator}},{key:"greaterThan",value:function(t){var e=b.__compareB.copy(this);return e.subtract(t),0<e.numerator}},{key:"greaterThanEquals",value:function(t){var e=b.__compareB.copy(this);return e.subtract(t),0<=e.numerator}},{key:"lessThan",value:function(t){return!this.greaterThanEquals(t)}},{key:"lessThanEquals",value:function(t){return!this.greaterThan(t)}},{key:"clone",value:function(){return new b(this.numerator,this.denominator)}},{key:"copy",value:function(t){return"number"==typeof t?this.set(t||0,1):this.set(t.numerator,t.denominator)}},{key:"quotient",value:function(){return Math.floor(this.numerator/this.denominator)}},{key:"fraction",value:function(){return this.numerator%this.denominator}},{key:"abs",value:function(){return this.denominator=Math.abs(this.denominator),this.numerator=Math.abs(this.numerator),this}},{key:"toString",value:function(){return this.numerator+"/"+this.denominator}},{key:"toSimplifiedString",value:function(){return b.__tmp.copy(this).simplify().toString()}},{key:"toMixedString",value:function(){var t="",e=this.quotient(),n=b.__tmp.copy(this);return e<0?n.abs().fraction():n.fraction(),0!==e?(t+=e,0!==n.numerator&&(t+=" "+n.toSimplifiedString())):t=0===n.numerator?"0":n.toSimplifiedString(),t}},{key:"parse",value:function(t){var e=t.split("/"),n=parseInt(e[0],10),i=e[1]?parseInt(e[1],10):1;return this.set(n,i)}}]),b);function b(t,e){!function(t){if(!(t instanceof b))throw new TypeError("Cannot call a class as a function")}(this),this.set(t,e)}function y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function m(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),t}d.__compareA=new d,d.__compareB=new d,d.__tmp=new d;var g=C.MakeException("RegistryError");function v(t,e,n,i,r){t[e][n]||(t[e][n]={}),t[e][n][i]=r}var _=(m(S,null,[{key:"INDEXES",get:function(){return["type"]}}]),m(S,[{key:"clear",value:function(){return this.index={id:{},type:{},class:{}},this}},{key:"updateIndex",value:function(t){var e=t.id,n=t.name,i=t.value,r=t.oldValue,o=this.getElementById(e);null!==r&&this.index[n][r]&&delete this.index[n][r][e],null!==i&&v(this.index,n,i,o.getAttribute("id"),o)}},{key:"register",value:function(e,n){var i=this;if(!(n=n||e.getAttribute("id")))throw new g("Can't add element without `id` attribute to registry",e);return e.setAttribute("id",n),v(this.index,"id",n,n,e),S.INDEXES.forEach(function(t){i.updateIndex({id:n,name:t,value:e.getAttribute(t),oldValue:null})}),e.onRegister(this),this}},{key:"getElementById",value:function(t){return this.index.id[t]?this.index.id[t][t]:null}},{key:"getElementsByAttribute",value:function(t,e){var n=this.index[t];return n&&n[e]?Object.keys(n[e]).map(function(t){return n[e][t]}):[]}},{key:"getElementsByType",value:function(t){return this.getElementsByAttribute("type",t)}},{key:"getElementsByClass",value:function(t){return this.getElementsByAttribute("class",t)}},{key:"onUpdate",value:function(t){var e,n,i=t.id,r=t.name,o=t.value,s=t.oldValue;return e=S.INDEXES.concat(["id","class"]),n=r,0<e.filter(function(t){return t===n}).length&&this.updateIndex({id:i,name:r,value:o,oldValue:s}),this}}],[{key:"enableDefaultRegistry",value:function(t){S.defaultRegistry=t}},{key:"getDefaultRegistry",value:function(){return S.defaultRegistry}},{key:"disableDefaultRegistry",value:function(){S.defaultRegistry=null}}]),S);function S(){!function(t){if(!(t instanceof S))throw new TypeError("Cannot call a class as a function")}(this),this.clear()}function x(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function w(t,e,n){return e&&x(t.prototype,e),n&&x(t,n),t}var E=(w(P,_.defaultRegistry=null,[{key:"newID",value:function(){return"auto"+P.ID++}}]),w(P,[{key:"setStyle",value:function(t){return this.style=t,this}},{key:"getStyle",value:function(){return this.style}},{key:"applyStyle",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.context,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getStyle();return e&&(t.save(),e.shadowColor&&t.setShadowColor(e.shadowColor),e.shadowBlur&&t.setShadowBlur(e.shadowBlur),e.fillStyle&&t.setFillStyle(e.fillStyle),e.strokeStyle&&t.setStrokeStyle(e.strokeStyle),e.lineWidth&&t.setLineWidth(e.lineWidth)),this}},{key:"restoreStyle",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.context;return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getStyle())&&t.restore(),this}},{key:"hasClass",value:function(t){return!0===this.attrs.classes[t]}},{key:"addClass",value:function(t){return this.attrs.classes[t]=!0,this.registry&&this.registry.onUpdate({id:this.getAttribute("id"),name:"class",value:t,oldValue:null}),this}},{key:"removeClass",value:function(t){return delete this.attrs.classes[t],this.registry&&this.registry.onUpdate({id:this.getAttribute("id"),name:"class",value:null,oldValue:t}),this}},{key:"onRegister",value:function(t){return this.registry=t,this}},{key:"isRendered",value:function(){return this.rendered}},{key:"setRendered",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return this.rendered=t,this}},{key:"getAttributes",value:function(){return this.attrs}},{key:"getAttribute",value:function(t){return this.attrs[t]}},{key:"setAttribute",value:function(t,e){var n=this.attrs.id,i=this.attrs[t];return this.attrs[t]=e,this.registry&&this.registry.onUpdate({id:n,name:t,value:e,oldValue:i}),this}},{key:"getContext",value:function(){return this.context}},{key:"setContext",value:function(t){return this.context=t,this}},{key:"getBoundingBox",value:function(){return this.boundingBox}},{key:"checkContext",value:function(){if(!this.context)throw new C.RERR("NoContext","No rendering context attached to instance");return this.context}}]),P);function P(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).type;!function(t){if(!(t instanceof P))throw new TypeError("Cannot call a class as a function")}(this),this.attrs={id:P.newID(),el:null,type:t||"Base",classes:{}},this.boundingBox=null,this.context=null,this.rendered=!1,_.getDefaultRegistry()&&_.getDefaultRegistry().register(this)}function T(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}E.ID=1e3;var k=(T(O.prototype,[{key:"width",value:function(){return this.x2-this.x1}},{key:"height",value:function(){return this.y2-this.y1}},{key:"addPoint",value:function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}},{key:"addX",value:function(t){this.addPoint(t,null)}},{key:"addY",value:function(t){this.addPoint(null,t)}},{key:"addQuadraticCurve",value:function(t,e,n,i,r,o){var s=t+2/3*(n-t),a=e+2/3*(i-e),u=s+1/3*(r-t),l=a+1/3*(o-e);this.addBezierCurve(t,e,s,a,u,l,r,o)}},{key:"addBezierCurve",value:function(t,e,n,i,r,o,s,a){var u,l=[t,e],c=[n,i],h=[r,o],f=[s,a];function p(t,e){return Math.pow(1-t,3)*l[e]+3*Math.pow(1-t,2)*t*c[e]+3*(1-t)*Math.pow(t,2)*h[e]+Math.pow(t,3)*f[e]}for(this.addPoint(l[0],l[1]),this.addPoint(f[0],f[1]),u=0;u<=1;u++){var d=6*l[u]-12*c[u]+6*h[u],b=-3*l[u]+9*c[u]-9*h[u]+3*f[u],y=3*c[u]-3*l[u];if(0!=b){var m=Math.pow(d,2)-4*y*b;if(!(m<0)){var g=(-d+Math.sqrt(m))/(2*b);0<g&&g<1&&(0===u&&this.addX(p(g,u)),1===u&&this.addY(p(g,u)));var v=(-d-Math.sqrt(m))/(2*b);0<v&&v<1&&(0===u&&this.addX(p(v,u)),1===u&&this.addY(p(v,u)))}}else{if(0==d)continue;var _=-y/d;0<_&&_<1&&(0===u&&this.addX(p(_,u)),1===u&&this.addY(p(_,u)))}}}}]),O);function O(t,e,n,i){!function(t){if(!(t instanceof O))throw new TypeError("Cannot call a class as a function")}(this),this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.addPoint(t,e),this.addPoint(n,i)}function M(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function R(t,e,n){return e&&M(t.prototype,e),n&&M(t,n),t}var L=(R(I,null,[{key:"copy",value:function(t){return new I(t.x,t.y,t.w,t.h)}}]),R(I,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getW",value:function(){return this.w}},{key:"getH",value:function(){return this.h}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setW",value:function(t){return this.w=t,this}},{key:"setH",value:function(t){return this.h=t,this}},{key:"move",value:function(t,e){this.x+=t,this.y+=e}},{key:"clone",value:function(){return I.copy(this)}},{key:"mergeWith",value:function(t,e){var n=t,i=this.x<n.x?this.x:n.x,r=this.y<n.y?this.y:n.y,o=Math.max(this.x+this.w,n.x+n.w)-i,s=Math.max(this.y+this.h,n.y+n.h)-r;return this.x=i,this.y=r,this.w=o,this.h=s,e&&this.draw(e),this}},{key:"draw",value:function(t,e,n){e=e||0,n=n||0,t.rect(this.x+e,this.y+n,this.w,this.h),t.stroke()}}]),I),A={glyphs:{v0:{x_min:0,x_max:514.5,ha:525,o:"m 236 648 b 246 648 238 648 242 648 b 288 646 261 648 283 648 b 472 513 364 634 428 587 b 514 347 502 464 514 413 b 462 163 514 272 499 217 b 257 44 409 83 333 44 b 50 163 181 44 103 83 b 0 347 14 217 0 272 b 40 513 0 413 12 464 b 236 648 87 591 155 638 m 277 614 b 253 616 273 616 261 616 b 242 616 247 616 243 616 b 170 499 193 609 181 589 b 159 348 163 446 159 398 b 166 222 159 308 161 266 b 201 91 174 138 183 106 b 257 76 215 81 235 76 b 311 91 277 76 299 81 b 347 222 330 106 338 138 b 353 348 352 266 353 308 b 344 499 353 398 351 446 b 277 614 333 587 322 606 m 257 -1 l 258 -1 l 255 -1 l 257 -1 m 257 673 l 258 673 l 255 673 l 257 673 "},v1:{x_min:-1.359375,x_max:344.359375,ha:351,o:"m 126 637 l 129 638 l 198 638 l 266 638 l 269 635 b 274 631 272 634 273 632 l 277 627 l 277 395 b 279 156 277 230 277 161 b 329 88 281 123 295 106 b 344 69 341 81 344 79 b 337 55 344 62 343 59 l 333 54 l 197 54 l 61 54 l 58 55 b 50 69 53 59 50 62 b 65 88 50 79 53 81 b 80 97 72 91 74 93 b 117 156 103 113 112 129 b 117 345 117 161 117 222 l 117 528 l 100 503 l 38 406 b 14 383 24 384 23 383 b -1 398 5 383 -1 390 b 4 415 -1 403 1 409 b 16 437 5 416 10 426 l 72 539 l 100 596 b 121 632 119 631 119 631 b 126 637 122 634 125 635 m 171 -1 l 172 -1 l 170 -1 l 171 -1 m 171 673 l 172 673 l 170 673 l 171 673 "},v2:{x_min:-1.359375,x_max:458.6875,ha:468,o:"m 197 648 b 216 648 201 648 208 648 b 258 646 232 648 253 648 b 419 546 333 637 393 599 b 432 489 428 528 432 509 b 356 342 432 440 405 384 b 235 278 322 313 288 295 b 69 170 166 256 107 217 b 69 169 69 170 69 169 b 69 169 69 169 69 169 b 74 173 69 169 72 170 b 209 222 112 204 163 222 b 310 195 247 222 274 215 b 371 179 332 184 352 179 b 396 181 379 179 387 179 b 428 202 409 184 423 194 b 442 212 431 209 436 212 b 458 197 450 212 458 206 b 441 148 458 190 449 165 b 299 44 409 84 353 44 b 288 45 295 44 292 44 b 250 61 274 45 268 49 b 122 99 212 86 164 99 b 73 91 104 99 88 97 b 28 63 53 84 34 72 b 14 54 25 56 20 54 b 1 62 9 54 4 56 l -1 65 l -1 79 b 0 99 -1 91 0 95 b 2 113 1 102 2 108 b 164 309 20 197 81 272 b 285 470 232 341 277 398 b 287 487 287 476 287 481 b 171 595 287 551 239 595 b 155 595 166 595 160 595 b 142 592 145 594 142 594 b 145 589 142 592 142 591 b 179 527 168 576 179 551 b 132 455 179 496 163 467 b 104 451 122 452 112 451 b 27 530 62 451 27 487 b 29 555 27 538 27 546 b 197 648 44 601 115 639 m 228 -1 l 230 -1 l 227 -1 l 228 -1 m 228 673 l 230 673 l 227 673 l 228 673 "},v3:{x_min:-1.359375,x_max:409.6875,ha:418,o:"m 174 648 b 191 648 176 648 183 648 b 225 648 204 648 220 648 b 402 523 317 638 389 588 b 404 503 404 517 404 510 b 402 484 404 495 404 488 b 264 373 389 437 334 394 b 257 370 259 371 257 371 b 257 370 257 370 257 370 b 264 369 258 370 261 369 b 409 202 359 334 409 267 b 318 72 409 152 381 104 b 200 43 281 52 240 43 b 23 113 134 43 69 68 b 0 169 6 129 0 149 b 77 249 0 210 29 249 l 77 249 b 152 174 125 249 152 212 b 103 102 152 145 137 116 b 103 102 103 102 103 102 b 147 94 103 101 132 95 b 153 94 149 94 151 94 b 265 206 219 94 265 141 b 264 226 265 213 265 219 b 147 355 253 299 204 353 b 126 371 133 356 126 362 b 147 388 126 383 132 388 b 254 474 196 391 238 424 b 259 502 258 484 259 494 b 182 592 259 544 228 582 b 156 595 175 595 166 595 b 115 592 142 595 129 594 l 111 591 l 115 588 b 152 524 141 574 152 549 b 92 449 152 491 130 458 b 76 448 87 448 81 448 b -1 530 32 448 -1 488 b 20 581 -1 548 5 566 b 174 648 55 619 108 641 m 204 -1 l 205 -1 l 202 -1 l 204 -1 m 204 673 l 205 673 l 202 673 l 204 673 "},v4:{x_min:0,x_max:468.21875,ha:478,o:"m 174 637 b 232 638 175 638 189 638 b 277 638 245 638 259 638 l 378 638 l 381 635 b 389 623 386 632 389 627 b 382 609 389 617 386 613 b 366 589 381 606 372 598 l 313 528 l 245 451 l 209 410 l 155 348 l 84 267 b 59 240 72 252 59 240 b 59 240 59 240 59 240 b 151 238 59 238 68 238 l 242 238 l 242 303 b 243 371 242 369 242 370 b 289 426 245 374 254 385 l 303 441 l 317 456 l 338 483 l 360 506 l 371 520 b 386 527 375 526 381 527 b 400 519 392 527 397 524 b 401 440 401 516 401 514 b 401 377 401 423 401 402 l 401 238 l 426 238 b 453 237 449 238 450 238 b 465 217 461 234 465 226 b 460 202 465 212 464 206 b 426 197 454 197 453 197 l 401 197 l 401 180 b 451 88 402 129 412 109 b 468 69 465 81 468 79 b 461 55 468 62 466 59 l 458 54 l 321 54 l 185 54 l 182 55 b 175 69 176 59 175 62 b 191 88 175 79 176 81 b 240 180 230 109 240 129 l 240 197 l 125 197 b 73 195 104 195 87 195 b 8 197 10 195 9 197 b 0 212 2 199 0 205 b 0 212 0 212 0 212 b 20 242 0 219 0 219 b 163 610 104 344 163 492 b 174 637 163 628 166 634 m 234 -1 l 235 -1 l 232 -1 l 234 -1 m 234 673 l 235 673 l 232 673 l 234 673 "},v5:{x_min:0,x_max:409.6875,ha:418,o:"m 47 637 b 53 638 49 638 50 638 b 69 634 55 638 61 637 b 210 610 114 619 161 610 b 363 634 259 610 311 619 b 382 638 372 637 378 638 b 392 634 386 638 389 637 b 397 623 396 630 397 627 b 393 610 397 620 396 616 b 298 505 368 552 338 520 b 212 494 277 498 246 494 b 65 517 163 494 106 502 b 61 517 62 517 61 517 b 61 517 61 517 61 517 b 51 408 61 517 51 412 b 51 408 51 408 51 408 b 51 408 51 408 51 408 b 61 412 53 408 55 409 b 125 434 80 421 103 430 b 185 441 145 440 166 441 b 409 244 310 441 409 353 b 401 191 409 227 406 209 b 197 43 375 105 287 43 b 159 47 183 43 171 44 b 23 123 112 56 61 86 b 0 180 6 140 0 159 b 76 260 0 220 31 260 b 92 259 81 260 87 259 b 152 183 132 251 152 216 b 100 112 152 152 134 122 b 95 111 98 112 95 111 b 95 111 95 111 95 111 b 129 98 95 109 119 101 b 148 97 136 97 141 97 b 264 235 206 97 261 158 b 265 248 265 240 265 244 b 210 398 265 312 243 373 b 179 408 201 406 194 408 b 174 408 178 408 176 408 b 53 369 130 408 88 394 b 34 359 39 359 38 359 b 17 374 24 359 17 365 b 39 628 17 384 38 625 b 47 637 40 631 43 635 m 204 -1 l 205 -1 l 202 -1 l 204 -1 m 204 673 l 205 673 l 202 673 l 204 673 "},v6:{x_min:0,x_max:475.03125,ha:485,o:"m 255 648 b 274 648 259 648 266 648 b 314 646 288 648 307 648 b 450 555 374 637 438 594 b 454 530 453 546 454 538 b 375 451 454 485 416 451 b 328 467 359 451 343 455 b 300 526 310 483 300 503 b 352 598 300 557 319 589 b 356 599 355 598 356 599 b 352 602 356 599 355 601 b 288 616 330 612 308 616 b 210 584 257 616 230 605 b 164 433 189 559 174 508 b 160 374 163 415 160 381 b 160 374 160 374 160 374 b 160 374 160 374 160 374 b 168 377 160 374 164 376 b 258 395 200 390 228 395 b 366 367 294 395 328 387 b 475 223 436 333 475 283 b 472 197 475 215 473 206 b 349 65 462 141 419 95 b 259 43 317 51 288 43 b 167 69 230 43 200 52 b 4 290 80 113 20 195 b 0 349 1 309 0 328 b 20 467 0 391 6 433 b 255 648 58 563 155 637 m 269 363 b 257 363 265 363 261 363 b 210 345 236 363 220 356 b 186 226 196 324 186 272 b 187 198 186 216 186 206 b 213 95 191 151 202 112 b 257 76 221 83 238 76 b 270 77 261 76 266 76 b 321 156 299 81 310 99 b 329 229 326 183 329 206 b 321 301 329 252 326 274 b 269 363 311 342 298 359 m 236 -1 l 238 -1 l 235 -1 l 236 -1 m 236 673 l 238 673 l 235 673 l 236 673 "},v7:{x_min:0,x_max:442.359375,ha:451,o:"m 147 648 b 166 649 153 649 160 649 b 313 598 217 649 273 630 b 340 587 323 588 328 587 l 341 587 b 412 628 367 587 390 601 b 427 638 416 635 421 638 b 439 632 431 638 435 637 b 442 623 441 630 442 628 b 430 569 442 616 439 603 b 352 369 408 492 377 410 b 300 259 325 324 313 298 b 273 84 283 205 273 140 b 265 55 273 65 272 59 l 261 54 l 181 54 l 99 54 l 96 55 b 91 61 95 56 92 59 l 89 63 l 89 77 b 147 263 89 133 111 202 b 261 401 176 313 212 355 b 378 541 315 449 349 489 l 382 548 l 375 544 b 240 495 333 512 285 495 b 129 535 198 495 160 509 b 84 560 108 552 95 560 b 76 559 81 560 78 560 b 31 487 59 555 43 530 b 14 470 27 473 24 470 b 1 477 8 470 4 471 l 0 480 l 0 553 l 0 627 l 1 630 b 16 638 4 635 9 638 b 23 635 17 638 20 637 b 49 626 36 626 39 626 b 96 638 59 626 80 630 b 104 639 99 638 102 639 b 117 644 107 641 112 642 b 147 648 125 645 137 648 m 220 -1 l 221 -1 l 219 -1 l 220 -1 m 220 673 l 221 673 l 219 673 l 220 673 "},v8:{x_min:0,x_max:488.640625,ha:499,o:"m 217 648 b 245 649 225 648 235 649 b 453 516 343 649 430 595 b 458 478 455 503 458 491 b 412 370 458 440 441 398 b 411 369 412 369 411 369 b 415 365 411 367 412 367 b 488 231 462 331 488 281 b 472 165 488 208 483 186 b 243 43 434 86 338 43 b 63 104 178 43 112 62 b 0 233 20 140 0 186 b 73 365 0 283 24 331 l 77 369 l 72 374 b 29 476 42 406 29 441 b 217 648 29 557 103 635 m 258 605 b 242 606 253 605 247 606 b 157 552 198 606 157 580 b 160 541 157 548 159 544 b 319 413 176 503 242 452 l 337 403 l 338 406 b 359 476 352 428 359 452 b 258 605 359 537 318 595 m 138 326 b 130 330 134 328 130 330 b 130 330 130 330 130 330 b 107 305 127 330 112 313 b 84 231 91 281 84 256 b 243 86 84 156 151 86 b 249 87 245 86 246 87 b 347 156 303 88 347 120 b 344 172 347 162 345 167 b 156 319 325 227 257 281 b 138 326 151 322 144 324 m 243 -1 l 245 -1 l 242 -1 l 243 -1 m 243 673 l 245 673 l 242 673 l 243 673 "},v9:{x_min:0,x_max:475.03125,ha:485,o:"m 191 646 b 212 649 198 648 205 649 b 255 644 227 649 243 646 b 458 448 348 616 428 539 b 475 342 469 415 475 378 b 460 244 475 308 469 274 b 193 44 421 124 303 44 b 91 69 157 44 122 51 b 19 161 43 97 19 126 b 21 181 19 167 20 174 b 98 241 32 220 65 241 b 170 186 129 241 160 223 b 172 166 171 179 172 173 b 121 94 172 134 152 102 b 117 93 118 94 117 93 b 121 90 117 93 118 91 b 185 76 142 80 164 76 b 270 119 220 76 251 91 b 308 259 287 145 300 194 b 313 317 310 277 313 310 b 313 317 313 317 313 317 b 313 317 313 317 313 317 b 304 315 313 317 308 316 b 216 295 273 302 245 295 b 145 308 193 295 170 299 b 19 398 88 327 42 360 b 0 469 5 420 0 444 b 24 551 0 496 8 526 b 191 646 54 596 125 637 m 227 614 b 215 616 224 616 220 616 b 202 614 210 616 206 616 b 152 535 174 610 163 592 b 144 463 147 509 144 485 b 152 391 144 440 147 417 b 216 328 163 344 179 328 b 280 391 253 328 269 344 b 288 463 285 417 288 440 b 280 535 288 485 285 509 b 227 614 269 594 258 610 m 236 -1 l 238 -1 l 235 -1 l 236 -1 m 236 673 l 238 673 l 235 673 l 236 673 "},va:{x_min:-149.71875,x_max:148.359375,ha:151,o:"m -8 -1 b -1 0 -5 -1 -4 0 b 16 -11 5 0 13 -4 b 83 -186 17 -12 47 -90 l 148 -358 l 148 -363 b 127 -385 148 -376 138 -385 b 112 -378 122 -385 118 -383 b 54 -226 110 -374 114 -385 b 0 -81 24 -147 0 -81 b -55 -226 -1 -81 -25 -147 b -114 -378 -115 -385 -111 -374 b -129 -385 -119 -383 -123 -385 b -149 -363 -140 -385 -149 -376 l -149 -358 l -84 -186 b -19 -11 -49 -90 -19 -12 b -8 -1 -17 -8 -12 -4 "},vb:{x_min:0,x_max:428.75,ha:438,o:"m 262 186 b 273 186 266 186 272 186 b 274 186 273 186 274 186 b 285 186 274 186 280 186 b 428 48 375 181 428 122 b 386 -68 428 12 416 -29 b 155 -187 329 -145 236 -187 b 12 -111 92 -187 38 -162 b 0 -51 4 -91 0 -72 b 262 186 0 58 122 179 "},vc:{x_min:0,x_max:447.8125,ha:457,o:"m 0 86 l 0 173 l 223 173 l 447 173 l 447 86 l 447 0 l 223 0 l 0 0 l 0 86 "},vf:{x_min:0,x_max:370.21875,ha:378,o:"m 0 0 l 0 277 l 61 277 l 122 277 l 122 0 l 122 -278 l 61 -278 l 0 -278 l 0 0 m 246 -1 l 246 277 l 308 277 l 370 277 l 370 -1 l 370 -278 l 308 -278 l 246 -278 l 246 -1 "},v10:{x_min:0,x_max:559.421875,ha:571,o:"m 5 127 b 14 127 6 127 9 127 b 51 126 25 127 43 127 b 175 98 93 122 138 112 l 186 94 b 279 51 210 86 255 65 b 285 47 280 51 283 48 b 319 27 291 44 311 31 l 326 22 b 359 0 332 19 352 4 l 367 -6 b 371 -9 368 -6 370 -8 l 379 -15 b 387 -22 383 -18 386 -20 l 398 -30 l 411 -40 l 417 -47 l 427 -55 l 434 -61 b 441 -66 436 -62 439 -65 l 446 -72 l 453 -77 l 462 -87 b 558 -188 490 -113 549 -176 b 559 -195 559 -191 559 -194 b 548 -205 559 -201 555 -205 b 541 -204 547 -205 544 -205 b 534 -198 539 -201 536 -199 l 525 -191 b 481 -162 518 -187 490 -167 b 472 -155 477 -159 472 -156 b 468 -152 470 -155 469 -154 b 461 -149 466 -152 464 -151 b 428 -130 454 -145 441 -137 b 371 -99 413 -122 372 -99 b 363 -95 371 -99 367 -98 b 353 -91 357 -94 353 -91 b 348 -90 353 -91 352 -91 b 332 -81 343 -87 341 -86 b 27 -12 230 -37 127 -13 b 0 -5 4 -11 2 -11 b 0 58 0 -2 0 27 b 0 122 0 88 0 120 b 5 127 1 124 4 126 "},v11:{x_min:-155.171875,x_max:153.8125,ha:157,o:"m -137 353 b -130 353 -136 353 -133 353 b -112 349 -125 353 -119 352 b -100 342 -110 347 -104 344 b 0 317 -69 326 -35 317 b 111 349 38 317 76 328 b 129 353 117 352 123 353 b 153 327 142 353 153 344 b 144 302 153 320 153 317 b 27 6 93 226 50 113 b 21 -13 24 -11 24 -11 b 0 -26 17 -22 8 -26 b -24 -12 -9 -26 -19 -22 b -28 5 -24 -9 -27 -2 b -145 302 -53 117 -95 224 b -155 327 -155 317 -155 320 b -137 353 -155 340 -148 349 "},v18:{x_min:0,x_max:323.9375,ha:331,o:"m 217 535 b 225 537 220 537 221 537 b 245 524 235 537 242 533 l 246 521 l 247 390 l 247 258 l 273 265 b 306 270 288 269 299 270 b 322 259 315 270 319 267 b 323 208 323 256 323 233 b 322 158 323 184 323 159 b 288 140 318 148 315 147 b 247 130 254 131 247 130 b 247 65 247 130 247 104 b 247 20 247 51 247 36 l 247 -88 l 273 -81 b 306 -76 289 -77 299 -76 b 318 -81 311 -76 315 -77 b 323 -123 323 -87 323 -86 l 323 -138 l 323 -154 b 318 -195 323 -191 323 -190 b 269 -210 314 -199 315 -199 b 249 -216 259 -213 250 -216 l 247 -216 l 247 -349 l 246 -483 l 245 -487 b 225 -499 242 -495 234 -499 b 206 -487 219 -499 210 -495 l 205 -483 l 205 -355 l 205 -227 l 204 -227 l 181 -233 l 138 -244 b 117 -249 127 -247 117 -249 b 115 -385 115 -249 115 -256 l 115 -523 l 114 -526 b 95 -538 110 -534 102 -538 b 74 -526 87 -538 78 -534 l 73 -523 l 73 -391 b 72 -260 73 -269 73 -260 b 72 -260 72 -260 72 -260 b 19 -273 61 -263 23 -273 b 0 -260 10 -273 4 -267 b 0 -209 0 -256 0 -256 l 0 -162 l 1 -158 b 61 -134 5 -148 5 -148 l 73 -131 l 73 -22 b 72 86 73 79 73 86 b 72 86 72 86 72 86 b 19 74 61 83 23 74 b 0 86 10 74 4 79 b 0 137 0 90 0 90 l 0 184 l 1 188 b 61 212 5 198 5 198 l 73 215 l 73 348 l 73 481 l 74 485 b 95 498 78 492 87 498 b 103 495 98 498 100 496 b 114 485 107 494 111 489 l 115 481 l 115 353 l 115 226 l 121 226 b 159 235 123 227 141 231 l 198 247 l 205 248 l 205 384 l 205 521 l 206 524 b 217 535 209 528 212 533 m 205 9 b 205 119 205 70 205 119 l 205 119 b 182 113 204 119 194 116 l 138 102 b 117 97 127 99 117 97 b 115 -12 115 97 115 91 l 115 -122 l 121 -120 b 159 -111 123 -119 141 -115 l 198 -101 l 205 -98 l 205 9 "},v1b:{x_min:0,x_max:559.421875,ha:571,o:"m 544 204 b 548 204 545 204 547 204 b 559 194 555 204 559 199 b 559 190 559 192 559 191 b 530 156 559 188 556 184 b 462 86 510 134 481 104 b 453 76 458 81 454 77 l 446 70 l 441 65 b 434 59 439 63 436 61 l 427 54 b 409 37 426 51 416 44 b 392 23 398 29 394 26 b 387 19 389 22 387 20 b 379 13 386 19 383 16 l 371 8 l 367 5 l 359 -1 l 337 -16 b 285 -48 319 -29 298 -41 l 279 -52 b 186 -95 255 -66 210 -87 l 175 -99 b 23 -129 127 -117 68 -129 b 17 -129 20 -129 19 -129 b 1 -123 2 -129 2 -129 b 0 -49 0 -122 0 -83 b 0 4 0 -22 0 1 b 27 11 2 9 4 9 b 185 31 78 12 145 20 b 198 34 186 31 193 33 b 314 73 234 44 277 58 b 349 88 328 79 340 84 b 353 90 352 90 353 90 b 363 94 353 90 357 93 b 371 98 367 97 371 98 b 428 129 372 98 413 120 b 461 148 441 136 454 144 b 468 151 464 149 466 151 b 472 154 469 152 470 154 b 481 161 473 155 477 158 b 525 190 490 166 518 186 l 534 197 b 540 201 536 198 539 199 b 544 204 541 202 544 204 "},v1d:{x_min:0,x_max:619.3125,ha:632,o:"m 274 184 b 307 186 285 186 296 186 b 616 22 465 186 597 116 b 619 -1 617 13 619 5 b 308 -187 619 -104 483 -187 b 0 -1 133 -187 0 -102 b 5 36 0 11 1 23 b 274 184 29 115 141 176 m 289 161 b 272 162 284 162 277 162 b 171 41 209 162 171 108 b 205 -73 171 5 182 -34 b 345 -163 243 -133 298 -163 b 436 -98 385 -163 420 -142 b 446 -43 443 -80 446 -62 b 289 161 446 47 377 147 "},v1e:{x_min:-402.890625,x_max:401.53125,ha:410,o:"m -219 173 b -213 174 -217 174 -215 174 b -202 173 -209 174 -205 173 b -114 86 -200 172 -179 151 b -28 0 -66 37 -28 0 b 40 84 -28 0 2 37 b 117 174 111 173 110 172 b 122 174 118 174 119 174 b 132 173 125 174 129 173 b 295 11 134 172 171 134 l 307 -1 l 336 34 b 374 76 366 72 368 74 b 381 77 375 77 378 77 b 401 56 392 77 401 68 b 400 48 401 54 401 51 b 223 -172 397 41 230 -166 b 210 -176 220 -174 215 -176 b 201 -174 206 -176 204 -176 b 112 -87 198 -173 178 -152 b 27 0 65 -38 27 0 b -42 -86 27 0 -4 -38 b -118 -174 -112 -174 -111 -173 b -123 -176 -119 -176 -121 -176 b -133 -174 -126 -176 -130 -174 b -296 -12 -136 -173 -172 -137 l -308 0 l -337 -34 b -375 -77 -367 -73 -370 -76 b -382 -79 -377 -79 -379 -79 b -402 -58 -393 -79 -402 -69 b -401 -49 -402 -55 -402 -52 b -224 172 -398 -43 -228 167 b -219 173 -223 172 -220 173 "},v1f:{x_min:-340.28125,x_max:338.921875,ha:346,o:"m -32 520 b -29 521 -31 520 -31 521 b -23 519 -27 521 -24 520 b -20 513 -21 517 -20 516 b -21 506 -20 512 -20 509 b -31 474 -23 502 -27 488 l -53 402 l -66 352 l -68 349 l -57 349 b -32 351 -51 349 -40 351 b 123 370 19 352 74 359 b 137 371 127 370 133 371 b 170 356 152 371 164 366 b 171 355 170 355 170 355 b 216 366 174 355 183 358 b 280 378 268 377 266 377 b 287 378 283 378 284 378 b 332 349 307 378 322 369 b 338 319 336 341 338 330 b 332 301 338 310 336 302 b 242 280 329 299 246 280 b 242 280 242 280 242 280 b 235 288 236 280 235 283 b 235 292 235 290 235 291 b 236 302 236 297 236 299 b 220 337 236 316 230 330 l 216 340 l 210 335 b 159 276 189 322 172 301 b 118 149 152 265 156 274 b 81 34 84 36 85 36 b -8 13 78 33 -4 13 b -8 13 -8 13 -8 13 b -14 20 -12 15 -14 15 b -8 44 -14 24 -12 31 b -2 66 -5 55 -2 65 b -2 66 -2 66 -2 66 l -2 66 b -43 41 -2 66 -21 55 b -114 4 -98 8 -98 8 b -144 0 -123 0 -134 0 b -242 99 -197 0 -242 43 b -242 109 -242 102 -242 105 b -212 219 -240 122 -242 116 b -185 312 -197 270 -185 312 l -185 312 b -189 312 -185 312 -186 312 b -259 312 -200 312 -227 312 b -321 310 -291 312 -310 310 b -334 312 -330 310 -334 312 b -340 319 -338 313 -340 316 b -336 326 -340 322 -338 324 b -291 337 -334 326 -314 331 l -247 347 l -210 348 b -172 348 -190 348 -172 348 b -168 363 -172 348 -171 355 b -145 442 -151 424 -145 441 b -133 452 -144 444 -140 446 l -77 489 b -32 520 -53 506 -32 520 m 57 334 b 53 335 55 335 54 335 b 44 334 50 335 49 335 b -70 316 8 326 -28 320 b -78 309 -78 316 -78 316 b -108 202 -80 305 -88 274 b -141 81 -136 112 -141 93 b -140 74 -141 79 -141 77 b -117 49 -137 59 -127 49 b -107 52 -114 49 -110 51 b 16 127 -106 54 14 126 b 42 217 16 127 42 215 b 49 241 42 222 44 229 b 73 320 53 251 73 317 b 57 334 73 327 65 333 "},v20:{x_min:-571.671875,x_max:570.3125,ha:582,o:"m -559 351 b -551 352 -556 352 -553 352 b -530 338 -543 352 -533 348 b -529 169 -530 337 -529 291 l -529 1 l -507 27 l -441 112 b -382 174 -394 169 -390 174 b -378 174 -381 174 -379 174 b -281 86 -370 174 -375 179 b -196 0 -234 37 -196 0 b -126 84 -196 0 -164 37 b -50 174 -55 173 -57 172 b -44 174 -49 174 -47 174 b -35 173 -42 174 -38 173 b 53 86 -32 172 -12 151 b 138 0 100 37 138 0 b 208 84 140 0 170 37 b 284 174 279 173 279 172 b 289 174 285 174 288 174 b 300 173 294 174 298 173 b 462 11 303 172 340 134 l 475 -1 l 503 34 b 541 76 534 72 536 74 b 548 77 544 77 545 77 b 570 56 560 77 570 68 b 567 48 570 54 568 51 b 392 -172 564 41 397 -166 b 378 -176 387 -174 382 -176 b 368 -174 375 -176 371 -176 b 280 -87 367 -173 347 -152 b 194 0 234 -38 194 0 b 126 -86 194 0 163 -38 b 49 -174 54 -174 55 -173 b 44 -176 47 -176 46 -176 b 34 -174 40 -176 36 -174 b -54 -87 31 -173 10 -152 b -140 0 -102 -38 -140 0 b -209 -86 -140 0 -171 -38 b -285 -174 -280 -174 -279 -173 b -291 -176 -287 -176 -288 -176 b -300 -174 -294 -176 -298 -174 b -464 -11 -303 -173 -374 -102 l -476 0 l -506 -37 b -539 -76 -528 -65 -537 -74 b -551 -80 -543 -79 -547 -80 b -570 -68 -558 -80 -566 -76 l -571 -65 l -571 136 b -570 340 -571 331 -571 337 b -559 351 -568 344 -564 348 "},v22:{x_min:0,x_max:432.828125,ha:442,o:"m 209 186 b 213 187 210 187 212 187 b 216 187 215 187 216 187 b 224 174 216 186 220 180 b 420 -1 269 105 338 43 b 432 -12 431 -8 432 -9 b 421 -23 432 -15 432 -16 b 228 -180 345 -70 264 -137 b 219 -188 221 -188 221 -188 l 219 -188 b 208 -177 215 -188 215 -188 b 10 1 163 -106 93 -44 b 0 11 0 6 0 8 b 10 22 0 13 0 15 b 202 179 87 69 167 136 b 209 186 206 183 209 186 "},v23:{x_min:0,x_max:133.390625,ha:136,o:"m 54 66 b 65 68 58 68 61 68 b 122 37 88 68 110 56 b 133 -1 130 26 133 12 b 104 -58 133 -23 123 -44 b 66 -69 92 -65 78 -69 b 10 -38 44 -69 23 -58 b 0 -1 2 -27 0 -13 b 54 66 0 30 20 61 "},v25:{x_min:0,x_max:318.5,ha:325,o:"m 20 376 b 167 377 23 377 96 377 b 296 376 231 377 294 377 b 318 347 311 371 318 359 b 296 316 318 333 311 320 b 159 315 294 315 227 315 b 21 316 91 315 24 315 b 0 345 6 320 0 333 b 20 376 0 359 6 371 "},v26:{x_min:-21.78125,x_max:483.1875,ha:493,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 383 20 616 20 616 l 20 148 l 21 151 b 140 199 59 183 102 199 b 206 179 164 199 187 192 l 210 176 l 210 396 l 210 617 l 212 621 b 231 632 216 628 223 632 b 250 620 239 632 247 628 b 251 383 251 616 251 616 l 251 148 l 254 151 b 370 199 291 183 332 199 b 415 191 385 199 400 197 b 483 84 458 176 483 134 b 461 0 483 58 476 29 b 332 -142 439 -40 411 -72 l 255 -215 b 231 -229 240 -229 239 -229 b 216 -223 224 -229 220 -227 b 210 -158 210 -217 210 -223 b 210 -120 210 -148 210 -136 l 210 -29 l 205 -34 b 100 -142 182 -65 159 -88 l 23 -215 b -1 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 l -21 -212 l -21 201 l -21 616 l -20 620 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 m 341 131 b 328 133 337 133 332 133 b 322 133 326 133 323 133 b 257 87 296 129 273 113 l 251 80 l 251 -37 l 251 -156 l 255 -152 b 375 81 328 -72 375 20 l 375 83 b 341 131 375 113 367 126 "},v27:{x_min:0,x_max:432.828125,ha:442,o:"m 208 184 b 213 187 209 186 212 187 b 224 176 217 187 221 183 b 245 147 225 172 235 159 b 419 -1 288 90 347 38 b 431 -8 424 -4 431 -8 b 432 -12 432 -9 432 -11 b 430 -18 432 -13 432 -16 b 364 -61 424 -20 383 -47 b 225 -183 307 -102 250 -152 b 223 -187 224 -184 223 -187 b 220 -188 221 -188 220 -188 b 208 -176 216 -188 210 -184 b 187 -148 205 -173 197 -159 b 12 0 144 -90 84 -38 b 0 11 4 5 0 8 b 16 24 0 13 4 18 b 183 158 83 69 141 115 b 208 184 194 169 198 173 m 183 105 b 176 113 181 109 176 113 b 172 109 176 113 175 112 b 92 45 149 90 117 62 l 88 41 l 102 31 b 247 -105 160 -6 210 -55 l 254 -115 l 257 -112 l 269 -102 b 340 -45 287 -87 319 -61 l 344 -43 l 330 -33 b 183 105 272 6 221 54 "},v28:{x_min:-73.5,x_max:72.140625,ha:74,o:"m -72 252 l -73 254 l 0 254 l 72 254 l 70 252 b 0 -1 70 248 0 -1 b -72 252 -1 -1 -72 248 "},v29:{x_min:-590.71875,x_max:589.359375,ha:601,o:"m 175 273 b 182 274 178 273 181 274 b 202 262 190 274 198 269 b 204 158 204 259 204 259 l 204 56 l 250 112 b 303 174 296 172 298 172 b 308 174 304 174 307 174 b 318 173 313 174 317 173 b 481 11 322 172 357 134 l 494 -1 l 522 34 b 560 76 553 72 555 74 b 567 77 563 77 564 77 b 589 56 579 77 589 68 b 586 48 589 54 588 51 b 411 -172 583 41 416 -166 b 397 -176 406 -174 401 -176 b 387 -174 393 -176 390 -176 b 299 -87 386 -173 366 -152 b 213 0 253 -38 213 0 b 208 -6 213 0 210 -2 l 204 -12 l 204 -147 b 204 -210 204 -173 204 -194 b 198 -292 204 -297 204 -287 b 183 -299 194 -297 189 -299 b 164 -287 175 -299 167 -295 b 163 -174 163 -284 163 -284 l 161 -63 l 119 -117 b 65 -176 76 -170 73 -176 b 61 -176 63 -176 62 -176 b -35 -87 51 -174 57 -180 b -121 0 -83 -38 -121 0 b -190 -86 -122 0 -152 -38 b -266 -174 -261 -174 -259 -173 b -272 -176 -268 -176 -270 -176 b -281 -174 -276 -176 -280 -174 b -371 -86 -284 -173 -304 -152 b -457 0 -417 -38 -457 0 l -457 0 b -477 -26 -457 0 -470 -16 b -548 -227 -524 -88 -548 -161 b -536 -303 -548 -254 -544 -280 b -533 -317 -534 -309 -533 -313 b -553 -338 -533 -330 -541 -338 b -577 -315 -566 -338 -571 -333 b -590 -227 -586 -287 -590 -258 b -518 -9 -590 -154 -564 -77 b -465 56 -509 2 -504 8 l -402 134 b -363 174 -374 170 -371 174 b -359 174 -362 174 -360 174 b -262 86 -351 174 -356 179 b -176 0 -216 37 -176 0 b -107 84 -176 0 -145 37 b -31 174 -36 173 -38 172 b -25 174 -29 174 -28 174 b -16 173 -23 174 -19 173 b 147 11 -13 172 35 123 l 157 -1 l 160 1 l 163 4 l 163 130 b 164 260 163 256 163 258 b 175 273 166 266 170 270 "},v2a:{x_min:-21.78125,x_max:366.140625,ha:374,o:"m 276 1378 b 284 1379 279 1379 281 1379 b 306 1360 292 1379 298 1374 b 352 1247 326 1326 343 1286 b 366 1139 362 1213 366 1175 b 347 1009 366 1093 359 1049 l 344 1002 l 347 992 b 352 971 348 986 351 977 b 366 863 362 936 366 899 b 347 732 366 818 359 773 l 344 725 l 347 716 b 352 695 348 710 351 700 b 366 588 362 659 366 623 b 223 262 366 464 314 345 b 189 233 212 252 212 252 b 35 76 126 183 73 129 b -1 16 20 56 2 27 b -19 4 -4 9 -12 4 l -21 4 l -21 137 l -21 270 l -17 270 b 186 344 59 281 134 308 b 319 606 270 399 319 499 b 317 650 319 620 319 635 l 315 659 l 314 655 b 223 537 288 607 258 570 b 189 509 212 528 212 528 b 35 352 126 459 73 405 b -1 292 20 333 2 303 b -19 280 -4 285 -12 280 l -21 280 l -21 413 l -21 546 l -17 546 b 186 620 59 557 134 584 b 319 882 270 675 319 775 b 317 925 319 896 319 911 l 315 935 l 314 931 b 223 813 288 884 258 846 b 189 785 212 805 212 805 b 35 628 126 735 73 681 b -1 569 20 609 2 580 b -19 556 -4 562 -12 556 l -21 556 l -21 689 l -21 823 l -17 823 b 202 907 68 835 152 867 b 319 1157 280 968 319 1061 b 270 1338 319 1218 303 1281 b 262 1358 264 1349 262 1353 b 262 1364 262 1360 262 1363 b 276 1378 265 1371 269 1376 "},v2c:{x_min:-597.53125,x_max:596.171875,ha:608,o:"m -413 173 b -408 174 -412 174 -409 174 b -397 173 -404 174 -400 173 b -308 86 -394 172 -374 151 b -223 0 -261 37 -223 0 b -153 84 -223 0 -191 37 b -77 174 -83 173 -84 172 b -72 174 -76 174 -74 174 b -62 173 -68 174 -63 173 b 25 86 -59 172 -39 151 b 112 0 73 37 111 0 b 181 84 112 0 144 37 b 257 174 251 173 251 172 b 262 174 258 174 261 174 b 273 173 266 174 270 173 b 436 9 276 172 347 101 l 447 -1 l 477 36 b 522 79 511 79 513 79 l 522 79 b 552 51 533 79 539 73 b 596 -112 582 6 596 -51 b 567 -262 596 -161 586 -213 b 539 -322 558 -287 544 -316 b 524 -327 534 -326 529 -327 b 504 -315 515 -327 507 -323 b 503 -308 503 -312 503 -309 b 511 -285 503 -302 504 -297 b 555 -113 540 -227 555 -169 b 544 -34 555 -86 551 -59 b 522 19 540 -16 530 8 l 521 22 l 481 -26 l 405 -122 b 353 -176 366 -172 362 -176 b 349 -176 352 -176 351 -176 b 253 -87 341 -176 347 -180 b 167 0 206 -38 167 0 b 99 -86 167 0 136 -38 b 21 -174 27 -174 28 -173 b 17 -176 20 -176 19 -176 b 6 -174 13 -176 9 -174 b -81 -87 4 -173 -14 -152 b -167 0 -129 -38 -167 0 b -236 -86 -167 0 -198 -38 b -313 -174 -307 -174 -306 -173 b -318 -176 -314 -176 -315 -176 b -328 -174 -321 -176 -325 -174 b -491 -12 -330 -173 -367 -137 l -503 0 l -530 -34 b -570 -77 -562 -73 -564 -76 b -577 -79 -571 -79 -574 -79 b -597 -58 -588 -79 -597 -69 b -596 -49 -597 -55 -597 -52 b -417 172 -593 -43 -423 167 b -413 173 -417 172 -415 173 "},v2d:{x_min:0,x_max:438.28125,ha:447,o:"m 212 190 b 219 191 213 191 216 191 b 236 176 225 191 228 190 b 419 18 277 105 341 49 b 436 5 431 13 434 11 b 438 -1 438 4 438 1 b 424 -16 438 -8 432 -13 b 356 -49 409 -20 379 -36 b 234 -180 306 -83 258 -133 b 219 -192 230 -188 224 -192 b 200 -176 213 -192 206 -187 b 9 -15 157 -102 89 -45 b 0 0 2 -12 0 -6 b 16 18 0 9 2 12 b 200 176 93 48 159 104 b 212 190 205 186 208 188 m 239 113 b 236 117 238 116 238 117 b 230 108 235 117 234 115 b 92 -15 196 58 140 8 b 88 -18 91 -16 88 -18 b 92 -20 88 -18 91 -19 b 198 -116 130 -43 166 -74 b 200 -117 200 -117 200 -117 b 201 -117 200 -117 201 -117 b 264 -43 212 -98 242 -62 b 345 15 288 -19 321 4 b 348 18 347 16 348 16 b 344 20 348 18 347 19 b 239 113 307 41 266 79 "},v2f:{x_min:-1.359375,x_max:680.5625,ha:694,o:"m 597 1042 b 604 1042 600 1042 602 1042 b 642 1002 627 1042 642 1022 b 619 966 642 988 635 974 b 439 927 574 942 503 927 l 426 927 l 426 921 b 430 838 428 893 430 866 b 345 480 430 696 398 560 b 179 391 307 423 249 391 b 156 392 171 391 164 392 b 138 394 149 394 142 394 b 103 434 115 396 103 416 b 129 471 103 451 111 466 b 141 474 133 473 137 474 b 172 459 153 474 164 469 b 181 455 175 456 176 455 b 187 456 182 455 185 455 b 253 520 212 460 234 483 b 315 836 294 605 315 714 b 311 928 315 867 314 898 b 302 945 310 943 311 942 b 245 953 283 950 262 953 b 130 891 193 953 149 931 b 84 860 119 870 102 860 b 36 905 61 860 39 877 b 36 910 36 907 36 909 b 80 970 36 931 50 949 b 249 1017 125 1000 187 1017 b 322 1009 273 1017 299 1014 l 341 1003 b 436 991 372 995 406 991 b 577 1031 495 991 545 1004 b 597 1042 583 1038 590 1041 m 416 360 b 424 360 419 360 421 360 b 481 309 454 360 479 338 b 503 145 484 280 495 199 b 585 -185 525 16 555 -106 b 630 -245 596 -213 613 -237 l 634 -247 l 638 -245 b 647 -244 641 -245 645 -244 b 680 -278 666 -244 680 -262 b 664 -308 680 -290 675 -301 b 638 -312 658 -310 650 -312 b 613 -309 631 -312 623 -310 b 477 -201 555 -303 502 -260 b 417 -2 460 -159 434 -72 b 416 5 417 1 416 5 b 416 5 416 5 416 5 b 411 -5 415 5 413 0 b 359 -97 397 -33 377 -70 b 353 -106 355 -102 353 -105 b 359 -112 353 -108 355 -109 b 409 -130 375 -123 390 -129 b 426 -134 420 -130 421 -131 b 431 -147 428 -137 431 -141 b 420 -162 431 -152 427 -159 b 382 -169 409 -166 396 -169 b 323 -155 363 -169 341 -165 l 317 -152 l 314 -155 b 62 -303 240 -240 148 -295 b 36 -305 55 -305 44 -305 b 23 -303 29 -305 24 -305 b -1 -273 6 -299 -1 -287 b 31 -240 -1 -256 10 -240 b 36 -240 32 -240 34 -240 b 42 -241 38 -241 39 -241 b 134 -204 63 -241 99 -226 b 367 288 265 -115 357 81 b 375 330 368 313 370 320 b 416 360 383 347 400 358 m 360 -359 b 379 -359 363 -359 371 -359 b 424 -360 396 -359 416 -359 b 646 -502 536 -373 624 -430 b 649 -527 649 -510 649 -519 b 530 -673 649 -578 604 -635 l 521 -677 l 529 -681 b 653 -811 592 -714 637 -762 b 660 -853 658 -827 660 -839 b 645 -911 660 -873 656 -892 b 426 -1021 608 -981 519 -1021 b 283 -989 377 -1021 328 -1011 b 235 -949 249 -972 239 -964 b 234 -936 234 -946 234 -941 b 234 -928 234 -934 234 -931 l 235 -925 l 234 -927 l 225 -934 b 87 -982 186 -966 138 -982 b 80 -982 85 -982 83 -982 b 55 -981 70 -981 58 -981 b 17 -943 32 -981 17 -964 b 54 -904 17 -921 35 -904 b 78 -914 62 -904 72 -909 l 83 -918 l 88 -918 b 190 -831 122 -918 166 -881 b 269 -506 242 -727 269 -612 b 268 -462 269 -492 269 -477 b 266 -449 266 -458 266 -452 b 265 -444 266 -445 266 -444 b 257 -446 264 -444 261 -445 b 132 -545 196 -470 152 -505 b 88 -573 122 -563 104 -573 b 39 -523 63 -573 39 -553 b 63 -476 39 -505 44 -494 b 360 -359 136 -408 235 -369 m 419 -424 b 393 -423 411 -423 406 -423 l 375 -423 l 377 -426 b 379 -439 377 -427 378 -434 b 383 -510 382 -463 383 -487 b 314 -811 383 -609 360 -710 b 266 -893 296 -850 285 -870 b 264 -898 265 -896 264 -898 l 264 -898 b 264 -898 264 -898 264 -898 b 268 -898 264 -898 266 -898 b 273 -898 270 -898 272 -898 b 300 -909 283 -898 291 -900 b 426 -957 340 -941 385 -957 b 476 -949 443 -957 460 -954 b 547 -853 522 -931 547 -893 b 485 -745 547 -816 526 -775 b 397 -707 460 -727 432 -714 b 366 -675 375 -703 366 -692 b 396 -642 366 -657 377 -645 b 530 -557 455 -637 511 -601 b 536 -527 534 -548 536 -537 b 419 -424 536 -480 490 -437 "},v30:{x_min:-21.78125,x_max:367.5,ha:375,o:"m 276 1900 b 284 1901 279 1900 281 1901 b 306 1883 291 1901 298 1896 b 367 1686 347 1825 367 1757 b 343 1558 367 1643 359 1600 l 338 1549 l 343 1537 b 367 1411 359 1497 367 1454 b 343 1282 367 1367 359 1324 l 338 1272 l 343 1261 b 367 1135 359 1221 367 1178 b 343 1007 367 1090 359 1047 l 338 996 l 343 985 b 367 859 359 945 367 902 b 343 731 367 814 359 771 l 338 720 l 343 709 b 367 582 359 667 367 626 b 289 362 367 503 340 426 b 239 312 276 345 259 330 b 29 77 152 237 76 152 b -1 18 14 54 2 30 b -19 4 -4 11 -12 4 l -21 4 l -21 133 l -20 260 l -13 262 b 98 299 17 269 62 284 b 111 305 103 302 110 305 b 167 334 123 310 156 327 b 319 595 264 391 319 491 b 313 659 319 616 318 638 b 310 667 311 664 311 667 b 307 663 310 667 308 666 b 240 588 289 637 269 614 b 16 331 141 505 62 413 b -1 294 8 316 1 302 b -19 280 -4 287 -12 280 l -21 280 l -21 408 l -20 537 l -13 538 b 98 576 17 545 62 560 b 111 581 103 578 110 581 b 167 610 123 587 156 603 b 319 871 264 667 319 767 b 313 935 319 892 318 913 b 310 942 311 941 311 942 b 307 939 310 942 308 941 b 240 864 289 913 269 889 b 16 607 141 781 62 689 b -1 570 8 592 1 578 b -19 556 -4 563 -12 556 l -21 556 l -21 684 l -20 813 l -13 814 b 98 852 17 821 62 836 b 111 857 103 855 110 857 b 167 886 123 863 156 880 b 319 1147 264 943 319 1043 b 313 1211 319 1168 318 1189 b 310 1218 311 1217 311 1218 b 307 1215 310 1218 308 1217 b 240 1140 289 1188 269 1165 b 16 884 141 1057 62 966 b -1 846 8 868 1 855 b -19 832 -4 839 -12 832 l -21 832 l -21 960 l -20 1089 l -13 1090 b 98 1128 17 1097 62 1111 b 111 1134 103 1131 110 1134 b 167 1163 123 1139 156 1156 b 319 1424 264 1220 319 1320 b 313 1486 319 1444 318 1465 b 310 1494 311 1493 311 1494 b 307 1492 310 1494 308 1493 b 240 1417 289 1464 269 1442 b 16 1160 141 1333 62 1242 b -1 1121 8 1145 1 1131 b -19 1109 -4 1115 -12 1109 l -21 1109 l -21 1236 l -20 1365 l -13 1367 b 98 1404 17 1374 62 1388 b 111 1410 103 1407 110 1410 b 250 1508 172 1437 215 1467 b 319 1701 296 1564 319 1633 b 270 1859 319 1757 303 1814 b 262 1882 265 1868 262 1875 b 276 1900 262 1890 266 1896 "},v31:{x_min:0,x_max:386.5625,ha:394,o:"m 0 173 l 0 347 l 193 347 l 386 347 l 386 173 l 386 0 l 193 0 l 0 0 l 0 173 "},v33:{x_min:-423.3125,x_max:421.9375,ha:431,o:"m -10 276 b -2 277 -8 277 -5 277 b 17 265 5 277 13 273 b 19 163 19 260 19 260 l 19 68 l 39 45 b 277 -95 122 -34 200 -81 b 289 -97 281 -97 285 -97 b 378 0 332 -97 371 -54 b 378 11 378 4 378 6 b 302 83 378 55 345 83 b 242 66 283 83 262 77 b 208 56 231 59 219 56 b 148 120 175 56 148 81 b 200 186 148 151 164 172 b 261 198 220 194 240 198 b 420 45 341 198 411 137 b 421 22 421 37 421 29 b 257 -198 421 -86 347 -188 b 242 -198 251 -198 247 -198 b 20 -105 181 -198 95 -163 l 19 -104 l 19 -183 b 19 -216 19 -195 19 -206 b 12 -273 19 -272 17 -267 b -2 -278 8 -277 2 -278 b -21 -266 -10 -278 -19 -274 b -23 -165 -23 -263 -23 -262 l -23 -69 l -44 -47 b -250 86 -117 23 -183 66 b -295 94 -270 93 -284 94 b -315 91 -302 94 -308 94 b -381 5 -356 81 -381 43 b -355 -56 -381 -16 -372 -40 b -299 -81 -338 -73 -319 -81 b -246 -68 -283 -81 -265 -77 b -212 -58 -234 -61 -223 -58 b -168 -77 -196 -58 -179 -65 b -151 -122 -156 -90 -151 -105 b -179 -174 -151 -141 -160 -162 b -239 -195 -194 -184 -217 -192 b -257 -197 -245 -195 -250 -197 b -423 -5 -349 -197 -423 -113 b -423 0 -423 -4 -423 -1 b -277 194 -420 97 -362 173 b -247 197 -268 197 -258 197 b -24 104 -185 197 -100 162 l -23 102 l -23 181 b -21 265 -23 260 -23 260 b -10 276 -20 269 -14 274 "},v34:{x_min:0,x_max:622.03125,ha:635,o:"m 398 417 b 406 419 401 419 404 419 b 427 398 417 419 427 409 b 427 391 427 395 427 392 b 34 -274 424 385 38 -272 b 20 -280 29 -278 25 -280 b 0 -259 9 -280 0 -270 b 0 -252 0 -256 0 -254 b 393 413 2 -247 389 410 b 398 417 394 415 397 416 m 592 417 b 600 419 594 419 597 419 b 622 398 611 419 622 409 b 620 391 622 395 620 392 b 227 -274 617 385 231 -272 b 213 -280 223 -278 219 -280 b 193 -259 202 -280 193 -270 b 194 -252 193 -256 193 -254 b 586 413 196 -247 582 410 b 592 417 588 415 590 416 "},v36:{x_min:-1.359375,x_max:1064.390625,ha:1086,o:"m 296 692 b 314 694 302 694 307 694 b 386 685 337 694 366 689 b 548 498 480 660 548 580 b 548 481 548 492 548 487 b 455 395 541 426 499 395 b 370 462 420 395 383 417 b 362 496 364 477 362 488 b 377 514 362 509 367 514 b 393 501 386 514 390 510 b 432 474 397 484 413 474 b 470 487 445 474 458 478 b 491 530 484 496 491 510 b 490 544 491 534 491 539 b 333 660 479 606 411 657 l 323 662 l 315 646 b 269 524 285 591 269 556 b 321 431 269 492 287 466 b 349 395 338 413 343 408 b 363 342 359 378 363 362 b 359 312 363 333 362 322 b 285 158 348 266 318 206 b 281 152 283 155 281 152 b 281 152 281 152 281 152 b 287 154 283 152 284 152 b 318 155 298 154 308 155 b 461 98 371 155 419 136 l 464 97 l 483 112 b 503 129 494 120 503 127 b 504 130 503 129 504 129 b 503 138 504 131 503 134 b 500 180 500 152 500 166 b 553 326 500 238 518 288 b 604 366 560 331 592 358 b 649 381 617 376 632 381 b 696 362 665 381 681 374 b 724 302 714 347 724 324 b 695 238 724 278 714 255 b 660 210 691 234 662 212 b 579 148 658 209 582 151 b 579 148 579 148 579 148 b 596 106 579 144 589 119 b 622 77 604 88 609 83 b 657 69 632 72 645 69 b 748 112 688 69 721 84 b 755 123 754 117 755 120 b 755 127 755 124 755 126 b 751 165 752 137 751 151 b 758 219 751 183 754 202 b 894 387 774 290 820 347 b 896 390 896 388 896 388 b 891 398 896 391 895 392 b 622 560 827 477 730 535 b 600 580 605 564 600 569 b 617 596 600 591 607 596 b 628 595 622 596 624 596 b 1057 248 846 552 1020 412 b 1064 191 1061 229 1064 209 b 922 0 1064 94 1005 9 b 902 -1 916 -1 909 -1 b 774 76 847 -1 800 26 b 769 83 770 81 770 83 b 769 81 769 83 769 83 b 627 -1 733 29 677 -1 b 548 27 597 -1 570 8 b 515 88 537 37 525 61 l 513 95 l 510 93 l 453 45 b 390 0 396 0 396 0 b 390 0 390 0 390 0 b 374 15 381 0 377 4 b 268 105 359 69 314 105 b 250 104 262 105 257 105 l 243 102 l 234 90 b 155 1 201 49 159 2 b 147 -1 152 0 149 -1 b 130 15 138 -1 130 6 b 132 20 130 18 132 19 b 136 31 133 22 134 27 b 220 131 149 74 178 109 b 231 137 225 134 230 136 b 302 278 280 202 302 244 b 265 335 302 299 295 309 b 209 442 234 363 213 402 b 209 455 209 446 209 451 b 279 648 209 502 232 564 l 285 659 l 283 659 b 176 627 238 653 210 645 b 57 477 111 594 66 538 b 55 459 55 471 55 464 b 72 409 55 437 61 415 b 93 403 78 405 87 403 b 152 467 123 403 151 431 b 168 488 153 483 157 488 b 185 462 181 488 185 483 l 185 460 b 137 344 183 409 168 369 b 78 322 119 328 98 322 b 13 360 50 322 25 335 b -1 426 4 380 -1 402 b 89 610 -1 488 32 559 b 296 692 147 659 210 685 m 926 348 b 921 353 924 351 922 353 b 914 348 920 353 918 351 b 823 167 857 306 823 237 b 828 124 823 154 826 138 b 890 31 837 79 862 40 b 896 31 892 31 894 31 b 956 104 916 31 940 59 b 970 191 965 129 970 159 b 966 241 970 208 969 224 b 926 348 959 277 945 313 m 627 326 b 619 326 624 326 622 326 b 598 316 611 326 604 323 b 568 215 579 288 568 255 b 568 208 568 213 568 210 b 571 183 570 195 570 184 l 571 183 b 594 201 571 183 582 191 l 634 231 b 660 259 653 247 656 248 b 664 278 662 266 664 272 b 627 326 664 299 649 320 "},v38:{x_min:-1.359375,x_max:651.96875,ha:665,o:"m 389 644 b 405 645 394 645 400 645 b 504 566 450 645 492 613 b 507 541 506 557 507 549 b 480 471 507 514 498 489 l 477 467 l 483 470 b 609 591 539 485 586 531 b 613 601 611 595 613 599 b 631 609 619 607 624 609 b 651 588 641 609 651 602 b 200 -946 651 584 204 -941 b 182 -957 197 -953 190 -957 b 163 -945 174 -957 166 -953 b 161 -939 161 -942 161 -942 b 217 -743 161 -931 170 -904 b 272 -555 247 -639 272 -555 b 272 -555 272 -555 272 -555 b 264 -560 272 -555 268 -557 b 140 -603 227 -589 182 -603 b 36 -567 102 -603 65 -592 b -1 -487 12 -548 -1 -517 b 17 -427 -1 -466 5 -445 b 103 -380 38 -395 70 -380 b 191 -433 137 -380 172 -398 b 205 -484 201 -448 205 -466 b 178 -553 205 -509 196 -535 l 175 -557 l 182 -555 b 307 -435 236 -539 284 -494 b 372 -213 308 -430 372 -215 b 372 -213 372 -213 372 -213 b 364 -219 372 -213 368 -216 b 240 -262 328 -247 283 -262 b 137 -226 202 -262 166 -249 b 99 -145 112 -206 99 -176 b 118 -84 99 -124 106 -104 b 204 -38 138 -54 171 -38 b 292 -91 238 -38 273 -56 b 306 -141 302 -106 306 -124 b 279 -212 306 -167 296 -194 l 276 -215 l 281 -213 b 408 -93 336 -198 385 -151 b 473 129 409 -88 473 127 b 473 129 473 129 473 129 b 465 122 473 129 469 126 b 341 80 428 94 383 80 b 236 115 303 80 266 91 b 200 195 213 136 200 165 b 217 256 200 217 206 238 b 304 303 239 287 272 303 b 393 249 338 303 374 285 b 406 199 402 234 406 217 b 379 129 406 173 397 148 l 377 126 l 382 127 b 509 248 436 142 485 190 b 574 470 510 254 574 469 b 574 470 574 470 574 470 b 566 464 574 470 570 467 b 442 421 529 435 484 421 b 337 458 404 421 367 433 b 300 537 313 478 300 508 b 389 644 300 585 334 635 "},v39:{x_min:-171.5,x_max:251.8125,ha:257,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 553 20 616 20 614 b 20 491 20 503 20 491 l 20 491 b 153 535 47 501 149 535 b 174 514 167 535 174 524 b 164 496 174 508 171 501 b 92 470 164 495 132 484 l 20 445 l 20 390 b 20 363 20 378 20 370 b 20 333 20 340 20 333 l 20 333 b 153 377 47 344 149 377 b 174 356 167 377 174 367 b 164 338 174 349 171 342 b 92 312 164 338 132 326 l 20 288 l 20 219 l 20 148 l 21 151 b 137 199 59 183 99 199 b 182 191 152 199 167 197 b 251 84 227 176 251 134 b 228 0 251 58 243 29 b 100 -142 206 -40 178 -72 l 23 -215 b -1 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 b -21 30 -21 -212 -21 -212 b -21 273 -21 163 -21 273 b -84 252 -21 273 -50 263 b -152 230 -133 234 -145 230 b -157 231 -155 230 -156 231 b -171 252 -166 234 -171 244 b -160 270 -171 259 -167 266 b -27 316 -159 270 -93 294 l -21 319 l -21 374 b -21 431 -21 406 -21 431 b -84 409 -21 431 -50 421 b -152 388 -133 392 -145 388 b -157 390 -155 388 -156 388 b -171 409 -166 392 -171 401 b -160 428 -171 417 -167 424 b -27 474 -159 428 -93 451 l -21 476 l -21 546 b -20 620 -21 614 -21 616 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 "},v3b:{x_min:0,x_max:484.5625,ha:494,o:"m 228 245 b 239 247 234 247 239 247 b 243 247 240 247 242 247 b 303 238 257 247 287 242 b 484 -2 417 208 484 104 b 412 -177 484 -65 461 -127 b 243 -248 363 -226 303 -248 b 6 -63 138 -248 36 -180 b 0 -1 1 -41 0 -20 b 228 245 0 127 98 240 m 255 181 b 240 183 247 183 245 183 b 232 181 238 183 235 183 b 142 152 200 180 168 170 l 138 149 l 190 97 l 242 44 l 294 97 l 345 149 l 340 152 b 255 181 315 169 284 180 m 147 -54 l 197 -1 l 147 51 l 95 104 l 91 99 b 62 -1 72 70 62 34 b 66 -43 62 -15 63 -29 b 91 -101 72 -63 80 -84 l 95 -106 l 147 -54 m 393 99 b 389 104 390 102 389 104 b 337 51 389 104 366 80 l 285 -1 l 337 -54 l 389 -106 l 393 -101 b 421 -1 412 -72 421 -36 b 393 99 421 34 412 69 m 294 -98 b 242 -45 265 -69 242 -45 b 190 -98 242 -45 219 -69 l 138 -151 l 142 -154 b 242 -184 172 -174 206 -184 b 340 -154 276 -184 311 -174 l 345 -151 l 294 -98 "},v3c:{x_min:0,x_max:450.53125,ha:460,o:"m 189 302 b 204 303 193 302 198 303 b 303 224 250 303 292 270 b 306 199 304 216 306 208 b 279 129 306 173 296 147 l 276 126 l 281 127 b 408 249 337 142 385 190 b 412 259 409 254 412 258 b 430 267 417 265 423 267 b 450 247 441 267 450 259 b 200 -605 450 242 204 -599 b 182 -616 197 -612 190 -616 b 163 -602 174 -616 166 -610 b 161 -598 161 -601 161 -601 b 217 -402 161 -589 170 -562 b 272 -213 247 -298 272 -213 b 272 -213 272 -213 272 -213 b 264 -219 272 -213 268 -216 b 140 -262 227 -247 182 -262 b 36 -226 102 -262 65 -249 b 0 -145 12 -206 0 -176 b 17 -84 0 -124 5 -104 b 103 -38 38 -54 70 -38 b 191 -91 137 -38 172 -56 b 205 -141 201 -106 205 -124 b 178 -212 205 -167 196 -194 l 175 -215 l 182 -213 b 307 -93 236 -198 284 -151 b 372 129 308 -88 372 127 b 372 129 372 129 372 129 b 364 122 372 129 368 126 b 240 80 328 94 283 80 b 137 115 202 80 166 91 b 99 194 111 136 99 165 b 189 302 99 244 133 292 "},v3e:{x_min:0,x_max:406.96875,ha:415,o:"m 21 183 b 28 183 24 183 25 183 b 42 181 34 183 39 183 b 127 108 47 179 47 179 b 202 41 168 72 202 41 b 279 108 204 41 238 72 b 357 177 321 145 356 176 b 375 183 363 181 370 183 b 406 151 392 183 406 169 b 404 137 406 147 405 141 b 322 62 401 131 398 129 b 251 0 284 27 251 0 b 322 -63 251 -1 284 -29 b 404 -138 398 -130 401 -133 b 406 -152 405 -142 406 -148 b 375 -184 406 -170 392 -184 b 357 -179 370 -184 363 -183 b 279 -109 356 -177 321 -147 b 202 -43 238 -73 204 -43 b 127 -109 202 -43 168 -73 b 49 -179 85 -147 50 -177 b 31 -184 43 -183 36 -184 b 0 -152 13 -184 0 -170 b 2 -138 0 -148 0 -142 b 83 -63 5 -133 8 -130 b 155 0 122 -29 155 -1 b 83 62 155 0 122 27 b 8 129 43 97 10 127 b 0 151 2 136 0 144 b 21 183 0 165 8 177 "},v3f:{x_min:-24.5,x_max:317.140625,ha:324,o:"m -24 -147 l -24 -5 l -20 -5 b -1 -19 -12 -5 -4 -11 b 58 -123 6 -43 31 -86 b 196 -278 93 -173 134 -219 b 317 -570 274 -356 317 -460 b 294 -713 317 -617 308 -666 l 289 -724 l 294 -735 b 317 -873 308 -780 317 -827 b 235 -1132 317 -963 288 -1054 b 209 -1165 228 -1140 224 -1146 b 189 -1177 204 -1172 196 -1177 b 171 -1164 182 -1177 175 -1172 b 168 -1154 170 -1161 168 -1159 b 181 -1132 168 -1149 172 -1142 b 269 -891 238 -1064 269 -975 b 269 -881 269 -886 269 -884 b 262 -814 269 -857 265 -827 b 258 -800 261 -811 259 -806 b 142 -628 240 -731 198 -667 b -8 -589 112 -606 47 -589 b -20 -589 -13 -589 -19 -589 l -24 -589 l -24 -449 l -24 -308 l -20 -308 b -1 -322 -12 -308 -4 -313 b 58 -424 6 -345 31 -388 b 194 -580 93 -476 136 -523 b 259 -660 221 -606 245 -635 b 261 -663 259 -662 261 -663 b 264 -656 262 -663 262 -660 b 269 -587 268 -632 269 -610 b 264 -521 269 -566 268 -544 b 262 -512 264 -517 262 -513 b 258 -498 261 -509 259 -503 b 142 -326 240 -428 198 -365 b -8 -287 112 -303 47 -288 b -20 -287 -13 -287 -19 -287 l -24 -287 l -24 -147 "},v40:{x_min:-1.359375,x_max:436.921875,ha:446,o:"m 213 205 b 217 205 215 205 216 205 b 234 194 224 205 234 199 b 236 187 234 194 235 190 l 245 167 l 261 129 l 270 106 b 355 -61 294 54 329 -13 b 420 -163 381 -105 402 -138 b 436 -188 435 -184 436 -184 b 436 -191 436 -190 436 -190 b 421 -206 436 -201 431 -206 l 421 -206 l 416 -206 l 405 -201 b 217 -158 347 -172 283 -158 b 31 -201 153 -158 88 -172 l 20 -206 l 14 -206 l 14 -206 b 0 -191 5 -206 0 -201 b -1 -188 0 -190 -1 -190 b 14 -163 -1 -186 0 -184 b 95 -34 36 -136 72 -77 b 166 106 119 8 148 68 l 175 129 l 183 148 l 200 188 b 213 205 205 199 208 202 "},v41:{x_min:-1.359375,x_max:556.6875,ha:568,o:"m 294 322 b 318 323 299 322 308 323 b 360 320 334 323 352 322 b 526 217 430 310 490 273 b 543 166 537 202 543 184 b 447 70 543 117 503 70 b 445 70 447 70 446 70 b 359 159 394 72 359 113 b 368 201 359 173 362 187 b 442 245 382 229 412 245 b 455 244 446 245 451 245 b 460 244 458 244 460 244 b 460 244 460 244 460 244 b 454 248 460 244 458 245 b 325 291 417 276 372 291 b 285 287 313 291 299 290 b 144 -2 183 269 144 190 b 281 -290 144 -208 179 -280 b 304 -291 289 -291 298 -291 b 524 -105 412 -291 506 -212 b 541 -84 526 -88 530 -84 b 556 -101 551 -84 556 -90 b 549 -138 556 -111 553 -122 b 334 -322 521 -237 435 -310 b 302 -324 323 -323 313 -324 b 13 -101 172 -324 54 -234 b -1 -1 4 -68 -1 -34 b 294 322 -1 161 121 303 "},v42:{x_min:-348.4375,x_max:24.5,ha:25,o:"m -330 155 b -322 156 -329 156 -326 156 b -315 156 -319 156 -317 156 b -298 147 -311 155 -308 154 b -19 30 -224 98 -122 55 l 2 26 b 24 -1 17 22 24 13 b 2 -27 24 -15 17 -23 l -19 -31 b -298 -148 -122 -56 -224 -99 b -322 -158 -313 -158 -315 -158 b -348 -131 -338 -158 -348 -145 b -344 -117 -348 -127 -347 -122 b -328 -104 -341 -112 -338 -111 b -127 -8 -269 -65 -202 -33 b -106 0 -115 -4 -106 -1 b -127 6 -106 0 -115 2 b -328 102 -202 31 -269 63 b -344 116 -338 109 -341 111 b -348 130 -347 120 -348 124 b -330 155 -348 141 -341 152 "},v43:{x_min:-442.359375,x_max:441,ha:450,o:"m -31 487 b -1 488 -21 488 -10 488 b 434 104 216 488 397 330 b 441 27 438 79 441 47 b 439 12 441 20 439 15 b 419 0 435 4 427 0 b 404 5 413 0 408 1 b 398 30 400 11 398 13 b 0 351 390 213 213 351 b -59 348 -20 351 -39 349 b -400 30 -251 324 -393 191 b -405 5 -400 13 -401 11 b -420 0 -409 1 -415 0 b -441 12 -428 0 -436 4 b -442 27 -441 15 -442 20 b -435 104 -442 47 -439 79 b -31 487 -401 316 -235 474 m -13 131 b -1 133 -9 133 -5 133 b 51 105 19 133 39 123 b 61 70 58 95 61 83 b 51 34 61 58 58 45 b -1 6 39 16 19 6 b -46 27 -17 6 -34 13 b -62 69 -57 38 -62 54 b -13 131 -62 98 -44 124 "},v44:{x_min:-21.78125,x_max:251.8125,ha:257,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 383 20 616 20 616 l 20 148 l 21 151 b 137 199 59 183 99 199 b 182 191 152 199 167 197 b 251 84 227 176 251 134 b 228 0 251 58 243 29 b 100 -142 206 -40 178 -72 l 23 -215 b 0 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 l -21 -212 l -21 201 l -21 616 l -20 620 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 "},v45:{x_min:-402.890625,x_max:401.53125,ha:410,o:"m -10 273 b -4 274 -9 273 -6 274 b 16 262 4 274 12 269 b 17 158 17 259 17 259 l 17 56 l 62 112 b 117 174 110 172 110 172 b 122 174 118 174 119 174 b 132 173 125 174 129 173 b 295 11 134 172 171 134 l 307 -1 l 336 34 b 374 76 366 72 368 74 b 381 77 375 77 378 77 b 401 56 392 77 401 68 b 400 48 401 54 401 51 b 223 -172 397 41 230 -166 b 210 -176 220 -174 215 -176 b 201 -174 206 -176 204 -176 b 112 -87 198 -173 178 -152 b 27 0 65 -38 27 0 b 21 -6 27 0 24 -2 l 17 -12 l 17 -147 b 17 -210 17 -173 17 -194 b 10 -292 17 -297 16 -287 b -2 -299 6 -297 2 -299 b -21 -287 -10 -299 -19 -295 b -24 -174 -23 -284 -23 -284 l -24 -63 l -66 -117 b -121 -176 -110 -170 -114 -176 b -125 -176 -122 -176 -123 -176 b -296 -12 -134 -174 -125 -184 l -308 0 l -337 -34 b -375 -77 -367 -73 -370 -76 b -382 -79 -377 -79 -379 -79 b -402 -58 -393 -79 -402 -69 b -401 -49 -402 -55 -402 -52 b -224 170 -398 -43 -231 165 b -212 174 -221 173 -216 174 b -202 173 -208 174 -205 174 b -39 11 -200 172 -151 122 l -28 -1 l -25 1 l -24 4 l -24 130 b -23 260 -24 256 -24 258 b -10 273 -20 266 -16 270 "},v46:{x_min:0,x_max:627.46875,ha:640,o:"m 306 190 b 314 191 308 191 311 191 b 326 184 318 191 322 190 l 336 173 b 510 52 377 127 442 80 b 515 49 513 51 515 49 b 611 16 537 40 579 24 b 627 0 624 13 627 9 b 607 -18 627 -11 624 -13 b 330 -181 490 -49 389 -109 b 314 -192 323 -190 319 -192 b 306 -191 311 -192 308 -192 b 294 -177 302 -188 302 -188 b 257 -140 287 -170 265 -148 b 19 -18 193 -84 114 -44 b 0 0 2 -13 0 -11 b 16 16 0 9 2 13 b 110 49 47 24 89 40 b 117 52 111 49 114 51 b 145 65 126 56 130 58 b 281 163 200 93 245 124 b 300 186 288 170 291 174 b 306 190 300 187 303 188 m 317 137 b 313 142 315 141 314 142 b 308 137 313 142 311 141 b 161 4 276 84 220 33 b 155 0 159 1 155 0 b 163 -4 155 0 159 -2 b 308 -138 220 -34 276 -84 b 313 -142 311 -141 313 -142 b 317 -138 314 -142 315 -141 b 464 -4 351 -84 406 -34 b 470 0 468 -2 470 0 b 464 4 470 0 468 1 b 317 137 406 33 351 84 "},v47:{x_min:-24.5,x_max:315.78125,ha:322,o:"m -24 -145 l -24 -5 l -20 -5 b 1 -26 -10 -5 -6 -9 b 175 -241 31 -86 96 -166 b 314 -548 259 -323 304 -420 b 315 -589 315 -555 315 -571 b 314 -630 315 -606 315 -623 b 298 -730 311 -664 306 -699 l 295 -742 l 296 -748 b 314 -850 304 -778 311 -813 b 315 -892 315 -857 315 -874 b 314 -932 315 -909 315 -925 b 298 -1032 311 -967 306 -1002 l 295 -1045 l 296 -1050 b 314 -1153 304 -1081 311 -1115 b 315 -1193 315 -1160 315 -1177 b 314 -1235 315 -1211 315 -1228 b 217 -1526 306 -1338 270 -1444 b 201 -1533 213 -1532 208 -1533 b 182 -1522 193 -1533 185 -1529 b 179 -1514 181 -1518 179 -1517 b 189 -1489 179 -1508 182 -1501 b 266 -1217 240 -1403 266 -1308 b 262 -1156 266 -1196 265 -1177 b 110 -907 247 -1043 190 -950 b 0 -889 87 -895 50 -889 l -1 -889 l -24 -889 l -24 -749 l -24 -610 l -20 -610 b 1 -631 -10 -610 -6 -614 b 175 -846 31 -691 96 -771 b 259 -956 213 -884 236 -914 b 265 -966 262 -961 264 -966 b 265 -966 265 -966 265 -966 b 265 -953 265 -964 265 -959 b 266 -920 266 -943 266 -932 b 262 -853 266 -898 265 -873 b 110 -605 247 -741 190 -648 b 0 -587 87 -592 50 -587 l -1 -587 l -24 -587 l -24 -448 l -24 -308 l -20 -308 b 1 -328 -10 -308 -6 -312 b 175 -544 31 -388 96 -469 b 259 -655 213 -581 236 -612 b 265 -663 262 -659 264 -663 b 265 -663 265 -663 265 -663 b 265 -650 265 -663 265 -657 b 266 -617 266 -641 266 -630 b 262 -551 266 -595 265 -570 b 110 -303 247 -438 190 -345 b 0 -284 87 -290 50 -284 l -1 -284 l -24 -284 l -24 -145 "},v49:{x_min:0,x_max:630.203125,ha:643,o:"m 308 204 b 314 205 310 205 313 205 b 326 201 319 205 323 204 b 355 154 328 199 338 180 b 401 83 362 142 392 95 l 409 72 b 431 41 412 66 424 49 b 619 -174 498 -51 570 -134 b 630 -192 626 -180 630 -186 b 626 -202 630 -195 628 -199 b 616 -206 623 -205 620 -206 b 552 -188 608 -206 592 -202 b 310 -155 488 -169 392 -155 b 268 -156 295 -155 281 -155 b 77 -188 197 -161 126 -173 b 13 -206 35 -202 20 -206 b 9 -206 12 -206 10 -206 b 0 -191 2 -202 0 -197 b 8 -176 0 -186 2 -180 b 204 49 58 -136 138 -43 l 220 72 l 227 83 b 295 188 245 108 281 166 b 308 204 299 197 304 202 m 315 147 b 314 147 315 147 314 147 b 314 147 314 147 314 147 b 306 129 314 145 310 138 l 296 105 b 281 72 292 97 284 77 l 274 56 b 181 -123 247 -4 212 -72 l 174 -134 l 176 -133 b 314 -123 215 -127 272 -123 b 451 -133 356 -123 413 -127 l 454 -134 l 449 -123 b 353 56 417 -72 381 -4 l 347 72 b 332 105 344 77 336 97 l 322 129 b 315 147 318 138 315 145 "},v4a:{x_min:70.78125,x_max:378.390625,ha:315,o:"m 246 373 b 254 373 249 373 251 373 b 372 324 303 373 360 351 b 378 302 377 317 378 309 b 338 251 378 278 362 255 b 328 249 334 249 332 249 b 283 294 303 249 283 270 b 288 315 283 301 284 308 b 289 319 289 317 289 319 b 289 319 289 319 289 319 b 283 320 289 320 287 320 b 270 322 279 322 274 322 b 206 288 242 322 215 308 b 206 283 206 287 206 285 b 257 223 206 267 230 238 b 284 206 272 213 277 210 b 351 90 328 173 351 130 b 340 47 351 74 348 59 b 205 -30 314 -2 264 -30 b 182 -29 198 -30 190 -30 b 84 15 147 -24 103 -5 b 70 48 74 24 70 36 b 108 99 70 70 85 94 b 121 102 112 101 117 102 b 167 56 147 102 167 80 b 159 31 167 48 164 40 l 156 26 l 157 26 b 190 20 167 22 178 20 b 220 26 201 20 212 22 b 258 65 243 34 258 51 b 257 70 258 66 258 69 b 204 126 249 94 234 109 b 114 258 148 158 114 209 b 125 302 114 273 118 288 b 246 373 147 342 193 370 "},v4b:{x_min:0,x_max:503.609375,ha:514,o:"m 274 430 b 277 430 276 430 277 430 b 310 394 296 430 310 415 b 308 383 310 391 308 387 b 306 367 307 381 307 374 b 236 120 298 305 272 210 b 40 -273 189 -5 125 -134 b 20 -287 35 -283 27 -287 b 5 -281 14 -287 9 -285 b 0 -267 1 -277 0 -273 b 9 -242 0 -262 2 -255 b 246 395 137 -12 232 242 b 274 430 249 416 257 427 m 468 430 b 472 430 469 430 470 430 b 503 394 490 430 503 415 b 502 383 503 391 503 387 b 499 367 502 381 500 374 b 431 120 491 305 465 210 b 234 -273 382 -5 318 -134 b 213 -287 228 -283 220 -287 b 198 -281 208 -287 202 -285 b 193 -267 194 -277 193 -273 b 202 -242 193 -262 196 -255 b 439 395 330 -12 426 242 b 468 430 442 416 451 427 "},v4d:{x_min:-311.6875,x_max:310.328125,ha:317,o:"m -9 388 b -2 390 -8 390 -5 390 b 5 388 1 390 4 390 b 19 378 10 387 16 383 b 23 333 23 371 23 371 b 24 298 23 299 24 298 b 81 276 34 298 65 285 b 213 91 145 240 190 177 b 224 24 217 76 224 36 b 257 24 224 24 235 24 b 299 19 292 24 292 24 b 310 -1 306 15 310 6 b 299 -23 310 -11 306 -19 b 257 -27 292 -27 292 -27 b 224 -29 235 -27 224 -29 b 213 -95 224 -40 217 -80 b 81 -280 190 -181 145 -244 b 24 -301 65 -290 34 -301 b 23 -335 24 -301 23 -303 l 23 -340 b 17 -381 23 -374 23 -374 b -1 -391 13 -388 5 -391 b -21 -381 -9 -391 -17 -388 b -27 -340 -27 -374 -27 -374 l -27 -335 b -28 -301 -27 -303 -27 -301 b -85 -280 -38 -301 -69 -290 b -217 -95 -149 -244 -194 -181 b -228 -29 -221 -80 -228 -40 b -259 -27 -228 -29 -238 -27 b -300 -23 -294 -27 -294 -27 b -311 -2 -307 -19 -311 -11 b -294 23 -311 8 -304 19 b -259 24 -291 23 -284 24 b -228 24 -239 24 -228 24 b -217 91 -228 36 -221 76 b -85 276 -194 177 -149 240 b -28 298 -69 285 -38 298 b -27 333 -27 298 -27 299 b -27 371 -27 362 -27 369 b -9 388 -24 378 -17 385 m -27 136 b -28 247 -27 197 -28 247 b -61 216 -31 247 -53 226 b -123 33 -95 172 -121 98 l -125 24 l -76 24 l -27 24 l -27 136 m 29 242 b 24 247 27 245 24 247 b 23 136 24 247 23 197 l 23 24 l 72 24 l 121 24 l 119 33 b 29 242 115 116 77 206 m -27 -140 l -27 -27 l -76 -27 l -125 -27 l -123 -36 b -61 -220 -121 -102 -95 -176 b -28 -251 -53 -230 -31 -251 b -27 -140 -28 -251 -27 -201 m 119 -36 l 121 -27 l 72 -27 l 23 -27 l 23 -140 b 24 -251 23 -201 24 -251 b 57 -220 27 -251 49 -230 b 119 -36 91 -176 117 -102 "},v4e:{x_min:0,x_max:239.5625,ha:244,o:"m 10 460 b 20 462 13 462 14 462 b 39 449 28 462 35 458 l 40 446 l 40 326 b 40 205 40 259 40 205 b 127 227 40 205 80 215 b 220 249 196 244 213 249 b 227 247 224 249 225 248 b 238 237 231 245 235 241 l 239 233 l 239 -106 l 239 -448 l 238 -451 b 219 -463 234 -459 225 -463 b 198 -451 210 -463 202 -459 l 197 -448 l 197 -324 b 197 -201 197 -248 197 -201 b 110 -223 196 -201 157 -210 b 17 -245 42 -240 24 -245 b 10 -242 13 -245 13 -244 b 0 -233 6 -241 2 -237 l 0 -230 l 0 108 l 0 446 l 0 449 b 10 460 2 453 6 458 m 197 22 b 197 70 197 41 197 58 b 196 116 197 113 197 116 l 196 116 b 118 97 196 116 160 106 l 40 77 l 40 -18 b 40 -112 40 -69 40 -112 l 119 -93 l 197 -73 l 197 22 "},v51:{x_min:-1.359375,x_max:455.96875,ha:465,o:"m 352 541 b 357 542 353 542 355 542 b 377 530 364 542 372 537 l 378 526 l 378 394 l 379 262 l 404 266 b 436 270 420 269 430 270 b 450 265 443 270 446 269 b 455 220 455 259 455 260 l 455 208 l 455 161 l 454 156 b 411 140 449 147 447 147 b 378 133 393 137 379 134 b 378 68 378 133 378 106 b 378 22 378 54 378 38 l 379 -87 l 404 -83 b 436 -79 420 -80 430 -79 b 450 -84 443 -79 446 -80 b 455 -129 455 -90 455 -88 l 455 -141 l 455 -188 l 454 -192 b 413 -209 449 -202 447 -202 b 382 -215 398 -212 383 -215 l 378 -215 l 378 -345 l 378 -380 b 375 -485 378 -484 378 -480 b 357 -494 371 -491 364 -494 b 340 -485 351 -494 344 -491 b 336 -383 337 -480 336 -484 l 336 -349 l 336 -223 l 334 -223 b 291 -231 334 -223 314 -227 l 247 -240 l 247 -371 l 246 -503 l 245 -506 b 225 -519 242 -514 234 -519 b 206 -506 219 -519 210 -514 l 205 -503 l 205 -376 l 205 -248 l 160 -256 l 115 -265 l 115 -396 l 115 -527 l 114 -531 b 95 -544 110 -539 102 -544 b 76 -531 87 -544 78 -539 l 73 -527 l 73 -399 b 73 -273 73 -330 73 -273 b 49 -277 73 -273 61 -274 b 17 -281 32 -280 24 -281 b 4 -276 10 -281 8 -280 b -1 -234 0 -269 -1 -272 b 0 -219 -1 -229 0 -224 l 0 -170 l 1 -167 b 10 -158 2 -163 6 -159 b 49 -149 13 -156 16 -155 l 73 -145 l 73 -34 b 73 76 73 26 73 76 b 49 72 73 76 61 74 b 17 68 32 69 24 68 b 4 73 10 68 8 69 b -1 115 0 80 -1 77 b 0 130 -1 120 0 124 l 0 179 l 1 181 b 10 191 2 186 6 190 b 49 199 13 192 16 194 l 73 204 l 73 338 b 73 374 73 352 73 365 b 77 483 73 484 73 477 b 95 492 81 489 88 492 b 111 483 100 492 107 489 b 115 378 115 477 115 483 l 115 342 b 117 212 115 223 115 212 b 204 229 117 212 200 227 l 205 229 l 205 365 l 205 502 l 206 505 b 225 517 210 513 219 517 b 245 505 234 517 242 513 l 246 502 l 247 369 l 247 237 l 249 237 b 336 254 253 238 336 254 b 337 390 336 254 337 302 l 337 526 l 338 530 b 352 541 341 535 347 539 m 336 15 b 336 126 336 102 336 126 l 336 126 b 291 117 336 126 315 122 l 247 109 l 247 -1 l 247 -112 l 249 -112 b 336 -95 253 -111 336 -95 b 336 15 336 -95 336 -56 m 205 -120 b 205 -55 205 -120 205 -93 b 205 -9 205 -41 205 -24 l 205 101 l 160 93 l 115 84 l 115 -26 b 115 -83 115 -49 115 -69 b 117 -137 115 -133 115 -137 b 205 -120 118 -137 204 -120 "},v52:{x_min:-10.890625,x_max:298.078125,ha:294,o:"m 138 473 b 142 474 140 473 141 474 b 164 459 148 474 153 470 b 191 402 183 442 191 423 b 181 353 191 388 187 371 b 178 349 179 352 178 349 b 179 348 178 348 179 348 b 185 349 181 348 182 348 b 255 376 210 355 234 363 b 272 381 264 381 266 381 b 298 355 287 381 298 370 b 288 330 298 348 298 345 b 171 34 238 254 194 141 b 166 13 168 16 168 16 b 144 1 161 5 152 1 b 121 15 134 1 125 5 b 115 33 119 18 117 24 b 0 330 91 145 49 252 b -10 355 -9 345 -10 348 b 13 381 -10 371 0 381 b 31 376 19 381 25 380 b 132 345 61 358 103 345 l 136 345 l 137 355 b 145 378 138 359 142 370 b 152 415 149 394 152 405 b 137 452 152 427 148 438 b 133 464 134 458 133 460 b 138 473 133 467 134 470 "},v53:{x_min:0,x_max:902.421875,ha:921,o:"m 17 240 b 24 241 19 241 21 241 b 32 240 28 241 31 241 b 46 229 38 238 43 234 b 50 88 50 223 50 237 b 50 -1 50 63 50 34 b 50 -90 50 -36 50 -65 b 46 -231 50 -238 50 -224 b 25 -242 42 -238 34 -242 b 0 -224 14 -242 4 -235 b 0 2 0 -222 0 -108 b 0 223 0 112 0 220 b 17 240 2 230 9 237 m 110 240 b 118 241 111 241 114 241 b 126 240 121 241 123 241 b 142 223 133 237 140 230 b 144 123 144 220 144 205 b 144 29 144 45 144 29 b 144 29 144 29 144 29 b 393 183 166 106 264 167 b 450 186 412 184 431 186 b 756 29 600 186 732 120 b 756 29 756 29 756 29 b 758 123 758 29 758 45 b 760 227 758 226 758 223 b 784 241 766 237 774 241 b 804 229 792 241 800 237 b 809 88 808 223 809 237 l 809 -1 l 809 -90 b 804 -231 809 -238 808 -224 b 784 -242 800 -238 792 -242 b 762 -231 775 -242 766 -238 b 758 -124 756 -224 758 -231 b 756 -30 758 -47 758 -30 b 756 -30 756 -30 756 -30 b 509 -184 736 -108 637 -169 b 450 -187 488 -187 469 -187 b 144 -30 300 -187 168 -122 b 144 -30 144 -30 144 -30 b 144 -124 144 -30 144 -47 b 140 -231 144 -231 144 -224 b 118 -242 134 -238 126 -242 b 92 -224 107 -242 96 -235 b 92 2 92 -222 92 -108 b 92 223 92 112 92 220 b 110 240 95 230 102 237 m 432 161 b 413 162 426 162 420 162 b 313 41 351 162 313 109 b 347 -73 313 5 323 -34 b 487 -163 385 -133 439 -163 b 578 -97 526 -163 562 -142 b 588 -43 585 -80 588 -62 b 432 161 588 47 518 147 m 868 240 b 876 241 869 241 872 241 b 884 240 879 241 882 241 b 898 229 890 238 894 234 b 902 88 902 223 902 237 l 902 -1 l 902 -90 b 898 -231 902 -238 902 -224 b 876 -242 892 -238 884 -242 b 852 -224 865 -242 854 -235 b 850 2 850 -222 850 -108 b 852 223 850 112 850 220 b 868 240 853 230 860 237 "},v54:{x_min:-24.5,x_max:317.140625,ha:324,o:"m -24 -161 l -24 -5 l -20 -5 b 0 -24 -9 -5 -2 -12 b 171 -315 21 -124 84 -233 b 317 -660 268 -406 317 -531 b 187 -1014 317 -782 274 -909 b 161 -1034 172 -1034 171 -1034 b 141 -1013 149 -1034 141 -1025 b 152 -991 141 -1004 142 -1002 b 266 -682 228 -899 266 -788 b 174 -430 266 -588 236 -498 b -23 -317 136 -388 66 -348 b -24 -161 -23 -316 -24 -285 "},v55:{x_min:0,x_max:551.25,ha:563,o:"m 289 644 b 304 645 294 645 299 645 b 404 566 349 645 392 613 b 406 541 405 557 406 549 b 379 471 406 514 397 489 l 377 467 l 382 470 b 509 591 438 485 485 531 b 513 601 510 595 513 599 b 530 609 518 607 524 609 b 551 588 540 609 551 602 b 200 -605 551 584 204 -599 b 182 -616 197 -612 190 -616 b 163 -602 174 -616 166 -610 b 161 -598 161 -601 161 -601 b 217 -402 161 -589 170 -562 b 272 -213 247 -298 272 -213 b 272 -213 272 -213 272 -213 b 264 -219 272 -213 268 -216 b 140 -262 227 -247 182 -262 b 36 -226 102 -262 65 -249 b 0 -145 12 -206 0 -176 b 17 -84 0 -124 5 -104 b 103 -38 38 -54 70 -38 b 191 -91 137 -38 172 -56 b 205 -141 201 -106 205 -124 b 178 -212 205 -167 196 -194 l 175 -215 l 182 -213 b 307 -93 236 -198 284 -151 b 372 129 308 -88 372 127 b 372 129 372 129 372 129 b 364 122 372 129 368 126 b 240 80 328 94 283 80 b 137 115 202 80 166 91 b 99 195 112 136 99 165 b 118 256 99 217 106 238 b 204 303 138 287 171 303 b 292 249 238 303 273 285 b 306 199 302 234 306 217 b 279 129 306 173 296 148 l 276 126 l 281 127 b 408 248 336 142 385 190 b 473 470 409 254 473 469 b 473 470 473 470 473 470 b 465 464 473 470 469 467 b 341 421 428 435 383 421 b 236 458 303 421 266 433 b 200 537 212 478 200 508 b 289 644 200 585 234 635 "},v58:{x_min:-21.78125,x_max:367.5,ha:375,o:"m 259 1553 b 265 1553 261 1553 264 1553 b 288 1540 272 1553 277 1550 b 367 1351 340 1493 367 1424 b 336 1221 367 1308 357 1263 l 332 1211 l 333 1208 b 367 1077 356 1170 367 1124 b 336 945 367 1032 357 986 l 332 935 l 333 932 b 367 800 356 893 367 848 b 336 669 367 756 357 710 l 332 659 l 333 656 b 367 523 356 617 367 571 b 345 412 367 485 360 446 b 231 273 322 356 284 310 b -1 19 121 195 27 93 b -17 4 -4 11 -10 5 l -21 4 l -21 134 l -21 265 l -17 265 b 133 291 20 265 96 278 b 318 537 245 328 318 433 b 307 603 318 559 315 582 b 303 614 304 612 304 614 b 298 609 302 614 300 613 b 231 549 281 589 258 567 b -1 295 121 471 27 369 b -17 280 -4 287 -10 281 l -21 280 l -21 410 l -21 541 l -17 541 b 133 567 20 541 96 555 b 318 813 245 605 318 709 b 307 880 318 835 315 859 b 303 891 304 888 304 891 b 298 885 302 891 300 888 b 231 825 281 866 258 843 b -1 571 121 748 27 645 b -17 556 -4 563 -10 557 l -21 556 l -21 687 l -21 817 l -17 817 b 133 843 20 817 96 830 b 318 1089 245 881 318 985 b 307 1156 318 1111 315 1134 b 303 1167 304 1164 304 1167 b 298 1161 302 1167 300 1164 b 231 1102 281 1140 258 1120 b -1 848 121 1024 27 921 b -17 832 -4 839 -10 834 l -21 832 l -21 963 l -21 1093 l -17 1093 b 114 1113 12 1093 78 1103 b 313 1314 215 1142 289 1218 b 318 1364 317 1331 318 1347 b 255 1511 318 1422 295 1478 b 243 1532 247 1519 243 1525 b 259 1553 243 1540 250 1550 "},v59:{x_min:0,x_max:464.140625,ha:474,o:"m 0 0 l 0 347 l 76 347 l 153 347 l 153 0 l 153 -348 l 76 -348 l 0 -348 l 0 0 m 308 -1 l 308 347 l 386 347 l 464 347 l 464 -1 l 464 -348 l 386 -348 l 308 -348 l 308 -1 "},v5a:{x_min:-171.5,x_max:170.140625,ha:174,o:"m -6 566 b 0 567 -5 567 -2 567 b 14 556 6 567 12 563 b 92 285 14 555 50 433 b 170 13 166 33 170 19 b 168 13 170 13 170 13 b 161 1 168 8 167 4 l 159 0 l 122 0 l 84 0 l 81 1 b 21 195 76 5 78 -5 b -32 381 -8 297 -32 381 b -87 197 -32 381 -57 298 b -141 8 -115 94 -140 9 b -155 0 -142 2 -149 0 b -171 15 -163 0 -171 5 b -14 556 -171 18 -24 528 b -6 566 -14 560 -10 564 "},v5b:{x_min:-441,x_max:439.640625,ha:449,o:"m -428 -2 b -421 0 -427 -1 -424 0 b -406 -6 -416 0 -409 -2 b -400 -31 -401 -12 -400 -15 b -1 -352 -392 -215 -215 -352 b 58 -349 19 -352 38 -351 b 398 -31 250 -326 392 -192 b 404 -6 398 -15 400 -12 b 419 -1 408 -2 413 -1 b 439 -13 427 -1 435 -5 b 439 -29 439 -16 439 -22 b 434 -105 439 -48 438 -80 b 0 -489 397 -333 213 -489 b -68 -484 -23 -489 -44 -488 b -441 -36 -280 -452 -436 -263 b -441 -30 -441 -34 -441 -31 b -428 -2 -441 -11 -439 -5 m -13 -9 b -1 -8 -9 -8 -5 -8 b 50 -36 19 -8 39 -19 b 61 -72 57 -47 61 -59 b 50 -106 61 -84 57 -97 b -1 -134 39 -124 19 -134 b -46 -115 -17 -134 -34 -129 b -62 -72 -57 -102 -62 -87 b -13 -9 -62 -44 -44 -16 "},v5c:{x_min:0,x_max:447.8125,ha:457,o:"m 0 -87 l 0 0 l 223 0 l 447 0 l 447 -87 l 447 -174 l 223 -174 l 0 -174 l 0 -87 "},v5d:{x_min:-1.359375,x_max:592.078125,ha:604,o:"m 280 692 b 295 694 283 692 289 694 b 310 692 300 694 307 692 b 357 630 340 684 357 657 b 336 580 357 612 351 594 b 311 538 321 566 311 549 b 352 492 311 512 330 492 b 366 495 357 492 362 492 b 397 553 390 503 397 517 b 415 603 397 576 402 591 b 460 623 427 617 443 623 b 509 599 479 623 498 614 b 522 559 518 587 522 573 b 494 506 522 538 513 519 b 451 495 481 498 473 496 b 415 488 432 495 426 494 b 394 449 404 483 394 464 b 394 448 394 448 394 448 l 394 440 l 397 433 b 428 409 404 420 413 413 b 438 408 431 408 435 408 b 479 431 450 408 462 415 b 528 455 495 448 510 455 b 548 452 534 455 541 453 b 592 391 577 442 592 416 b 549 331 592 365 577 340 b 528 327 541 328 534 327 b 479 351 510 327 495 335 b 438 374 464 367 450 374 b 417 369 431 374 424 373 b 394 333 402 360 394 348 b 400 312 394 326 396 319 b 451 287 408 294 420 288 b 513 258 484 285 499 278 b 522 223 519 247 522 234 b 461 159 522 190 496 159 b 449 161 457 159 453 159 b 397 229 416 167 397 191 b 366 288 397 265 390 278 b 352 290 362 290 357 290 b 315 262 336 290 321 280 b 311 245 313 256 311 251 b 334 204 311 233 318 220 b 355 170 348 190 351 184 b 357 152 356 166 357 159 b 355 136 357 147 356 140 b 295 88 345 104 321 88 b 232 152 264 88 232 112 b 255 204 232 174 238 186 b 279 244 273 222 279 231 l 279 245 b 238 290 279 270 259 290 b 224 288 234 290 228 290 b 193 229 200 278 193 265 b 141 161 193 191 174 167 b 129 159 137 159 133 159 b 68 223 93 159 68 190 b 77 258 68 234 70 247 b 138 287 91 278 106 285 b 185 302 166 287 175 291 b 196 333 193 312 196 323 b 174 369 196 347 187 360 b 152 374 166 373 159 374 b 111 351 140 374 126 367 b 62 327 95 335 80 327 b 51 328 58 327 54 327 b -1 391 16 334 -1 363 b 53 455 -1 420 17 449 b 62 455 57 455 59 455 b 111 431 80 455 95 448 b 152 408 127 415 140 408 b 161 409 155 408 159 408 b 193 433 176 413 186 420 l 196 440 l 196 448 b 196 451 196 449 196 449 b 190 471 196 459 194 463 b 137 495 182 489 167 495 l 134 495 l 134 495 b 68 560 95 495 68 521 b 129 623 68 596 95 623 b 144 621 134 623 138 623 b 193 553 175 614 193 589 b 224 495 193 517 200 503 b 238 492 228 492 234 492 b 279 538 259 492 279 512 b 254 580 279 549 269 566 b 232 630 239 594 232 612 b 280 692 232 657 250 684 m 307 456 b 295 458 303 458 299 458 b 230 391 258 458 230 426 b 236 360 230 381 231 371 b 295 324 249 337 272 324 b 353 360 318 324 341 337 b 360 391 357 370 360 381 b 307 456 360 421 340 451 "},v60:{x_min:-590.71875,x_max:589.359375,ha:601,o:"m -367 173 b -362 174 -366 174 -364 174 b -351 173 -357 174 -353 173 b -262 86 -348 172 -328 151 b -176 0 -216 37 -176 0 b -107 84 -176 0 -145 37 b -31 174 -36 173 -38 172 b -25 174 -29 174 -28 174 b -16 173 -23 174 -19 173 b 72 86 -13 172 6 151 b 157 0 119 37 157 0 b 227 84 159 0 189 37 b 303 174 298 173 296 172 b 308 174 304 174 307 174 b 318 173 313 174 317 173 b 481 11 322 172 357 134 l 494 -1 l 522 34 b 560 76 553 72 555 74 b 567 77 563 77 564 77 b 589 56 579 77 589 68 b 586 48 589 54 588 51 b 411 -172 583 41 416 -166 b 397 -176 406 -174 401 -176 b 387 -174 393 -176 390 -176 b 299 -87 386 -173 366 -152 b 213 0 253 -38 213 0 b 144 -86 213 0 182 -38 b 68 -174 73 -174 74 -173 b 62 -176 66 -176 65 -176 b 53 -174 59 -176 55 -174 b -35 -87 50 -173 29 -152 b -121 0 -83 -38 -121 0 b -190 -86 -122 0 -152 -38 b -266 -174 -261 -174 -259 -173 b -272 -176 -268 -176 -270 -176 b -281 -174 -276 -176 -280 -174 b -371 -86 -284 -173 -304 -152 b -457 0 -417 -38 -457 0 l -457 0 b -477 -26 -457 0 -470 -16 b -548 -227 -524 -88 -548 -161 b -536 -303 -548 -254 -544 -280 b -533 -317 -534 -309 -533 -313 b -553 -338 -533 -330 -541 -338 b -577 -315 -566 -338 -571 -333 b -590 -227 -586 -287 -590 -258 b -518 -9 -590 -154 -564 -77 b -465 56 -509 2 -504 8 l -402 134 b -367 173 -375 169 -372 172 "},v62:{x_min:46.28125,x_max:669.671875,ha:563,o:"m 183 376 b 189 376 185 376 187 376 b 212 374 197 376 208 376 b 265 337 234 369 253 355 b 274 317 268 331 273 320 b 274 316 274 317 274 316 b 280 323 276 316 276 319 b 311 358 288 337 299 348 b 319 366 315 360 318 365 b 356 376 326 373 340 376 b 382 371 364 376 374 374 b 428 337 400 366 417 352 b 436 317 431 331 436 320 b 438 316 436 317 436 316 b 442 323 438 316 439 319 b 475 358 451 337 462 348 b 483 366 477 360 481 365 b 518 376 488 373 503 376 b 544 373 528 376 536 376 b 604 285 579 360 604 326 b 597 249 604 273 601 258 b 543 63 596 247 544 70 b 541 54 543 61 541 55 b 540 44 540 51 540 47 b 552 23 540 33 545 23 b 552 23 552 23 552 23 b 647 126 586 29 627 72 b 658 138 651 136 653 138 b 660 138 660 138 660 138 b 669 129 666 137 669 136 b 654 88 669 122 665 109 b 562 -12 631 43 602 9 l 549 -19 b 521 -27 540 -24 530 -27 b 447 30 490 -27 458 -4 b 443 58 445 38 443 48 b 450 93 443 72 446 84 b 504 278 453 97 504 272 b 507 288 506 283 506 287 b 509 298 507 292 509 295 b 491 326 509 310 502 320 b 487 327 490 327 488 327 b 479 324 484 327 483 326 b 441 270 462 316 443 288 b 435 249 441 265 436 254 b 398 127 434 248 419 195 b 362 4 379 61 362 5 b 328 -1 359 -1 362 -1 b 314 -1 323 -1 319 -1 b 302 -1 310 -1 306 -1 b 266 4 266 -1 269 -1 b 265 6 265 5 265 5 b 303 144 265 13 272 34 b 343 278 325 216 343 276 b 344 288 343 281 344 285 b 345 298 345 291 345 295 b 330 326 345 310 340 320 b 323 327 328 327 325 327 b 317 324 322 327 321 326 b 279 270 300 316 281 288 b 273 249 279 265 274 254 b 236 127 272 248 255 195 b 200 4 216 61 200 5 b 164 -1 197 -1 198 -1 b 151 -1 161 -1 156 -1 b 140 -1 147 -1 142 -1 b 103 4 104 -1 106 -1 b 103 6 103 5 103 5 b 141 144 103 13 108 34 b 181 278 161 216 179 276 b 182 288 181 281 181 285 b 183 298 182 291 183 295 b 168 324 183 310 178 320 b 160 327 166 326 163 327 b 141 320 156 327 151 324 b 69 230 112 305 85 272 b 57 215 65 217 62 215 b 55 215 57 215 55 215 b 46 224 49 215 46 217 b 59 260 46 231 50 242 b 151 363 81 306 112 341 b 161 369 155 365 160 367 b 183 376 166 371 174 374 "},v68:{x_min:-597.53125,x_max:596.171875,ha:608,o:"m -533 324 b -525 327 -530 326 -528 327 b -504 305 -514 327 -504 317 b -504 305 -504 305 -504 305 b -513 284 -504 299 -504 299 b -556 112 -541 226 -556 167 b -545 33 -556 84 -552 58 b -524 -20 -541 15 -532 -9 l -522 -23 l -491 15 l -413 111 b -355 174 -367 169 -363 174 b -351 174 -353 174 -352 174 b -254 86 -343 174 -348 179 b -168 -1 -208 37 -168 -1 b -100 84 -168 -1 -137 37 b -23 173 -28 173 -29 172 b -19 174 -21 174 -20 174 b -8 173 -14 174 -10 173 b 155 11 -5 172 43 123 l 166 -1 l 168 1 l 170 4 l 170 130 b 171 260 170 256 170 258 b 191 274 175 269 183 274 b 205 267 196 274 201 272 b 212 158 212 262 210 273 l 212 56 l 257 112 b 311 173 304 172 304 172 b 317 174 313 174 314 174 b 326 173 319 174 323 173 b 490 11 329 172 366 134 l 502 -1 l 530 34 b 568 76 560 72 563 74 b 575 77 570 77 573 77 b 596 56 586 77 596 68 b 594 48 596 54 596 51 b 417 -172 592 41 424 -166 b 405 -176 415 -174 409 -176 b 396 -174 401 -176 398 -176 b 307 -87 393 -173 372 -152 b 221 -1 259 -38 221 -1 b 216 -6 221 -1 219 -2 l 212 -12 l 212 -147 b 212 -210 212 -173 212 -194 b 205 -292 212 -297 210 -287 b 191 -299 201 -297 196 -299 b 172 -287 183 -299 175 -295 b 170 -174 171 -284 171 -284 l 170 -63 l 127 -117 b 73 -176 84 -170 80 -176 b 68 -176 72 -176 70 -176 b -27 -87 59 -174 65 -180 b -114 0 -74 -38 -112 0 b -182 -86 -114 0 -145 -38 b -258 -174 -253 -174 -253 -173 b -264 -176 -259 -176 -262 -176 b -274 -174 -268 -176 -272 -174 b -438 -11 -277 -173 -348 -102 l -449 0 l -479 -37 b -524 -80 -513 -80 -514 -80 l -524 -80 b -553 -52 -534 -80 -540 -74 b -597 109 -583 -8 -597 48 b -560 280 -597 165 -585 224 b -533 324 -548 310 -540 322 "},v6c:{x_min:-1.359375,x_max:193.28125,ha:197,o:"m 78 233 b 87 233 81 233 84 233 b 187 140 132 233 174 195 b 193 102 190 127 193 115 b 43 -113 193 22 136 -62 b 27 -119 36 -116 31 -119 b 19 -108 21 -119 19 -115 b 29 -97 19 -102 20 -101 b 102 13 73 -72 102 -27 b 92 51 102 26 98 40 l 91 54 l 84 54 b 8 104 53 54 21 74 b -1 142 1 116 -1 130 b 78 233 -1 187 31 227 "},v6d:{x_min:-590.71875,x_max:589.359375,ha:601,o:"m 544 335 b 553 337 548 337 551 337 b 575 313 563 337 570 330 b 589 226 583 285 589 256 b 517 8 589 152 563 76 b 464 -58 507 -4 503 -9 l 401 -136 b 362 -176 372 -172 370 -176 b 357 -176 360 -176 359 -176 b 261 -87 349 -174 355 -180 b 175 0 215 -38 175 0 b 106 -86 175 0 144 -38 b 29 -174 35 -174 36 -173 b 24 -176 28 -176 27 -176 b 14 -174 21 -176 17 -174 b -73 -87 12 -173 -8 -152 b -159 0 -121 -38 -159 0 b -228 -86 -160 0 -190 -38 b -304 -174 -299 -174 -298 -173 b -310 -176 -306 -176 -308 -176 b -319 -174 -314 -176 -318 -174 b -483 -12 -323 -173 -359 -137 l -495 0 l -524 -34 b -562 -77 -553 -73 -556 -76 b -568 -79 -564 -79 -566 -79 b -590 -58 -581 -79 -590 -69 b -588 -49 -590 -55 -589 -52 b -412 170 -585 -43 -417 165 b -398 174 -408 173 -402 174 b -389 173 -394 174 -392 174 b -300 86 -387 172 -366 151 b -215 -1 -254 37 -215 -1 b -145 84 -215 -1 -183 37 b -69 173 -74 173 -76 172 b -63 174 -68 174 -66 174 b -54 173 -61 174 -57 173 b 34 86 -51 172 -31 151 b 119 -1 81 37 119 -1 b 189 84 121 -1 151 37 b 265 173 259 173 258 172 b 270 174 266 174 269 174 b 280 173 274 174 279 173 b 370 84 283 172 303 151 b 455 -1 416 37 455 -1 l 455 -1 b 476 24 455 -1 469 15 b 547 226 522 87 547 159 b 534 302 547 252 543 278 b 532 317 533 308 532 313 b 544 335 532 326 536 333 "},v6f:{x_min:-80.3125,x_max:78.9375,ha:81,o:"m 63 191 b 69 192 65 192 66 192 b 77 188 72 192 76 191 b 78 183 78 187 78 186 b 74 158 78 179 77 172 l 66 115 b 9 -161 49 30 10 -158 b -10 -187 6 -172 -1 -181 b -34 -194 -17 -191 -25 -194 b -80 -147 -58 -194 -80 -174 b -80 -141 -80 -144 -80 -142 b 9 70 -80 -134 -73 -117 l 49 163 b 63 191 59 188 61 190 "},v70:{x_min:0,x_max:436.921875,ha:446,o:"m 213 190 b 217 191 215 191 216 191 b 231 184 223 191 228 188 b 249 154 240 167 246 159 b 419 18 292 91 348 45 b 436 -1 435 11 436 8 b 424 -16 436 -9 434 -13 b 308 -87 394 -26 340 -59 b 231 -186 276 -117 257 -142 b 219 -192 228 -191 225 -192 b 198 -174 209 -192 208 -191 b 47 -33 161 -113 110 -63 b 10 -16 34 -26 17 -19 b 0 -1 2 -13 0 -9 b 17 18 0 8 1 11 b 198 173 95 48 156 101 b 213 190 206 187 208 188 "},v72:{x_min:-423.3125,x_max:421.9375,ha:431,o:"m -262 197 b -247 197 -257 197 -253 197 b -118 162 -210 197 -163 184 b 40 45 -61 134 -13 98 b 277 -95 119 -33 200 -81 b 289 -97 281 -97 285 -97 b 378 0 332 -97 371 -55 b 378 11 378 4 378 6 b 302 83 378 55 345 83 b 242 66 283 83 262 77 b 208 56 231 59 219 56 b 148 120 175 56 148 81 b 201 186 148 151 164 172 b 261 198 220 194 240 198 b 420 45 341 198 411 136 b 421 22 421 37 421 29 b 245 -199 421 -93 338 -199 b 238 -198 243 -199 240 -199 b -44 -47 148 -194 50 -141 b -250 86 -114 22 -183 66 b -295 94 -270 91 -283 94 b -315 91 -302 94 -307 94 b -381 4 -356 81 -381 43 b -355 -56 -381 -18 -372 -40 b -298 -81 -338 -73 -319 -81 b -246 -68 -283 -81 -265 -77 b -212 -58 -234 -61 -223 -58 b -178 -69 -200 -58 -189 -62 b -151 -122 -160 -81 -151 -101 b -171 -167 -151 -138 -157 -155 b -239 -195 -185 -181 -213 -192 b -257 -197 -245 -197 -250 -197 b -423 -5 -352 -197 -423 -109 b -412 65 -423 16 -419 40 b -262 197 -389 137 -329 188 "},v74:{x_min:-206.890625,x_max:428.75,ha:438,o:"m 389 -351 b 394 -351 390 -351 393 -351 b 428 -385 413 -351 428 -367 b 428 -394 428 -388 428 -391 b 394 -428 426 -406 421 -410 l 332 -473 l 269 -516 l 205 -560 l 141 -603 l 77 -648 l 13 -692 l -50 -737 l -114 -780 l -145 -802 b -171 -813 -157 -810 -163 -813 b -175 -813 -172 -813 -174 -813 b -206 -777 -194 -811 -206 -795 b -202 -760 -206 -771 -205 -766 b -87 -675 -197 -752 -206 -757 l -34 -639 l 83 -557 l 145 -514 l 209 -470 l 272 -427 b 389 -351 375 -356 381 -352 "},v75:{x_min:-149.71875,x_max:148.359375,ha:151,o:"m -137 381 b -130 383 -134 383 -133 383 b -111 371 -122 383 -114 378 b -55 224 -110 370 -85 305 b 0 80 -25 145 -1 80 b 54 224 0 80 24 145 b 112 377 114 384 110 373 b 127 384 118 381 122 384 b 148 362 138 384 148 374 l 148 356 l 83 183 b 16 9 47 88 17 11 b -1 0 12 2 5 0 b -14 5 -5 0 -10 1 b -84 183 -19 9 -13 -6 l -149 356 l -149 362 b -137 381 -149 371 -145 378 "},v78:{x_min:0,x_max:193.28125,ha:197,o:"m 85 514 b 95 517 88 517 89 517 b 114 505 103 517 110 513 l 115 502 l 115 376 b 115 249 115 306 115 249 b 141 258 117 249 127 252 l 167 266 l 172 266 b 190 254 181 265 187 262 l 193 251 l 193 202 l 193 188 b 187 147 193 149 191 152 b 147 130 183 142 182 141 l 115 119 l 115 9 b 115 -99 115 -51 115 -99 b 141 -91 115 -99 127 -95 b 171 -81 166 -81 167 -81 l 171 -81 b 191 -94 181 -81 189 -87 b 193 -142 191 -97 193 -120 b 191 -195 193 -167 191 -194 b 125 -227 187 -205 187 -204 l 115 -230 l 115 -366 l 115 -503 l 114 -506 b 95 -519 110 -514 102 -519 b 74 -506 87 -519 78 -514 l 73 -503 l 73 -374 b 73 -245 73 -260 73 -245 b 73 -245 73 -245 73 -245 b 55 -252 72 -245 63 -249 l 32 -260 b 19 -263 27 -262 23 -263 b 4 -256 13 -263 8 -260 b 0 -215 0 -251 0 -254 b 0 -199 0 -210 0 -206 l 0 -152 l 1 -149 b 8 -140 2 -145 5 -141 b 42 -127 9 -140 24 -133 l 73 -116 l 73 -5 b 73 23 73 4 73 15 b 73 105 73 70 73 105 b 49 97 73 105 61 101 b 17 88 32 91 23 88 b 4 95 10 88 8 91 b 0 137 0 101 0 98 b 0 151 0 141 0 145 l 0 199 l 1 202 b 43 224 5 212 5 212 l 73 234 l 73 367 l 73 502 l 74 505 b 85 514 77 509 81 513 "},v79:{x_min:-1.359375,x_max:899.703125,ha:918,o:"m 307 349 b 332 351 315 351 323 351 b 443 340 367 351 408 347 b 741 47 607 306 720 195 b 744 0 743 31 744 16 b 660 -303 744 -90 713 -206 b 28 -755 534 -531 304 -695 b 14 -756 23 -755 19 -756 b -1 -741 4 -756 -1 -750 b 21 -720 -1 -731 1 -728 b 567 -56 337 -601 548 -344 b 568 -11 568 -41 568 -24 b 442 285 568 129 525 233 b 325 319 406 308 367 319 b 93 177 232 319 137 266 b 84 154 91 170 84 155 b 84 154 84 154 84 154 b 88 156 84 154 85 155 b 159 177 110 170 134 177 b 257 134 194 177 231 162 b 294 41 281 108 294 73 b 171 -97 294 -24 246 -90 b 156 -98 166 -97 161 -98 b 6 74 73 -98 6 -22 b 6 80 6 76 6 79 b 307 349 10 223 141 340 m 839 215 b 845 216 841 216 842 216 b 862 213 852 216 860 215 b 899 163 887 206 899 184 b 872 117 899 145 890 127 b 847 111 865 112 856 111 b 808 130 833 111 818 117 b 796 162 800 140 796 151 b 839 215 796 187 812 212 m 839 -112 b 845 -112 841 -112 842 -112 b 862 -115 852 -112 860 -113 b 899 -165 887 -122 899 -144 b 872 -210 899 -183 890 -201 b 847 -217 865 -215 856 -217 b 808 -198 833 -217 818 -210 b 796 -165 800 -188 796 -177 b 839 -112 796 -140 812 -116 "},v7a:{x_min:-1.359375,x_max:386.5625,ha:394,o:"m 249 535 b 257 537 251 537 253 537 b 276 524 266 537 273 533 l 277 521 l 279 419 l 279 316 l 304 323 b 337 328 319 326 330 328 b 353 316 347 328 349 324 b 355 266 355 315 355 290 b 353 215 355 241 355 217 b 319 198 349 206 347 205 b 279 187 284 190 279 188 b 279 156 279 187 279 174 b 279 136 279 151 279 144 l 279 84 l 289 87 l 330 98 b 367 105 352 102 362 105 b 378 101 372 105 375 104 b 386 61 385 95 386 94 b 386 40 386 55 386 48 l 386 -5 l 385 -8 b 374 -19 383 -12 378 -18 b 291 -40 372 -19 347 -26 b 279 -43 284 -41 279 -43 b 279 -83 279 -43 279 -59 b 279 -95 279 -87 279 -91 l 279 -145 l 304 -140 b 337 -133 321 -136 330 -133 b 349 -140 343 -133 347 -136 b 355 -181 355 -145 355 -142 l 355 -197 l 355 -210 b 349 -252 355 -249 355 -247 b 300 -269 345 -258 347 -258 b 280 -274 291 -272 281 -273 l 279 -274 l 277 -378 l 277 -483 l 276 -487 b 257 -499 273 -495 265 -499 b 238 -487 249 -499 242 -495 l 236 -483 l 236 -384 l 236 -285 l 235 -285 l 212 -291 l 170 -301 b 148 -308 159 -305 148 -306 b 147 -415 147 -308 147 -313 l 147 -523 l 145 -526 b 126 -538 141 -534 133 -538 b 106 -526 118 -538 110 -534 l 104 -523 l 104 -420 b 103 -317 104 -326 104 -317 b 103 -317 103 -317 103 -317 b 50 -330 92 -322 54 -330 b 31 -317 42 -330 35 -326 b 29 -267 29 -315 29 -315 l 29 -219 l 32 -216 b 92 -192 36 -206 36 -206 l 104 -190 l 104 -138 b 103 -87 104 -91 104 -87 b 103 -87 103 -87 103 -87 b 88 -91 103 -87 96 -88 l 49 -101 b 17 -106 32 -105 23 -106 b 6 -102 13 -106 10 -105 b -1 -62 0 -97 -1 -95 b 0 -41 -1 -56 0 -49 l 0 4 l 1 6 b 10 16 2 11 6 15 b 91 37 12 18 38 24 l 104 41 l 104 93 b 103 144 104 140 104 144 b 103 144 103 144 103 144 b 50 131 92 141 54 131 b 31 144 42 131 35 137 b 29 195 29 147 29 148 l 29 242 l 32 245 b 92 269 36 255 36 255 l 104 273 l 104 377 l 104 481 l 106 485 b 126 498 110 492 118 498 b 134 495 129 498 132 496 b 145 485 138 494 142 489 l 147 481 l 147 383 l 147 283 l 152 284 b 190 294 155 285 171 290 l 230 303 l 236 305 l 236 413 l 236 521 l 238 524 b 249 535 240 528 243 533 m 236 126 b 235 177 236 154 236 177 l 235 177 b 213 172 235 177 225 174 l 170 161 b 147 155 157 158 147 155 b 147 124 147 155 147 142 b 147 102 147 117 147 111 l 147 52 l 153 54 l 228 72 l 236 74 l 236 126 m 236 -105 b 235 -54 236 -65 236 -54 l 235 -54 b 231 -55 235 -54 234 -54 b 172 -69 227 -55 204 -62 l 149 -76 l 147 -76 l 147 -127 l 147 -179 l 152 -177 b 190 -167 155 -177 171 -173 l 230 -158 l 236 -156 l 236 -105 "},v7c:{x_min:0,x_max:300.8125,ha:307,o:"m 49 505 b 53 506 50 505 51 506 b 70 496 58 506 62 503 b 81 485 73 492 78 488 l 96 473 l 111 459 l 122 449 l 134 438 l 182 396 l 255 330 b 292 291 292 298 292 298 l 292 290 l 292 284 l 283 270 b 209 36 234 197 209 113 b 288 -170 209 -44 235 -119 b 299 -184 295 -179 299 -181 b 300 -191 300 -187 300 -188 b 285 -206 300 -199 294 -206 b 280 -206 283 -206 281 -206 b 247 -201 270 -202 259 -201 b 176 -222 223 -201 197 -208 b 114 -340 136 -249 114 -292 b 172 -471 114 -384 134 -433 b 185 -492 182 -481 185 -487 b 181 -502 185 -496 183 -499 b 171 -508 176 -505 174 -508 b 152 -498 166 -508 160 -503 b 0 -284 65 -428 12 -352 b 0 -260 0 -278 0 -270 b 1 -238 0 -252 0 -242 b 148 -140 16 -177 73 -140 b 209 -148 167 -140 189 -142 b 215 -149 212 -148 215 -149 b 215 -149 215 -149 215 -149 l 215 -149 b 201 -136 215 -148 209 -142 l 157 -97 l 96 -41 b 17 34 21 24 17 29 b 17 37 17 36 17 36 b 17 38 17 37 17 38 b 25 56 17 44 17 44 b 110 298 81 131 110 219 b 46 474 110 367 88 431 b 38 491 40 480 38 487 b 49 505 38 498 42 502 "},v7d:{x_min:-1.359375,x_max:436.921875,ha:446,o:"m 213 205 b 217 205 215 205 216 205 b 234 194 224 205 234 199 b 236 187 234 194 235 190 l 245 167 l 261 129 l 270 106 b 355 -61 294 54 329 -13 b 420 -163 381 -105 402 -138 b 436 -188 435 -184 436 -184 b 436 -191 436 -190 436 -190 b 421 -206 436 -201 431 -206 l 421 -206 l 416 -206 l 405 -201 b 217 -158 347 -172 283 -158 b 31 -201 153 -158 88 -172 l 20 -206 l 14 -206 l 14 -206 b 0 -191 5 -206 0 -201 b -1 -188 0 -190 -1 -190 b 14 -163 -1 -186 0 -184 b 95 -34 36 -136 72 -77 b 166 106 119 8 148 68 l 175 129 l 183 148 l 200 188 b 213 205 205 199 208 202 "},v7f:{x_min:0,x_max:367.5,ha:375,o:"m 0 124 l 0 187 l 61 187 l 122 187 l 122 138 l 122 91 l 153 61 l 183 30 l 213 61 l 243 91 l 243 138 l 243 187 l 306 187 l 367 187 l 367 124 l 367 61 l 321 61 l 274 61 l 243 30 l 213 0 l 243 -31 l 274 -62 l 321 -62 l 367 -62 l 367 -124 l 367 -188 l 306 -188 l 243 -188 l 243 -140 l 243 -93 l 213 -62 l 183 -31 l 153 -62 l 122 -93 l 122 -140 l 122 -188 l 61 -188 l 0 -188 l 0 -124 l 0 -62 l 46 -62 l 92 -62 l 123 -31 l 153 0 l 123 30 l 92 61 l 46 61 l 0 61 l 0 124 "},v80:{x_min:29.9375,x_max:420.578125,ha:371,o:"m 115 345 b 221 347 117 345 166 347 b 411 345 306 347 409 345 b 420 330 416 342 420 335 b 415 319 420 326 419 321 b 178 118 397 303 179 118 b 178 117 178 118 178 117 b 181 117 178 117 178 117 b 189 117 182 117 185 117 b 193 117 190 117 191 117 b 247 98 215 117 232 111 b 296 75 266 83 280 76 b 302 75 299 75 300 75 b 322 91 311 75 315 79 b 322 91 322 91 322 91 b 322 91 322 91 322 91 b 319 91 322 91 321 91 b 313 90 318 90 315 90 b 283 107 300 90 288 97 b 277 126 279 114 277 121 b 319 167 277 149 295 167 b 319 167 319 167 319 167 b 362 118 347 167 362 147 b 355 82 362 108 359 96 b 311 33 349 65 340 55 b 224 1 284 12 253 1 b 194 5 213 1 204 2 b 168 18 183 8 178 11 b 110 36 151 30 130 36 b 57 15 88 36 68 29 b 47 11 54 12 51 11 b 31 20 40 11 34 13 b 29 26 31 22 29 25 b 68 66 29 36 39 45 b 285 250 73 71 281 248 b 285 250 285 250 285 250 b 231 252 285 252 261 252 b 137 250 190 252 141 250 b 93 227 122 248 110 241 b 78 220 88 222 83 220 b 66 227 74 220 70 222 b 63 234 65 229 63 231 b 85 291 63 241 69 252 b 115 345 108 342 108 344 "},v81:{x_min:0,x_max:428.75,ha:438,o:"m 262 186 b 273 186 266 186 272 186 b 274 186 273 186 274 186 b 285 186 274 186 280 186 b 428 48 375 181 428 122 b 386 -68 428 12 416 -29 b 155 -187 329 -145 236 -187 b 12 -111 92 -187 38 -162 b 0 -51 4 -91 0 -72 b 262 186 0 58 122 179 m 366 131 b 352 134 362 133 357 134 b 219 81 321 134 269 115 b 47 -111 126 23 50 -62 b 47 -112 47 -111 47 -112 b 77 -136 47 -129 58 -136 b 264 -45 118 -136 194 -101 b 382 109 336 12 382 76 b 366 131 382 120 377 129 "},v83:{x_min:-1.359375,x_max:847.96875,ha:865,o:"m 488 1499 b 495 1500 490 1500 492 1500 b 541 1465 507 1500 521 1490 b 679 1078 622 1372 679 1210 b 677 1050 679 1068 677 1060 b 477 642 668 893 604 764 l 443 609 l 431 596 l 431 592 l 438 562 l 449 508 l 460 458 b 481 355 475 390 481 355 b 481 355 481 355 481 355 b 490 356 481 355 485 355 b 528 358 495 356 511 358 b 558 356 540 358 552 356 b 839 95 699 338 808 237 b 847 22 845 72 847 47 b 631 -303 847 -113 766 -242 b 620 -309 623 -308 620 -309 l 620 -310 b 631 -359 620 -310 626 -333 l 646 -435 l 660 -496 b 672 -588 668 -535 672 -563 b 664 -653 672 -610 669 -630 b 383 -875 630 -792 509 -875 b 201 -810 321 -875 257 -855 b 129 -680 151 -768 129 -730 b 274 -530 129 -592 200 -530 b 351 -553 300 -530 326 -538 b 412 -669 393 -582 412 -626 b 287 -805 412 -735 366 -800 l 279 -805 l 285 -809 b 383 -830 318 -823 351 -830 b 586 -718 464 -830 540 -789 b 626 -584 612 -678 626 -631 b 619 -528 626 -566 623 -548 b 612 -495 619 -526 616 -510 b 577 -324 590 -387 577 -324 b 577 -324 577 -324 577 -324 b 568 -326 575 -324 571 -324 b 528 -334 558 -328 537 -333 b 465 -338 506 -337 485 -338 b 24 -11 269 -338 87 -206 b -1 145 8 41 -1 93 b 96 442 -1 249 32 351 b 322 714 166 541 236 626 l 352 745 l 345 782 l 332 843 l 315 921 b 303 984 310 950 304 978 b 295 1082 298 1017 295 1049 b 413 1426 295 1208 336 1329 b 488 1499 436 1456 477 1496 m 549 1301 b 541 1301 547 1301 544 1301 b 411 1207 500 1301 447 1263 b 355 1004 374 1152 355 1079 b 359 942 355 984 356 963 b 371 881 362 927 363 917 l 385 818 b 392 782 389 799 392 784 l 392 782 b 434 828 393 782 424 816 b 607 1165 534 941 594 1060 b 608 1193 608 1175 608 1183 b 597 1270 608 1224 604 1254 b 549 1301 589 1286 571 1299 m 398 528 b 393 555 396 542 393 553 b 392 555 393 555 393 555 b 317 470 390 555 347 505 b 190 298 266 408 212 334 b 127 70 148 227 127 148 b 155 -77 127 19 137 -30 b 468 -303 209 -216 333 -303 b 519 -299 484 -303 502 -302 b 568 -284 541 -295 568 -287 l 568 -284 b 563 -263 568 -284 566 -274 l 534 -120 l 511 -13 l 496 61 l 480 133 b 469 187 472 176 469 187 b 468 188 469 187 469 188 b 416 162 462 188 430 172 b 337 13 364 126 337 69 b 413 -124 337 -40 363 -93 b 428 -144 424 -131 428 -137 b 428 -149 428 -145 428 -148 b 409 -166 426 -161 419 -166 b 394 -162 405 -166 400 -165 b 240 77 302 -122 240 -27 l 240 77 b 430 342 240 197 315 301 l 436 344 l 426 394 l 398 528 m 548 194 b 526 195 540 195 532 195 b 519 195 524 195 521 195 l 514 195 l 518 177 l 539 79 l 552 15 l 566 -48 l 594 -187 l 605 -240 b 612 -266 609 -254 611 -266 b 612 -266 612 -266 612 -266 b 641 -248 613 -266 630 -256 b 744 -98 692 -212 730 -156 b 751 -40 749 -79 751 -59 b 548 194 751 76 665 181 "},v84:{x_min:25.859375,x_max:164.6875,ha:168,o:"m 34 369 b 40 370 35 370 38 370 b 59 353 49 370 50 367 b 164 40 122 254 155 158 b 164 0 164 33 164 16 b 164 -40 164 -16 164 -34 b 59 -353 155 -158 122 -254 b 40 -371 53 -366 47 -371 b 34 -370 38 -371 36 -370 b 25 -358 28 -367 25 -363 b 31 -337 25 -352 27 -347 b 92 0 72 -234 92 -117 b 31 335 92 116 72 233 b 25 356 27 345 25 352 b 34 369 25 363 28 366 "},v86:{x_min:-571.671875,x_max:570.3125,ha:582,o:"m -386 173 b -381 174 -385 174 -383 174 b -370 173 -377 174 -372 173 b -281 86 -367 172 -347 151 b -196 0 -235 37 -196 0 b -126 84 -196 0 -164 37 b -50 174 -55 173 -57 172 b -44 174 -49 174 -47 174 b -35 173 -42 174 -38 173 b 53 86 -32 172 -12 151 b 138 0 100 37 138 0 b 208 84 140 0 170 37 b 284 174 279 173 277 172 b 289 174 285 174 288 174 b 299 173 294 174 298 173 b 462 11 303 172 338 134 l 475 -1 l 503 34 b 541 76 534 72 536 74 b 548 77 544 77 545 77 b 570 56 560 77 570 68 b 567 48 570 54 568 51 b 392 -172 564 41 397 -166 b 378 -176 387 -174 382 -176 b 368 -174 374 -176 371 -176 b 280 -87 367 -173 345 -152 b 194 0 234 -38 194 0 b 125 -86 194 0 163 -38 b 49 -174 54 -174 55 -173 b 43 -176 47 -176 46 -176 b 34 -174 40 -176 36 -174 b -54 -87 31 -173 10 -152 b -140 0 -102 -38 -140 0 b -209 -86 -141 0 -171 -38 b -285 -174 -280 -174 -279 -173 b -291 -176 -287 -176 -289 -176 b -300 -174 -295 -176 -299 -174 b -464 -12 -304 -173 -340 -137 l -476 0 l -504 -34 b -543 -77 -534 -73 -537 -76 b -549 -79 -545 -79 -547 -79 b -571 -58 -562 -79 -571 -69 b -568 -49 -571 -55 -570 -52 b -392 172 -566 -43 -396 167 b -386 173 -390 172 -387 173 "},v8a:{x_min:-170.140625,x_max:168.78125,ha:172,o:"m -160 567 b -122 567 -159 567 -149 567 l -87 567 l -84 566 b -74 553 -78 563 -77 560 b -20 366 -73 551 -49 466 b 31 186 8 267 31 186 b 85 371 31 186 55 269 b 140 559 114 473 138 557 b 153 567 141 564 148 567 b 168 559 159 567 166 564 b 168 555 168 557 168 557 b 92 281 168 548 159 513 b 14 13 50 134 14 13 b 0 0 14 6 6 0 b -17 15 -8 0 -17 8 b -93 283 -17 15 -51 136 b -170 552 -166 533 -170 548 b -170 553 -170 552 -170 552 b -160 567 -170 560 -167 564 "},v8b:{x_min:0,x_max:319.859375,ha:326,o:"m 149 508 b 159 509 152 509 155 509 b 186 494 170 509 181 503 b 190 440 190 487 190 488 l 190 430 l 190 377 l 242 377 l 251 377 b 303 373 298 377 296 377 b 319 345 314 367 319 356 b 304 319 319 335 314 324 b 250 315 296 315 299 315 l 242 315 l 190 315 l 190 262 l 190 252 b 186 198 190 204 190 205 b 159 183 179 188 170 183 b 132 198 148 183 138 188 b 127 252 127 205 127 204 l 127 262 l 127 315 l 76 315 l 68 315 b 14 319 20 315 21 315 b 0 347 4 324 0 335 b 14 373 0 356 4 367 b 68 377 21 377 20 377 l 76 377 l 127 377 l 127 430 l 127 440 b 132 494 127 488 127 487 b 149 508 136 501 142 505 "},v8c:{x_min:-330.75,x_max:329.390625,ha:336,o:"m -133 483 b -117 484 -127 484 -122 484 b 31 373 -51 484 9 440 b 35 348 34 365 35 356 b -25 285 35 313 10 285 b -87 331 -55 285 -76 302 b -167 402 -100 376 -133 402 b -191 398 -175 402 -183 401 b -227 341 -215 388 -227 369 b -225 320 -227 334 -227 327 b -13 74 -209 230 -125 133 b 6 65 -4 70 5 66 l 9 63 l 10 65 b 117 231 12 68 40 112 l 189 341 l 242 424 b 268 460 262 456 264 458 b 283 464 273 463 277 464 b 308 438 296 464 308 453 l 308 437 b 287 396 308 430 308 428 l 95 98 l 59 43 l 58 41 l 65 37 b 253 -156 151 -8 217 -77 b 281 -285 272 -199 281 -244 b 148 -481 281 -381 231 -463 b 115 -485 137 -484 126 -485 b -32 -376 51 -485 -9 -442 b -36 -349 -35 -366 -36 -358 b 25 -287 -36 -315 -12 -287 b 85 -333 54 -287 74 -302 b 166 -403 99 -377 133 -403 b 190 -399 174 -403 182 -402 b 225 -342 215 -390 225 -370 b 224 -322 225 -335 225 -328 b 12 -76 208 -231 125 -134 b -8 -66 2 -72 -6 -68 l -10 -65 l -12 -66 b -118 -231 -13 -68 -42 -113 l -190 -342 l -243 -426 b -269 -462 -264 -458 -265 -458 b -284 -466 -274 -464 -279 -466 b -310 -440 -298 -466 -310 -455 l -310 -438 b -288 -398 -310 -430 -308 -430 l -96 -99 l -59 -44 l -59 -43 l -66 -38 b -281 284 -198 33 -281 158 l -281 284 b -133 483 -281 392 -220 474 m 254 177 b 266 179 258 177 262 179 b 319 149 287 179 307 167 b 329 115 326 140 329 127 b 319 79 329 102 326 90 b 268 51 307 61 287 51 b 221 72 250 51 234 58 b 205 115 210 84 205 99 b 254 177 205 142 223 170 m -281 -54 b -269 -52 -277 -52 -273 -52 b -223 -73 -253 -52 -235 -59 b -206 -116 -212 -84 -206 -101 b -216 -151 -206 -129 -209 -141 b -269 -179 -228 -170 -249 -179 b -314 -159 -285 -179 -302 -173 b -330 -116 -325 -147 -330 -131 b -281 -54 -330 -88 -313 -61 "},v8d:{x_min:-1.359375,x_max:255.890625,ha:261,o:"m 118 514 b 127 517 121 517 122 517 b 147 505 136 517 142 513 l 148 502 l 148 403 b 148 306 148 351 148 306 b 174 315 149 306 160 310 l 200 324 l 205 323 b 223 312 213 323 220 319 l 225 308 l 225 260 b 225 245 225 255 225 249 b 220 204 225 208 224 209 b 179 188 216 199 215 199 l 148 177 l 148 124 l 148 70 l 189 84 b 236 98 219 94 230 98 b 247 94 240 98 243 97 b 255 52 254 88 255 87 b 255 33 255 47 255 40 l 254 -12 l 253 -15 b 249 -22 253 -18 250 -20 l 245 -24 l 196 -41 l 148 -58 l 148 -108 b 148 -158 148 -136 148 -158 b 174 -148 148 -158 160 -154 b 204 -140 198 -140 200 -140 l 204 -140 b 224 -152 213 -140 221 -145 b 225 -201 224 -155 225 -177 b 224 -254 225 -226 224 -251 b 157 -284 220 -262 220 -262 l 148 -288 l 148 -395 l 148 -503 l 147 -506 b 127 -519 142 -514 134 -519 b 107 -506 119 -519 111 -514 l 106 -503 l 106 -403 b 106 -303 106 -316 106 -303 b 104 -303 104 -303 104 -303 b 88 -310 104 -303 96 -306 l 63 -319 b 51 -322 59 -320 55 -322 b 36 -315 46 -322 40 -319 b 31 -273 32 -309 31 -312 b 31 -258 31 -269 31 -263 l 31 -210 l 34 -206 b 40 -198 35 -204 38 -199 b 74 -186 42 -197 57 -191 l 106 -173 l 106 -123 b 106 -97 106 -112 106 -104 b 106 -72 106 -76 106 -72 b 104 -72 106 -72 106 -72 b 20 -99 89 -79 23 -99 b 0 -84 10 -99 2 -93 b -1 -37 0 -81 -1 -59 b 0 11 -1 -15 0 9 b 58 40 4 22 2 22 l 106 56 l 106 109 b 106 123 106 115 106 119 b 106 162 106 147 106 162 b 81 155 106 162 93 159 b 50 147 65 149 55 147 b 36 152 43 147 40 148 b 31 194 32 158 31 156 b 31 209 31 198 31 204 l 31 256 l 34 260 b 76 281 38 269 38 269 l 106 292 l 106 396 l 106 502 l 107 505 b 118 514 110 509 114 513 "},v8f:{x_min:-21.78125,x_max:362.0625,ha:369,o:"m 302 1031 b 308 1032 304 1032 307 1032 b 330 1016 318 1032 325 1027 b 362 867 351 970 362 920 b 340 738 362 824 353 780 l 336 727 l 340 717 b 362 591 355 677 362 634 b 257 323 362 496 325 401 b 204 272 243 306 227 290 b 20 56 129 206 66 133 b -1 18 12 44 0 22 b -19 4 -4 9 -12 4 l -21 4 l -21 140 l -21 276 l -12 277 b 167 333 61 288 127 309 b 319 598 262 388 319 491 b 311 664 319 620 317 642 l 310 673 l 304 664 b 204 548 279 620 250 587 b 20 333 129 483 66 409 b -1 292 12 320 0 298 b -19 280 -4 285 -12 280 l -21 280 l -21 416 l -21 552 l -12 553 b 167 609 61 564 127 585 b 319 874 264 666 319 770 b 294 992 319 914 311 954 b 288 1011 288 1004 288 1007 b 302 1031 288 1021 294 1028 "},v90:{x_min:-171.5,x_max:483.1875,ha:493,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 495 20 616 20 616 b 20 373 20 427 20 373 b 115 410 20 373 63 390 l 210 448 l 210 531 b 212 620 210 614 210 616 b 231 632 215 628 223 632 b 246 627 236 632 242 631 b 251 541 251 620 251 628 l 251 463 l 315 489 b 387 514 368 509 381 514 b 393 513 390 514 392 514 b 406 494 402 510 406 502 b 397 476 406 487 404 480 b 323 446 396 474 363 462 l 251 417 l 251 283 l 251 148 l 254 151 b 370 199 291 183 332 199 b 415 191 385 199 400 197 b 483 84 458 176 483 134 b 461 0 483 58 476 29 b 332 -142 439 -40 411 -72 l 255 -215 b 231 -229 240 -229 239 -229 b 216 -223 224 -229 220 -227 b 210 -158 210 -217 210 -223 b 210 -120 210 -148 210 -136 l 210 -29 l 205 -34 b 100 -142 182 -65 159 -88 l 23 -215 b -1 -229 9 -229 6 -229 b -19 -217 -9 -229 -16 -224 l -20 -215 l -21 48 l -21 310 l -83 287 b -152 262 -133 266 -145 262 b -157 263 -153 262 -155 262 b -171 283 -166 266 -171 274 b -161 301 -171 290 -167 297 b -91 328 -160 302 -129 315 l -21 356 l -21 487 l -20 617 l -19 621 b -8 631 -17 626 -12 630 m 210 288 b 210 401 210 351 210 401 b 114 365 209 401 167 384 l 20 327 l 20 238 l 20 148 l 21 151 b 140 199 59 183 102 199 b 206 180 164 199 187 192 l 209 177 b 209 177 209 177 209 177 b 210 288 210 177 210 199 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 m 341 131 b 328 133 337 133 332 133 b 322 133 326 133 323 133 b 257 87 296 129 273 113 l 251 80 l 251 -37 l 251 -156 l 255 -152 b 375 81 328 -72 375 20 l 375 83 b 341 131 375 113 367 126 "},v92:{x_min:0,x_max:598.890625,ha:611,o:"m 62 181 b 77 183 66 183 72 183 b 91 181 83 183 88 183 b 202 131 100 180 106 177 l 299 87 l 394 131 b 517 183 499 181 502 183 b 519 183 517 183 518 183 b 598 104 567 183 598 144 b 577 49 598 84 592 65 b 518 15 567 38 563 37 b 484 0 499 6 484 0 b 518 -16 484 -1 499 -8 b 577 -51 563 -38 567 -40 b 598 -105 592 -66 598 -86 b 519 -184 598 -145 567 -184 b 517 -184 518 -184 517 -184 b 394 -133 502 -184 499 -183 l 299 -88 l 202 -133 b 81 -184 99 -183 95 -184 b 77 -184 80 -184 78 -184 b 0 -105 29 -184 0 -145 b 20 -51 0 -86 5 -66 b 80 -16 29 -40 34 -38 b 114 -1 98 -8 114 -1 b 80 15 114 0 98 6 b 20 49 34 37 29 38 b 0 104 6 65 0 84 b 62 181 0 140 23 174 m 88 134 b 74 136 85 134 80 136 b 68 134 72 136 69 136 b 46 104 54 130 46 117 b 55 81 46 95 49 88 b 149 34 59 76 53 80 b 224 -1 190 15 224 0 b 144 -38 224 -1 187 -18 b 54 -84 59 -79 58 -79 b 46 -105 49 -90 46 -98 b 76 -137 46 -122 58 -137 b 78 -137 77 -137 77 -137 b 194 -86 87 -137 76 -141 b 298 -36 250 -58 298 -36 b 298 -36 298 -36 298 -36 b 402 -84 299 -36 345 -58 b 518 -137 522 -141 510 -137 b 521 -137 519 -137 519 -137 b 551 -105 539 -137 551 -122 b 541 -83 551 -98 548 -90 b 447 -36 537 -77 544 -81 b 374 -1 406 -16 374 -1 b 447 34 374 0 406 15 b 541 81 544 80 537 76 b 551 104 548 88 551 97 b 521 136 551 120 539 136 b 518 136 519 136 519 136 b 517 136 518 136 517 136 l 517 136 b 402 83 511 136 511 136 b 298 34 345 56 299 34 b 298 34 298 34 298 34 b 194 84 298 34 250 56 b 88 134 137 111 89 133 "},v93:{x_min:0,x_max:438.28125,ha:447,o:"m 212 205 b 219 205 213 205 216 205 b 239 183 228 205 231 204 b 421 -163 298 40 363 -83 b 438 -191 434 -180 438 -186 b 436 -197 438 -192 438 -195 b 424 -206 434 -204 431 -206 b 406 -201 420 -206 415 -205 b 216 -156 347 -172 281 -156 b 23 -205 148 -156 80 -173 b 14 -206 20 -206 17 -206 b 0 -191 6 -206 0 -201 b 6 -176 0 -187 1 -183 b 202 192 63 -104 142 45 b 212 205 205 199 208 202 m 264 48 l 249 81 l 243 94 l 242 91 b 89 -126 208 36 137 -66 b 81 -138 85 -133 81 -138 b 81 -138 81 -138 81 -138 b 81 -138 81 -138 81 -138 b 95 -133 81 -138 87 -136 b 280 -94 156 -108 221 -94 b 334 -98 299 -94 317 -95 b 343 -99 338 -99 343 -99 b 343 -99 343 -99 343 -99 b 338 -94 343 -99 341 -97 b 264 48 318 -58 287 1 "},v94:{x_min:-149.71875,x_max:148.359375,ha:151,o:"m -9 215 b 0 217 -6 217 -4 217 b 19 205 8 217 14 213 b 20 142 20 202 20 201 l 20 84 l 23 84 b 144 -27 81 74 129 30 b 148 -66 147 -40 148 -54 b 36 -213 148 -134 103 -197 b 0 -219 24 -217 12 -219 b -145 -104 -68 -219 -129 -173 b -149 -68 -148 -91 -149 -79 b -24 84 -149 6 -98 74 l -21 84 l -21 142 b -19 205 -20 201 -20 202 b -9 215 -17 209 -13 213 m -21 -15 b -23 41 -21 37 -21 41 b -23 41 -23 41 -23 41 b -76 11 -35 40 -62 26 b -108 -65 -98 -11 -108 -38 b -1 -176 -108 -122 -65 -176 b 107 -65 63 -176 107 -122 b 74 11 107 -38 96 -11 b 20 41 61 26 32 41 b 20 -15 20 41 20 15 b 19 -74 20 -72 20 -72 b 0 -87 14 -83 6 -87 b -19 -74 -8 -87 -16 -83 b -21 -15 -20 -72 -20 -72 "},v95:{x_min:0,x_max:406.96875,ha:415,o:"m 55 181 b 70 183 61 183 66 183 b 111 170 85 183 99 179 b 160 130 115 167 137 149 l 202 95 l 245 130 b 319 181 299 176 302 179 b 334 183 325 183 330 183 b 406 109 375 183 406 148 b 401 81 406 99 405 91 b 348 24 394 65 390 59 b 318 -1 332 11 318 0 b 348 -26 318 -1 332 -12 b 401 -83 390 -61 394 -66 b 406 -111 405 -93 406 -101 b 334 -184 406 -149 375 -184 b 319 -183 330 -184 325 -184 b 245 -131 302 -180 299 -177 l 202 -97 l 160 -131 b 85 -183 107 -177 103 -180 b 70 -184 80 -184 76 -184 b 0 -111 31 -184 0 -149 b 4 -83 0 -101 1 -93 b 58 -26 10 -66 16 -61 b 88 -1 74 -12 88 -1 b 58 24 88 0 74 11 b 10 69 23 54 17 59 b 0 109 2 81 0 95 b 55 181 0 142 21 173 m 83 133 b 72 136 78 136 76 136 b 57 131 66 136 61 134 b 46 109 49 126 46 117 b 50 93 46 104 47 98 b 107 45 51 91 77 70 b 160 0 137 20 160 0 b 107 -47 160 -1 137 -22 b 50 -94 77 -72 51 -93 b 46 -111 47 -99 46 -105 b 59 -134 46 -120 50 -130 b 72 -137 62 -136 68 -137 b 83 -136 76 -137 80 -136 b 144 -84 84 -134 107 -116 b 202 -36 176 -58 202 -36 b 261 -84 202 -36 230 -58 b 323 -136 299 -116 321 -134 b 334 -137 326 -136 330 -137 b 345 -134 338 -137 343 -136 b 360 -111 355 -130 360 -120 b 355 -94 360 -105 359 -99 b 299 -47 353 -93 329 -72 b 245 0 269 -22 245 -1 b 299 45 245 0 269 20 b 355 93 329 70 353 91 b 360 109 359 98 360 104 b 345 133 360 119 355 129 b 334 136 343 134 338 136 b 323 134 330 136 326 134 b 261 83 321 133 299 115 b 202 34 230 56 202 34 b 144 83 202 34 176 56 b 83 133 106 115 84 133 "},v97:{x_min:-228.671875,x_max:227.3125,ha:232,o:"m -217 487 l -213 488 l 0 488 l 212 488 l 216 487 b 225 476 220 484 224 480 l 227 473 l 227 244 l 227 15 l 225 12 b 206 0 223 4 215 0 b 197 1 204 0 200 0 b 187 12 193 4 189 6 l 186 15 l 186 138 l 186 262 l -1 262 l -187 262 l -187 138 l -187 15 l -189 12 b -208 0 -193 4 -200 0 b -227 12 -216 0 -223 4 l -228 15 l -228 244 l -228 473 l -227 476 b -217 487 -225 480 -221 484 "},v9a:{x_min:-21.78125,x_max:367.5,ha:375,o:"m 230 1031 b 238 1032 232 1032 235 1032 b 259 1014 245 1032 251 1027 b 367 662 330 906 367 782 b 364 602 367 641 367 621 b 232 317 352 488 304 384 b 57 120 155 245 103 187 b -1 18 31 84 6 40 b -19 4 -4 11 -12 4 l -21 4 l -21 159 l -21 315 l -16 315 b 96 335 10 315 62 324 b 315 695 227 380 315 527 b 313 738 315 709 314 724 b 224 991 304 825 273 916 b 216 1013 219 999 216 1007 b 230 1031 216 1021 220 1028 "},v9b:{x_min:-24.5,x_max:313.0625,ha:319,o:"m -24 -133 l -24 -5 l -20 -5 b -1 -19 -12 -5 -4 -11 b 142 -213 13 -61 74 -144 b 258 -376 196 -269 230 -315 b 313 -605 295 -449 313 -528 b 292 -742 313 -652 306 -699 b 288 -752 289 -748 288 -752 b 288 -752 288 -752 288 -752 b 292 -764 289 -753 291 -757 b 313 -907 306 -811 313 -860 b 292 -1045 313 -954 306 -1002 b 288 -1054 289 -1050 288 -1054 b 288 -1054 288 -1054 288 -1054 b 292 -1067 289 -1054 291 -1060 b 313 -1210 306 -1113 313 -1161 b 292 -1346 313 -1257 306 -1304 b 288 -1357 289 -1353 288 -1357 b 288 -1357 288 -1357 288 -1357 b 292 -1368 289 -1357 291 -1363 b 313 -1512 306 -1415 313 -1464 b 292 -1648 313 -1560 306 -1605 b 288 -1660 289 -1654 288 -1660 b 288 -1660 288 -1660 288 -1660 b 292 -1671 289 -1660 291 -1665 b 313 -1814 306 -1719 313 -1766 b 250 -2040 313 -1897 291 -1977 b 232 -2062 238 -2057 236 -2059 b 221 -2065 230 -2063 225 -2065 b 200 -2045 210 -2065 201 -2057 b 200 -2043 200 -2044 200 -2044 b 208 -2026 200 -2037 202 -2034 b 269 -1826 249 -1966 269 -1897 b 153 -1544 269 -1726 230 -1625 b -9 -1472 115 -1506 58 -1481 b -21 -1471 -14 -1471 -19 -1471 l -24 -1471 l -24 -1343 l -24 -1215 l -20 -1215 b -1 -1229 -12 -1215 -4 -1221 b 142 -1424 13 -1270 74 -1353 b 257 -1582 196 -1478 228 -1524 b 264 -1594 261 -1589 264 -1594 l 264 -1594 b 265 -1582 264 -1594 264 -1589 b 270 -1525 268 -1562 270 -1544 b 153 -1243 270 -1424 228 -1321 b -9 -1170 115 -1203 58 -1178 b -21 -1168 -14 -1170 -19 -1168 l -24 -1168 l -24 -1041 l -24 -913 l -20 -913 b -1 -927 -12 -913 -4 -918 b 142 -1121 13 -967 74 -1050 b 257 -1281 196 -1175 228 -1221 b 264 -1292 261 -1286 264 -1292 l 264 -1292 b 265 -1279 264 -1292 264 -1286 b 270 -1222 268 -1261 270 -1242 b 153 -941 270 -1121 228 -1018 b -9 -867 115 -900 58 -875 b -21 -866 -14 -867 -19 -866 l -24 -866 l -24 -738 l -24 -610 l -20 -610 b -1 -624 -12 -610 -4 -616 b 142 -818 13 -664 74 -749 b 257 -978 196 -873 228 -918 b 264 -989 261 -984 264 -989 l 264 -989 b 265 -977 264 -989 264 -984 b 270 -920 268 -959 270 -939 b 153 -638 270 -818 228 -716 b -9 -564 115 -598 58 -573 b -21 -563 -14 -564 -19 -563 l -24 -563 l -24 -435 l -24 -308 l -20 -308 b -1 -322 -12 -308 -4 -313 b 142 -516 13 -363 74 -446 b 257 -675 196 -571 228 -616 b 264 -687 261 -681 264 -687 l 264 -687 b 265 -674 264 -687 264 -681 b 270 -617 268 -656 270 -637 b 153 -335 270 -516 228 -413 b -9 -262 115 -295 58 -270 b -21 -260 -14 -262 -19 -260 l -24 -260 l -24 -133 "},v9c:{x_min:-166.0625,x_max:-25.859375,ha:0,o:"m -49 369 b -42 370 -46 369 -44 370 b -27 360 -36 370 -29 366 b -25 355 -27 359 -25 358 b -32 335 -25 351 -28 347 b -92 52 -66 248 -87 159 b -93 -1 -93 43 -93 20 b -92 -54 -93 -23 -93 -45 b -32 -337 -85 -162 -66 -251 b -25 -355 -27 -349 -25 -352 b -42 -371 -25 -365 -32 -371 b -61 -353 -50 -371 -51 -369 b -163 -63 -119 -262 -153 -165 b -166 -1 -166 -37 -166 -31 b -163 62 -166 30 -166 36 b -61 352 -153 163 -119 260 b -49 369 -54 365 -51 366 "},v9e:{x_min:0,x_max:607.0625,ha:619,o:"m 243 631 b 250 632 246 632 249 632 b 270 620 259 632 268 628 l 272 616 l 272 201 l 272 -212 l 270 -216 b 251 -229 268 -224 259 -229 b 227 -215 243 -229 240 -229 l 151 -142 b 32 -16 81 -80 53 -49 b 0 84 9 18 0 52 b 111 199 0 149 42 199 b 137 197 119 199 127 198 b 228 151 168 191 197 177 l 231 148 l 231 383 b 232 620 231 616 231 616 b 243 631 234 624 238 630 m 168 131 b 152 133 163 133 157 133 b 107 102 130 133 111 120 b 106 86 107 97 106 91 b 111 41 106 73 108 56 b 227 -152 125 -13 171 -90 l 231 -156 l 231 -37 l 231 80 l 225 87 b 168 131 210 111 190 126 m 347 631 b 353 632 348 632 351 632 b 374 620 363 632 371 628 b 375 383 375 616 375 616 l 375 148 l 377 151 b 492 199 415 183 454 199 b 537 191 507 199 522 197 b 607 84 582 176 607 134 b 583 0 607 58 598 29 b 455 -142 562 -40 533 -72 l 378 -215 b 355 -229 364 -229 362 -229 b 334 -216 345 -229 337 -224 l 333 -212 l 333 201 l 333 616 l 334 620 b 347 631 337 624 341 630 m 465 131 b 451 133 461 133 455 133 b 445 133 449 133 446 133 b 379 87 419 129 396 113 l 375 80 l 375 -37 l 375 -156 l 378 -152 b 499 81 451 -72 499 20 l 499 83 b 465 131 499 113 490 126 "},va3:{x_min:58.53125,x_max:228.671875,ha:294,o:"m 138 371 b 142 373 140 371 141 373 b 178 342 149 373 156 366 b 228 251 217 297 228 278 b 228 244 228 248 228 247 b 176 147 227 212 212 184 b 123 73 152 122 132 93 b 121 62 122 70 121 66 b 145 13 121 48 129 31 b 153 -2 151 6 153 1 b 149 -9 153 -5 152 -6 b 144 -11 148 -11 145 -11 b 129 -1 140 -11 136 -8 b 61 87 89 37 68 68 b 58 113 59 95 58 105 b 110 215 58 144 74 177 b 163 287 134 240 155 269 b 166 299 166 291 166 295 b 141 348 166 313 157 330 b 133 360 134 356 133 358 b 133 363 133 362 133 362 b 138 371 133 367 136 370 "},va5:{x_min:0,x_max:349.8125,ha:357,o:"m 88 302 b 103 303 93 302 98 303 b 202 224 149 303 191 270 b 205 199 204 216 205 208 b 178 129 205 173 196 147 l 175 126 l 182 127 b 307 249 236 142 284 190 b 313 259 308 254 311 258 b 329 267 317 265 323 267 b 349 247 340 267 349 259 b 201 -263 349 242 204 -258 b 182 -273 197 -270 190 -273 b 163 -260 174 -273 166 -269 b 161 -256 161 -259 161 -258 b 217 -59 161 -248 170 -220 b 272 129 247 43 272 127 b 272 129 272 129 272 129 b 264 122 272 129 268 126 b 140 80 227 94 183 80 b 36 115 102 80 65 91 b 0 194 10 136 0 165 b 88 302 0 244 32 292 "},va9:{x_min:-24.5,x_max:314.421875,ha:321,o:"m -24 -145 l -24 -5 l -20 -5 b 0 -23 -9 -5 -2 -12 b 27 -87 4 -38 14 -66 b 138 -220 53 -136 88 -177 b 235 -328 179 -255 208 -288 b 314 -592 287 -409 314 -501 b 292 -732 314 -639 307 -687 l 289 -742 l 294 -756 b 314 -896 307 -802 314 -849 b 292 -1035 314 -943 307 -991 l 289 -1045 l 294 -1057 b 314 -1197 307 -1104 314 -1152 b 292 -1338 314 -1246 307 -1292 l 289 -1347 l 294 -1360 b 314 -1500 307 -1407 314 -1454 b 273 -1689 314 -1565 300 -1628 b 250 -1712 265 -1710 261 -1712 b 228 -1691 236 -1712 228 -1704 l 228 -1685 l 234 -1675 b 270 -1507 258 -1621 270 -1564 b 98 -1193 270 -1381 209 -1261 b 40 -1174 76 -1179 58 -1174 b -10 -1189 24 -1174 8 -1178 b -20 -1192 -14 -1192 -16 -1192 l -24 -1192 l -24 -1052 l -24 -913 l -20 -913 b 0 -931 -9 -913 -2 -920 b 27 -995 4 -946 14 -974 b 138 -1128 53 -1043 88 -1085 b 257 -1275 190 -1172 228 -1220 b 262 -1283 259 -1279 262 -1283 l 262 -1283 b 269 -1249 264 -1282 268 -1260 b 270 -1206 270 -1233 270 -1220 b 98 -891 270 -1075 206 -957 b 40 -871 76 -877 58 -871 b -10 -886 24 -871 8 -875 b -20 -889 -14 -889 -16 -889 l -24 -889 l -24 -749 l -24 -610 l -20 -610 b 0 -628 -9 -610 -2 -617 b 27 -692 4 -644 14 -671 b 138 -825 53 -741 88 -782 b 257 -973 190 -870 228 -917 b 262 -981 259 -977 262 -981 l 262 -981 b 269 -946 264 -979 268 -957 b 270 -903 270 -931 270 -917 b 98 -588 270 -774 206 -655 b 40 -569 76 -574 58 -569 b -10 -584 24 -569 8 -574 b -20 -587 -14 -587 -16 -587 l -24 -587 l -24 -448 l -24 -308 l -20 -308 b 0 -326 -9 -308 -2 -315 b 27 -390 4 -341 14 -369 b 138 -523 53 -438 88 -480 b 257 -670 190 -567 228 -614 b 262 -678 259 -674 262 -678 b 262 -678 262 -678 262 -678 b 269 -644 264 -677 268 -656 b 270 -601 270 -628 270 -614 b 98 -285 270 -471 206 -352 b 40 -266 76 -273 58 -266 b -10 -281 24 -266 8 -272 b -20 -284 -14 -284 -16 -284 l -24 -284 l -24 -145 "},vaa:{x_min:-1.359375,x_max:752.703125,ha:768,o:"m 490 985 b 504 986 495 986 500 986 b 604 907 551 986 593 954 b 607 884 607 900 607 892 b 581 813 607 857 597 831 l 578 810 l 583 811 b 710 932 638 827 687 873 b 714 943 711 936 713 942 b 730 952 720 949 725 952 b 752 931 741 952 752 943 b 200 -946 752 927 204 -941 b 182 -957 197 -953 190 -957 b 163 -945 174 -957 166 -953 b 161 -939 161 -942 161 -942 b 217 -743 161 -931 170 -904 b 272 -555 247 -639 272 -555 b 272 -555 272 -555 272 -555 b 264 -560 272 -555 268 -557 b 140 -603 227 -589 182 -603 b 36 -567 102 -603 65 -592 b -1 -487 12 -548 -1 -517 b 17 -427 -1 -466 5 -445 b 103 -380 38 -395 70 -380 b 191 -433 137 -380 172 -398 b 205 -484 201 -448 205 -466 b 178 -553 205 -509 196 -535 l 175 -557 l 182 -555 b 307 -435 236 -539 284 -494 b 372 -213 308 -430 372 -215 b 372 -213 372 -213 372 -213 b 364 -219 372 -213 368 -216 b 240 -262 328 -247 283 -262 b 137 -226 202 -262 166 -249 b 99 -145 112 -206 99 -176 b 118 -84 99 -124 106 -104 b 204 -38 138 -54 171 -38 b 292 -91 238 -38 273 -56 b 306 -141 302 -106 306 -124 b 279 -212 306 -167 296 -194 l 276 -215 l 281 -213 b 408 -93 336 -198 385 -151 b 473 129 409 -88 473 127 b 473 129 473 129 473 129 b 465 122 473 129 469 126 b 341 80 428 94 383 80 b 236 115 303 80 266 91 b 200 195 213 136 200 165 b 217 256 200 217 206 238 b 304 303 239 287 272 303 b 393 249 338 303 374 285 b 406 199 402 234 406 217 b 379 129 406 173 397 148 l 377 126 l 382 127 b 509 248 436 142 485 190 b 574 470 510 254 574 469 b 574 470 574 470 574 470 b 566 464 574 470 570 467 b 442 421 529 435 484 421 b 337 458 404 421 367 433 b 300 538 314 477 300 508 b 318 598 300 559 306 580 b 404 645 340 630 372 645 b 494 592 439 645 475 627 b 507 541 502 577 507 559 b 480 471 507 516 498 489 l 477 467 l 483 470 b 608 589 537 485 586 531 b 675 811 611 595 675 810 b 675 811 675 811 675 811 b 666 806 675 811 671 809 b 543 763 628 777 585 763 b 438 799 504 763 468 775 b 401 878 412 820 401 849 b 490 985 401 928 434 977 "},vab:{x_min:0,x_max:272.21875,ha:278,o:"m 243 631 b 250 632 246 632 249 632 b 270 620 259 632 268 628 l 272 616 l 272 201 l 272 -212 l 270 -216 b 251 -229 268 -224 259 -229 b 227 -215 243 -229 240 -229 l 151 -142 b 32 -16 81 -80 53 -49 b 0 84 9 18 0 52 b 111 199 0 149 42 199 b 137 197 119 199 127 198 b 228 151 168 191 197 177 l 231 148 l 231 383 b 232 620 231 616 231 616 b 243 631 234 624 238 630 m 168 131 b 152 133 163 133 157 133 b 107 102 130 133 111 120 b 106 86 107 97 106 91 b 111 41 106 73 108 56 b 227 -152 125 -13 171 -90 l 231 -156 l 231 -37 l 231 80 l 225 87 b 168 131 210 111 190 126 "},vad:{x_min:0,x_max:873.828125,ha:892,o:"m 0 0 l 0 703 l 81 703 l 164 703 l 164 0 l 164 -705 l 81 -705 l 0 -705 l 0 0 m 225 0 l 225 703 l 246 703 l 268 703 l 268 366 l 268 30 l 274 36 b 314 79 284 44 302 63 b 413 302 357 137 392 213 b 432 327 419 324 421 327 b 449 306 443 327 447 322 b 611 115 457 195 529 115 b 651 122 624 115 638 117 b 728 316 705 140 724 188 b 729 388 728 342 729 366 b 671 635 729 533 711 602 b 581 662 649 652 616 662 b 477 637 545 662 510 653 l 475 635 l 477 634 b 503 627 488 632 495 631 b 545 556 532 612 545 584 b 491 480 545 524 526 491 b 465 474 481 476 473 474 b 379 563 417 474 379 516 b 389 602 379 576 382 588 b 541 691 409 641 479 681 b 582 694 555 692 568 694 b 865 462 714 694 834 598 b 873 392 871 440 873 416 b 865 317 873 367 871 341 b 639 84 839 194 748 101 b 612 83 630 83 620 83 b 511 116 577 83 543 94 b 504 120 509 119 506 120 b 504 120 504 120 504 120 b 469 59 504 120 488 93 l 432 -1 l 469 -61 b 504 -122 488 -94 504 -122 b 504 -122 504 -122 504 -122 b 511 -117 506 -122 509 -120 b 612 -84 543 -95 577 -84 b 665 -91 630 -84 647 -87 b 869 -338 771 -122 850 -216 b 873 -392 872 -356 873 -374 b 798 -595 873 -469 847 -539 b 581 -695 741 -662 660 -695 b 406 -626 517 -695 454 -671 b 381 -563 389 -607 381 -585 b 465 -477 381 -519 413 -477 b 545 -559 514 -477 545 -519 b 503 -628 545 -587 532 -613 b 477 -635 495 -632 488 -634 l 475 -637 l 477 -638 b 581 -663 510 -655 545 -663 b 671 -637 616 -663 649 -653 b 729 -391 711 -603 729 -534 b 728 -317 729 -367 728 -344 b 623 -117 722 -173 698 -124 b 611 -116 619 -116 615 -116 b 449 -308 528 -116 457 -198 b 432 -328 447 -323 443 -328 b 413 -303 421 -328 419 -326 b 314 -80 392 -215 357 -138 b 274 -37 302 -65 284 -45 l 268 -31 l 268 -367 l 268 -705 l 246 -705 l 225 -705 l 225 0 "},vb1:{x_min:78.9375,x_max:485.921875,ha:417,o:"m 362 378 b 378 380 367 380 372 380 b 472 348 415 380 453 367 b 485 315 481 338 485 327 b 462 273 485 298 477 281 b 439 267 454 269 446 267 b 398 290 424 267 409 274 b 344 319 385 309 364 319 b 281 269 315 319 289 301 b 279 262 280 266 279 262 b 276 256 279 260 277 258 b 274 249 276 254 274 251 b 238 127 273 248 257 192 b 201 4 217 61 201 5 b 166 -1 198 -1 200 -1 b 153 -1 163 -1 157 -1 b 141 -1 148 -1 144 -1 b 104 4 106 -1 107 -1 b 104 6 104 5 104 5 b 142 144 104 13 110 34 b 182 278 164 219 181 276 b 183 288 182 281 182 285 b 185 302 185 292 185 298 b 164 330 185 317 176 328 b 159 330 163 330 161 330 b 102 302 140 330 119 320 b 91 294 95 295 93 294 b 88 294 91 294 89 294 b 78 303 83 294 78 298 b 81 312 78 306 78 309 b 200 373 106 347 160 373 b 215 371 205 373 209 371 b 266 335 235 367 254 353 b 269 331 268 333 269 331 b 269 331 269 331 269 331 b 273 335 269 331 270 334 b 362 378 298 359 330 376 "},vb3:{x_min:0,x_max:227.3125,ha:232,o:"m 91 213 b 100 215 93 215 96 215 b 227 58 167 215 224 144 b 227 52 227 56 227 54 b 61 -201 227 -43 164 -138 b 29 -216 44 -212 36 -216 b 23 -210 27 -216 24 -213 b 21 -205 21 -208 21 -206 b 34 -192 21 -201 25 -197 b 122 -55 89 -161 122 -106 b 104 6 122 -33 117 -12 l 103 9 l 96 9 b 4 79 57 9 17 38 b 0 112 1 90 0 101 b 91 213 0 163 36 209 "},vb4:{x_min:-597.53125,x_max:596.171875,ha:608,o:"m -533 324 b -525 327 -530 326 -528 327 b -504 305 -514 327 -504 317 b -504 305 -504 305 -504 305 b -513 284 -504 299 -504 299 b -556 112 -541 226 -556 167 b -545 33 -556 84 -552 58 b -524 -20 -541 15 -532 -9 l -522 -23 l -491 15 l -413 111 b -355 174 -367 169 -363 174 b -351 174 -353 174 -352 174 b -254 86 -343 174 -348 179 b -168 -1 -208 37 -168 -1 b -100 84 -168 -1 -137 37 b -23 173 -28 173 -29 172 b -19 174 -21 174 -20 174 b -8 173 -14 174 -10 173 b 80 86 -5 172 13 151 b 166 -1 127 37 166 -1 b 235 84 166 -1 197 37 b 311 173 306 173 304 172 b 317 174 313 174 314 174 b 326 173 319 174 323 173 b 490 11 329 172 366 134 l 502 -1 l 530 34 b 568 76 560 72 563 74 b 575 77 570 77 573 77 b 596 56 586 77 596 68 b 594 48 596 54 596 51 b 417 -172 592 41 424 -166 b 405 -176 415 -174 409 -176 b 396 -174 401 -176 398 -176 b 307 -87 393 -173 372 -152 b 221 -1 259 -38 221 -1 b 152 -86 221 -1 190 -38 b 76 -176 81 -174 83 -173 b 70 -176 74 -176 73 -176 b 61 -174 66 -176 62 -174 b -27 -87 58 -173 38 -152 b -114 -1 -74 -38 -112 -1 b -182 -86 -114 -1 -145 -38 b -258 -176 -253 -174 -253 -173 b -264 -176 -259 -176 -262 -176 b -274 -174 -268 -176 -272 -174 b -438 -11 -277 -173 -348 -102 l -449 0 l -479 -37 b -524 -80 -513 -80 -514 -80 l -524 -80 b -553 -52 -534 -80 -540 -74 b -597 109 -583 -8 -597 48 b -560 280 -597 165 -585 224 b -533 324 -548 310 -540 322 "},vb6:{x_min:0,x_max:556.6875,ha:568,o:"m 289 545 b 298 546 292 545 295 546 b 318 533 306 546 315 541 b 319 428 319 530 319 528 l 319 327 l 334 327 b 526 223 412 326 485 285 b 543 172 537 206 543 190 b 447 76 543 122 503 76 b 445 76 446 76 446 76 b 359 165 394 77 359 119 b 368 205 359 179 362 192 b 441 251 382 233 412 251 b 455 249 446 251 451 251 b 460 248 458 249 460 248 b 460 248 460 248 460 248 b 454 254 460 249 458 251 b 334 295 419 280 378 294 l 319 295 l 319 4 l 319 -287 l 321 -285 b 328 -285 322 -285 325 -285 b 524 -99 424 -277 507 -198 b 541 -79 526 -84 530 -79 b 556 -97 551 -79 556 -84 b 548 -133 556 -105 553 -117 b 334 -317 521 -233 434 -306 b 322 -319 329 -317 323 -317 l 319 -319 l 319 -424 b 319 -471 319 -444 319 -459 b 313 -541 319 -544 318 -535 b 298 -548 308 -545 303 -548 b 279 -534 289 -548 281 -542 b 277 -424 277 -531 277 -530 l 277 -317 l 273 -317 b 13 -95 153 -305 51 -217 b 0 2 4 -62 0 -29 b 182 295 0 126 66 238 b 274 324 210 309 249 320 l 277 324 l 277 427 b 279 533 277 528 277 530 b 289 545 281 538 285 542 m 277 2 b 277 291 277 161 277 291 b 268 288 277 291 273 290 b 144 1 179 265 144 184 b 276 -284 144 -199 175 -267 l 277 -285 l 277 2 "},vb7:{x_min:-176.9375,x_max:251.8125,ha:257,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 503 20 616 20 614 b 20 391 20 442 20 391 b 84 424 20 391 49 406 l 147 456 l 152 456 b 153 456 153 456 153 456 b 175 435 166 456 175 446 b 172 427 175 433 174 430 b 92 380 170 420 172 421 l 20 342 l 20 245 l 20 148 l 21 151 b 137 199 59 183 99 199 b 182 191 152 199 167 197 b 251 84 227 176 251 134 b 228 0 251 58 243 29 b 100 -142 206 -40 178 -72 l 23 -215 b 0 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 b -21 54 -21 -212 -21 -212 b -21 322 -21 201 -21 322 b -85 290 -21 322 -50 308 l -148 256 l -153 256 b -155 256 -155 256 -155 256 b -176 277 -167 256 -176 266 b -174 285 -176 280 -175 283 b -93 333 -171 294 -174 292 l -21 370 l -21 494 b -20 620 -21 616 -21 616 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 "},vb9:{x_min:-122.5,x_max:121.140625,ha:124,o:"m -16 145 b 0 147 -10 147 -5 147 b 121 -1 66 147 121 77 b 114 -49 121 -16 118 -33 b -1 -148 95 -112 47 -148 b -85 -106 -31 -148 -61 -134 b -122 -1 -110 -76 -122 -38 b -16 145 -122 68 -81 134 m 12 111 b 0 113 8 113 4 113 b -68 22 -29 113 -61 73 b -70 0 -69 15 -70 6 b -13 -113 -70 -49 -47 -98 b -1 -115 -9 -115 -5 -115 b 63 -40 24 -115 53 -83 b 68 -1 66 -27 68 -15 b 12 111 68 48 46 97 "},vba:{x_min:-118.421875,x_max:597.53125,ha:381,o:"m 460 574 b 464 574 461 574 462 574 b 488 574 470 574 481 574 b 500 573 491 574 498 574 b 594 503 543 570 588 538 b 597 488 596 498 597 494 b 528 417 597 449 564 417 b 502 423 519 417 510 419 b 465 481 477 434 465 458 b 488 528 465 499 472 516 b 490 530 490 530 490 530 b 490 530 490 530 490 530 b 468 517 488 530 475 523 b 349 340 419 485 377 420 b 347 330 348 334 347 330 b 383 328 347 328 363 328 b 428 326 423 328 424 328 b 442 302 438 320 442 312 b 430 281 442 294 438 285 b 385 276 424 277 426 276 l 377 276 l 332 276 l 330 269 b 178 -117 303 126 250 -9 b 1 -249 129 -194 69 -237 b -20 -251 -6 -251 -13 -251 b -114 -187 -65 -251 -100 -227 b -118 -156 -117 -177 -118 -166 b -51 -84 -118 -116 -91 -84 b -31 -87 -46 -84 -39 -86 b 16 -152 0 -95 16 -124 b -12 -205 16 -173 8 -194 b -16 -208 -14 -206 -16 -208 b -14 -208 -16 -208 -14 -208 b -9 -206 -14 -208 -12 -208 b 74 -124 23 -197 54 -166 b 172 224 98 -79 125 22 b 185 276 178 252 183 274 b 185 276 185 276 185 276 b 141 276 185 276 181 276 b 91 280 96 276 96 276 b 77 302 83 285 77 294 b 91 326 77 312 83 320 b 148 328 95 328 96 328 l 198 330 l 202 341 b 460 574 249 473 351 566 "},vbf:{x_min:-53.078125,x_max:513.140625,ha:485,o:"m 185 383 b 196 384 187 383 191 384 b 277 334 230 384 259 365 b 288 301 281 324 288 306 b 288 297 288 298 288 297 b 294 302 289 297 291 299 b 394 370 323 338 367 367 b 404 371 398 370 401 371 b 510 272 453 371 498 328 b 513 237 513 262 513 251 b 507 172 513 217 511 192 b 326 -34 487 59 412 -26 b 314 -36 322 -36 318 -36 b 274 -24 298 -36 283 -31 l 265 -16 b 224 44 246 -1 232 20 b 223 49 224 47 223 49 b 223 49 223 49 223 49 b 149 -197 221 48 149 -194 b 149 -198 149 -197 149 -198 b 170 -210 149 -202 155 -205 b 187 -215 174 -210 175 -212 b 204 -231 201 -219 204 -222 b 197 -245 204 -240 202 -242 l 194 -248 l 76 -248 l -42 -248 l -46 -245 b -53 -231 -51 -242 -53 -240 b -35 -215 -53 -222 -49 -217 b -13 -210 -21 -212 -20 -212 b -6 -208 -10 -209 -8 -208 b 0 -206 -6 -208 -2 -206 b 25 -188 13 -201 21 -195 b 163 280 28 -183 163 276 b 166 291 163 283 164 287 b 167 302 167 295 167 299 b 155 324 167 315 161 324 b 155 324 155 324 155 324 b 65 230 125 322 85 280 b 53 215 61 217 58 215 b 51 215 53 215 51 215 b 42 224 46 215 42 217 b 57 263 42 231 47 244 b 140 360 77 305 104 337 b 152 370 144 365 149 369 b 185 383 157 376 172 381 m 374 306 b 366 308 371 308 368 308 b 300 273 348 308 321 294 b 284 254 288 262 287 259 b 280 242 283 249 281 245 b 257 169 279 240 270 213 l 236 98 l 236 93 b 251 48 238 77 243 61 b 279 27 258 37 272 27 b 281 27 279 27 280 27 b 291 31 281 27 287 30 b 396 170 334 52 378 109 b 406 247 402 197 406 224 b 401 277 406 259 405 270 b 374 306 397 290 383 303 "},vc3:{x_min:-10.890625,x_max:299.4375,ha:294,o:"m 136 460 b 142 462 137 462 140 462 b 166 449 152 462 161 456 b 171 428 168 446 168 445 b 288 131 194 322 238 209 b 298 115 295 120 296 117 b 299 106 298 112 299 109 b 273 81 299 91 287 81 b 255 86 268 81 261 83 b 155 116 225 104 183 116 l 152 116 l 149 108 b 141 83 148 102 144 91 b 134 48 137 69 134 58 b 149 9 134 34 140 24 b 153 -1 152 5 153 1 b 149 -9 153 -5 152 -6 b 144 -11 148 -11 147 -11 b 122 2 138 -11 133 -6 b 95 61 104 20 95 38 b 107 108 95 74 99 90 b 108 113 107 111 108 112 b 107 113 108 113 108 113 b 102 113 106 113 104 113 b 31 86 76 108 53 98 b 14 80 24 81 20 80 b -10 106 0 80 -10 91 b 0 131 -10 115 -9 116 b 115 430 49 209 91 317 b 136 460 119 451 123 456 "},vd0:{x_min:-10.890625,x_max:299.4375,ha:294,o:"m 44 174 b 51 174 47 174 49 174 b 68 173 55 174 61 174 l 287 112 l 551 40 b 615 20 617 22 609 23 b 626 0 622 16 626 8 b 615 -22 626 -9 622 -18 b 613 -23 613 -23 613 -23 b 613 -23 613 -23 613 -23 b 287 -113 613 -24 597 -29 l 68 -174 b 53 -176 61 -176 57 -176 b 39 -172 47 -176 43 -174 b 27 -151 31 -167 27 -159 b 39 -129 27 -141 31 -133 b 230 -74 43 -124 20 -131 l 370 -36 l 468 -9 b 498 0 484 -4 498 -1 b 468 8 498 0 484 2 l 370 34 l 230 73 b 40 126 28 129 43 124 b 27 149 31 131 27 140 b 44 174 27 161 34 170 m 205 110 l 205 300 b 205 330 245 330 245 300 l 245 300 l 245 -300 b 245 -330 205 -330 205 -300 l 205 -300 l 205 110 l 345 90 m 345 90 l 345 330 b 345 360 385 360 385 330 l 385 330 l 385 -270 b 385 -300 345 -300 345 -270 l 345 -270 l 345 90 "},vd1:{x_min:-20,x_max:320,ha:257,o:"m -8 200 b -8 210 8 200 16 200 l 20 148 -199 l 23 -615 b 0 -629 9 -629 6 -629 l -21 -612 l -21 -201 l -21 216 l -20 200 m 16 200 l 310 0 l 240 0 l 16 140 l 16 -120 l 240 0 l 310 0 l 16 -200 "},vd2:{x_min:0,x_max:430.75,ha:386,o:"m 0 200 l 0 -200 l 430 -200 l 430 200 l 0 200 "},vd3:{x_min:0,x_max:430.75,ha:386,o:"m 0 200 l 0 -200 l 430 -200 l 430 200 l 0 200 l 50 150 l 380 150 l 380 -150 l 50 -150 l 50 150 "},vd4:{x_min:0,x_max:430.75,ha:360,o:"m 0 150 l 0 -150 l 430 -150 l 430 150 l 0 150 "},vd5:{x_min:0,x_max:430.75,ha:360,o:"m 0 150 l 0 -150 l 430 -150 l 430 150 l 0 150 l 50 100 l 380 100 l 380 -100 l 50 -100 l 50 100"}},cssFontWeight:"normal",ascender:1903,underlinePosition:-125,cssFontStyle:"normal",boundingBox:{yMin:-2065.375,xMin:-695.53125,yMax:1901.578125,xMax:1159.671875},resolution:1e3,descender:-2066,familyName:"VexFlow-18",lineHeight:4093,underlineThickness:50};function I(t,e,n,i){!function(t){if(!(t instanceof I))throw new TypeError("Cannot call a class as a function")}(this),this.x=t,this.y=e,this.w=n,this.h=i}function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function B(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function D(t,e,n){return e&&B(t.prototype,e),n&&B(t,n),t}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function V(t,e,n,i,r,o){var s,a,u,l=0;function c(){return e+t[l++]*i}function h(){return n+t[l++]*r}for(;l<t.length;)switch(s=t[l++]){case"m":case"l":o[s](c(),h());break;case"q":a=c(),u=h(),o.q(c(),h(),a,u);break;case"b":a=c(),u=h(),o.b(c(),h(),c(),h(),a,u)}}var G=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(W,E),D(W,null,[{key:"loadMetrics",value:function(t,e,n){var i=t.glyphs[e];if(!i)throw new C.RERR("BadGlyph","Glyph ".concat(e," does not exist in font."));var r,o=i.x_min,s=i.x_max,a=i.ha;if(i.o)return n?i.cached_outline?r=i.cached_outline:(r=i.o.split(" "),i.cached_outline=r):(i.cached_outline&&delete i.cached_outline,r=i.o.split(" ")),{x_min:o,x_max:s,ha:a,outline:r};throw new C.RERR("BadGlyph","Glyph ".concat(e," has no outline defined."))}},{key:"renderGlyph",value:function(t,e,n,i,r,o){var s=72*i/(100*A.resolution),a=W.loadMetrics(A,r,!o);W.renderOutline(t,a.outline,s,e,n)}},{key:"renderOutline",value:function(t,e,n,i,r){t.beginPath(),t.moveTo(i,r),V(e,i,r,n,-n,{m:t.moveTo.bind(t),l:t.lineTo.bind(t),q:t.quadraticCurveTo.bind(t),b:t.bezierCurveTo.bind(t)}),t.fill()}},{key:"getOutlineBoundingBox",value:function(t,e,n,i){var r=new k;return V(t,n,i,e,-e,{m:r.addPoint.bind(r),l:r.addPoint.bind(r),q:r.addQuadraticCurve.bind(r),b:r.addBezierCurve.bind(r)}),new L(r.x1,r.y1,r.width(),r.height())}}]),D(W,[{key:"setOptions",value:function(t){C.Merge(this.options,t),this.reset()}},{key:"setPoint",value:function(t){return this.point=t,this}},{key:"setStave",value:function(t){return this.stave=t,this}},{key:"setXShift",value:function(t){return this.x_shift=t,this}},{key:"setYShift",value:function(t){return this.y_shift=t,this}},{key:"reset",value:function(){this.scale=72*this.point/(100*this.options.font.resolution),this.metrics=W.loadMetrics(this.options.font,this.code,this.options.cache),this.bbox=W.getOutlineBoundingBox(this.metrics.outline,this.scale,0,0)}},{key:"getMetrics",value:function(){if(!this.metrics)throw new C.RuntimeError("BadGlyph","Glyph ".concat(this.code," is not initialized."));return{x_min:this.metrics.x_min*this.scale,x_max:this.metrics.x_max*this.scale,width:this.bbox.getW(),height:this.bbox.getH()}}},{key:"setOriginX",value:function(t){var e=this.bbox,n=(t-Math.abs(e.getX()/e.getW()))*e.getW();this.originShift.x=-n}},{key:"setOriginY",value:function(t){var e=this.bbox,n=(t-Math.abs(e.getY()/e.getH()))*e.getH();this.originShift.y=-n}},{key:"setOrigin",value:function(t,e){this.setOriginX(t),this.setOriginY(e)}},{key:"render",value:function(t,e,n){if(!this.metrics)throw new C.RuntimeError("BadGlyph","Glyph ".concat(this.code," is not initialized."));var i=this.metrics.outline,r=this.scale;this.setRendered(),this.applyStyle(t),W.renderOutline(t,i,r,e+this.originShift.x,n+this.originShift.y),this.restoreStyle(t)}},{key:"renderToStave",value:function(t){if(this.checkContext(),!this.metrics)throw new C.RuntimeError("BadGlyph","Glyph ".concat(this.code," is not initialized."));if(!this.stave)throw new C.RuntimeError("GlyphError","No valid stave");var e=this.metrics.outline,n=this.scale;this.setRendered(),this.applyStyle(),W.renderOutline(this.context,e,n,t+this.x_shift,this.stave.getYForGlyphs()+this.y_shift),this.restoreStyle()}}]),W);function W(t,e,n){var i;return function(t){if(!(t instanceof W))throw new TypeError("Cannot call a class as a function")}(this),(i=function(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,F(W).call(this))).setAttribute("type","Glyph"),i.code=t,i.point=e,i.options={cache:!0,font:A},i.metrics=null,i.x_shift=0,i.y_shift=0,i.originShift={x:0,y:0},n?i.setOptions(n):i.reset(),i}function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var H={STEM_WIDTH:1.5,STEM_HEIGHT:35,STAVE_LINE_THICKNESS:1,RESOLUTION:16384,DEFAULT_NOTATION_FONT_SCALE:39,DEFAULT_TABLATURE_FONT_SCALE:39,SLASH_NOTEHEAD_WIDTH:15,TEXT_HEIGHT_OFFSET_HACK:1,IsKerned:!0};function Y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function z(t,e,n){return e&&Y(t.prototype,e),n&&Y(t,n),t}H.clefProperties=function(t){if(!t)throw new C.RERR("BadArgument","Invalid clef: "+t);var e=H.clefProperties.values[t];if(!e)throw new C.RERR("BadArgument","Invalid clef: "+t);return e},H.clefProperties.values={treble:{line_shift:0},bass:{line_shift:6},tenor:{line_shift:4},alto:{line_shift:3},soprano:{line_shift:1},percussion:{line_shift:0},"mezzo-soprano":{line_shift:2},"baritone-c":{line_shift:5},"baritone-f":{line_shift:5},subbass:{line_shift:7},french:{line_shift:-1}},H.keyProperties=function(t,e,n){void 0===e&&(e="treble");var i={octave_shift:0};"object"===U(n)&&C.Merge(i,n);var r=t.split("/");if(r.length<2)throw new C.RERR("BadArguments","Key must have note + octave and an optional glyph: ".concat(t));var o=r[0].toUpperCase(),s=H.keyProperties.note_values[o];if(!s)throw new C.RERR("BadArguments","Invalid key name: "+o);s.octave&&(r[1]=s.octave);var a=parseInt(r[1],10),u=(7*(a+=-1*i.octave_shift)-28+s.index)/2,l=0;(u+=H.clefProperties(e).line_shift)<=0&&2*u%2==0&&(l=1),6<=u&&2*u%2==0&&(l=-1);var c=void 0!==s.int_val?12*a+s.int_val:null,h=s.code,f=s.shift_right;if(2<r.length&&r[2]){var p=r[2].toUpperCase(),d=H.keyProperties.note_glyph[p];d&&(h=d.code,f=d.shift_right)}return{key:o,octave:a,line:u,int_value:c,accidental:s.accidental,code:h,stroke:l,shift_right:f,displaced:!1}},H.keyProperties.note_values={C:{index:0,int_val:0,accidental:null},CN:{index:0,int_val:0,accidental:"n"},"C#":{index:0,int_val:1,accidental:"#"},"C##":{index:0,int_val:2,accidental:"##"},CB:{index:0,int_val:-1,accidental:"b"},CBB:{index:0,int_val:-2,accidental:"bb"},D:{index:1,int_val:2,accidental:null},DN:{index:1,int_val:2,accidental:"n"},"D#":{index:1,int_val:3,accidental:"#"},"D##":{index:1,int_val:4,accidental:"##"},DB:{index:1,int_val:1,accidental:"b"},DBB:{index:1,int_val:0,accidental:"bb"},E:{index:2,int_val:4,accidental:null},EN:{index:2,int_val:4,accidental:"n"},"E#":{index:2,int_val:5,accidental:"#"},"E##":{index:2,int_val:6,accidental:"##"},EB:{index:2,int_val:3,accidental:"b"},EBB:{index:2,int_val:2,accidental:"bb"},F:{index:3,int_val:5,accidental:null},FN:{index:3,int_val:5,accidental:"n"},"F#":{index:3,int_val:6,accidental:"#"},"F##":{index:3,int_val:7,accidental:"##"},FB:{index:3,int_val:4,accidental:"b"},FBB:{index:3,int_val:3,accidental:"bb"},G:{index:4,int_val:7,accidental:null},GN:{index:4,int_val:7,accidental:"n"},"G#":{index:4,int_val:8,accidental:"#"},"G##":{index:4,int_val:9,accidental:"##"},GB:{index:4,int_val:6,accidental:"b"},GBB:{index:4,int_val:5,accidental:"bb"},A:{index:5,int_val:9,accidental:null},AN:{index:5,int_val:9,accidental:"n"},"A#":{index:5,int_val:10,accidental:"#"},"A##":{index:5,int_val:11,accidental:"##"},AB:{index:5,int_val:8,accidental:"b"},ABB:{index:5,int_val:7,accidental:"bb"},B:{index:6,int_val:11,accidental:null},BN:{index:6,int_val:11,accidental:"n"},"B#":{index:6,int_val:12,accidental:"#"},"B##":{index:6,int_val:13,accidental:"##"},BB:{index:6,int_val:10,accidental:"b"},BBB:{index:6,int_val:9,accidental:"bb"},R:{index:6,int_val:9,rest:!0},X:{index:6,accidental:"",octave:4,code:"v3e",shift_right:5.5}},H.keyProperties.note_glyph={D0:{code:"v27",shift_right:-.5},D1:{code:"v2d",shift_right:-.5},D2:{code:"v22",shift_right:-.5},D3:{code:"v70",shift_right:-.5},T0:{code:"v49",shift_right:-2,stem_up_y_offset:-4,stem_down_y_offset:4},T1:{code:"v93",shift_right:.5,stem_up_y_offset:-4,stem_down_y_offset:4},T2:{code:"v40",shift_right:.5,stem_up_y_offset:-4,stem_down_y_offset:4},T3:{code:"v7d",shift_right:.5,stem_up_y_offset:-4,stem_down_y_offset:4},X0:{code:"v92",shift_right:-2,stem_up_y_offset:4,stem_down_y_offset:4},X1:{code:"v95",shift_right:-.5,stem_up_y_offset:4,stem_down_y_offset:4},X2:{code:"v3e",shift_right:.5,stem_up_y_offset:4,stem_down_y_offset:4},X3:{code:"v3b",shift_right:-2,stem_up_y_offset:2,stem_down_y_offset:2},S1:{code:"vd3",shift_right:0},S2:{code:"vd2",shift_right:0},R1:{code:"vd5",shift_right:0},R2:{code:"vd4",shift_right:0}},H.integerToNote=function(t){if(void 0===t)throw new C.RERR("BadArguments","Undefined integer for integerToNote");if(t<-2)throw new C.RERR("BadArguments","integerToNote requires integer > -2: ".concat(t));var e=H.integerToNote.table[t];if(!e)throw new C.RERR("BadArguments","Unknown note value for integer: ".concat(t));return e},H.integerToNote.table={0:"C",1:"C#",2:"D",3:"D#",4:"E",5:"F",6:"F#",7:"G",8:"G#",9:"A",10:"A#",11:"B"},H.tabToGlyph=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=null,i=0,r=0;if("X"===t.toString().toUpperCase()){var o=new G("v7f",H.DEFAULT_TABLATURE_FONT_SCALE).getMetrics();n="v7f",i=o.width,r=-o.height/2}else i=H.textWidth(t.toString());return{text:t,code:n,getWidth:function(){return i*e},shift_y:r}},H.textWidth=function(t){return 7*t.toString().length},H.articulationCodes=function(t){return H.articulationCodes.articulations[t]},H.articulationCodes.articulations={"a.":{code:"v23",between_lines:!0},av:{code:"v28",between_lines:!0},"a>":{code:"v42",between_lines:!0},"a-":{code:"v25",between_lines:!0},"a^":{code:"va",between_lines:!1},"a+":{code:"v8b",between_lines:!1},ao:{code:"v94",between_lines:!1},ah:{code:"vb9",between_lines:!1},"a@a":{code:"v43",between_lines:!1},"a@u":{code:"v5b",between_lines:!1},"a|":{code:"v75",between_lines:!1},am:{code:"v97",between_lines:!1},"a,":{code:"vb3",between_lines:!1}},H.accidentalCodes=function(t){return H.accidentalCodes.accidentals[t]},H.accidentalCodes.accidentals={"#":{code:"v18",parenRightPaddingAdjustment:-1},"##":{code:"v7f",parenRightPaddingAdjustment:-1},b:{code:"v44",parenRightPaddingAdjustment:-2},bb:{code:"v26",parenRightPaddingAdjustment:-2},n:{code:"v4e",parenRightPaddingAdjustment:-1},"{":{code:"v9c",parenRightPaddingAdjustment:-1},"}":{code:"v84",parenRightPaddingAdjustment:-1},db:{code:"v9e",parenRightPaddingAdjustment:-1},d:{code:"vab",parenRightPaddingAdjustment:0},bbs:{code:"v90",parenRightPaddingAdjustment:-1},"++":{code:"v51",parenRightPaddingAdjustment:-1},"+":{code:"v78",parenRightPaddingAdjustment:-1},"+-":{code:"v8d",parenRightPaddingAdjustment:-1},"++-":{code:"v7a",parenRightPaddingAdjustment:-1},bs:{code:"vb7",parenRightPaddingAdjustment:-1},bss:{code:"v39",parenRightPaddingAdjustment:-1},o:{code:"vd0",parenRightPaddingAdjustment:-1},k:{code:"vd1",parenRightPaddingAdjustment:-1}},H.accidentalColumnsTable={1:{a:[1],b:[1]},2:{a:[1,2]},3:{a:[1,3,2],b:[1,2,1],second_on_bottom:[1,2,3]},4:{a:[1,3,4,2],b:[1,2,3,1],spaced_out_tetrachord:[1,2,1,2]},5:{a:[1,3,5,4,2],b:[1,2,4,3,1],spaced_out_pentachord:[1,2,3,2,1],very_spaced_out_pentachord:[1,2,1,2,1]},6:{a:[1,3,5,6,4,2],b:[1,2,4,5,3,1],spaced_out_hexachord:[1,3,2,1,3,2],very_spaced_out_hexachord:[1,2,1,2,1,2]}},H.ornamentCodes=function(t){return H.ornamentCodes.ornaments[t]},H.ornamentCodes.ornaments={mordent:{code:"v1e"},mordent_inverted:{code:"v45"},turn:{code:"v72"},turn_inverted:{code:"v33"},tr:{code:"v1f"},upprall:{code:"v60"},downprall:{code:"vb4"},prallup:{code:"v6d"},pralldown:{code:"v2c"},upmordent:{code:"v29"},downmordent:{code:"v68"},lineprall:{code:"v20"},prallprall:{code:"v86"}},H.keySignature=function(t){var e=H.keySignature.keySpecs[t];if(!e)throw new C.RERR("BadKeySignature","Bad key signature spec: '".concat(t,"'"));if(!e.acc)return[];for(var n=H.keySignature.accidentalList(e.acc),i=[],r=0;r<e.num;++r){var o=n[r];i.push({type:e.acc,line:o})}return i},H.keySignature.keySpecs={C:{acc:null,num:0},Am:{acc:null,num:0},F:{acc:"b",num:1},Dm:{acc:"b",num:1},Bb:{acc:"b",num:2},Gm:{acc:"b",num:2},Eb:{acc:"b",num:3},Cm:{acc:"b",num:3},Ab:{acc:"b",num:4},Fm:{acc:"b",num:4},Db:{acc:"b",num:5},Bbm:{acc:"b",num:5},Gb:{acc:"b",num:6},Ebm:{acc:"b",num:6},Cb:{acc:"b",num:7},Abm:{acc:"b",num:7},G:{acc:"#",num:1},Em:{acc:"#",num:1},D:{acc:"#",num:2},Bm:{acc:"#",num:2},A:{acc:"#",num:3},"F#m":{acc:"#",num:3},E:{acc:"#",num:4},"C#m":{acc:"#",num:4},B:{acc:"#",num:5},"G#m":{acc:"#",num:5},"F#":{acc:"#",num:6},"D#m":{acc:"#",num:6},"C#":{acc:"#",num:7},"A#m":{acc:"#",num:7}},H.unicode={sharp:String.fromCharCode(parseInt("266F",16)),flat:String.fromCharCode(parseInt("266D",16)),natural:String.fromCharCode(parseInt("266E",16)),triangle:String.fromCharCode(parseInt("25B3",16)),"o-with-slash":String.fromCharCode(parseInt("00F8",16)),degrees:String.fromCharCode(parseInt("00B0",16)),circle:String.fromCharCode(parseInt("25CB",16))},H.keySignature.accidentalList=function(t){return{b:[2,.5,2.5,1,3,1.5,3.5],"#":[0,1.5,-.5,1,2.5,.5,2]}[t]},H.parseNoteDurationString=function(t){if("string"!=typeof t)return null;var e=/(\d*\/?\d+|[a-z])(d*)([nrhms]|$)/.exec(t);if(!e)return null;var n=e[1],i=e[2].length,r=e[3];return 0===r.length&&(r="n"),{duration:n,dots:i,type:r}},H.parseNoteData=function(t){var e=t.duration,n=H.parseNoteDurationString(e);if(!n)return null;var i=H.durationToTicks(n.duration);if(null==i)return null;var r=t.type;if(r){if("n"!==r&&"r"!==r&&"h"!==r&&"m"!==r&&"s"!==r)return null}else{if(r=n.type,void 0!==t.keys){var o=t.keys[0].split("/");o&&3===o.length&&(r=o[2])}r=r||"n"}var s=t.dots?t.dots:n.dots;if("number"!=typeof s)return null;for(var a=i,u=0;u<s;u++){if(a<=1)return null;i+=a/=2}return{duration:n.duration,type:r,dots:s,ticks:i}},H.sanitizeDuration=function(t){var e=H.durationAliases[t];if(void 0!==e&&(t=e),void 0===H.durationToTicks.durations[t])throw new C.RERR("BadArguments","The provided duration is not valid: ".concat(t));return t},H.durationToFraction=function(t){return(new d).parse(H.sanitizeDuration(t))},H.durationToNumber=function(t){return H.durationToFraction(t).value()},H.durationToTicks=function(t){t=H.sanitizeDuration(t);var e=H.durationToTicks.durations[t];return void 0===e?null:e},H.durationToTicks.durations={"1/2":2*H.RESOLUTION,1:H.RESOLUTION/1,2:H.RESOLUTION/2,4:H.RESOLUTION/4,8:H.RESOLUTION/8,16:H.RESOLUTION/16,32:H.RESOLUTION/32,64:H.RESOLUTION/64,128:H.RESOLUTION/128,256:H.RESOLUTION/256},H.durationAliases={w:"1",h:"2",q:"4",b:"256"},H.durationToGlyph=function(t,e){t=H.sanitizeDuration(t);var n=H.durationToGlyph.duration_codes[t];if(void 0===n)return null;e=e||"n";var i=n.type[e];if(void 0===i){var r=H.keyProperties.note_glyph[e.toUpperCase()];if(void 0===r)return null;i={code_head:r.code,stem_up_y_offset:r.stem_up_y_offset,stem_down_y_offset:r.stem_down_y_offset}}return C.Merge(C.Merge({},n.common),i)},H.durationToGlyph.duration_codes={"1/2":{common:{getWidth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DEFAULT_NOTATION_FONT_SCALE;return new G(this.code_head||"v53",t).getMetrics().width},stem:!1,stem_offset:0,flag:!1,stem_up_extension:-H.STEM_HEIGHT,stem_down_extension:-H.STEM_HEIGHT,tabnote_stem_up_extension:-H.STEM_HEIGHT,tabnote_stem_down_extension:-H.STEM_HEIGHT,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"v53"},h:{code_head:"v59"},m:{code_head:"vf",stem_offset:0},r:{code_head:"v31",rest:!0,position:"B/5",dot_shiftY:.5},s:{getWidth:function(){return H.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},1:{common:{getWidth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DEFAULT_NOTATION_FONT_SCALE;return new G(this.code_head||"v1d",t).getMetrics().width},stem:!1,stem_offset:0,flag:!1,stem_up_extension:-H.STEM_HEIGHT,stem_down_extension:-H.STEM_HEIGHT,tabnote_stem_up_extension:-H.STEM_HEIGHT,tabnote_stem_down_extension:-H.STEM_HEIGHT,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"v1d"},h:{code_head:"v46"},m:{code_head:"v92",stem_offset:-3},r:{code_head:"v5c",rest:!0,position:"D/5",dot_shiftY:.5},s:{getWidth:function(){return H.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},2:{common:{getWidth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DEFAULT_NOTATION_FONT_SCALE;return new G(this.code_head||"v81",t).getMetrics().width},stem:!0,stem_offset:0,flag:!1,stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"v81"},h:{code_head:"v2d"},m:{code_head:"v95",stem_offset:-3},r:{code_head:"vc",stem:!1,rest:!0,position:"B/4",dot_shiftY:-.5},s:{getWidth:function(){return H.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},4:{common:{getWidth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DEFAULT_NOTATION_FONT_SCALE;return new G(this.code_head||"vb",t).getMetrics().width},stem:!0,stem_offset:0,flag:!1,stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e",stem_offset:-3},r:{code_head:"v7c",stem:!1,rest:!0,position:"B/4",dot_shiftY:-.5,line_above:1.5,line_below:1.5},s:{getWidth:function(){return H.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},8:{common:{getWidth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DEFAULT_NOTATION_FONT_SCALE;return new G(this.code_head||"vb",t).getMetrics().width},stem:!0,stem_offset:0,flag:!0,beam_count:1,code_flag_upstem:"v54",code_flag_downstem:"v9a",stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"va5",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-.5,line_above:1,line_below:1},s:{getWidth:function(){return H.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},16:{common:{beam_count:2,getWidth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DEFAULT_NOTATION_FONT_SCALE;return new G(this.code_head||"vb",t).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"v3f",code_flag_downstem:"v8f",stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"v3c",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-.5,line_above:1,line_below:2},s:{getWidth:function(){return H.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},32:{common:{beam_count:3,getWidth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DEFAULT_NOTATION_FONT_SCALE;return new G(this.code_head||"vb",t).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"v47",code_flag_downstem:"v2a",stem_up_extension:9,stem_down_extension:9,tabnote_stem_up_extension:8,tabnote_stem_down_extension:5,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"v55",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-1.5,line_above:2,line_below:2},s:{getWidth:function(){return H.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},64:{common:{beam_count:4,getWidth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DEFAULT_NOTATION_FONT_SCALE;return new G(this.code_head||"vb",t).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"va9",code_flag_downstem:"v58",stem_up_extension:13,stem_down_extension:13,tabnote_stem_up_extension:12,tabnote_stem_down_extension:9,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"v38",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-1.5,line_above:2,line_below:3},s:{getWidth:function(){return H.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},128:{common:{beam_count:5,getWidth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:H.DEFAULT_NOTATION_FONT_SCALE;return new G(this.code_head||"vb",t).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"v9b",code_flag_downstem:"v30",stem_up_extension:22,stem_down_extension:22,tabnote_stem_up_extension:21,tabnote_stem_down_extension:18,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"vaa",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:1.5,line_above:3,line_below:3},s:{getWidth:function(){return H.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}}},H.smufl={},H.smufl.to_code_points={bracketTop:"v1b",bracketBottom:"v10",barlineTick:"v6f",segno:"v8c",coda:"v4d",gClef:"v83",cClef:"vad",fClef:"v79",unpitchedPercussionClef1:"v59","6stringTabClef":"v2f",timeSig0:"v0",timeSig1:"v1",timeSig2:"v2",timeSig3:"v3",timeSig4:"v4",timeSig5:"v5",timeSig6:"v6",timeSig7:"v7",timeSig8:"v8",timeSig9:"v9",timeSigCommon:"v41",timeSigCutCommon:"vb6",noteheadDoubleWhole:"v53",noteheadWhole:"v1d",noteheadHalf:"v81",noteheadBlack:"vb",noteheadXWhole:"v92",noteheadXHalf:"v95",noteheadXBlack:"v3e",noteheadCircleX:"v3b",noteheadTriangleUpWhole:"v49",noteheadTriangleUpHalf:"v93",noteheadTriangleUpBlack:"v40",noteheadDiamondWhole:"v46",noteheadDiamondHalf:"v2d",noteheadDiamondBlack:"v22",augmentationDot:"v23",tremolo1:"v74",flag8thUp:"v54",flag8thDown:"v9a",flag16thUp:"v3f",flag16thDown:"v8f",flag32ndUp:"v47",flag32ndDown:"v2a",flag64thUp:"va9",flag64thDown:"v58",flag128thUp:"v9b",flag128thDown:"v30",accidentalFlat:"v44",accidentalNatural:"v4e",accidentalSharp:"v18",accidentalDoubleSharp:"v7f",accidentalDoubleFlat:"v26",accidentalParensLeft:"v9c",accidentalParensRight:"v84",accidentalQuarterToneFlatStein:"vab",accidentalThreeQuarterTonesFlatZimmermann:"v9e",accidentalQuarterToneSharpStein:"v78",accidentalThreeQuarterTonesSharpStein:"v51",accidentalBuyukMucennebFlat:"v39",accidentalBakiyeFlat:"vb7",accidentalKomaSharp:"v51",accidentalKucukMucennebSharp:"v8d",accidentalKoron:"vd1",accidentalSori:"vd0",articAccentAbove:"v42",articAccentBelow:"v42",articTenutoAbove:"v25",articTenutoBelow:"v25",articStaccatoAbove:"v23",articStaccatoBelow:"v23",articStaccatissimoAbove:"v28",articMarcatoAbove:"va",fermataAbove:"v43",fermataBelow:"v5b",breathMarkComma:"v6c",breathMarkUpbow:"v8a",caesura:"v34",caesuraCurved:"v4b",restMaxima:"v59",restDoubleWhole:"v31",restWhole:"v5c",restHalf:"vc",restQuarter:"v7c",rest8th:"va5",rest16th:"v3c",rest32nd:"v55",rest64th:"v38",rest128th:"vaa",dynamicPiano:"vbf",dynamicMezzo:"v62",dynamicForte:"vba",dynamicRinforzando:"vba",dynamicSforzando:"v4a",dynamicZ:"v80",ornamentTrill:"v1f",ornamentTurn:"v72",ornamentTurnSlash:"v33",ornamentMordent:"v45",ornamentMordentInverted:"v1e",ornamentTremblement:"v86",ornamentPrecompAppoggTrill:"v20",ornamentPrecompSlideTrillDAnglebert:"v60",ornamentPrecompSlideTrillBach:"v29",ornamentPrecompTrillSuffixDandrieu:"v6d",ornamentPrecompDoubleCadenceUpperPrefix:"vb4",ornamentPrecompDoubleCadenceUpperPrefixTurn:"v68",ornamentPrecompTrillLowerSuffix:"v2c",stringsDownBow:"v94",stringsUpBow:"v75",stringsHarmonic:"vb9",pluckedSnapPizzicatoAbove:"v94",pluckedLeftHandPizzicato:"v8b",keyboardPedalPed:"v36",keyboardPedalUp:"v5d",pictChokeCymbal:"vb3",wiggleArpeggiatoUp:"va3",arrowheadBlackUp:"vc3",arrowheadBlackDown:"v52"},H.TIME4_4={num_beats:4,beat_value:4,resolution:H.RESOLUTION};var X=(z(K,null,[{key:"WIDTH",get:function(){return 600}},{key:"HEIGHT",get:function(){return 400}}]),z(K,[{key:"clear",value:function(){this.vexFlowCanvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"openGroup",value:function(){}},{key:"closeGroup",value:function(){}},{key:"add",value:function(){}},{key:"setFont",value:function(t,e,n){return this.vexFlowCanvasContext.font=(n||"")+" "+e+"pt "+t,this}},{key:"setRawFont",value:function(t){return this.vexFlowCanvasContext.font=t,this}},{key:"setFillStyle",value:function(t){return this.vexFlowCanvasContext.fillStyle=t,this}},{key:"setBackgroundFillStyle",value:function(t){return this.background_fillStyle=t,this}},{key:"setStrokeStyle",value:function(t){return this.vexFlowCanvasContext.strokeStyle=t,this}},{key:"setShadowColor",value:function(t){return this.vexFlowCanvasContext.shadowColor=t,this}},{key:"setShadowBlur",value:function(t){return this.vexFlowCanvasContext.shadowBlur=t,this}},{key:"setLineWidth",value:function(t){return this.vexFlowCanvasContext.lineWidth=t,this}},{key:"setLineCap",value:function(t){return this.vexFlowCanvasContext.lineCap=t,this}},{key:"setLineDash",value:function(t){return this.vexFlowCanvasContext.lineDash=t,this}},{key:"scale",value:function(t,e){return this.vexFlowCanvasContext.scale(parseFloat(t),parseFloat(e))}},{key:"resize",value:function(t,e){return this.vexFlowCanvasContext.resize(parseInt(t,10),parseInt(e,10))}},{key:"rect",value:function(t,e,n,i){return this.vexFlowCanvasContext.rect(t,e,n,i)}},{key:"fillRect",value:function(t,e,n,i){return this.vexFlowCanvasContext.fillRect(t,e,n,i)}},{key:"clearRect",value:function(t,e,n,i){return this.vexFlowCanvasContext.clearRect(t,e,n,i)}},{key:"beginPath",value:function(){return this.vexFlowCanvasContext.beginPath()}},{key:"moveTo",value:function(t,e){return this.vexFlowCanvasContext.moveTo(t,e)}},{key:"lineTo",value:function(t,e){return this.vexFlowCanvasContext.lineTo(t,e)}},{key:"bezierCurveTo",value:function(t,e,n,i,r,o){return this.vexFlowCanvasContext.bezierCurveTo(t,e,n,i,r,o)}},{key:"quadraticCurveTo",value:function(t,e,n,i){return this.vexFlowCanvasContext.quadraticCurveTo(t,e,n,i)}},{key:"arc",value:function(t,e,n,i,r,o){return this.vexFlowCanvasContext.arc(t,e,n,i,r,o)}},{key:"glow",value:function(){return this.vexFlowCanvasContext.glow()}},{key:"fill",value:function(){return this.vexFlowCanvasContext.fill()}},{key:"stroke",value:function(){return this.vexFlowCanvasContext.stroke()}},{key:"closePath",value:function(){return this.vexFlowCanvasContext.closePath()}},{key:"measureText",value:function(t){return this.vexFlowCanvasContext.measureText(t)}},{key:"fillText",value:function(t,e,n){return this.vexFlowCanvasContext.fillText(t,e,n)}},{key:"save",value:function(){return this.vexFlowCanvasContext.save()}},{key:"restore",value:function(){return this.vexFlowCanvasContext.restore()}}]),K);function K(t){!function(t){if(!(t instanceof K))throw new TypeError("Cannot call a class as a function")}(this),(this.vexFlowCanvasContext=t).canvas?this.canvas=t.canvas:this.canvas={width:K.WIDTH,height:K.HEIGHT}}function q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var J=(q(Q.prototype,[{key:"openGroup",value:function(){}},{key:"closeGroup",value:function(){}},{key:"add",value:function(){}},{key:"setFont",value:function(t,e,n){return this.state.font_family=t,this.state.font_size=e,this.state.font_weight=n,this.attributes.font=(this.state.font_weight||"")+" "+this.state.font_size*this.state.scale.x+"pt "+this.state.font_family,this}},{key:"setRawFont",value:function(t){return this.attributes.font=t,this}},{key:"setFillStyle",value:function(t){return this.attributes.fill=t,this}},{key:"setBackgroundFillStyle",value:function(t){return this.background_attributes.fill=t,this.background_attributes.stroke=t,this}},{key:"setStrokeStyle",value:function(t){return this.attributes.stroke=t,this}},{key:"setShadowColor",value:function(t){return this.shadow_attributes.color=t,this}},{key:"setShadowBlur",value:function(t){return this.shadow_attributes.width=t,this}},{key:"setLineWidth",value:function(t){this.attributes["stroke-width"]=t,this.lineWidth=t}},{key:"setLineDash",value:function(){return this}},{key:"setLineCap",value:function(){return this}},{key:"scale",value:function(t,e){return this.state.scale={x:t,y:e},this.attributes.transform="S"+t+","+e+",0,0",this.attributes.scale=t+","+e+",0,0",this.attributes.font=this.state.font_size*this.state.scale.x+"pt "+this.state.font_family,this.background_attributes.transform="S"+t+","+e+",0,0",this.background_attributes.font=this.state.font_size*this.state.scale.x+"pt "+this.state.font_family,this}},{key:"clear",value:function(){this.paper.clear()}},{key:"resize",value:function(t,e){return this.element.style.width=t,this.paper.setSize(t,e),this}},{key:"setViewBox",value:function(t){this.paper.canvas.setAttribute("viewBox",t)}},{key:"rect",value:function(t,e,n,i){return i<0&&(e+=i,i=-i),this.paper.rect(t,e,n-.5,i-.5).attr(this.attributes).attr("fill","none").attr("stroke-width",this.lineWidth),this}},{key:"fillRect",value:function(t,e,n,i){return i<0&&(e+=i,i=-i),this.paper.rect(t,e,n-.5,i-.5).attr(this.attributes),this}},{key:"clearRect",value:function(t,e,n,i){return i<0&&(e+=i,i=-i),this.paper.rect(t,e,n-.5,i-.5).attr(this.background_attributes),this}},{key:"beginPath",value:function(){return this.path="",this.pen.x=0,this.pen.y=0,this}},{key:"moveTo",value:function(t,e){return this.path+="M"+t+","+e,this.pen.x=t,this.pen.y=e,this}},{key:"lineTo",value:function(t,e){return this.path+="L"+t+","+e,this.pen.x=t,this.pen.y=e,this}},{key:"bezierCurveTo",value:function(t,e,n,i,r,o){return this.path+="C"+t+","+e+","+n+","+i+","+r+","+o,this.pen.x=r,this.pen.y=o,this}},{key:"quadraticCurveTo",value:function(t,e,n,i){return this.path+="Q"+t+","+e+","+n+","+i,this.pen.x=n,this.pen.y=i,this}},{key:"arc",value:function(t,e,n,i,r,o){function s(t){for(;t<0;)t+=2*Math.PI;for(;t>2*Math.PI;)t-=2*Math.PI;return t}if((i=s(i))>(r=s(r))){var a=i;i=r,r=a,o=!o}var u=r-i;return u>Math.PI?(this.arcHelper(t,e,n,i,i+u/2,o),this.arcHelper(t,e,n,i+u/2,r,o)):this.arcHelper(t,e,n,i,r,o),this}},{key:"arcHelper",value:function(t,e,n,i,r,o){var s=t+n*Math.cos(i),a=e+n*Math.sin(i),u=t+n*Math.cos(r),l=e+n*Math.sin(r),c=0,h=0;o?(h=1,r-i<Math.PI&&(c=1)):r-i>Math.PI&&(c=1),this.path+="M"+s+","+a+",A"+n+","+n+",0,"+c+","+h+","+u+","+l+"M"+this.pen.x+","+this.pen.y}},{key:"glow",value:function(){var t=this.paper.set();if(0<this.shadow_attributes.width)for(var e=this.shadow_attributes,n=e.width/2,i=1;i<=n;i++)t.push(this.paper.path(this.path).attr({stroke:e.color,"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/n*i).toFixed(3),opacity:+((e.opacity||.3)/n).toFixed(3),transform:this.attributes.transform,scale:this.attributes.scale}));return t}},{key:"fill",value:function(){var t=this.paper.path(this.path).attr(this.attributes).attr("stroke-width",0);return this.glow(t),this}},{key:"stroke",value:function(){var t=this.lineWidth*(this.state.scale.x+this.state.scale.y)/2,e=this.paper.path(this.path).attr(this.attributes).attr("fill","none").attr("stroke-width",t);return this.glow(e),this}},{key:"closePath",value:function(){return this.path+="Z",this}},{key:"measureText",value:function(t){var e=this.paper.text(0,0,t).attr(this.attributes).attr("fill","none").attr("stroke","none"),n=e.getBBox();return e.remove(),{width:n.width,height:n.height}}},{key:"fillText",value:function(t,e,n){return this.paper.text(e+this.measureText(t).width/2,n-this.state.font_size/(2.25*this.state.scale.y),t).attr(this.attributes),this}},{key:"save",value:function(){return this.state_stack.push({state:{font_family:this.state.font_family},attributes:{font:this.attributes.font,fill:this.attributes.fill,stroke:this.attributes.stroke,"stroke-width":this.attributes["stroke-width"]},shadow_attributes:{width:this.shadow_attributes.width,color:this.shadow_attributes.color}}),this}},{key:"restore",value:function(){var t=this.state_stack.pop();return this.state.font_family=t.state.font_family,this.attributes.font=t.attributes.font,this.attributes.fill=t.attributes.fill,this.attributes.stroke=t.attributes.stroke,this.attributes["stroke-width"]=t.attributes["stroke-width"],this.shadow_attributes.width=t.shadow_attributes.width,this.shadow_attributes.color=t.shadow_attributes.color,this}}]),Q);function Q(t){!function(t){if(!(t instanceof Q))throw new TypeError("Cannot call a class as a function")}(this),this.element=t,this.paper=Raphael(t),this.path="",this.pen={x:0,y:0},this.lineWidth=1,this.state={scale:{x:1,y:1},font_family:"Arial",font_size:8,font_weight:800},this.attributes={"stroke-width":.3,fill:"black",stroke:"black",font:"10pt Arial"},this.background_attributes={"stroke-width":0,fill:"white",stroke:"white",font:"10pt Arial"},this.shadow_attributes={width:0,color:"black"},this.state_stack=[]}function Z(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var $={path:{x:!0,y:!0,width:!0,height:!0},rect:{},text:{width:!0,height:!0}},tt={"font-family":!0,"font-weight":!0,"font-style":!0,"font-size":!0};C.Merge($.rect,tt),C.Merge($.path,tt);var et=(Z(nt.prototype,[{key:"create",value:function(t){return document.createElementNS(this.svgNS,t)}},{key:"openGroup",value:function(t,e,n){var i=this.create("g");return this.groups.push(i),this.parent.appendChild(i),this.parent=i,t&&i.setAttribute("class",C.Prefix(t)),e&&i.setAttribute("id",C.Prefix(e)),n&&n.pointerBBox&&i.setAttribute("pointer-events","bounding-box"),i}},{key:"closeGroup",value:function(){this.groups.pop(),this.parent=this.groups[this.groups.length-1]}},{key:"add",value:function(t){this.parent.appendChild(t)}},{key:"iePolyfill",value:function(){"undefined"!=typeof navigator&&(this.ie=/MSIE 9/i.test(navigator.userAgent)||/MSIE 10/i.test(navigator.userAgent)||/rv:11\.0/i.test(navigator.userAgent)||/Trident/i.test(navigator.userAgent))}},{key:"setFont",value:function(t,e,n){var i=!1,r=!1,o="normal";"string"==typeof n&&(-1!==n.indexOf("italic")&&(n=n.replace(/italic/g,""),r=!0),-1!==n.indexOf("bold")&&(n=n.replace(/bold/g,""),i=!0),n=n.replace(/ /g,""));var s={"font-family":t,"font-size":e+"pt","font-weight":n=void 0===(n=i?"bold":n)||""===n?"normal":n,"font-style":o=r?"italic":o};return this.fontSize=Number(e),C.Merge(this.attributes,s),C.Merge(this.state,s),this}},{key:"setRawFont",value:function(t){var e=(t=t.trim()).split(" ");return this.attributes["font-family"]=e[1],this.state["font-family"]=e[1],this.attributes["font-size"]=e[0],this.state["font-size"]=e[0],this.fontSize=Number(e[0].match(/\d+/)),this}},{key:"setFillStyle",value:function(t){return this.attributes.fill=t,this}},{key:"setBackgroundFillStyle",value:function(t){return this.background_attributes.fill=t,this.background_attributes.stroke=t,this}},{key:"setStrokeStyle",value:function(t){return this.attributes.stroke=t,this}},{key:"setShadowColor",value:function(t){return this.shadow_attributes.color=t,this}},{key:"setShadowBlur",value:function(t){return this.shadow_attributes.width=t,this}},{key:"setLineWidth",value:function(t){this.attributes["stroke-width"]=t,this.lineWidth=t}},{key:"setLineDash",value:function(t){if("[object Array]"===Object.prototype.toString.call(t))return t=t.join(", "),this.attributes["stroke-dasharray"]=t,this;throw new C.RERR("ArgumentError","lineDash must be an array of integers.")}},{key:"setLineCap",value:function(t){return this.attributes["stroke-linecap"]=t,this}},{key:"resize",value:function(t,e){this.width=t,this.height=e;var n={width:this.element.style.width=t,height:e};return this.applyAttributes(this.svg,n),this}},{key:"scale",value:function(t,e){this.state.scale={x:t,y:e};var n=this.width/t,i=this.height/e;return this.setViewBox(0,0,n,i),this}},{key:"setViewBox",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(1===e.length){var i=e[0];this.svg.setAttribute("viewBox",i)}else{var r=e[0]+" "+e[1]+" "+e[2]+" "+e[3];this.svg.setAttribute("viewBox",r)}}},{key:"applyAttributes",value:function(e,n){var i=$[e.nodeName];return Object.keys(n).forEach(function(t){i&&i[t]||e.setAttributeNS(null,t,n[t])}),e}},{key:"clear",value:function(){for(;this.svg.lastChild;)this.svg.removeChild(this.svg.lastChild);this.scale(this.state.scale.x,this.state.scale.y)}},{key:"rect",value:function(t,e,n,i,r){i<0&&(e+=i,i*=-1);var o=this.create("rect");return void 0===r&&(r={fill:"none","stroke-width":this.lineWidth,stroke:"black"}),C.Merge(r,{x:t,y:e,width:n,height:i}),this.applyAttributes(o,r),this.add(o),this}},{key:"fillRect",value:function(t,e,n,i){return i<0&&(e+=i,i*=-1),this.rect(t,e,n,i,this.attributes),this}},{key:"clearRect",value:function(t,e,n,i){return this.rect(t,e,n,i,this.background_attributes),this}},{key:"beginPath",value:function(){return this.path="",this.pen.x=NaN,this.pen.y=NaN,this}},{key:"moveTo",value:function(t,e){return this.path+="M"+t+" "+e,this.pen.x=t,this.pen.y=e,this}},{key:"lineTo",value:function(t,e){return this.path+="L"+t+" "+e,this.pen.x=t,this.pen.y=e,this}},{key:"bezierCurveTo",value:function(t,e,n,i,r,o){return this.path+="C"+t+" "+e+","+n+" "+i+","+r+" "+o,this.pen.x=r,this.pen.y=o,this}},{key:"quadraticCurveTo",value:function(t,e,n,i){return this.path+="Q"+t+" "+e+","+n+" "+i,this.pen.x=n,this.pen.y=i,this}},{key:"arc",value:function(t,e,n,i,r,o){function s(t){for(;t<0;)t+=2*Math.PI;for(;t>2*Math.PI;)t-=2*Math.PI;return t}if((i=s(i))>(r=s(r))){var a=i;i=r,r=a,o=!o}var u=r-i;return u>Math.PI?(this.arcHelper(t,e,n,i,i+u/2,o),this.arcHelper(t,e,n,i+u/2,r,o)):this.arcHelper(t,e,n,i,r,o),this}},{key:"arcHelper",value:function(t,e,n,i,r,o){var s=t+n*Math.cos(i),a=e+n*Math.sin(i),u=t+n*Math.cos(r),l=e+n*Math.sin(r),c=0,h=0;o?(h=1,r-i<Math.PI&&(c=1)):r-i>Math.PI&&(c=1),this.path+="M"+s+" "+a+" A"+n+" "+n+" 0 "+c+" "+h+" "+u+" "+l,isNaN(this.pen.x)||isNaN(this.pen.y)||(this.peth+="M"+this.pen.x+" "+this.pen.y)}},{key:"closePath",value:function(){return this.path+="Z",this}},{key:"glow",value:function(){if(0<this.shadow_attributes.width)for(var t=this.shadow_attributes,e=t.width/2,n=1;n<=e;n++){var i={stroke:t.color,"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(.4*t.width/e*n).toFixed(3),opacity:+((t.opacity||.3)/e).toFixed(3)},r=this.create("path");i.d=this.path,this.applyAttributes(r,i),this.add(r)}return this}},{key:"fill",value:function(t){this.glow();var e=this.create("path");return void 0===t&&(t={},C.Merge(t,this.attributes),t.stroke="none"),t.d=this.path,this.applyAttributes(e,t),this.add(e),this}},{key:"stroke",value:function(){this.glow();var t=this.create("path"),e={};return C.Merge(e,this.attributes),e.fill="none",e["stroke-width"]=this.lineWidth,e.d=this.path,this.applyAttributes(t,e),this.add(t),this}},{key:"measureText",value:function(t){var e=this.create("text");if("function"!=typeof e.getBBox)return{x:0,y:0,width:0,height:0};e.textContent=t,this.applyAttributes(e,this.attributes),this.svg.appendChild(e);var n=e.getBBox();return this.ie&&""!==t&&"italic"===this.attributes["font-style"]&&(n=this.ieMeasureTextFix(n,t)),this.svg.removeChild(e),n}},{key:"ieMeasureTextFix",value:function(t){var e=1.196*Number(this.fontSize)+1.9598,n=t.width-e,i=t.height-1.5;return{x:t.x,y:t.y,width:n,height:i}}},{key:"fillText",value:function(t,e,n){if(t&&!(t.length<=0)){var i={};C.Merge(i,this.attributes),i.stroke="none",i.x=e,i.y=n;var r=this.create("text");r.textContent=t,this.applyAttributes(r,i),this.add(r)}}},{key:"save",value:function(){return this.state_stack.push({state:{"font-family":this.state["font-family"],"font-weight":this.state["font-weight"],"font-style":this.state["font-style"],"font-size":this.state["font-size"]},attributes:{"font-family":this.attributes["font-family"],"font-weight":this.attributes["font-weight"],"font-style":this.attributes["font-style"],"font-size":this.attributes["font-size"],fill:this.attributes.fill,stroke:this.attributes.stroke,"stroke-width":this.attributes["stroke-width"],"stroke-dasharray":this.attributes["stroke-dasharray"]},shadow_attributes:{width:this.shadow_attributes.width,color:this.shadow_attributes.color},lineWidth:this.lineWidth}),this}},{key:"restore",value:function(){var t=this.state_stack.pop();return this.state["font-family"]=t.state["font-family"],this.state["font-weight"]=t.state["font-weight"],this.state["font-style"]=t.state["font-style"],this.state["font-size"]=t.state["font-size"],this.attributes["font-family"]=t.attributes["font-family"],this.attributes["font-weight"]=t.attributes["font-weight"],this.attributes["font-style"]=t.attributes["font-style"],this.attributes["font-size"]=t.attributes["font-size"],this.attributes.fill=t.attributes.fill,this.attributes.stroke=t.attributes.stroke,this.attributes["stroke-width"]=t.attributes["stroke-width"],this.attributes["stroke-dasharray"]=t.attributes["stroke-dasharray"],this.shadow_attributes.width=t.shadow_attributes.width,this.shadow_attributes.color=t.shadow_attributes.color,this.lineWidth=t.lineWidth,this}}]),nt);function nt(t){!function(t){if(!(t instanceof nt))throw new TypeError("Cannot call a class as a function")}(this),this.element=t,this.svgNS="http://www.w3.org/2000/svg";var e=this.create("svg");this.element.appendChild(e),this.svg=e,this.groups=[this.svg],this.parent=this.svg,this.path="",this.pen={x:NaN,y:NaN},this.lineWidth=1,this.state={scale:{x:1,y:1},"font-family":"Arial","font-size":"8pt","font-weight":"normal"},this.attributes={"stroke-width":.3,fill:"black",stroke:"black","stroke-dasharray":"none","font-family":"Arial","font-size":"10pt","font-weight":"normal","font-style":"normal"},this.background_attributes={"stroke-width":0,fill:"white",stroke:"white","stroke-dasharray":"none","font-family":"Arial","font-size":"10pt","font-weight":"normal","font-style":"normal"},this.shadow_attributes={width:0,color:"black"},this.state_stack=[],this.iePolyfill()}function it(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function rt(t,e,n){return e&&it(t.prototype,e),n&&it(t,n),t}var ot=null,st=(rt(at,null,[{key:"buildContext",value:function(t,e,n,i,r){var o=new at(t,e);n&&i&&o.resize(n,i),r=r||"#FFF";var s=o.getContext();return s.setBackgroundFillStyle(r),at.lastContext=s}},{key:"getCanvasContext",value:function(t,e,n,i){return at.buildContext(t,at.Backends.CANVAS,e,n,i)}},{key:"getRaphaelContext",value:function(t,e,n,i){return at.buildContext(t,at.Backends.RAPHAEL,e,n,i)}},{key:"getSVGContext",value:function(t,e,n,i){return at.buildContext(t,at.Backends.SVG,e,n,i)}},{key:"bolsterCanvasContext",value:function(e){return at.USE_CANVAS_PROXY?new X(e):(e.vexFlowCanvasContext=e,["clear","setFont","setRawFont","setFillStyle","setBackgroundFillStyle","setStrokeStyle","setShadowColor","setShadowBlur","setLineWidth","setLineCap","setLineDash","openGroup","closeGroup","getGroup"].forEach(function(t){e[t]=e[t]||X.prototype[t]}),e)}},{key:"drawDashedLine",value:function(t,e,n,i,r,o){t.beginPath();var s=i-e,a=r-n,u=Math.atan2(a,s),l=e,c=n;t.moveTo(e,n);for(var h=0,f=!0;!(s<0?l<=i:i<=l)||!(a<0?c<=r:r<=c);){var p=o[h++%o.length],d=l+Math.cos(u)*p;l=s<0?Math.max(i,d):Math.min(i,d);var b=c+Math.sin(u)*p;c=a<0?Math.max(r,b):Math.min(r,b),f?t.lineTo(l,c):t.moveTo(l,c),f=!f}t.closePath(),t.stroke()}},{key:"Backends",get:function(){return{CANVAS:1,RAPHAEL:2,SVG:3,VML:4}}},{key:"LineEndType",get:function(){return{NONE:1,UP:2,DOWN:3}}},{key:"USE_CANVAS_PROXY",get:function(){return!1}},{key:"lastContext",get:function(){return ot},set:function(t){ot=t}}]),rt(at,[{key:"resize",value:function(t,e){if(this.backend===at.Backends.CANVAS){if(!this.element.getContext)throw new C.RERR("BadElement","Can't get canvas context from element: ".concat(this.elementId));var n=window.devicePixelRatio||1;this.element.width=t*n,this.element.height=e*n,this.element.style.width=t+"px",this.element.style.height=e+"px",this.ctx=at.bolsterCanvasContext(this.element.getContext("2d")),this.ctx.scale(n,n)}else this.ctx.resize(t,e);return this}},{key:"getContext",value:function(){return this.ctx}}]),at);function at(t,e){if(function(t){if(!(t instanceof at))throw new TypeError("Cannot call a class as a function")}(this),this.elementId=t,!this.elementId)throw new C.RERR("BadArgument","Invalid id for renderer.");if(this.element=document.getElementById(t),this.element||(this.element=t),this.ctx=null,this.paper=null,this.backend=e,this.backend===at.Backends.CANVAS){if(!this.element.getContext)throw new C.RERR("BadElement","Can't get canvas context from element: ".concat(t));this.ctx=at.bolsterCanvasContext(this.element.getContext("2d"))}else if(this.backend===at.Backends.RAPHAEL)this.ctx=new J(this.element);else{if(this.backend!==at.Backends.SVG)throw new C.RERR("InvalidBackend","No support for backend: ".concat(this.backend));this.ctx=new et(this.element)}}function ut(t){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lt(t){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ct(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ht(t,e,n){return e&&ct(t.prototype,e),n&&ct(t,n),t}function ft(t,e){return(ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ft(t,e)}(dt,E),ht(dt,null,[{key:"CATEGORY",get:function(){return"stem"}},{key:"UP",get:function(){return 1}},{key:"DOWN",get:function(){return-1}},{key:"WIDTH",get:function(){return H.STEM_WIDTH}},{key:"HEIGHT",get:function(){return H.STEM_HEIGHT}}]),ht(dt,[{key:"setNoteHeadXBounds",value:function(t,e){return this.x_begin=t,this.x_end=e,this}},{key:"setDirection",value:function(t){this.stem_direction=t}},{key:"setExtension",value:function(t){this.stem_extension=t}},{key:"getExtension",value:function(){return this.stem_extension}},{key:"setYBounds",value:function(t,e){this.y_top=t,this.y_bottom=e}},{key:"getCategory",value:function(){return dt.CATEGORY}},{key:"getHeight",value:function(){var t=this.stem_direction===dt.UP?this.stem_up_y_offset:this.stem_down_y_offset;return(this.y_bottom-this.y_top)*this.stem_direction+(dt.HEIGHT-t+this.stem_extension)*this.stem_direction}},{key:"getBoundingBox",value:function(){throw new C.RERR("NotImplemented","getBoundingBox() not implemented.")}},{key:"getExtents",value:function(){var t=this.stem_direction===dt.UP,e=[this.y_top,this.y_bottom],n=dt.HEIGHT+this.stem_extension,i=(t?Math.min:Math.max).apply(void 0,e),r=(t?Math.max:Math.min).apply(void 0,e);return{topY:i+n*-this.stem_direction,baseY:r}}},{key:"setVisibility",value:function(t){return this.hide=!t,this}},{key:"setStemlet",value:function(t,e){return this.isStemlet=t,this.stemletHeight=e,this}},{key:"draw",value:function(){if(this.setRendered(),!this.hide){var t,e,n=this.checkContext(),i=this.stem_direction;e=i===dt.DOWN?(t=this.x_begin,this.y_top+this.stem_down_y_offset):(t=this.x_end,this.y_bottom-this.stem_up_y_offset);var r=this.getHeight();!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];pt.DEBUG&&C.L("Vex.Flow.Stem",e)}("Rendering stem - ","Top Y: ",this.y_top,"Bottom Y: ",this.y_bottom);var o=this.isStemlet?r-this.stemletHeight*this.stem_direction:0;n.save(),this.applyStyle(n),n.beginPath(),n.setLineWidth(dt.WIDTH),n.moveTo(t,e-o),n.lineTo(t,e-r-this.renderHeightAdjustment*i),n.stroke(),this.restoreStyle(n),n.restore()}}}]),dt);function dt(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof dt))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==ut(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,lt(dt).call(this))).setAttribute("type","Stem"),t.x_begin=e.x_begin||0,t.x_end=e.x_end||0,t.y_top=e.y_top||0,t.y_bottom=e.y_bottom||0,t.stem_extension=e.stem_extension||0,t.stem_direction=e.stem_direction||0,t.hide=e.hide||!1,t.isStemlet=e.isStemlet||!1,t.stemletHeight=e.stemletHeight||0,t.stem_up_y_offset=e.stem_up_y_offset||0,t.stem_down_y_offset=e.stem_down_y_offset||0,t.renderHeightAdjustment=0,t}function bt(t){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function gt(t,e,n){return e&&mt(t.prototype,e),n&&mt(t,n),t}function vt(t,e){return(vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vt(t,e)}(St,E),gt(St,null,[{key:"LOCATION_TOP",get:function(){return 1}},{key:"LOCATION_BOTTOM",get:function(){return-1}},{key:"NESTING_OFFSET",get:function(){return 15}}]),gt(St,[{key:"attach",value:function(){for(var t=0;t<this.notes.length;t++)this.notes[t].setTuplet(this)}},{key:"detach",value:function(){for(var t=0;t<this.notes.length;t++)this.notes[t].resetTuplet(this)}},{key:"setBracketed",value:function(t){return this.bracketed=!!t,this}},{key:"setRatioed",value:function(t){return this.ratioed=!!t,this}},{key:"setTupletLocation",value:function(t){if(t){if(t!==St.LOCATION_TOP&&t!==St.LOCATION_BOTTOM)throw new C.RERR("BadArgument","Invalid tuplet location: "+t)}else t=St.LOCATION_TOP;return this.location=t,this}},{key:"getNotes",value:function(){return this.notes}},{key:"getNoteCount",value:function(){return this.num_notes}},{key:"beatsOccupiedDeprecationWarning",value:function(){var t=["beats_occupied has been deprecated as an ","option for tuplets. Please use notes_occupied ","instead. Calls to getBeatsOccupied and ","setBeatsOccupied should now be routed to ","getNotesOccupied and setNotesOccupied instead"].join("");console&&console.warn?console.warn(t):console&&console.log(t)}},{key:"getBeatsOccupied",value:function(){return this.beatsOccupiedDeprecationWarning(),this.getNotesOccupied()}},{key:"setBeatsOccupied",value:function(t){return this.beatsOccupiedDeprecationWarning(),this.setNotesOccupied(t)}},{key:"getNotesOccupied",value:function(){return this.notes_occupied}},{key:"setNotesOccupied",value:function(t){this.detach(),this.notes_occupied=t,this.resolveGlyphs(),this.attach()}},{key:"resolveGlyphs",value:function(){this.num_glyphs=[];for(var t=this.num_notes;1<=t;)this.num_glyphs.push(new G("v"+t%10,this.point)),t=parseInt(t/10,10);for(this.denom_glyphs=[],t=this.notes_occupied;1<=t;)this.denom_glyphs.push(new G("v"+t%10,this.point)),t=parseInt(t/10,10)}},{key:"getNestedTupletCount",value:function(){var n=this.location,t=this.notes[0],i=o(t,n),r=o(t,n);function o(t,e){return t.tupletStack.filter(function(t){return t.location===e}).length}return this.notes.forEach(function(t){var e=o(t,n);i=i<e?e:i,r=e<r?e:r}),i-r}},{key:"getYPosition",value:function(){var t,e=this.getNestedTupletCount()*St.NESTING_OFFSET*-this.location,n=this.options.y_offset||0,i=this.notes[0];if(this.location===St.LOCATION_TOP){t=i.getStave().getYForLine(0)-15;for(var r=0;r<this.notes.length;++r){var o=this.notes[r].getStemDirection()===pt.UP?this.notes[r].getStemExtents().topY-10:this.notes[r].getStemExtents().baseY-20;o<t&&(t=o)}}else{t=i.getStave().getYForLine(4)+20;for(var s=0;s<this.notes.length;++s){var a=this.notes[s].getStemDirection()===pt.UP?this.notes[s].getStemExtents().baseY+20:this.notes[s].getStemExtents().topY+10;t<a&&(t=a)}}return t+e+n}},{key:"draw",value:function(){var e=this;this.checkContext(),this.setRendered();var t=this.notes[0],n=this.notes[this.notes.length-1];function i(t,e){return t+e.getMetrics().width}this.bracketed?(this.x_pos=t.getTieLeftX()-5,this.width=n.getTieRightX()-this.x_pos+5):(this.x_pos=t.getStemX(),this.width=n.getStemX()-this.x_pos),this.y_pos=this.getYPosition();var r=this.num_glyphs.reduce(i,0);this.ratioed&&(r=this.denom_glyphs.reduce(i,r),r+=.32*this.point);var o=this.x_pos+this.width/2-r/2;if(this.bracketed){var s=this.width/2-r/2-5;0<s&&(this.context.fillRect(this.x_pos,this.y_pos,s,1),this.context.fillRect(this.x_pos+this.width/2+r/2+5,this.y_pos,s,1),this.context.fillRect(this.x_pos,this.y_pos+(this.location===St.LOCATION_BOTTOM),1,10*this.location),this.context.fillRect(this.x_pos+this.width,this.y_pos+(this.location===St.LOCATION_BOTTOM),1,10*this.location))}var a=0;if(this.num_glyphs.forEach(function(t){t.render(e.context,o+a,e.y_pos+e.point/3-2),a+=t.getMetrics().width}),this.ratioed){var u=o+a+.16*this.point,l=.06*this.point;this.context.beginPath(),this.context.arc(u,this.y_pos-.08*this.point,l,0,2*Math.PI,!0),this.context.closePath(),this.context.fill(),this.context.beginPath(),this.context.arc(u,this.y_pos+.12*this.point,l,0,2*Math.PI,!0),this.context.closePath(),this.context.fill(),a+=.32*this.point,this.denom_glyphs.forEach(function(t){t.render(e.context,o+a,e.y_pos+e.point/3-2),a+=t.getMetrics().width})}}}]),St);function St(t,e){var n;if(function(t){if(!(t instanceof St))throw new TypeError("Cannot call a class as a function")}(this),(n=function(t,e){return!e||"object"!==bt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,yt(St).call(this))).setAttribute("type","Tuplet"),!t||!t.length)throw new C.RuntimeError("BadArguments","No notes provided for tuplet.");return n.options=C.Merge({},e),n.notes=t,n.num_notes="num_notes"in n.options?n.options.num_notes:t.length,n.options.beats_occupied&&n.beatsOccupiedDeprecationWarning(),n.notes_occupied=n.options.notes_occupied||n.options.beats_occupied||2,"bracketed"in n.options?n.bracketed=n.options.bracketed:n.bracketed=t.some(function(t){return null===t.beam}),n.ratioed="ratioed"in n.options?n.options.ratioed:1<Math.abs(n.notes_occupied-n.num_notes),n.point=28,n.y_pos=16,n.x_pos=100,n.width=200,n.location=n.options.location||St.LOCATION_TOP,lr.AlignRestsToNotes(t,!0,!0),n.resolveGlyphs(),n.attach(),n}function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Et(t){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function kt(t,e,n){return e&&Tt(t.prototype,e),n&&Tt(t,n),t}function Ot(t,e){return(Ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mt(t){var e=0;return t.forEach(function(t){t.keyProps&&t.keyProps.forEach(function(t){e+=t.line-3})}),0<=e?pt.DOWN:pt.UP}var Rt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ot(t,e)}(Lt,E),kt(Lt,null,[{key:"getDefaultBeamGroups",value:function(t){t&&"c"!==t||(t="4/4");var e={"1/2":["1/2"],"2/2":["1/2"],"3/2":["1/2"],"4/2":["1/2"],"1/4":["1/4"],"2/4":["1/4"],"3/4":["1/4"],"4/4":["1/4"],"1/8":["1/8"],"2/8":["2/8"],"3/8":["3/8"],"4/8":["2/8"],"1/16":["1/16"],"2/16":["2/16"],"3/16":["3/16"],"4/16":["2/16"]}[t];if(void 0!==e)return e.map(function(t){return(new d).parse(t)});var n=parseInt(t.split("/")[0],10),i=parseInt(t.split("/")[1],10);return n%3==0?[new d(3,i)]:4<i?[new d(2,i)]:i<=4?[new d(1,i)]:[new d(1,4)]}},{key:"applyAndGetBeams",value:function(t,e,n){return Lt.generateBeams(t.getTickables(),{groups:n,stem_direction:e})}},{key:"generateBeams",value:function(t,h){(h=h||{}).groups&&h.groups.length||(h.groups=[new d(2,8)]);var r,f,o=h.groups.map(function(t){if(!t.multiply)throw new C.RuntimeError("InvalidBeamGroups","The beam groups must be an array of Vex.Flow.Fractions");return t.clone().multiply(H.RESOLUTION,1)}),s=0,a=[],u=[];function l(){o.length-1>s?s+=1:s=0}r=[],t.forEach(function(t){if(r=[],t.shouldIgnoreTicks())return a.push(u),void(u=r);u.push(t);var e=o[s].clone(),n=u.reduce(function(t,e){return e.getTicks().clone().add(t)},new d(0,1)),i=H.durationToNumber(t.duration)<8;i&&t.tuplet&&(e.numerator*=2),n.greaterThan(e)?(i||r.push(u.pop()),a.push(u),u=r,l()):n.equals(e)&&(a.push(u),u=r,l())}),0<u.length&&a.push(u),f=[],a.forEach(function(t){var c=[];t.forEach(function(t,e,n){var i=0===e||e===n.length-1,r=n[e-1],o=!h.beam_rests&&t.isRest(),s=h.beam_rests&&h.beam_middle_only&&t.isRest()&&i,a=!1;if(h.maintain_stem_directions&&r&&!t.isRest()&&!r.isRest()){var u=r.getStemDirection();a=t.getStemDirection()!==u}var l=parseInt(t.duration,10)<8;o||s||a||l?(0<c.length&&f.push(c),c=a?[t]:[]):c.push(t)}),0<c.length&&f.push(c)}),(a=f).forEach(function(t){var e,n;if(h.maintain_stem_directions){var i=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(!n.isRest())return n}return!1}(t);e=i?i.getStemDirection():pt.UP}else e=h.stem_direction?h.stem_direction:Mt(t);n=e,t.forEach(function(t){t.setStemDirection(n)})});var n,e=a.filter(function(t){if(1<t.length){var e=!0;return t.forEach(function(t){t.getIntrinsicTicks()>=H.durationToTicks("4")&&(e=!1)}),e}return!1}),i=(n=[],a.forEach(function(t){var e=null;t.forEach(function(t){t.tuplet&&e!==t.tuplet&&(e=t.tuplet,n.push(e))})}),n),c=[];return e.forEach(function(t){var e=new Lt(t);h.show_stemlets&&(e.render_options.show_stemlets=!0),h.secondary_breaks&&(e.render_options.secondary_break_ticks=H.durationToTicks(h.secondary_breaks)),!0===h.flat_beams&&(e.render_options.flat_beams=!0,e.render_options.flat_beam_offset=h.flat_beam_offset),c.push(e)}),i.forEach(function(t){var e=t.notes[0].stem_direction===pt.DOWN?_t.LOCATION_BOTTOM:_t.LOCATION_TOP;t.setTupletLocation(e);for(var n=!1,i=0;i<t.notes.length;i++)if(null===t.notes[i].beam){n=!0;break}t.setBracketed(n)}),c}}]),kt(Lt,[{key:"getNotes",value:function(){return this.notes}},{key:"getBeamCount",value:function(){return this.notes.map(function(t){return t.getGlyph().beam_count}).reduce(function(t,e){return t<e?e:t})}},{key:"breakSecondaryAt",value:function(t){return this.break_on_indices=t,this}},{key:"getSlopeY",value:function(t,e,n,i){return n+(t-e)*i}},{key:"calculateSlope",value:function(){for(var t=this.notes,e=this.stem_direction,n=this.render_options,i=n.max_slope,r=n.min_slope,o=n.slope_iterations,s=n.slope_cost,a=t[0],u=(w=a,E=t[t.length-1],P=w.getStemExtents().topY,T=w.getStemX(),(E.getStemExtents().topY-P)/(E.getStemX()-T)),l=(i-r)/o,c=Number.MAX_VALUE,h=0,f=0,p=r;p<=i;p+=l){for(var d=0,b=0,y=1;y<t.length;++y){var m=t[y],g=this.getSlopeY(m.getStemX(),a.getStemX(),a.getStemExtents().topY,p)+b,v=m.getStemExtents().topY;if(v*e<g*e){var _=Math.abs(v-g);b+=_*-e,d+=_*y}else d+=(v-g)*e}var S=u/2,x=s*Math.abs(S-p)+Math.abs(d);x<c&&(c=x,h=p,f=b)}var w,E,P,T;this.slope=h,this.y_shift=f}},{key:"calculateFlatSlope",value:function(){for(var t=this.notes,e=this.stem_direction,n=this.render_options,i=n.beam_width,r=n.min_flat_beam_offset,o=n.flat_beam_offset,s=0,a=0,u=0,l=0,c=0;c<t.length;c++){var h=t[c],f=h.getStemExtents().topY;s+=f,e===pt.DOWN&&l<f?(l=f,a=Math.max.apply(Math,wt(h.getYs())),u=h.getBeamCount()):e===pt.UP&&(0===l||f<l)&&(l=f,a=Math.min.apply(Math,wt(h.getYs())),u=h.getBeamCount())}var p=s/t.length,d=r+u*(1.5*i),b=a+d*-e;e===pt.DOWN&&p<b?p=a+d:e===pt.UP&&b<p&&(p=a-d),o?e===pt.DOWN&&o<p?this.render_options.flat_beam_offset=p:e===pt.UP&&p<o&&(this.render_options.flat_beam_offset=p):this.render_options.flat_beam_offset=p,this.slope=0,this.y_shift=0}},{key:"getBeamYToDraw",value:function(){var t=this.notes[0].getStemExtents().topY;return this.render_options.flat_beams&&this.render_options.flat_beam_offset&&(t=this.render_options.flat_beam_offset),t}},{key:"applyStemExtensions",value:function(){for(var t=this.notes,e=this.slope,n=this.y_shift,i=this.stem_direction,r=this.beam_count,o=this.render_options,s=o.show_stemlets,a=o.stemlet_extension,u=o.beam_width,l=t[0],c=this.getBeamYToDraw(),h=l.getStemX(),f=0;f<t.length;++f){var p=t[f],d=p.getStemX(),b=p.getStemExtents().topY,y=this.getSlopeY(d,h,c,e)+n,m=p.getStem().getExtension(),g=i===pt.UP?b-y:y-b;if(p.stem.setExtension(m+g),p.stem.renderHeightAdjustment=-pt.WIDTH/2,p.isRest()&&s){var v=(r-1)*u*1.5+u;p.stem.setVisibility(!0).setStemlet(!0,v+a)}}}},{key:"getBeamLines",value:function(t){for(var e=[],n=!1,i=null,r=this.render_options.partial_beam_length,o=!1,s=0,a=0;a<this.notes.length;++a){var u=this.notes[a];s+=u.ticks.value();var l=!1;8<=parseInt(t,10)&&(l=-1!==this.break_on_indices.indexOf(a),this.render_options.secondary_break_ticks&&s>=this.render_options.secondary_break_ticks&&(l=!(s=0)));var c=u.getIntrinsicTicks()<H.durationToTicks(t),h=u.getStemX()-pt.WIDTH/2,f=this.notes[a+1],p=f&&f.getIntrinsicTicks()<H.durationToTicks(t);c?n?((i=e[e.length-1]).end=h,l&&(n=!1,f&&!p&&null===i.end&&(i.end=i.start-r))):(i={start:h,end:null},n=!0,p?l&&(i.end=i.start-r,n=!1):i.end=(o||0===a)&&f?i.start+r:i.start-r,e.push(i)):n=!1,o=l}var d=e[e.length-1];return d&&null===d.end&&(d.end=d.start-r),e}},{key:"drawStems",value:function(){var e=this;this.notes.forEach(function(t){t.getStem()&&t.getStem().setContext(e.context).draw()},this)}},{key:"drawBeamLines",value:function(){this.checkContext();for(var t=["4","8","16","32","64"],e=this.notes[0],n=this.getBeamYToDraw(),i=e.getStemX(),r=this.render_options.beam_width*this.stem_direction,o=0;o<t.length;++o){for(var s=t[o],a=this.getBeamLines(s),u=0;u<a.length;++u){var l=a[u],c=l.start,h=this.getSlopeY(c,i,n,this.slope),f=l.end,p=this.getSlopeY(f,i,n,this.slope);this.context.beginPath(),this.context.moveTo(c,h),this.context.lineTo(c,h+r),this.context.lineTo(f+1,p+r),this.context.lineTo(f+1,p),this.context.closePath(),this.context.fill()}n+=1.5*r}}},{key:"preFormat",value:function(){return this}},{key:"postFormat",value:function(){this.postFormatted||("tabnotes"===this.notes[0].getCategory()||this.render_options.flat_beams?this.calculateFlatSlope():this.calculateSlope(),this.applyStemExtensions(),this.postFormatted=!0)}},{key:"draw",value:function(){this.checkContext(),this.setRendered(),this.unbeamable||(this.postFormatted||this.postFormat(),this.drawStems(),this.applyStyle(),this.drawBeamLines(),this.restoreStyle())}}]),Lt);function Lt(t,e){var n,i,r,o;if(function(t){if(!(t instanceof Lt))throw new TypeError("Cannot call a class as a function")}(this),this,(n=!(i=Et(Lt).call(this))||"object"!==xt(i)&&"function"!=typeof i?Pt(this):i).setAttribute("type","Beam"),!t||t===[])throw new C.RuntimeError("BadArguments","No notes provided for beam.");if(1===t.length)throw new C.RuntimeError("BadArguments","Too few notes for beam.");if(n.ticks=t[0].getIntrinsicTicks(),n.ticks>=H.durationToTicks("4"))throw new C.RuntimeError("BadArguments","Beams can only be applied to notes shorter than a quarter note.");for(n.stem_direction=pt.UP,r=0;r<t.length;++r)if((o=t[r]).hasStem()){n.stem_direction=o.getStemDirection();break}var s=n.stem_direction;for(e&&"stavenotes"===t[0].getCategory()?s=Mt(t):e&&"tabnotes"===t[0].getCategory()&&(s=-1<t.reduce(function(t,e){return t+e.stem_direction},0)?pt.UP:pt.DOWN),r=0;r<t.length;++r)o=t[r],e&&(o.setStemDirection(s),n.stem_direction=s),o.setBeam(Pt(n));return n.postFormatted=!1,n.notes=t,n.beam_count=n.getBeamCount(),n.break_on_indices=[],n.render_options={beam_width:5,max_slope:.25,min_slope:-.25,slope_iterations:20,slope_cost:100,show_stemlets:!1,stemlet_extension:7,partial_beam_length:10,flat_beams:!1,min_flat_beam_offset:15},n}function At(t){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ct(t){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function It(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Nt(t,e,n){return e&&It(t.prototype,e),n&&It(t,n),t}function Ft(t,e){return(Ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ft(t,e)}(Dt,E),Nt(Dt,null,[{key:"Mode",get:function(){return{STRICT:1,SOFT:2,FULL:3}}}]),Nt(Dt,[{key:"getTotalTicks",value:function(){return this.totalTicks}},{key:"getTicksUsed",value:function(){return this.ticksUsed}},{key:"getLargestTickWidth",value:function(){return this.largestTickWidth}},{key:"getSmallestTickCount",value:function(){return this.smallestTickCount}},{key:"getTickables",value:function(){return this.tickables}},{key:"getMode",value:function(){return this.mode}},{key:"setMode",value:function(t){return this.mode=t,this}},{key:"getResolutionMultiplier",value:function(){return this.resolutionMultiplier}},{key:"getActualResolution",value:function(){return this.resolutionMultiplier*this.time.resolution}},{key:"setStave",value:function(t){return this.stave=t,this.boundingBox=null,this}},{key:"getBoundingBox",value:function(){var t,e,n,i;if(!this.boundingBox){if(!this.stave)throw new C.RERR("NoStave","Can't get bounding box without stave.");for(t=this.stave,e=null,i=0;i<this.tickables.length;++i)this.tickables[i].setStave(t),(n=this.tickables[i].getBoundingBox())&&(e=e?e.mergeWith(n):n);this.boundingBox=e}return this.boundingBox}},{key:"getVoiceGroup",value:function(){if(!this.voiceGroup)throw new C.RERR("NoVoiceGroup","No voice group for voice.");return this.voiceGroup}},{key:"setVoiceGroup",value:function(t){return this.voiceGroup=t,this}},{key:"setStrict",value:function(t){return this.mode=t?Dt.Mode.STRICT:Dt.Mode.SOFT,this}},{key:"isComplete",value:function(){return this.mode!==Dt.Mode.STRICT&&this.mode!==Dt.Mode.FULL||this.ticksUsed.equals(this.totalTicks)}},{key:"addTickable",value:function(t){if(!t.shouldIgnoreTicks()){var e=t.getTicks();if(this.ticksUsed.add(e),(this.mode===Dt.Mode.STRICT||this.mode===Dt.Mode.FULL)&&this.ticksUsed.greaterThan(this.totalTicks))throw this.ticksUsed.subtract(e),new C.RERR("BadArgument","Too many ticks.");e.lessThan(this.smallestTickCount)&&(this.smallestTickCount=e.clone()),this.resolutionMultiplier=this.ticksUsed.denominator,this.totalTicks.add(0,this.ticksUsed.denominator)}return this.tickables.push(t),t.setVoice(this),this}},{key:"addTickables",value:function(t){for(var e=0;e<t.length;++e)this.addTickable(t[e]);return this}},{key:"preFormat",value:function(){var e=this;return this.preFormatted||(this.tickables.forEach(function(t){t.getStave()||t.setStave(e.stave)}),this.preFormatted=!0),this}},{key:"draw",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.context,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.stave;this.setRendered();for(var n=null,i=0;i<this.tickables.length;++i){var r=this.tickables[i];if(e&&r.setStave(e),!r.getStave())throw new C.RuntimeError("MissingStave","The voice cannot draw tickables without staves.");if(0===i&&(n=r.getBoundingBox()),0<i&&n){var o=r.getBoundingBox();o&&n.mergeWith(o)}r.setContext(t),r.draw()}this.boundingBox=n}}]),Dt);function Dt(t){var e;if(function(t){if(!(t instanceof Dt))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==At(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ct(Dt).call(this))).setAttribute("type","Voice"),"string"==typeof t){var n=t.match(/(\d+)\/(\d+)/);n&&(t={num_beats:n[1],beat_value:n[2],resolution:H.RESOLUTION})}return e.time=C.Merge({num_beats:4,beat_value:4,resolution:H.RESOLUTION},t),e.totalTicks=new d(e.time.num_beats*(e.time.resolution/e.time.beat_value),1),e.resolutionMultiplier=1,e.tickables=[],e.ticksUsed=new d(0,1),e.smallestTickCount=e.totalTicks.clone(),e.largestTickWidth=0,e.stave=null,e.mode=Dt.Mode.STRICT,e.voiceGroup=null,e}function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vt(t){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Wt(t,e,n){return e&&Gt(t.prototype,e),n&&Gt(t,n),t}function Ut(t,e){return(Ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ht(t,e,n,i,r){if(e!==Yt.type.BOLD_DOUBLE_LEFT&&e!==Yt.type.BOLD_DOUBLE_RIGHT)throw new C.RERR("InvalidConnector","A REPEAT_BEGIN or REPEAT_END type must be provided.");var o=3,s=3.5;e===Yt.type.BOLD_DOUBLE_RIGHT&&(o=-5,s=3),t.fillRect(n+o,i,1,r-i),t.fillRect(n-2,i,s,r-i)}var Yt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ut(t,e)}(zt,E),Wt(zt,null,[{key:"type",get:function(){return{SINGLE_RIGHT:0,SINGLE_LEFT:1,SINGLE:1,DOUBLE:2,BRACE:3,BRACKET:4,BOLD_DOUBLE_LEFT:5,BOLD_DOUBLE_RIGHT:6,THIN_DOUBLE:7,NONE:8}}},{key:"typeString",get:function(){return{singleRight:zt.type.SINGLE_RIGHT,singleLeft:zt.type.SINGLE_LEFT,single:zt.type.SINGLE,double:zt.type.DOUBLE,brace:zt.type.BRACE,bracket:zt.type.BRACKET,boldDoubleLeft:zt.type.BOLD_DOUBLE_LEFT,boldDoubleRight:zt.type.BOLD_DOUBLE_RIGHT,thinDouble:zt.type.THIN_DOUBLE,none:zt.type.NONE}}}]),Wt(zt,[{key:"setType",value:function(t){return(t="string"==typeof t?zt.typeString[t]:t)>=zt.type.SINGLE_RIGHT&&t<=zt.type.NONE&&(this.type=t),this}},{key:"setText",value:function(t,e){return this.texts.push({content:t,options:C.Merge({shift_x:0,shift_y:0},e)}),this}},{key:"setFont",value:function(t){C.Merge(this.font,t)}},{key:"setXShift",value:function(t){if("number"!=typeof t)throw C.RERR("InvalidType","x_shift must be a Number");return this.x_shift=t,this}},{key:"draw",value:function(){var t=this.checkContext();this.setRendered();var e=this.top_stave.getYForLine(0),n=this.bottom_stave.getYForLine(this.bottom_stave.getNumLines()-1)+this.thickness,i=this.width,r=this.top_stave.getX();this.type!==zt.type.SINGLE_RIGHT&&this.type!==zt.type.BOLD_DOUBLE_RIGHT&&this.type!==zt.type.THIN_DOUBLE||(r=this.top_stave.getX()+this.top_stave.width);var o=n-e;switch(this.type){case zt.type.SINGLE:case zt.type.SINGLE_LEFT:case zt.type.SINGLE_RIGHT:i=1;break;case zt.type.DOUBLE:r-=this.width+2;break;case zt.type.BRACE:i=12;var s=this.top_stave.getX()-2+this.x_shift,a=e,u=s,l=n,c=s-i,h=a+o/2,f=c-.9*i,p=a+.2*o,d=s+1.1*i,b=h-.135*o,y=d,m=h+.135*o,g=f,v=l-.2*o,_=c-i,S=v,x=s+.4*i,w=h+.135*o,E=x,P=h-.135*o,T=_,k=p;t.beginPath(),t.moveTo(s,a),t.bezierCurveTo(f,p,d,b,c,h),t.bezierCurveTo(y,m,g,v,u,l),t.bezierCurveTo(_,S,x,w,c,h),t.bezierCurveTo(E,P,T,k,s,a),t.fill(),t.stroke();break;case zt.type.BRACKET:o=(n+=4)-(e-=4),G.renderGlyph(t,r-5,e-3,40,"v1b",!0),G.renderGlyph(t,r-5,n+3,40,"v10",!0),r-=this.width+2;break;case zt.type.BOLD_DOUBLE_LEFT:Ht(t,this.type,r+this.x_shift,e,n);break;case zt.type.BOLD_DOUBLE_RIGHT:Ht(t,this.type,r,e,n);break;case zt.type.THIN_DOUBLE:i=1;break;case zt.type.NONE:break;default:throw new C.RERR("InvalidType","The provided StaveConnector.type (".concat(this.type,") is invalid"))}this.type!==zt.type.BRACE&&this.type!==zt.type.BOLD_DOUBLE_LEFT&&this.type!==zt.type.BOLD_DOUBLE_RIGHT&&this.type!==zt.type.NONE&&t.fillRect(r,e,i,o),this.type===zt.type.THIN_DOUBLE&&t.fillRect(r-3,e,i,o),t.save(),t.lineWidth=2,t.setFont(this.font.family,this.font.size,this.font.weight);for(var O=0;O<this.texts.length;O++){var M=this.texts[O],R=t.measureText(""+M.content).width,L=this.top_stave.getX()-R-24+M.options.shift_x,A=(this.top_stave.getYForLine(0)+this.bottom_stave.getBottomLineY())/2+M.options.shift_y;t.fillText(""+M.content,L,A+4)}t.restore()}}]),zt);function zt(t,e){var n;return function(t){if(!(t instanceof zt))throw new TypeError("Cannot call a class as a function")}(this),(n=function(t,e){return!e||"object"!==jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Vt(zt).call(this))).setAttribute("type","StaveConnector"),n.thickness=H.STAVE_LINE_THICKNESS,n.width=3,n.top_stave=t,n.bottom_stave=e,n.type=zt.type.DOUBLE,n.font={family:"times",size:16,weight:"normal"},n.x_shift=0,n.texts=[],n}function Xt(t){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function qt(t){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jt(t,e){return(Jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jt(t,e)}(Zt,E),Kt(Zt.prototype,[{key:"reset",value:function(){return this}},{key:"getTicks",value:function(){return this.ticks}},{key:"shouldIgnoreTicks",value:function(){return this.ignore_ticks}},{key:"getWidth",value:function(){return this.width}},{key:"getFormatterMetrics",value:function(){return this.formatterMetrics}},{key:"setXShift",value:function(t){this.x_shift=t}},{key:"getCenterXShift",value:function(){return this.isCenterAligned()?this.center_x_shift:0}},{key:"isCenterAligned",value:function(){return this.align_center}},{key:"setCenterAlignment",value:function(t){return this.align_center=t,this}},{key:"getVoice",value:function(){if(!this.voice)throw new C.RERR("NoVoice","Tickable has no voice.");return this.voice}},{key:"setVoice",value:function(t){this.voice=t}},{key:"getTuplet",value:function(){return this.tuplet}},{key:"resetTuplet",value:function(t){var e,n;if(t){var i=this.tupletStack.indexOf(t);return-1!==i&&(this.tupletStack.splice(i,1),e=t.getNoteCount(),n=t.getNotesOccupied(),this.applyTickMultiplier(e,n)),this}for(;this.tupletStack.length;)e=(t=this.tupletStack.pop()).getNoteCount(),n=t.getNotesOccupied(),this.applyTickMultiplier(e,n);return this}},{key:"setTuplet",value:function(t){if(t){this.tupletStack.push(t);var e=t.getNoteCount(),n=t.getNotesOccupied();this.applyTickMultiplier(n,e)}return this.tuplet=t,this}},{key:"addToModifierContext",value:function(t){this.modifierContext=t,this.preFormatted=!1}},{key:"addModifier",value:function(t){return this.modifiers.push(t),this.preFormatted=!1,this}},{key:"getModifiers",value:function(){return this.modifiers}},{key:"setTickContext",value:function(t){this.tickContext=t,this.preFormatted=!1}},{key:"preFormat",value:function(){this.preFormatted||(this.width=0,this.modifierContext&&(this.modifierContext.preFormat(),this.width+=this.modifierContext.getWidth()))}},{key:"postFormat",value:function(){return this.postFormatted||(this.postFormatted=!0),this}},{key:"getIntrinsicTicks",value:function(){return this.intrinsicTicks}},{key:"setIntrinsicTicks",value:function(t){this.intrinsicTicks=t,this.ticks=this.tickMultiplier.clone().multiply(this.intrinsicTicks)}},{key:"getTickMultiplier",value:function(){return this.tickMultiplier}},{key:"applyTickMultiplier",value:function(t,e){this.tickMultiplier.multiply(t,e),this.ticks=this.tickMultiplier.clone().multiply(this.intrinsicTicks)}},{key:"setDuration",value:function(t){var e=t.numerator*(H.RESOLUTION/t.denominator);this.ticks=this.tickMultiplier.clone().multiply(e),this.intrinsicTicks=this.ticks.value()}}]),Zt);function Zt(){var t;return function(t){if(!(t instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==Xt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,qt(Zt).call(this))).setAttribute("type","Tickable"),t.ticks=new d(0,1),t.intrinsicTicks=0,t.tickMultiplier=new d(1,1),t.width=0,t.x_shift=0,t.voice=null,t.tickContext=null,t.modifierContext=null,t.modifiers=[],t.preFormatted=!1,t.postFormatted=!1,t.tuplet=null,t.tupletStack=[],t.align_center=!1,t.center_x_shift=0,t.ignore_ticks=!1,t.formatterMetrics={freedom:{left:0,right:0},duration:"",iterations:0,space:{used:0,mean:0,deviation:0}},t}function $t(t){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function te(t){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ee(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ne(t,e,n){return e&&ee(t.prototype,e),n&&ee(t,n),t}function ie(t,e){return(ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var re=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),ie(t,e)}(oe,Qt),ne(oe,null,[{key:"plotMetrics",value:function(o,s,t){var e=s.getMetrics(),n=s.getAbsoluteX()-e.modLeftPx-e.extraLeftPx,i=s.getAbsoluteX()-e.extraLeftPx,r=s.getAbsoluteX(),a=s.getAbsoluteX()+e.noteWidth,u=s.getAbsoluteX()+e.noteWidth+e.extraRightPx,l=s.getAbsoluteX()+e.noteWidth+e.extraRightPx+e.modRightPx,c=l+s.getFormatterMetrics().freedom.right,h=l-n;o.save(),o.setFont("Arial",8,""),o.fillText(Math.round(h)+"px",n+s.getXShift(),t);var f=t+7;function p(t,e,n,i){var r=3<arguments.length&&void 0!==i?i:f;o.beginPath(),o.setStrokeStyle(n),o.setFillStyle(n),o.setLineWidth(3),o.moveTo(t+s.getXShift(),r),o.lineTo(e+s.getXShift(),r),o.stroke()}p(n,i,"red"),p(i,r,"#999"),p(r,a,"green"),p(a,u,"#999"),p(u,l,"red"),p(l,c,"#DD0"),p(n-s.getXShift(),n,"#BBB"),C.drawDot(o,r+s.getXShift(),f,"blue");var d=s.getFormatterMetrics();if(0<d.iterations){var b=d.space.deviation,y=0<=b?"+":"";o.setFillStyle("red"),o.fillText(y+Math.round(b),r+s.getXShift(),t-10)}o.restore()}},{key:"CATEGORY",get:function(){return"note"}},{key:"STAVEPADDING",get:function(){return 12}}]),ne(oe,[{key:"getPlayNote",value:function(){return this.playNote}},{key:"setPlayNote",value:function(t){return this.playNote=t,this}},{key:"isRest",value:function(){return!1}},{key:"addStroke",value:function(t,e){return e.setNote(this),e.setIndex(t),this.modifiers.push(e),this.setPreFormatted(!1),this}},{key:"getStave",value:function(){return this.stave}},{key:"setStave",value:function(t){return this.stave=t,this.setYs([t.getYForLine(0)]),this.context=this.stave.context,this}},{key:"getCategory",value:function(){return oe.CATEGORY}},{key:"setContext",value:function(t){return this.context=t,this}},{key:"getExtraLeftPx",value:function(){return this.extraLeftPx}},{key:"getExtraRightPx",value:function(){return this.extraRightPx}},{key:"setExtraLeftPx",value:function(t){return this.extraLeftPx=t,this}},{key:"setExtraRightPx",value:function(t){return this.extraRightPx=t,this}},{key:"shouldIgnoreTicks",value:function(){return this.ignore_ticks}},{key:"getLineNumber",value:function(){return 0}},{key:"getLineForRest",value:function(){return 0}},{key:"getGlyph",value:function(){return this.glyph}},{key:"getGlyphWidth",value:function(){return this.glyph.getWidth(this.render_options.glyph_font_scale)}},{key:"setYs",value:function(t){return this.ys=t,this}},{key:"getYs",value:function(){if(0===this.ys.length)throw new C.RERR("NoYValues","No Y-values calculated for this note.");return this.ys}},{key:"getYForTopText",value:function(t){if(!this.stave)throw new C.RERR("NoStave","No stave attached to this note.");return this.stave.getYForTopText(t)}},{key:"getBoundingBox",value:function(){return null}},{key:"getVoice",value:function(){if(!this.voice)throw new C.RERR("NoVoice","Note has no voice.");return this.voice}},{key:"setVoice",value:function(t){return this.voice=t,this.preFormatted=!1,this}},{key:"getTickContext",value:function(){return this.tickContext}},{key:"setTickContext",value:function(t){return this.tickContext=t,this.preFormatted=!1,this}},{key:"getDuration",value:function(){return this.duration}},{key:"isDotted",value:function(){return 0<this.dots}},{key:"hasStem",value:function(){return!1}},{key:"getDots",value:function(){return this.dots}},{key:"getNoteType",value:function(){return this.noteType}},{key:"setBeam",value:function(){return this}},{key:"setModifierContext",value:function(t){return this.modifierContext=t,this}},{key:"addModifier",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t.setNote(this),t.setIndex(e),this.modifiers.push(t),this.setPreFormatted(!1),this}},{key:"getModifierStartXY",value:function(){if(!this.preFormatted)throw new C.RERR("UnformattedNote","Can't call GetModifierStartXY on an unformatted note");return{x:this.getAbsoluteX(),y:this.ys[0]}}},{key:"getMetrics",value:function(){if(!this.preFormatted)throw new C.RERR("UnformattedNote","Can't call getMetrics on an unformatted note.");var t=0,e=0;null!=this.modifierContext&&(t=this.modifierContext.state.left_shift,e=this.modifierContext.state.right_shift);var n=this.getWidth();return{width:n,noteWidth:n-t-e-this.extraLeftPx-this.extraRightPx,left_shift:this.x_shift,modLeftPx:t,modRightPx:e,extraLeftPx:this.extraLeftPx,extraRightPx:this.extraRightPx}}},{key:"setWidth",value:function(t){this.width=t}},{key:"getWidth",value:function(){if(!this.preFormatted)throw new C.RERR("UnformattedNote","Can't call GetWidth on an unformatted note.");return this.width+(this.modifierContext?this.modifierContext.getWidth():0)}},{key:"setXShift",value:function(t){return this.x_shift=t,this}},{key:"getXShift",value:function(){return this.x_shift}},{key:"getX",value:function(){if(!this.tickContext)throw new C.RERR("NoTickContext","Note needs a TickContext assigned for an X-Value");return this.tickContext.getX()+this.x_shift}},{key:"getAbsoluteX",value:function(){if(!this.tickContext)throw new C.RERR("NoTickContext","Note needs a TickContext assigned for an X-Value");var t=this.tickContext.getX();return this.stave&&(t+=this.stave.getNoteStartX()+this.render_options.stave_padding),this.isCenterAligned()&&(t+=this.getCenterXShift()),t}},{key:"setPreFormatted",value:function(t){if(this.preFormatted=t,this.preFormatted){var e=this.tickContext.getExtraPx();this.left_modPx=Math.max(this.left_modPx,e.left),this.right_modPx=Math.max(this.right_modPx,e.right)}}}]),oe);function oe(t){var e;if(function(t){if(!(t instanceof oe))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==$t(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,te(oe).call(this))).setAttribute("type","Note"),!t)throw new C.RuntimeError("BadArguments","Note must have valid initialization data to identify duration and type.");var n=H.parseNoteData(t);if(!n)throw new C.RuntimeError("BadArguments","Invalid note initialization object: ".concat(JSON.stringify(t)));if(e.duration=n.duration,e.dots=n.dots,e.noteType=n.type,t.duration_override?e.setDuration(t.duration_override):e.setIntrinsicTicks(n.ticks),e.modifiers=[],e.glyph=H.durationToGlyph(e.duration,e.noteType),e.positions&&("object"!==$t(e.positions)||!e.positions.length))throw new C.RuntimeError("BadArguments","Note keys must be array type.");return e.playNote=null,e.tickContext=null,e.modifierContext=null,e.ignore_ticks=!1,e.width=0,e.extraLeftPx=0,e.extraRightPx=0,e.x_shift=0,e.left_modPx=0,e.right_modPx=0,e.voice=null,e.preFormatted=!1,e.ys=[],t.align_center&&e.setCenterAlignment(t.align_center),e.stave=null,e.render_options={annotation_spacing:5,stave_padding:oe.STAVEPADDING},e}function se(t){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ae(t,e,n){return(ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ue(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ue(t){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function le(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ce(t,e,n){return e&&le(t.prototype,e),n&&le(t,n),t}function he(t,e){return(he=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fe=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&he(t,e)}(pe,re),ce(pe,null,[{key:"CATEGORY",get:function(){return"notehead"}}]),ce(pe,[{key:"getCategory",value:function(){return pe.CATEGORY}},{key:"getWidth",value:function(){return this.width}},{key:"isDisplaced",value:function(){return!0===this.displaced}},{key:"getGlyph",value:function(){return this.glyph}},{key:"setX",value:function(t){return this.x=t,this}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(t){return this.y=t,this}},{key:"getLine",value:function(){return this.line}},{key:"setLine",value:function(t){return this.line=t,this}},{key:"getAbsoluteX",value:function(){var t=this.preFormatted?ae(ue(pe.prototype),"getAbsoluteX",this).call(this):this.x,e=pt.WIDTH/2;return t+(this.displaced?(this.width-e)*this.stem_direction:0)}},{key:"getBoundingBox",value:function(){if(!this.preFormatted)throw new C.RERR("UnformattedNote","Can't call getBoundingBox on an unformatted note.");var t=this.stave.getSpacingBetweenLines(),e=t/2,n=this.y-e;return new H.BoundingBox(this.getAbsoluteX(),n,this.width,t)}},{key:"setStave",value:function(t){var e=this.getLine();return this.stave=t,this.setY(t.getYForNote(e)),this.context=this.stave.context,this}},{key:"preFormat",value:function(){if(this.preFormatted)return this;var t=this.getWidth()+this.extraLeftPx+this.extraRightPx;return this.setWidth(t),this.setPreFormatted(!0),this}},{key:"draw",value:function(){this.checkContext(),this.setRendered();var t=this.context,e=this.getAbsoluteX(),n=this.y;!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];fe.DEBUG&&C.L("Vex.Flow.NoteHead",e)}("Drawing note head '",this.note_type,this.duration,"' at",e,n);var i=this.stem_direction,r=this.render_options.glyph_font_scale;if(this.style&&this.applyStyle(t),"s"===this.note_type){var o=this.stave.getSpacingBetweenLines();!function(t,e,n,i,r,o){var s=H.SLASH_NOTEHEAD_WIDTH;t.save(),t.setLineWidth(H.STEM_WIDTH);var a=!1;if(2<H.durationToNumber(e)&&(a=!0),a||(n-=H.STEM_WIDTH/2*r),t.beginPath(),t.moveTo(n,i+o),t.lineTo(n,i+1),t.lineTo(n+s,i-o),t.lineTo(n+s,i),t.lineTo(n,i+o),t.closePath(),a?t.fill():t.stroke(),H.durationToFraction(e).equals(.5))for(var u=[-3,-1,s+1,s+3],l=0;l<u.length;l++)t.beginPath(),t.moveTo(n+u[l],i-10),t.lineTo(n+u[l],i+11),t.stroke();t.restore()}(t,this.duration,e,n,i,o)}else G.renderGlyph(t,e,n,r,this.glyph_code);this.style&&this.restoreStyle(t)}}]),pe);function pe(t){var e;if(function(t){if(!(t instanceof pe))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==se(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ue(pe).call(this,t))).setAttribute("type","NoteHead"),e.index=t.index,e.x=t.x||0,e.y=t.y||0,e.note_type=t.note_type,e.duration=t.duration,e.displaced=t.displaced||!1,e.stem_direction=t.stem_direction||We.STEM_UP,e.line=t.line,e.glyph=H.durationToGlyph(e.duration,e.note_type),!e.glyph)throw new C.RuntimeError("BadArguments","No glyph found for duration '".concat(e.duration,"' and type '").concat(e.note_type,"'"));return e.glyph_code=e.glyph.code_head,e.x_shift=t.x_shift,t.custom_glyph_code&&(e.custom_glyph=!0,e.glyph_code=t.custom_glyph_code),e.style=t.style,e.slashed=t.slashed,C.Merge(e.render_options,{glyph_font_scale:t.glyph_font_scale||H.DEFAULT_NOTATION_FONT_SCALE,stroke_px:3}),e.setWidth(e.glyph.getWidth(e.render_options.glyph_font_scale)),e}function de(t){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function be(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ye(t){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function me(t,e){return(me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ge=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&me(t,e)}(ve,re),be(ve.prototype,[{key:"getStem",value:function(){return this.stem}},{key:"setStem",value:function(t){return this.stem=t,this}},{key:"buildStem",value:function(){var t=new pt;return this.setStem(t),this}},{key:"buildFlag",value:function(){var t=this.glyph,e=null===this.beam;if(t&&t.flag&&e){var n=this.getStemDirection()===pt.DOWN?t.code_flag_downstem:t.code_flag_upstem;this.flag=new G(n,this.render_options.glyph_font_scale)}}},{key:"getStemLength",value:function(){return pt.HEIGHT+this.getStemExtension()}},{key:"getBeamCount",value:function(){var t=this.getGlyph();return t?t.beam_count:0}},{key:"getStemMinumumLength",value:function(){var t=H.durationToFraction(this.duration).value()<=1?0:20;switch(this.duration){case"8":null==this.beam&&(t=35);break;case"16":t=null==this.beam?35:25;break;case"32":t=null==this.beam?45:35;break;case"64":t=null==this.beam?50:40;break;case"128":t=null==this.beam?55:45}return t}},{key:"getStemDirection",value:function(){return this.stem_direction}},{key:"setStemDirection",value:function(t){if((t=t||pt.UP)!==pt.UP&&t!==pt.DOWN)throw new C.RERR("BadArgument","Invalid stem direction: ".concat(t));return this.stem_direction=t,this.stem&&(this.stem.setDirection(t),this.stem.setExtension(this.getStemExtension())),this.reset(),this.flag&&this.buildFlag(),this.beam=null,this.preFormatted&&this.preFormat(),this}},{key:"getStemX",value:function(){var t=this.getAbsoluteX()+this.x_shift,e=this.getAbsoluteX()+this.x_shift+this.getGlyphWidth();return this.stem_direction===pt.DOWN?t:e}},{key:"getCenterGlyphX",value:function(){return this.getAbsoluteX()+this.x_shift+this.getGlyphWidth()/2}},{key:"getStemExtension",value:function(){var t=this.getGlyph();return null!=this.stemExtensionOverride?this.stemExtensionOverride:t?1===this.getStemDirection()?t.stem_up_extension:t.stem_down_extension:0}},{key:"setStemLength",value:function(t){return this.stemExtensionOverride=t-pt.HEIGHT,this}},{key:"getStemExtents",value:function(){return this.stem.getExtents()}},{key:"setBeam",value:function(t){return this.beam=t,this}},{key:"getYForTopText",value:function(t){var e=this.getStemExtents();return this.hasStem()?Math.min(this.stave.getYForTopText(t),e.topY-this.render_options.annotation_spacing*(t+1)):this.stave.getYForTopText(t)}},{key:"getYForBottomText",value:function(t){var e=this.getStemExtents();return this.hasStem()?Math.max(this.stave.getYForTopText(t),e.baseY+this.render_options.annotation_spacing*t):this.stave.getYForBottomText(t)}},{key:"hasFlag",value:function(){return H.durationToGlyph(this.duration).flag&&!this.beam}},{key:"postFormat",value:function(){return this.beam&&this.beam.postFormat(),this.postFormatted=!0,this}},{key:"drawStem",value:function(t){this.checkContext(),this.setRendered(),this.setStem(new pt(t)),this.stem.setContext(this.context).draw()}}]),ve);function ve(t){var e;return function(t){if(!(t instanceof ve))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==de(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ye(ve).call(this,t))).setAttribute("type","StemmableNote"),e.stem=null,e.stemExtensionOverride=null,e.beam=null,e}function _e(t){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Se(t){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function we(t,e,n){return e&&xe(t.prototype,e),n&&xe(t,n),t}function Ee(t,e){return(Ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pe=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ee(t,e)}(Te,E),we(Te,null,[{key:"CATEGORY",get:function(){return"none"}},{key:"Position",get:function(){return{LEFT:1,RIGHT:2,ABOVE:3,BELOW:4}}},{key:"PositionString",get:function(){return{above:Te.Position.ABOVE,below:Te.Position.BELOW,left:Te.Position.LEFT,right:Te.Position.RIGHT}}}]),we(Te,[{key:"getCategory",value:function(){return Te.CATEGORY}},{key:"getWidth",value:function(){return this.width}},{key:"setWidth",value:function(t){return this.width=t,this}},{key:"getNote",value:function(){return this.note}},{key:"setNote",value:function(t){return this.note=t,this}},{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(t){return this.index=t,this}},{key:"getModifierContext",value:function(){return this.modifier_context}},{key:"setModifierContext",value:function(t){return this.modifier_context=t,this}},{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(t){return this.position="string"==typeof t?Te.PositionString[t]:t,this}},{key:"setTextLine",value:function(t){return this.text_line=t,this}},{key:"setYShift",value:function(t){return this.y_shift=t,this}},{key:"setSpacingFromNextModifier",value:function(t){this.spacingFromNextModifier=t}},{key:"getSpacingFromNextModifier",value:function(){return this.spacingFromNextModifier}},{key:"setXShift",value:function(t){this.x_shift=0,this.position===Te.Position.LEFT?this.x_shift-=t:this.x_shift+=t}},{key:"getXShift",value:function(){return this.x_shift}},{key:"draw",value:function(){throw this.checkContext(),new C.RERR("MethodNotImplemented","draw() not implemented for this modifier.")}},{key:"alignSubNotesWithNote",value:function(t,n){var e=n.getTickContext(),i=e.getExtraPx(),r=e.getX()-i.left-i.extraLeft+this.getSpacingFromNextModifier();t.forEach(function(t){var e=t.getTickContext();t.setStave(n.stave),e.setXOffset(r)})}}]),Te);function Te(){var t;return function(t){if(!(t instanceof Te))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==_e(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Se(Te).call(this))).setAttribute("type","Modifier"),t.width=0,t.note=null,t.index=null,t.text_line=0,t.position=Te.Position.LEFT,t.modifier_context=null,t.x_shift=0,t.y_shift=0,t.spacingFromNextModifier=0,t}function ke(t){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oe(t){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Me(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Re(t,e,n){return e&&Me(t.prototype,e),n&&Me(t,n),t}function Le(t,e){return(Le=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ae=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Le(t,e)}(Ce,Pe),Re(Ce,null,[{key:"format",value:function(t,e){var n=e.right_shift;if(!t||0===t.length)return!1;for(var i=[],r={},o=0;o<t.length;++o){var s=t[o],a=s.getNote(),u=void 0,l=void 0;l="function"==typeof a.getKeyProps?(u=a.getKeyProps()[s.getIndex()]).displaced?a.getExtraRightPx():0:(u={line:.5},0);var c=a.getAttribute("id");i.push({line:u.line,note:a,note_id:c,dot:s}),r[c]=Math.max(r[c]||l,l)}i.sort(function(t,e){return e.line-t.line});for(var h=n,f=0,p=null,d=null,b=null,y=0,m=0;m<i.length;++m){var g=i[m],v=g.dot,_=g.note,S=g.note_id,x=g.line;x===p&&_===d||(h=r[S]),_.isRest()||x===p||(.5===Math.abs(x%1)?y=0:(y=.5,null==d||d.isRest()||p-x!=.5?x+y===b&&(y=-.5):y=-.5)),_.isRest()?v.dot_shiftY+=-y:v.dot_shiftY=-y,b=x+y,v.setXShift(h),f=(h+=v.getWidth()+1)>f?h:f,p=x,d=_}return e.right_shift+=f,!0}},{key:"CATEGORY",get:function(){return"dots"}}]),Re(Ce,[{key:"getCategory",value:function(){return Ce.CATEGORY}},{key:"setNote",value:function(t){this.note=t,"gracenotes"===this.note.getCategory()&&(this.radius*=.5,this.setWidth(3))}},{key:"setDotShiftY",value:function(t){return this.dot_shiftY=t,this}},{key:"draw",value:function(){if(this.checkContext(),this.setRendered(),!this.note||null===this.index)throw new C.RERR("NoAttachedNote","Can't draw dot without a note and index.");var t=this.note.stave.options.spacing_between_lines_px,e=this.note.getModifierStartXY(this.position,this.index,{forceFlagRight:!0});"tabnotes"===this.note.getCategory()&&(e.y=this.note.getStemExtents().baseY);var n=e.x+this.x_shift+this.width-this.radius,i=e.y+this.y_shift+this.dot_shiftY*t,r=this.context;r.beginPath(),r.arc(n,i,this.radius,0,2*Math.PI,!1),r.fill()}}]),Ce);function Ce(){var t;return function(t){if(!(t instanceof Ce))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==ke(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Oe(Ce).call(this))).setAttribute("type","Dot"),t.note=null,t.index=null,t.position=Pe.Position.RIGHT,t.radius=2,t.setWidth(5),t.dot_shiftY=0,t}function Ie(t){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ne(){return(Ne=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function Fe(t,e,n){return(Fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Be(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Be(t){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function De(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function je(t,e,n){return e&&De(t.prototype,e),n&&De(t,n),t}function Ve(t,e){return(Ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ge(t,e,n){var i=(e.isrest?0:1)*n;t.line+=i,t.maxLine+=i,t.minLine+=i,t.note.setKeyLine(0,t.note.getKeyLine(0)+i)}var We=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Ve(t,e)}(Ue,ge),je(Ue,null,[{key:"format",value:function(t,e){if(!t||t.length<2)return!1;if(t[0].getStave())return Ue.formatByY(t,e);for(var n=[],i=0;i<t.length;i++){var r=t[i].getKeyProps(),o=r[0].line,s=r[r.length-1].line,a=t[i].getStemDirection(),u=t[i].getStemLength()/10,l=t[i].getStemMinumumLength()/10,c=void 0;s=t[i].isRest()?(c=o+t[i].glyph.line_above,o-t[i].glyph.line_below):(c=1===a?r[r.length-1].line+u:r[r.length-1].line,1===a?r[0].line:r[0].line-u),n.push({line:r[0].line,maxLine:c,minLine:s,isrest:t[i].isRest(),stemDirection:a,stemMax:u,stemMin:l,voice_shift:t[i].getVoiceShiftWidth(),is_displaced:t[i].isDisplaced(),note:t[i]})}var h=n.length,f=n[0],p=2<h?n[1]:null,d=2<h?n[2]:n[1];2===h&&-1===f.stemDirection&&1===d.stemDirection&&(f=n[1],d=n[0]);var b,y,m,g,v,_=Math.max(f.voice_shift,d.voice_shift),S=0;if(2!==h)return null!==p&&p.minLine<d.maxLine+.5&&(p.isrest||(b=Math.abs(p.line-(d.maxLine+.5)),b=Math.max(b,p.stemMin),p.minLine=p.line-b,p.note.setStemLength(10*b))),p.isrest&&!f.isrest&&!d.isrest&&(f.minLine<=p.maxLine||p.minLine<=d.maxLine)?p.maxLine-p.minLine<f.minLine-d.maxLine?(m=f,g=d,v=(y=p).line-C.MidLine(m.minLine,g.maxLine),y.note.setKeyLine(0,y.note.getKeyLine(0)-v),y.line-=v,y.maxLine-=v,y.minLine-=v):(S=_+3,p.note.setXShift(S)):f.isrest&&p.isrest&&d.isrest?(Ge(f,p,1),Ge(d,p,-1)):(p.isrest&&f.isrest&&p.minLine<=d.maxLine&&Ge(p,d,1),p.isrest&&d.isrest&&f.minLine<=p.maxLine&&Ge(p,f,-1),f.isrest&&f.minLine<=p.maxLine&&Ge(f,p,1),d.isrest&&p.minLine<=d.maxLine&&Ge(d,p,-1),(!f.isrest&&!p.isrest&&f.minLine<=p.maxLine+.5||!p.isrest&&!d.isrest&&p.minLine<=d.maxLine)&&(S=_+3,p.note.setXShift(S))),!0;var x=f.stemDirection===d.stemDirection?0:.5;return f.stemDirection===d.stemDirection&&f.minLine<=d.maxLine&&(f.isrest||(b=Math.abs(f.line-(d.maxLine+.5)),b=Math.max(b,f.stemMin),f.minLine=f.line-b,f.note.setStemLength(10*b))),f.minLine<=d.maxLine+x&&(f.isrest?Ge(f,d,1):d.isrest?Ge(d,f,-1):(S=_,f.stemDirection===d.stemDirection?f.note.setXShift(S+3):d.note.setXShift(S))),!0}},{key:"formatByY",value:function(t,e){for(var n=!0,i=0;i<t.length;i++)n=n&&null!=t[i].getStave();if(!n)throw new C.RERR("Stave Missing","All notes must have a stave - Vex.Flow.ModifierContext.formatMultiVoice!");for(var r=0,o=0;o<t.length-1;o++){var s=t[o],a=t[o+1];s.getStemDirection()===pt.DOWN&&(s=t[o+1],a=t[o]);var u=s.getKeyProps(),l=a.getKeyProps(),c=s.getStave().getYForLine(5-u[0].line+.5);a.getStave().getYForLine(5-l[l.length-1].line-.5)-c<0&&(r=s.getVoiceShiftWidth()+2,a.setXShift(r))}e.right_shift+=r}},{key:"postFormat",value:function(t){return!!t&&(t.forEach(function(t){return t.postFormat()}),!0)}},{key:"CATEGORY",get:function(){return"stavenotes"}},{key:"STEM_UP",get:function(){return pt.UP}},{key:"STEM_DOWN",get:function(){return pt.DOWN}},{key:"DEFAULT_LEDGER_LINE_OFFSET",get:function(){return 3}}]),je(Ue,[{key:"reset",value:function(){var e=this;Fe(Be(Ue.prototype),"reset",this).call(this);var n=this.note_heads.map(function(t){return t.getStyle()});this.buildNoteHeads(),this.note_heads.forEach(function(t,e){return t.setStyle(n[e])}),this.stave&&this.note_heads.forEach(function(t){return t.setStave(e.stave)}),this.calcExtraPx()}},{key:"getCategory",value:function(){return Ue.CATEGORY}},{key:"buildStem",value:function(){var t=this.getGlyph();this.setStem(new pt({stem_up_y_offset:t.stem_up_y_offset,stem_down_y_offset:t.stem_down_y_offset,hide:!!this.isRest()}))}},{key:"buildNoteHeads",value:function(){this.note_heads=[];var t,e,n,i=this.getStemDirection(),r=this.getKeys(),o=null,s=null,a=!1;i===pt.UP?(t=0,e=r.length,n=1):i===pt.DOWN&&(t=r.length-1,n=e=-1);for(var u=t;u!==e;u+=n){var l=this.keyProps[u],c=l.line;null===o?o=c:0===(s=Math.abs(o-c))||.5===s?a=!a:(a=!1,this.use_default_head_x=!0),o=c;var h=new fe({duration:this.duration,note_type:this.noteType,displaced:a,stem_direction:i,custom_glyph_code:l.code,glyph_font_scale:this.render_options.glyph_font_scale,x_shift:l.shift_right,line:l.line});this.note_heads[u]=h}}},{key:"autoStem",value:function(){this.minLine=this.keyProps[0].line,this.maxLine=this.keyProps[this.keyProps.length-1].line;var t=(this.minLine+this.maxLine)/2<3?pt.UP:pt.DOWN;this.setStemDirection(t)}},{key:"calculateKeyProps",value:function(){for(var e=null,t=0;t<this.keys.length;++t){var n=this.keys[t];this.glyph.rest&&(this.glyph.position=n);var i={octave_shift:this.octave_shift||0},r=H.keyProperties(n,this.clef,i);if(!r)throw new C.RuntimeError("BadArguments","Invalid key for note properties: ".concat(n));"R"===r.key&&("1"===this.duration||"w"===this.duration?r.line=4:r.line=3);var o=r.line;null===e?e=o:.5===Math.abs(e-o)&&(this.displaced=!0,r.displaced=!0,0<this.keyProps.length&&(this.keyProps[t-1].displaced=!0)),e=o,this.keyProps.push(r)}e=-1/0,this.keyProps.forEach(function(t){t.line<e&&C.W("Unsorted keys in note will be sorted. See https://github.com/0xfe/vexflow/issues/104 for details."),e=t.line}),this.keyProps.sort(function(t,e){return t.line-e.line})}},{key:"getBoundingBox",value:function(){if(!this.preFormatted)throw new C.RERR("UnformattedNote","Can't call getBoundingBox on an unformatted note.");var t=this.getMetrics(),e=t.width,n=t.modLeftPx,i=t.extraLeftPx,r=this.getAbsoluteX()-n-i,o=0,s=0,a=this.getStave().getSpacingBetweenLines()/2,u=2*a;if(this.isRest()){var l=this.ys[0],c=H.durationToFraction(this.duration);s=c.equals(1)||c.equals(2)?(o=l-a,l+a):(o=l-this.glyph.line_above*u,l+this.glyph.line_below*u)}else if(this.glyph.stem){var h=this.getStemExtents();h.baseY+=a*this.stem_direction,o=Math.min(h.topY,h.baseY),s=Math.max(h.topY,h.baseY)}else{s=o=null;for(var f=0;f<this.ys.length;++f){var p=this.ys[f];s=0===f?o=p:(o=Math.min(p,o),Math.max(p,s))}o-=a,s+=a}return new L(r,o,e,s-o)}},{key:"getLineNumber",value:function(t){if(!this.keyProps.length)throw new C.RERR("NoKeyProps","Can't get bottom note line, because note is not initialized properly.");for(var e=this.keyProps[0].line,n=0;n<this.keyProps.length;n++){var i=this.keyProps[n].line;t?e<i&&(e=i):i<e&&(e=i)}return e}},{key:"isRest",value:function(){return this.glyph.rest}},{key:"isChord",value:function(){return!this.isRest()&&1<this.keys.length}},{key:"hasStem",value:function(){return this.glyph.stem}},{key:"hasFlag",value:function(){return Fe(Be(Ue.prototype),"hasFlag",this).call(this)&&!this.isRest()}},{key:"getStemX",value:function(){return"r"===this.noteType?this.getCenterGlyphX():Fe(Be(Ue.prototype),"getStemX",this).call(this)+pt.WIDTH/(2*-this.getStemDirection())}},{key:"getYForTopText",value:function(t){var e=this.getStemExtents();return Math.min(this.stave.getYForTopText(t),e.topY-this.render_options.annotation_spacing*(t+1))}},{key:"getYForBottomText",value:function(t){var e=this.getStemExtents();return Math.max(this.stave.getYForTopText(t),e.baseY+this.render_options.annotation_spacing*t)}},{key:"setStave",value:function(e){Fe(Be(Ue.prototype),"setStave",this).call(this,e);var t=this.note_heads.map(function(t){return t.setStave(e),t.getY()});if(this.setYs(t),this.stem){var n=this.getNoteHeadBounds(),i=n.y_top,r=n.y_bottom;this.stem.setYBounds(i,r)}return this}},{key:"getKeys",value:function(){return this.keys}},{key:"getKeyProps",value:function(){return this.keyProps}},{key:"isDisplaced",value:function(){return this.displaced}},{key:"setNoteDisplaced",value:function(t){return this.displaced=t,this}},{key:"getTieRightX",value:function(){var t=this.getAbsoluteX();return t+=this.getGlyphWidth()+this.x_shift+this.extraRightPx,this.modifierContext&&(t+=this.modifierContext.getExtraRightPx()),t}},{key:"getTieLeftX",value:function(){return this.getAbsoluteX()+(this.x_shift-this.extraLeftPx)}},{key:"getLineForRest",value:function(){var t=this.keyProps[0].line;if(1<this.keyProps.length){var e=this.keyProps[this.keyProps.length-1].line,n=Math.max(t,e),i=Math.min(t,e);t=C.MidLine(n,i)}return t}},{key:"getModifierStartXY",value:function(t,e,n){if(n=n||{},!this.preFormatted)throw new C.RERR("UnformattedNote","Can't call GetModifierStartXY on an unformatted note");if(0===this.ys.length)throw new C.RERR("NoYValues","No Y-Values calculated for this note.");var i,r=Pe.Position,o=r.ABOVE,s=r.BELOW,a=r.LEFT,u=r.RIGHT,l=0;return t===a?l=-2:t===u?(l=this.getGlyphWidth()+this.x_shift+2,this.stem_direction===pt.UP&&this.hasFlag()&&(n.forceFlagRight||e===((i=this).getStemDirection()===pt.UP?i.keyProps.length-1:0))&&(l+=this.flag.getMetrics().width)):t!==s&&t!==o||(l=this.getGlyphWidth()/2),{x:this.getAbsoluteX()+l,y:this.ys[e]}}},{key:"setStyle",value:function(e){Fe(Be(Ue.prototype),"setStyle",this).call(this,e),this.note_heads.forEach(function(t){return t.setStyle(e)}),this.stem.setStyle(e)}},{key:"setStemStyle",value:function(t){this.getStem().setStyle(t)}},{key:"getStemStyle",value:function(){return this.stem.getStyle()}},{key:"setLedgerLineStyle",value:function(t){this.ledgerLineStyle=t}},{key:"getLedgerLineStyle",value:function(){return this.ledgerLineStyle}},{key:"setFlagStyle",value:function(t){this.flagStyle=t}},{key:"getFlagStyle",value:function(){return this.flagStyle}},{key:"setKeyStyle",value:function(t,e){return this.note_heads[t].setStyle(e),this}},{key:"setKeyLine",value:function(t,e){return this.keyProps[t].line=e,this.reset(),this}},{key:"getKeyLine",value:function(t){return this.keyProps[t].line}},{key:"addToModifierContext",value:function(t){this.setModifierContext(t);for(var e=0;e<this.modifiers.length;++e)this.modifierContext.addModifier(this.modifiers[e]);return this.modifierContext.addModifier(this),this.setPreFormatted(!1),this}},{key:"addModifier",value:function(t,e){return e.setNote(this),e.setIndex(t),this.modifiers.push(e),this.setPreFormatted(!1),this}},{key:"addAccidental",value:function(t,e){return this.addModifier(t,e)}},{key:"addArticulation",value:function(t,e){return this.addModifier(t,e)}},{key:"addAnnotation",value:function(t,e){return this.addModifier(t,e)}},{key:"addDot",value:function(t){var e=new Ae;return e.setDotShiftY(this.glyph.dot_shiftY),this.dots++,this.addModifier(t,e)}},{key:"addDotToAll",value:function(){for(var t=0;t<this.keys.length;++t)this.addDot(t);return this}},{key:"getAccidentals",value:function(){return this.modifierContext.getModifiers("accidentals")}},{key:"getDots",value:function(){return this.modifierContext.getModifiers("dots")}},{key:"getVoiceShiftWidth",value:function(){return this.getGlyphWidth()*(this.displaced?2:1)}},{key:"calcExtraPx",value:function(){this.setExtraLeftPx(this.displaced&&this.stem_direction===pt.DOWN?this.getGlyphWidth():0),this.setExtraRightPx(!this.hasFlag()&&this.displaced&&this.stem_direction===pt.UP?this.getGlyphWidth():0)}},{key:"preFormat",value:function(){if(!this.preFormatted){this.modifierContext&&this.modifierContext.preFormat();var t=this.getGlyphWidth()+this.extraLeftPx+this.extraRightPx;this.glyph.flag&&null===this.beam&&this.stem_direction===pt.UP&&(t+=this.getGlyphWidth()),this.setWidth(t),this.setPreFormatted(!0)}}},{key:"getNoteHeadBounds",value:function(){var i=null,r=null,o=null,s=null,a=this.stave.getNumLines(),u=1,l=!1,c=!1,h=a,f=u;return this.note_heads.forEach(function(t){var e=t.getLine(),n=t.getY();(null===i||n<i)&&(i=n),(null===r||r<n)&&(r=n),null===s&&t.isDisplaced()&&(s=t.getAbsoluteX()),null!==o||t.isDisplaced()||(o=t.getAbsoluteX()),a=a<e?e:a,u=e<u?e:u,t.isDisplaced()?(l=!1===l?e:Math.max(e,l),c=!1===c?e:Math.min(e,c)):(h=Math.max(e,h),f=Math.min(e,f))},this),{y_top:i,y_bottom:r,displaced_x:s,non_displaced_x:o,highest_line:a,lowest_line:u,highest_displaced_line:l,lowest_displaced_line:c,highest_non_displaced_line:h,lowest_non_displaced_line:f}}},{key:"getNoteHeadBeginX",value:function(){return this.getAbsoluteX()+this.x_shift}},{key:"getNoteHeadEndX",value:function(){return this.getNoteHeadBeginX()+this.getGlyphWidth()}},{key:"drawLedgerLines",value:function(){var t=this.stave,e=this.glyph,o=this.render_options.stroke_px,s=this.context,a=e.getWidth()+2*o,u=2*(e.getWidth()+o)-pt.WIDTH/2;if(!this.isRest()){if(!s)throw new C.RERR("NoCanvasContext","Can't draw without a canvas context.");var n=this.getNoteHeadBounds(),i=n.highest_line,r=n.lowest_line,l=n.highest_displaced_line,c=n.highest_non_displaced_line,h=n.lowest_displaced_line,f=n.lowest_non_displaced_line,p=n.displaced_x,d=n.non_displaced_x,b=Math.min(p,d),y=function(t,e,n){var i;i=n&&e?b-o:e?d-o:p-o;var r=e&&n?u:a;s.beginPath(),s.moveTo(i,t),s.lineTo(i+r,t),s.stroke()},m=Ne({},t.getStyle()||{},this.getLedgerLineStyle()||{});this.applyStyle(s,m);for(var g=6;g<=i;++g){var v=null!==d&&g<=c,_=null!==p&&g<=l;y(t.getYForNote(g),v,_)}for(var S=0;r<=S;--S){var x=null!==d&&f<=S,w=null!==p&&h<=S;y(t.getYForNote(S),x,w)}this.restoreStyle(s,m)}}},{key:"drawModifiers",value:function(){if(!this.context)throw new C.RERR("NoCanvasContext","Can't draw without a canvas context.");var t=this.context;t.openGroup("modifiers");for(var e=0;e<this.modifiers.length;e++){var n=this.modifiers[e],i=this.note_heads[n.getIndex()],r=i.getStyle();i.applyStyle(t,r),n.setContext(t),n.draw(),i.restoreStyle(t,r)}t.closeGroup()}},{key:"drawFlag",value:function(){var t=this.stem,e=this.beam,n=this.context;if(!n)throw new C.RERR("NoCanvasContext","Can't draw without a canvas context.");var i=null===e;if(this.getGlyph().flag&&i){var r=this.getNoteHeadBounds(),o=r.y_top,s=r.y_bottom,a=t.getHeight(),u=this.getStemX(),l=this.getStemDirection()===pt.DOWN?o-a+2:s-a-2;n.openGroup("flag",null,{pointerBBox:!0}),this.applyStyle(n,this.getFlagStyle()||!1),this.flag.render(n,u,l),this.restoreStyle(n,this.getFlagStyle()||!1),n.closeGroup()}}},{key:"drawNoteHeads",value:function(){var e=this;this.note_heads.forEach(function(t){e.context.openGroup("notehead",null,{pointerBBox:!0}),t.setContext(e.context).draw(),e.context.closeGroup()})}},{key:"drawStem",value:function(t){if(!this.context)throw new C.RERR("NoCanvasContext","Can't draw without a canvas context.");t&&this.setStem(new pt(t)),this.context.openGroup("stem",null,{pointerBBox:!0}),this.stem.setContext(this.context).draw(),this.context.closeGroup()}},{key:"draw",value:function(){if(!this.context)throw new C.RERR("NoCanvasContext","Can't draw without a canvas context.");if(!this.stave)throw new C.RERR("NoStave","Can't draw without a stave.");if(0===this.ys.length)throw new C.RERR("NoYValues","Can't draw note without Y values.");var e=this.getNoteHeadBeginX(),t=this.hasStem()&&!this.beam;this.note_heads.forEach(function(t){return t.setX(e)});var n=this.getStemX();this.stem.setNoteHeadXBounds(n,n),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];We.DEBUG&&C.L("Vex.Flow.StaveNote",e)}("Rendering ",this.isChord()?"chord :":"note :",this.keys),this.drawLedgerLines(),this.applyStyle(),this.setAttribute("el",this.context.openGroup("stavenote",this.getAttribute("id"))),this.context.openGroup("note",null,{pointerBBox:!0}),t&&this.drawStem(),this.drawNoteHeads(),this.drawFlag(),this.context.closeGroup(),this.drawModifiers(),this.context.closeGroup(),this.restoreStyle(),this.setRendered()}}]),Ue);function Ue(t){var e;if(function(t){if(!(t instanceof Ue))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==Ie(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Be(Ue).call(this,t))).setAttribute("type","StaveNote"),e.keys=t.keys,e.clef=t.clef,e.octave_shift=t.octave_shift,e.beam=null,e.glyph=H.durationToGlyph(e.duration,e.noteType),!e.glyph)throw new C.RuntimeError("BadArguments","Invalid note initialization data (No glyph found): ".concat(JSON.stringify(t)));return e.displaced=!1,e.dot_shiftY=0,e.keyProps=[],e.use_default_head_x=!1,e.note_heads=[],e.modifiers=[],C.Merge(e.render_options,{glyph_font_scale:t.glyph_font_scale||H.DEFAULT_NOTATION_FONT_SCALE,stroke_px:t.stroke_px||Ue.DEFAULT_LEDGER_LINE_OFFSET}),e.calculateKeyProps(),e.buildStem(),t.auto_stem?e.autoStem():e.setStemDirection(t.stem_direction),e.reset(),e.buildFlag(),e}function He(t){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ye(t){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ze(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Xe(t,e,n){return e&&ze(t.prototype,e),n&&ze(t,n),t}function Ke(t,e){return(Ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qe=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Ke(t,e)}(Je,Pe),Xe(Je,null,[{key:"format",value:function(t,e){var n=e.left_shift,i=e.right_shift;if(!t||0===t.length)return!1;for(var r=[],o=null,s=0,a=0,u=0;u<t.length;++u){var l=t[u],c=l.getNote(),h=l.getPosition(),f=c.getKeyProps()[l.getIndex()];if(c!==o){for(var p=0;p<c.keys.length;++p){var d=c.getKeyProps()[p];0===n&&(s=d.displaced?c.getExtraLeftPx():s),0===i&&(a=d.displaced?c.getExtraRightPx():a)}o=c}r.push({note:c,num:l,pos:h,line:f.line,shiftL:s,shiftR:a})}r.sort(function(t,e){return e.line-t.line});for(var b=0,y=0,m=0,g=0,v=null,_=null,S=0;S<r.length;++S){var x=0,w=r[S],E=w.note,P=w.pos,T=w.num,k=w.line,O=w.shiftL,M=w.shiftR;k===v&&E===_||(b=n+O,y=i+M);var R=T.getWidth()+1;P===Pe.Position.LEFT?(T.setXShift(n+b),m=(x=n+R)>m?x:m):P===Pe.Position.RIGHT&&(T.setXShift(y),g=(x=a+R)>g?x:g),v=k,_=E}return e.left_shift+=m,e.right_shift+=g,!0}},{key:"CATEGORY",get:function(){return"frethandfinger"}}]),Xe(Je,[{key:"getCategory",value:function(){return Je.CATEGORY}},{key:"setFretHandFinger",value:function(t){return this.finger=t,this}},{key:"setOffsetX",value:function(t){return this.x_offset=t,this}},{key:"setOffsetY",value:function(t){return this.y_offset=t,this}},{key:"draw",value:function(){if(this.checkContext(),!this.note||null==this.index)throw new C.RERR("NoAttachedNote","Can't draw string number without a note and index.");this.setRendered();var t=this.context,e=this.note.getModifierStartXY(this.position,this.index),n=e.x+this.x_shift+this.x_offset,i=e.y+this.y_shift+this.y_offset+5;switch(this.position){case Pe.Position.ABOVE:n-=4,i-=12;break;case Pe.Position.BELOW:n-=2,i+=10;break;case Pe.Position.LEFT:n-=this.width;break;case Pe.Position.RIGHT:n+=1;break;default:throw new C.RERR("InvalidPostion","The position ".concat(this.position," does not exist"))}t.save(),t.setFont(this.font.family,this.font.size,this.font.weight),t.fillText(""+this.finger,n,i),t.restore()}}]),Je);function Je(t){var e;return function(t){if(!(t instanceof Je))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==He(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ye(Je).call(this))).setAttribute("type","FretHandFinger"),e.note=null,e.index=null,e.finger=t,e.width=7,e.position=Pe.Position.LEFT,e.x_shift=0,e.y_shift=0,e.x_offset=0,e.y_offset=0,e.font={family:"sans-serif",size:9,weight:"bold"},e}function Qe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ze,$e,tn=($e=[{key:"NUM_TONES",get:function(){return 12}},{key:"roots",get:function(){return["c","d","e","f","g","a","b"]}},{key:"root_values",get:function(){return[0,2,4,5,7,9,11]}},{key:"root_indices",get:function(){return{c:0,d:1,e:2,f:3,g:4,a:5,b:6}}},{key:"canonical_notes",get:function(){return["c","c#","d","d#","e","f","f#","g","g#","a","a#","b"]}},{key:"diatonic_intervals",get:function(){return["unison","m2","M2","m3","M3","p4","dim5","p5","m6","M6","b7","M7","octave"]}},{key:"diatonic_accidentals",get:function(){return{unison:{note:0,accidental:0},m2:{note:1,accidental:-1},M2:{note:1,accidental:0},m3:{note:2,accidental:-1},M3:{note:2,accidental:0},p4:{note:3,accidental:0},dim5:{note:4,accidental:-1},p5:{note:4,accidental:0},m6:{note:5,accidental:-1},M6:{note:5,accidental:0},b7:{note:6,accidental:-1},M7:{note:6,accidental:0},octave:{note:7,accidental:0}}}},{key:"intervals",get:function(){return{u:0,unison:0,m2:1,b2:1,min2:1,S:1,H:1,2:2,M2:2,maj2:2,T:2,W:2,m3:3,b3:3,min3:3,M3:4,3:4,maj3:4,4:5,p4:5,"#4":6,b5:6,aug4:6,dim5:6,5:7,p5:7,"#5":8,b6:8,aug5:8,6:9,M6:9,maj6:9,b7:10,m7:10,min7:10,dom7:10,M7:11,maj7:11,8:12,octave:12}}},{key:"scales",get:function(){return{major:[2,2,1,2,2,2,1],dorian:[2,1,2,2,2,1,2],mixolydian:[2,2,1,2,2,1,2],minor:[2,1,2,2,1,2,2]}}},{key:"scaleTypes",get:function(){return{M:en.scales.major,m:en.scales.minor}}},{key:"accidentals",get:function(){return["bb","b","n","#","##"]}},{key:"noteValues",get:function(){return{c:{root_index:0,int_val:0},cn:{root_index:0,int_val:0},"c#":{root_index:0,int_val:1},"c##":{root_index:0,int_val:2},cb:{root_index:0,int_val:11},cbb:{root_index:0,int_val:10},d:{root_index:1,int_val:2},dn:{root_index:1,int_val:2},"d#":{root_index:1,int_val:3},"d##":{root_index:1,int_val:4},db:{root_index:1,int_val:1},dbb:{root_index:1,int_val:0},e:{root_index:2,int_val:4},en:{root_index:2,int_val:4},"e#":{root_index:2,int_val:5},"e##":{root_index:2,int_val:6},eb:{root_index:2,int_val:3},ebb:{root_index:2,int_val:2},f:{root_index:3,int_val:5},fn:{root_index:3,int_val:5},"f#":{root_index:3,int_val:6},"f##":{root_index:3,int_val:7},fb:{root_index:3,int_val:4},fbb:{root_index:3,int_val:3},g:{root_index:4,int_val:7},gn:{root_index:4,int_val:7},"g#":{root_index:4,int_val:8},"g##":{root_index:4,int_val:9},gb:{root_index:4,int_val:6},gbb:{root_index:4,int_val:5},a:{root_index:5,int_val:9},an:{root_index:5,int_val:9},"a#":{root_index:5,int_val:10},"a##":{root_index:5,int_val:11},ab:{root_index:5,int_val:8},abb:{root_index:5,int_val:7},b:{root_index:6,int_val:11},bn:{root_index:6,int_val:11},"b#":{root_index:6,int_val:0},"b##":{root_index:6,int_val:1},bb:{root_index:6,int_val:10},bbb:{root_index:6,int_val:9}}}}],Qe((Ze=en).prototype,[{key:"isValidNoteValue",value:function(t){return!(null==t||t<0||en.NUM_TONES<=t)}},{key:"isValidIntervalValue",value:function(t){return this.isValidNoteValue(t)}},{key:"getNoteParts",value:function(t){if(!t||t.length<1)throw new C.RERR("BadArguments","Invalid note name: "+t);if(3<t.length)throw new C.RERR("BadArguments","Invalid note name: "+t);var e=t.toLowerCase(),n=/^([cdefgab])(b|bb|n|#|##)?$/.exec(e);if(null!=n)return{root:n[1],accidental:n[2]};throw new C.RERR("BadArguments","Invalid note name: "+t)}},{key:"getKeyParts",value:function(t){if(!t||t.length<1)throw new C.RERR("BadArguments","Invalid key: "+t);var e=t.toLowerCase(),n=/^([cdefgab])(b|#)?(mel|harm|m|M)?$/.exec(e);if(null==n)throw new C.RERR("BadArguments","Invalid key: ".concat(t));var i=n[1],r=n[2],o=n[3];return{root:i,accidental:r,type:o=o||"M"}}},{key:"getNoteValue",value:function(t){var e=en.noteValues[t];if(null==e)throw new C.RERR("BadArguments","Invalid note name: ".concat(t));return e.int_val}},{key:"getIntervalValue",value:function(t){var e=en.intervals[t];if(null==e)throw new C.RERR("BadArguments","Invalid interval name: ".concat(t));return e}},{key:"getCanonicalNoteName",value:function(t){if(!this.isValidNoteValue(t))throw new C.RERR("BadArguments","Invalid note value: ".concat(t));return en.canonical_notes[t]}},{key:"getCanonicalIntervalName",value:function(t){if(!this.isValidIntervalValue(t))throw new C.RERR("BadArguments","Invalid interval value: ".concat(t));return en.diatonic_intervals[t]}},{key:"getRelativeNoteValue",value:function(t,e,n){if(null==n&&(n=1),1!==n&&-1!==n)throw new C.RERR("BadArguments","Invalid direction: ".concat(n));var i=(t+n*e)%en.NUM_TONES;return i<0&&(i+=en.NUM_TONES),i}},{key:"getRelativeNoteName",value:function(t,e){var n=this.getNoteParts(t),i=this.getNoteValue(n.root),r=e-i;if(Math.abs(r)>en.NUM_TONES-3){var o=1;0<r&&(o=-1);var s=(e+1+(i+1))%en.NUM_TONES*o;if(2<Math.abs(s))throw new C.RERR("BadArguments","Notes not related: ".concat(t,", ").concat(e,")"));r=s}if(2<Math.abs(r))throw new C.RERR("BadArguments","Notes not related: ".concat(t,", ").concat(e,")"));var a=n.root;if(0<r)for(var u=1;u<=r;++u)a+="#";else if(r<0)for(var l=-1;r<=l;--l)a+="b";return a}},{key:"getScaleTones",value:function(t,e){for(var n=[t],i=t,r=0;r<e.length;r+=1)(i=this.getRelativeNoteValue(i,e[r]))!==t&&n.push(i);return n}},{key:"getIntervalBetween",value:function(t,e,n){if(null==n&&(n=1),1!==n&&-1!==n)throw new C.RERR("BadArguments","Invalid direction: ".concat(n));if(!this.isValidNoteValue(t)||!this.isValidNoteValue(e))throw new C.RERR("BadArguments","Invalid notes: ".concat(t,", ").concat(e));var i=1===n?e-t:t-e;return i<0&&(i+=en.NUM_TONES),i}},{key:"createScaleMap",value:function(t){var e=this.getKeyParts(t),n=en.scaleTypes[e.type],i=e.root;if(e.accidental&&(i+=e.accidental),!n)throw new C.RERR("BadArguments","Unsupported key type: "+t);for(var r=this.getScaleTones(this.getNoteValue(i),n),o=en.root_indices[e.root],s={},a=0;a<en.roots.length;++a){var u=(o+a)%en.roots.length,l=en.roots[u],c=this.getRelativeNoteName(l,r[a]);1===c.length&&(c+="n"),s[l]=c}return s}}]),Qe(Ze,$e),en);function en(){!function(t){if(!(t instanceof en))throw new TypeError("Cannot call a class as a function")}(this)}function nn(t){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rn(t){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function on(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function sn(t,e,n){return e&&on(t.prototype,e),n&&on(t,n),t}function an(t,e){return(an=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function un(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];cn.DEBUG&&C.L("Vex.Flow.Accidental",e)}function ln(t){return t.getMetrics().width}var cn=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),an(t,e)}(hn,Pe),sn(hn,null,[{key:"format",value:function(t,e){var b=this,n=e.left_shift+1;if(t&&0!==t.length){for(var r=[],i=null,o=0,s=0;s<t.length;++s){var a=t[s],u=a.getNote(),l=u.getStave(),c=u.getKeyProps()[a.getIndex()];if(u!==i){for(var h=0;h<u.keys.length;++h)o=u.getKeyProps()[h].displaced?u.getExtraLeftPx():o;i=u}if(null!==l){var f=l.options.spacing_between_lines_px,p=l.getYForLine(c.line),d=Math.round(p/f*2)/2;r.push({y:p,line:d,shift:o,acc:a,lineSpace:f})}else r.push({line:c.line,shift:o,acc:a})}r.sort(function(t,e){return e.line-t.line});for(var y=[],m=0,g=null,v=0;v<r.length;v++){var _=r[v];null!==g&&g===_.line||y.push({line:_.line,flatLine:!0,dblSharpLine:!0,numAcc:0,width:0}),"b"!==_.acc.type&&"bb"!==_.acc.type&&(y[y.length-1].flatLine=!1),"##"!==_.acc.type&&(y[y.length-1].dblSharpLine=!1),y[y.length-1].numAcc++,y[y.length-1].width+=_.acc.getWidth()+3,m=_.shift>m?_.shift:m,g=_.line}for(var S=0,x=function(o){for(var t=!1,e=o,n=o;n+1<y.length&&!t;)b.checkCollision(y[n],y[n+1])?n++:t=!0;function i(t){return y[e+t]}function s(t){return t.map(i)}function r(t,e){var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(s([t,e]).map(function(t){return t.line}),2),i=n[0],r=n[1];return w=o,i-r}function a(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.map(s).every(function(t){return!b.checkCollision.apply(b,function(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t))})}var u=n-e+1,l=b.checkCollision(y[e],y[n])?"a":"b";switch(u){case 3:"a"===l&&.5===r(1,2)&&.5!==r(0,1)&&(l="second_on_bottom");break;case 4:a([0,2],[1,3])&&(l="spaced_out_tetrachord");break;case 5:"b"===l&&a([1,3])&&(l="spaced_out_pentachord",a([0,2],[2,4])&&(l="very_spaced_out_pentachord"));break;case 6:a([0,3],[1,4],[2,5])&&(l="spaced_out_hexachord"),a([0,2],[2,4],[1,3],[3,5])&&(l="very_spaced_out_hexachord")}var c=void 0,h=void 0;if(7<=u){for(var f=2,p=!0;!0===p;){p=!1;for(var d=0;d+f<y.length;d++)if(b.checkCollision(y[d],y[d+f])){p=!0,f++;break}}for(c=o;c<=n;c++)h=(c-o)%f+1,y[c].column=h,S=h<S?S:h}else for(c=o;c<=n;c++)h=H.accidentalColumnsTable[u][l][c-o],y[c].column=h,S=h<S?S:h;w=o=n},w=0;w<y.length;w++)x(w);for(var E=[],P=[],T=0;T<=S;T++)E[T]=0,P[T]=0;E[0]=m+n,P[0]=m+n,y.forEach(function(t){t.width>E[t.column]&&(E[t.column]=t.width)});for(var k=1;k<E.length;k++)P[k]=E[k]+P[k-1];var O=P[P.length-1],M=0;y.forEach(function(t){for(var e=0,n=M+t.numAcc;M<n;M++){var i=P[t.column-1]+e;r[M].acc.setXShift(i),e+=r[M].acc.getWidth()+3,un("Line, accCount, shift: ",t.line,M,i)}}),e.left_shift+=O}}},{key:"checkCollision",value:function(t,e){var n=e.line-t.line,i=3;0<n?(i=e.flatLine||e.dblSharpLine?2.5:3,t.dblSharpLine&&(n-=.5)):(i=t.flatLine||t.dblSharpLine?2.5:3,e.dblSharpLine&&(n-=.5));var r=Math.abs(n)<i;return un("Line_1, Line_2, Collision: ",t.line,e.line,r),r}},{key:"applyAccidentals",value:function(t,e){var i=[],r={};t.forEach(function(t){var n=new d(0,1);t.getTickables().forEach(function(t){if(!t.shouldIgnoreTicks()){var e=r[n.value()];e?e.push(t):(i.push(n.value()),r[n.value()]=[t]),n.add(t.getTicks())}})});var c=new tn;e=e||"C";var h=c.createScaleMap(e);i.forEach(function(t){var e=r[t],l=[];e.forEach(function e(u){u.isRest()||u.shouldIgnoreTicks()||(u.keys.forEach(function(t,e){var n=c.getNoteParts(t.split("/")[0]),i=n.accidental||"n",r=n.root+i,o=h[n.root]===r,s=-1<l.indexOf(r);if(!o||o&&s){h[n.root]=r;var a=new hn(i);u.addAccidental(e,a),l.push(r)}}),u.getModifiers().forEach(function(t){"gracenotegroups"===t.getCategory()&&t.getGraceNotes().forEach(e)}))})})}},{key:"CATEGORY",get:function(){return"accidentals"}}]),sn(hn,[{key:"reset",value:function(){var t=this.render_options.font_scale;this.glyph=new G(this.accidental.code,t),this.glyph.setOriginX(1),this.cautionary&&(this.parenLeft=new G(H.accidentalCodes("{").code,t),this.parenRight=new G(H.accidentalCodes("}").code,t),this.parenLeft.setOriginX(1),this.parenRight.setOriginX(1))}},{key:"getCategory",value:function(){return hn.CATEGORY}},{key:"getWidth",value:function(){var t=this.cautionary?ln(this.parenLeft)+ln(this.parenRight)+this.render_options.parenLeftPadding+this.render_options.parenRightPadding:0;return ln(this.glyph)+t}},{key:"setNote",value:function(t){if(!t)throw new C.RERR("ArgumentError","Bad note value: ".concat(t));this.note=t,"gracenotes"===this.note.getCategory()&&(this.render_options.font_scale=25,this.reset())}},{key:"setAsCautionary",value:function(){return this.cautionary=!0,this.render_options.font_scale=28,this.reset(),this}},{key:"draw",value:function(){var t=this.context,e=this.type,n=this.position,i=this.note,r=this.index,o=this.cautionary,s=this.x_shift,a=this.y_shift,u=this.glyph,l=this.parenLeft,c=this.parenRight,h=this.render_options,f=h.parenLeftPadding,p=h.parenRightPadding;if(this.checkContext(),!i||null==r)throw new C.RERR("NoAttachedNote","Can't draw accidental without a note and index.");var d=i.getModifierStartXY(n,r),b=d.x+s,y=d.y+a;un("Rendering: ",e,b,y),o?(c.render(t,b,y),b-=ln(c),b-=p,b-=this.accidental.parenRightPaddingAdjustment,u.render(t,b,y),b-=ln(u),b-=f,l.render(t,b,y)):u.render(t,b,y),this.setRendered()}}]),hn);function hn(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if(function(t){if(!(t instanceof hn))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==nn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,rn(hn).call(this))).setAttribute("type","Accidental"),un("New accidental: ",e),t.note=null,t.index=null,t.type=e,t.position=Pe.Position.LEFT,t.render_options={font_scale:38,stroke_px:3,parenLeftPadding:2,parenRightPadding:2},t.accidental=H.accidentalCodes(t.type),!t.accidental)throw new C.RERR("ArgumentError","Unknown accidental type: ".concat(e));return t.cautionary=!1,t.parenLeft=null,t.parenRight=null,t.reset(),t}function fn(t){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pn(t,e){return!e||"object"!==fn(e)&&"function"!=typeof e?bn(t):e}function dn(t){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function mn(t,e,n){return e&&yn(t.prototype,e),n&&yn(t,n),t}function gn(t,e){return(gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vn=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),gn(t,e)}(_n,Pe),mn(_n,null,[{key:"format",value:function(t,e){if(!t||0===t.length)return!1;for(var n=0,i=0;i<t.length;++i){var r=t[i];r.preFormat(),n+=r.getWidth()}return e.left_shift+=n,!0}},{key:"CATEGORY",get:function(){return"notesubgroup"}}]),mn(_n,[{key:"getCategory",value:function(){return _n.CATEGORY}},{key:"preFormat",value:function(){this.preFormatted||(this.formatter.joinVoices([this.voice]).format([this.voice],0),this.setWidth(this.formatter.getMinTotalWidth()),this.preFormatted=!0)}},{key:"setNote",value:function(t){this.note=t}},{key:"setWidth",value:function(t){this.width=t}},{key:"getWidth",value:function(){return this.width}},{key:"draw",value:function(){var e=this;this.checkContext();var t=this.getNote();if(!t||null===this.index)throw new C.RuntimeError("NoAttachedNote","Can't draw notes without a parent note and parent note index.");this.setRendered(),this.alignSubNotesWithNote(this.subNotes,t),this.subNotes.forEach(function(t){return t.setContext(e.context).draw()})}}]),_n);function _n(t){var e;return function(t){if(!(t instanceof _n))throw new TypeError("Cannot call a class as a function")}(this),(e=pn(this,dn(_n).call(this))).setAttribute("type","NoteSubGroup"),e.note=null,e.index=null,e.position=Pe.Position.LEFT,e.subNotes=t,e.subNotes.forEach(function(t){t.ignore_ticks=!1}),e.width=0,e.preFormatted=!1,e.formatter=new lr,e.voice=new Bt({num_beats:4,beat_value:4,resolution:H.RESOLUTION}).setStrict(!1),e.voice.addTickables(e.subNotes),pn(e,bn(e))}function Sn(t){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function wn(t){return(wn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function En(t,e){return(En=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pn=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&En(t,e)}(Tn,E),xn(Tn.prototype,[{key:"setFont",value:function(t){return this.font=t,this}},{key:"setDirection",value:function(t){return this.direction=t,this}},{key:"setNotes",value:function(t){if(!t.first_note&&!t.last_note)throw new C.RuntimeError("BadArguments","Tie needs to have either first_note or last_note set.");if(t.first_indices||(t.first_indices=[0]),t.last_indices||(t.last_indices=[0]),t.first_indices.length!==t.last_indices.length)throw new C.RuntimeError("BadArguments","Tied notes must have similar index sizes");return this.first_note=t.first_note,this.first_indices=t.first_indices,this.last_note=t.last_note,this.last_indices=t.last_indices,this}},{key:"isPartial",value:function(){return!this.first_note||!this.last_note}},{key:"renderTie",value:function(t){if(0===t.first_ys.length||0===t.last_ys.length)throw new C.RERR("BadArguments","No Y-values to render");var e=this.context,n=this.render_options.cp1,i=this.render_options.cp2;Math.abs(t.last_x_px-t.first_x_px)<10&&(n=2,i=8);for(var r=this.render_options.first_x_shift,o=this.render_options.last_x_shift,s=this.render_options.y_shift*t.direction,a=0;a<this.first_indices.length;++a){var u=(t.last_x_px+o+(t.first_x_px+r))/2,l=t.first_ys[this.first_indices[a]]+s,c=t.last_ys[this.last_indices[a]]+s;if(isNaN(l)||isNaN(c))throw new C.RERR("BadArguments","Bad indices for tie rendering.");var h=(l+c)/2+n*t.direction,f=(l+c)/2+i*t.direction;e.beginPath(),e.moveTo(t.first_x_px+r,l),e.quadraticCurveTo(u,h,t.last_x_px+o,c),e.quadraticCurveTo(u,f,t.first_x_px+r,l),e.closePath(),e.fill()}}},{key:"renderText",value:function(t,e){if(this.text){var n=(t+e)/2;n-=this.context.measureText(this.text).width/2,this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.style),this.context.fillText(this.text,n+this.render_options.text_shift_x,(this.first_note||this.last_note).getStave().getYForTopText()-1),this.context.restore()}}},{key:"draw",value:function(){this.checkContext(),this.setRendered();var t,e,n,i,r,o=this.first_note,s=this.last_note;return o?(t=o.getTieRightX()+this.render_options.tie_spacing,r=o.getStemDirection(),n=o.getYs()):(t=s.getStave().getTieStartX(),n=s.getYs(),this.first_indices=this.last_indices),s?(e=s.getTieLeftX()+this.render_options.tie_spacing,r=s.getStemDirection(),i=s.getYs()):(e=o.getStave().getTieEndX(),i=o.getYs(),this.last_indices=this.first_indices),this.direction&&(r=this.direction),this.renderTie({first_x_px:t,last_x_px:e,first_ys:n,last_ys:i,direction:r}),this.renderText(t,e),!0}}]),Tn);function Tn(t,e){var n;return function(t){if(!(t instanceof Tn))throw new TypeError("Cannot call a class as a function")}(this),(n=function(t,e){return!e||"object"!==Sn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,wn(Tn).call(this))).setAttribute("type","StaveTie"),n.notes=t,n.context=null,n.text=e,n.direction=null,n.render_options={cp1:8,cp2:12,text_shift_x:0,first_x_shift:0,last_x_shift:0,y_shift:7,tie_spacing:0,font:{family:"Arial",size:10,style:""}},n.font=n.render_options.font,n.setNotes(t),n}function kn(t){return(kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function On(t){return(On=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Rn(t,e,n){return e&&Mn(t.prototype,e),n&&Mn(t,n),t}function Ln(t,e){return(Ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var An=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ln(t,e)}(Cn,Pn),Rn(Cn,null,[{key:"createHammeron",value:function(t){return new Cn(t,"H")}},{key:"createPulloff",value:function(t){return new Cn(t,"P")}}]),Rn(Cn,[{key:"draw",value:function(){this.checkContext(),this.setRendered();var t,e,n,i,r=this.first_note,o=this.last_note;return r?(t=r.getTieRightX()+this.render_options.tie_spacing,n=r.getYs()):(t=o.getStave().getTieStartX(),n=o.getYs(),this.first_indices=this.last_indices),o?(e=o.getTieLeftX()+this.render_options.tie_spacing,i=o.getYs()):(e=r.getStave().getTieEndX(),i=r.getYs(),this.last_indices=this.first_indices),this.renderTie({first_x_px:t,last_x_px:e,first_ys:n,last_ys:i,direction:-1}),this.renderText(t,e),!0}}]),Cn);function Cn(t,e){var n;return function(t){if(!(t instanceof Cn))throw new TypeError("Cannot call a class as a function")}(this),(n=function(t,e){return!e||"object"!==kn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,On(Cn).call(this,t,e))).setAttribute("type","TabTie"),n.render_options.cp1=9,n.render_options.cp2=11,n.render_options.y_shift=3,n.setNotes(t),n}function In(t){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nn(t,e){return!e||"object"!==In(e)&&"function"!=typeof e?Bn(t):e}function Fn(t){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function jn(t,e,n){return e&&Dn(t.prototype,e),n&&Dn(t,n),t}function Vn(t,e){return(Vn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gn=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Vn(t,e)}(Wn,Pe),jn(Wn,null,[{key:"format",value:function(t,e){if(!t||0===t.length)return!1;for(var n=[],i=null,r=0,o=0;o<t.length;++o){var s=t[o],a=s.getNote(),u=a.getCategory()===We.CATEGORY,l=u?4:0;if(u&&a!==i){for(var c=0;c<a.keys.length;++c)r=a.getKeyProps()[c].displaced?a.getExtraLeftPx():r;i=a}n.push({shift:r,gracenote_group:s,spacing:l})}for(var h,f=n[0].shift,p=0;p<n.length;++p){var d=n[p].gracenote_group;d.preFormat(),h=d.getWidth()+n[p].spacing,f=Math.max(h,f)}for(var b=0;b<n.length;++b){var y=n[b].gracenote_group;h=y.getWidth()+n[b].spacing,y.setSpacingFromNextModifier(f-Math.min(h,f))}return e.left_shift+=f,!0}},{key:"CATEGORY",get:function(){return"gracenotegroups"}}]),jn(Wn,[{key:"getCategory",value:function(){return Wn.CATEGORY}},{key:"preFormat",value:function(){this.preFormatted||(this.formatter.joinVoices([this.voice]).format([this.voice],0),this.setWidth(this.formatter.getMinTotalWidth()),this.preFormatted=!0)}},{key:"beamNotes",value:function(t){if(1<(t=t||this.grace_notes).length){var e=new Rt(t);e.render_options.beam_width=3,e.render_options.partial_beam_length=4,this.beams.push(e)}return this}},{key:"setNote",value:function(t){this.note=t}},{key:"setWidth",value:function(t){this.width=t}},{key:"getWidth",value:function(){return this.width}},{key:"getGraceNotes",value:function(){return this.grace_notes}},{key:"draw",value:function(){var e=this;this.checkContext();var t=this.getNote();if(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Gn.DEBUG&&C.L("Vex.Flow.GraceNoteGroup",e)}("Drawing grace note group for:",t),!t||null===this.index)throw new C.RuntimeError("NoAttachedNote","Can't draw grace note without a parent note and parent note index.");if(this.setRendered(),this.alignSubNotesWithNote(this.getGraceNotes(),t),this.grace_notes.forEach(function(t){t.setContext(e.context).draw()}),this.beams.forEach(function(t){t.setContext(e.context).draw()}),this.show_slur){var n=this.getNote().getCategory()===We.CATEGORY,i=n?Pn:An;this.slur=new i({last_note:this.grace_notes[0],first_note:t,first_indices:[0],last_indices:[0]}),this.slur.render_options.cp2=12,this.slur.render_options.y_shift=(n?7:5)+this.render_options.slur_y_shift,this.slur.setContext(this.context).draw()}}}]),Wn);function Wn(t,e){var n;return function(t){if(!(t instanceof Wn))throw new TypeError("Cannot call a class as a function")}(this),(n=Nn(this,Fn(Wn).call(this))).setAttribute("type","GraceNoteGroup"),n.note=null,n.index=null,n.position=Pe.Position.LEFT,n.grace_notes=t,n.width=0,n.preFormatted=!1,n.show_slur=e,n.slur=null,n.formatter=new lr,n.voice=new Bt({num_beats:4,beat_value:4,resolution:H.RESOLUTION}).setStrict(!1),n.render_options={slur_y_shift:0},n.beams=[],n.voice.addTickables(n.grace_notes),Nn(n,Bn(n))}function Un(t){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hn(t){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function zn(t,e,n){return e&&Yn(t.prototype,e),n&&Yn(t,n),t}function Xn(t,e){return(Xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Kn=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Xn(t,e)}(qn,Pe),zn(qn,null,[{key:"format",value:function(t,e){var n=e.left_shift;if(!t||0===t.length)return this;var i=t.map(function(t){var e=t.getNote();if(e instanceof We){var n=e.getKeyProps()[t.getIndex()];return{line:n.line,shift:n.displaced?e.getExtraLeftPx():0,stroke:t}}return{line:e.getPositions()[t.getIndex()].str,shift:0,stroke:t}}),r=n,o=i.reduce(function(t,e){var n=e.stroke,i=e.shift;return n.setXShift(r+i),Math.max(n.getWidth()+0,t)},0);return e.left_shift+=o,!0}},{key:"CATEGORY",get:function(){return"strokes"}},{key:"Type",get:function(){return{BRUSH_DOWN:1,BRUSH_UP:2,ROLL_DOWN:3,ROLL_UP:4,RASQUEDO_DOWN:5,RASQUEDO_UP:6,ARPEGGIO_DIRECTIONLESS:7}}}]),zn(qn,[{key:"getCategory",value:function(){return qn.CATEGORY}},{key:"getPosition",value:function(){return this.position}},{key:"addEndNote",value:function(t){return this.note_end=t,this}},{key:"draw",value:function(){if(this.checkContext(),this.setRendered(),!this.note||null==this.index)throw new C.RERR("NoAttachedNote","Can't draw stroke without a note and index.");for(var t,e,n,i,r,o=this.note.getModifierStartXY(this.position,this.index),s=this.note.getYs(),a=o.y,u=o.y,l=o.x-5,c=this.note.stave.options.spacing_between_lines_px,h=this.getModifierContext().getModifiers(this.note.getCategory()),f=0;f<h.length;f++){s=h[f].getYs();for(var p=0;p<s.length;p++)this.note!==h[f]&&!this.all_voices||(a=C.Min(a,s[p]),u=C.Max(u,s[p]))}switch(this.type){case qn.Type.BRUSH_DOWN:t="vc3",e=-3,n=a-c/2+10,u+=c/2;break;case qn.Type.BRUSH_UP:t="v11",e=.5,n=u+c/2,a-=c/2;break;case qn.Type.ROLL_DOWN:case qn.Type.RASQUEDO_DOWN:t="vc3",e=-3,i=this.x_shift+e-2,r=this.note instanceof We?(n=(a+=1.5*c)-c,(u+=(u-a)%2!=0?.5*c:c)+c+2):(n=(a+=1.5*c)-.75*c,(u+=c)+.25*c);break;case qn.Type.ROLL_UP:case qn.Type.RASQUEDO_UP:t="v52",e=-4,i=this.x_shift+e-1,r=this.note instanceof We?(n=c/2,(u-(a+=.5*c))%2==0&&(u+=c/2),n=u+.5*c,a-1.25*c):(n=(u+=.5*c)+.25*c,(a+=.25*c)-c);break;case qn.Type.ARPEGGIO_DIRECTIONLESS:a+=.5*c,u+=c;break;default:throw new C.RERR("InvalidType","The stroke type ".concat(this.type," does not exist"))}if(this.type===qn.Type.BRUSH_DOWN||this.type===qn.Type.BRUSH_UP)this.context.fillRect(l+this.x_shift,a,1,u-a);else if(this.note instanceof We)for(var d=a;d<=u;d+=c)G.renderGlyph(this.context,l+this.x_shift-4,d,this.render_options.font_scale,"va3");else{var b;for(b=a;b<=u;b+=10)G.renderGlyph(this.context,l+this.x_shift-4,b,this.render_options.font_scale,"va3");this.type===qn.Type.RASQUEDO_DOWN&&(r=b+.25*c)}this.type!==qn.Type.ARPEGGIO_DIRECTIONLESS&&(G.renderGlyph(this.context,l+this.x_shift+e,n,this.render_options.font_scale,t),this.type!==qn.Type.RASQUEDO_DOWN&&this.type!==qn.Type.RASQUEDO_UP||(this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.weight),this.context.fillText("R",l+i,r),this.context.restore()))}}]),qn);function qn(t,e){var n;return function(t){if(!(t instanceof qn))throw new TypeError("Cannot call a class as a function")}(this),(n=function(t,e){return!e||"object"!==Un(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Hn(qn).call(this))).setAttribute("type","Stroke"),n.note=null,n.options=C.Merge({},e),n.all_voices=!("all_voices"in n.options)||n.options.all_voices,n.note_end=null,n.index=null,n.type=t,n.position=Pe.Position.LEFT,n.render_options={font_scale:38,stroke_px:3,stroke_spacing:10},n.font={family:"serif",size:10,weight:"bold italic"},n.setXShift(0),n.setWidth(10),n}function Jn(t){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qn(t){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function $n(t,e,n){return e&&Zn(t.prototype,e),n&&Zn(t,n),t}function ti(t,e){return(ti=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ei=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),ti(t,e)}(ni,Pe),$n(ni,null,[{key:"format",value:function(t,e){var n=e.left_shift,i=e.right_shift;if(!t||0===t.length)return this;var r,o,s,a,u,l=[],c=null,h=0,f=0;for(r=0;r<t.length;++r)for(s=(o=t[r]).getNote(),r=0;r<t.length;++r){s=(o=t[r]).getNote(),a=o.getPosition();var p=s.getKeyProps()[o.getIndex()];if(s!==c){for(var d=0;d<s.keys.length;++d)u=s.getKeyProps()[d],0===n&&(h=u.displaced?s.getExtraLeftPx():h),0===i&&(f=u.displaced?s.getExtraRightPx():f);c=s}l.push({pos:a,note:s,num:o,line:p.line,shiftL:h,shiftR:f})}l.sort(function(t,e){return e.line-t.line});var b=0,y=0,m=0,g=null,v=null;for(r=0;r<l.length;++r){var _=0;s=l[r].note,a=l[r].pos,o=l[r].num;var S=l[r].line,x=(l[r].shiftL,l[r].shiftR);S===g&&s===v||(b=i+x);var w=o.getWidth()+1;a===Pe.Position.LEFT?(o.setXShift(n),y=(_=h+w)>y?_:y):a===Pe.Position.RIGHT&&(o.setXShift(b),m=(_+=w)>m?_:m),g=S,v=s}return e.left_shift+=y,e.right_shift+=m,!0}},{key:"CATEGORY",get:function(){return"stringnumber"}}]),$n(ni,[{key:"getCategory",value:function(){return ni.CATEGORY}},{key:"getNote",value:function(){return this.note}},{key:"setNote",value:function(t){return this.note=t,this}},{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(t){return this.index=t,this}},{key:"setLineEndType",value:function(t){return t>=st.LineEndType.NONE&&t<=st.LineEndType.DOWN&&(this.leg=t),this}},{key:"setStringNumber",value:function(t){return this.string_number=t,this}},{key:"setOffsetX",value:function(t){return this.x_offset=t,this}},{key:"setOffsetY",value:function(t){return this.y_offset=t,this}},{key:"setLastNote",value:function(t){return this.last_note=t,this}},{key:"setDashed",value:function(t){return this.dashed=t,this}},{key:"draw",value:function(){var t=this.checkContext();if(!this.note||null==this.index)throw new C.RERR("NoAttachedNote","Can't draw string number without a note and index.");this.setRendered();var e=this.note.stave.options.spacing_between_lines_px,n=this.note.getModifierStartXY(this.position,this.index),i=n.x+this.x_shift+this.x_offset,r=n.y+this.y_shift+this.y_offset;switch(this.position){case Pe.Position.ABOVE:case Pe.Position.BELOW:var o=this.note.getStemExtents(),s=o.topY,a=o.baseY+2;this.note.stem_direction===We.STEM_DOWN&&(s=o.baseY,a=o.topY-2),r=this.position===Pe.Position.ABOVE?this.note.hasStem()?s-1.75*e:n.y-1.75*e:this.note.hasStem()?a+1.5*e:n.y+1.75*e,r+=this.y_shift+this.y_offset;break;case Pe.Position.LEFT:i-=this.radius/2+5;break;case Pe.Position.RIGHT:i+=this.radius/2+6;break;default:throw new C.RERR("InvalidPosition","The position ".concat(this.position," is invalid"))}t.save(),t.beginPath(),t.arc(i,r,this.radius,0,2*Math.PI,!1),t.lineWidth=1.5,t.stroke(),t.setFont(this.font.family,this.font.size,this.font.weight);var u=i-t.measureText(this.string_number).width/2;if(t.fillText(""+this.string_number,u,r+4.5),null!=this.last_note){var l,c,h=this.last_note.getStemX()-this.note.getX()+5;switch(t.strokeStyle="#000000",t.lineCap="round",t.lineWidth=.6,this.dashed?st.drawDashedLine(t,i+10,r,i+h,r,[3,3]):st.drawDashedLine(t,i+10,r,i+h,r,[3,0]),this.leg){case st.LineEndType.UP:l=-10,c=this.dashed?[3,3]:[3,0],st.drawDashedLine(t,i+h,r,i+h,r+l,c);break;case st.LineEndType.DOWN:l=10,c=this.dashed?[3,3]:[3,0],st.drawDashedLine(t,i+h,r,i+h,r+l,c)}}t.restore()}}]),ni);function ni(t){var e;return function(t){if(!(t instanceof ni))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==Jn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Qn(ni).call(this))).setAttribute("type","StringNumber"),e.note=null,e.last_note=null,e.index=null,e.string_number=t,e.setWidth(20),e.position=Pe.Position.ABOVE,e.x_shift=0,e.y_shift=0,e.x_offset=0,e.y_offset=0,e.dashed=!0,e.leg=st.LineEndType.NONE,e.radius=8,e.font={family:"sans-serif",size:10,weight:"bold"},e}function ii(t){return(ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ri(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oi(t){return(oi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function si(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ai(t,e,n){return e&&si(t.prototype,e),n&&si(t,n),t}function ui(t,e){return(ui=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function li(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ci(t,e){return.5*t(e/.5)}function hi(t,e){return e===bi?t<=5:1<=t}function fi(t,e){return hi(t,e)?e===bi?Math.ceil:Math.floor:Math.round}function pi(t){var e=t.getCategory();return"stavenotes"===e||"gracenotes"===e}var di=Pe.Position,bi=di.ABOVE,yi=di.BELOW,mi=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),ui(t,e)}(gi,Pe),ai(gi,null,[{key:"format",value:function(t,e){if(!t||0===t.length)return!1;function n(t,e,n){return ci(fi(e,n),t.glyph.getMetrics().height/10+.5)}t.filter(function(t){return t.getPosition()===bi}).forEach(function(t){t.setTextLine(e.top_text_line),e.top_text_line+=n(t,e.top_text_line,bi)}),t.filter(function(t){return t.getPosition()===yi}).forEach(function(t){t.setTextLine(e.text_line),e.text_line+=n(t,e.text_line,yi)});var i=t.map(function(t){return t.getWidth()}).reduce(function(t,e){return Math.max(e,t)});return e.left_shift+=i/2,e.right_shift+=i/2,!0}},{key:"easyScoreHook",value:function(t,e,o){var n=t.articulations;if(n){var s={staccato:"a.",tenuto:"a-"};n.split(",").map(function(t){return t.trim().split(".")}).map(function(t){var e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(t,2),n=e[0],i=e[1],r={type:s[n]};return i&&(r.position=Pe.PositionString[i]),o.getFactory().Articulation(r)}).map(function(t){return e.addModifier(0,t)})}}},{key:"CATEGORY",get:function(){return"articulations"}},{key:"INITIAL_OFFSET",get:function(){return-.5}}]),ai(gi,[{key:"getCategory",value:function(){return gi.CATEGORY}},{key:"draw",value:function(){var t,e=this.note,n=this.index,i=this.position,r=this.glyph,o=this.articulation.between_lines,s=this.text_line,a=this.context;if(this.checkContext(),!e||null==n)throw new C.RERR("NoAttachedNote","Can't draw Articulation without a note and index.");this.setRendered();var u,l,c,h,f,p,d,b,y=e.getStave(),m=y.getSpacingBetweenLines(),g="tabnotes"===e.getCategory(),v=e.getModifierStartXY(i,n).x,_=!o||g,S=(u=e,c=(l=i)===bi&&u.getStemDirection()===pt.UP||l===yi&&u.getStemDirection()===pt.DOWN,pi(u)?u.hasStem()&&c?.5:1:u.hasStem()&&c?1:0),x=(ri(t={},bi,function(){r.setOrigin(.5,1);var t=function(t,e){var n=t.getStave(),i=t.getStemDirection(),r=t.getStemExtents(),o=r.topY,s=r.baseY;if(pi(t))return t.hasStem()?i===pt.UP?o:s:Math.min.apply(Math,li(t.getYs()));if("tabnotes"===t.getCategory())return t.hasStem()&&i===pt.UP?o:n.getYForTopText(e);throw new C.RERR("UnknownCategory","Only can get the top and bottom ys of stavenotes and tabnotes")}(e,s)-(s+S)*m;return _?Math.min(y.getYForTopText(gi.INITIAL_OFFSET),t):t}),ri(t,yi,function(){r.setOrigin(.5,0);var t=function(t,e){var n=t.getStave(),i=t.getStemDirection(),r=t.getStemExtents(),o=r.topY,s=r.baseY;if(pi(t))return t.hasStem()?i===pt.UP?s:o:Math.max.apply(Math,li(t.getYs()));if("tabnotes"===t.getCategory())return t.hasStem()?i===pt.UP?n.getYForBottomText(e):o:n.getYForBottomText(e);throw new C.RERR("UnknownCategory","Only can get the top and bottom ys of stavenotes and tabnotes")}(e,s)+(s+S)*m;return _?Math.max(y.getYForBottomText(gi.INITIAL_OFFSET),t):t}),t)[i]();if(!g){var w=i===bi?-1:1,E=g?e.positions[n].str:e.getKeyProps()[n].line,P=(e.getYs()[n]-x)/m+E,T=(h=o,d=w,b=ci(fi(f=P,p=i),f),h&&hi(b,p)&&b%1==0?b+.5*-d:b);hi(T,i)&&r.setOrigin(.5,.5),x+=Math.abs(T-P)*m*w}!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];mi.DEBUG&&C.L("Vex.Flow.Articulation",e)}("Rendering articulation at (x: ".concat(v,", y: ").concat(x,")")),r.render(a,v,x)}}]),gi);function gi(t){var e;if(function(t){if(!(t instanceof gi))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==ii(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,oi(gi).call(this))).setAttribute("type","Articulation"),e.note=null,e.index=null,e.type=t,e.position=yi,e.render_options={font_scale:38},e.articulation=H.articulationCodes(e.type),!e.articulation)throw new C.RERR("ArgumentError","Articulation not found: ".concat(e.type));return e.glyph=new G(e.articulation.code,e.render_options.font_scale),e.setWidth(e.glyph.getMetrics().width),e}function vi(t){return(vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _i(t){return(_i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Si(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function xi(t,e,n){return e&&Si(t.prototype,e),n&&Si(t,n),t}function wi(t,e){return(wi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ei=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),wi(t,e)}(Pi,Qt),xi(Pi,null,[{key:"getNextContext",value:function(t){var e=t.tContexts,n=e.indexOf(t);return e[n+1]}}]),xi(Pi,[{key:"getX",value:function(){return this.x}},{key:"setX",value:function(t){return this.x=t,this.xBase=t,this.xOffset=0,this}},{key:"getXBase",value:function(){return this.xBase}},{key:"setXBase",value:function(t){this.xBase=t,this.x=t+this.xOffset}},{key:"getXOffset",value:function(){return this.xOffset}},{key:"setXOffset",value:function(t){this.xOffset=t,this.x=this.xBase+t}},{key:"getWidth",value:function(){return this.width+2*this.padding}},{key:"setPadding",value:function(t){return this.padding=t,this}},{key:"getMaxTicks",value:function(){return this.maxTicks}},{key:"getMinTicks",value:function(){return this.minTicks}},{key:"getTickables",value:function(){return this.tickables}},{key:"getCenterAlignedTickables",value:function(){return this.tickables.filter(function(t){return t.isCenterAligned()})}},{key:"getMetrics",value:function(){return{width:this.width,notePx:this.notePx,extraLeftPx:this.extraLeftPx,extraRightPx:this.extraRightPx}}},{key:"getCurrentTick",value:function(){return this.currentTick}},{key:"setCurrentTick",value:function(t){this.currentTick=t,this.preFormatted=!1}},{key:"getExtraPx",value:function(){for(var t=0,e=0,n=0,i=0,r=0;r<this.tickables.length;r++){n=Math.max(this.tickables[r].extraLeftPx||0,n),i=Math.max(this.tickables[r].extraRightPx||0,i);var o=this.tickables[r].modifierContext;o&&null!=o&&(t=Math.max(t,o.state.left_shift),e=Math.max(e,o.state.right_shift))}return{left:t,right:e,extraLeft:n,extraRight:i}}},{key:"addTickable",value:function(t){if(!t)throw new C.RERR("BadArgument","Invalid tickable added.");if(!t.shouldIgnoreTicks()){this.ignore_ticks=!1;var e=t.getTicks();e.greaterThan(this.maxTicks)&&(this.maxTicks=e.clone()),null==this.minTicks?this.minTicks=e.clone():e.lessThan(this.minTicks)&&(this.minTicks=e.clone())}return t.setTickContext(this),this.tickables.push(t),this.preFormatted=!1,this}},{key:"preFormat",value:function(){if(this.preFormatted)return this;for(var t=0;t<this.tickables.length;++t){var e=this.tickables[t];e.preFormat();var n=e.getMetrics();this.extraLeftPx=Math.max(this.extraLeftPx,n.extraLeftPx+n.modLeftPx),this.extraRightPx=Math.max(this.extraRightPx,n.extraRightPx+n.modRightPx),this.notePx=Math.max(this.notePx,n.noteWidth),this.width=this.notePx+this.extraLeftPx+this.extraRightPx}return this}},{key:"postFormat",value:function(){return this.postFormatted||(this.postFormatted=!0),this}}]),Pi);function Pi(){var t;return function(t){if(!(t instanceof Pi))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==vi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,_i(Pi).call(this))).setAttribute("type","TickContext"),t.currentTick=new d(0,1),t.maxTicks=new d(0,1),t.minTicks=null,t.padding=3,t.x=0,t.xBase=0,t.xOffset=0,t.tickables=[],t.notePx=0,t.extraLeftPx=0,t.extraRightPx=0,t.tContexts=[],t}function Ti(t){return(Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ki(t){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Mi(t,e,n){return e&&Oi(t.prototype,e),n&&Oi(t,n),t}function Ri(t,e){return(Ri=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Li=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Ri(t,e)}(Ai,Pe),Mi(Ai,null,[{key:"format",value:function(t,e){if(!t||0===t.length)return!1;for(var n=0,i=0;i<t.length;++i){var r=t[i];n=Math.max(r.getWidth(),n),r.getPosition()===Pe.Position.ABOVE?(r.setTextLine(e.top_text_line),e.top_text_line+=2):(r.setTextLine(e.text_line),e.text_line+=2)}return e.left_shift+=n/2,e.right_shift+=n/2,!0}},{key:"CATEGORY",get:function(){return"ornaments"}}]),Mi(Ai,[{key:"getCategory",value:function(){return Ai.CATEGORY}},{key:"setDelayed",value:function(t){return this.delayed=t,this}},{key:"setUpperAccidental",value:function(t){var e=this.render_options.font_scale/1.3;return this.accidentalUpper=new G(H.accidentalCodes(t).code,e),this.accidentalUpper.setOrigin(.5,1),this}},{key:"setLowerAccidental",value:function(t){var e=this.render_options.font_scale/1.3;return this.accidentalLower=new G(H.accidentalCodes(t).code,e),this.accidentalLower.setOrigin(.5,1),this}},{key:"draw",value:function(){if(this.checkContext(),!this.note||null==this.index)throw new C.RERR("NoAttachedNote","Can't draw Ornament without a note and index.");this.setRendered();var t=this.context,e=this.note.getStemDirection(),n=this.note.getStave(),i=this.note.getStem().getExtents(),r=e===We.STEM_DOWN?i.baseY:i.topY;"tabnotes"===this.note.getCategory()&&(this.note.hasStem()?e===We.STEM_DOWN&&(r=n.getYForTopText(this.text_line)):r=n.getYForTopText(this.text_line));var o=e===We.STEM_DOWN,s=n.getSpacingBetweenLines(),a=1;!o&&this.note.beam&&(a+=.5);var u=r-s*(this.text_line+a),l=this.note.getModifierStartXY(this.position,this.index).x,c=Math.min(n.getYForTopText(this.text_line),u);if(c+=this.y_shift,this.delayed){var h=0;if(void 0!==this.delayXShift)h=this.delayXShift;else{h+=this.glyph.getMetrics().width/2;var f=Ei.getNextContext(this.note.getTickContext());h+=f?.5*(f.getX()-l):.5*(n.x+n.width-l),this.delayXShift=h}l+=h}!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Li.DEBUG&&C.L("Vex.Flow.Ornament",e)}("Rendering ornament: ",this.ornament,l,c),this.accidentalLower&&(this.accidentalLower.render(t,l,c),c-=this.accidentalLower.getMetrics().height,c-=this.render_options.accidentalLowerPadding),this.glyph.render(t,l,c),c-=this.glyph.getMetrics().height,this.accidentalUpper&&(c-=this.render_options.accidentalUpperPadding,this.accidentalUpper.render(t,l,c))}}]),Ai);function Ai(t){var e;if(function(t){if(!(t instanceof Ai))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==Ti(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ki(Ai).call(this))).setAttribute("type","Ornament"),e.note=null,e.index=null,e.type=t,e.position=Pe.Position.ABOVE,e.delayed=!1,e.accidentalUpper=null,e.accidentalLower=null,e.render_options={font_scale:38,accidentalLowerPadding:3,accidentalUpperPadding:3},e.ornament=H.ornamentCodes(e.type),!e.ornament)throw new C.RERR("ArgumentError","Ornament not found: '".concat(e.type,"'"));return e.glyph=new G(e.ornament.code,e.render_options.font_scale),e.glyph.setOrigin(.5,1),e}function Ci(t){return(Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ii(t){return(Ii=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ni(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Fi(t,e,n){return e&&Ni(t.prototype,e),n&&Ni(t,n),t}function Bi(t,e){return(Bi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Di=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Bi(t,e)}(ji,Pe),Fi(ji,null,[{key:"format",value:function(t,e){if(!t||0===t.length)return!1;for(var n=0,i=0;i<t.length;++i){var r=t[i];n=Math.max(r.getWidth(),n),r.getPosition()===Pe.Position.ABOVE?(r.setTextLine(e.top_text_line),e.top_text_line++):(r.setTextLine(e.text_line),e.text_line++)}return e.left_shift+=n/2,e.right_shift+=n/2,!0}},{key:"CATEGORY",get:function(){return"annotations"}},{key:"Justify",get:function(){return{LEFT:1,CENTER:2,RIGHT:3,CENTER_STEM:4}}},{key:"JustifyString",get:function(){return{left:ji.Justify.LEFT,right:ji.Justify.RIGHT,center:ji.Justify.CENTER,centerStem:ji.Justify.CENTER_STEM}}},{key:"VerticalJustify",get:function(){return{TOP:1,CENTER:2,BOTTOM:3,CENTER_STEM:4}}},{key:"VerticalJustifyString",get:function(){return{above:ji.VerticalJustify.TOP,top:ji.VerticalJustify.TOP,below:ji.VerticalJustify.BOTTOM,bottom:ji.VerticalJustify.BOTTOM,center:ji.VerticalJustify.CENTER,centerStem:ji.VerticalJustify.CENTER_STEM}}}]),Fi(ji,[{key:"getCategory",value:function(){return ji.CATEGORY}},{key:"setFont",value:function(t,e,n){return this.font={family:t,size:e,weight:n},this}},{key:"setVerticalJustification",value:function(t){return this.vert_justification="string"==typeof t?ji.VerticalJustifyString[t]:t,this}},{key:"getJustification",value:function(){return this.justification}},{key:"setJustification",value:function(t){return this.justification="string"==typeof t?ji.JustifyString[t]:t,this}},{key:"draw",value:function(){if(this.checkContext(),!this.note)throw new C.RERR("NoNoteForAnnotation","Can't draw text annotation without an attached note.");this.setRendered();var t=this.note.getModifierStartXY(Pe.Position.ABOVE,this.index);this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.weight);var e,n,i,r,o=this.context.measureText(this.text).width,s=this.context.measureText("m").width;e=this.justification===ji.Justify.LEFT?t.x:this.justification===ji.Justify.RIGHT?t.x-o:this.justification===ji.Justify.CENTER?t.x-o/2:this.note.getStemX()-o/2;var a=this.note.hasStem(),u=this.note.getStave();if(a&&(i=this.note.getStem().getExtents(),r=u.getSpacingBetweenLines()),this.vert_justification===ji.VerticalJustify.BOTTOM){if(n=u.getYForBottomText(this.text_line+H.TEXT_HEIGHT_OFFSET_HACK),a){var l=1===this.note.getStemDirection()?i.baseY:i.topY;n=Math.max(n,l+r*(this.text_line+2))}}else if(this.vert_justification===ji.VerticalJustify.CENTER){var c=this.note.getYForTopText(this.text_line)-1;n=c+(u.getYForBottomText(this.text_line)-c)/2+s/2}else if(this.vert_justification===ji.VerticalJustify.TOP)n=Math.min(u.getYForTopText(this.text_line),this.note.getYs()[0]-10),a&&(n=Math.min(n,i.topY-5-r*this.text_line));else{var h=this.note.getStemExtents();n=h.topY+(h.baseY-h.topY)/2+s/2}!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Di.DEBUG&&C.L("Vex.Flow.Annotation",e)}("Rendering annotation: ",this.text,e,n),this.context.fillText(this.text,e,n),this.context.restore()}}]),ji);function ji(t){var e;return function(t){if(!(t instanceof ji))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==Ci(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ii(ji).call(this))).setAttribute("type","Annotation"),e.note=null,e.index=null,e.text=t,e.justification=ji.Justify.CENTER,e.vert_justification=ji.VerticalJustify.TOP,e.font={family:"Arial",size:10,weight:""},e.setWidth(H.textWidth(t)),e}function Vi(t){return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gi(t){return(Gi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ui(t,e,n){return e&&Wi(t.prototype,e),n&&Wi(t,n),t}function Hi(t,e){return(Hi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yi=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Hi(t,e)}(zi,Pe),Ui(zi,null,[{key:"format",value:function(t,e){if(!t||0===t.length)return!1;for(var n=0,i=e.top_text_line,r=0;r<t.length;++r){var o=t[r];o.setXShift(n),n=o.getWidth(),o.setTextLine(i)}return e.right_shift+=n,e.top_text_line+=1,!0}},{key:"CATEGORY",get:function(){return"bends"}},{key:"UP",get:function(){return 0}},{key:"DOWN",get:function(){return 1}}]),Ui(zi,[{key:"getCategory",value:function(){return zi.CATEGORY}},{key:"setXShift",value:function(t){this.x_shift=t,this.updateWidth()}},{key:"setFont",value:function(t){return this.font=t,this}},{key:"getText",value:function(){return this.text}},{key:"updateWidth",value:function(){for(var t,e=0,n=0;n<this.phrase.length;++n){var i=this.phrase[n];if("width"in i)e+=i.width;else{var r=i.type===zi.UP?this.render_options.bend_width:this.render_options.release_width;i.width=C.Max(r,(t=i.text,this.context?this.context.measureText(t).width:H.textWidth(t)))+3,i.draw_width=i.width/2,e+=i.width}}return this.setWidth(e+this.x_shift),this}},{key:"draw",value:function(){if(this.checkContext(),!this.note||null==this.index)throw new C.RERR("NoNoteForBend","Can't draw bend without a note or index.");this.setRendered();var t=this.note.getModifierStartXY(Pe.Position.RIGHT,this.index);t.x+=3,t.y+=.5;var e=this.x_shift,r=this.context,n=this.note.getStave().getYForTopText(this.text_line)+3,i=this.note.getStave().getYForTopText(this.text_line)-1,o=this;function s(t,e,n,i){r.save(),r.beginPath(),r.setLineWidth(o.render_options.line_width),r.setStrokeStyle(o.render_options.line_style),r.setFillStyle(o.render_options.line_style),r.moveTo(t,i),r.quadraticCurveTo(t+n,i,t+n,e),r.stroke(),r.restore()}function a(t,e,n){var i=n||1;r.beginPath(),r.moveTo(t,e),r.lineTo(t-4,e+4*i),r.lineTo(t+4,e+4*i),r.closePath(),r.fill()}function u(t,e){r.save(),r.setRawFont(o.font);var n=t-r.measureText(e).width/2;r.fillText(e,n,i),r.restore()}for(var l,c,h,f,p,d,b=null,y=0,m=0;m<this.phrase.length;++m){var g=this.phrase[m];0===m&&(g.draw_width+=e),y=g.draw_width+(b?b.draw_width:0)-(1===m?e:0),g.type===zi.UP&&(b&&b.type===zi.UP&&a(t.x,n),f=n,p=(l=t.x)+(h=y),d=c=t.y,r.save(),r.beginPath(),r.setLineWidth(o.render_options.line_width),r.setStrokeStyle(o.render_options.line_style),r.setFillStyle(o.render_options.line_style),r.moveTo(l,c),r.quadraticCurveTo(p,d,l+h,f),r.stroke(),r.restore()),g.type===zi.DOWN&&(b&&b.type===zi.UP&&s(t.x,t.y,y,n),b&&b.type===zi.DOWN&&(a(t.x,t.y,-1),s(t.x,t.y,y,n)),null===b&&(y=g.draw_width,s(t.x,t.y,y,n))),u(t.x+y,g.text),(b=g).x=t.x,t.x+=y}b.type===zi.UP?a(b.x+y,n):b.type===zi.DOWN&&a(b.x+y,t.y,-1)}}]),zi);function zi(t,e,n){var i;return function(t){if(!(t instanceof zi))throw new TypeError("Cannot call a class as a function")}(this),(i=function(t,e){return!e||"object"!==Vi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Gi(zi).call(this))).setAttribute("type","Bend"),i.text=t,i.x_shift=0,i.release=e||!1,i.font="10pt Arial",i.render_options={line_width:1.5,line_style:"#777777",bend_width:8,release_width:8},n?i.phrase=n:(i.phrase=[{type:zi.UP,text:i.text}],i.release&&i.phrase.push({type:zi.DOWN,text:""})),i.updateWidth(),i}function Xi(t){return(Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ki(t){return(Ki=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ji(t,e,n){return e&&qi(t.prototype,e),n&&qi(t,n),t}function Qi(t,e){return(Qi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zi=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Qi(t,e)}($i,Pe),Ji($i,null,[{key:"format",value:function(t,e,n){if(!t||0===t.length)return!1;var i=e.top_text_line,r=0,o=e.right_shift-7,s=n.getModifiers(Yi.CATEGORY);s&&0<s.length&&i--;for(var a=0;a<t.length;++a){var u=t[a];u.setXShift(o),u.setTextLine(i),o+=r+=u.getWidth()}return e.right_shift+=r,e.top_text_line+=1,!0}},{key:"CATEGORY",get:function(){return"vibratos"}}]),Ji($i,[{key:"getCategory",value:function(){return $i.CATEGORY}},{key:"setHarsh",value:function(t){return this.render_options.harsh=t,this}},{key:"setVibratoWidth",value:function(t){return this.render_options.vibrato_width=t,this.setWidth(t),this}},{key:"draw",value:function(){var t=this.checkContext();if(!this.note)throw new C.RERR("NoNoteForVibrato","Can't draw vibrato without an attached note.");this.setRendered();var e=this.note.getModifierStartXY(Pe.Position.RIGHT,this.index).x+this.x_shift,n=this.note.getYForTopText(this.text_line)+2;$i.renderVibrato(t,e,n,this.render_options)}}],[{key:"renderVibrato",value:function(t,e,n,i){var r,o=i.harsh,s=i.vibrato_width,a=i.wave_width,u=i.wave_girth,l=i.wave_height,c=s/a;if(t.beginPath(),o){for(t.moveTo(e,n+u+1),r=0;r<c/2;++r)t.lineTo(e+a,n-l/2),e+=a,t.lineTo(e+a,n+l/2),e+=a;for(r=0;r<c/2;++r)t.lineTo(e-a,n-l/2+u+1),e-=a,t.lineTo(e-a,n+l/2+u+1),e-=a;t.fill()}else{for(t.moveTo(e,n+u),r=0;r<c/2;++r)t.quadraticCurveTo(e+a/2,n-l/2,e+a,n),e+=a,t.quadraticCurveTo(e+a/2,n+l/2,e+a,n),e+=a;for(r=0;r<c/2;++r)t.quadraticCurveTo(e-a/2,n+l/2+u,e-a,n+u),e-=a,t.quadraticCurveTo(e-a/2,n-l/2+u,e-a,n+u),e-=a;t.fill()}}}]),$i);function $i(){var t;return function(t){if(!(t instanceof $i))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==Xi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ki($i).call(this))).setAttribute("type","Vibrato"),t.position=Pe.Position.RIGHT,t.render_options={harsh:!1,vibrato_width:20,wave_height:6,wave_width:4,wave_girth:2},t.setVibratoWidth(t.render_options.vibrato_width),t}function tr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function er(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];nr.DEBUG&&C.L("Vex.Flow.ModifierContext",e)}var nr=(tr(ir.prototype,[{key:"addModifier",value:function(t){var e=t.getCategory();return this.modifiers[e]||(this.modifiers[e]=[]),this.modifiers[e].push(t),t.setModifierContext(this),this.preFormatted=!1,this}},{key:"getModifiers",value:function(t){return this.modifiers[t]}},{key:"getWidth",value:function(){return this.width}},{key:"getExtraLeftPx",value:function(){return this.state.left_shift}},{key:"getExtraRightPx",value:function(){return this.state.right_shift}},{key:"getState",value:function(){return this.state}},{key:"getMetrics",value:function(){if(!this.formatted)throw new C.RERR("UnformattedModifier","Unformatted modifier has no metrics.");return{width:this.state.left_shift+this.state.right_shift+this.spacing,spacing:this.spacing,extra_left_px:this.state.left_shift,extra_right_px:this.state.right_shift}}},{key:"preFormat",value:function(){var e=this;this.preFormatted||(this.PREFORMAT.forEach(function(t){er("Preformatting ModifierContext: ",t.CATEGORY),t.format(e.getModifiers(t.CATEGORY),e.state,e)}),this.width=this.state.left_shift+this.state.right_shift,this.preFormatted=!0)}},{key:"postFormat",value:function(){var e=this;this.postFormatted||this.POSTFORMAT.forEach(function(t){er("Postformatting ModifierContext: ",t.CATEGORY),t.postFormat(e.getModifiers(t.CATEGORY),e)})}}]),ir);function ir(){!function(t){if(!(t instanceof ir))throw new TypeError("Cannot call a class as a function")}(this),this.modifiers={},this.preFormatted=!1,this.postFormatted=!1,this.width=0,this.spacing=0,this.state={left_shift:0,right_shift:0,text_line:0,top_text_line:0},this.PREFORMAT=[We,Ae,qe,cn,Kn,Gn,vn,ei,mi,Li,Di,Yi,Zi],this.POSTFORMAT=[We]}function rr(t){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function or(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function sr(t,e,n){return e&&or(t.prototype,e),n&&or(t,n),t}function ar(t,e,n,i){var r=e;for(n+=1;n<t.length;n+=1){var o=t[n];if(!o.isRest()&&!o.shouldIgnoreTicks()){r=o.getLineForRest();break}}if(i&&e!==r){var s=Math.max(e,r),a=Math.min(e,r);r=C.MidLine(s,a)}return r}function ur(t,r,o){if(!t||!t.length)throw new C.RERR("BadArgument","No voices to format");var n=t[0].getTotalTicks(),e=t.reduce(function(t,e){if(!e.getTotalTicks().equals(n))throw new C.RERR("TickMismatch","Voices should have same total note duration in ticks.");if(e.getMode()===Bt.Mode.STRICT&&!e.isComplete())throw new C.RERR("IncompleteVoice","Voice does not have enough notes.");return Math.max(t,d.LCM(t,e.getResolutionMultiplier()))},1),s={},a=[],u=[];return t.forEach(function(t){var i=new d(0,e);t.getTickables().forEach(function(t){var e=i.numerator;if(!s[e]){var n=new r;u.push(n),s[e]=n}o(t,s[e]),a.push(e),i.add(t.getTicks())})}),{map:s,array:u,list:C.SortAndUnique(a,function(t,e){return t-e},function(t,e){return t===e}),resolutionMultiplier:e}}var lr=(sr(cr,null,[{key:"SimpleFormat",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).paddingBetween,r=void 0===n?10:n;t.reduce(function(t,e){e.addToModifierContext(new nr);var n=(new Ei).addTickable(e).preFormat(),i=n.getExtraPx();return n.setX(t+i.left),t+n.getWidth()+i.right+r},e)}},{key:"plotDebugging",value:function(i,t,e,r,o){var s=e+re.STAVEPADDING,n=t.contextGaps;i.save(),i.setFont("Arial",8,""),n.gaps.forEach(function(t){var e,n;e=s+t.x1,n=s+t.x2,i.beginPath(),i.setStrokeStyle("#aaa"),i.setFillStyle("#aaa"),i.setLineWidth(1),i.fillRect(e,r,n-e,o-r),i.fillText(Math.round(t.x2-t.x1),s+t.x1,o+12)}),i.fillText(Math.round(n.total)+"px",s-20,o+12),i.setFillStyle("red"),i.fillText("Loss: "+t.lossHistory.map(function(t){return Math.round(t)}),s-20,o+22),i.restore()}},{key:"FormatAndDraw",value:function(e,t,n,i){var r={auto_beam:!1,align_rests:!1};"object"===rr(i)?C.Merge(r,i):"boolean"==typeof i&&(r.auto_beam=i);var o=new Bt(H.TIME4_4).setMode(Bt.Mode.SOFT).addTickables(n),s=r.auto_beam?Rt.applyAndGetBeams(o):[];return(new cr).joinVoices([o],{align_rests:r.align_rests}).formatToStave([o],t,{align_rests:r.align_rests,stave:t}),o.setStave(t).draw(e,t),s.forEach(function(t){return t.setContext(e).draw()}),o.getBoundingBox()}},{key:"FormatAndDrawTab",value:function(e,t,n,i,r,o,s){var a={auto_beam:o,align_rests:!1};"object"===rr(s)?C.Merge(a,s):"boolean"==typeof s&&(a.auto_beam=s);var u=new Bt(H.TIME4_4).setMode(Bt.Mode.SOFT).addTickables(r),l=new Bt(H.TIME4_4).setMode(Bt.Mode.SOFT).addTickables(i),c=a.auto_beam?Rt.applyAndGetBeams(u):[];(new cr).joinVoices([u],{align_rests:a.align_rests}).joinVoices([l]).formatToStave([u,l],n,{align_rests:a.align_rests}),u.draw(e,n),l.draw(e,t),c.forEach(function(t){return t.setContext(e).draw()}),new Yt(n,t).setContext(e).draw()}},{key:"AlignRestsToNotes",value:function(o,s,a){return o.forEach(function(t,e){if(t instanceof We&&t.isRest()){if(t.tuplet&&!a)return;var n=t.getGlyph().position.toUpperCase();if("R/4"!==n&&"B/4"!==n)return;if(s||null!=t.beam){var i=t.getKeyProps()[0];if(0===e)i.line=ar(o,i.line,e,!1),t.setKeyLine(0,i.line);else if(0<e&&e<o.length){var r;o[e-1].isRest()?(r=o[e-1].getKeyProps()[0].line,i.line=r):(r=o[e-1].getLineForRest(),i.line=ar(o,r,e,!0)),t.setKeyLine(0,i.line)}}}}),this}}]),sr(cr,[{key:"alignRests",value:function(t,e){if(!t||!t.length)throw new C.RERR("BadArgument","No voices to format rests");t.forEach(function(t){return cr.AlignRestsToNotes(t.getTickables(),e)})}},{key:"preCalculateMinTotalWidth",value:function(t){if(this.hasMinTotalWidth)return this.minTotalWidth;if(!this.tickContexts){if(!t)throw new C.RERR("BadArgument","'voices' required to run preCalculateMinTotalWidth");this.createTickContexts(t)}var e=this.tickContexts,n=e.list,i=e.map;return this.minTotalWidth=n.map(function(t){var e=i[t];return e.preFormat(),e.getWidth()}).reduce(function(t,e){return t+e},0),this.hasMinTotalWidth=!0,this.minTotalWidth}},{key:"getMinTotalWidth",value:function(){if(!this.hasMinTotalWidth)throw new C.RERR("NoMinTotalWidth","Call 'preCalculateMinTotalWidth' or 'preFormat' before calling 'getMinTotalWidth'");return this.minTotalWidth}},{key:"createModifierContexts",value:function(t){var e=ur(t,nr,function(t,e){return t.addToModifierContext(e)});return this.modiferContexts=e}},{key:"createTickContexts",value:function(t){var e=ur(t,Ei,function(t,e){return e.addTickable(t)});return e.array.forEach(function(t){t.tContexts=e.array}),this.totalTicks=t[0].getTicksUsed().clone(),this.tickContexts=e}},{key:"preFormat",value:function(){var r=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,o=1<arguments.length?arguments[1]:void 0,e=2<arguments.length?arguments[2]:void 0,n=3<arguments.length?arguments[3]:void 0,i=this.tickContexts,s=i.list,a=i.map,u=i.resolutionMultiplier;e&&n&&e.forEach(function(t){return t.setStave(n).preFormat()});var l=0,c=0,h=t/2;if(this.minTotalWidth=0,s.forEach(function(t){var e=a[t];o&&e.setContext(o),e.preFormat();var n=e.getWidth();r.minTotalWidth+=n;var i=e.getMetrics();l=l+c+i.extraLeftPx,e.setX(l),c=n-i.extraLeftPx}),this.minTotalWidth=l+c,this.hasMinTotalWidth=!0,!(t<=0)){var f=(t-this.minTotalWidth)/(this.totalTicks.value()*u),p=0;s.forEach(function(t,e){var n=s[e-1]||0,i=a[t];p+=(t-n)*f,i.setX(i.getX()+p),i.getCenterAlignedTickables().forEach(function(t){t.center_x_shift=h-i.getX()})}),1!==s.length&&(this.justifyWidth=t,this.lossHistory=[],this.evaluate())}}},{key:"evaluate",value:function(){var l=this,p=this.justifyWidth;this.contextGaps={total:0,gaps:[]},this.tickContexts.list.forEach(function(t,e){if(0!==e){var n=l.tickContexts.list[e-1],i=l.tickContexts.map[n],r=l.tickContexts.map[t],o=i.getMetrics(),s=i.getX()+o.width,a=r.getX(),u=a-s;l.contextGaps.total+=u,l.contextGaps.gaps.push({x1:s,x2:a}),r.getFormatterMetrics().freedom.left=u,i.getFormatterMetrics().freedom.right=u}});var d=this.durationStats={};this.voices.forEach(function(t){t.getTickables().forEach(function(t,e,n){var i,r,o,s=t.getTicks().clone().simplify().toString(),a=t.getMetrics(),u=t.getFormatterMetrics(),l=t.getX()+a.noteWidth+a.modRightPx+a.extraRightPx,c=0;if(e<n.length-1){var h=n[e+1],f=h.getMetrics();c=h.getX()-f.modLeftPx-f.extraLeftPx-l,u.space.used=h.getX()-t.getX(),h.getFormatterMetrics().freedom.left=c}else c=p-l,u.space.used=p-t.getX();u.freedom.right=c,i=s,r=u.space.used,void 0===(o=d[i])?d[i]={mean:r,count:1}:(o.count+=1,o.mean=(o.mean+r)/2)})});var i=0;return this.voices.forEach(function(t){t.getTickables().forEach(function(t){var e=t.getTicks().clone().simplify().toString(),n=t.getFormatterMetrics();n.iterations+=1,n.space.deviation=n.space.used-d[e].mean,n.duration=e,n.space.mean=d[e].mean,i+=Math.pow(d[e].mean,2)})}),this.totalCost=Math.sqrt(i),this.lossHistory.push(this.totalCost),this}},{key:"tune",value:function(){var f=this,p=0;return this.tickContexts.list.forEach(function(t,e,n){var i,r,o,s,a=f.tickContexts.map[t],u=0<e?f.tickContexts.map[n[e-1]]:null,l=e<n.length-1?f.tickContexts.map[n[e+1]]:null;r=u,o=l,s=p,(i=a).setX(i.getX()+s),i.getFormatterMetrics().freedom.left+=s,i.getFormatterMetrics().freedom.right-=s,r&&(r.getFormatterMetrics().freedom.right+=s),o&&(o.getFormatterMetrics().freedom.left-=s);var c=-a.getTickables().map(function(t){return t.getFormatterMetrics().space.deviation}).reduce(function(t,e){return t+e});0<c?p=-Math.min(a.getFormatterMetrics().freedom.right,Math.abs(c)):c<0&&(p=l?Math.min(l.getFormatterMetrics().freedom.right,Math.abs(c)):0);var h=Math.min(5,Math.abs(p));p=0<p?h:-h}),this.evaluate()}},{key:"postFormat",value:function(){function t(e){return e.list.forEach(function(t){return e.map[t].postFormat()})}return t(this.modiferContexts),t(this.tickContexts),this}},{key:"joinVoices",value:function(t){return this.createModifierContexts(t),this.hasMinTotalWidth=!1,this}},{key:"format",value:function(t,e,n){var i={align_rests:!1,context:null,stave:null};return C.Merge(i,n),this.voices=t,this.alignRests(t,i.align_rests),this.createTickContexts(t),this.preFormat(e,i.context,t,i.stave),i.stave&&this.postFormat(),this}},{key:"formatToStave",value:function(t,e,n){var i=e.getNoteEndX()-e.getNoteStartX()-10;!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];lr.DEBUG&&C.L("Vex.Flow.Formatter",e)}("Formatting voices to width: ",i);var r={context:e.getContext()};return C.Merge(r,n),this.format(t,i,r)}}]),cr);function cr(){!function(t){if(!(t instanceof cr))throw new TypeError("Cannot call a class as a function")}(this),this.minTotalWidth=0,this.hasMinTotalWidth=!1,this.totalTicks=new d(0,1),this.tickContexts=null,this.modiferContexts=null,this.contextGaps={total:0,gaps:[]},this.voices=[]}function hr(t){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fr(t){return(fr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function dr(t,e,n){return e&&pr(t.prototype,e),n&&pr(t,n),t}function br(t,e){return(br=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yr=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&br(t,e)}(mr,E),dr(mr,null,[{key:"Position",get:function(){return{LEFT:1,RIGHT:2,ABOVE:3,BELOW:4,BEGIN:5,END:6}}}]),dr(mr,[{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(t){return this.position=t,this}},{key:"getStave",value:function(){return this.stave}},{key:"setStave",value:function(t){return this.stave=t,this}},{key:"getWidth",value:function(){return this.width}},{key:"setWidth",value:function(t){return this.width=t,this}},{key:"getX",value:function(){return this.x}},{key:"setX",value:function(t){return this.x=t,this}},{key:"getCategory",value:function(){return""}},{key:"makeSpacer",value:function(t){return{getContext:function(){return!0},setStave:function(){},renderToStave:function(){},getMetrics:function(){return{width:t}}}}},{key:"placeGlyphOnLine",value:function(t,e,n){t.setYShift(e.getYForLine(n)-e.getYForGlyphs())}},{key:"getPadding",value:function(t){return void 0!==t&&t<2?0:this.padding}},{key:"setPadding",value:function(t){return this.padding=t,this}},{key:"setLayoutMetrics",value:function(t){return this.layoutMetrics=t,this}},{key:"getLayoutMetrics",value:function(){return this.layoutMetrics}}]),mr);function mr(){var t;return function(t){if(!(t instanceof mr))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==hr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,fr(mr).call(this))).setAttribute("type","StaveModifier"),t.padding=10,t.position=mr.Position.ABOVE,t.layoutMetrics=null,t}function gr(t){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vr(t){return(vr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Sr(t,e,n){return e&&_r(t.prototype,e),n&&_r(t,n),t}function xr(t,e){return(xr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wr=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),xr(t,e)}(Er,yr),Sr(Er,null,[{key:"CATEGORY",get:function(){return"barlines"}},{key:"type",get:function(){return{SINGLE:1,DOUBLE:2,END:3,REPEAT_BEGIN:4,REPEAT_END:5,REPEAT_BOTH:6,NONE:7}}},{key:"typeString",get:function(){return{single:Er.type.SINGLE,double:Er.type.DOUBLE,end:Er.type.END,repeatBegin:Er.type.REPEAT_BEGIN,repeatEnd:Er.type.REPEAT_END,repeatBoth:Er.type.REPEAT_BOTH,none:Er.type.NONE}}}]),Sr(Er,[{key:"getCategory",value:function(){return Er.CATEGORY}},{key:"getType",value:function(){return this.type}},{key:"setType",value:function(t){return this.type="string"==typeof t?Er.typeString[t]:t,this.setWidth(this.widths[this.type]),this.setPadding(this.paddings[this.type]),this.setLayoutMetrics(this.layoutMetricsMap[this.type]),this}},{key:"draw",value:function(t){switch(t.checkContext(),this.setRendered(),this.type){case Er.type.SINGLE:this.drawVerticalBar(t,this.x,!1);break;case Er.type.DOUBLE:this.drawVerticalBar(t,this.x,!0);break;case Er.type.END:this.drawVerticalEndBar(t,this.x);break;case Er.type.REPEAT_BEGIN:this.drawRepeatBar(t,this.x,!0),t.getX()!==this.x&&this.drawVerticalBar(t,t.getX());break;case Er.type.REPEAT_END:this.drawRepeatBar(t,this.x,!1);break;case Er.type.REPEAT_BOTH:this.drawRepeatBar(t,this.x,!1),this.drawRepeatBar(t,this.x,!0)}}},{key:"drawVerticalBar",value:function(t,e,n){t.checkContext();var i=t.getTopLineTopY(),r=t.getBottomLineBottomY();n&&t.context.fillRect(e-3,i,1,r-i),t.context.fillRect(e,i,1,r-i)}},{key:"drawVerticalEndBar",value:function(t,e){t.checkContext();var n=t.getTopLineTopY(),i=t.getBottomLineBottomY();t.context.fillRect(e-5,n,1,i-n),t.context.fillRect(e-2,n,3,i-n)}},{key:"drawRepeatBar",value:function(t,e,n){t.checkContext();var i=t.getTopLineTopY(),r=t.getBottomLineBottomY(),o=3;n||(o=-5),t.context.fillRect(e+o,i,1,r-i),t.context.fillRect(e-2,i,3,r-i),n?o+=4:o-=4;var s=e+o+1,a=(t.getNumLines()-1)*t.getSpacingBetweenLines(),u=i+(a=a/2-t.getSpacingBetweenLines()/2)+1;t.context.beginPath(),t.context.arc(s,u,2,0,2*Math.PI,!1),t.context.fill(),u+=t.getSpacingBetweenLines(),t.context.beginPath(),t.context.arc(s,u,2,0,2*Math.PI,!1),t.context.fill()}}]),Er);function Er(t){var e;!function(t){if(!(t instanceof Er))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==gr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,vr(Er).call(this))).setAttribute("type","Barline"),e.thickness=H.STAVE_LINE_THICKNESS;var n=Er.type;return e.widths={},e.widths[n.SINGLE]=5,e.widths[n.DOUBLE]=5,e.widths[n.END]=5,e.widths[n.REPEAT_BEGIN]=5,e.widths[n.REPEAT_END]=5,e.widths[n.REPEAT_BOTH]=5,e.widths[n.NONE]=5,e.paddings={},e.paddings[n.SINGLE]=0,e.paddings[n.DOUBLE]=0,e.paddings[n.END]=0,e.paddings[n.REPEAT_BEGIN]=15,e.paddings[n.REPEAT_END]=15,e.paddings[n.REPEAT_BOTH]=15,e.paddings[n.NONE]=0,e.layoutMetricsMap={},e.layoutMetricsMap[n.SINGLE]={xMin:0,xMax:1,paddingLeft:5,paddingRight:5},e.layoutMetricsMap[n.DOUBLE]={xMin:-3,xMax:1,paddingLeft:5,paddingRight:5},e.layoutMetricsMap[n.END]={xMin:-5,xMax:1,paddingLeft:5,paddingRight:5},e.layoutMetricsMap[n.REPEAT_END]={xMin:-10,xMax:1,paddingLeft:5,paddingRight:5},e.layoutMetricsMap[n.REPEAT_BEGIN]={xMin:-2,xMax:10,paddingLeft:5,paddingRight:5},e.layoutMetricsMap[n.REPEAT_BOTH]={xMin:-10,xMax:10,paddingLeft:5,paddingRight:5},e.layoutMetricsMap[n.NONE]={xMin:0,xMax:0,paddingLeft:5,paddingRight:5},e.setPosition(yr.Position.BEGIN),e.setType(t),e}function Pr(t){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tr(t){return(Tr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Or(t,e,n){return e&&kr(t.prototype,e),n&&kr(t,n),t}function Mr(t,e){return(Mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rr=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Mr(t,e)}(Lr,yr),Or(Lr,null,[{key:"CATEGORY",get:function(){return"repetitions"}},{key:"type",get:function(){return{NONE:1,CODA_LEFT:2,CODA_RIGHT:3,SEGNO_LEFT:4,SEGNO_RIGHT:5,DC:6,DC_AL_CODA:7,DC_AL_FINE:8,DS:9,DS_AL_CODA:10,DS_AL_FINE:11,FINE:12}}}]),Or(Lr,[{key:"getCategory",value:function(){return Lr.CATEGORY}},{key:"setShiftX",value:function(t){return this.x_shift=t,this}},{key:"setShiftY",value:function(t){return this.y_shift=t,this}},{key:"draw",value:function(t,e){switch(this.setRendered(),this.symbol_type){case Lr.type.CODA_RIGHT:this.drawCodaFixed(t,e+t.width);break;case Lr.type.CODA_LEFT:this.drawSymbolText(t,e,"Coda",!0);break;case Lr.type.SEGNO_LEFT:this.drawSignoFixed(t,e);break;case Lr.type.SEGNO_RIGHT:this.drawSignoFixed(t,e+t.width);break;case Lr.type.DC:this.drawSymbolText(t,e,"D.C.",!1);break;case Lr.type.DC_AL_CODA:this.drawSymbolText(t,e,"D.C. al",!0);break;case Lr.type.DC_AL_FINE:this.drawSymbolText(t,e,"D.C. al Fine",!1);break;case Lr.type.DS:this.drawSymbolText(t,e,"D.S.",!1);break;case Lr.type.DS_AL_CODA:this.drawSymbolText(t,e,"D.S. al",!0);break;case Lr.type.DS_AL_FINE:this.drawSymbolText(t,e,"D.S. al Fine",!1);break;case Lr.type.FINE:this.drawSymbolText(t,e,"Fine",!1)}return this}},{key:"drawCodaFixed",value:function(t,e){var n=t.getYForTopText(t.options.num_lines)+this.y_shift;return G.renderGlyph(t.context,this.x+e+this.x_shift,n+25,40,"v4d",!0),this}},{key:"drawSignoFixed",value:function(t,e){var n=t.getYForTopText(t.options.num_lines)+this.y_shift;return G.renderGlyph(t.context,this.x+e+this.x_shift,n+25,30,"v8c",!0),this}},{key:"drawSymbolText",value:function(t,e,n,i){var r=t.checkContext();r.save(),r.setFont(this.font.family,this.font.size,this.font.weight);var o=0+this.x_shift,s=e+this.x_shift;this.symbol_type===Lr.type.CODA_LEFT?s=(o=this.x+t.options.vertical_bar_width)+r.measureText(n).width+12:o=(s=this.x+e+t.width-5+this.x_shift)-+r.measureText(n).width-12;var a=t.getYForTopText(t.options.num_lines)+this.y_shift;return i&&G.renderGlyph(r,s,a,40,"v4d",!0),r.fillText(n,o,a+5),r.restore(),this}}]),Lr);function Lr(t,e,n){var i;return function(t){if(!(t instanceof Lr))throw new TypeError("Cannot call a class as a function")}(this),(i=function(t,e){return!e||"object"!==Pr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Tr(Lr).call(this))).setAttribute("type","Repetition"),i.symbol_type=t,i.x=e,i.x_shift=0,i.y_shift=n,i.font={family:"times",size:12,weight:"bold italic"},i}function Ar(t){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cr(t){return(Cr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ir(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Nr(t,e,n){return e&&Ir(t.prototype,e),n&&Ir(t,n),t}function Fr(t,e){return(Fr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Br=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Fr(t,e)}(Dr,yr),Nr(Dr,null,[{key:"CATEGORY",get:function(){return"stavesection"}}]),Nr(Dr,[{key:"getCategory",value:function(){return Dr.CATEGORY}},{key:"setStaveSection",value:function(t){return this.section=t,this}},{key:"setShiftX",value:function(t){return this.shift_x=t,this}},{key:"setShiftY",value:function(t){return this.shift_y=t,this}},{key:"draw",value:function(t,e){var n=t.checkContext();this.setRendered(),n.save(),n.lineWidth=2,n.setFont(this.font.family,this.font.size,this.font.weight);var i=n.measureText(""+this.section).width,r=i+6;r<18&&(r=18);var o=t.getYForTopText(3)+this.shift_y,s=this.x+e;return n.beginPath(),n.lineWidth=2,n.rect(s,o,r,20),n.stroke(),s+=(r-i)/2,n.fillText(""+this.section,s,o+16),n.restore(),this}}]),Dr);function Dr(t,e,n){var i;return function(t){if(!(t instanceof Dr))throw new TypeError("Cannot call a class as a function")}(this),(i=function(t,e){return!e||"object"!==Ar(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Cr(Dr).call(this))).setAttribute("type","StaveSection"),i.setWidth(16),i.section=t,i.x=e,i.shift_x=0,i.shift_y=n,i.font={family:"sans-serif",size:12,weight:"bold"},i}function jr(t){return(jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vr(t){return(Vr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Wr(t,e,n){return e&&Gr(t.prototype,e),n&&Gr(t,n),t}function Ur(t,e){return(Ur=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hr=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Ur(t,e)}(Yr,yr),Wr(Yr,null,[{key:"CATEGORY",get:function(){return"stavetempo"}}]),Wr(Yr,[{key:"getCategory",value:function(){return Yr.CATEGORY}},{key:"setTempo",value:function(t){return this.tempo=t,this}},{key:"setShiftX",value:function(t){return this.shift_x=t,this}},{key:"setShiftY",value:function(t){return this.shift_y=t,this}},{key:"draw",value:function(t,e){var n=t.checkContext();this.setRendered();var i=this.render_options,r=i.glyph_font_scale/38,o=this.tempo.name,s=this.tempo.duration,a=this.tempo.dots,u=this.tempo.bpm,l=this.font,c=this.x+this.shift_x+e,h=t.getYForTopText(1)+this.shift_y;if(n.save(),o&&(n.setFont(l.family,l.size,l.weight),n.fillText(o,c,h),c+=n.measureText(o).width),s&&u){n.setFont(l.family,l.size,"normal"),o&&(c+=n.measureText(" ").width,n.fillText("(",c,h),c+=n.measureText("(").width);var f=H.durationToGlyph(s);if(c+=3*r,G.renderGlyph(n,c,h,i.glyph_font_scale,f.code_head),c+=f.getWidth()*r,f.stem){var p=30;f.beam_count&&(p+=3*(f.beam_count-1));var d=h-(p*=r);n.fillRect(c-r,d,r,p),f.flag&&(G.renderGlyph(n,c,d,i.glyph_font_scale,f.code_flag_upstem),a||(c+=6*r))}for(var b=0;b<a;b++)c+=6*r,n.beginPath(),n.arc(c,h+2*r,2*r,0,2*Math.PI,!1),n.fill();n.fillText(" = "+u+(o?")":""),c+3*r,h)}return n.restore(),this}}]),Yr);function Yr(t,e,n){var i;return function(t){if(!(t instanceof Yr))throw new TypeError("Cannot call a class as a function")}(this),(i=function(t,e){return!e||"object"!==jr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Vr(Yr).call(this))).setAttribute("type","StaveTempo"),i.tempo=t,i.position=Pe.Position.ABOVE,i.x=e,i.shift_x=10,i.shift_y=n,i.font={family:"times",size:14,weight:"bold"},i.render_options={glyph_font_scale:30},i}function zr(t){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xr(t){return(Xr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function qr(t,e,n){return e&&Kr(t.prototype,e),n&&Kr(t,n),t}function Jr(t,e){return(Jr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qr=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jr(t,e)}(Zr,re),qr(Zr,null,[{key:"Justification",get:function(){return{LEFT:1,CENTER:2,RIGHT:3}}},{key:"GLYPHS",get:function(){return{segno:{code:"v8c",point:40,x_shift:0,y_shift:-10},tr:{code:"v1f",point:40,x_shift:0,y_shift:0},mordent_upper:{code:"v1e",point:40,x_shift:0,y_shift:0},mordent_lower:{code:"v45",point:40,x_shift:0,y_shift:0},f:{code:"vba",point:40,x_shift:0,y_shift:0},p:{code:"vbf",point:40,x_shift:0,y_shift:0},m:{code:"v62",point:40,x_shift:0,y_shift:0},s:{code:"v4a",point:40,x_shift:0,y_shift:0},z:{code:"v80",point:40,x_shift:0,y_shift:0},coda:{code:"v4d",point:40,x_shift:0,y_shift:-8},pedal_open:{code:"v36",point:40,x_shift:0,y_shift:0},pedal_close:{code:"v5d",point:40,x_shift:0,y_shift:3},caesura_straight:{code:"v34",point:40,x_shift:0,y_shift:2},caesura_curved:{code:"v4b",point:40,x_shift:0,y_shift:2},breath:{code:"v6c",point:40,x_shift:0,y_shift:0},tick:{code:"v6f",point:50,x_shift:0,y_shift:0},turn:{code:"v72",point:40,x_shift:0,y_shift:0},turn_inverted:{code:"v33",point:40,x_shift:0,y_shift:0},mordent:{code:"v1e",point:40,x_shift:0,y_shift:0}}}}]),qr(Zr,[{key:"setJustification",value:function(t){return this.justification=t,this}},{key:"setLine",value:function(t){return this.line=t,this}},{key:"preFormat",value:function(){this.checkContext(),this.preFormatted||(this.smooth?this.setWidth(0):this.glyph||this.setWidth(this.context.measureText(this.text).width),this.justification===Zr.Justification.CENTER?this.extraLeftPx=this.width/2:this.justification===Zr.Justification.RIGHT&&(this.extraLeftPx=this.width),this.setPreFormatted(!0))}},{key:"draw",value:function(){if(this.checkContext(),!this.stave)throw new C.RERR("NoStave","Can't draw without a stave.");this.setRendered();var t,e=this.context,n=this.getAbsoluteX();if(this.justification===Zr.Justification.CENTER?n-=this.getWidth()/2:this.justification===Zr.Justification.RIGHT&&(n-=this.getWidth()),this.glyph)t=this.stave.getYForLine(this.line+-3),this.glyph.render(this.context,n+this.glyph_struct.x_shift,t+this.glyph_struct.y_shift);else{t=this.stave.getYForLine(this.line+-3),this.applyStyle(e),e.setFont(this.font.family,this.font.size,this.font.weight),e.fillText(this.text,n,t);var i=e.measureText("M").width,r=e.measureText(this.text).width;this.superscript&&(e.setFont(this.font.family,this.font.size/1.3,this.font.weight),e.fillText(this.superscript,n+r+2,t-i/2.2)),this.subscript&&(e.setFont(this.font.family,this.font.size/1.3,this.font.weight),e.fillText(this.subscript,n+r+2,t+i/2.2-1)),this.restoreStyle(e)}}}]),Zr);function Zr(t){var e;if(function(t){if(!(t instanceof Zr))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==zr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Xr(Zr).call(this,t))).setAttribute("type","TextNote"),e.text=t.text,e.superscript=t.superscript,e.subscript=t.subscript,e.glyph_type=t.glyph,e.glyph=null,e.font={family:"Arial",size:12,weight:""},t.font&&(e.font=t.font),e.glyph_type){var n=Zr.GLYPHS[e.glyph_type];if(!n)throw new C.RERR("Invalid glyph type: "+e.glyph_type);e.glyph=new G(n.code,n.point,{cache:!1}),n.width?e.setWidth(n.width):e.setWidth(e.glyph.getMetrics().width),e.glyph_struct=n}else e.setWidth(H.textWidth(e.text));return e.line=t.line||0,e.smooth=t.smooth||!1,e.ignore_ticks=t.ignore_ticks||!1,e.justification=Zr.Justification.LEFT,e}function $r(t){return($r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function to(t){return(to=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function no(t,e,n){return e&&eo(t.prototype,e),n&&eo(t,n),t}function io(t,e){return(io=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ro=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),io(t,e)}(oo,yr),no(oo,null,[{key:"CATEGORY",get:function(){return"stavetext"}}]),no(oo,[{key:"getCategory",value:function(){return oo.CATEGORY}},{key:"setStaveText",value:function(t){return this.text=t,this}},{key:"setShiftX",value:function(t){return this.shift_x=t,this}},{key:"setShiftY",value:function(t){return this.shift_y=t,this}},{key:"setFont",value:function(t){C.Merge(this.font,t)}},{key:"setText",value:function(t){this.text=t}},{key:"draw",value:function(t){var e=t.checkContext();this.setRendered(),e.save(),e.lineWidth=2,e.setFont(this.font.family,this.font.size,this.font.weight);var n,i,r=e.measureText(""+this.text).width,o=yr.Position,s=Qr.Justification;switch(this.position){case o.LEFT:case o.RIGHT:i=(t.getYForLine(0)+t.getBottomLineY())/2+this.options.shift_y,n=this.position===o.LEFT?t.getX()-r-24+this.options.shift_x:t.getX()+t.getWidth()+24+this.options.shift_x;break;case o.ABOVE:case o.BELOW:n=t.getX()+this.options.shift_x,this.options.justification===s.CENTER?n+=t.getWidth()/2-r/2:this.options.justification===s.RIGHT&&(n+=t.getWidth()-r),i=this.position===o.ABOVE?t.getYForTopText(2)+this.options.shift_y:t.getYForBottomText(2)+this.options.shift_y;break;default:throw new C.RERR("InvalidPosition","Value Must be in Modifier.Position.")}return e.fillText(""+this.text,n,i+4),e.restore(),this}}]),oo);function oo(t,e,n){var i;return function(t){if(!(t instanceof oo))throw new TypeError("Cannot call a class as a function")}(this),(i=function(t,e){return!e||"object"!==$r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,to(oo).call(this))).setAttribute("type","StaveText"),i.setWidth(16),i.text=t,i.position=e,i.options={shift_x:0,shift_y:0,justification:Qr.Justification.CENTER},C.Merge(i.options,n),i.font={family:"times",size:16,weight:"normal"},i}function so(t){return(so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ao(t){return(ao=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function lo(t,e,n){return e&&uo(t.prototype,e),n&&uo(t,n),t}function co(t,e){return(co=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ho=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),co(t,e)}(fo,yr),lo(fo,null,[{key:"CATEGORY",get:function(){return"clefs"}},{key:"types",get:function(){return{treble:{code:"v83",line:3},bass:{code:"v79",line:1},alto:{code:"vad",line:2},tenor:{code:"vad",line:1},percussion:{code:"v59",line:2},soprano:{code:"vad",line:4},"mezzo-soprano":{code:"vad",line:3},"baritone-c":{code:"vad",line:0},"baritone-f":{code:"v79",line:2},subbass:{code:"v79",line:0},french:{code:"v83",line:4},tab:{code:"v2f"}}}},{key:"sizes",get:function(){return{default:40,small:32}}},{key:"annotations",get:function(){return{"8va":{code:"v8",sizes:{default:{point:20,attachments:{treble:{line:-1.2,x_shift:11}}},small:{point:18,attachments:{treble:{line:-.4,x_shift:8}}}}},"8vb":{code:"v8",sizes:{default:{point:20,attachments:{treble:{line:6.3,x_shift:10},bass:{line:4,x_shift:1}}},small:{point:18,attachments:{treble:{line:5.8,x_shift:6},bass:{line:3.5,x_shift:.5}}}}}}}}]),lo(fo,[{key:"getCategory",value:function(){return fo.CATEGORY}},{key:"setType",value:function(t,e,n){if(this.type=t,this.clef=fo.types[t],this.size=void 0===e?"default":e,this.clef.point=fo.sizes[this.size],this.glyph=new G(this.clef.code,this.clef.point),void 0!==n){var i=fo.annotations[n];this.annotation={code:i.code,point:i.sizes[this.size].point,line:i.sizes[this.size].attachments[this.type].line,x_shift:i.sizes[this.size].attachments[this.type].x_shift},this.attachment=new G(this.annotation.code,this.annotation.point),this.attachment.metrics.x_max=0,this.attachment.setXShift(this.annotation.x_shift)}else this.annotation=void 0;return this}},{key:"getWidth",value:function(){if("tab"===this.type&&!this.stave)throw new C.RERR("ClefError","Can't get width without stave.");return this.width}},{key:"setStave",value:function(t){if(this.stave=t,"tab"!==this.type)return this;var e,n,i=this.stave.getOptions().num_lines;switch(i){case 8:e=55,n=14;break;case 7:e=47,n=8;break;case 6:e=40,n=1;break;case 5:e=30,n=-6;break;case 4:e=23,n=-12;break;default:throw new C.RERR("ClefError","Invalid number of lines: ".concat(i))}return this.glyph.setPoint(e),this.glyph.setYShift(n),this}},{key:"draw",value:function(){if(!this.x)throw new C.RERR("ClefError","Can't draw clef without x.");if(!this.stave)throw new C.RERR("ClefError","Can't draw clef without stave.");this.setRendered(),this.glyph.setStave(this.stave),this.glyph.setContext(this.stave.context),void 0!==this.clef.line&&this.placeGlyphOnLine(this.glyph,this.stave,this.clef.line),this.glyph.renderToStave(this.x),void 0!==this.annotation&&(this.placeGlyphOnLine(this.attachment,this.stave,this.annotation.line),this.attachment.setStave(this.stave),this.attachment.setContext(this.stave.context),this.attachment.renderToStave(this.x))}}]),fo);function fo(t,e,n){var i;return function(t){if(!(t instanceof fo))throw new TypeError("Cannot call a class as a function")}(this),(i=function(t,e){return!e||"object"!==so(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ao(fo).call(this))).setAttribute("type","Clef"),i.setPosition(yr.Position.BEGIN),i.setType(t,e,n),i.setWidth(i.glyph.getMetrics().width),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];ho.DEBUG&&C.L("Vex.Flow.Clef",e)}("Creating clef:",t),i}function po(t){return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bo(t){return(bo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function mo(t,e,n){return e&&yo(t.prototype,e),n&&yo(t,n),t}function go(t,e){return(go=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vo=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),go(t,e)}(_o,yr),mo(_o,null,[{key:"CATEGORY",get:function(){return"keysignatures"}},{key:"accidentalSpacing",get:function(){return{"#":{above:6,below:4},b:{above:4,below:7},n:{above:4,below:1},"##":{above:6,below:4},bb:{above:4,below:7},db:{above:4,below:7},d:{above:4,below:7},bbs:{above:4,below:7},"++":{above:6,below:4},"+":{above:6,below:4},"+-":{above:6,below:4},"++-":{above:6,below:4},bs:{above:4,below:10},bss:{above:4,below:10}}}}]),mo(_o,[{key:"getCategory",value:function(){return _o.CATEGORY}},{key:"convertToGlyph",value:function(t,e){var n=H.accidentalCodes(t.type),i=new G(n.code,this.glyphFontScale),r=1;if("n"===t.type&&e){var o=_o.accidentalSpacing[e.type];o&&(r=e.line>=t.line?o.above:o.below)}this.placeGlyphOnLine(i,this.stave,t.line),this.glyphs.push(i);var s=this.xPositions[this.xPositions.length-1],a=i.getMetrics().width+r;this.xPositions.push(s+a),this.width+=a}},{key:"cancelKey",value:function(t){return this.formatted=!1,this.cancelKeySpec=t,this}},{key:"convertToCancelAccList",value:function(t){var e=H.keySignature(t),n=0<this.accList.length&&0<e.length&&e[0].type!==this.accList[0].type,i=n?e.length:e.length-this.accList.length;if(!(i<1)){for(var r=[],o=0;o<i;o++){var s=o;n||(s=e.length-i+o);var a=e[s];r.push({type:"n",line:a.line})}this.accList=r.concat(this.accList)}}},{key:"addToStave",value:function(t){return this.paddingForced=!0,t.addModifier(this),this}},{key:"convertAccLines",value:function(t,e){var n,i,r=0;switch(t){case"soprano":"#"===e?n=[2.5,.5,2,0,1.5,-.5,1]:r=-1;break;case"mezzo-soprano":"b"===e?n=[0,2,.5,2.5,1,3,1.5]:r=1.5;break;case"alto":r=.5;break;case"tenor":"#"===e?n=[3,1,2.5,.5,2,0,1.5]:r=-.5;break;case"baritone-f":case"baritone-c":"b"===e?n=[.5,2.5,1,3,1.5,3.5,2]:r=2;break;case"bass":case"french":r=1}if(void 0!==n)for(i=0;i<this.accList.length;++i)this.accList[i].line=n[i];else if(0!==r)for(i=0;i<this.accList.length;++i)this.accList[i].line+=r}},{key:"getPadding",value:function(t){return this.formatted||this.format(),0===this.glyphs.length||!this.paddingForced&&t<2?0:this.padding}},{key:"getWidth",value:function(){return this.formatted||this.format(),this.width}},{key:"setKeySig",value:function(t,e,n){return this.formatted=!1,this.keySpec=t,this.cancelKeySpec=e,this.alterKeySpec=n,this}},{key:"alterKey",value:function(t){return this.formatted=!1,this.alterKeySpec=t,this}},{key:"convertToAlterAccList",value:function(t){for(var e=Math.min(t.length,this.accList.length),n=0;n<e;++n)t[n]&&(this.accList[n].type=t[n])}},{key:"format",value:function(){if(!this.stave)throw new C.RERR("KeySignatureError","Can't draw key signature without stave.");this.width=0,this.glyphs=[],this.xPositions=[0],this.accList=H.keySignature(this.keySpec),this.cancelKeySpec&&this.convertToCancelAccList(this.cancelKeySpec);var t=0<this.accList.length?this.accList[0].type:null;if(this.alterKeySpec&&this.convertToAlterAccList(this.alterKeySpec),0<this.accList.length){this.convertAccLines(this.stave.clef,t);for(var e=0;e<this.accList.length;++e)this.convertToGlyph(this.accList[e],this.accList[e+1])}this.formatted=!0}},{key:"draw",value:function(){if(!this.x)throw new C.RERR("KeySignatureError","Can't draw key signature without x.");if(!this.stave)throw new C.RERR("KeySignatureError","Can't draw key signature without stave.");this.formatted||this.format(),this.setRendered();for(var t=0;t<this.glyphs.length;t++){var e=this.glyphs[t],n=this.x+this.xPositions[t];e.setStave(this.stave),e.setContext(this.stave.context),e.renderToStave(n)}}}]),_o);function _o(t,e,n){var i;return function(t){if(!(t instanceof _o))throw new TypeError("Cannot call a class as a function")}(this),(i=function(t,e){return!e||"object"!==po(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,bo(_o).call(this))).setAttribute("type","KeySignature"),i.setKeySig(t,e,n),i.setPosition(yr.Position.BEGIN),i.glyphFontScale=38,i.glyphs=[],i.xPositions=[],i.paddingForced=!1,i}function So(t){return(So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xo(t,e){return!e||"object"!==So(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wo(t){return(wo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Eo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Po(t,e,n){return e&&Eo(t.prototype,e),n&&Eo(t,n),t}function To(t,e){return(To=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ko=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),To(t,e)}(Oo,yr),Po(Oo,null,[{key:"CATEGORY",get:function(){return"timesignatures"}},{key:"glyphs",get:function(){return{C:{code:"v41",point:40,line:2},"C|":{code:"vb6",point:40,line:2}}}}]),Po(Oo,[{key:"getCategory",value:function(){return Oo.CATEGORY}},{key:"parseTimeSpec",value:function(t){if("C"===t||"C|"===t){var e=Oo.glyphs[t],n=e.line,i=e.code,r=e.point;return{line:n,num:!1,glyph:new G(i,r)}}this.validate_args&&function(e){var t=e.split("/").filter(function(t){return""!==t});if(2!==t.length)throw new C.RERR("BadTimeSignature","Invalid time spec: ".concat(e,'. Must be in the form "<numerator>/<denominator>"'));t.forEach(function(t){if(isNaN(Number(t)))throw new C.RERR("BadTimeSignature","Invalid time spec: ".concat(e,". Must contain two valid numbers."))})}(t);var o=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(t.split("/").map(function(t){return t.split("")}),2),s=o[0],a=o[1];return{num:!0,glyph:this.makeTimeSignatureGlyph(s,a)}}},{key:"makeTimeSignatureGlyph",value:function(t,e){var n=new G("v0",this.point);n.topGlyphs=[],n.botGlyphs=[];for(var i=0,r=0;r<t.length;++r){var o=t[r],s=new G("v"+o,this.point);n.topGlyphs.push(s),i+=s.getMetrics().width}for(var a=0,u=0;u<e.length;++u){var l=e[u],c=new G("v"+l,this.point);n.botGlyphs.push(c),a+=c.getMetrics().width}var h=a<i?i:a,f=n.getMetrics().x_min;n.getMetrics=function(){return{x_min:f,x_max:f+h,width:h}};var p=(h-i)/2,d=(h-a)/2,b=this;return n.renderToStave=function(t){for(var e=t+p,n=0;n<this.topGlyphs.length;++n){var i=this.topGlyphs[n];G.renderOutline(this.context,i.metrics.outline,i.scale,e+i.x_shift,this.stave.getYForLine(b.topLine)+1),e+=i.getMetrics().width}e=t+d;for(var r=0;r<this.botGlyphs.length;++r){var o=this.botGlyphs[r];b.placeGlyphOnLine(o,this.stave,o.line),G.renderOutline(this.context,o.metrics.outline,o.scale,e+o.x_shift,this.stave.getYForLine(b.bottomLine)+1),e+=o.getMetrics().width}},n}},{key:"getTimeSig",value:function(){return this.timeSig}},{key:"setTimeSig",value:function(t){return this.timeSig=this.parseTimeSpec(t),this}},{key:"draw",value:function(){if(!this.x)throw new C.RERR("TimeSignatureError","Can't draw time signature without x.");if(!this.stave)throw new C.RERR("TimeSignatureError","Can't draw time signature without stave.");this.setRendered(),this.timeSig.glyph.setStave(this.stave),this.timeSig.glyph.setContext(this.stave.context),this.placeGlyphOnLine(this.timeSig.glyph,this.stave,this.timeSig.line),this.timeSig.glyph.renderToStave(this.x)}}]),Oo);function Oo(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:15,i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(function(t){if(!(t instanceof Oo))throw new TypeError("Cannot call a class as a function")}(this),(t=xo(this,wo(Oo).call(this))).setAttribute("type","TimeSignature"),t.validate_args=i,null===e)return xo(t);var r=n;return t.point=40,t.topLine=2,t.bottomLine=4,t.setPosition(yr.Position.BEGIN),t.setTimeSig(e),t.setWidth(t.timeSig.glyph.getMetrics().width),t.setPadding(r),t}function Mo(t){return(Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ro(t){return(Ro=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ao(t,e,n){return e&&Lo(t.prototype,e),n&&Lo(t,n),t}function Co(t,e){return(Co=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Io=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Co(t,e)}(No,yr),Ao(No,null,[{key:"CATEGORY",get:function(){return"voltas"}},{key:"type",get:function(){return{NONE:1,BEGIN:2,MID:3,END:4,BEGIN_END:5}}}]),Ao(No,[{key:"getCategory",value:function(){return No.CATEGORY}},{key:"setShiftY",value:function(t){return this.y_shift=t,this}},{key:"draw",value:function(t,e){var n=t.checkContext();this.setRendered();var i=t.width,r=t.getYForTopText(t.options.num_lines)+this.y_shift,o=1.5*t.options.spacing_between_lines_px;switch(this.volta){case No.type.BEGIN:n.fillRect(this.x+e,r,1,o);break;case No.type.END:i-=5,n.fillRect(this.x+e+i,r,1,o);break;case No.type.BEGIN_END:i-=3,n.fillRect(this.x+e,r,1,o),n.fillRect(this.x+e+i,r,1,o)}return this.volta!==No.type.BEGIN&&this.volta!==No.type.BEGIN_END||(n.save(),n.setFont(this.font.family,this.font.size,this.font.weight),n.fillText(this.number,this.x+e+5,r+15),n.restore()),n.fillRect(this.x+e,r,i,1),this}}]),No);function No(t,e,n,i){var r;return function(t){if(!(t instanceof No))throw new TypeError("Cannot call a class as a function")}(this),(r=function(t,e){return!e||"object"!==Mo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ro(No).call(this))).setAttribute("type","Volta"),r.volta=t,r.x=n,r.y_shift=i,r.number=e,r.font={family:"sans-serif",size:9,weight:"bold"},r}function Fo(t){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bo(){return(Bo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function Do(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function jo(t){return(jo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vo(t,e){return(Vo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Go=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vo(t,e)}(Wo,E),Do(Wo.prototype,[{key:"space",value:function(t){return this.options.spacing_between_lines_px*t}},{key:"resetLines",value:function(){this.options.line_config=[];for(var t=0;t<this.options.num_lines;t++)this.options.line_config.push({visible:!0});this.height=(this.options.num_lines+this.options.space_above_staff_ln)*this.options.spacing_between_lines_px,this.options.bottom_text_position=this.options.num_lines}},{key:"getOptions",value:function(){return this.options}},{key:"setNoteStartX",value:function(t){return this.formatted||this.format(),this.start_x=t,this}},{key:"getNoteStartX",value:function(){return this.formatted||this.format(),this.start_x}},{key:"getNoteEndX",value:function(){return this.formatted||this.format(),this.end_x}},{key:"getTieStartX",value:function(){return this.start_x}},{key:"getTieEndX",value:function(){return this.x+this.width}},{key:"getX",value:function(){return this.x}},{key:"getNumLines",value:function(){return this.options.num_lines}},{key:"setNumLines",value:function(t){return this.options.num_lines=parseInt(t,10),this.resetLines(),this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"getTopLineTopY",value:function(){return this.getYForLine(0)-H.STAVE_LINE_THICKNESS/2}},{key:"getBottomLineBottomY",value:function(){return this.getYForLine(this.getNumLines()-1)+H.STAVE_LINE_THICKNESS/2}},{key:"setX",value:function(t){var e=t-this.x;this.formatted=!1,this.x=t,this.start_x+=e,this.end_x+=e;for(var n=0;n<this.modifiers.length;n++){var i=this.modifiers[n];void 0!==i.x&&(i.x+=e)}return this}},{key:"setWidth",value:function(t){return this.formatted=!1,this.width=t,this.end_x=this.x+t,this}},{key:"getWidth",value:function(){return this.width}},{key:"getStyle",value:function(){return Bo({fillStyle:this.options.fill_style,strokeStyle:this.options.fill_style,lineWidth:H.STAVE_LINE_THICKNESS},this.style||{})}},{key:"setMeasure",value:function(t){return this.measure=t,this}},{key:"getModifierXShift",value:function(){if("number"!=typeof(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0))throw new C.RERR("InvalidIndex","Must be of number type");if(this.formatted||this.format(),1===this.getModifiers(yr.Position.BEGIN).length)return 0;var t=this.start_x-this.x,e=this.modifiers[0];return e.getType()===wr.type.REPEAT_BEGIN&&t>e.getWidth()&&(t-=e.getWidth()),t}},{key:"setRepetitionTypeLeft",value:function(t,e){return this.modifiers.push(new Rr(t,this.x,e)),this}},{key:"setRepetitionTypeRight",value:function(t,e){return this.modifiers.push(new Rr(t,this.x,e)),this}},{key:"setVoltaType",value:function(t,e,n){return this.modifiers.push(new Io(t,e,this.x,n)),this}},{key:"setSection",value:function(t,e){return this.modifiers.push(new Br(t,this.x,e)),this}},{key:"setTempo",value:function(t,e){return this.modifiers.push(new Hr(t,this.x,e)),this}},{key:"setText",value:function(t,e,n){return this.modifiers.push(new ro(t,e,n)),this}},{key:"getHeight",value:function(){return this.height}},{key:"getSpacingBetweenLines",value:function(){return this.options.spacing_between_lines_px}},{key:"getBoundingBox",value:function(){return new L(this.x,this.y,this.width,this.getBottomY()-this.y)}},{key:"getBottomY",value:function(){var t=this.options,e=t.spacing_between_lines_px;return this.getYForLine(t.num_lines)+t.space_below_staff_ln*e}},{key:"getBottomLineY",value:function(){return this.getYForLine(this.options.num_lines)}},{key:"getYForLine",value:function(t){var e=this.options,n=e.spacing_between_lines_px,i=e.space_above_staff_ln;return this.y+t*n+i*n}},{key:"getLineForY",value:function(t){var e=this.options,n=e.spacing_between_lines_px,i=e.space_above_staff_ln;return(t-this.y)/n-i}},{key:"getYForTopText",value:function(t){var e=t||0;return this.getYForLine(-e-this.options.top_text_position)}},{key:"getYForBottomText",value:function(t){var e=t||0;return this.getYForLine(this.options.bottom_text_position+e)}},{key:"getYForNote",value:function(t){var e=this.options,n=e.spacing_between_lines_px,i=e.space_above_staff_ln;return this.y+i*n+5*n-t*n}},{key:"getYForGlyphs",value:function(){return this.getYForLine(3)}},{key:"addModifier",value:function(t,e){return void 0!==e&&t.setPosition(e),t.setStave(this),this.formatted=!1,this.modifiers.push(t),this}},{key:"addEndModifier",value:function(t){return this.addModifier(t,yr.Position.END),this}},{key:"setBegBarType",value:function(t){var e=wr.type,n=e.SINGLE,i=e.REPEAT_BEGIN,r=e.NONE;return t!==n&&t!==i&&t!==r||(this.modifiers[0].setType(t),this.formatted=!1),this}},{key:"setEndBarType",value:function(t){return t!==wr.type.REPEAT_BEGIN&&(this.modifiers[1].setType(t),this.formatted=!1),this}},{key:"setClef",value:function(t,e,n,i){void 0===i&&(i=yr.Position.BEGIN),this.clef=t;var r=this.getModifiers(i,ho.CATEGORY);return 0===r.length?this.addClef(t,e,n,i):r[0].setType(t,e,n),this}},{key:"setEndClef",value:function(t,e,n){return this.setClef(t,e,n,yr.Position.END),this}},{key:"setKeySignature",value:function(t,e,n){void 0===n&&(n=yr.Position.BEGIN);var i=this.getModifiers(n,vo.CATEGORY);return 0===i.length?this.addKeySignature(t,e,n):i[0].setKeySig(t,e),this}},{key:"setEndKeySignature",value:function(t,e){return this.setKeySignature(t,e,yr.Position.END),this}},{key:"setTimeSignature",value:function(t,e,n){void 0===n&&(n=yr.Position.BEGIN);var i=this.getModifiers(n,ko.CATEGORY);return 0===i.length?this.addTimeSignature(t,e,n):i[0].setTimeSig(t),this}},{key:"setEndTimeSignature",value:function(t,e){return this.setTimeSignature(t,e,yr.Position.END),this}},{key:"addKeySignature",value:function(t,e,n){return this.addModifier(new vo(t,e),n),this}},{key:"addClef",value:function(t,e,n,i){return void 0!==i&&i!==yr.Position.BEGIN||(this.clef=t),this.addModifier(new ho(t,e,n),i),this}},{key:"addEndClef",value:function(t,e,n){return this.addClef(t,e,n,yr.Position.END),this}},{key:"addTimeSignature",value:function(t,e,n){return this.addModifier(new ko(t,e),n),this}},{key:"addEndTimeSignature",value:function(t,e){return this.addTimeSignature(t,e,yr.Position.END),this}},{key:"addTrebleGlyph",value:function(){return this.addClef("treble"),this}},{key:"getModifiers",value:function(e,n){return void 0===e?this.modifiers:this.modifiers.filter(function(t){return e===t.getPosition()&&(void 0===n||n===t.getCategory())})}},{key:"sortByCategory",value:function(t,e){for(var n=t.length-1;0<=n;n--)for(var i=0;i<n;i++)if(e[t[i].getCategory()]>e[t[i+1].getCategory()]){var r=t[i];t[i]=t[i+1],t[i+1]=r}}},{key:"format",value:function(){var t,e,n,i=this.modifiers[0],r=this.modifiers[1],o=this.getModifiers(yr.Position.BEGIN),s=this.getModifiers(yr.Position.END);this.sortByCategory(o,{barlines:0,clefs:1,keysignatures:2,timesignatures:3}),this.sortByCategory(s,{timesignatures:0,keysignatures:1,barlines:2,clefs:3}),1<o.length&&i.getType()===wr.type.REPEAT_BEGIN&&(o.push(o.splice(0,1)[0]),o.splice(0,0,new wr(wr.type.SINGLE))),0<s.indexOf(r)&&s.splice(0,0,new wr(wr.type.NONE));for(var a=0,u=this.x,l=0;l<o.length;l++)e=(n=o[l]).getPadding(l+a),t=n.getWidth(),u+=e,n.setX(u),u+=t,e+t===0&&a--;this.start_x=u,u=this.x+this.width;for(var c={left:0,right:0,paddingRight:0,paddingLeft:0},h=0,f=0;f<s.length;f++){h="barlines"===(n=s[f]).getCategory()?f:h,c.right=0,c.left=0,c.paddingRight=0,c.paddingLeft=0;var p=n.getLayoutMetrics();p?(0!==f&&(c.right=p.xMax||0,c.paddingRight=p.paddingRight||0),c.left=-p.xMin||0,c.paddingLeft=p.paddingLeft||0,f===s.length-1&&(c.paddingLeft=0)):(c.paddingRight=n.getPadding(f-h),0!==f&&(c.right=n.getWidth()),0===f&&(c.left=n.getWidth())),u-=c.paddingRight,u-=c.right,n.setX(u),u-=c.left,u-=c.paddingLeft}this.end_x=1===s.length?this.x+this.width:u,this.formatted=!0}},{key:"draw",value:function(){this.checkContext(),this.setRendered(),this.formatted||this.format();for(var t,e=this.options.num_lines,n=this.width,i=this.x,r=0;r<e;r++)t=this.getYForLine(r),this.applyStyle(),this.options.line_config[r].visible&&(this.context.beginPath(),this.context.moveTo(i,t),this.context.lineTo(i+n,t),this.context.stroke()),this.restoreStyle();for(var o=0;o<this.modifiers.length;o++)"function"==typeof this.modifiers[o].draw&&this.modifiers[o].draw(this,this.getModifierXShift(o));if(0<this.measure){this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.weight);var s=this.context.measureText(""+this.measure).width;t=this.getYForTopText(0)+3,this.context.fillText(""+this.measure,this.x-s/2,t),this.context.restore()}return this}},{key:"drawVertical",value:function(t,e){this.drawVerticalFixed(this.x+t,e)}},{key:"drawVerticalFixed",value:function(t,e){this.checkContext();var n=this.getYForLine(0),i=this.getYForLine(this.options.num_lines-1);e&&this.context.fillRect(t-3,n,1,i-n+1),this.context.fillRect(t,n,1,i-n+1)}},{key:"drawVerticalBar",value:function(t){this.drawVerticalBarFixed(this.x+t,!1)}},{key:"drawVerticalBarFixed",value:function(t){this.checkContext();var e=this.getYForLine(0),n=this.getYForLine(this.options.num_lines-1);this.context.fillRect(t,e,1,n-e+1)}},{key:"getConfigForLines",value:function(){return this.options.line_config}},{key:"setConfigForLine",value:function(t,e){if(t>=this.options.num_lines||t<0)throw new C.RERR("StaveConfigError","The line number must be within the range of the number of lines in the Stave.");if(void 0===e.visible)throw new C.RERR("StaveConfigError","The line configuration object is missing the 'visible' property.");if("boolean"!=typeof e.visible)throw new C.RERR("StaveConfigError","The line configuration objects 'visible' property must be true or false.");return this.options.line_config[t]=e,this}},{key:"setConfigForLines",value:function(t){if(t.length!==this.options.num_lines)throw new C.RERR("StaveConfigError","The length of the lines configuration array must match the number of lines in the Stave");for(var e in t)t[e]||(t[e]=this.options.line_config[e]),C.Merge(this.options.line_config[e],t[e]);return this.options.line_config=t,this}}]),Wo);function Wo(t,e,n,i){var r;!function(t){if(!(t instanceof Wo))throw new TypeError("Cannot call a class as a function")}(this),(r=function(t,e){return!e||"object"!==Fo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,jo(Wo).call(this))).setAttribute("type","Stave"),r.x=t,r.y=e,r.width=n,r.formatted=!1,r.start_x=t+5,r.end_x=t+n,r.modifiers=[],r.measure=0,r.clef="treble",r.font={family:"sans-serif",size:8,weight:""},r.options={vertical_bar_width:10,glyph_spacing_px:10,num_lines:5,fill_style:"#999999",left_bar:!0,right_bar:!0,spacing_between_lines_px:10,space_above_staff_ln:4,space_below_staff_ln:4,top_text_position:1},r.bounds={x:r.x,y:r.y,w:r.width,h:0},C.Merge(r.options,i),r.resetLines();var o=wr.type;return r.addModifier(new wr(r.options.left_bar?o.SINGLE:o.NONE)),r.addEndModifier(new wr(r.options.right_bar?o.SINGLE:o.NONE)),r}function Uo(t){return(Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ho(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Yo(t){return(Yo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zo(t,e){return(zo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xo=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zo(t,e)}(Ko,Go),Ho(Ko.prototype,[{key:"getYForGlyphs",value:function(){return this.getYForLine(2.5)}},{key:"addTabGlyph",value:function(){return this.addClef("tab"),this}}]),Ko);function Ko(t,e,n,i){var r;!function(t){if(!(t instanceof Ko))throw new TypeError("Cannot call a class as a function")}(this);var o={spacing_between_lines_px:13,num_lines:6,top_text_position:1};return C.Merge(o,i),(r=function(t,e){return!e||"object"!==Uo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Yo(Ko).call(this,t,e,n,o))).setAttribute("type","TabStave"),r}function qo(t){return(qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jo(t,e,n){return(Jo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qo(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Qo(t){return(Qo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function $o(t,e,n){return e&&Zo(t.prototype,e),n&&Zo(t,n),t}function ts(t,e){return(ts=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var es=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),ts(t,e)}(ns,ge),$o(ns,null,[{key:"CATEGORY",get:function(){return"tabnotes"}}]),$o(ns,[{key:"reset",value:function(){this.stave&&this.setStave(this.stave)}},{key:"getCategory",value:function(){return ns.CATEGORY}},{key:"setGhost",value:function(t){return this.ghost=t,this.updateWidth(),this}},{key:"hasStem",value:function(){return this.render_options.draw_stem}},{key:"getStemExtension",value:function(){var t=this.getGlyph();return null!=this.stem_extension_override?this.stem_extension_override:t?1===this.getStemDirection()?t.tabnote_stem_up_extension:t.tabnote_stem_down_extension:0}},{key:"addDot",value:function(){var t=new Ae;return this.dots+=1,this.addModifier(t,0)}},{key:"updateWidth",value:function(){var t=this;this.glyphs=[];for(var e=this.width=0;e<this.positions.length;++e){var n=this.positions[e].fret;this.ghost&&(n="("+n+")");var i=H.tabToGlyph(n,this.render_options.scale);this.glyphs.push(i),this.width=Math.max(i.getWidth(),this.width)}this.glyph.getWidth=function(){return t.width}}},{key:"setStave",value:function(n){var i,r=this;if(Jo(Qo(ns.prototype),"setStave",this).call(this,n),this.context=n.context,this.context){var o=this.context;this.width=0;var t=function(){var t=r.glyphs[i],e=""+t.text;"X"!==e.toUpperCase()&&(o.save(),o.setRawFont(r.render_options.font),t.width=o.measureText(e).width,o.restore(),t.getWidth=function(){return t.width}),r.width=Math.max(t.getWidth(),r.width)};for(i=0;i<this.glyphs.length;++i)t();this.glyph.getWidth=function(){return r.width}}var e=this.positions.map(function(t){var e=t.str;return n.getYForLine(e-1)});return this.setYs(e),this.stem&&this.stem.setYBounds(this.getStemY(),this.getStemY()),this}},{key:"getPositions",value:function(){return this.positions}},{key:"addToModifierContext",value:function(t){this.setModifierContext(t);for(var e=0;e<this.modifiers.length;++e)this.modifierContext.addModifier(this.modifiers[e]);return this.modifierContext.addModifier(this),this.preFormatted=!1,this}},{key:"getTieRightX",value:function(){var t=this.getAbsoluteX();return(t+=this.glyph.getWidth()/2)+(-this.width/2+this.width+2)}},{key:"getTieLeftX",value:function(){var t=this.getAbsoluteX();return(t+=this.glyph.getWidth()/2)-(this.width/2+2)}},{key:"getModifierStartXY",value:function(t,e){if(!this.preFormatted)throw new C.RERR("UnformattedNote","Can't call GetModifierStartXY on an unformatted note");if(0===this.ys.length)throw new C.RERR("NoYValues","No Y-Values calculated for this note.");var n=0;return t===Pe.Position.LEFT?n=-2:t===Pe.Position.RIGHT?n=this.width+2:t!==Pe.Position.BELOW&&t!==Pe.Position.ABOVE||(n=this.glyph.getWidth()/2),{x:this.getAbsoluteX()+n,y:this.ys[e]}}},{key:"getLineForRest",value:function(){return this.positions[0].str}},{key:"preFormat",value:function(){this.preFormatted||(this.modifierContext&&this.modifierContext.preFormat(),this.setPreFormatted(!0))}},{key:"getStemX",value:function(){return this.getCenterGlyphX()}},{key:"getStemY",value:function(){var t=this.stave.getNumLines()-.5,e=pt.UP===this.stem_direction?-.5:t;return this.stave.getYForLine(e)}},{key:"getStemExtents",value:function(){return this.stem.getExtents()}},{key:"drawFlag",value:function(){var t=this.beam,e=this.glyph,n=this.context,i=this.stem,r=this.stem_direction,o=this.render_options,s=o.draw_stem,a=o.glyph_font_scale,u=null==t&&s;if(e.flag&&u){var l=this.getStemX()+1,c=this.getStemY()-i.getHeight(),h=r===pt.DOWN?e.code_flag_downstem:e.code_flag_upstem;G.renderGlyph(n,l,c,a,h)}}},{key:"drawModifiers",value:function(){var e=this;this.modifiers.forEach(function(t){"dots"===t.getCategory()&&!e.render_options.draw_dots||(t.setContext(e.context),t.draw())})}},{key:"drawStemThrough",value:function(){var a,t,u,l,i,r,c,h,o,e=this.getStemX(),n=this.getStemY(),s=this.context,f=this.render_options.draw_stem_through_stave;if(this.render_options.draw_stem&&f){var p=(a=n,t=function(t,e){for(var n=[],i=[],r=1;r<=t;r++)-1<e.indexOf(r)?(n.push(i),i=[]):i.push(r);return 0<i.length&&n.push(i),n}(this.stave.getNumLines(),this.positions.map(function(t){return t.str})),u=this.getStave(),l=this.getStemDirection(),i=1!==l,r=-1!==l,c=u.getSpacingBetweenLines(),h=u.getNumLines(),o=[],t.forEach(function(t){var e=-1<t.indexOf(h),n=-1<t.indexOf(1);if(!(i&&n||r&&e)){1===t.length&&t.push(t[0]);var s=[];t.forEach(function(t,e,n){var i=1===t,r=t===h,o=u.getYForLine(t-1);0!==e||i?e!==n.length-1||r||(o+=c/2-1):o-=c/2-1,s.push(o),1===l&&i?s.push(a-2):-1===l&&r&&s.push(a+2)}),o.push(s.sort(function(t,e){return t-e}))}}),o);s.save(),s.setLineWidth(pt.WIDTH),p.forEach(function(t){0!==t.length&&(s.beginPath(),s.moveTo(e,t[0]),s.lineTo(e,t[t.length-1]),s.stroke(),s.closePath())}),s.restore()}}},{key:"drawPositions",value:function(){for(var t=this.context,e=this.getAbsoluteX(),n=this.ys,i=0;i<this.positions.length;++i){var r=n[i]+this.render_options.y_shift,o=this.glyphs[i],s=e+this.glyph.getWidth()/2-o.getWidth()/2;if(t.clearRect(s-2,r-3,o.getWidth()+4,6),o.code)G.renderGlyph(t,s,r,this.render_options.glyph_font_scale*this.render_options.scale,o.code);else{t.save(),t.setRawFont(this.render_options.font);var a=o.text.toString();t.fillText(a,s,r+5*this.render_options.scale),t.restore()}}}},{key:"draw",value:function(){if(this.checkContext(),!this.stave)throw new C.RERR("NoStave","Can't draw without a stave.");if(0===this.ys.length)throw new C.RERR("NoYValues","Can't draw note without Y values.");this.setRendered();var t=null==this.beam&&this.render_options.draw_stem;this.drawPositions(),this.drawStemThrough();var e=this.getStemX();this.stem.setNoteHeadXBounds(e,e),t&&(this.context.openGroup("stem",null,{pointerBBox:!0}),this.stem.setContext(this.context).draw(),this.context.closeGroup()),this.drawFlag(),this.drawModifiers()}}]),ns);function ns(t,e){var n;if(function(t){if(!(t instanceof ns))throw new TypeError("Cannot call a class as a function")}(this),(n=function(t,e){return!e||"object"!==qo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Qo(ns).call(this,t))).setAttribute("type","TabNote"),n.ghost=!1,n.positions=t.positions,C.Merge(n.render_options,{glyph_font_scale:H.DEFAULT_TABLATURE_FONT_SCALE,draw_stem:e,draw_dots:e,draw_stem_through_stave:!1,y_shift:0,scale:1,font:"10pt Arial"}),n.glyph=H.durationToGlyph(n.duration,n.noteType),!n.glyph)throw new C.RuntimeError("BadArguments","Invalid note initialization data (No glyph found): ".concat(JSON.stringify(t)));return n.buildStem(),t.stem_direction?n.setStemDirection(t.stem_direction):n.setStemDirection(pt.UP),n.ghost=!1,n.updateWidth(),n}function is(t){return(is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rs(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function os(t){return(os=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ss(t,e){return(ss=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var as,us=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ss(t,e)}(ls,E),rs(ls.prototype,[{key:"setLine",value:function(t){return this.line=t,this}},{key:"setHarsh",value:function(t){return this.render_options.harsh=t,this}},{key:"draw",value:function(){var t=this.context;this.setRendered();var e=this.start?this.start.getStave().getYForTopText(this.line):this.stop.getStave().getYForTopText(this.line),n=this.start?this.start.getAbsoluteX():this.stop.getStave().getTieStartX(),i=this.stop?this.stop.getAbsoluteX()-this.stop.getWidth()-5:this.start.getStave().getTieEndX()-10;this.render_options.vibrato_width=i-n,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];us.DEBUG&&C.L("Vex.Flow.VibratoBracket",e)}("Rendering VibratoBracket: start_x:",n,"stop_x:",i,"y:",e),Zi.renderVibrato(t,n,e,this.render_options)}}]),ls);function ls(t){var e;return function(t){if(!(t instanceof ls))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==is(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,os(ls).call(this))).setAttribute("type","VibratoBracket"),e.start=t.start,e.stop=t.stop,e.line=1,e.render_options={harsh:!1,wave_height:6,wave_width:4,wave_girth:2},e}function cs(t){return(cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hs(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function fs(t){return(fs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ps(t,e){return(ps=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ds=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ps(t,e)}(bs,E),hs(bs.prototype,[{key:"getXs",value:function(){return this.xs}},{key:"setStave",value:function(t){return this.stave=t,this}},{key:"getStave",value:function(){return this.stave}},{key:"drawLine",value:function(t,e,n,i){var r=this.stave.getYForLine(this.render_options.line),o=.1*(n-e);e+=o,n-=o;var s=this.render_options.serif_thickness,a=.25*i;isNaN(this.render_options.line_thickness)||(a=.5*this.render_options.line_thickness),t.save(),t.beginPath(),t.moveTo(e,r-i),t.lineTo(e+s,r-i),t.lineTo(e+s,r-a),t.lineTo(n-s,r-a),t.lineTo(n-s,r-i),t.lineTo(n,r-i),t.lineTo(n,r+i),t.lineTo(n-s,r+i),t.lineTo(n-s,r+a),t.lineTo(e+s,r+a),t.lineTo(e+s,r+i),t.lineTo(e,r+i),t.closePath(),t.fill()}},{key:"drawSymbols",value:function(t,e,n,i){var r=Math.floor(this.number_of_measures/4),o=this.number_of_measures%4,s=Math.floor(o/2),a=o%2,u=function(){if(!as){var t=new fe({duration:"w",note_type:"r"});as={glyph_font_scale:t.render_options.glyph_font_scale,glyph_code:t.glyph_code,width:t.getWidth()}}return as}(),l=u.width*(this.render_options.semibrave_rest_glyph_scale/u.glyph_font_scale),c={2:{width:.5*l,height:i},1:{width:l}},h=1.35*l;isNaN(this.render_options.symbol_spacing)||(h=this.render_options.symbol_spacing);var f=e+.5*(n-e)-.5*(r*c[2].width+s*c[2].width+a*c[1].width+(r+s+a-1)*h),p=this.stave.getYForLine(this.render_options.line-1),d=this.stave.getYForLine(this.render_options.line),b=this.stave.getYForLine(this.render_options.line+1);t.save(),t.setStrokeStyle("none"),t.setLineWidth(0);for(var y=0;y<r;++y)t.fillRect(f,d-c[2].height,c[2].width,c[2].height),t.fillRect(f,b-c[2].height,c[2].width,c[2].height),f+=c[2].width+h;for(var m=0;m<s;++m)t.fillRect(f,d-c[2].height,c[2].width,c[2].height),f+=c[2].width+h;for(var g=0;g<a;++g)G.renderGlyph(t,f,p,this.render_options.semibrave_rest_glyph_scale,u.glyph_code),f+=c[1].width+h;t.restore()}},{key:"draw",value:function(){this.checkContext(),this.setRendered();var t=this.context,e=this.stave,n=this.render_options.spacing_between_lines_px,i=e.getNoteStartX(),r=e.getNoteEndX(),o=e.getModifiers(yr.Position.BEGIN);if(1===o.length&&"barlines"===o[0].getCategory()&&(i-=o[0].getWidth()),isNaN(this.render_options.padding_left)||(i=e.getX()+this.render_options.padding_left),isNaN(this.render_options.padding_right)||(r=e.getX()+e.getWidth()-this.render_options.padding_right),this.xs.left=i,this.xs.right=r,this.render_options.use_symbols?this.drawSymbols(t,i,r,n):this.drawLine(t,i,r,n),this.render_options.show_number){var s="/"+this.number_of_measures,a=new ko(null,void 0,!1);a.point=this.render_options.number_glyph_point,a.setTimeSig(s),a.setStave(e),a.x=i+.5*(r-i)-.5*a.timeSig.glyph.getMetrics().width,a.bottomLine=this.render_options.number_line,a.setContext(t).draw()}}}]),bs);function bs(t,e){var n;return function(t){if(!(t instanceof bs))throw new TypeError("Cannot call a class as a function")}(this),(n=function(t,e){return!e||"object"!==cs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,fs(bs).call(this))).setAttribute("type","MultiMeasureRest"),n.render_options={show_number:!0,number_line:-.5,number_glyph_point:40,padding_left:void 0,padding_right:void 0,line:2,spacing_between_lines_px:10,line_thickness:void 0,serif_thickness:2,use_symbols:!1,symbol_spacing:void 0,semibrave_rest_glyph_scale:H.DEFAULT_NOTATION_FONT_SCALE},C.Merge(n.render_options,e),n.number_of_measures=t,n.xs={left:NaN,right:NaN},n}function ys(t){return(ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ms(t,e,n){return(ms="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gs(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function gs(t){return(gs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vs(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _s(t,e,n){return e&&vs(t.prototype,e),n&&vs(t,n),t}function Ss(t,e){return(Ss=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xs=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ss(t,e)}(ws,re),_s(ws,null,[{key:"CATEGORY",get:function(){return"clefnote"}}]),_s(ws,[{key:"setType",value:function(t,e,n){return this.type=t,this.clef_obj=new ho(t,e,n),this.clef=this.clef_obj.clef,this.glyph=new G(this.clef.code,this.clef.point),this.setWidth(this.glyph.getMetrics().width),this}},{key:"getClef",value:function(){return this.clef}},{key:"setContext",value:function(t){return this.context=t,this.glyph.setContext(this.context),this}},{key:"getBoundingBox",value:function(){return ms(gs(ws.prototype),"getBoundingBox",this).call(this)}},{key:"addToModifierContext",value:function(){return this}},{key:"getCategory",value:function(){return ws.CATEGORY}},{key:"preFormat",value:function(){return this.setPreFormatted(!0),this}},{key:"draw",value:function(){if(!this.stave)throw new C.RERR("NoStave","Can't draw without a stave.");this.glyph.getContext()||this.glyph.setContext(this.context),this.setRendered();var t=this.getAbsoluteX();if(this.glyph.setStave(this.stave),this.glyph.setYShift(this.stave.getYForLine(this.clef.line)-this.stave.getYForGlyphs()),this.glyph.renderToStave(t),void 0!==this.clef_obj.annotation){var e=new G(this.clef_obj.annotation.code,this.clef_obj.annotation.point);e.getContext()||e.setContext(this.context),e.setStave(this.stave),e.setYShift(this.stave.getYForLine(this.clef_obj.annotation.line)-this.stave.getYForGlyphs()),e.setXShift(this.clef_obj.annotation.x_shift),e.renderToStave(t)}}}]),ws);function ws(t,e,n){var i;return function(t){if(!(t instanceof ws))throw new TypeError("Cannot call a class as a function")}(this),(i=function(t,e){return!e||"object"!==ys(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,gs(ws).call(this,{duration:"b"}))).setAttribute("type","ClefNote"),i.setType(t,e,n),i.ignore_ticks=!0,i}function Es(t){return(Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ps(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ts(t,e,n){return(Ts="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ks(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ks(t){return(ks=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Os(t,e){return(Os=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ms=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Os(t,e)}(Rs,re),Ps(Rs.prototype,[{key:"getBoundingBox",value:function(){return Ts(ks(Rs.prototype),"getBoundingBox",this).call(this)}},{key:"addToModifierContext",value:function(){return this}},{key:"preFormat",value:function(){return this.setPreFormatted(!0),this.keySignature.setStave(this.stave),this.keySignature.format(),this.setWidth(this.keySignature.width),this}},{key:"draw",value:function(){this.stave.checkContext(),this.setRendered(),this.keySignature.x=this.getAbsoluteX(),this.keySignature.setContext(this.context),this.keySignature.draw()}}]),Rs);function Rs(t,e,n){var i;return function(t){if(!(t instanceof Rs))throw new TypeError("Cannot call a class as a function")}(this),(i=function(t,e){return!e||"object"!==Es(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ks(Rs).call(this,{duration:"b"}))).setAttribute("type","KeySigNote"),i.keySignature=new vo(t,e,n),i.ignore_ticks=!0,i}function Ls(t){return(Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function As(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Cs(t,e,n){return(Cs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Is(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Is(t){return(Is=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ns(t,e){return(Ns=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fs=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ns(t,e)}(Bs,re),As(Bs.prototype,[{key:"getBoundingBox",value:function(){return Cs(Is(Bs.prototype),"getBoundingBox",this).call(this)}},{key:"addToModifierContext",value:function(){return this}},{key:"preFormat",value:function(){return this.setPreFormatted(!0),this}},{key:"draw",value:function(){this.stave.checkContext(),this.setRendered(),this.timeSig.glyph.getContext()||this.timeSig.glyph.setContext(this.context),this.timeSig.glyph.setStave(this.stave),this.timeSig.glyph.setYShift(this.stave.getYForLine(this.timeSig.line)-this.stave.getYForGlyphs()),this.timeSig.glyph.renderToStave(this.getAbsoluteX())}}]),Bs);function Bs(t,e){var n;!function(t){if(!(t instanceof Bs))throw new TypeError("Cannot call a class as a function")}(this),(n=function(t,e){return!e||"object"!==Ls(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Is(Bs).call(this,{duration:"b"}))).setAttribute("type","TimeSigNote");var i=new ko(t,e);return n.timeSig=i.getTimeSig(),n.setWidth(n.timeSig.glyph.getMetrics().width),n.ignore_ticks=!0,n}function Ds(t){return(Ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function js(t){return(js=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vs(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Gs(t,e,n){return e&&Vs(t.prototype,e),n&&Vs(t,n),t}function Ws(t,e){return(Ws=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Us=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Ws(t,e)}(Hs,An),Gs(Hs,null,[{key:"createSlideUp",value:function(t){return new Hs(t,Hs.SLIDE_UP)}},{key:"createSlideDown",value:function(t){return new Hs(t,Hs.SLIDE_DOWN)}},{key:"SLIDE_UP",get:function(){return 1}},{key:"SLIDE_DOWN",get:function(){return-1}}]),Gs(Hs,[{key:"renderTie",value:function(t){if(0===t.first_ys.length||0===t.last_ys.length)throw new C.RERR("BadArguments","No Y-values to render");var e=this.context,n=t.first_x_px,i=t.first_ys,r=t.last_x_px,o=this.slide_direction;if(o!==Hs.SLIDE_UP&&o!==Hs.SLIDE_DOWN)throw new C.RERR("BadSlide","Invalid slide direction");for(var s=0;s<this.first_indices.length;++s){var a=i[this.first_indices[s]]+this.render_options.y_shift;if(isNaN(a))throw new C.RERR("BadArguments","Bad indices for slide rendering.");e.beginPath(),e.moveTo(n,a+3*o),e.lineTo(r,a-3*o),e.closePath(),e.stroke()}this.setRendered()}}]),Hs);function Hs(t,e){var n;if(function(t){if(!(t instanceof Hs))throw new TypeError("Cannot call a class as a function")}(this),(n=function(t,e){return!e||"object"!==Ds(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,js(Hs).call(this,t,"sl."))).setAttribute("type","TabSlide"),!e){var i=t.first_note.getPositions()[0].fret,r=t.last_note.getPositions()[0].fret;e=parseInt(i,10)>parseInt(r,10)?Hs.SLIDE_DOWN:Hs.SLIDE_UP}return n.slide_direction=e,n.render_options.cp1=11,n.render_options.cp2=14,n.render_options.y_shift=.5,n.setFont({font:"Times",size:10,style:"bold italic"}),n.setNotes(t),n}function Ys(t){return(Ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zs(){return(zs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function Xs(t,e,n){return(Xs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ks(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Ks(t){return(Ks=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qs(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Js(t,e,n){return e&&qs(t.prototype,e),n&&qs(t,n),t}function Qs(t,e){return(Qs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zs=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qs(t,e)}($s,We),Js($s,null,[{key:"CATEGORY",get:function(){return"gracenotes"}},{key:"LEDGER_LINE_OFFSET",get:function(){return 2}},{key:"SCALE",get:function(){return.66}}]),Js($s,[{key:"getStemExtension",value:function(){if(null!=this.stem_extension_override)return this.stem_extension_override;var t=this.getGlyph();if(t){var e=Xs(Ks($s.prototype),"getStemExtension",this).call(this);if(t.stem){var n=this.getStaveNoteScale();e=(pt.HEIGHT+e)*n-pt.HEIGHT}return e}return 0}},{key:"getCategory",value:function(){return $s.CATEGORY}},{key:"getStaveNoteScale",value:function(){return this.render_options.glyph_font_scale/H.DEFAULT_NOTATION_FONT_SCALE}},{key:"draw",value:function(){Xs(Ks($s.prototype),"draw",this).call(this),this.setRendered();var t=this.stem;if(this.slash&&t){var e=this.getStaveNoteScale(),n=e/.66,i=void 0,r=this.beam;if(r)r.postFormatted||r.postFormat(),i=this.calcBeamedNotesSlashBBox(8*n,8*n,{stem:6*n,beam:5*n});else{var o=this.getStemDirection(),s=this.getNoteHeadBounds(),a=t.getHeight(),u=this.getAbsoluteX(),l=o===H.Stem.DOWN?s.y_top-a:s.y_bottom-a,c=o===H.Stem.DOWN?this.glyph.stem_down_extension:this.glyph.stem_up_extension,h=H.STEM_HEIGHT;h-=h/2.8,l+=(h+=c)*e*o;var f=o===H.Stem.UP?{x1:1,y1:0,x2:13,y2:-9}:{x1:-4,y1:1,x2:13,y2:9};i={x1:u+=f.x1*n,y1:l+=f.y1*n,x2:u+f.x2*n,y2:l+f.y2*n}}var p=this.context;p.save(),p.setLineWidth(1*n),p.beginPath(),p.moveTo(i.x1,i.y1),p.lineTo(i.x2,i.y2),p.closePath(),p.stroke(),p.restore()}}},{key:"calcBeamedNotesSlashBBox",value:function(t,e,n){var i=this.beam,r=i.slope,o=i.notes[i.notes.length-1]===this?-1:1,s=Math.atan(r*o),a=Math.cos(s)*e,u=Math.sin(s)*e;t*=this.getStemDirection();var l=Math.atan((u-t)/a),c=Math.cos(l)*n.stem*o,h=Math.sin(l)*n.stem,f=Math.cos(l)*n.beam*o,p=Math.sin(l)*n.beam,d=this.getStemX(),b=i.notes[0].getStemX(),y=this.beam.getBeamYToDraw()+(d-b)*r;return{x1:d-c,y1:y+t-h,x2:d+a*o+f,y2:y+u+p}}}]),$s);function $s(t){var e;return function(t){if(!(t instanceof $s))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==Ys(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ks($s).call(this,zs(t,{glyph_font_scale:H.DEFAULT_NOTATION_FONT_SCALE*$s.SCALE,stroke_px:$s.LEDGER_LINE_OFFSET})))).setAttribute("type","GraceNote"),e.slash=t.slash,e.slur=!0,e.buildNoteHeads(),e.width=3,e}function ta(t){return(ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ea(t,e,n){return(ea="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=na(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function na(t){return(na=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ia(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ra(t,e,n){return e&&ia(t.prototype,e),n&&ia(t,n),t}function oa(t,e){return(oa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var sa=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oa(t,e)}(aa,es),ra(aa,null,[{key:"CATEGORY",get:function(){return"gracetabnotes"}}]),ra(aa,[{key:"getCategory",value:function(){return aa.CATEGORY}},{key:"draw",value:function(){ea(na(aa.prototype),"draw",this).call(this),this.setRendered()}}]),aa);function aa(t){var e;return function(t){if(!(t instanceof aa))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==ta(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,na(aa).call(this,t,!1))).setAttribute("type","GraceTabNote"),C.Merge(e.render_options,{y_shift:.3,scale:.6,font:"7.5pt Arial"}),e.updateWidth(),e}function ua(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function la(t,e,n){return e&&ua(t.prototype,e),n&&ua(t,n),t}var ca=(la(ha,null,[{key:"names",get:function(){return{standard:"E/5,B/4,G/4,D/4,A/3,E/3",dagdad:"D/5,A/4,G/4,D/4,A/3,D/3",dropd:"E/5,B/4,G/4,D/4,A/3,D/3",eb:"Eb/5,Bb/4,Gb/4,Db/4,Ab/3,Db/3",standardBanjo:"D/5,B/4,G/4,D/4,G/5"}}}]),la(ha,[{key:"noteToInteger",value:function(t){return H.keyProperties(t).int_value}},{key:"setTuning",value:function(t){ha.names[t]&&(t=ha.names[t]),this.tuningString=t,this.tuningValues=[],this.numStrings=0;var e=t.split(/\s*,\s*/);if(0===e.length)throw new C.RERR("BadArguments","Invalid tuning string: "+t);this.numStrings=e.length;for(var n=0;n<this.numStrings;++n)this.tuningValues[n]=this.noteToInteger(e[n])}},{key:"getValueForString",value:function(t){var e=parseInt(t,10);if(e<1||e>this.numStrings)throw new C.RERR("BadArguments","String number must be between 1 and ".concat(this.numStrings,":").concat(t));return this.tuningValues[e-1]}},{key:"getValueForFret",value:function(t,e){var n=this.getValueForString(e),i=parseInt(t,10);if(i<0)throw new C.RERR("BadArguments","Fret number must be 0 or higher: "+t);return n+i}},{key:"getNoteForFret",value:function(t,e){var n=this.getValueForFret(t,e),i=Math.floor(n/12),r=n%12;return H.integerToNote(r)+"/"+i}}]),ha);function ha(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"E/5,B/4,G/4,D/4,A/3,E/3,B/2,E/2";!function(t){if(!(t instanceof ha))throw new TypeError("Cannot call a class as a function")}(this),this.setTuning(t)}function fa(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var pa=(fa(da.prototype,[{key:"setKey",value:function(t){return this.key=t,this.reset(),this}},{key:"getKey",value:function(){return this.key}},{key:"reset",value:function(){if(this.keyParts=this.music.getKeyParts(this.key),this.keyString=this.keyParts.root,this.keyParts.accidental&&(this.keyString+=this.keyParts.accidental),!tn.scaleTypes[this.keyParts.type])throw new C.RERR("BadArguments","Unsupported key type: ".concat(this.key));this.scale=this.music.getScaleTones(this.music.getNoteValue(this.keyString),tn.scaleTypes[this.keyParts.type]),this.scaleMap={},this.scaleMapByValue={},this.originalScaleMapByValue={};for(var t=tn.root_indices[this.keyParts.root],e=0;e<tn.roots.length;++e){var n=(t+e)%tn.roots.length,i=tn.roots[n],r=this.music.getRelativeNoteName(i,this.scale[e]);this.scaleMap[i]=r,this.scaleMapByValue[this.scale[e]]=r,this.originalScaleMapByValue[this.scale[e]]=r}return this}},{key:"getAccidental",value:function(t){var e=this.music.getKeyParts(t).root,n=this.music.getNoteParts(this.scaleMap[e]);return{note:this.scaleMap[e],accidental:n.accidental}}},{key:"selectNote",value:function(t){t=t.toLowerCase();var e=this.music.getNoteParts(t),n=this.scaleMap[e.root],i=this.music.getNoteParts(n);if(n===t)return{note:n,accidental:e.accidental,change:!1};var r=this.scaleMapByValue[this.music.getNoteValue(t)];if(null!=r)return{note:r,accidental:this.music.getNoteParts(r).accidental,change:!1};var o=this.originalScaleMapByValue[this.music.getNoteValue(t)];return null!=o?(this.scaleMap[i.root]=o,delete this.scaleMapByValue[this.music.getNoteValue(n)],{note:this.scaleMapByValue[this.music.getNoteValue(t)]=o,accidental:this.music.getNoteParts(o).accidental,change:!0}):i.root===t?(delete this.scaleMapByValue[this.music.getNoteValue(this.scaleMap[e.root])],this.scaleMapByValue[this.music.getNoteValue(i.root)]=i.root,this.scaleMap[i.root]=i.root,{note:i.root,accidental:null,change:!0}):(delete this.scaleMapByValue[this.music.getNoteValue(this.scaleMap[e.root])],this.scaleMapByValue[this.music.getNoteValue(t)]=t,delete this.scaleMap[i.root],{note:this.scaleMap[i.root]=t,accidental:e.accidental,change:!0})}}]),da);function da(t){!function(t){if(!(t instanceof da))throw new TypeError("Cannot call a class as a function")}(this),this.music=new tn,this.setKey(t)}function ba(t){return(ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ya(t){return(ya=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ma(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ga(t,e,n){return e&&ma(t.prototype,e),n&&ma(t,n),t}function va(t,e){return(va=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&va(t,e)}(Sa,E),ga(Sa,null,[{key:"FormatByTicksAndDraw",value:function(t,e,n,i,r,o){var s=e.pixelsPerTick;if(null==s)throw new C.RuntimeError("BadArguments","A valid Formatter must be provide to draw offsets by ticks.");var a=s*o.left_shift_ticks,u=s*o.right_shift_ticks,l={height:o.height,y_shift:o.y_shift,left_shift_px:a,right_shift_px:u};new Sa({first_note:n.first_note,last_note:n.last_note},i).setContext(t).setRenderOptions(l).setPosition(r).draw()}},{key:"type",get:function(){return{CRESC:1,DECRESC:2}}}]),ga(Sa,[{key:"setPosition",value:function(t){return t!==Pe.Position.ABOVE&&t!==Pe.Position.BELOW||(this.position=t),this}},{key:"setRenderOptions",value:function(t){return null!=t.height&&null!=t.y_shift&&null!=t.left_shift_px&&null!=t.right_shift_px&&(this.render_options=t),this}},{key:"setNotes",value:function(t){if(!t.first_note&&!t.last_note)throw new C.RuntimeError("BadArguments","Hairpin needs to have either first_note or last_note set.");return this.first_note=t.first_note,this.last_note=t.last_note,this}},{key:"renderHairpin",value:function(t){var e=this.checkContext(),n=this.render_options.y_shift+20,i=t.first_y;this.position===Pe.Position.ABOVE&&(n=30-n,i=t.first_y-t.staff_height);var r=this.render_options.left_shift_px,o=this.render_options.right_shift_px;switch(e.beginPath(),this.hairpin){case Sa.type.CRESC:e.moveTo(t.last_x+o,i+n),e.lineTo(t.first_x+r,i+this.render_options.height/2+n),e.lineTo(t.last_x+o,i+this.render_options.height+n);break;case Sa.type.DECRESC:e.moveTo(t.first_x+r,i+n),e.lineTo(t.last_x+o,i+this.render_options.height/2+n),e.lineTo(t.first_x+r,i+this.render_options.height+n)}e.stroke(),e.closePath()}},{key:"draw",value:function(){this.checkContext(),this.setRendered();var t=this.first_note,e=this.last_note,n=t.getModifierStartXY(this.position,0),i=e.getModifierStartXY(this.position,0);return this.renderHairpin({first_x:n.x,last_x:i.x,first_y:t.getStave().y+t.getStave().height,last_y:e.getStave().y+e.getStave().height,staff_height:t.getStave().height}),!0}}]),Sa);function Sa(t,e){var n;return function(t){if(!(t instanceof Sa))throw new TypeError("Cannot call a class as a function")}(this),(n=function(t,e){return!e||"object"!==ba(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ya(Sa).call(this))).setAttribute("type","StaveHairpin"),n.notes=t,n.hairpin=e,n.position=Pe.Position.BELOW,n.render_options={height:10,y_shift:0,left_shift_px:0,right_shift_px:0},n.setNotes(t),n}function xa(t){return(xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wa(t){return(wa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ea(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Pa(t,e,n){return e&&Ea(t.prototype,e),n&&Ea(t,n),t}function Ta(t,e){return(Ta=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ka=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ta(t,e)}(Oa,E),Pa(Oa,null,[{key:"Position",get:function(){return{NEAR_HEAD:1,NEAR_TOP:2}}},{key:"PositionString",get:function(){return{nearHead:Oa.Position.NEAR_HEAD,nearTop:Oa.Position.NEAR_TOP}}}]),Pa(Oa,[{key:"setNotes",value:function(t,e){if(!t&&!e)throw new C.RuntimeError("BadArguments","Curve needs to have either first_note or last_note set.");return this.from=t,this.to=e,this}},{key:"isPartial",value:function(){return!this.from||!this.to}},{key:"renderCurve",value:function(t){var e=this.context,n=this.render_options.cps,i=this.render_options.x_shift,r=this.render_options.y_shift*t.direction,o=t.first_x+i,s=t.first_y+r,a=t.last_x-i,u=t.last_y+r,l=this.render_options.thickness,c=(a-o)/(n.length+2);e.beginPath(),e.moveTo(o,s),e.bezierCurveTo(o+c+n[0].x,s+n[0].y*t.direction,a-c+n[1].x,u+n[1].y*t.direction,a,u),e.bezierCurveTo(a-c+n[1].x,u+(n[1].y+l)*t.direction,o+c+n[0].x,s+(n[0].y+l)*t.direction,o,s),e.stroke(),e.closePath(),e.fill()}},{key:"draw",value:function(){this.checkContext(),this.setRendered();var t,e,n,i,r,o=this.from,s=this.to,a="baseY",u="baseY";function l(t){return"string"==typeof t?Oa.PositionString[t]:t}var c=l(this.render_options.position),h=l(this.render_options.position_end);return c===Oa.Position.NEAR_TOP&&(u=a="topY"),h===Oa.Position.NEAR_HEAD?u="baseY":h===Oa.Position.NEAR_TOP&&(u="topY"),n=o?(t=o.getTieRightX(),r=o.getStemDirection(),o.getStemExtents()[a]):(t=s.getStave().getTieStartX(),s.getStemExtents()[a]),i=s?(e=s.getTieLeftX(),r=s.getStemDirection(),s.getStemExtents()[u]):(e=o.getStave().getTieEndX(),o.getStemExtents()[u]),this.renderCurve({first_x:t,last_x:e,first_y:n,last_y:i,direction:r*(!0===this.render_options.invert?-1:1)}),!0}}]),Oa);function Oa(t,e,n){var i;return function(t){if(!(t instanceof Oa))throw new TypeError("Cannot call a class as a function")}(this),(i=function(t,e){return!e||"object"!==xa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,wa(Oa).call(this))).setAttribute("type","Curve"),i.render_options={spacing:2,thickness:2,x_shift:0,y_shift:10,position:Oa.Position.NEAR_HEAD,position_end:Oa.Position.NEAR_HEAD,invert:!1,cps:[{x:0,y:10},{x:0,y:10}]},C.Merge(i.render_options,n),i.setNotes(t,e),i}function Ma(t){return(Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ra(t){return(Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function La(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Aa(t,e,n){return e&&La(t.prototype,e),n&&La(t,n),t}function Ca(t,e){return(Ca=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ia(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Na.DEBUG&&C.L("Vex.Flow.TextDynamics",e)}var Na=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ca(t,e)}(Fa,re),Aa(Fa,null,[{key:"GLYPHS",get:function(){return{f:{code:"vba",width:12},p:{code:"vbf",width:14},m:{code:"v62",width:17},s:{code:"v4a",width:10},z:{code:"v80",width:12},r:{code:"vb1",width:12}}}}]),Aa(Fa,[{key:"setLine",value:function(t){return this.line=t,this}},{key:"preFormat",value:function(){var r=this,o=0;return this.sequence.split("").forEach(function(t){var e=Fa.GLYPHS[t];if(!e)throw new C.RERR("Invalid dynamics character: "+t);var n=r.render_options.glyph_font_size,i=new G(e.code,n);r.glyphs.push(i),o+=e.width}),this.setWidth(o),this.preFormatted=!0,this}},{key:"draw",value:function(){var i=this;this.setRendered();var t=this.getAbsoluteX(),r=this.stave.getYForLine(this.line+-3);Ia("Rendering Dynamics: ",this.sequence);var o=t;this.glyphs.forEach(function(t,e){var n=i.sequence[e];t.render(i.context,o,r),o+=Fa.GLYPHS[n].width})}}]),Fa);function Fa(t){var e;return function(t){if(!(t instanceof Fa))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==Ma(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ra(Fa).call(this,t))).setAttribute("type","TextDynamics"),e.sequence=t.text.toLowerCase(),e.line=t.line||0,e.glyphs=[],C.Merge(e.render_options,{glyph_font_size:40}),Ia("New Dynamics Text: ",e.sequence),e}function Ba(t){return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Da(t){return(Da=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ja(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Va(t,e,n){return e&&ja(t.prototype,e),n&&ja(t,n),t}function Ga(t,e){return(Ga=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Wa(t,e,n,i,r,o,s){t.beginPath(),t.moveTo(e,n),t.lineTo(i,r),t.lineTo(o,s),t.lineTo(e,n),t.closePath(),t.fill()}var Ua=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ga(t,e)}(Ha,E),Va(Ha,null,[{key:"TextVerticalPosition",get:function(){return{TOP:1,BOTTOM:2}}},{key:"TextJustification",get:function(){return{LEFT:1,CENTER:2,RIGHT:3}}}]),Va(Ha,[{key:"setFont",value:function(t){return this.font=t,this}},{key:"setText",value:function(t){return this.text=t,this}},{key:"setNotes",value:function(t){if(!t.first_note&&!t.last_note)throw new C.RuntimeError("BadArguments","Notes needs to have either first_note or last_note set.");if(t.first_indices||(t.first_indices=[0]),t.last_indices||(t.last_indices=[0]),t.first_indices.length!==t.last_indices.length)throw new C.RuntimeError("BadArguments","Connected notes must have similar index sizes");return this.first_note=t.first_note,this.first_indices=t.first_indices,this.last_note=t.last_note,this.last_indices=t.last_indices,this}},{key:"applyLineStyle",value:function(){var t=this.checkContext(),e=this.render_options;e.line_dash&&t.setLineDash(e.line_dash),e.line_width&&t.setLineWidth(e.line_width),e.rounded_end?t.setLineCap("round"):t.setLineCap("square")}},{key:"applyFontStyle",value:function(){var t=this.checkContext();this.font&&t.setFont(this.font.family,this.font.size,this.font.weight),this.render_options.color&&(t.setStrokeStyle(this.render_options.color),t.setFillStyle(this.render_options.color))}},{key:"draw",value:function(){var o=this,s=this.checkContext();this.setRendered();var a,u,l=this.first_note,c=this.last_note,h=this.render_options;s.save(),this.applyLineStyle(),this.first_indices.forEach(function(t,e){var n=o.last_indices[e];a=l.getModifierStartXY(2,t),u=c.getModifierStartXY(1,n);var i=a.y>u.y;a.x+=l.getMetrics().modRightPx+h.padding_left,u.x-=c.getMetrics().modLeftPx+h.padding_right;var r=l.getGlyph().getWidth();l.getKeyProps()[t].displaced&&1===l.getStemDirection()&&(a.x+=r+h.padding_left),c.getKeyProps()[n].displaced&&-1===c.getStemDirection()&&(u.x-=r+h.padding_right),a.y+=i?-3:1,u.y+=i?2:0,function(t,e,n,i){var r,o,s,a,u=i.draw_start_arrow&&i.draw_end_arrow,l=e.x,c=e.y,h=n.x,f=n.y,p=Math.sqrt((h-l)*(h-l)+(f-c)*(f-c)),d=(p-i.arrowhead_length/3)/p;o=i.draw_end_arrow||u?(r=Math.round(l+(h-l)*d),Math.round(c+(f-c)*d)):(r=h,f),a=i.draw_start_arrow||u?(s=l+(h-l)*(1-d),c+(f-c)*(1-d)):(s=l,c),i.color&&(t.setStrokeStyle(i.color),t.setFillStyle(i.color)),t.beginPath(),t.moveTo(s,a),t.lineTo(r,o),t.stroke(),t.closePath();var b,y,m,g,v=Math.atan2(f-c,h-l),_=Math.abs(i.arrowhead_length/Math.cos(i.arrowhead_angle));(i.draw_end_arrow||u)&&(b=v+Math.PI+i.arrowhead_angle,m=h+Math.cos(b)*_,g=f+Math.sin(b)*_,y=v+Math.PI-i.arrowhead_angle,Wa(t,m,g,h,f,h+Math.cos(y)*_,f+Math.sin(y)*_)),(i.draw_start_arrow||u)&&(b=v+i.arrowhead_angle,m=l+Math.cos(b)*_,g=c+Math.sin(b)*_,y=v-i.arrowhead_angle,Wa(t,m,g,l,c,l+Math.cos(y)*_,c+Math.sin(y)*_))}(s,a,u,o.render_options)}),s.restore();var t,e=s.measureText(this.text).width,n=h.text_justification,i=0;n===Ha.TextJustification.LEFT?i=a.x:n===Ha.TextJustification.CENTER?i=(u.x-a.x)/2+a.x-e/2:n===Ha.TextJustification.RIGHT&&(i=u.x-e);var r=h.text_position_vertical;return r===Ha.TextVerticalPosition.TOP?t=l.getStave().getYForTopText():r===Ha.TextVerticalPosition.BOTTOM&&(t=l.getStave().getYForBottomText(H.TEXT_HEIGHT_OFFSET_HACK)),s.save(),this.applyFontStyle(),s.fillText(this.text,i,t),s.restore(),this}}]),Ha);function Ha(t){var e;return function(t){if(!(t instanceof Ha))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==Ba(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Da(Ha).call(this))).setAttribute("type","StaveLine"),e.notes=t,e.text="",e.font={family:"Arial",size:10,weight:""},e.render_options={padding_left:4,padding_right:3,line_width:1,line_dash:null,rounded_end:!0,color:null,draw_start_arrow:!1,draw_end_arrow:!1,arrowhead_length:10,arrowhead_angle:Math.PI/8,text_position_vertical:Ha.TextVerticalPosition.TOP,text_justification:Ha.TextJustification.CENTER},e.setNotes(t),e}function Ya(t){return(Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function za(t){return(za=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xa(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ka(t,e,n){return e&&Xa(t.prototype,e),n&&Xa(t,n),t}function qa(t,e){return(qa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ja(t,e,n,i,r){var o=Qa.GLYPHS[t];new G(o.code,r).render(e,n+o.x_shift,i+o.y_shift)}var Qa=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qa(t,e)}(Za,E),Ka(Za,null,[{key:"createSustain",value:function(t){return new Za(t)}},{key:"createSostenuto",value:function(t){var e=new Za(t);return e.setStyle(Za.Styles.MIXED),e.setCustomText("Sost. Ped."),e}},{key:"createUnaCorda",value:function(t){var e=new Za(t);return e.setStyle(Za.Styles.TEXT),e.setCustomText("una corda","tre corda"),e}},{key:"GLYPHS",get:function(){return{pedal_depress:{code:"v36",x_shift:-10,y_shift:0},pedal_release:{code:"v5d",x_shift:-2,y_shift:3}}}},{key:"Styles",get:function(){return{TEXT:1,BRACKET:2,MIXED:3}}},{key:"StylesString",get:function(){return{text:Za.Styles.TEXT,bracket:Za.Styles.BRACKET,mixed:Za.Styles.MIXED}}}]),Ka(Za,[{key:"setCustomText",value:function(t,e){return this.custom_depress_text=t||"",this.custom_release_text=e||"",this}},{key:"setStyle",value:function(t){if(t<1&&3<t)throw new C.RERR("InvalidParameter","The style must be one found in PedalMarking.Styles");return this.style=t,this}},{key:"setLine",value:function(t){return this.line=t,this}},{key:"drawBracketed",value:function(){var l,c,h=this.context,f=!1,p=this;this.notes.forEach(function(t,e,n){f=!f;var i=t.getAbsoluteX(),r=t.getStave().getYForBottomText(p.line+3);if(i<l)throw new C.RERR("InvalidConfiguration","The notes provided must be in order of ascending x positions");var o=n[e+1]===t,s=n[e-1]===t,a=0;if(f)if(a=s?5:0,p.style!==Za.Styles.MIXED||s)h.beginPath(),h.moveTo(i,r-p.render_options.bracket_height),h.lineTo(i+a,r),h.stroke(),h.closePath();else if(p.custom_depress_text){var u=h.measureText(p.custom_depress_text).width;h.fillText(p.custom_depress_text,i-u/2,r),a=u/2+p.render_options.text_margin_right}else Ja("pedal_depress",h,i,r,p.render_options.glyph_point_size),a=20+p.render_options.text_margin_right;else a=o?-5:0,h.beginPath(),h.moveTo(l,c),h.lineTo(i+a,r),h.lineTo(i,r-p.render_options.bracket_height),h.stroke(),h.closePath();l=i+a,c=r})}},{key:"drawText",value:function(){var o=this.context,s=!1,a=this,u=a.render_options.glyph_point_size;this.notes.forEach(function(t){s=!s;var e=t.getStave(),n=t.getAbsoluteX(),i=e.getYForBottomText(a.line+3),r=0;s?a.custom_depress_text?(r=o.measureText(a.custom_depress_text).width,o.fillText(a.custom_depress_text,n-r/2,i)):Ja("pedal_depress",o,n,i,u):a.custom_release_text?(r=o.measureText(a.custom_release_text).width,o.fillText(a.custom_release_text,n-r/2,i)):Ja("pedal_release",o,n,i,u)})}},{key:"draw",value:function(){var t=this.checkContext();this.setRendered(),t.save(),t.setStrokeStyle(this.render_options.color),t.setFillStyle(this.render_options.color),t.setFont(this.font.family,this.font.size,this.font.weight),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Qa.DEBUG&&C.L("Vex.Flow.PedalMarking",e)}("Rendering Pedal Marking"),this.style===Za.Styles.BRACKET||this.style===Za.Styles.MIXED?(t.setLineWidth(this.render_options.bracket_line_width),this.drawBracketed()):this.style===Za.Styles.TEXT&&this.drawText(),t.restore()}}]),Za);function Za(t){var e;return function(t){if(!(t instanceof Za))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==Ya(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,za(Za).call(this))).setAttribute("type","PedalMarking"),e.notes=t,e.style=Za.TEXT,e.line=0,e.custom_depress_text="",e.custom_release_text="",e.font={family:"Times New Roman",size:12,weight:"italic bold"},e.render_options={bracket_height:10,text_margin_right:6,bracket_line_width:1,glyph_point_size:40,color:"black"},e}function $a(t){return($a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tu(){return(tu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function eu(t){return(eu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function iu(t,e,n){return e&&nu(t.prototype,e),n&&nu(t,n),t}function ru(t,e){return(ru=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ou=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ru(t,e)}(su,E),iu(su,null,[{key:"Positions",get:function(){return{TOP:1,BOTTOM:-1}}},{key:"PositionString",get:function(){return{top:su.Positions.TOP,bottom:su.Positions.BOTTOM}}}]),iu(su,[{key:"applyStyle",value:function(t){return t.setFont(this.font.family,this.font.size,this.font.weight),t.setStrokeStyle(this.render_options.color),t.setFillStyle(this.render_options.color),t.setLineWidth(this.render_options.line_width),this}},{key:"setDashed",value:function(t,e){return this.render_options.dashed=t,e&&(this.render_options.dash=e),this}},{key:"setFont",value:function(t){return this.font=tu({},this.font,t),this}},{key:"setLine",value:function(t){return this.line=t,this}},{key:"draw",value:function(){var t=this.context;this.setRendered();var e=0;switch(this.position){case su.Positions.TOP:e=this.start.getStave().getYForTopText(this.line);break;case su.Positions.BOTTOM:e=this.start.getStave().getYForBottomText(this.line+H.TEXT_HEIGHT_OFFSET_HACK);break;default:throw new C.RERR("InvalidPosition","The position ".concat(this.position," is invalid"))}var n={x:this.start.getAbsoluteX(),y:e},i={x:this.stop.getAbsoluteX(),y:e};!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];ou.DEBUG&&C.L("Vex.Flow.TextBracket",e)}("Rendering TextBracket: start:",n,"stop:",i,"y:",e);var r=this.render_options.bracket_height*this.position;t.save(),this.applyStyle(t),t.fillText(this.text,n.x,n.y);var o=t.measureText(this.text).width,s=t.measureText("M").width,a=n.y-s/2.5;t.setFont(this.font.family,this.font.size/1.4,this.font.weight),t.fillText(this.superscript,n.x+o+1,a);var u=t.measureText(this.superscript).width,l=t.measureText("M").width,c=n.x,h=a,f=i.x+this.stop.getGlyph().getWidth();this.position===su.Positions.TOP?(c+=o+u+5,h-=l/2.7):this.position===su.Positions.BOTTOM&&(h+=l/2.7,c+=o+2,this.render_options.underline_superscript||(c+=u)),this.render_options.dashed?(st.drawDashedLine(t,c,h,f,h,this.render_options.dash),this.render_options.show_bracket&&st.drawDashedLine(t,f,h+1*this.position,f,h+r,this.render_options.dash)):(t.beginPath(),t.moveTo(c,h),t.lineTo(f,h),this.render_options.show_bracket&&t.lineTo(f,h+r),t.stroke(),t.closePath()),t.restore()}}]),su);function su(t){var e,n=t.start,i=t.stop,r=t.text,o=void 0===r?"":r,s=t.superscript,a=void 0===s?"":s,u=t.position,l=void 0===u?su.Positions.TOP:u;return function(t){if(!(t instanceof su))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==$a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,eu(su).call(this))).setAttribute("type","TextBracket"),e.start=n,e.stop=i,e.text=o,e.superscript=a,e.position="string"==typeof l?su.PositionString[l]:l,e.line=1,e.font={family:"Serif",size:15,weight:"italic"},e.render_options={dashed:!0,dash:[5],color:"black",line_width:1,show_bracket:!0,bracket_height:8,underline_superscript:!0},e}function au(t){return(au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function cu(t,e,n){return(cu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hu(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function hu(t){return(hu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fu(t,e){return(fu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pu=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fu(t,e)}(du,re),lu(du.prototype,[{key:"getType",value:function(){return this.type}},{key:"setType",value:function(t){return this.type="string"==typeof t?wr.typeString[t]:t,this.setWidth(this.metrics.widths[this.type]),this}},{key:"getBoundingBox",value:function(){return cu(hu(du.prototype),"getBoundingBox",this).call(this)}},{key:"addToModifierContext",value:function(){return this}},{key:"preFormat",value:function(){return this.setPreFormatted(!0),this}},{key:"draw",value:function(){if(this.checkContext(),!this.stave)throw new C.RERR("NoStave","Can't draw without a stave.");!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];pu.DEBUG&&C.L("Vex.Flow.BarNote",e)}("Rendering bar line at: ",this.getAbsoluteX());var t=new wr(this.type);t.setX(this.getAbsoluteX()),t.draw(this.stave),this.setRendered()}}]),du);function du(){var t,e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:wr.type.SINGLE;!function(t){if(!(t instanceof du))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==au(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,hu(du).call(this,{duration:"b"}))).setAttribute("type","BarNote"),e.metrics={widths:{}};var i=wr.type;return e.metrics.widths=(uu(t={},i.SINGLE,8),uu(t,i.DOUBLE,12),uu(t,i.END,15),uu(t,i.REPEAT_BEGIN,14),uu(t,i.REPEAT_END,14),uu(t,i.REPEAT_BOTH,18),uu(t,i.NONE,0),t),e.ignore_ticks=!0,e.setType(n),e}function bu(t){return(bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function mu(t,e,n){return(mu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gu(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function gu(t){return(gu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vu(t,e){return(vu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),vu(t,e)}(Su,ge),yu(Su.prototype,[{key:"isRest",value:function(){return!0}},{key:"setStave",value:function(t){mu(gu(Su.prototype),"setStave",this).call(this,t)}},{key:"addToModifierContext",value:function(){return this}},{key:"preFormat",value:function(){return this.setPreFormatted(!0),this}},{key:"draw",value:function(){if(!this.stave)throw new C.RERR("NoStave","Can't draw without a stave.");this.setRendered();for(var t=0;t<this.modifiers.length;++t){var e=this.modifiers[t];e.setContext(this.context),e.draw()}}}]),Su);function Su(t){var e,n;if(function(t){if(!(t instanceof Su))throw new TypeError("Cannot call a class as a function")}(this),!t)throw new C.RuntimeError("BadArguments","Ghost note must have valid initialization data to identify duration.");if("string"==typeof t)n={duration:t};else{if("object"!==bu(t))throw new C.RuntimeError("BadArguments","Ghost note must have valid initialization data to identify duration.");n=t}return(e=function(t,e){return!e||"object"!==bu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,gu(Su).call(this,n))).setAttribute("type","GhostNote"),e.setWidth(0),e}function xu(t){return(xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wu(t){return(wu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Eu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Pu(t,e,n){return e&&Eu(t.prototype,e),n&&Eu(t,n),t}function Tu(t,e){return(Tu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ku=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Tu(t,e)}(Ou,Pe),Pu(Ou,null,[{key:"CATEGORY",get:function(){return"tremolo"}},{key:"YOFFSETSTEMUP",get:function(){return-9}},{key:"YOFFSETSTEMDOWN",get:function(){return-21}},{key:"XOFFSETSTEMUP",get:function(){return 6}},{key:"XOFFSETSTEMDOWN",get:function(){return-2}}]),Pu(Ou,[{key:"getCategory",value:function(){return Ou.CATEGORY}},{key:"draw",value:function(){if(this.checkContext(),!this.note||null==this.index)throw new C.RERR("NoAttachedNote","Can't draw Tremolo without a note and index.");this.setRendered();var t=this.note.getStemDirection();this.y_spacing=4*t;var e=this.note.getModifierStartXY(this.position,this.index).x,n=this.note.stem.getExtents().topY,i="gracenotes"===this.note.getCategory()?Zs.SCALE:1;n+=t<0?Ou.YOFFSETSTEMDOWN*i:Ou.YOFFSETSTEMUP*i,this.font={family:"Arial",size:16*i,weight:""},this.render_options={font_scale:35*i,stroke_px:3,stroke_spacing:10*i},e+=t<0?Ou.XOFFSETSTEMDOWN:Ou.XOFFSETSTEMUP;for(var r=0;r<this.num;++r)G.renderGlyph(this.context,e,n,this.render_options.font_scale,this.code),n+=this.y_spacing}}]),Ou);function Ou(t){var e;return function(t){if(!(t instanceof Ou))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==xu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,wu(Ou).call(this))).setAttribute("type","Tremolo"),e.num=t,e.note=null,e.index=null,e.position=Pe.Position.CENTER,e.code="v74",e}function Mu(t){return(Mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ru(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Lu(t){return(Lu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Au(t,e){return(Au=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Cu=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Au(t,e)}(Iu,re),Ru(Iu.prototype,[{key:"setLine",value:function(t){return this.line=t,this}},{key:"setHeight",value:function(t){return this.height=t,this}},{key:"setDecrescendo",value:function(t){return this.decrescendo=t,this}},{key:"preFormat",value:function(){return this.preFormatted=!0,this}},{key:"draw",value:function(){this.checkContext(),this.setRendered();var t,e,n,i,r,o,s=this.getTickContext(),a=Ei.getNextContext(s),u=this.getAbsoluteX(),l=a?a.getX():this.stave.x+this.stave.width,c=this.stave.getYForLine(this.line+-3)+1;!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Cu.DEBUG&&C.L("Vex.Flow.Crescendo",e)}("Drawing ",this.decrescendo?"decrescendo ":"crescendo ",this.height,"x",u-l),t=this.context,e={begin_x:u-this.render_options.extend_left,end_x:l+this.render_options.extend_right,y:c+this.render_options.y_shift,height:this.height,reverse:this.decrescendo},n=e.begin_x,i=e.end_x,r=e.y,o=e.height/2,t.beginPath(),e.reverse?(t.moveTo(n,r-o),t.lineTo(i,r),t.lineTo(n,r+o)):(t.moveTo(i,r-o),t.lineTo(n,r),t.lineTo(i,r+o)),t.stroke(),t.closePath()}}]),Iu);function Iu(t){var e;return function(t){if(!(t instanceof Iu))throw new TypeError("Cannot call a class as a function")}(this),(e=function(t,e){return!e||"object"!==Mu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Lu(Iu).call(this,t))).setAttribute("type","Crescendo"),e.decrescendo=!1,e.line=t.line||0,e.height=15,C.Merge(e.render_options,{extend_left:0,extend_right:0,y_shift:0}),e}function Nu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Fu=C.MakeException("ParserError");function Bu(t){return void 0!==t.matchedString?t.matchedString:t.results?Bu(t.results):1===t.length?Bu(t[0]):0===t.length?null:t.map(Bu)}var Du=(Nu(ju.prototype,[{key:"parse",value:function(t){this.line=t,this.pos=0,this.errorPos=-1;var e=this.expect(this.grammar.begin());return e.errorPos=this.errorPos,e}},{key:"matchFail",value:function(t){-1===this.errorPos&&(this.errorPos=this.pos),this.pos=t}},{key:"matchSuccess",value:function(){this.errorPos=-1}},{key:"matchToken",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1]?new RegExp("^(("+t+"))"):new RegExp("^(("+t+")\\s*)"),n=this.line.slice(this.pos).match(e);return null!==n?{success:!0,matchedString:n[2],incrementPos:n[1].length,pos:this.pos}:{success:!1,pos:this.pos}}},{key:"expectOne",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=[],i=this.pos,r=!0,o=!1;e=!0===e||!0===t.maybe;for(var s=0;s<t.expect.length;s++){var a=t.expect[s],u=this.pos,l=this.expect(a);if(l.success){if(n.push(l),o=!0,t.or)break}else if(r=!1,!t.or){this.pos=u;break}}var c=t.or&&o||r,h=c||!0===e;return e&&!c&&(this.pos=i),h?this.matchSuccess():this.matchFail(i),{success:h,results:n,numMatches:c?1:0}}},{key:"expectOneOrMore",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=[],i=this.pos,r=0,o=!0;do{var s=this.expectOne(t);s.success?(r++,n.push(s.results)):o=!1}while(o);var a=0<r||!0===e;return!e||0<r||(this.pos=i),a?this.matchSuccess():this.matchFail(i),{success:a,results:n,numMatches:r}}},{key:"expectZeroOrMore",value:function(t){return this.expectOneOrMore(t,!0)}},{key:"expect",value:function(t){var e;if(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Du.DEBUG&&C.L("Vex.Flow.Parser",e)}("Evaluating rules:",t),!t)throw new Fu("Invalid Rule: "+t,t);var n=t.bind(this.grammar)();if(n.token)(e=this.matchToken(n.token,!0===n.noSpace)).success&&(this.pos+=e.incrementPos);else{if(!n.expect)throw new Fu("Bad grammar! No `token` or `expect` property",n);e=n.oneOrMore?this.expectOneOrMore(n):n.zeroOrMore?this.expectZeroOrMore(n):this.expectOne(n)}return e.matches=[],e.results&&e.results.forEach(function(t){return e.matches.push(Bu(t))}),n.run&&e.success&&n.run(e),e}}]),ju);function ju(t){!function(t){if(!(t instanceof ju))throw new TypeError("Cannot call a class as a function")}(this),this.grammar=t}function Vu(t){return(Vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gu(){return(Gu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function Wu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Hu(t,e,n){return e&&Uu(t.prototype,e),n&&Uu(t,n),t}function Yu(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];$u.DEBUG&&C.L("Vex.Flow.EasyScore",e)}var zu=C.MakeException("EasyScoreError"),Xu=(Hu(Ju,[{key:"begin",value:function(){return this.LINE}},{key:"LINE",value:function(){return{expect:[this.PIECE,this.PIECES,this.EOL]}}},{key:"PIECE",value:function(){var t=this;return{expect:[this.CHORDORNOTE,this.PARAMS],run:function(){return t.builder.commitPiece()}}}},{key:"PIECES",value:function(){return{expect:[this.COMMA,this.PIECE],zeroOrMore:!0}}},{key:"PARAMS",value:function(){return{expect:[this.DURATION,this.TYPE,this.DOTS,this.OPTS]}}},{key:"CHORDORNOTE",value:function(){return{expect:[this.CHORD,this.SINGLENOTE],or:!0}}},{key:"CHORD",value:function(){var e=this;return{expect:[this.LPAREN,this.NOTES,this.RPAREN],run:function(t){return e.builder.addChord(t.matches[1])}}}},{key:"NOTES",value:function(){return{expect:[this.NOTE],oneOrMore:!0}}},{key:"NOTE",value:function(){return{expect:[this.NOTENAME,this.ACCIDENTAL,this.OCTAVE]}}},{key:"SINGLENOTE",value:function(){var e=this;return{expect:[this.NOTENAME,this.ACCIDENTAL,this.OCTAVE],run:function(t){return e.builder.addSingleNote(t.matches[0],t.matches[1],t.matches[2])}}}},{key:"ACCIDENTAL",value:function(){return{expect:[this.ACCIDENTALS],maybe:!0}}},{key:"DOTS",value:function(){var e=this;return{expect:[this.DOT],zeroOrMore:!0,run:function(t){return e.builder.setNoteDots(t.matches[0])}}}},{key:"TYPE",value:function(){var e=this;return{expect:[this.SLASH,this.MAYBESLASH,this.TYPES],maybe:!0,run:function(t){return e.builder.setNoteType(t.matches[2])}}}},{key:"DURATION",value:function(){var e=this;return{expect:[this.SLASH,this.DURATIONS],maybe:!0,run:function(t){return e.builder.setNoteDuration(t.matches[1])}}}},{key:"OPTS",value:function(){return{expect:[this.LBRACKET,this.KEYVAL,this.KEYVALS,this.RBRACKET],maybe:!0}}},{key:"KEYVALS",value:function(){return{expect:[this.COMMA,this.KEYVAL],zeroOrMore:!0}}},{key:"KEYVAL",value:function(){var e=this;return{expect:[this.KEY,this.EQUALS,this.VAL],run:function(t){return e.builder.addNoteOption(t.matches[0],t.matches[2].slice(1,-1))}}}},{key:"VAL",value:function(){return{expect:[this.SVAL,this.DVAL],or:!0}}},{key:"KEY",value:function(){return{token:"[a-zA-Z][a-zA-Z0-9]*"}}},{key:"DVAL",value:function(){return{token:'["][^"]*["]'}}},{key:"SVAL",value:function(){return{token:"['][^']*[']"}}},{key:"NOTENAME",value:function(){return{token:"[a-gA-G]"}}},{key:"OCTAVE",value:function(){return{token:"[0-9]+"}}},{key:"ACCIDENTALS",value:function(){return{token:"bbs|bb|bss|bs|b|db|d|##|#|n|\\+\\+-|\\+-|\\+\\+|\\+|k|o"}}},{key:"DURATIONS",value:function(){return{token:"[0-9whq]+"}}},{key:"TYPES",value:function(){return{token:"[rRsSxX]"}}},{key:"LPAREN",value:function(){return{token:"[(]"}}},{key:"RPAREN",value:function(){return{token:"[)]"}}},{key:"COMMA",value:function(){return{token:"[,]"}}},{key:"DOT",value:function(){return{token:"[.]"}}},{key:"SLASH",value:function(){return{token:"[/]"}}},{key:"MAYBESLASH",value:function(){return{token:"[/]?"}}},{key:"EQUALS",value:function(){return{token:"[=]"}}},{key:"LBRACKET",value:function(){return{token:"\\["}}},{key:"RBRACKET",value:function(){return{token:"\\]"}}},{key:"EOL",value:function(){return{token:"$"}}}]),Ju),Ku=(Hu(qu,[{key:"reset",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.options={stem:"auto",clef:"treble"},this.elements={notes:[],accidentals:[]},this.rollingDuration="8",this.resetPiece(),Gu(this.options,t)}},{key:"getFactory",value:function(){return this.factory}},{key:"getElements",value:function(){return this.elements}},{key:"addCommitHook",value:function(t){this.commitHooks.push(t)}},{key:"resetPiece",value:function(){Yu("resetPiece"),this.piece={chord:[],duration:this.rollingDuration,dots:0,type:void 0,options:{}}}},{key:"setNoteDots",value:function(t){Yu("setNoteDots:",t),t&&(this.piece.dots=t.length)}},{key:"setNoteDuration",value:function(t){Yu("setNoteDuration:",t),this.rollingDuration=this.piece.duration=t||this.rollingDuration}},{key:"setNoteType",value:function(t){Yu("setNoteType:",t),t&&(this.piece.type=t)}},{key:"addNoteOption",value:function(t,e){Yu("addNoteOption: key:",t,"value:",e),this.piece.options[t]=e}},{key:"addNote",value:function(t,e,n){Yu("addNote:",t,e,n),this.piece.chord.push({key:t,accid:e,octave:n})}},{key:"addSingleNote",value:function(t,e,n){Yu("addSingleNote:",t,e,n),this.addNote(t,e,n)}},{key:"addChord",value:function(t){var e=this;Yu("startChord"),"object"!==Vu(t[0])?this.addSingleNote(t[0]):t.forEach(function(t){t&&e.addNote.apply(e,function(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t))}),Yu("endChord")}},{key:"commitPiece",value:function(){var e=this;Yu("commitPiece");var n=this.factory;if(n){var i=Gu({},this.options,this.piece.options),t=i.stem,r=i.clef,o="auto"===t.toLowerCase(),s=o||"up"!==t.toLowerCase()?We.STEM_DOWN:We.STEM_UP,a=this.piece,u=a.chord,l=a.duration,c=a.dots,h=a.type,f=u.map(function(t){return t.key+"/"+t.octave}),p=n.StaveNote({keys:f,duration:l,dots:c,type:h,clef:r,auto_stem:o});o||p.setStemDirection(s);var d=u.map(function(t){return t.accid||null});d.forEach(function(t,e){t&&p.addAccidental(e,n.Accidental({type:t}))});for(var b=0;b<c;b++)p.addDotToAll();this.commitHooks.forEach(function(t){return t(i,p,e)}),this.elements.notes.push(p),this.elements.accidentals.concat(d),this.resetPiece()}}}]),qu);function qu(t){Wu(this,qu),this.factory=t,this.commitHooks=[],this.reset()}function Ju(t){Wu(this,Ju),this.builder=t}function Qu(t,e){var n=t.id;void 0!==n&&e.setAttribute("id",n)}function Zu(t,e){t.class&&t.class.split(/\s*,\s*/).forEach(function(t){return e.addClass(t)})}var $u=(Hu(tl,[{key:"set",value:function(t){return Gu(this.defaults,t),this}},{key:"setOptions",value:function(t){var e=this;return this.options=Gu({factory:null,builder:null,commitHooks:[Qu,Zu,mi.easyScoreHook],throwOnError:!1},t),this.factory=this.options.factory,this.builder=this.options.builder||new Ku(this.factory),this.grammar=new Xu(this.builder),this.parser=new Du(this.grammar),this.options.commitHooks.forEach(function(t){return e.addCommitHook(t)}),this}},{key:"setContext",value:function(t){return this.factory&&this.factory.setContext(t),this}},{key:"parse",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.builder.reset(e);var n=this.parser.parse(t);if(!n.success&&this.options.throwOnError)throw new zu("Error parsing line: "+t,n);return n}},{key:"beam",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.factory.Beam({notes:t,options:e}),t}},{key:"tuplet",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.factory.Tuplet({notes:t,options:e}),t}},{key:"notes",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e=Gu({clef:this.defaults.clef,stem:this.defaults.stem},e),this.parse(t,e),this.builder.getElements().notes}},{key:"voice",value:function(t,e){return e=Gu({time:this.defaults.time},e),this.factory.Voice(e).addTickables(t)}},{key:"addCommitHook",value:function(t){return this.builder.addCommitHook(t)}}]),tl);function tl(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Wu(this,tl),this.setOptions(t),this.defaults={clef:"treble",time:"4/4",stem:"auto"}}function el(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function nl(){return(nl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var il=C.MakeException("FactoryError");function rl(t,e){var n=0<arguments.length&&void 0!==t?t:{},i=1<arguments.length?e:void 0,r=i.options;return(n=nl(i,n)).options=nl(r,n.options),n}var ol,sl,al=(sl=[{key:"newFromElementId",value:function(t){return new ul({renderer:{elementId:t,width:1<arguments.length&&void 0!==arguments[1]?arguments[1]:500,height:2<arguments.length&&void 0!==arguments[2]?arguments[2]:200}})}}],el((ol=ul).prototype,[{key:"reset",value:function(){this.renderQ=[],this.systems=[],this.staves=[],this.voices=[],this.stave=null}},{key:"getOptions",value:function(){return this.options}},{key:"setOptions",value:function(t){for(var e=["stave","renderer","font"],n=0;n<e.length;n++){var i=e[n];nl(this.options[i],t[i])}null===this.options.renderer.elementId&&!this.options.renderer.context||this.initRenderer(),this.reset()}},{key:"initRenderer",value:function(){var t=this.options.renderer,e=t.elementId,n=t.backend,i=t.width,r=t.height,o=t.background;if(""===e)throw new il("HTML DOM element not set in Factory");this.context=st.buildContext(e,n,i,r,o)}},{key:"getContext",value:function(){return this.context}},{key:"setContext",value:function(t){return this.context=t,this}},{key:"getStave",value:function(){return this.stave}},{key:"getVoices",value:function(){return this.voices}},{key:"space",value:function(t){return this.options.stave.space*t}},{key:"Stave",value:function(t){t=rl(t,{x:0,y:0,width:this.options.renderer.width-this.space(1),options:{spacing_between_lines_px:this.options.stave.space}});var e=new Go(t.x,t.y,t.width,t.options);return this.staves.push(e),e.setContext(this.context),this.stave=e}},{key:"TabStave",value:function(t){t=rl(t,{x:0,y:0,width:this.options.renderer.width-this.space(1),options:{spacing_between_lines_px:1.3*this.options.stave.space}});var e=new Xo(t.x,t.y,t.width,t.options);return this.staves.push(e),e.setContext(this.context),this.stave=e}},{key:"StaveNote",value:function(t){var e=new We(t);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"GhostNote",value:function(t){var e=new _u(t);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"TextNote",value:function(t){var e=new Qr(t);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"BarNote",value:function(t){t=rl(t,{type:"single",options:{}});var e=new pu(t.type);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"ClefNote",value:function(t){t=rl(t,{type:"treble",options:{size:"default"}});var e=new xs(t.type,t.options.size,t.options.annotation);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"TimeSigNote",value:function(t){t=rl(t,{time:"4/4",options:{}});var e=new Fs(t.time);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"KeySigNote",value:function(t){var e=new Ms(t.key,t.cancelKey,t.alterKey);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"TabNote",value:function(t){var e=new es(t);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"GraceNote",value:function(t){var e=new Zs(t);return this.stave&&e.setStave(this.stave),e.setContext(this.context),e}},{key:"GraceNoteGroup",value:function(t){var e=new Gn(t.notes,t.slur);return e.setContext(this.context),e}},{key:"Accidental",value:function(t){t=rl(t,{type:null,options:{}});var e=new cn(t.type);return e.setContext(this.context),e}},{key:"Annotation",value:function(t){t=rl(t,{text:"p",vJustify:"below",hJustify:"center",fontFamily:"Times",fontSize:14,fontWeight:"bold italic",options:{}});var e=new Di(t.text);return e.setJustification(t.hJustify),e.setVerticalJustification(t.vJustify),e.setFont(t.fontFamily,t.fontSize,t.fontWeight),e.setContext(this.context),e}},{key:"Articulation",value:function(t){t=rl(t,{type:"a.",position:"above",options:{}});var e=new mi(t.type);return e.setPosition(t.position),e.setContext(this.context),e}},{key:"TextDynamics",value:function(t){t=rl(t,{text:"p",duration:"q",dots:0,line:0,options:{}});var e=new Na({text:t.text,line:t.line,duration:t.duration,dots:t.dots});return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"Fingering",value:function(t){t=rl(t,{number:"0",position:"left",options:{}});var e=new qe(t.number);return e.setPosition(t.position),e.setContext(this.context),e}},{key:"StringNumber",value:function(t){t=rl(t,{number:"0",position:"left",options:{}});var e=new ei(t.number);return e.setPosition(t.position),e.setContext(this.context),e}},{key:"TickContext",value:function(){return(new Ei).setContext(this.context)}},{key:"ModifierContext",value:function(){return new nr}},{key:"MultiMeasureRest",value:function(t){var e=new ds(t.number_of_measures,t);return e.setContext(this.context),this.renderQ.push(e),e}},{key:"Voice",value:function(t){t=rl(t,{time:"4/4",options:{}});var e=new Bt(t.time);return this.voices.push(e),e}},{key:"StaveConnector",value:function(t){t=rl(t,{top_stave:null,bottom_stave:null,type:"double",options:{}});var e=new Yt(t.top_stave,t.bottom_stave);return e.setType(t.type).setContext(this.context),this.renderQ.push(e),e}},{key:"Formatter",value:function(){return new lr}},{key:"Tuplet",value:function(t){t=rl(t,{notes:[],options:{}});var e=new _t(t.notes,t.options).setContext(this.context);return this.renderQ.push(e),e}},{key:"Beam",value:function(t){t=rl(t,{notes:[],options:{autoStem:!1,secondaryBeamBreaks:[]}});var e=new Rt(t.notes,t.options.autoStem).setContext(this.context);return e.breakSecondaryAt(t.options.secondaryBeamBreaks),this.renderQ.push(e),e}},{key:"Curve",value:function(t){t=rl(t,{from:null,to:null,options:{}});var e=new ka(t.from,t.to,t.options).setContext(this.context);return this.renderQ.push(e),e}},{key:"StaveTie",value:function(t){t=rl(t,{from:null,to:null,first_indices:[0],last_indices:[0],text:null,options:{direction:void 0}});var e=new Pn({first_note:t.from,last_note:t.to,first_indices:t.first_indices,last_indices:t.last_indices},t.text);return t.options.direction&&e.setDirection(t.options.direction),e.setContext(this.context),this.renderQ.push(e),e}},{key:"StaveLine",value:function(t){t=rl(t,{from:null,to:null,first_indices:[0],last_indices:[0],options:{}});var e=new Ua({first_note:t.from,last_note:t.to,first_indices:t.first_indices,last_indices:t.last_indices});return t.options.text&&e.setText(t.options.text),t.options.font&&e.setFont(t.options.font),e.setContext(this.context),this.renderQ.push(e),e}},{key:"VibratoBracket",value:function(t){t=rl(t,{from:null,to:null,options:{harsh:!1}});var e=new us({start:t.from,stop:t.to});return t.options.line&&e.setLine(t.options.line),t.options.harsh&&e.setHarsh(t.options.harsh),e.setContext(this.context),this.renderQ.push(e),e}},{key:"TextBracket",value:function(t){t=rl(t,{from:null,to:null,text:"",options:{superscript:"",position:1}});var e=new ou({start:t.from,stop:t.to,text:t.text,superscript:t.options.superscript,position:t.options.position});return t.options.line&&e.setLine(t.options.line),t.options.font&&e.setFont(t.options.font),e.setContext(this.context),this.renderQ.push(e),e}},{key:"System",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t.factory=this;var e=new yl(t).setContext(this.context);return this.systems.push(e),e}},{key:"EasyScore",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t.factory=this,new $u(t)}},{key:"PedalMarking",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t=rl(t,{notes:[],options:{style:"mixed"}});var e=new Qa(t.notes);return e.setStyle(Qa.StylesString[t.options.style]),e.setContext(this.context),this.renderQ.push(e),e}},{key:"NoteSubGroup",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t=rl(t,{notes:[],options:{}});var e=new vn(t.notes);return e.setContext(this.context),e}},{key:"draw",value:function(){var e=this;this.systems.forEach(function(t){return t.setContext(e.context).format()}),this.staves.forEach(function(t){return t.setContext(e.context).draw()}),this.voices.forEach(function(t){return t.setContext(e.context).draw()}),this.renderQ.forEach(function(t){t.isRendered()||t.setContext(e.context).draw()}),this.systems.forEach(function(t){return t.setContext(e.context).draw()}),this.reset()}}]),el(ol,sl),ul);function ul(t){!function(t){if(!(t instanceof ul))throw new TypeError("Cannot call a class as a function")}(this),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];al.DEBUG&&C.L("Vex.Flow.Factory",e)}("New factory: ",t);var e={stave:{space:10},renderer:{context:null,elementId:"",backend:st.Backends.SVG,width:500,height:200,background:"#FFF"},font:{face:"Arial",point:10,style:""}};this.options=e,this.setOptions(t)}function ll(t){return(ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cl(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function hl(t,e,n){return(hl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fl(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function fl(t){return(fl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pl(t,e){return(pl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dl(){return(dl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function bl(t,e){var n=e.options;return(t=dl(e,t)).options=dl(n,t.options),t}var yl=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pl(t,e)}(ml,E),cl(ml.prototype,[{key:"setOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.options=bl(t,{x:10,y:10,width:500,connector:null,spaceBetweenStaves:12,factory:null,debugFormatter:!1,formatIterations:0,options:{}}),this.factory=this.options.factory||new al({renderer:{el:null}})}},{key:"setContext",value:function(t){return hl(fl(ml.prototype),"setContext",this).call(this,t),this.factory.setContext(t),this}},{key:"addConnector",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"double";return this.connector=this.factory.StaveConnector({top_stave:this.parts[0].stave,bottom_stave:this.parts[this.parts.length-1].stave,type:t}),this.connector}},{key:"addStave",value:function(e){var n=this;return(e=bl(e,{stave:null,voices:[],spaceAbove:0,spaceBelow:0,debugNoteMetrics:!1,options:{left_bar:!1}})).stave||(e.stave=this.factory.Stave({x:this.options.x,y:this.options.y,width:this.options.width,options:e.options})),e.voices.forEach(function(t){return t.setContext(n.context).setStave(e.stave).getTickables().forEach(function(t){return t.setStave(e.stave)})}),this.parts.push(e),e.stave}},{key:"format",value:function(){var e=this,n=new lr;this.formatter=n;var i=this.options.y,r=0,o=[],s=[];this.parts.forEach(function(t){i+=t.stave.space(t.spaceAbove),t.stave.setY(i),n.joinVoices(t.voices),i+=t.stave.space(t.spaceBelow),i+=t.stave.space(e.options.spaceBetweenStaves),t.debugNoteMetrics&&(s.push({y:i,voice:t.voices[0]}),i+=15),o=o.concat(t.voices),r=Math.max(r,t.stave.getNoteStartX())}),this.parts.forEach(function(t){return t.stave.setNoteStartX(r)});var t=this.options.width-(r-this.options.x)-re.STAVEPADDING;n.format(o,t);for(var a=0;a<this.options.formatIterations;a++)n.tune();this.startX=r,this.debugNoteMetricsYs=s,this.lastY=i}},{key:"draw",value:function(){var n=this.checkContext();this.setRendered(),this.options.debugFormatter&&lr.plotDebugging(n,this.formatter,this.startX,this.options.y,this.lastY),this.debugNoteMetricsYs.forEach(function(e){e.voice.getTickables().forEach(function(t){return re.plotMetrics(n,t,e.y)})})}}]),ml);function ml(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){if(!(t instanceof ml))throw new TypeError("Cannot call a class as a function")}(this),(t=function(t,e){return!e||"object"!==ll(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,fl(ml).call(this))).setAttribute("type","System"),t.setOptions(e),t.parts=[],t}C.Flow=H,C.Flow.Element=E,C.Flow.Fraction=d,C.Flow.Renderer=st,C.Flow.Formatter=lr,C.Flow.Music=tn,C.Flow.Glyph=G,C.Flow.Stave=Go,C.Flow.StaveNote=We,C.Flow.StaveModifier=yr,C.Flow.StaveTempo=Hr,C.Flow.Voice=Bt,C.Flow.Accidental=cn,C.Flow.Beam=Rt,C.Flow.StaveTie=Pn,C.Flow.TabStave=Xo,C.Flow.TabNote=es,C.Flow.Bend=Yi,C.Flow.Vibrato=Zi,C.Flow.VibratoBracket=us,C.Flow.Note=re,C.Flow.ModifierContext=nr,C.Flow.MultiMeasureRest=ds,C.Flow.TickContext=Ei,C.Flow.Articulation=mi,C.Flow.Annotation=Di,C.Flow.Barline=wr,C.Flow.NoteHead=fe,C.Flow.StaveConnector=Yt,C.Flow.ClefNote=xs,C.Flow.KeySignature=vo,C.Flow.KeySigNote=Ms,C.Flow.TimeSignature=ko,C.Flow.TimeSigNote=Fs,C.Flow.Stem=pt,C.Flow.TabTie=An,C.Flow.Clef=ho,C.Flow.Dot=Ae,C.Flow.Modifier=Pe,C.Flow.TabSlide=Us,C.Flow.Tuplet=_t,C.Flow.GraceNote=Zs,C.Flow.GraceTabNote=sa,C.Flow.Tuning=ca,C.Flow.KeyManager=pa,C.Flow.StaveHairpin=_a,C.Flow.BoundingBox=L,C.Flow.Stroke=Kn,C.Flow.TextNote=Qr,C.Flow.Curve=ka,C.Flow.TextDynamics=Na,C.Flow.StaveLine=Ua,C.Flow.Ornament=Li,C.Flow.PedalMarking=Qa,C.Flow.TextBracket=ou,C.Flow.FretHandFinger=qe,C.Flow.Repetition=Rr,C.Flow.BarNote=pu,C.Flow.GhostNote=_u,C.Flow.NoteSubGroup=vn,C.Flow.GraceNoteGroup=Gn,C.Flow.Tremolo=ku,C.Flow.StringNumber=ei,C.Flow.Crescendo=Cu,C.Flow.Volta=Io,C.Flow.Font=A,C.Flow.System=yl,C.Flow.Factory=al,C.Flow.Parser=Du,C.Flow.EasyScore=$u,C.Flow.Registry=_,e.default=C}],r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)).default;function r(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var n,i},"object"==typeof n&&"object"==typeof e?e.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof n?n.Vex=r():i.Vex=r()},{}]},{},[1]);
